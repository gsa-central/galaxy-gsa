(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1057:function(e,t,n){"use strict";var l=n(654);n.n(l).a},1058:function(e,t,n){"use strict";var l=n(655);n.n(l).a},1059:function(e,t,n){"use strict";var l=n(657);n.n(l).a},1060:function(e,t,n){"use strict";var l=n(658);n.n(l).a},591:function(e,t,n){"use strict";n.r(t);var l=n(656),i=n(2),a=n.n(i),s={props:{element:{required:!0}},data:function(){return{titleDiscardButton:a()("Remove this dataset from the list"),titleElementName:a()("Click to rename"),isSelected:!1}},components:{ClickToEdit:n(866).a},methods:{l:function(e){return a()(e)},clickDiscard:function(){this.$emit("element-is-discarded",this.element)},toString:function(){return"ListDatasetCollectionElementView()"}}},r=(n(1059),n(5)),o=Object(r.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collection-element",on:{click:function(t){return e.$emit("element-is-selected",e.element)}}},[n("click-to-edit",{attrs:{title:e.titleElementName},model:{value:e.element.name,callback:function(t){e.$set(e.element,"name",t)},expression:"element.name"}}),e._v(" "),n("button",{staticClass:"discard-btn btn-sm",attrs:{title:e.titleDiscardButton},on:{click:e.clickDiscard}},[e._v("\n        "+e._s(e.l("Discard"))+"\n    ")])],1)}),[],!1,null,null,null).exports,c=n(24),d=n(0),u=n.n(d),m=u.a;u.a.fn.extend({hoverhighlight:function(e,t){return e=e||"body",this.length?(m(this).each((function(){var n=m(this),l=n.data("target");l&&n.mouseover((function(n){m(l,e).css({background:t})})).mouseout((function(e){m(l).css({background:""})}))})),this):this}});var v=n(8),h=n(15),_=n(867),f=n.n(_);v.default.use(h.a);var p={mixins:[l.a],created:function(){this._instanceSetUp(),this._elementsSetUp(),this.saveOriginalNames()},components:{DatasetCollectionElementView:o,draggable:f.a},data:function(){return{state:"build",titleUndoButton:a()("Undo all reordering and discards"),titleDeselectButton:a()("De-select all selected datasets"),noElementsHeader:a()("No datasets were selected"),discardedElementsHeader:a()("No elements left. Would you like to"),invalidHeader:a()("The following selections could not be included due to problems:"),allInvalidElementsPartOne:a()("At least one element is needed for the collection. You may need to"),cancelText:a()("cancel"),startOverText:a()("start over"),allInvalidElementsPartTwo:a()("and reselect new elements."),errorText:a()("Galaxy could not be reached and may be updating.  Try again in a few minutes."),workingElements:[],originalNamedElements:[],invalidElements:[],selectedDatasetElems:[],removeExtensions:!0,duplicateNames:[]}},props:{autoscrollDist:{type:Number,required:!1,default:24},highlightClr:{type:String,required:!1,default:"rgba( 64, 255, 255, 1.0 )"}},computed:{atLeastOneDatasetIsSelected:function(){return this.selectedDatasetElems.length>0},getSelectedDatasetElems:function(){return this.selectedDatasetElems},returnWorkingElements:function(){return this.workingElements},noMoreValidDatasets:function(){return 0==this.workingElements.length},returnInvalidElementsLength:function(){return this.invalidElements.length>0},returnInvalidElements:function(){return this.invalidElements},allElementsAreInvalid:function(){return this.initialElements.length==this.invalidElements.length},noElementsSelected:function(){return 0==this.initialElements.length},noElementsLeft:function(){return 0==this.workingElements.length},showDuplicateError:function(){return this.duplicateNames.length>0}},methods:{l:function(e){return a()(e)},_instanceSetUp:function(){this.selectedDatasetElems=[]},_elementsSetUp:function(){this.invalidElements=[],this.workingElements=[],this.workingElements=this.initialElements.slice(0),this._ensureElementIds(),this._validateElements(),this._mangleDuplicateNames()},_ensureElementIds:function(){return this.workingElements.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"id")||(e.id=e._uid)})),this.workingElements},_validateElements:function(){var e=this;return this.workingElements=this.workingElements.filter((function(t){var n=e._isElementInvalid(t);return n&&e.invalidElements.push(t.name+"  "+n),!n})),this.workingElements},_isElementInvalid:function(e){return"dataset_collection"===e.history_content_type?a()("is a collection, this is not allowed"):e.state===c.a.OK||c.a.NOT_READY_STATES.includes(e.state)?e.deleted||e.purged?a()("has been deleted or purged"):null:a()("has errored, is paused, or is not accessible")},_mangleDuplicateNames:function(){var e=1,t={};this.workingElements.forEach((function(n){for(var l=n.name;Object.prototype.hasOwnProperty.call(t,l);)l="".concat(n.name," (").concat(e,")"),e+=1;n.name=l,t[n.name]=!0}))},saveOriginalNames:function(){this.originalNamedElements=JSON.parse(JSON.stringify(this.workingElements))},getOriginalNames:function(){this.workingElements=JSON.parse(JSON.stringify(this.originalNamedElements))},elementSelected:function(e){this.selectedDatasetElems.includes(e.id)?this.selectedDatasetElems.splice(this.selectedDatasetElems.indexOf(e.id),1):this.selectedDatasetElems.push(e.id)},elementDiscarded:function(e){return this.$delete(this.workingElements,this.workingElements.indexOf(e)),this.workingElements},clickClearAll:function(){this.selectedDatasetElems=[]},clickedCreate:function(e){var t=this;if(this.checkForDuplicates(),"error"!==this.state)return this.$emit("clicked-create",this.workingElements,this.collectionName,this.hideSourceItems),this.creationFn(this.workingElements,e,this.hideSourceItems).done(this.oncreate).fail((function(){t.state="error"}))},checkForDuplicates:function(){var e=this,t={};this.duplicateNames=[];var n=!0;this.workingElements.forEach((function(l){Object.prototype.hasOwnProperty.call(t,l.name)&&(n=!1,e.duplicateNames.push(l.name)),t[l.name]=!0})),this.state=n?"build":"error"},reset:function(){this._instanceSetUp(),this.getOriginalNames()},toString:function(){return"ListCollectionCreator"}}},g=(n(1060),Object(r.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-collection-creator"},["error"==e.state?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n            "+e._s(e.errorText)+"\n        ")])],1):n("div",[e.noElementsSelected?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.noElementsHeader)+"\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):e.allElementsAreInvalid?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                "+e._s(e.invalidHeader)+"\n                "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                        "+e._s(t)+"\n                    ")])})),0),e._v("\n                "+e._s(e.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.cancelText)+"\n                ")]),e._v("\n                "+e._s(e.allInvalidElementsPartTwo)+"\n            ")]),e._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e.oncancel}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])])],1):n("div",[e.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                    "+e._s(e.invalidHeader)+"\n                    "),n("ul",e._l(e.returnInvalidElements,(function(t){return n("li",{key:t},[e._v("\n                            "+e._s(t)+"\n                        ")])})),0)])],1):e._e(),e._v(" "),e.showDuplicateError?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n                    "+e._s(e.l("Collections cannot have duplicated names. The following list names are duplicated: "))+"\n                    "),n("ol",e._l(e.duplicateNames,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0),e._v("\n                    "+e._s(e.l("Please fix these duplicates and try again."))+"\n                ")])],1):e._e(),e._v(" "),n("collection-creator",{attrs:{oncancel:e.oncancel,hideSourceItems:e.hideSourceItems,creationFn:e.creationFn},on:{onUpdateHideSourceItems:e.onUpdateHideSourceItems,"clicked-create":e.clickedCreate},scopedSlots:e._u([{key:"help-content",fn:function(){return[n("p",[e._v("\n                        "+e._s(e.l(["Collections of datasets are permanent, ordered lists of datasets that can be passed to tools ","and workflows in order to have analyses done on each member of the entire group. This interface allows ","you to create a collection and re-order the final collection."].join("")))+"\n                    ")]),e._v(" "),n("ul",[n("li",[e._v("\n                            "+e._s(e.l("Rename elements in the list by clicking on"))+"\n                            "),n("i",{attrs:{"data-target":".collection-element .name"}},[e._v("\n                                "+e._s(e.l("the existing name"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Discard elements from the final created list by clicking on the "))+"\n                            "),n("i",{attrs:{"data-target":".collection-element .discard"}},[e._v("\n                                "+e._s(e.l("Discard"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("button."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Reorder the list by clicking and dragging elements. Select multiple elements by clicking on"))+"\n                            "),n("i",{attrs:{"data-target":".collection-element"}},[e._v("\n                                "+e._s(e.l("them"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("and you can then move those selected by dragging the entire group. Deselect them by clicking them again or by clicking the"))+"\n                            "),n("i",{attrs:{"data-target":".clear-selected"}},[e._v("\n                                "+e._s(e.l("Clear selected"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("link."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Click the"))+"\n                            "),n("i",{attrs:{"data-target":".reset"}},[e._v("\n                                "+e._s(e.l("Start over"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("link to begin again as if you had just opened the interface."))+"\n                        ")]),e._v(" "),n("li",[e._v("\n                            "+e._s(e.l("Click the"))+"\n                            "),n("i",{attrs:{"data-target":".cancel-create"}},[e._v("\n                                "+e._s(e.l("Cancel"))+"\n                            ")]),e._v("\n                            "+e._s(e.l("button to exit the interface."))+"\n                        ")])]),e._v(" "),n("br"),e._v(" "),n("p",[e._v("\n                        "+e._s(e.l("Once your collection is complete, enter a "))+"\n                        "),n("i",{attrs:{"data-target":".collection-name"}},[e._v("\n                            "+e._s(e.l("name"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("and click"))+"\n                        "),n("i",{attrs:{"data-target":".create-collection"}},[e._v("\n                            "+e._s(e.l("Create list"))+"\n                        ")]),e._v("\n                        "+e._s(e.l("."))+"\n                    ")])]},proxy:!0},{key:"middle-content",fn:function(){return[n("div",{staticClass:"collection-elements-controls"},[n("a",{staticClass:"reset",attrs:{href:"javascript:void(0);",role:"button",title:e.titleUndoButton},on:{click:e.reset}},[e._v("\n                            "+e._s(e.l("Start over"))+"\n                        ")]),e._v(" "),e.atLeastOneDatasetIsSelected?n("a",{staticClass:"clear-selected",attrs:{href:"javascript:void(0);",role:"button",title:e.titleDeselectButton},on:{click:e.clickClearAll}},[e._v("\n                            "+e._s(e.l("Clear selected"))+"\n                        ")]):e._e()]),e._v(" "),n("draggable",{staticClass:"collection-elements scroll-container flex-row drop-zone",on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.workingElements,callback:function(t){e.workingElements=t},expression:"workingElements"}},[e.noMoreValidDatasets?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[e._v("\n                                "+e._s(e.discardedElementsHeader)+"\n                                "),n("a",{staticClass:"reset-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.reset}},[e._v("\n                                    "+e._s(e.startOverText)+"\n                                ")]),e._v("\n                                ?\n                            ")])],1):e._l(e.returnWorkingElements,(function(t){return n("dataset-collection-element-view",{key:t.id,class:{selected:e.getSelectedDatasetElems.includes(t.id)},attrs:{element:t},on:{"element-is-selected":e.elementSelected,"element-is-discarded":e.elementDiscarded}})}))],2)]},proxy:!0}])})],1)])])}),[],!1,null,null,null));t.default=g.exports},654:function(e,t,n){},655:function(e,t,n){},656:function(e,t,n){"use strict";var l=n(2),i=n.n(l),a={props:{oncancel:{type:Function,required:!0},creationFn:{type:Function,required:!0},renderExtensionsToggle:{type:Boolean,default:!1},hideSourceItems:{type:Boolean,required:!0}},computed:{validInput:function(){return this.collectionName.length>0}},data:function(){return{titleForHelp:i()("Expand or Close Help"),hideOriginalsText:i()("Hide original elements?"),titleMoreHelp:i()("Close and show more help"),placeholderEnterName:i()("Enter a name for your new collection"),dropdownText:i()("Create a <i>single</> pair"),isExpanded:!1,collectionName:"",removeFileExtensionsText:"Remove file extensions?",localHideSourceItems:this.hideSourceItems}},methods:{l:function(e){return i()(e)},_clickForHelp:function(){return this.isExpanded=!this.isExpanded,this.isExpanded},_cancelCreate:function(){this.oncancel()},_getName:function(){return this.collectionName}},watch:{localHideSourceItems:function(){this.$emit("onUpdateHideSourceItems",this.localHideSourceItems)}}},s=(n(1057),n(5)),r=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collection-creator"},[n("div",{staticClass:"header flex-row no-flex"},[n("div",{staticClass:"main-help well clear",class:{expanded:e.isExpanded}},[n("a",{staticClass:"more-help",attrs:{href:"javascript:void(0);",role:"button",title:e.titleForHelp},on:{click:e._clickForHelp}},[e.isExpanded?n("div",[n("i",{staticClass:"fas fa-chevron-up"})]):n("div",[n("i",{staticClass:"fas fa-chevron-down"})])]),e._v(" "),n("div",{staticClass:"help-content"},[e._t("help-content"),e._v(" "),n("a",{staticClass:"more-help",attrs:{href:"javascript:void(0);",role:"button",title:e.titleForHelp},on:{click:e._clickForHelp}})],2)])]),e._v(" "),n("div",{staticClass:"middle flex-row flex-row-container"},[e._t("middle-content")],2),e._v(" "),n("div",{staticClass:"footer flex-row no-flex"},[n("div",{staticClass:"attributes clear"},[n("div",{staticClass:"clear"},[e.renderExtensionsToggle?n("label",{staticClass:"setting-prompt float-right"},[e._v("\n                    "+e._s(e.removeFileExtensionsText)+"\n                    "),n("input",{staticClass:"remove-extensions float-right",attrs:{type:"checkbox",checked:""},on:{click:function(t){return e.$emit("remove-extensions-toggle")}}})]):e._e(),e._v(" "),n("label",{staticClass:"setting-prompt float-right"},[e._v("\n                    "+e._s(e.hideOriginalsText)+"\n                    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.localHideSourceItems,expression:"localHideSourceItems"}],staticClass:"hide-originals float-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.localHideSourceItems)?e._i(e.localHideSourceItems,null)>-1:e.localHideSourceItems},on:{change:function(t){var n=e.localHideSourceItems,l=t.target,i=!!l.checked;if(Array.isArray(n)){var a=e._i(n,null);l.checked?a<0&&(e.localHideSourceItems=n.concat([null])):a>-1&&(e.localHideSourceItems=n.slice(0,a).concat(n.slice(a+1)))}else e.localHideSourceItems=i}}})])]),e._v(" "),n("div",{staticClass:"clear"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.collectionName,expression:"collectionName"}],staticClass:"collection-name form-control float-right",attrs:{placeholder:e.placeholderEnterName},domProps:{value:e.collectionName},on:{input:function(t){t.target.composing||(e.collectionName=t.target.value)}}}),e._v(" "),n("div",{staticClass:"collection-name-prompt float-right"},[e._v("\n                    "+e._s(e.l("Name:"))+"\n                ")])])]),e._v(" "),n("div",{staticClass:"actions clear vertically-spaced"},[n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:e._cancelCreate}},[e._v("\n                    "+e._s(e.l("Cancel"))+"\n                ")])]),e._v(" "),n("div",{staticClass:"main-options float-right"},[n("button",{staticClass:"create-collection btn btn-primary",attrs:{disabled:!e.validInput},on:{click:function(t){return e.$emit("clicked-create",e.collectionName)}}},[e._v("\n                    "+e._s(e.l("Create list"))+"\n                ")])])])])])}),[],!1,null,null,null).exports;t.a={components:{CollectionCreator:r},props:{initialElements:{required:!0,type:Array},creationFn:{type:Function,required:!0},oncancel:{type:Function,required:!0},oncreate:{type:Function,required:!0},defaultHideSourceItems:{type:Boolean,required:!1,default:!0}},data:function(){return{hideSourceItems:this.defaultHideSourceItems}},methods:{onUpdateHideSourceItems:function(e){this.hideSourceItems=e}}}},657:function(e,t,n){},658:function(e,t,n){},866:function(e,t,n){"use strict";var l={props:{value:{required:!0,type:String},title:{required:!1,type:String}},data:function(){return{editable:!1,localValue:this.value}},watch:{localValue:function(e){this.$emit("input",e)},value:function(e){this.localValue=e}}},i=(n(1058),n(5)),a=Object(i.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.editable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.localValue,expression:"localValue"}],staticClass:"click-to-edit-input",attrs:{contenteditable:""},domProps:{value:e.localValue},on:{blur:function(t){e.editable=!1},keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editable=!1},input:function(t){t.target.composing||(e.localValue=t.target.value)}}}):n("label",{on:{click:function(t){e.editable=!0}}},[e._v("\n    "+e._s(e.localValue)+"\n")])}),[],!1,null,null,null);t.a=a.exports}}]);
//# sourceMappingURL=ListCollectionCreator.chunk.js.map