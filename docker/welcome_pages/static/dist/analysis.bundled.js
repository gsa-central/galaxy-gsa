!function(t){function e(e){for(var i,o,s=e[0],l=e[1],c=e[2],u=0,h=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);for(d&&d(e);h.length;)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={6:0,2:0,3:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=a[t]=[e,i]}));e.push(n[2]=i);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(t){return o.p+""+({4:"PairedListCollectionCreator",9:"ruleCollectionBuilder",10:"vendors~ruleCollectionBuilder",11:"vendors~workflowLayout",12:"workflowLayout"}[t]||t)+".chunk.js"}(t);var l=new Error;r=function(e){s.onerror=s.onload=null,clearTimeout(c);var n=a[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",l.name="ChunkLoadError",l.type=i,l.request=r,n[1](l)}a[t]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(e)},o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/static/dist/",o.oe=function(t){throw console.error(t),t};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([1594,0,1]),n()}([function(t,e,n){var i=n(512),a=n(258);void 0===a.jQuery&&(a.jQuery=i),void 0===a.$&&(a.$=i),t.exports=i},,function(t,e,n){var i,a;i=[n(524)],void 0===(a=function(t){if(Object.prototype.hasOwnProperty.call(t,"__root")){var e=sessionStorage.getItem("currentLocale");e&&(t=t["__"+e]||t["__"+e.split("-")[0]]||t.__root)}var n=function(e){return t[e]||e};return n.cacheNonLocalized=!1,n}.apply(e,i))||(t.exports=a)},function(t,e,n){var i=n(562),a=n(258);void 0===a.config&&(a.config=i),t.exports=i},,,function(t,e,n){"use strict";n.d(e,"b",(function(){return T})),n.d(e,"a",(function(){return j}));var i=n(136),a=n(72),r=n(0),o=n.n(r),s=n(1),l=n(4),c=n.n(l),d=n(11),u=n(3),h=n(2),f=n.n(h),p=c.a.Model.extend(d.a.LoggableMixin).extend({_logNamespace:"user",urlRoot:function(){return"".concat(Object(u.getAppRoot)(),"api/users")},defaults:{id:null,username:"(".concat(f()("anonymous user"),")"),email:"",total_disk_usage:0,nice_total_disk_usage:"",quota_percent:null,is_admin:!1,preferences:{}},initialize:function(t){this.log("User.initialize:",t),this.on("loaded",(function(t,e){this.log("".concat(this," has loaded:"),t,e)})),this.on("change",(function(t,e){this.log("".concat(this," has changed:"),t,e.changes)}))},isAnonymous:function(){return!this.get("email")},isAdmin:function(){return this.get("is_admin")},updatePreferences:function(t,e){var n=this.get("preferences");n[t]=JSON.stringify(e),this.preferences=n},getFavorites:function(){var t=this.get("preferences");return t&&t.favorites?JSON.parse(t.favorites):{tools:[]}},updateFavorites:function(t,e){var n=this.getFavorites();n[t]=e[t],this.updatePreferences("favorites",n)},loadFromApi:function(t,e){t=t||p.CURRENT_ID_STR;var n=this,i=(e=e||{}).success;return e.success=function(t,e){n.trigger("loaded",t,e),i&&i(t,e)},t===p.CURRENT_ID_STR&&(e.url="".concat(this.urlRoot,"/").concat(p.CURRENT_ID_STR)),c.a.Model.prototype.fetch.call(this,e)},clearSessionStorage:function(){for(var t in sessionStorage)0===t.indexOf("history:")?sessionStorage.removeItem(t):"history-panel"===t&&sessionStorage.removeItem(t)},toString:function(){var t=[this.get("username")];return this.get("id")&&(t.unshift(this.get("id")),t.push(this.get("email"))),"User(".concat(t.join(":"),")")}});p.CURRENT_ID_STR="current",p.getCurrentUserFromApi=function(t){var e=new p;return e.loadFromApi(p.CURRENT_ID_STR,t),e};var m={User:p};function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){t=t||{};return this.userId=window.bootstrapped&&window.bootstrapped.user?window.bootstrapped.user.id:null,this.userId=this.userId||t.userId||null,this.consoleLogger=t.consoleLogger||null,this._init(t),this}function v(t){var e=String(t);if("[object Object]"==e)try{e=JSON.stringify(t)}catch(e){return console.error(e),String(t)}return e}function y(t){return this._init(t||{})}g.ALL=0,g.LOG=0,g.DEBUG=10,g.INFO=20,g.WARN=30,g.ERROR=40,g.METRIC=50,g.NONE=100,g.defaultOptions={logLevel:g.NONE,consoleLevel:g.NONE,defaultNamespace:"Galaxy",consoleNamespaceWhitelist:null,consoleFlattenMessages:!1,clientPrefix:"client.",maxCacheSize:3e3,postSize:1e3,addTime:!0,cacheKeyPrefix:"logs-",postUrl:"/api/metrics",delayPostInMs:6e5,getPingData:void 0,onServerResponse:void 0},g.prototype._init=function(t){for(var e in this.options={},g.defaultOptions)Object.prototype.hasOwnProperty.call(g.defaultOptions,e)&&(this.options[e]=Object.prototype.hasOwnProperty.call(t,e)?t[e]:g.defaultOptions[e]);return this.options.logLevel=this._parseLevel(this.options.logLevel),this.options.consoleLevel=this._parseLevel(this.options.consoleLevel),this._sending=!1,this._waiting=null,this._postSize=this.options.postSize,this._initCache(),this},g.prototype._initCache=function(){try{this.cache=new y({maxSize:this.options.maxCacheSize,key:this.options.cacheKeyPrefix+this.userId})}catch(t){this._emitToConsole("warn","MetricsLogger",["Could not intitialize logging cache:",t]),this.options.logLevel=g.NONE}},g.prototype._parseLevel=function(t){var e=_(t);if("number"===e)return t;if("string"===e){var n=t.toUpperCase();if(Object.prototype.hasOwnProperty.call(g,n))return g[n]}throw new Error("Unknown log level: ".concat(t))},g.prototype.emit=function(t,e,n){return e=e||this.options.defaultNamespace,t&&n?((t=this._parseLevel(t))>=this.options.logLevel&&this._addToCache(t,e,n),this.consoleLogger&&t>=this.options.consoleLevel&&this._emitToConsole(t,e,n),this):this},g.prototype._addToCache=function(t,e,n){this._emitToConsole("debug","MetricsLogger",["_addToCache:",arguments,this.options.addTime,this.cache.length()]);var i=this;try{var a=i.cache.add(i._buildEntry(t,e,n));a>=i._postSize&&i._postCache()}catch(t){i._emitToConsole("warn","MetricsLogger",["Metrics logger could not stringify logArguments:",e,n]),i._emitToConsole("error","MetricsLogger",[t])}return i},g.prototype._buildEntry=function(t,e,n){this._emitToConsole("debug","MetricsLogger",["_buildEntry:",arguments]);var i={level:t,namespace:this.options.clientPrefix+e,args:n};return this.options.addTime&&(i.time=(new Date).toISOString()),i},g.prototype._postCache=function(t){if(t=t||{},this._emitToConsole("info","MetricsLogger",["_postCache",t,this._postSize]),!this.options.postUrl||this._sending)return o.a.when({});var e=this,n=t.count||e._postSize,i=e.cache.get(n),a=i.length,r="function"==typeof e.options.getPingData?e.options.getPingData():{};return r.metrics=JSON.stringify(i),e._sending=!0,o.a.post(e.options.postUrl,r).always((function(){e._sending=!1})).fail((function(t,n,i){e._postSize=e.options.maxCacheSize,e.emit("error","MetricsLogger",["_postCache error:",t.readyState,t.status,t.responseJSON||t.responseText])})).done((function(t){"function"==typeof e.options.onServerResponse&&e.options.onServerResponse(t),e.cache.remove(a),e._postSize=e.options.postSize}))},g.prototype._delayPost=function(){var t=this;t._waiting=window.setTimeout((function(){t._waiting=null}),t.options.delayPostInMs)},g.prototype._emitToConsole=function(t,e,n){var i=this.options.consoleNamespaceWhitelist;if(!this.consoleLogger)return this;if(i&&-1===i.indexOf(e))return this;var a=Array.prototype.slice.call(n,0);return a.unshift(e),this.options.consoleFlattenMessages&&(a=[a.map(v).join(" ")]),t>=g.METRIC&&"function"==typeof this.consoleLogger.info?this.consoleLogger.info.apply(this.consoleLogger,a):t>=g.ERROR&&"function"==typeof this.consoleLogger.error?this.consoleLogger.error.apply(this.consoleLogger,a):(t>=g.WARN&&"function"==typeof this.consoleLogger.warn?this.consoleLogger.warn.apply(this.consoleLogger,a):t>=g.INFO&&"function"==typeof this.consoleLogger.info?this.consoleLogger.info.apply(this.consoleLogger,a):t>=g.DEBUG&&"function"==typeof this.consoleLogger.debug?this.consoleLogger.debug.apply(this.consoleLogger,a):"function"==typeof this.consoleLogger.log&&this.consoleLogger.log.apply(this.consoleLogger,a),this)},g.prototype.log=function(){this.emit(1,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.debug=function(){this.emit(g.DEBUG,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.info=function(){this.emit(g.INFO,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.warn=function(){this.emit(g.WARN,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.error=function(){this.emit(g.ERROR,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.metric=function(){this.emit(g.METRIC,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},y.defaultOptions={maxSize:5e3},y.prototype._init=function(t){if(!this._hasStorage())throw new Error("LoggingCache needs localStorage");if(!t.key)throw new Error("LoggingCache needs key for localStorage");return this.key=t.key,this._initStorage(),this.maxSize=t.maxSize||y.defaultOptions.maxSize,this},y.prototype._hasStorage=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}},y.prototype._initStorage=function(){return null===localStorage.getItem(this.key)?this.empty():this},y.prototype.add=function(t){var e=this._fetchAndParse(),n=e.length+1-this.maxSize;return n>0&&e.splice(0,n),e.push(t),this._unparseAndStore(e),e.length},y.prototype._fetchAndParse=function(){return JSON.parse(localStorage.getItem(this.key))},y.prototype._unparseAndStore=function(t){return localStorage.setItem(this.key,JSON.stringify(t))},y.prototype.length=function(){return this._fetchAndParse().length},y.prototype.get=function(t){return this._fetchAndParse().slice(0,t)},y.prototype.remove=function(t){var e=this._fetchAndParse(),n=e.splice(0,t);return this._unparseAndStore(e),n},y.prototype.empty=function(){return localStorage.setItem(this.key,"[]"),this},y.prototype.stringify=function(t){return JSON.stringify(this.get(t))},y.prototype.print=function(){console.log(JSON.stringify(this._fetchAndParse(),null,"  "))};var b={MetricsLogger:g,LoggingCache:y},w=n(64);function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._init(t,e)}Object(i.a)(k,"GalaxyApp");var x="".concat("galaxy:debug",":namespaces"),S="".concat("galaxy:debug",":flatten"),M=!1;try{M="true"==localStorage.getItem("galaxy:debug")}catch(t){console.log(f()("localStorage not available for debug flag retrieval"))}k.prototype._init=function(t,e){s.default.extend(this,c.a.Events),M&&(this.logger=console,console.debug("debugging galaxy:","options:",t,"bootstrapped:",e)),this._processOptions(t),this._initConfig(t.config||{});var n=j();return n&&this._patchGalaxy(n),this.root=t.root||"/",this.params=t.params||{},this.session_csrf_token=t.session_csrf_token||null,this._initLogger(this.options.loggerOptions||{}),this.debug("GalaxyApp.options: ",this.options),this.debug("GalaxyApp.config: ",this.config),this.debug("GalaxyApp.logger: ",this.logger),this._initLocale(),this.debug("GalaxyApp.localize: ",this.localize),this.config=t.config||{},this.debug("GalaxyApp.config: ",this.config),this._initUser(t.user||{}),this.debug("GalaxyApp.user: ",this.user),this._initUserLocale(),this.debug("currentLocale: ",sessionStorage.getItem("currentLocale")),this._setUpListeners(),this.trigger("ready",this),this.data={},this.data.create=w.a,this.data.dialog=w.b,this},k.prototype.defaultOptions={patchExisting:!0,root:"/",session_csrf_token:null},k.prototype._processOptions=function(t){var e=this.defaultOptions;for(var n in this.options={},e)Object.prototype.hasOwnProperty.call(e,n)&&(this.options[n]=Object.prototype.hasOwnProperty.call(t,n)?t[n]:e[n]);return this},k.prototype._initConfig=function(t){return this.config=t,this.config.debug=M||this.config.debug,this},k.prototype._patchGalaxy=function(t){if(this.options.patchExisting&&t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])},k.prototype._initLogger=function(t){var e=arguments,n=this;if(this.config.debug){t.consoleLogger=t.consoleLogger||console,t.consoleLevel=t.consoleLevel||b.MetricsLogger.ALL;try{t.consoleNamespaceWhitelist=localStorage.getItem(x).split(",")}catch(t){console.debug(t)}try{t.consoleFlattenMessages="true"==localStorage.getItem(S)}catch(t){console.debug(t)}console.log(t.consoleFlattenMessages)}return this.logger=new b.MetricsLogger(t),this.emit={},["log","debug","info","warn","error","metric"].map((function(t){n.emit[t]=function(i){n.logger.emit(t,e[0],Array.prototype.slice.call(e,1))}})),this.config.debug&&(d.a.LoggableMixin.logger=this.logger),this},k.prototype._initLocale=function(t){return this.debug("_initLocale:",t),this.localize=f.a,window._l=this.localize,this},k.prototype._initUserLocale=function(t){var e=!(!this.config.default_locale||"auto"==this.config.default_locale)&&this.config.default_locale.toLowerCase(),n={};this.user&&this.user.attributes.preferences&&"extra_user_preferences"in this.user.attributes.preferences&&(n=JSON.parse(this.user.attributes.preferences.extra_user_preferences));var i="localization|locale"in n&&n["localization|locale"].toLowerCase();"auto"==i&&(i=!1);var a="undefined"==typeof navigator?"__root":(navigator.language||navigator.userLanguage||"__root").toLowerCase(),r=i||a||e;sessionStorage.setItem("currentLocale",r)},k.prototype._initUser=function(t){return this.debug("_initUser:",t),this.user=new m.User(t),this.user.logger=this.logger,this},k.prototype._setUpListeners=function(){var t=this;return this.lastAjax={},o()(document).bind("ajaxSend",(function(e,n,i){var a=i.data;try{a=JSON.parse(a)}catch(t){}t.lastAjax={url:location.href.slice(0,-1)+i.url,data:a}})),this},k.prototype.debugging=function(t){try{if(void 0===t)return"true"===localStorage.getItem("galaxy:debug");if(t)return localStorage.setItem("galaxy:debug",!0),!0;localStorage.removeItem("galaxy:debug"),this.debuggingNamespaces(null)}catch(t){console.log(f()("localStorage not available for debug flag retrieval"))}return!1},k.prototype.debuggingNamespaces=function(t){try{if(void 0===t){var e=localStorage.getItem(x);return"string"==typeof e?e.split(","):[]}null===t?localStorage.removeItem(x):localStorage.setItem(x,t);var n=this.debuggingNamespaces();return this.logger&&(this.logger.options.consoleNamespaceWhitelist=n),n}catch(t){console.log(f()("localStorage not available for debug namespace retrieval"))}},k.prototype.toString=function(){var t=this.user?this.user.get("email")||"(anonymous)":"uninitialized";return"GalaxyApp(".concat(t,")")};var C=n(89);function T(t){!0==!a.a.testBuild&&console.warn("setGalaxyInstance",Object(C.a)());var e=O(),n=t(k);return n instanceof k||(n=new k(n)),void 0===n.debug&&Object(i.a)(n,"GalaxyApp"),e._galaxyInstance=n,e._galaxyInstance}function j(){return O()._galaxyInstance}function O(){return window}var L={root:Object(u.getAppRoot)(),config:{}};window.Galaxy?console.error("Detected redefinition of window.Galaxy -- skipping, but this should be investigated.",Object(C.a)()):Object.defineProperty(window,"Galaxy",{enumerable:!0,get:function(){return!0==!a.a.testBuild&&console.warn("accessing (get) window.Galaxy",Object(C.a)()),j()||L},set:function(t){console.warn("accessing (set) window.Galaxy",Object(C.a)()),T(t)}});window.Galaxy},,,function(t,e,n){(function(t){t.exports=function(){"use strict";var e,i;function a(){return e.apply(null,arguments)}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(s(t,e))return!1;return!0}function c(t){return void 0===t}function d(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function f(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,i){return Ie(t,e,n,i,!0).utc()}function m(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function _(t){if(null==t._isValid){var e=m(t),n=i.call(e.parsedDateParts,(function(t){return null!=t})),a=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(a=a&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return a;t._isValid=a}return t._isValid}function g(t){var e=p(NaN);return null!=t?f(m(e),t):m(e).userInvalidated=!0,e}i=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),i=n.length>>>0;for(e=0;e<i;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var v=a.momentProperties=[],y=!1;function b(t,e){var n,i,a;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=m(e)),c(e._locale)||(t._locale=e._locale),v.length>0)for(n=0;n<v.length;n++)c(a=e[i=v[n]])||(t[i]=a);return t}function w(t){b(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,a.updateOffset(this),y=!1)}function k(t){return t instanceof w||null!=t&&null!=t._isAMomentObject}function x(t){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,e){var n=!0;return f((function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,t),n){var i,r,o,l=[];for(r=0;r<arguments.length;r++){if(i="","object"==typeof arguments[r]){for(o in i+="\n["+r+"] ",arguments[0])s(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[r];l.push(i)}x(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var M,C={};function T(t,e){null!=a.deprecationHandler&&a.deprecationHandler(t,e),C[t]||(x(e),C[t]=!0)}function j(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function O(t,e){var n,i=f({},t);for(n in e)s(e,n)&&(o(t[n])&&o(e[n])?(i[n]={},f(i[n],t[n]),f(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)s(t,n)&&!s(e,n)&&o(t[n])&&(i[n]=f({},i[n]));return i}function L(t){null!=t&&this.set(t)}function D(t,e,n){var i=""+Math.abs(t),a=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+i}a.suppressDeprecationWarnings=!1,a.deprecationHandler=null,M=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)s(t,e)&&n.push(e);return n};var A=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,E=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,I={},P={};function Y(t,e,n,i){var a=i;"string"==typeof i&&(a=function(){return this[i]()}),t&&(P[t]=a),e&&(P[e[0]]=function(){return D(a.apply(this,arguments),e[1],e[2])}),n&&(P[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),t)})}function R(t,e){return t.isValid()?(e=H(e,t.localeData()),I[e]=I[e]||function(t){var e,n,i,a=t.match(A);for(e=0,n=a.length;e<n;e++)P[a[e]]?a[e]=P[a[e]]:a[e]=(i=a[e]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(e){var i,r="";for(i=0;i<n;i++)r+=j(a[i])?a[i].call(e,t):a[i];return r}}(e),I[e](t)):t.localeData().invalidDate()}function H(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(E.lastIndex=0;n>=0&&E.test(t);)t=t.replace(E,i),E.lastIndex=0,n-=1;return t}var N={};function $(t,e){var n=t.toLowerCase();N[n]=N[n+"s"]=N[e]=t}function F(t){return"string"==typeof t?N[t]||N[t.toLowerCase()]:void 0}function W(t){var e,n,i={};for(n in t)s(t,n)&&(e=F(n))&&(i[e]=t[n]);return i}var z={};function U(t,e){z[t]=e}function V(t){return t%4==0&&t%100!=0||t%400==0}function B(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function q(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=B(e)),n}function G(t,e){return function(n){return null!=n?(K(this,t,n),a.updateOffset(this,e),this):J(this,t)}}function J(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function K(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&V(t.year())&&1===t.month()&&29===t.date()?(n=q(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Dt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var X,Q=/\d/,Z=/\d\d/,tt=/\d{3}/,et=/\d{4}/,nt=/[+-]?\d{6}/,it=/\d\d?/,at=/\d\d\d\d?/,rt=/\d\d\d\d\d\d?/,ot=/\d{1,3}/,st=/\d{1,4}/,lt=/[+-]?\d{1,6}/,ct=/\d+/,dt=/[+-]?\d+/,ut=/Z|[+-]\d\d:?\d\d/gi,ht=/Z|[+-]\d\d(?::?\d\d)?/gi,ft=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pt(t,e,n){X[t]=j(e)?e:function(t,i){return t&&n?n:e}}function mt(t,e){return s(X,t)?X[t](e._strict,e._locale):new RegExp(_t(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,a){return e||n||i||a}))))}function _t(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}X={};var gt={};function vt(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),d(e)&&(i=function(t,n){n[e]=q(t)}),n=0;n<t.length;n++)gt[t[n]]=i}function yt(t,e){vt(t,(function(t,n,i,a){i._w=i._w||{},e(t,i._w,i,a)}))}function bt(t,e,n){null!=e&&s(gt,t)&&gt[t](e,n._a,n,t)}var wt,kt=0,xt=1,St=2,Mt=3,Ct=4,Tt=5,jt=6,Ot=7,Lt=8;function Dt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=function(t,e){return(t%e+e)%e}(e,12);return t+=(e-n)/12,1===n?V(t)?29:28:31-n%7%2}wt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},Y("M",["MM",2],"Mo",(function(){return this.month()+1})),Y("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),Y("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),$("month","M"),U("month",8),pt("M",it),pt("MM",it,Z),pt("MMM",(function(t,e){return e.monthsShortRegex(t)})),pt("MMMM",(function(t,e){return e.monthsRegex(t)})),vt(["M","MM"],(function(t,e){e[xt]=q(t)-1})),vt(["MMM","MMMM"],(function(t,e,n,i){var a=n._locale.monthsParse(t,i,n._strict);null!=a?e[xt]=a:m(n).invalidMonth=t}));var At="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Et="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),It=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pt=ft,Yt=ft;function Rt(t,e,n){var i,a,r,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(a=wt.call(this._shortMonthsParse,o))?a:null:-1!==(a=wt.call(this._longMonthsParse,o))?a:null:"MMM"===e?-1!==(a=wt.call(this._shortMonthsParse,o))?a:-1!==(a=wt.call(this._longMonthsParse,o))?a:null:-1!==(a=wt.call(this._longMonthsParse,o))?a:-1!==(a=wt.call(this._shortMonthsParse,o))?a:null}function Ht(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=q(e);else if(!d(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Dt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Nt(t){return null!=t?(Ht(this,t),a.updateOffset(this,!0),this):J(this,"Month")}function $t(){function t(t,e){return e.length-t.length}var e,n,i=[],a=[],r=[];for(e=0;e<12;e++)n=p([2e3,e]),i.push(this.monthsShort(n,"")),a.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(t),a.sort(t),r.sort(t),e=0;e<12;e++)i[e]=_t(i[e]),a[e]=_t(a[e]);for(e=0;e<24;e++)r[e]=_t(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ft(t){return V(t)?366:365}Y("Y",0,0,(function(){var t=this.year();return t<=9999?D(t,4):"+"+t})),Y(0,["YY",2],0,(function(){return this.year()%100})),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),$("year","y"),U("year",1),pt("Y",dt),pt("YY",it,Z),pt("YYYY",st,et),pt("YYYYY",lt,nt),pt("YYYYYY",lt,nt),vt(["YYYYY","YYYYYY"],kt),vt("YYYY",(function(t,e){e[kt]=2===t.length?a.parseTwoDigitYear(t):q(t)})),vt("YY",(function(t,e){e[kt]=a.parseTwoDigitYear(t)})),vt("Y",(function(t,e){e[kt]=parseInt(t,10)})),a.parseTwoDigitYear=function(t){return q(t)+(q(t)>68?1900:2e3)};var Wt=G("FullYear",!0);function zt(t,e,n,i,a,r,o){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,i,a,r,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,i,a,r,o),s}function Ut(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Vt(t,e,n){var i=7+e-n;return-(7+Ut(t,0,i).getUTCDay()-e)%7+i-1}function Bt(t,e,n,i,a){var r,o,s=1+7*(e-1)+(7+n-i)%7+Vt(t,i,a);return s<=0?o=Ft(r=t-1)+s:s>Ft(t)?(r=t+1,o=s-Ft(t)):(r=t,o=s),{year:r,dayOfYear:o}}function qt(t,e,n){var i,a,r=Vt(t.year(),e,n),o=Math.floor((t.dayOfYear()-r-1)/7)+1;return o<1?i=o+Gt(a=t.year()-1,e,n):o>Gt(t.year(),e,n)?(i=o-Gt(t.year(),e,n),a=t.year()+1):(a=t.year(),i=o),{week:i,year:a}}function Gt(t,e,n){var i=Vt(t,e,n),a=Vt(t+1,e,n);return(Ft(t)-i+a)/7}function Jt(t,e){return t.slice(e,7).concat(t.slice(0,e))}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),$("week","w"),$("isoWeek","W"),U("week",5),U("isoWeek",5),pt("w",it),pt("ww",it,Z),pt("W",it),pt("WW",it,Z),yt(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=q(t)})),Y("d",0,"do","day"),Y("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),Y("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),Y("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),$("day","d"),$("weekday","e"),$("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),pt("d",it),pt("e",it),pt("E",it),pt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),pt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),pt("dddd",(function(t,e){return e.weekdaysRegex(t)})),yt(["dd","ddd","dddd"],(function(t,e,n,i){var a=n._locale.weekdaysParse(t,i,n._strict);null!=a?e.d=a:m(n).invalidWeekday=t})),yt(["d","e","E"],(function(t,e,n,i){e[i]=q(t)}));var Kt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Xt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Qt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Zt=ft,te=ft,ee=ft;function ne(t,e,n){var i,a,r,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(a=wt.call(this._weekdaysParse,o))?a:null:"ddd"===e?-1!==(a=wt.call(this._shortWeekdaysParse,o))?a:null:-1!==(a=wt.call(this._minWeekdaysParse,o))?a:null:"dddd"===e?-1!==(a=wt.call(this._weekdaysParse,o))?a:-1!==(a=wt.call(this._shortWeekdaysParse,o))?a:-1!==(a=wt.call(this._minWeekdaysParse,o))?a:null:"ddd"===e?-1!==(a=wt.call(this._shortWeekdaysParse,o))?a:-1!==(a=wt.call(this._weekdaysParse,o))?a:-1!==(a=wt.call(this._minWeekdaysParse,o))?a:null:-1!==(a=wt.call(this._minWeekdaysParse,o))?a:-1!==(a=wt.call(this._weekdaysParse,o))?a:-1!==(a=wt.call(this._shortWeekdaysParse,o))?a:null}function ie(){function t(t,e){return e.length-t.length}var e,n,i,a,r,o=[],s=[],l=[],c=[];for(e=0;e<7;e++)n=p([2e3,1]).day(e),i=_t(this.weekdaysMin(n,"")),a=_t(this.weekdaysShort(n,"")),r=_t(this.weekdays(n,"")),o.push(i),s.push(a),l.push(r),c.push(i),c.push(a),c.push(r);o.sort(t),s.sort(t),l.sort(t),c.sort(t),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function ae(){return this.hours()%12||12}function re(t,e){Y(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function oe(t,e){return e._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,ae),Y("k",["kk",2],0,(function(){return this.hours()||24})),Y("hmm",0,0,(function(){return""+ae.apply(this)+D(this.minutes(),2)})),Y("hmmss",0,0,(function(){return""+ae.apply(this)+D(this.minutes(),2)+D(this.seconds(),2)})),Y("Hmm",0,0,(function(){return""+this.hours()+D(this.minutes(),2)})),Y("Hmmss",0,0,(function(){return""+this.hours()+D(this.minutes(),2)+D(this.seconds(),2)})),re("a",!0),re("A",!1),$("hour","h"),U("hour",13),pt("a",oe),pt("A",oe),pt("H",it),pt("h",it),pt("k",it),pt("HH",it,Z),pt("hh",it,Z),pt("kk",it,Z),pt("hmm",at),pt("hmmss",rt),pt("Hmm",at),pt("Hmmss",rt),vt(["H","HH"],Mt),vt(["k","kk"],(function(t,e,n){var i=q(t);e[Mt]=24===i?0:i})),vt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),vt(["h","hh"],(function(t,e,n){e[Mt]=q(t),m(n).bigHour=!0})),vt("hmm",(function(t,e,n){var i=t.length-2;e[Mt]=q(t.substr(0,i)),e[Ct]=q(t.substr(i)),m(n).bigHour=!0})),vt("hmmss",(function(t,e,n){var i=t.length-4,a=t.length-2;e[Mt]=q(t.substr(0,i)),e[Ct]=q(t.substr(i,2)),e[Tt]=q(t.substr(a)),m(n).bigHour=!0})),vt("Hmm",(function(t,e,n){var i=t.length-2;e[Mt]=q(t.substr(0,i)),e[Ct]=q(t.substr(i))})),vt("Hmmss",(function(t,e,n){var i=t.length-4,a=t.length-2;e[Mt]=q(t.substr(0,i)),e[Ct]=q(t.substr(i,2)),e[Tt]=q(t.substr(a))}));var se,le=G("Hours",!0),ce={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:At,monthsShort:Et,week:{dow:0,doy:6},weekdays:Kt,weekdaysMin:Qt,weekdaysShort:Xt,meridiemParse:/[ap]\.?m?\.?/i},de={},ue={};function he(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function fe(t){return t?t.toLowerCase().replace("_","-"):t}function pe(e){var i=null;if(void 0===de[e]&&void 0!==t&&t&&t.exports)try{i=se._abbr,n(526)("./"+e),me(i)}catch(t){de[e]=null}return de[e]}function me(t,e){var n;return t&&((n=c(e)?ge(t):_e(t,e))?se=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),se._abbr}function _e(t,e){if(null!==e){var n,i=ce;if(e.abbr=t,null!=de[t])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=de[t]._config;else if(null!=e.parentLocale)if(null!=de[e.parentLocale])i=de[e.parentLocale]._config;else{if(null==(n=pe(e.parentLocale)))return ue[e.parentLocale]||(ue[e.parentLocale]=[]),ue[e.parentLocale].push({name:t,config:e}),null;i=n._config}return de[t]=new L(O(i,e)),ue[t]&&ue[t].forEach((function(t){_e(t.name,t.config)})),me(t),de[t]}return delete de[t],null}function ge(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return se;if(!r(t)){if(e=pe(t))return e;t=[t]}return function(t){for(var e,n,i,a,r=0;r<t.length;){for(e=(a=fe(t[r]).split("-")).length,n=(n=fe(t[r+1]))?n.split("-"):null;e>0;){if(i=pe(a.slice(0,e).join("-")))return i;if(n&&n.length>=e&&he(a,n)>=e-1)break;e--}r++}return se}(t)}function ve(t){var e,n=t._a;return n&&-2===m(t).overflow&&(e=n[xt]<0||n[xt]>11?xt:n[St]<1||n[St]>Dt(n[kt],n[xt])?St:n[Mt]<0||n[Mt]>24||24===n[Mt]&&(0!==n[Ct]||0!==n[Tt]||0!==n[jt])?Mt:n[Ct]<0||n[Ct]>59?Ct:n[Tt]<0||n[Tt]>59?Tt:n[jt]<0||n[jt]>999?jt:-1,m(t)._overflowDayOfYear&&(e<kt||e>St)&&(e=St),m(t)._overflowWeeks&&-1===e&&(e=Ot),m(t)._overflowWeekday&&-1===e&&(e=Lt),m(t).overflow=e),t}var ye=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,be=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,we=/Z|[+-]\d\d(?::?\d\d)?/,ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Se=/^\/?Date\((-?\d+)/i,Me=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ce={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Te(t){var e,n,i,a,r,o,s=t._i,l=ye.exec(s)||be.exec(s);if(l){for(m(t).iso=!0,e=0,n=ke.length;e<n;e++)if(ke[e][1].exec(l[1])){a=ke[e][0],i=!1!==ke[e][2];break}if(null==a)return void(t._isValid=!1);if(l[3]){for(e=0,n=xe.length;e<n;e++)if(xe[e][1].exec(l[3])){r=(l[2]||" ")+xe[e][0];break}if(null==r)return void(t._isValid=!1)}if(!i&&null!=r)return void(t._isValid=!1);if(l[4]){if(!we.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=a+(r||"")+(o||""),Ae(t)}else t._isValid=!1}function je(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Oe(t){var e,n,i,a,r,o,s,l,c=Me.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],i=c[3],a=c[2],r=c[5],o=c[6],s=c[7],l=[je(n),Et.indexOf(i),parseInt(a,10),parseInt(r,10),parseInt(o,10)],s&&l.push(parseInt(s,10)),e=l,!function(t,e,n){return!t||Xt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],e,t))return;t._a=e,t._tzm=function(t,e,n){if(t)return Ce[t];if(e)return 0;var i=parseInt(n,10),a=i%100;return(i-a)/100*60+a}(c[8],c[9],c[10]),t._d=Ut.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),m(t).rfc2822=!0}else t._isValid=!1}function Le(t,e,n){return null!=t?t:null!=e?e:n}function De(t){var e,n,i,r,o,s=[];if(!t._d){for(i=function(t){var e=new Date(a.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[St]&&null==t._a[xt]&&function(t){var e,n,i,a,r,o,s,l,c;null!=(e=t._w).GG||null!=e.W||null!=e.E?(r=1,o=4,n=Le(e.GG,t._a[kt],qt(Pe(),1,4).year),i=Le(e.W,1),((a=Le(e.E,1))<1||a>7)&&(l=!0)):(r=t._locale._week.dow,o=t._locale._week.doy,c=qt(Pe(),r,o),n=Le(e.gg,t._a[kt],c.year),i=Le(e.w,c.week),null!=e.d?((a=e.d)<0||a>6)&&(l=!0):null!=e.e?(a=e.e+r,(e.e<0||e.e>6)&&(l=!0)):a=r),i<1||i>Gt(n,r,o)?m(t)._overflowWeeks=!0:null!=l?m(t)._overflowWeekday=!0:(s=Bt(n,i,a,r,o),t._a[kt]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(o=Le(t._a[kt],i[kt]),(t._dayOfYear>Ft(o)||0===t._dayOfYear)&&(m(t)._overflowDayOfYear=!0),n=Ut(o,0,t._dayOfYear),t._a[xt]=n.getUTCMonth(),t._a[St]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Mt]&&0===t._a[Ct]&&0===t._a[Tt]&&0===t._a[jt]&&(t._nextDay=!0,t._a[Mt]=0),t._d=(t._useUTC?Ut:zt).apply(null,s),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Mt]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(m(t).weekdayMismatch=!0)}}function Ae(t){if(t._f!==a.ISO_8601)if(t._f!==a.RFC_2822){t._a=[],m(t).empty=!0;var e,n,i,r,o,s,l=""+t._i,c=l.length,d=0;for(i=H(t._f,t._locale).match(A)||[],e=0;e<i.length;e++)r=i[e],(n=(l.match(mt(r,t))||[])[0])&&((o=l.substr(0,l.indexOf(n))).length>0&&m(t).unusedInput.push(o),l=l.slice(l.indexOf(n)+n.length),d+=n.length),P[r]?(n?m(t).empty=!1:m(t).unusedTokens.push(r),bt(r,n,t)):t._strict&&!n&&m(t).unusedTokens.push(r);m(t).charsLeftOver=c-d,l.length>0&&m(t).unusedInput.push(l),t._a[Mt]<=12&&!0===m(t).bigHour&&t._a[Mt]>0&&(m(t).bigHour=void 0),m(t).parsedDateParts=t._a.slice(0),m(t).meridiem=t._meridiem,t._a[Mt]=function(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}(t._locale,t._a[Mt],t._meridiem),null!==(s=m(t).era)&&(t._a[kt]=t._locale.erasConvertYear(s,t._a[kt])),De(t),ve(t)}else Oe(t);else Te(t)}function Ee(t){var e=t._i,n=t._f;return t._locale=t._locale||ge(t._l),null===e||void 0===n&&""===e?g({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),k(e)?new w(ve(e)):(u(e)?t._d=e:r(n)?function(t){var e,n,i,a,r,o,s=!1;if(0===t._f.length)return m(t).invalidFormat=!0,void(t._d=new Date(NaN));for(a=0;a<t._f.length;a++)r=0,o=!1,e=b({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[a],Ae(e),_(e)&&(o=!0),r+=m(e).charsLeftOver,r+=10*m(e).unusedTokens.length,m(e).score=r,s?r<i&&(i=r,n=e):(null==i||r<i||o)&&(i=r,n=e,o&&(s=!0));f(t,n||e)}(t):n?Ae(t):function(t){var e=t._i;c(e)?t._d=new Date(a.now()):u(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=Se.exec(t._i);null===e?(Te(t),!1===t._isValid&&(delete t._isValid,Oe(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:a.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):r(e)?(t._a=h(e.slice(0),(function(t){return parseInt(t,10)})),De(t)):o(e)?function(t){if(!t._d){var e=W(t._i),n=void 0===e.day?e.date:e.day;t._a=h([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),De(t)}}(t):d(e)?t._d=new Date(e):a.createFromInputFallback(t)}(t),_(t)||(t._d=null),t))}function Ie(t,e,n,i,a){var s,c={};return!0!==e&&!1!==e||(i=e,e=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(o(t)&&l(t)||r(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=n,c._i=t,c._f=e,c._strict=i,(s=new w(ve(Ee(c))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Pe(t,e,n,i){return Ie(t,e,n,i,!1)}a.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),a.ISO_8601=function(){},a.RFC_2822=function(){};var Ye=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Pe.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()})),Re=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Pe.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:g()}));function He(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return Pe();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var Ne=["year","quarter","month","week","day","hour","minute","second","millisecond"];function $e(t){var e=W(t),n=e.year||0,i=e.quarter||0,a=e.month||0,r=e.week||e.isoWeek||0,o=e.day||0,l=e.hour||0,c=e.minute||0,d=e.second||0,u=e.millisecond||0;this._isValid=function(t){var e,n,i=!1;for(e in t)if(s(t,e)&&(-1===wt.call(Ne,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<Ne.length;++n)if(t[Ne[n]]){if(i)return!1;parseFloat(t[Ne[n]])!==q(t[Ne[n]])&&(i=!0)}return!0}(e),this._milliseconds=+u+1e3*d+6e4*c+1e3*l*60*60,this._days=+o+7*r,this._months=+a+3*i+12*n,this._data={},this._locale=ge(),this._bubble()}function Fe(t){return t instanceof $e}function We(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function ze(t,e){Y(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+D(~~(t/60),2)+e+D(~~t%60,2)}))}ze("Z",":"),ze("ZZ",""),pt("Z",ht),pt("ZZ",ht),vt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Ve(ht,t)}));var Ue=/([\+\-]|\d\d)/gi;function Ve(t,e){var n,i,a=(e||"").match(t);return null===a?null:0===(i=60*(n=((a[a.length-1]||[])+"").match(Ue)||["-",0,0])[1]+q(n[2]))?0:"+"===n[0]?i:-i}function Be(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(k(t)||u(t)?t.valueOf():Pe(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),a.updateOffset(n,!1),n):Pe(t).local()}function qe(t){return-Math.round(t._d.getTimezoneOffset())}function Ge(){return!!this.isValid()&&this._isUTC&&0===this._offset}a.updateOffset=function(){};var Je=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ke=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Xe(t,e){var n,i,a,r,o,l,c=t,u=null;return Fe(t)?c={ms:t._milliseconds,d:t._days,M:t._months}:d(t)||!isNaN(+t)?(c={},e?c[e]=+t:c.milliseconds=+t):(u=Je.exec(t))?(n="-"===u[1]?-1:1,c={y:0,d:q(u[St])*n,h:q(u[Mt])*n,m:q(u[Ct])*n,s:q(u[Tt])*n,ms:q(We(1e3*u[jt]))*n}):(u=Ke.exec(t))?(n="-"===u[1]?-1:1,c={y:Qe(u[2],n),M:Qe(u[3],n),w:Qe(u[4],n),d:Qe(u[5],n),h:Qe(u[6],n),m:Qe(u[7],n),s:Qe(u[8],n)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(r=Pe(c.from),o=Pe(c.to),a=r.isValid()&&o.isValid()?(o=Be(o,r),r.isBefore(o)?l=Ze(r,o):((l=Ze(o,r)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(c={}).ms=a.milliseconds,c.M=a.months),i=new $e(c),Fe(t)&&s(t,"_locale")&&(i._locale=t._locale),Fe(t)&&s(t,"_isValid")&&(i._isValid=t._isValid),i}function Qe(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ze(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function tn(t,e){return function(n,i){var a;return null===i||isNaN(+i)||(T(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=i,i=a),en(this,Xe(n,i),t),this}}function en(t,e,n,i){var r=e._milliseconds,o=We(e._days),s=We(e._months);t.isValid()&&(i=null==i||i,s&&Ht(t,J(t,"Month")+s*n),o&&K(t,"Date",J(t,"Date")+o*n),r&&t._d.setTime(t._d.valueOf()+r*n),i&&a.updateOffset(t,o||s))}Xe.fn=$e.prototype,Xe.invalid=function(){return Xe(NaN)};var nn=tn(1,"add"),an=tn(-1,"subtract");function rn(t){return"string"==typeof t||t instanceof String}function on(t,e){if(t.date()<e.date())return-on(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(n+1,"months")-i)))||0}function sn(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ge(t))&&(this._locale=e),this)}a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ln=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function cn(){return this._locale}var dn=1e3,un=60*dn,hn=60*un,fn=3506328*hn;function pn(t,e){return(t%e+e)%e}function mn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-fn:new Date(t,e,n).valueOf()}function _n(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-fn:Date.UTC(t,e,n)}function gn(t,e){return e.erasAbbrRegex(t)}function vn(){var t,e,n=[],i=[],a=[],r=[],o=this.eras();for(t=0,e=o.length;t<e;++t)i.push(_t(o[t].name)),n.push(_t(o[t].abbr)),a.push(_t(o[t].narrow)),r.push(_t(o[t].name)),r.push(_t(o[t].abbr)),r.push(_t(o[t].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function yn(t,e){Y(0,[t,t.length],0,e)}function bn(t,e,n,i,a){var r;return null==t?qt(this,i,a).year:(e>(r=Gt(t,i,a))&&(e=r),wn.call(this,t,e,n,i,a))}function wn(t,e,n,i,a){var r=Bt(t,e,n,i,a),o=Ut(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Y("N",0,0,"eraAbbr"),Y("NN",0,0,"eraAbbr"),Y("NNN",0,0,"eraAbbr"),Y("NNNN",0,0,"eraName"),Y("NNNNN",0,0,"eraNarrow"),Y("y",["y",1],"yo","eraYear"),Y("y",["yy",2],0,"eraYear"),Y("y",["yyy",3],0,"eraYear"),Y("y",["yyyy",4],0,"eraYear"),pt("N",gn),pt("NN",gn),pt("NNN",gn),pt("NNNN",(function(t,e){return e.erasNameRegex(t)})),pt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),vt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,i){var a=n._locale.erasParse(t,i,n._strict);a?m(n).era=a:m(n).invalidEra=t})),pt("y",ct),pt("yy",ct),pt("yyy",ct),pt("yyyy",ct),pt("yo",(function(t,e){return e._eraYearOrdinalRegex||ct})),vt(["y","yy","yyy","yyyy"],kt),vt(["yo"],(function(t,e,n,i){var a;n._locale._eraYearOrdinalRegex&&(a=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[kt]=n._locale.eraYearOrdinalParse(t,a):e[kt]=parseInt(t,10)})),Y(0,["gg",2],0,(function(){return this.weekYear()%100})),Y(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),yn("gggg","weekYear"),yn("ggggg","weekYear"),yn("GGGG","isoWeekYear"),yn("GGGGG","isoWeekYear"),$("weekYear","gg"),$("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),pt("G",dt),pt("g",dt),pt("GG",it,Z),pt("gg",it,Z),pt("GGGG",st,et),pt("gggg",st,et),pt("GGGGG",lt,nt),pt("ggggg",lt,nt),yt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=q(t)})),yt(["gg","GG"],(function(t,e,n,i){e[i]=a.parseTwoDigitYear(t)})),Y("Q",0,"Qo","quarter"),$("quarter","Q"),U("quarter",7),pt("Q",Q),vt("Q",(function(t,e){e[xt]=3*(q(t)-1)})),Y("D",["DD",2],"Do","date"),$("date","D"),U("date",9),pt("D",it),pt("DD",it,Z),pt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),vt(["D","DD"],St),vt("Do",(function(t,e){e[St]=q(t.match(it)[0])}));var kn=G("Date",!0);Y("DDD",["DDDD",3],"DDDo","dayOfYear"),$("dayOfYear","DDD"),U("dayOfYear",4),pt("DDD",ot),pt("DDDD",tt),vt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=q(t)})),Y("m",["mm",2],0,"minute"),$("minute","m"),U("minute",14),pt("m",it),pt("mm",it,Z),vt(["m","mm"],Ct);var xn=G("Minutes",!1);Y("s",["ss",2],0,"second"),$("second","s"),U("second",15),pt("s",it),pt("ss",it,Z),vt(["s","ss"],Tt);var Sn,Mn,Cn=G("Seconds",!1);for(Y("S",0,0,(function(){return~~(this.millisecond()/100)})),Y(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),Y(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),Y(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),Y(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),Y(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),Y(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),$("millisecond","ms"),U("millisecond",16),pt("S",ot,Q),pt("SS",ot,Z),pt("SSS",ot,tt),Sn="SSSS";Sn.length<=9;Sn+="S")pt(Sn,ct);function Tn(t,e){e[jt]=q(1e3*("0."+t))}for(Sn="S";Sn.length<=9;Sn+="S")vt(Sn,Tn);Mn=G("Milliseconds",!1),Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");var jn=w.prototype;function On(t){return t}jn.add=nn,jn.calendar=function(t,e){var n;1===arguments.length&&(k(n=arguments[0])||u(n)||rn(n)||d(n)||function(t){var e=r(t),n=!1;return e&&(n=0===t.filter((function(e){return!d(e)&&rn(t)})).length),e&&n}(n)||function(t){var e,n,i=o(t)&&!l(t),a=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<r.length;e+=1)n=r[e],a=a||s(t,n);return i&&a}(n)||null==n?(t=arguments[0],e=void 0):function(t){var e,n,i=o(t)&&!l(t),a=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<r.length;e+=1)n=r[e],a=a||s(t,n);return i&&a}(arguments[0])&&(e=arguments[0],t=void 0));var i=t||Pe(),c=Be(i,this).startOf("day"),h=a.calendarFormat(this,c)||"sameElse",f=e&&(j(e[h])?e[h].call(this,i):e[h]);return this.format(f||this.localeData().calendar(h,this,Pe(i)))},jn.clone=function(){return new w(this)},jn.diff=function(t,e,n){var i,a,r;if(!this.isValid())return NaN;if(!(i=Be(t,this)).isValid())return NaN;switch(a=6e4*(i.utcOffset()-this.utcOffset()),e=F(e)){case"year":r=on(this,i)/12;break;case"month":r=on(this,i);break;case"quarter":r=on(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-a)/864e5;break;case"week":r=(this-i-a)/6048e5;break;default:r=this-i}return n?r:B(r)},jn.endOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?_n:mn,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=hn-pn(e+(this._isUTC?0:this.utcOffset()*un),hn)-1;break;case"minute":e=this._d.valueOf(),e+=un-pn(e,un)-1;break;case"second":e=this._d.valueOf(),e+=dn-pn(e,dn)-1}return this._d.setTime(e),a.updateOffset(this,!0),this},jn.format=function(t){t||(t=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var e=R(this,t);return this.localeData().postformat(e)},jn.from=function(t,e){return this.isValid()&&(k(t)&&t.isValid()||Pe(t).isValid())?Xe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},jn.fromNow=function(t){return this.from(Pe(),t)},jn.to=function(t,e){return this.isValid()&&(k(t)&&t.isValid()||Pe(t).isValid())?Xe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},jn.toNow=function(t){return this.to(Pe(),t)},jn.get=function(t){return j(this[t=F(t)])?this[t]():this},jn.invalidAt=function(){return m(this).overflow},jn.isAfter=function(t,e){var n=k(t)?t:Pe(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},jn.isBefore=function(t,e){var n=k(t)?t:Pe(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},jn.isBetween=function(t,e,n,i){var a=k(t)?t:Pe(t),r=k(e)?e:Pe(e);return!!(this.isValid()&&a.isValid()&&r.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(a,n):!this.isBefore(a,n))&&(")"===i[1]?this.isBefore(r,n):!this.isAfter(r,n)))},jn.isSame=function(t,e){var n,i=k(t)?t:Pe(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=F(e)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},jn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},jn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},jn.isValid=function(){return _(this)},jn.lang=ln,jn.locale=sn,jn.localeData=cn,jn.max=Re,jn.min=Ye,jn.parsingFlags=function(){return f({},m(this))},jn.set=function(t,e){if("object"==typeof t){var n,i=function(t){var e,n=[];for(e in t)s(t,e)&&n.push({unit:e,priority:z[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=W(t));for(n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(j(this[t=F(t)]))return this[t](e);return this},jn.startOf=function(t){var e,n;if(void 0===(t=F(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?_n:mn,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=pn(e+(this._isUTC?0:this.utcOffset()*un),hn);break;case"minute":e=this._d.valueOf(),e-=pn(e,un);break;case"second":e=this._d.valueOf(),e-=pn(e,dn)}return this._d.setTime(e),a.updateOffset(this,!0),this},jn.subtract=an,jn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},jn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},jn.toDate=function(){return new Date(this.valueOf())},jn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?R(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):j(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",R(n,"Z")):R(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},jn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,i="moment",a="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),t="["+i+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=a+'[")]',this.format(t+e+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(jn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),jn.toJSON=function(){return this.isValid()?this.toISOString():null},jn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},jn.unix=function(){return Math.floor(this.valueOf()/1e3)},jn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},jn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},jn.eraName=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].name;if(i[t].until<=n&&n<=i[t].since)return i[t].name}return""},jn.eraNarrow=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].narrow;if(i[t].until<=n&&n<=i[t].since)return i[t].narrow}return""},jn.eraAbbr=function(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].abbr;if(i[t].until<=n&&n<=i[t].since)return i[t].abbr}return""},jn.eraYear=function(){var t,e,n,i,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=r[t].since<=r[t].until?1:-1,i=this.startOf("day").valueOf(),r[t].since<=i&&i<=r[t].until||r[t].until<=i&&i<=r[t].since)return(this.year()-a(r[t].since).year())*n+r[t].offset;return this.year()},jn.year=Wt,jn.isLeapYear=function(){return V(this.year())},jn.weekYear=function(t){return bn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},jn.isoWeekYear=function(t){return bn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},jn.quarter=jn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},jn.month=Nt,jn.daysInMonth=function(){return Dt(this.year(),this.month())},jn.week=jn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},jn.isoWeek=jn.isoWeeks=function(t){var e=qt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},jn.weeksInYear=function(){var t=this.localeData()._week;return Gt(this.year(),t.dow,t.doy)},jn.weeksInWeekYear=function(){var t=this.localeData()._week;return Gt(this.weekYear(),t.dow,t.doy)},jn.isoWeeksInYear=function(){return Gt(this.year(),1,4)},jn.isoWeeksInISOWeekYear=function(){return Gt(this.isoWeekYear(),1,4)},jn.date=kn,jn.day=jn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},jn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},jn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},jn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},jn.hour=jn.hours=le,jn.minute=jn.minutes=xn,jn.second=jn.seconds=Cn,jn.millisecond=jn.milliseconds=Mn,jn.utcOffset=function(t,e,n){var i,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ve(ht,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=qe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?en(this,Xe(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:qe(this)},jn.utc=function(t){return this.utcOffset(0,t)},jn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(qe(this),"m")),this},jn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ve(ut,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},jn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Pe(t).utcOffset():0,(this.utcOffset()-t)%60==0)},jn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},jn.isLocal=function(){return!!this.isValid()&&!this._isUTC},jn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},jn.isUtc=Ge,jn.isUTC=Ge,jn.zoneAbbr=function(){return this._isUTC?"UTC":""},jn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},jn.dates=S("dates accessor is deprecated. Use date instead.",kn),jn.months=S("months accessor is deprecated. Use month instead",Nt),jn.years=S("years accessor is deprecated. Use year instead",Wt),jn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),jn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t,e={};return b(e,this),(e=Ee(e))._a?(t=e._isUTC?p(e._a):Pe(e._a),this._isDSTShifted=this.isValid()&&function(t,e,n){var i,a=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(i=0;i<a;i++)(n&&t[i]!==e[i]||!n&&q(t[i])!==q(e[i]))&&o++;return o+r}(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var Ln=L.prototype;function Dn(t,e,n,i){var a=ge(),r=p().set(i,e);return a[n](r,t)}function An(t,e,n){if(d(t)&&(e=t,t=void 0),t=t||"",null!=e)return Dn(t,e,n,"month");var i,a=[];for(i=0;i<12;i++)a[i]=Dn(t,i,n,"month");return a}function En(t,e,n,i){"boolean"==typeof t?(d(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,d(e)&&(n=e,e=void 0),e=e||"");var a,r=ge(),o=t?r._week.dow:0,s=[];if(null!=n)return Dn(e,(n+o)%7,i,"day");for(a=0;a<7;a++)s[a]=Dn(e,(a+o)%7,i,"day");return s}Ln.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return j(i)?i.call(e,n):i},Ln.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(A).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},Ln.invalidDate=function(){return this._invalidDate},Ln.ordinal=function(t){return this._ordinal.replace("%d",t)},Ln.preparse=On,Ln.postformat=On,Ln.relativeTime=function(t,e,n,i){var a=this._relativeTime[n];return j(a)?a(t,e,n,i):a.replace(/%d/i,t)},Ln.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return j(n)?n(e):n.replace(/%s/i,e)},Ln.set=function(t){var e,n;for(n in t)s(t,n)&&(j(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Ln.eras=function(t,e){var n,i,r,o=this._eras||ge("en")._eras;for(n=0,i=o.length;n<i;++n){switch(typeof o[n].since){case"string":r=a(o[n].since).startOf("day"),o[n].since=r.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":r=a(o[n].until).startOf("day").valueOf(),o[n].until=r.valueOf()}}return o},Ln.erasParse=function(t,e,n){var i,a,r,o,s,l=this.eras();for(t=t.toUpperCase(),i=0,a=l.length;i<a;++i)if(r=l[i].name.toUpperCase(),o=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(o===t)return l[i];break;case"NNNN":if(r===t)return l[i];break;case"NNNNN":if(s===t)return l[i]}else if([r,o,s].indexOf(t)>=0)return l[i]},Ln.erasConvertYear=function(t,e){var n=t.since<=t.until?1:-1;return void 0===e?a(t.since).year():a(t.since).year()+(e-t.offset)*n},Ln.erasAbbrRegex=function(t){return s(this,"_erasAbbrRegex")||vn.call(this),t?this._erasAbbrRegex:this._erasRegex},Ln.erasNameRegex=function(t){return s(this,"_erasNameRegex")||vn.call(this),t?this._erasNameRegex:this._erasRegex},Ln.erasNarrowRegex=function(t){return s(this,"_erasNarrowRegex")||vn.call(this),t?this._erasNarrowRegex:this._erasRegex},Ln.months=function(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||It).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone},Ln.monthsShort=function(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[It.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Ln.monthsParse=function(t,e,n){var i,a,r;if(this._monthsParseExact)return Rt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(a=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},Ln.monthsRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||$t.call(this),t?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Yt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},Ln.monthsShortRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||$t.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Pt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},Ln.week=function(t){return qt(t,this._week.dow,this._week.doy).week},Ln.firstDayOfYear=function(){return this._week.doy},Ln.firstDayOfWeek=function(){return this._week.dow},Ln.weekdays=function(t,e){var n=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Jt(n,this._week.dow):t?n[t.day()]:n},Ln.weekdaysMin=function(t){return!0===t?Jt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},Ln.weekdaysShort=function(t){return!0===t?Jt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},Ln.weekdaysParse=function(t,e,n){var i,a,r;if(this._weekdaysParseExact)return ne.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(a=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},Ln.weekdaysRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Zt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},Ln.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=te),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Ln.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ee),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Ln.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},Ln.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},me("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===q(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),a.lang=S("moment.lang is deprecated. Use moment.locale instead.",me),a.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ge);var In=Math.abs;function Pn(t,e,n,i){var a=Xe(e,n);return t._milliseconds+=i*a._milliseconds,t._days+=i*a._days,t._months+=i*a._months,t._bubble()}function Yn(t){return t<0?Math.floor(t):Math.ceil(t)}function Rn(t){return 4800*t/146097}function Hn(t){return 146097*t/4800}function Nn(t){return function(){return this.as(t)}}var $n=Nn("ms"),Fn=Nn("s"),Wn=Nn("m"),zn=Nn("h"),Un=Nn("d"),Vn=Nn("w"),Bn=Nn("M"),qn=Nn("Q"),Gn=Nn("y");function Jn(t){return function(){return this.isValid()?this._data[t]:NaN}}var Kn=Jn("milliseconds"),Xn=Jn("seconds"),Qn=Jn("minutes"),Zn=Jn("hours"),ti=Jn("days"),ei=Jn("months"),ni=Jn("years"),ii=Math.round,ai={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ri(t,e,n,i,a){return a.relativeTime(e||1,!!n,t,i)}var oi=Math.abs;function si(t){return(t>0)-(t<0)||+t}function li(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i,a,r,o,s,l=oi(this._milliseconds)/1e3,c=oi(this._days),d=oi(this._months),u=this.asSeconds();return u?(t=B(l/60),e=B(t/60),l%=60,t%=60,n=B(d/12),d%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",a=u<0?"-":"",r=si(this._months)!==si(u)?"-":"",o=si(this._days)!==si(u)?"-":"",s=si(this._milliseconds)!==si(u)?"-":"",a+"P"+(n?r+n+"Y":"")+(d?r+d+"M":"")+(c?o+c+"D":"")+(e||t||l?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(l?s+i+"S":"")):"P0D"}var ci=$e.prototype;return ci.isValid=function(){return this._isValid},ci.abs=function(){var t=this._data;return this._milliseconds=In(this._milliseconds),this._days=In(this._days),this._months=In(this._months),t.milliseconds=In(t.milliseconds),t.seconds=In(t.seconds),t.minutes=In(t.minutes),t.hours=In(t.hours),t.months=In(t.months),t.years=In(t.years),this},ci.add=function(t,e){return Pn(this,t,e,1)},ci.subtract=function(t,e){return Pn(this,t,e,-1)},ci.as=function(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=F(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+Rn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Hn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},ci.asMilliseconds=$n,ci.asSeconds=Fn,ci.asMinutes=Wn,ci.asHours=zn,ci.asDays=Un,ci.asWeeks=Vn,ci.asMonths=Bn,ci.asQuarters=qn,ci.asYears=Gn,ci.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12):NaN},ci._bubble=function(){var t,e,n,i,a,r=this._milliseconds,o=this._days,s=this._months,l=this._data;return r>=0&&o>=0&&s>=0||r<=0&&o<=0&&s<=0||(r+=864e5*Yn(Hn(s)+o),o=0,s=0),l.milliseconds=r%1e3,t=B(r/1e3),l.seconds=t%60,e=B(t/60),l.minutes=e%60,n=B(e/60),l.hours=n%24,o+=B(n/24),a=B(Rn(o)),s+=a,o-=Yn(Hn(a)),i=B(s/12),s%=12,l.days=o,l.months=s,l.years=i,this},ci.clone=function(){return Xe(this)},ci.get=function(t){return t=F(t),this.isValid()?this[t+"s"]():NaN},ci.milliseconds=Kn,ci.seconds=Xn,ci.minutes=Qn,ci.hours=Zn,ci.days=ti,ci.weeks=function(){return B(this.days()/7)},ci.months=ei,ci.years=ni,ci.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,i,a=!1,r=ai;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(a=t),"object"==typeof e&&(r=Object.assign({},ai,e),null!=e.s&&null==e.ss&&(r.ss=e.s-1)),n=this.localeData(),i=function(t,e,n,i){var a=Xe(t).abs(),r=ii(a.as("s")),o=ii(a.as("m")),s=ii(a.as("h")),l=ii(a.as("d")),c=ii(a.as("M")),d=ii(a.as("w")),u=ii(a.as("y")),h=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=e,h[3]=+t>0,h[4]=i,ri.apply(null,h)}(this,!a,r,n),a&&(i=n.pastFuture(+this,i)),n.postformat(i)},ci.toISOString=li,ci.toString=li,ci.toJSON=li,ci.locale=sn,ci.localeData=cn,ci.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",li),ci.lang=ln,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),pt("x",dt),pt("X",/[+-]?\d+(\.\d{1,3})?/),vt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),vt("x",(function(t,e,n){n._d=new Date(q(t))})),
//! moment.js
a.version="2.26.0",e=Pe,a.fn=jn,a.min=function(){return He("isBefore",[].slice.call(arguments,0))},a.max=function(){return He("isAfter",[].slice.call(arguments,0))},a.now=function(){return Date.now?Date.now():+new Date},a.utc=p,a.unix=function(t){return Pe(1e3*t)},a.months=function(t,e){return An(t,e,"months")},a.isDate=u,a.locale=me,a.invalid=g,a.duration=Xe,a.isMoment=k,a.weekdays=function(t,e,n){return En(t,e,n,"weekdays")},a.parseZone=function(){return Pe.apply(null,arguments).parseZone()},a.localeData=ge,a.isDuration=Fe,a.monthsShort=function(t,e){return An(t,e,"monthsShort")},a.weekdaysMin=function(t,e,n){return En(t,e,n,"weekdaysMin")},a.defineLocale=_e,a.updateLocale=function(t,e){if(null!=e){var n,i,a=ce;null!=de[t]&&null!=de[t].parentLocale?de[t].set(O(de[t]._config,e)):(null!=(i=pe(t))&&(a=i._config),e=O(a,e),null==i&&(e.abbr=t),(n=new L(e)).parentLocale=de[t],de[t]=n),me(t)}else null!=de[t]&&(null!=de[t].parentLocale?(de[t]=de[t].parentLocale,t===me()&&me(t)):null!=de[t]&&delete de[t]);return de[t]},a.locales=function(){return M(de)},a.weekdaysShort=function(t,e,n){return En(t,e,n,"weekdaysShort")},a.normalizeUnits=F,a.relativeTimeRounding=function(t){return void 0===t?ii:"function"==typeof t&&(ii=t,!0)},a.relativeTimeThreshold=function(t,e){return void 0!==ai[t]&&(void 0===e?ai[t]:(ai[t]=e,"s"===t&&(ai.ss=e-1),!0))},a.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},a.prototype=jn,a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},a}()}).call(this,n(579)(t))},function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return _}));var i=n(1),a=n(0),r=n.n(a),o=n(3),s=n(6),l=n(2),c=n.n(l);function d(t){var e={contentType:"application/json",type:t.type||"GET",data:t.data||{},url:t.url};"GET"==e.type||"DELETE"==e.type?(r.a.isEmptyObject(e.data)||(e.url+=-1==e.url.indexOf("?")?"?":"&",e.url+=r.a.param(e.data,!0)),e.data=null):(e.dataType="json",e.data=JSON.stringify(e.data)),r.a.ajax(e).done((function(e){if("string"==typeof e)try{e=e.replace("Infinity,",'"Infinity",'),e=r.a.parseJSON(e)}catch(t){console.debug(t)}t.success&&t.success(e)})).fail((function(e){var n=null;try{n=r.a.parseJSON(e.responseText)}catch(t){n=e.responseText}t.error&&t.error(n,e.status)})).always((function(){t.complete&&t.complete()}))}var u=1024,h=u*u,f=h*u,p=f*u;function m(t,e,n){n=void 0!==n?n:1;var i="";if(t>=p)t/=p,i="TB";else if(t>=f)t/=f,i="GB";else if(t>=h)t/=h,i="MB";else if(t>=u)t/=u,i="KB";else{if(!(t>0))return e?"0 b":"<strong>-</strong>";i="b"}var a="b"==i?t:function(t,e){for(var n=1,i=0;i<e;i++)n*=10;return Math.round(t*n)/n}(t,n);return e?"".concat(a," ").concat(i):"<strong>".concat(a,"</strong> ").concat(i)}function _(t){var e,n,i=2166136261;for(e=0,n=t.length;e<n;e++)i^=t.charCodeAt(e),i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24);return i>>>0}e.b={cssLoadFile:function(t){r()('link[href^="'.concat(t,'"]')).length||r()('<link href="'.concat(Object(o.getAppRoot)()).concat(t,'" rel="stylesheet">')).appendTo("head")},cssGetAttribute:function(t,e){var n=r()('<div class="'.concat(t,'"></div>'));n.appendTo(":eq(0)");var i=n.css(e);return n.remove(),i},get:function(t){top.__utils__get__=top.__utils__get__||{};var e=JSON.stringify(t);t.cache&&top.__utils__get__[e]?(t.success&&t.success(top.__utils__get__[e]),window.console.debug("utils.js::get() - Fetching from cache [".concat(t.url,"]."))):d({url:t.url,data:t.data,success:function(n){top.__utils__get__[e]=n,t.success&&t.success(n)},error:function(e,n){t.error&&t.error(e,n)}})},merge:function(t,e){return t?i.default.defaults(t,e):e},iframe:function(t){return'<iframe src="'.concat(t,'" frameborder="0" style="width: 100%; height: 100%;"/>')},bytesToString:m,uid:function(){return top.__utils__uid__=top.__utils__uid__||0,"uid-".concat(top.__utils__uid__++)},time:function(){var t=new Date,e=(t.getHours()<10?"0":"")+t.getHours(),n=(t.getMinutes()<10?"0":"")+t.getMinutes();return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear(),", ").concat(e,":").concat(n)},request:d,sanitize:function(t){return r()("<div/>").text(t).html()},textify:function(t){if(r.a.isArray(t)){var e=(t=t.toString().replace(/,/g,", ")).lastIndexOf(", ");return-1!=e&&(t="".concat(t.substr(0,e)," or ").concat(t.substr(e+2))),t}return""},isEmpty:function(t){if(t instanceof Array||(t=[t]),0===t.length)return!0;for(var e in t)if(["__null__","__undefined__",null,void 0].indexOf(t[e])>-1)return!0;return!1},deepeach:function t(e,n){for(var a in e){var r=e[a];if(i.default.isObject(r)){var o=n(r);o&&(e[a]=o),t(r,n)}}},isJSON:function(t){return/^[\],:{}\s]*$/.test(t.replace(/\\["\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},clone:function(t){return JSON.parse(JSON.stringify(t)||null)},linkify:function(t){var e,n,i;return e=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gim,n=/(^|[^/])(www\.[\S]+(\b|$))/gim,i=/(([a-zA-Z0-9\-_.])+@[a-zA-Z_]+?(\.[a-zA-Z]{2,6})+)/gim,t.replace(e,'<a href="$1" target="_blank">$1</a>').replace(n,'$1<a href="http://$2" target="_blank">$2</a>').replace(i,'<a href="mailto:$1">$1</a>')},appendScriptStyle:function(t){t.script&&""!==t.script&&r()("<script/>",{type:"text/javascript"}).text(t.script).appendTo("head"),t.styles&&""!==t.styles&&r()("<style/>",{type:"text/css"}).text(t.styles).appendTo("head")},getQueryString:function(t){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]".concat(encodeURIComponent(t).replace(/[.+*]/g,"\\$&"),"(?:\\=([^&]*))?)?.*$"),"i"),"$1"))},setWindowTitle:function(t){var e=Object(s.a)();window.document.title=t?"Galaxy ".concat(e.config.brand?" | ".concat(e.config.brand):""," | ").concat(c()(t)):"Galaxy ".concat(e.config.brand?" | ".concat(e.config.brand):"")}}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(136),c=n(2),d=n.n(c),u={logger:null,_logNamespace:"."};Object(l.a)(u);var h=s.a.Model.extend({initialize:function(t){if(this._checkEnabledSessionStorage(),!t.id)throw new Error("SessionStorageModel requires an id in the initial attributes");this.id=t.id;var e=this.isNew()?{}:this._read(this);this.clear({silent:!0}),this.save(r.default.extend({},this.defaults,e,t),{silent:!0}),this.on("change",(function(){this.save()}))},_checkEnabledSessionStorage:function(){try{return window.sessionStorage.length>=0}catch(t){return alert("Please enable cookies in your browser for this Galaxy site"),!1}},sync:function(t,e,n){n.silent||e.trigger("request",e,{},n);var i={};switch(t){case"create":i=this._create(e);break;case"read":i=this._read(e);break;case"update":i=this._update(e);break;case"delete":i=this._delete(e)}return void 0!==i||null!==i?n.success&&n.success():n.error&&n.error(),i},_create:function(t){try{var e=t.toJSON(),n=sessionStorage.setItem(t.id,JSON.stringify(e));return null===n?n:e}catch(t){if(!(t instanceof DOMException&&navigator.userAgent.indexOf("Safari")>-1))throw t}return null},_read:function(t){return JSON.parse(sessionStorage.getItem(t.id))},_update:function(t){return t._create(t)},_delete:function(t){return sessionStorage.removeItem(t.id)},isNew:function(){return!Object.prototype.hasOwnProperty.call(sessionStorage,this.id)},_log:function(){return JSON.stringify(this.toJSON(),null,"  ")},toString:function(){return"SessionStorageModel(".concat(this.id,")")}});h.prototype=r.default.omit(h.prototype,"url","urlRoot");var f={searchAttributes:[],searchAliases:{},searchAttribute:function(t,e){var n=this.get(t);return!(!e||null==n)&&(r.default.isArray(n)?this._searchArrayAttribute(n,e):-1!==n.toString().toLowerCase().indexOf(e.toLowerCase()))},_searchArrayAttribute:function(t,e){return e=e.toLowerCase(),r.default.any(t,(function(t){return-1!==t.toString().toLowerCase().indexOf(e.toLowerCase())}))},search:function(t){var e=this;return r.default.filter(this.searchAttributes,(function(n){return e.searchAttribute(n,t)}))},matches:function(t){var e=t.split("=");if(e.length>=2){var n=e[0];return n=this.searchAliases[n]||n,this.searchAttribute(n,e[1])}return!!this.search(t).length},matchesAll:function(t){var e=this;return t=t.match(/(".*"|\w*=".*"|\S*)/g).filter((function(t){return!!t})),r.default.all(t,(function(t){return t=t.replace(/"/g,""),e.matches(t)}))}},p={hiddenUntilActivated:function(t,e){if(e=e||{},this.HUAVOptions={$elementShown:this.$el,showFn:a.a.prototype.toggle,showSpeed:"fast"},r.default.extend(this.HUAVOptions,e||{}),this.HUAVOptions.hasBeenShown=this.HUAVOptions.$elementShown.is(":visible"),this.hidden=this.isHidden(),t){var n=this;t.on("click",(function(t){n.toggle(n.HUAVOptions.showSpeed)}))}},isHidden:function(){return this.HUAVOptions.$elementShown.is(":hidden")},toggle:function(){return this.hidden?(this.HUAVOptions.hasBeenShown||r.default.isFunction(this.HUAVOptions.onshowFirstTime)&&(this.HUAVOptions.hasBeenShown=!0,this.HUAVOptions.onshowFirstTime.call(this)),r.default.isFunction(this.HUAVOptions.onshow)&&(this.HUAVOptions.onshow.call(this),this.trigger("hiddenUntilActivated:shown",this)),this.hidden=!1):(r.default.isFunction(this.HUAVOptions.onhide)&&(this.HUAVOptions.onhide.call(this),this.trigger("hiddenUntilActivated:hidden",this)),this.hidden=!0),this.HUAVOptions.showFn.apply(this.HUAVOptions.$elementShown,arguments)}},m={initialize:function(t){this.draggable=t.draggable||!1},$dragHandle:function(){return this.$(".title-bar")},toggleDraggable:function(){this.draggable?this.draggableOff():this.draggableOn()},draggableOn:function(){this.draggable=!0,this.dragStartHandler=r.default.bind(this._dragStartHandler,this),this.dragEndHandler=r.default.bind(this._dragEndHandler,this);var t=this.$dragHandle().attr("draggable",!0).get(0);t.addEventListener("dragstart",this.dragStartHandler,!1),t.addEventListener("dragend",this.dragEndHandler,!1)},draggableOff:function(){this.draggable=!1;var t=this.$dragHandle().attr("draggable",!1).get(0);t.removeEventListener("dragstart",this.dragStartHandler,!1),t.removeEventListener("dragend",this.dragEndHandler,!1)},_dragStartHandler:function(t){return t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",JSON.stringify(this.model.toJSON())),this.trigger("draggable:dragstart",t,this),!1},_dragEndHandler:function(t){return this.trigger("draggable:dragend",t,this),!1}},_={initialize:function(t){this.selectable=t.selectable||!1,this.selected=t.selected||!1},$selector:function(){return this.$(".selector")},_renderSelected:function(){this.$selector().find("span").toggleClass("fa-check-square-o",this.selected).toggleClass("fa-square-o",!this.selected)},toggleSelector:function(){this.$selector().is(":visible")?this.hideSelector():this.showSelector()},showSelector:function(t){t=void 0!==t?t:this.fxSpeed,this.selectable=!0,this.trigger("selectable",!0,this),this._renderSelected(),t?this.$selector().show(t):this.$selector().show()},hideSelector:function(t){t=void 0!==t?t:this.fxSpeed,this.selectable=!1,this.trigger("selectable",!1,this),t?this.$selector().hide(t):this.$selector().hide()},toggleSelect:function(t){this.selected?this.deselect(t):this.select(t)},select:function(t){return this.selected||(this.trigger("selected",this,t),this.selected=!0,this._renderSelected()),!1},deselect:function(t){return this.selected&&(this.trigger("de-selected",this,t),this.selected=!1,this._renderSelected()),!1}};e.a={LoggableMixin:u,SessionStorageModel:h,mixin:function(t,e){var n=Array.prototype.slice.call(arguments,0),i=n.pop();return n.unshift(i),r.default.defaults.apply(r.default,n)},SearchableModelMixin:f,HiddenUntilActivatedViewMixin:p,DraggableViewMixin:m,SelectableViewMixin:_,wrapTemplate:function(t,e){e=e||"model";var n=r.default.template(t.join(""));return function(t,i){var a={view:i||{},_l:d.a};return a[e]=t||{},n(a)}},buildComparator:function(t,e){var n=(e=e||{}).ascending?1:-1;return function(e,i){return((e=e.get(t))<(i=i.get(t))?-1:e>i?1:0)*n}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(484),a=n.n(i).a},,,,,,,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(151),c=n(442),d=n(10),u={View:s.a.View.extend({initialize:function(t){var e=this;this.model=t&&t.model||new s.a.Model({id:d.b.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(t),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element"),Object(c.b)(this.$text[0],{mask:function(t){return!!e._isParameter(t)||!(!e.model.get("precise")&&t!=t.split(".")[0])&&t==t.replace(/[^0-9eE.-]/g,"")}}),this.$text[0].addEventListener("change",(function(t){e.value(t.currentTarget.value)}));var n=this.model.attributes;this.has_slider=null!==n.max&&null!==n.min&&n.max>n.min;var i=n.step;i||(i=n.precise&&this.has_slider?(n.max-n.min)/n.split:1),this.has_slider&&this.$slider.slider({min:n.min,max:n.max,step:i}).on("slide",(function(t,n){e.value(n.value)})),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.get("value");this.has_slider?(this.$slider.slider("value",t),this.$slider.show(),this.$text.addClass("col-3 mr-3")):(this.$slider.hide(),this.$text.removeClass("col-3 mr-3")),t!==this.$text.val()&&this.$text.val(t)},value:function(t){if(void 0!==t){var e=this.model.attributes,n=t,i=null!==t&&""!==t&&!this._isParameter(t);i&&(isNaN(t)&&(t=0),e.precise||(t=Math.round(t)),null===e.max||isNaN(e.max)||(t=Math.min(t,e.max)),null===e.min||isNaN(e.min)||(t=Math.max(t,e.min))),this.model.set("value",t),this.model.trigger("change"),e.onchange(t);var a=i&&parseInt(n)!==parseInt(t)?"This value was invalid or out-of-range. It has been auto-corrected.":null;this.model.trigger("error",a)}return this.model.get("value")},_isParameter:function(t){return this.model.get("is_workflow")&&"$"===String(t).substring(0,1)},_template:function(){return'<div class="ui-form-slider container-fluid">\n                    <div class="row">\n                        <input class="ui-input ui-form-slider-text" type="text"/>\n                        <div class="ui-form-slider-element col mt-1"/>\n                    </div>\n                </div>'}})},h=n(67),f=s.a.View.extend({initialize:function(t){var e=this;this.model=t&&t.model||new s.a.Model({visible:!0,cls:null,data:[],id:d.b.uid(),error_text:"No options available.",wait_text:"Please wait...",multiple:!1,optional:!1,onchange:function(){}}).set(t),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.listenTo(this,"change",(function(){e.model.get("onchange")(e.value())})),this.render()},render:function(){var t=this;this.$el.empty().removeClass().addClass("ui-options").addClass(this.model.get("cls")).append(this.$message=a()("<div/>").addClass("mt-2")).append(this.$menu=a()("<div/>").addClass("ui-options-menu")).append(this.$options=a()(this._template())),this.all_button=null,this.model.get("multiple")&&(this.all_button=new h.a.ButtonCheck({onclick:function(){t.$("input").prop("checked",0!==t.all_button.value()),t.value(t._getValue()),t.trigger("change")}}),this.$menu.append(this.all_button.$el)),this._changeData(),this._changeWait(),this._changeVisible()},update:function(t){t.data&&this.model.set("data",t.data)},_changeData:function(){var t=this;this.$options.empty(),this._templateOptions?this.$options.append(this._templateOptions(this.model.get("data"))):r.default.each(this.model.get("data"),(function(e){t.$options.append(a()(t._templateOption(e)).addClass("ui-option").tooltip({title:e.tooltip||"",placement:"bottom"}))})),this.$("input").on("change",(function(){t.value(t._getValue()),t.trigger("change")})),this._changeValue(),this._changeWait()},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"]()},_changeWait:function(){this.model.get("wait")?0===this.length()&&(this._messageShow(this.model.get("wait_text"),"info"),this.$options.hide(),this.$menu.hide()):0===this.length()?(this._messageShow(this.model.get("error_text"),"danger"),this.$options.hide(),this.$menu.hide()):(this.$message.hide(),this.$options.css("display","inline-block"),this.$menu.show())},_changeValue:function(){this._setValue(this.model.get("value")),null!==this._getValue()||this.model.get("multiple")||this.model.get("optional")||this._setValue(this.first()),this.all_button&&this.all_button.value(a.a.isArray(this._getValue())?this._getValue().length:0,this.length())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){var t=this.$("input").first();return t.length>0?t.val():null},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},length:function(){return this.$(".ui-option").length},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},_setValue:function(t){var e=this;if(void 0!==t&&(this.$("input").prop("checked",!1),null!==t)){var n=a.a.isArray(t)?t:[t];r.default.each(n,(function(t){e.$('input[value="'.concat(t,'"]')).first().prop("checked",!0)}))}},_getValue:function(){var t=[];return this.$(":checked").each((function(){t.push(a()(this).val())})),d.b.isEmpty(t)?null:this.model.get("multiple")?t:t[0]},_messageShow:function(t,e){this.$message.show().removeClass().addClass("alert alert-".concat(e)).html(t)},_template:function(){return a()("<div/>").addClass("ui-options-list")}}),p=f.extend({_templateOption:function(t){var e=d.b.uid();return a()("<div/>").addClass("ui-option").addClass(this.model.get("cls_option")).append(a()("<input/>").attr({id:e,type:this.model.get("type"),name:this.model.id,value:t.value})).append(a()("<label/>").addClass("ui-options-label").attr("for",e).html(t.label))}}),m={};m.View=p.extend({initialize:function(t){t.type="radio",p.prototype.initialize.call(this,t)}});var _={};_.View=p.extend({initialize:function(t){t.type="checkbox",t.multiple=!0,p.prototype.initialize.call(this,t)}});var g={};g.View=f.extend({initialize:function(t){f.prototype.initialize.call(this,t)},_setValue:function(t){void 0!==t&&(this.$("input").prop("checked",!1),this.$("label").removeClass("active"),this.$('[value="'.concat(t,'"]')).prop("checked",!0).closest("label").addClass("active"))},_templateOption:function(t){var e=a()("<label/>").attr("role","button");return t.icon&&e.append(a()("<i/>").addClass("fa").addClass(t.icon).addClass(!t.label&&"no-padding")),e.append(a()("<input/>").attr({type:"radio",name:this.model.id,value:t.value}).hide()),t.label&&e.append(t.label),e},_template:function(){return a()("<div/>").addClass("ui-radiobutton")}});var v={Base:f,BaseIcons:p,Radio:m,RadioButton:g,Checkbox:_},y={View:v.BaseIcons.extend({initialize:function(t){t.type=t.display||"checkbox",t.multiple="checkbox"==t.type,v.BaseIcons.prototype.initialize.call(this,t)},update:function(t){this.model.set("data",t.options)},_setValue:function(t){if(v.BaseIcons.prototype._setValue.call(this,t),null!=t&&this.header_index){var e=this,n=a.a.isArray(t)?t:[t];r.default.each(n,(function(t){var n=e.header_index[t];r.default.each(n,(function(t){e._setState(t,!0)}))}))}},_setState:function(t,e){var n=this.$(".button-".concat(t)),i=this.$(".subgroup-".concat(t));n.data("is_expanded",e),e?(i.show(),n.removeClass("fa-plus-square").addClass("fa-minus-square")):(i.hide(),n.removeClass("fa-minus-square").addClass("fa-plus-square"))},_templateOptions:function(){var t=this;function e(e,n){var i=e.find(".button-".concat(n));i.on("click",(function(){t._setState(n,!i.data("is_expanded"))}))}this.header_index={};var n=a()("<div/>");return function n(i,r,o){for(var s in o=o||[],r){var l=r[s],c=l.options&&l.options.length>0,u=o.slice(0);t.header_index[l.value]=u.slice(0);var h=a()("<div/>");if(c){var f=d.b.uid(),p=a()("<span/>").addClass("button-".concat(f)).addClass("ui-drilldown-button fa fa-plus-square"),m=a()("<div/>").addClass("subgroup-".concat(f)).addClass("ui-drilldown-subgroup");h.append(a()("<div/>").append(p).append(t._templateOption({label:l.name,value:l.value}))),u.push(f),n(m,l.options,u),h.append(m),e(h,f)}else h.append(t._templateOption({label:l.name,value:l.value}));i.append(h)}}(n,this.model.get("data")),n},_template:function(){return a()("<div/>").addClass("ui-options-list drilldown-container").attr("id",this.model.id)}})},b=n(74),w=s.a.View.extend({initialize:function(t){var e=this;this.model=t&&t.model||new s.a.Model({disabled:!1,visible:!0,onchange:function(){}}).set(t),this.setElement(this._template()),this.$label=this.$(".label"),this.$input=this.$(".custom-control-input"),this.listenTo(this.model,"change",this.render,this),this.listenTo(this,"change",(function(){e.model.get("onchange")(e.value())})),this.render()},events:{input:"_onchange"},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return"true"==this.model.get("value")?(this.$label.text("Yes"),this.$input.prop("checked",!0)):(this.$label.text("No"),this.$input.prop("checked",!1)),this.model.get("disabled")?this.$input.attr("disabled",!0):this.$input.removeAttr("disabled"),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$input.prop("checked")?"true":"false"),this.trigger("change")},_template:function(){var t=this.model.id;return'<div class="ui-switch">\n                    <div class="custom-control" id="'.concat(t,'">\n                        <input type="checkbox" class="custom-control-input" id="switch-id-').concat(t,'" />\n                        <label class="custom-control-label" for="switch-id-').concat(t,'"/>\n                    </div>\n                    <div class="label" />\n                </div>')}}),k=s.a.View.extend({initialize:function(t){this.model=t&&t.model||new s.a.Model({message:null,status:"info",cls:"",persistent:!1,fade:!0}).set(t),this.listenTo(this.model,"change",this.render,this),t&&t.active_tab&&(this.active_tab=t.active_tab),this.render()},update:function(t){this.model.set(t)},render:function(){var t=this.model.get("status");if(this.$el.removeClass().addClass("alert alert-".concat(t," mt-2")).addClass(this.model.get("cls")),this.model.get("message")){if(this.$el.html(this.messageForDisplay()),this.$el[this.model.get("fade")?"fadeIn":"show"](),this.timeout&&window.clearTimeout(this.timeout),!this.model.get("persistent")){var e=this;this.timeout=window.setTimeout((function(){e.model.set("message","")}),3e3)}}else this.$el.hide();return this},messageForDisplay:function(){return r.default.escape(this.model.get("message"))}}),x=k.extend({messageForDisplay:function(){return this.model.get("message")}}),S=s.a.View.extend({initialize:function(t){this.model=t&&t.model||new s.a.Model({type:"text",placeholder:"",disabled:!1,readonly:!1,visible:!0,cls:"",area:!1,color:null,style:null}).set(t),this.tagName=this.model.get("area")?"textarea":"input",this.setElement(a()("<".concat(this.tagName,"/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},events:{input:"_onchange"},value:function(t){return void 0!==t&&this.model.set("value","string"==typeof t?t:""),this.model.get("value")},render:function(){var t=this;this.$el.removeClass().addClass("ui-".concat(this.tagName)).addClass(this.model.get("cls")).addClass(this.model.get("style")).attr("id",this.model.id).attr("type",this.model.get("type")).attr("placeholder",this.model.get("placeholder")).css("color",this.model.get("color")||"").css("border-color",this.model.get("color")||"");var e=this.model.get("datalist");return a.a.isArray(e)&&e.length>0&&this.$el.autocomplete({source:function(e,n){n(t.model.get("datalist"))},change:function(){t._onchange()}}),this.model.get("value")!==this.$el.val()&&this.$el.val(this.model.get("value")),r.default.each(["readonly","disabled"],(function(e){t.model.get(e)?t.$el.attr(e,!0):t.$el.removeAttr(e)})),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$el.val()),this.model.get("onchange")&&this.model.get("onchange")(this.model.get("value"))}}),M=s.a.View.extend({initialize:function(t){this.model=t&&t.model||new s.a.Model(t),this.setElement(a()("<div/>").append(this.$info=a()("<div/>")).append(this.$hidden=a()("<div/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.$hidden.val(this.model.get("value")),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this}}),C=s.a.View.extend({initialize:function(t){var e=this;this.select=new t.SelectClass.View(t),this.model=this.select.model,this.text=new S({onchange:this.model.get("onchange")}),this.on("change",(function(){e.model.get("onchange")&&e.model.get("onchange")(e.value())})),this.setElement(a()("<div/>").append(this.select.$el).append(this.text.$el)),this.update(t)},wait:function(){this.select.wait()},unwait:function(){this.select.unwait()},value:function(t){return(this.textmode?this.text:this.select).value(t)},update:function(t){var e=t.data;e||(e=[],r.default.each(t.options,(function(t){e.push({label:t[0],value:t[1]})})));var n=this.value();this.textmode=t.textable&&(!a.a.isArray(e)||0===e.length),this.text.$el[this.textmode?"show":"hide"](),this.select.$el[this.textmode?"hide":"show"](),this.select.update({data:e}),this.value(n)}}),T=s.a.View.extend({initialize:function(t){var e=this;this.model=t&&t.model||new s.a.Model(t),this.setElement(a()("<div/>").append(this.$info=a()("<div/>")).append(this.$file=a()("<input/>").attr("type","file").addClass("mb-1")).append(this.$text=a()("<textarea/>").addClass("ui-textarea").attr("disabled",!0)).append(this.$wait=a()("<i/>").addClass("fa fa-spinner fa-spin"))),this.listenTo(this.model,"change",this.render,this),this.$file.on("change",(function(t){e._readFile(t)})),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this.model.get("value")?this.$text.text(this.model.get("value")).show():this.$text.hide(),this.model.get("wait")?this.$wait.show():this.$wait.hide(),this},_readFile:function(t){var e=this,n=t.target.files&&t.target.files[0];if(n){var i=new FileReader;i.onload=function(){e.model.set({wait:!1,value:this.result})},this.model.set({wait:!0,value:null}),i.readAsText(n)}}});h.a.Button,h.a.ButtonCheck,h.a.ButtonMenu,h.a.ButtonLink,v.Checkbox,v.RadioButton,v.Radio,e.a={Button:h.a.Button,ButtonCheck:h.a.ButtonCheck,ButtonMenu:h.a.ButtonMenu,ButtonLink:h.a.ButtonLink,Input:S,Message:k,UnescapedMessage:x,Upload:T,Modal:b.a,RadioButton:v.RadioButton,Checkbox:v.Checkbox,Radio:v.Radio,Switch:w,Select:l.a,TextSelect:C,Hidden:M,Slider:u,Drilldown:y}},,function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Request failed.";return t&&t.response&&t.response.data&&t.response.data.err_msg?e=t.response.data.err_msg:t&&t.response?e="".concat(t.response.statusText," (").concat(t.response.status,")"):"string"==typeof t&&(e=t),e}function a(t){throw console.debug(t),i(t)}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}))},,,function(t,e,n){"use strict";var i={UPLOAD:"upload",QUEUED:"queued",RUNNING:"running",SETTING_METADATA:"setting_metadata",NEW:"new",EMPTY:"empty",OK:"ok",PAUSED:"paused",FAILED_METADATA:"failed_metadata",NOT_VIEWABLE:"noPermission",DISCARDED:"discarded",ERROR:"error"};i.READY_STATES=[i.OK,i.EMPTY,i.PAUSED,i.FAILED_METADATA,i.NOT_VIEWABLE,i.DISCARDED,i.ERROR],i.NOT_READY_STATES=[i.UPLOAD,i.QUEUED,i.RUNNING,i.SETTING_METADATA,i.NEW],e.a=i},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return d}));var i,a=n(0),r=n.n(a),o=function(t){this.$overlay=t.overlay,this.$dialog=t.dialog,this.$header=this.$dialog.find(".modal-header"),this.$body=this.$dialog.find(".modal-body"),this.$footer=this.$dialog.find(".modal-footer"),this.$backdrop=t.backdrop,this.$header.find(".close").on("click",r.a.proxy(this.hide,this))};function s(){i.hide()}function l(t,e,n,a,r){i.setContent({title:t,body:e,buttons:n,extra_buttons:a}),i.show({backdrop:!0},r)}function c(t,e,n,a,r){i.setContent({title:t,body:e,buttons:n,extra_buttons:a}),i.show({backdrop:!1},r)}function d(t){var e=t.width||"600",n=t.height||"400",a=t.scroll||"auto";r()("#overlay-background").bind("click.overlay",(function(){s(),r()("#overlay-background").unbind("click.overlay")})),i.setContent({closeButton:!0,title:"&nbsp;",body:r()("<div style='margin: -5px;'><iframe style='margin: 0; padding: 0;' src='".concat(t.url,"' width='").concat(e,"' height='").concat(n,"' scrolling='").concat(a,"' frameborder='0'></iframe></div>"))}),i.show({backdrop:!0})}r.a.extend(o.prototype,{setContent:function(t){this.$header.hide(),t.title&&(this.$header.find(".title").html(t.title),this.$header.show()),t.closeButton?(this.$header.find(".close").show(),this.$header.show()):this.$header.find(".close").hide(),this.$footer.hide();var e=this.$footer.find(".buttons").html("");t.buttons&&(r.a.each(t.buttons,(function(t,n){e.append(r()("<button></button> ").text(t).click(n)).append(" ")})),this.$footer.show());var n=this.$footer.find(".extra_buttons").html("");t.extra_buttons&&(r.a.each(t.extra_buttons,(function(t,e){n.append(r()("<button></button>").text(t).click(e)).append(" ")})),this.$footer.show());var i=t.body;"progress"==i&&(i=r()("<div class='progress progress-striped active'><div class='progress-bar' style='width: 100%'></div></div>")),this.$body.html(i)},show:function(t,e){t.backdrop?this.$backdrop.addClass("in"):this.$backdrop.removeClass("in"),this.$overlay.show(),this.$dialog.show(),this.$overlay.addClass("in"),this.$body.css("min-width",this.$body.width()),this.$body.css("max-height",r()(window).height()/1.5),e&&e()},hide:function(){var t=this;t.$dialog.fadeOut((function(){t.$overlay.hide(),t.$backdrop.removeClass("in"),t.$body.children().remove(),t.$body.css("min-width",void 0)}))}}),r()((function(){i=new o({overlay:r()("#top-modal"),dialog:r()("#top-modal-dialog"),backdrop:r()("#top-modal-backdrop")})}))},,function(t,e,n){"use strict";var i={props:{classes:{type:String,required:!1,default:null},message:{type:String,default:"Loading"}},computed:{spinnerClasses:function(){return["loading-icon","fa","fa-spinner","fa-spin"].concat(this.classes?this.classes.split(" "):[])}}},a=n(5),r=Object(a.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("span",{class:this.spinnerClasses}),this._v(" "),e("span",{staticClass:"loading-message"},[this._v(this._s(this.message)+"."),e("span",{staticClass:"blinking"},[this._v("..")])])])}),[],!1,null,null,null);e.a=r.exports},,,function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(2),d=n.n(c),u=n(56),h=n(51),f=n(80),p=n(85),m=n(164),_=n(6),g={toJSON:function(){var t=this,e={};return i.default.each(t.constructor.to_json_keys,(function(n){var i=t.get(n);n in t.constructor.to_json_mappers&&(i=t.constructor.to_json_mappers[n](i,t)),e[n]=i})),e}},v=function(t){this.default_font=void 0!==t?t:"9px Monaco, Lucida Console, monospace",this.dummy_canvas=this.new_canvas(),this.dummy_context=this.dummy_canvas.getContext("2d"),this.dummy_context.font=this.default_font,this.char_width_px=this.dummy_context.measureText("A").width,this.patterns={},this.load_pattern("right_strand","/visualization/strand_right.png"),this.load_pattern("left_strand","/visualization/strand_left.png"),this.load_pattern("right_strand_inv","/visualization/strand_right_inv.png"),this.load_pattern("left_strand_inv","/visualization/strand_left_inv.png")};i.default.extend(v.prototype,{load_pattern:function(t,e){var n=this.patterns,i=this.dummy_context,a=new Image;a.src="".concat(Object(l.getAppRoot)(),"static/images").concat(e),a.onload=function(){n[t]=i.createPattern(a,"repeat")}},get_pattern:function(t){return this.patterns[t]},new_canvas:function(){var t=r()("<canvas/>")[0];return t.manager=this,t}});var y=s.a.Model.extend({defaults:{num_elements:20,obj_cache:null,key_ary:null},initialize:function(t){this.clear()},get_elt:function(t){var e=this.attributes.obj_cache,n=this.attributes.key_ary,a=t.toString(),r=i.default.indexOf(n,(function(t){return t.toString()===a}));return-1!==r&&(e[a].stale?(n.splice(r,1),delete e[a]):this.move_key_to_end(t,r)),e[a]},set_elt:function(t,e){var n=this.attributes.obj_cache,i=this.attributes.key_ary,a=t.toString(),r=this.attributes.num_elements;if(!n[a]){if(i.length>=r)delete n[i.shift().toString()];i.push(t)}return n[a]=e,e},move_key_to_end:function(t,e){this.attributes.key_ary.splice(e,1),this.attributes.key_ary.push(t)},clear:function(){this.attributes.obj_cache={},this.attributes.key_ary=[]},size:function(){return this.attributes.key_ary.length},most_recently_added:function(){return 0===this.size()?null:this.attributes.key_ary[this.attributes.key_ary.length-1]}}),b=y.extend({defaults:i.default.extend({},y.prototype.defaults,{dataset:null,genome:null,init_data:null,min_region_size:200,filters_manager:null,data_type:"data",data_mode_compatible:function(t,e){return!0},can_subset:function(t){return!1}}),initialize:function(t){y.prototype.initialize.call(this);var e=this.get("init_data");e&&this.add_data(e)},add_data:function(t){this.get("num_elements")<t.length&&this.set("num_elements",t.length);var e=this;i.default.each(t,(function(t){e.set_data(t.region,t)}))},data_is_ready:function(){var t=this.get("dataset"),e=r.a.Deferred(),n="raw_data"===this.get("data_type")?"state":"data"===this.get("data_type")?"converted_datasets_state":"error",i=new h.a.ServerStateDeferred({ajax_settings:{url:this.get("dataset").url(),data:{hda_ldda:t.get("hda_ldda"),data_type:n},dataType:"json"},interval:5e3,success_fn:function(t){return"pending"!==t}});return r.a.when(i.go()).then((function(t){e.resolve("ok"===t||"data"===t)})),e},search_features:function(t){var e=this.get("dataset"),n={query:t,hda_ldda:e.get("hda_ldda"),data_type:"features"};return r.a.getJSON(e.url(),n)},load_data:function(t,e,n,i){var a=this.get("dataset"),o={data_type:this.get("data_type"),chrom:t.get("chrom"),low:t.get("start"),high:t.get("end"),mode:e,resolution:n,hda_ldda:a.get("hda_ldda")};r.a.extend(o,i);var s=this.get("filters_manager");if(s){for(var l=[],c=s.filters,d=0;d<c.length;d++)l.push(c[d].name);o.filter_cols=JSON.stringify(l)}var u=this,h=r.a.getJSON(a.url(),o,(function(e){e.region=t,u.set_data(t,e)}));return this.set_data(t,h),h},get_data:function(t,e,n,i){var a=this.get_elt(t);if(a&&(h.a.is_deferred(a)||this.get("data_mode_compatible")(a,e)))return a;for(var r,o,s=this.get("key_ary"),l=this.get("obj_cache"),c=0;c<s.length;c++)if((r=s[c]).contains(t)&&(o=!0,a=l[r.toString()],h.a.is_deferred(a)||this.get("data_mode_compatible")(a,e)&&this.get("can_subset")(a))){if(this.move_key_to_end(r,c),!h.a.is_deferred(a)){var d=this.subset_entry(a,t);this.set_data(t,d),a=d}return a}if(!o&&t.length()<this.attributes.min_region_size){t=t.copy();var u=this.most_recently_added();!u||t.get("start")>u.get("start")?t.set("end",t.get("start")+this.attributes.min_region_size):t.set("start",t.get("end")-this.attributes.min_region_size),t.set("genome",this.attributes.genome),t.trim()}return this.load_data(t,e,n,i)},set_data:function(t,e){this.set_elt(t,e)},DEEP_DATA_REQ:"deep",BROAD_DATA_REQ:"breadth",get_more_data:function(t,e,n,i,a){var o=this._mark_stale(t);if(o&&this.get("data_mode_compatible")(o,e)){var s=t.get("start");a===this.DEEP_DATA_REQ?r.a.extend(i,{start_val:o.data.length+1}):a===this.BROAD_DATA_REQ&&(s=(o.max_high?o.max_high:o.data[o.data.length-1][2])+1);var l=t.copy().set("start",s),c=this,d=this.load_data(l,e,n,i),u=r.a.Deferred();return this.set_data(t,u),r.a.when(d).then((function(e){e.data&&(e.data=o.data.concat(e.data),e.max_low&&(e.max_low=o.max_low),e.message&&(e.message=e.message.replace(/[0-9]+/,e.data.length))),c.set_data(t,e),u.resolve(e)})),u}console.log("ERROR: problem with getting more data: current data is not compatible")},can_get_more_detailed_data:function(t){var e=this.get_elt(t);return"bigwig"===e.dataset_type&&e.data.length<8e3},get_more_detailed_data:function(t,e,n,i,a){var r=this._mark_stale(t);if(r)return a||(a={}),"bigwig"===r.dataset_type&&(a.num_samples=1e3*i),this.load_data(t,e,n,a);console.log("ERROR getting more detailed data: no current data")},_mark_stale:function(t){var e=this.get_elt(t);return e||console.log("ERROR: no data to mark as stale: ",this.get("dataset"),t.toString()),e.stale=!0,e},get_genome_wide_data:function(t){var e=this,n=!0,a=i.default.map(t.get("chroms_info").chrom_info,(function(t){var i=e.get_elt(new x({chrom:t.chrom,start:0,end:t.len}));return i||(n=!1),i}));if(n)return a;var o=r.a.Deferred();return r.a.getJSON(this.get("dataset").url(),{data_type:"genome_data"},(function(t){e.add_data(t.data),o.resolve(t.data)})),o},subset_entry:function(t,e){var n={bigwig:function(t,e){return i.default.filter(t,(function(t){return t[0]>=e.get("start")&&t[0]<=e.get("end")}))},refseq:function(e,n){var i=n.get("start")-t.region.get("start");return t.data.slice(i,i+n.length())}},a=t.data;return!t.region.same(e)&&t.dataset_type in n&&(a=n[t.dataset_type](t.data,e)),{region:e,data:a,dataset_type:t.dataset_type}}}),w=b.extend({initialize:function(t){var e=new s.a.Model;e.urlRoot=t.data_url,this.set("dataset",e)},load_data:function(t,e,n,i){return t.length()<=1e5?b.prototype.load_data.call(this,t,e,n,i):{data:null,region:t}}}),k=s.a.Model.extend({defaults:{name:null,key:null,chroms_info:null},initialize:function(t){this.id=t.dbkey},get_chroms_info:function(){return this.attributes.chroms_info.chrom_info},get_chrom_region:function(t){var e=i.default.find(this.get_chroms_info(),(function(e){return e.chrom===t}));return new x({chrom:e.chrom,end:e.len})},get_chrom_len:function(t){return i.default.find(this.get_chroms_info(),(function(e){return e.chrom===t})).len}}),x=s.a.Model.extend({defaults:{chrom:null,start:0,end:0,str_val:null,genome:null},same:function(t){return this.attributes.chrom===t.get("chrom")&&this.attributes.start===t.get("start")&&this.attributes.end===t.get("end")},initialize:function(t){if(t.from_str){var e=t.from_str.split(":"),n=e[0],i=e[1].split("-");this.set({chrom:n,start:parseInt(i[0],10),end:parseInt(i[1],10)})}this.attributes.str_val="".concat(this.get("chrom"),":").concat(this.get("start"),"-").concat(this.get("end")),this.on("change",(function(){this.attributes.str_val="".concat(this.get("chrom"),":").concat(this.get("start"),"-").concat(this.get("end"))}),this)},copy:function(){return new x({chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")})},length:function(){return this.get("end")-this.get("start")},toString:function(){return this.attributes.str_val},toJSON:function(){return{chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")}},compute_overlap:function(t){var e=this.get("chrom"),n=t.get("chrom"),i=this.get("start"),a=t.get("start"),r=this.get("end"),o=t.get("end");return e&&n&&e!==n?x.overlap_results.DIF_CHROMS:i<a?r<a?x.overlap_results.BEFORE:r<o?x.overlap_results.OVERLAP_START:x.overlap_results.CONTAINS:i>a?i>o?x.overlap_results.AFTER:r<=o?x.overlap_results.CONTAINED_BY:x.overlap_results.OVERLAP_END:r>=o?x.overlap_results.CONTAINS:x.overlap_results.CONTAINED_BY},trim:function(t){if(this.attributes.start<0&&(this.attributes.start=0),this.attributes.genome){var e=this.attributes.genome.get_chrom_len(this.attributes.chrom);this.attributes.end>e&&(this.attributes.end=e-1)}return this},contains:function(t){return this.compute_overlap(t)===x.overlap_results.CONTAINS},overlaps:function(t){return 0===i.default.intersection([this.compute_overlap(t)],[x.overlap_results.DIF_CHROMS,x.overlap_results.BEFORE,x.overlap_results.AFTER]).length}},{overlap_results:{DIF_CHROMS:1e3,BEFORE:1001,CONTAINS:1002,OVERLAP_START:1003,OVERLAP_END:1004,CONTAINED_BY:1005,AFTER:1006}}),S=s.a.Collection.extend({model:x}),M=s.a.Model.extend({defaults:{region:null,note:""},initialize:function(t){this.set("region",new x(t.region))}}),C=s.a.Collection.extend({model:M}),T=s.a.Model.extend(g).extend({defaults:{mode:"Auto"},initialize:function(t){this.set("dataset",new u.a(t.dataset));var e=[{key:"name",default_value:this.get("dataset").get("name")},{key:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:0},{key:"max_value",label:"Max Value",type:"float",default_value:1}];this.set("config",f.a.ConfigSettingCollection.from_models_and_saved_values(e,t.prefs));var n=this.get("preloaded_data");n=n?n.data:[],this.set("data_manager",new b({dataset:this.get("dataset"),init_data:n}))}},{to_json_keys:["track_type","dataset","prefs","mode","filters","tool_state"],to_json_mappers:{prefs:function(t,e){return 0===i.default.size(t)&&(t={name:e.get("config").get("name").get("value"),color:e.get("config").get("color").get("value")}),t},dataset:function(t){return{id:t.id,hda_ldda:t.get("hda_ldda")}}}}),j=s.a.Collection.extend({model:T}),O=s.a.Model.extend({defaults:{title:"",type:""},urlRoot:"".concat(Object(l.getAppRoot)(),"api/visualizations"),save:function(){return r.a.ajax({url:this.url(),type:"POST",dataType:"json",data:{vis_json:JSON.stringify(this)}})}}),L=O.extend(g).extend({defaults:i.default.extend({},O.prototype.defaults,{dbkey:"",drawables:null,bookmarks:null,viewport:null}),initialize:function(t){this.set("drawables",new j(t.tracks));this.set("config",f.a.ConfigSettingCollection.from_models_and_saved_values([],t.prefs)),this.unset("tracks"),this.get("drawables").each((function(t){t.unset("preloaded_data")}))},add_tracks:function(t){this.get("drawables").add(t)}},{to_json_keys:["view","viewport","bookmarks"],to_json_mappers:{view:function(t,e){return{obj_type:"View",prefs:{name:e.get("title"),content_visible:!0},drawables:e.get("drawables")}}}}),D=s.a.Router.extend({initialize:function(t){var e=this;this.view=t.view,this.route(/([\w]+)$/,"change_location"),this.route(/([\w+]+:[\d,]+-[\d,]+)$/,"change_location"),this.view.on("navigate",(function(t){e.navigate(t)}))},change_location:function(t){this.view.go_to(t)}});e.a={BackboneTrack:T,BrowserBookmark:M,BrowserBookmarkCollection:C,Cache:y,CanvasManager:v,Genome:k,GenomeDataManager:b,GenomeRegion:x,GenomeRegionCollection:S,GenomeVisualization:L,GenomeReferenceDataManager:w,TrackBrowserRouter:D,Visualization:O,select_datasets:function(t,e){var n=new p.a({url_base:"".concat(Object(l.getAppRoot)(),"visualization/list_history_datasets"),filters:t,embedded:!0}),i=new p.a({url_base:"".concat(Object(l.getAppRoot)(),"visualization/list_library_datasets"),embedded:!0}),a=new m.a.View;a.add({id:"histories",title:d()("Histories"),$el:r()("<div/>").append(n.$el)}),a.add({id:"libraries",title:d()("Libraries"),$el:r()("<div/>").append(i.$el)});var o=Object(_.a)();o.modal.show({title:d()("Select datasets for new tracks"),body:a.$el,closing_events:!0,buttons:{Cancel:function(){o.modal.hide()},Add:function(){var t=[];a.$("input.grid-row-select-checkbox[name=id]:checked").each((function(){window.console.log(r()(this).val()),t[t.length]=r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/datasets/").concat(r()(this).val()),dataType:"json",data:{data_type:"track_config",hda_ldda:"histories"==a.current()?"hda":"ldda"}})})),r.a.when.apply(r.a,t).then((function(){var t=arguments[0]instanceof Array?r.a.map(arguments,(function(t){return t[0]})):[arguments[0]];e(t)})),o.modal.hide()}}})}}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n(8),a=n(34),r=n(15),o=n(101),s=n(215),l=n(210),c=n(2146),d=n(2140),u=function(t){return function(e){t&&console.log("[".concat(t,"] next"),e)}},h=function(t){return function(e){t&&console.warn("[".concat(t,"] error"),e)}},f=function(t){return function(){t&&console.log("[".concat(t,"] complete"))}},p={methods:{watch$:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={immediate:e};return this.$watchAsObservable(t,n).pipe(Object(d.a)("newValue"))},listenTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e instanceof Function?{next:e}:e,i=n.label,a=void 0===i?null:i,r=n.next,o=void 0===r?u(a):r,s=n.error,l=void 0===s?h(a):s,d=n.complete,p=void 0===d?f(a):d;Object(c.a)(t)?this.$subscribeTo(t,o,l,p):console.warn("Object provided to listenTo was not an observable")}}},m={install:function(t){t.use(l.a),t.mixin(p)}},_=n(2),g=n.n(_),v=/\r?\n|\r/g,y=/\s\s+/g,b={bind:function(t,e,n){t.childNodes.forEach((function(t){var e=t.textContent.replace(v," ").replace(y," ");t.textContent=g()(e)}))}},w={methods:{l:g.a,localize:g.a}},k={install:function(t){t.filter("localize",g.a),t.filter("l",g.a),t.directive("localize",b),t.mixin(w)}};i.default.use(a.a),i.default.use(r.a),i.default.use(s.b),i.default.use(k),i.default.use(m);var x=function(t){var e=i.default.extend(t);return function(t,n){return new e({store:o.a,propsData:t,el:n})}}},,,,,,function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return l}));var i=n(3);function a(t){window.location=t}function r(){window.location.reload()}var o=/(\/)+/g;function s(t){var e=Object(i.getAppRoot)();return"".concat(e,"/").concat(t).replace(o,"/")}function l(t){var e=s(t),n=window.location.origin;return"".concat(n,"/").concat(e).replace(o,"/")}},function(t,e,n){"use strict";n.d(e,"k",(function(){return v})),n.d(e,"j",(function(){return b})),n.d(e,"d",(function(){return k})),n.d(e,"b",(function(){return S})),n.d(e,"g",(function(){return C})),n.d(e,"p",(function(){return j})),n.d(e,"m",(function(){return L})),n.d(e,"i",(function(){return A})),n.d(e,"n",(function(){return I})),n.d(e,"h",(function(){return Y})),n.d(e,"e",(function(){return H})),n.d(e,"o",(function(){return $})),n.d(e,"a",(function(){return W})),n.d(e,"c",(function(){return U})),n.d(e,"f",(function(){return B})),n.d(e,"l",(function(){return tt}));var i=n(7),a=n.n(i),r=n(9),o=n.n(r),s=n(42);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function d(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){d(r,i,a,o,s,"next",t)}function s(t){d(r,i,a,o,s,"throw",t)}o(void 0)}))}}var h=a.a.create({baseURL:Object(s.b)("/api")}),f=function(t){if(200!=t.status)throw new Error(t);return t.data};function p(){var t=m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return Object.keys(t).map((function(e){return"q=".concat(e,"&qv=").concat(t[e])})).join("&")}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){var i;return e[n]=!0===(i=t[n])?"True":!1===i?"False":i,e}),{})}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){return e.set(n,t[n]),e}),new FormData)}var g={view:"betawebclient"};function v(){return y.apply(this,arguments)}function y(){return(y=u(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get("/histories?view=summary");case 2:return e=t.sent,t.abrupt("return",f(e));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(t,e){return w.apply(this,arguments)}function w(){return(w=u(regeneratorRuntime.mark((function t(e,n){var i,a,r,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="/histories/".concat(e),a=void 0!==n?o.a.utc(n).toISOString():null,r=a?i:"".concat(i,"?q=update_time-gt&qv=").concat(a),t.next=5,h.get(r,{params:g});case 5:return s=t.sent,t.abrupt("return",f(s));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return x.apply(this,arguments)}function x(){return(x=u(regeneratorRuntime.mark((function t(){var e,n,i,a,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},n="/histories",i=Object.assign({name:"New History"},e),t.next=5,h.post(n,i,{params:g});case 5:return a=t.sent,t.abrupt("return",f(a));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e,n){return M.apply(this,arguments)}function M(){return(M=u(regeneratorRuntime.mark((function t(e,n,i){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/histories",a={history_id:e.id,name:n,all_datasets:i,current:!0},t.next=4,h.post("/histories",a,{params:g});case 4:return r=t.sent,t.abrupt("return",f(r));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){return T.apply(this,arguments)}function T(){return(T=u(regeneratorRuntime.mark((function t(e){var n,i,a,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],i="/histories/".concat(e)+(n?"?purge=True":""),t.next=4,h.delete(i,{params:g});case 4:return a=t.sent,t.abrupt("return",f(a));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t,e){return O.apply(this,arguments)}function O(){return(O=u(regeneratorRuntime.mark((function t(e,n){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="/histories/".concat(e),t.next=3,h.put(i,n,{params:g});case 3:return a=t.sent,t.abrupt("return",f(a));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t){return D.apply(this,arguments)}function D(){return(D=u(regeneratorRuntime.mark((function t(e){var n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,i=Object(s.b)("/history/make_private"),t.next=4,a.a.post(i,_({history_id:n}));case 4:if(200==(r=t.sent).status){t.next=7;break}throw new Error(r);case 7:return t.next=9,b(n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return E.apply(this,arguments)}function E(){return(E=u(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/history/current_history_json",t.next=3,h.get("/history/current_history_json",{baseURL:Object(s.b)("/")});case 3:return e=t.sent,t.abrupt("return",f(e));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){return P.apply(this,arguments)}function P(){return(P=u(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/history/set_as_current",t.next=3,h.get("/history/set_as_current",{baseURL:Object(s.b)("/"),params:{id:e}});case 3:return n=t.sent,t.abrupt("return",f(n));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t){return R.apply(this,arguments)}function R(){return(R=u(regeneratorRuntime.mark((function t(e){var n,i,a,r,o,s,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},i=e.id,a=p(n),r={v:"dev",view:"summary",keys:"file_size,accessible,creating_job,job_source_id"},o="/histories/".concat(i,"/contents?").concat(a),t.next=7,h.get(o,{params:r});case 7:return s=t.sent,t.abrupt("return",f(s));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t){return N.apply(this,arguments)}function N(){return(N=u(regeneratorRuntime.mark((function t(e){var n,i,a,r,o,s,l,c,d=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},i={purge:!1,recursive:!1},a=Object.assign({},i,n),r=e.history_id,o=e.history_content_type,s=e.id,l="/histories/".concat(r,"/contents/").concat(o,"s/").concat(s),t.next=7,h.delete(l,{params:a});case 7:return c=t.sent,t.abrupt("return",f(c));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(t){return F.apply(this,arguments)}function F(){return(F=u(regeneratorRuntime.mark((function t(e){var n,i,a,r,o,s,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},i=e.history_id,a=e.id,r=e.history_content_type,o="/histories/".concat(i,"/contents/").concat(r,"s/").concat(a),t.next=5,h.put(o,n);case 5:return s=t.sent,t.abrupt("return",f(s));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(t){return z.apply(this,arguments)}function z(){return(z=u(regeneratorRuntime.mark((function t(e){var n,i,a,r,o,s,c,d=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:[],i=d.length>2&&void 0!==d[2]?d[2]:{},a=n.map((function(t){var e=l(t.split("-"),2),n=e[0];return{id:e[1],type_id:t,history_content_type:n}})),r=e.id,o="/histories/".concat(r,"/contents?view=betawebclient"),s=Object.assign({},i,{items:a}),t.next=8,h.put(o,s);case 8:return c=t.sent,console.log("bulkContentUpdate response",c),t.abrupt("return",f(c));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(t){return V.apply(this,arguments)}function V(){return(V=u(regeneratorRuntime.mark((function t(e){var n,i,a,r,o,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},i={collection_type:"list",copy_elements:!0,name:"list",element_identifiers:[],hide_source_items:"True",type:"dataset_collection"},a=Object.assign({},i,n),r="/histories/".concat(e.id,"/contents?view=betawebclient"),t.next=6,h.post(r,a);case 6:return o=t.sent,t.abrupt("return",f(o));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t){return q.apply(this,arguments)}function q(){return(q=u(regeneratorRuntime.mark((function t(e){var n,i,a,r,o,s,l,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],i=c.length>2&&void 0!==c[2]&&c[2],a=e.history_id,r=e.id,o="/histories/".concat(a,"/contents/dataset_collections/").concat(r),s=m({recursive:n,purge:i}),t.next=7,h.delete(o,{params:s});case 7:return l=t.sent,t.abrupt("return",f(l));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var G=new Map,J=new Map;function K(t){return X.apply(this,arguments)}function X(){return(X=u(regeneratorRuntime.mark((function t(e){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G.has(e)){t.next=7;break}return n="/jobs/".concat(e,"?full=false"),t.next=4,h.get(n);case 4:i=t.sent,a=i.data,G.set(e,a);case 7:return t.abrupt("return",G.get(e));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(t){return Z.apply(this,arguments)}function Z(){return(Z=u(regeneratorRuntime.mark((function t(e){var n,i,a,r,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.tool_id,i=e.history_id,a="".concat(n,"-").concat(i),J.has(a)){t.next=9;break}return r="/tools/".concat(n,"/build?history_id=").concat(i),t.next=6,h.get(r);case 6:o=t.sent,s=o.data,J.set(a,s);case 9:return t.abrupt("return",J.get(a));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t){return et.apply(this,arguments)}function et(){return(et=u(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:return n=t.sent,t.next=5,Q(n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i.a})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return f.a})),n.d(e,"f",(function(){return p.a})),n.d(e,"e",(function(){return T.a})),n.d(e,"h",(function(){return j.a})),n.d(e,"b",(function(){return X})),n.d(e,"g",(function(){return Q.a})),n.d(e,"k",(function(){return at})),n.d(e,"p",(function(){return rt})),n.d(e,"j",(function(){return ot})),n.d(e,"n",(function(){return st})),n.d(e,"m",(function(){return lt})),n.d(e,"o",(function(){return ct})),n.d(e,"i",(function(){return ut})),n.d(e,"l",(function(){return ft}));var i=n(263);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(o,t);var e,n,i,a=c(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return e=o,(n=[{key:"getUrl",value:function(t){var e=this.id,n=this.file_ext,i={purge:"datasets/".concat(e,"/purge_async"),display:"datasets/".concat(e,"/display/?preview=True"),edit:"datasets/edit?dataset_id=".concat(e),download:"datasets/".concat(e,"/display?to_ext=").concat(n),report_error:"dataset/errors?id=".concat(e),rerun:"tool_runner/rerun?id=".concat(e),show_params:"datasets/".concat(e,"/show_params"),visualization:"visualization",meta_download:"dataset/get_metadata_file?hda_id=".concat(e,"&metadata_name=")};return t in i?i[t]:null}},{key:"canEditName",get:function(){return!this.element_identifier}},{key:"hasData",get:function(){return this.file_size&&this.file_size>0}},{key:"hasMetaData",get:function(){var t=this.meta_files||[];return t&&t.length>0}},{key:"displayLinks",get:function(){var t=this.display_apps,e=void 0===t?[]:t,n=this.display_types,i=void 0===n?[]:n;return[].concat(r(e),r(i))}}])&&s(e.prototype,n),i&&s(e,i),o}(i.a),f=n(216),p=n(454),m=n(9),_=n.n(m);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function b(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){var e="function"==typeof Map?new Map:void 0;return(w=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return k(t,arguments,M(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),S(i,t)})(t)}function k(t,e,n){return(k=x()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&S(a,n.prototype),a}).apply(null,arguments)}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=_.a.utc(0);Map;var T=n(152),j=n(206),O=n(495),L=n(253);function D(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=P(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function A(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t,e,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||P(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}function $(t){var e=U();return function(){var n,i=B(t);if(e){var a=B(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return F(this,n)}}function F(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){var e="function"==typeof Map?new Map:void 0;return(W=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return z(t,arguments,B(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),V(i,t)})(t)}function z(t,e,n){return(z=U()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&V(a,n.prototype),a}).apply(null,arguments)}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var q=function(t){N(n,t);var e=$(n);function n(){return H(this,n),e.apply(this,arguments)}return n}(W(Error)),G=function(t){N(n,t);var e=$(n);function n(){return H(this,n),e.apply(this,arguments)}return n}(W(Error)),J=function(t,e){return I(t,1)[0]-I(e,1)[0]},K=Object(L.a)((function(t){return void 0!==t})),X=function(t){N(r,t);var e,n,i,a=$(r);function r(t){var e;return H(this,r),(e=a.call(this,t))._domain=[-1/0,1/0],e.xPrecision=0,e.yPrecision=0,e}return e=r,(n=[{key:"set",value:function(t,e){var n=this.round(t,this.xPrecision),i=this.round(e,this.yPrecision);isFinite(n)&&isFinite(i)&&null!=e&&this.valInDomain(n)&&E(B(r.prototype),"set",this).call(this,n,i)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isNaN(t)){var n="Please provide a numeric input";throw new q(n)}var i=e.interpolate,a=void 0!==i&&i,o=e.order,s=void 0===o?2:o,l=e.precision,c=void 0===l?this.yPrecision:l,d=this.round(t,this.xPrecision),u=this.valInDomain(d),h=void 0;if(u)if(this.has(d))h=E(B(r.prototype),"get",this).call(this,d);else{var f=a?this.linearInterpolate:this.curveFit;h=f.call(this,d,{order:s,precision:c})}return h}},{key:"round",value:function(t,e){var n=Math.pow(10,e);return Math.round(+t*n)/n}},{key:"pruneDomain",value:function(t){var e,n=this,i=D(Object(L.a)((function(e){return!n.valInDomain(e,t)}),this.keys()));try{for(i.s();!(e=i.n()).done;){var a=e.value;this.delete(a)}}catch(t){i.e(t)}finally{i.f()}}},{key:"valInDomain",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,n=I(e,2),i=n[0],a=n[1];return t>=i&&t<=a}},{key:"pointInDomain",value:function(t){var e=I(t,1),n=e[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;return this.valInDomain(n,i)}},{key:"curveFit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.size<2){var n="Need at least 2 points to perform an approximation";throw new G(n)}var i=2==this.size?O.linear:O.polynomial,a=i(this.dataPoints,e),r=a.predict,o=r(t),s=I(o,2),l=s[1];return l}},{key:"linearInterpolate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPointWiseFilter(t),i=Array.from(n(this.dataPoints)),a=I(i,1),r=a[0];if(r&&r.length){var o=Object(O.linear)(r,e),s=o.predict,l=s(t),c=I(l,2),d=c[1];return d}}},{key:"getPointWiseFilter",value:function(t){return Object(L.d)(Object(L.b)(2),Object(L.c)((function(t){return Array.from(K(t))})),Object(L.a)((function(e){if(2==e.length){var n=I(e,2),i=I(n[0],1)[0],a=I(n[1],1)[0];return t>i&&t<a}return!1})))}},{key:"clone",value:function(){var t=new r;t.xPrecision=this.xPrecision,t.yPrecision=this.yPrecision,t.domain=this.domain;var e,n=D(this.entries());try{for(n.s();!(e=n.n()).done;){var i=I(e.value,2),a=i[0],o=i[1];t.set(a,o)}}catch(t){n.e(t)}finally{n.f()}return t}},{key:"hasData",get:function(){return this.size>=2}},{key:"dataPoints",get:function(){return Array.from(this.entries()).sort(J)}},{key:"domain",get:function(){return this._domain},set:function(t){this.pruneDomain(t),this._domain=t}}])&&A(e.prototype,n),i&&A(e,i),r}(W(Map)),Q=n(105),Z=n(53),tt=n(43);function et(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function nt(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){et(r,i,a,o,s,"next",t)}function s(t){et(r,i,a,o,s,"throw",t)}o(void 0)}))}}var it=function(t){return function(){var e=nt(regeneratorRuntime.mark((function e(n,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(tt.a)(n,i,t);case 2:return a=e.sent,e.next=5,Object(Z.a)(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},at=it({visible:!1}),rt=it({visible:!0}),ot=it({deleted:!0}),st=it({deleted:!1}),lt=it({deleted:!0,purged:!0});function ct(t){return dt.apply(this,arguments)}function dt(){return(dt=nt(regeneratorRuntime.mark((function t(e){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={visible:!1},t.next=3,Object(tt.h)(e,n);case 3:if(!(i=t.sent).length){t.next=9;break}return a=i.map((function(t){return t.type_id})),t.next=8,rt(e,a);case 8:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ut(t){return ht.apply(this,arguments)}function ht(){return(ht=nt(regeneratorRuntime.mark((function t(e){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={visible:!1},t.next=3,Object(tt.h)(e,n);case 3:if(!(i=t.sent).length){t.next=9;break}return a=i.map((function(t){return t.type_id})),t.next=8,ot(e,a);case 8:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ft(t){return pt.apply(this,arguments)}function pt(){return(pt=nt(regeneratorRuntime.mark((function t(e){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={deleted:!0,purged:!1},t.next=3,Object(tt.h)(e,n);case 3:if(!(i=t.sent).length){t.next=9;break}return a=i.map((function(t){return t.type_id})),t.next=8,lt(e,a);case 8:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},,,,function(t,e,n){"use strict";var i=n(4),a=n.n(i),r=n(1),o=n(10),s=a.a.View.extend({optionsDefault:{css:"",placeholder:"No data available",data:[],value:null,multiple:!1,minimumInputLength:0,maximumTextLength:100,initialData:""},initialize:function(t){if(this.options=o.b.merge(t,this.optionsDefault),this.setElement(this._template(this.options)),this.options.container){if(this.options.container.append(this.$el),this.select_data=this.options.data,this._refresh(),!this.options.multiple){this.options.value&&this._setValue(this.options.value);var e=this;this.options.onchange&&this.$el.on("change",(function(){e.options.onchange(e.value())}))}}else console.log("ui-select::initialize() : container not specified.")},value:function(t){var e=this._getValue();void 0!==t&&this._setValue(t);var n=this._getValue();return n!=e&&this.options.onchange&&this.options.onchange(n),n},text:function(){return this.$el.select2("data").text},disabled:function(){return!this.$el.select2("enable")},enable:function(){this.$el.select2("enable",!0)},disable:function(){this.$el.select2("enable",!1)},add:function(t){this.select_data.push({id:t.id,text:t.text}),this._refresh()},del:function(t){var e=this._getIndex(t);-1!=e&&(this.select_data.splice(e,1),this._refresh())},remove:function(){this.$el.select2("destroy")},update:function(t){for(var e in this.select_data=[],t.data)this.select_data.push(t.data[e]);this._refresh()},_refresh:function(){var t,e=this;if(this.options.multiple)t={multiple:this.options.multiple,containerCssClass:this.options.css,placeholder:this.options.placeholder,minimumInputLength:this.options.minimumInputLength,ajax:this.options.ajax,dropdownCssClass:this.options.dropdownCssClass,escapeMarkup:this.options.escapeMarkup,formatResult:this.options.formatResult,formatSelection:this.options.formatSelection,initSelection:this.options.initSelection,initialData:this.options.initialData},this.$el.select2(t);else{this.select_data&&this.select_data.map((function(t){var n=e.options.maximumTextLength+3;if(t.text&&t.text.length>n){var i=t.text.indexOf("(".concat(t.id,")"));i=-1!=i&&i<n?i:n;var a=t.text.substring(0,i).replace(/[ .]*$/,"");t.text="".concat(a,"...(").concat(t.id,")")}}));var n=this._getValue();t={data:this.select_data,containerCssClass:this.options.css,placeholder:this.options.placeholder,dropdownAutoWidth:!0},this.$el.select2(t),this._setValue(n)}},_getIndex:function(t){r.default.findIndex(this.select_data,{id:t})},_getValue:function(){return this.$el.select2("val")},_setValue:function(t){-1==this._getIndex(t)&&this.select_data.length>0&&(t=this.select_data[0].id),this.$el.select2("val",t)},_template:function(t){return'<input type="hidden" value="'.concat(this.options.initialData,'"/>')}});e.a={View:s}},,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(4);var o=n.n(r).a.Model.extend({defaults:{ajax_settings:{},interval:1e3,success_fn:function(t){return!0}},go:function(){var t=a.a.Deferred(),e=this.get("ajax_settings"),n=this.get("success_fn"),i=this.get("interval");return function r(){a.a.ajax(e).success((function(e){n(e)?t.resolve(e):setTimeout(r,i)}))}(),t}});e.a={commatize:function(t){t+="";for(var e=/(\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t},is_deferred:function(t){return"promise"in t},ServerStateDeferred:o,get_random_color:function(t){t||(t="#ffffff"),"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)t[e]=parseInt(t[e].slice(1),16);var n,i,a,r,o,s,l,c,d,u,h,f,p,m,_,g,v,y=function(t,e,n){return(299*t+587*e+114*n)/1e3},b=!1,w=0;do{for(d=y(i=(16711680&(n=Math.round(16777215*Math.random())))>>16,a=(65280&n)>>8,r=255&n),b=!0,e=0;e<t.length;e++)if(u=y(s=(16711680&(o=t[e]))>>16,l=(65280&o)>>8,c=255&o),f=i,p=a,m=r,_=s,g=l,v=c,h=Math.max(f,_)-Math.min(f,_)+(Math.max(p,g)-Math.min(p,g))+(Math.max(m,v)-Math.min(m,v)),Math.abs(d-u)<40||h<200){b=!1;break}w++}while(!b&&w<=10);return"#".concat((16777216+n).toString(16).substr(1,6))}}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=a.a;e.a=function(t){(t=t||{}).tooltipConfig=t.tooltipConfig||{placement:"bottom"},t.classes=["icon-btn"].concat(t.classes||[]),t.disabled&&t.classes.push("disabled");var e=['<a class="',t.classes.join(" "),'"',t.title?' title="'.concat(t.title,'"'):"",!t.disabled&&t.target?' target="'.concat(t.target,'"'):"",' href="',!t.disabled&&t.href?t.href:"javascript:void(0);",'">','<span class="fa ',t.faIcon,'" style="',t.style,'"></span>',"</a>"].join(""),n=o(e).tooltip(t.tooltipConfig);return r.default.isFunction(t.onclick)&&n.click((function(e){n.tooltip("hide"),n.parent().attr("tabindex",-1).focus(),t.onclick.apply(this,arguments)})),n}},function(t,e,n){"use strict";n.d(e,"f",(function(){return F})),n.d(e,"g",(function(){return W})),n.d(e,"h",(function(){return z})),n.d(e,"e",(function(){return U})),n.d(e,"d",(function(){return V})),n.d(e,"b",(function(){return B})),n.d(e,"a",(function(){return q})),n.d(e,"i",(function(){return G})),n.d(e,"c",(function(){return J}));var i=n(1044),a=n(747),r=n(1041),o=n(608),s=n(749),l=n(2159),c=n(251),d=n(2148),u=n(275),h=n(748),f=n(1056),p=n(488),m=n(2147);function _(){return new Worker(n.p+"CacheWorker.worker.bundled.worker.js")}var g=n(72),v=n(88);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}function k(t){var e=C();return function(){var n,i=j(t);if(e){var a=j(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return x(this,n)}}function x(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){var e="function"==typeof Map?new Map:void 0;return(S=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return M(t,arguments,j(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),T(i,t)})(t)}function M(t,e,n){return(M=C()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&T(a,n.prototype),a}).apply(null,arguments)}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function E(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){A(r,i,a,o,s,"next",t)}function s(t){A(r,i,a,o,s,"throw",t)}o(void 0)}))}}var I=Object(i.a)((function(){return Object(a.a)(g.a).pipe(Object(s.a)(P))})).pipe(Object(l.a)(1)),P=function(){var t=E(regeneratorRuntime.mark((function t(e){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.a)(new _);case 2:if(n=t.sent){t.next=5;break}throw new N;case 5:return i=Object(v.a)(),a=L(L({},e),{},{root:i}),t.next=9,n.configure(a);case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(t){return Object(r.a)(Object(c.a)((function(e){if(!(t in e))throw new $(t);return e[t]})))},R=function(t){var e=I.pipe(Y(t)).pipe(Object(c.a)((function(t){return function(){return Object(o.a)(t.apply(void 0,arguments))}})));return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(i){var a=Object(p.v4)();return e.pipe(Object(s.a)((function(e){return i.pipe(Object(d.a)(),Object(c.a)((function(i){return e(L({id:a,cfg:n,fnName:t},i))})),Object(u.a)(Boolean),Object(h.a)(),Object(f.a)((function(){return e({id:a,kind:"C"})})))})))}}},H=function(t){return E(regeneratorRuntime.mark((function e(){var n,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.pipe(Y(t)).toPromise(),e.next=3,n;case 3:return i=e.sent,e.next=6,i.apply(void 0,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))},N=function(t){w(n,t);var e=k(n);function n(){return b(this,n),e.apply(this,arguments)}return n}(S(Error)),$=function(t){w(n,t);var e=k(n);function n(t){b(this,n);for(var i="\n            Missing method on client cache worker: ".concat(t,".\n            Please write a function named ").concat(t," in caching/cacheWorker.js\n        "),a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return e.call.apply(e,[this,i].concat(r))}return n}(S(Error)),F=R("monitorContentQuery"),W=R("monitorDscQuery"),z=R("monitorHistoryContent"),U=R("loadHistoryContents"),V=R("loadDscContent"),B=H("cacheContent"),q=(H("getCachedContent"),H("uncacheContent"),H("bulkCacheContent")),G=(H("cacheCollectionContent"),H("getCachedCollectionContent"),H("bulkCacheDscContent"),H("getContentByTypeId"),H("wipeDatabase")),J=H("clearHistoryDateStore")},,function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return l}));var i=n(0),a=n.n(i),r=n(1),o=a.a;function s(t,e){var n=t.data("menu_options");t.data("menu_options",e),n||t.bind("click.show_popup",(function(e){return o(".popmenu-wrapper").remove(),setTimeout((function(){var n=o('<div class="dropdown-menu" id="'.concat(t.attr("id"),'-menu"/>')),i=t.data("menu_options");r.default.size(i)<=0&&o('<div class="dropdown-item">No Options.</div>').appendTo(n),o.each(i,(function(t,e){if(e){var i=e.action||e,a=e.url||"javascript:void(0);",r=o("<a>").addClass("dropdown-item").attr("href",a).html(t).click(i);e.class&&r.addClass(e.class),n.append(r)}else n.append(o("<div/>").addClass("dropdown-item head").append(o("<a href='javascript:void(0)' role='button'></a>").html(t)))}));var a=o("<div class='popmenu-wrapper' style='position: absolute;left: 0;'></div>").append(n).appendTo("body"),s=e.pageX-a.width()/2;s=Math.min(s,o(document).scrollLeft()+o(window).width()-o(a).width()-5),s=Math.max(s,o(document).scrollLeft()+5),a.css({top:e.pageY,left:s})}),10),setTimeout((function(){var t=function(t){o(t).bind("click.close_popup",(function(){o(".popmenu-wrapper").remove(),t.unbind("click.close_popup")}))};t(o(window.document)),t(o(window.top.document));for(var e=window.top.frames.length;e--;){t(o(window.top.frames[e].document))}}),50),!1}))}function l(){o("div[popupmenu]").each((function(){var t={},e=o(this);e.find("a").each((function(){var e=o(this),n=e.get(0),i=n.getAttribute("confirm"),a=n.getAttribute("href"),r=n.getAttribute("target");t[e.text()]=a?{url:a,action:function(t){if(!i||confirm(i)){if(r)return window.open(a,r),!1;e.click()}else t.preventDefault()}}:null}));var n=o("#".concat(e.attr("popupmenu")));n.find("a").bind("click",(function(t){return t.stopPropagation(),!0})),s(n,t),n.addClass("popup"),e.remove()}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return m})),n.d(e,"b",(function(){return _})),n.d(e,"d",(function(){return k}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(2),d=n.n(c),u=n(66),h=n(6),f=s.a.Model.extend({}),p=s.a.Model.extend({defaults:{id:"",type:"",name:"",hda_ldda:"hda",metadata:null},initialize:function(){this.get("metadata")||this._set_metadata(),this.on("change",this._set_metadata,this)},_set_metadata:function(){var t=new f;i.default.each(i.default.keys(this.attributes),(function(e){if(0===e.indexOf("metadata_")){var n=e.split("metadata_")[1];t.set(n,this.attributes[e]),delete this.attributes[e]}}),this),this.set("metadata",t,{silent:!0})},get_metadata:function(t){return this.attributes.metadata.get(t)},urlRoot:"".concat(Object(l.getAppRoot)(),"api/datasets")}),m=p.extend({defaults:i.default.extend({},p.prototype.defaults,{chunk_url:null,first_data_chunk:null,offset:0,at_eof:!1}),initialize:function(t){p.prototype.initialize.call(this),this.attributes.first_data_chunk&&(this.attributes.offset=this.attributes.first_data_chunk.offset),this.attributes.chunk_url="".concat(Object(l.getAppRoot)(),"dataset/display?dataset_id=").concat(this.id),this.attributes.url_viz="".concat(Object(l.getAppRoot)(),"visualization")},get_next_chunk:function(){if(this.attributes.at_eof)return null;var t=this,e=r.a.Deferred();return r.a.getJSON(this.attributes.chunk_url,{offset:t.attributes.offset}).success((function(n){var i;""!==n.ck_data?(i=n,t.attributes.offset=n.offset):(t.attributes.at_eof=!0,i=null),e.resolve(i)})),e}}),_=s.a.Collection.extend({model:p}),g=s.a.View.extend({initialize:function(t){this.row_count=0,this.loading_chunk=!1,new w({model:t.model,$el:this.$el})},expand_to_container:function(){this.$el.height()<this.scroll_elt.height()&&this.attempt_to_fetch()},attempt_to_fetch:function(t){var e=this;!this.loading_chunk&&this.scrolled_to_bottom()&&(this.loading_chunk=!0,this.loading_indicator.show(),r.a.when(e.model.get_next_chunk()).then((function(t){t&&(e._renderChunk(t),e.loading_chunk=!1),e.loading_indicator.hide(),e.expand_to_container()})))},render:function(){this.loading_indicator=r()("<div/>").attr("id","loading_indicator"),this.$el.append(this.loading_indicator);var t=r()("<table/>").attr({id:"content_table",cellpadding:0});this.$el.append(t);var e=this.model.get_metadata("column_names"),n=r()("<thead/>").appendTo(t),i=r()("<tr/>").appendTo(n);if(e)i.append("<th>".concat(e.join("</th><th>"),"</th>"));else for(var a=1;a<=this.model.get_metadata("columns");a++)i.append("<th>".concat(a,"</th>"));var o=this,s=this.model.get("first_data_chunk");s?this._renderChunk(s):r.a.when(o.model.get_next_chunk()).then((function(t){o._renderChunk(t)})),this.scroll_elt.scroll((function(){o.attempt_to_fetch()}))},scrolled_to_bottom:function(){return!1},_renderCell:function(t,e,n){var i=r()("<td>").text(t),a=this.model.get_metadata("column_types");return void 0!==n?i.attr("colspan",n).addClass("stringalign"):a&&e<a.length&&("str"!==a[e]&&"list"!==a[e]||i.addClass("stringalign")),i},_renderRow:function(t){var e=t.split("\t"),n=r()("<tr>"),a=this.model.get_metadata("columns");return this.row_count%2!=0&&n.addClass("dark_row"),e.length===a?i.default.each(e,(function(t,e){n.append(this._renderCell(t,e))}),this):e.length>a?(i.default.each(e.slice(0,a-1),(function(t,e){n.append(this._renderCell(t,e))}),this),n.append(this._renderCell(e.slice(a-1).join("\t"),a-1))):1===e.length?(e=t.split(",")).length===a?i.default.each(e,(function(t,e){n.append(this._renderCell(t,e))}),this):(e=t.split(" ")).length===a?i.default.each(e,(function(t,e){n.append(this._renderCell(t,e))}),this):n.append(this._renderCell(t,0,a)):(i.default.each(e,(function(t,e){n.append(this._renderCell(t,e))}),this),i.default.each(i.default.range(a-e.length),(function(){n.append(r()("<td>"))}))),this.row_count++,n},_renderChunk:function(t){var e=this.$el.find("table");i.default.each(t.ck_data.split("\n"),(function(n,i){""!==n&&i>=(t.data_line_offset||0)&&e.append(this._renderRow(n))}),this)}}),v=g.extend({initialize:function(t){g.prototype.initialize.call(this,t);var e=i.default.find(this.$el.parents(),(function(t){return"auto"===r()(t).css("overflow")}));e||(e=window),this.scroll_elt=r()(e)},scrolled_to_bottom:function(){return this.$el.height()-this.scroll_elt.scrollTop()-this.scroll_elt.height()<=0}}),y=g.extend({initialize:function(t){g.prototype.initialize.call(this,t),this.scroll_elt=this.$el.css({position:"relative",overflow:"scroll",height:t.height||"500px"})},scrolled_to_bottom:function(){return this.$el.scrollTop()+this.$el.innerHeight()>=this.el.scrollHeight}});function b(t,e){for(var n=0;n<e.length;n++)if(e[n].match(t))return n;return-1}var w=s.a.View.extend({col:{chrom:null,start:null,end:null},url_viz:null,dataset_id:null,genome_build:null,file_ext:null,initialize:function(t){var e=Object(h.a)();if(e&&e.modal&&(this.modal=e.modal),e&&e.frame&&(this.frame=e.frame),this.modal&&this.frame){var n=t.model,i=n.get("metadata");if(n.get("file_ext")){if(this.file_ext=n.get("file_ext"),"bed"==this.file_ext){if(!(i.get("chromCol")&&i.get("startCol")&&i.get("endCol")))return void console.log("TabularButtonTrackster : Bed-file metadata incomplete.");this.col.chrom=i.get("chromCol")-1,this.col.start=i.get("startCol")-1,this.col.end=i.get("endCol")-1}if("vcf"!=this.file_ext||(this.col.chrom=b("Chrom",i.get("column_names")),this.col.start=b("Pos",i.get("column_names")),this.col.end=null,-1!=this.col.chrom&&-1!=this.col.start)){if(void 0!==this.col.chrom)if(n.id)if(this.dataset_id=n.id,n.get("url_viz")){this.url_viz=n.get("url_viz"),n.get("genome_build")&&(this.genome_build=n.get("genome_build"));var a=new u.a.IconButtonView({model:new u.a.IconButton({title:d()("Visualize"),icon_class:"chart_curve",id:"btn_viz"})});this.setElement(t.$el),this.$el.append(a.render().$el),this.hide()}else console.log("TabularButtonTrackster : Url for visualization controller is missing.");else console.log("TabularButtonTrackster : Dataset identification is missing.")}else console.log("TabularButtonTrackster : VCF-file metadata incomplete.")}}},events:{"mouseover tr":"show",mouseleave:"hide"},show:function(t){var e=this;if(null!==this.col.chrom){var n,i=r()(t.target).parent(),a=i.children().eq(this.col.chrom).html(),o=i.children().eq(this.col.start).html(),s=this.col.end?i.children().eq(this.col.end).html():o;if(a.match("^#")||""===a||(n=o,isNaN(parseFloat(n))||!isFinite(n)))r()("#btn_viz").hide();else{var l={dataset_id:this.dataset_id,gene_region:"".concat(a,":").concat(o,"-").concat(s)},c=i.offset(),u=c.left-10,h=c.top-r()(window).scrollTop()+3;r()("#btn_viz").css({position:"fixed",top:"".concat(h,"px"),left:"".concat(u,"px")}),r()("#btn_viz").off("click"),r()("#btn_viz").click((function(){e.frame.add({title:d()("Trackster"),url:"".concat(e.url_viz,"/trackster?").concat(r.a.param(l))})})),r()("#btn_viz").show()}}},hide:function(){this.$("#btn_viz").hide()}}),k=function(t){t.model||(t.model=new m(t.dataset_config));var e=t.parent_elt,n=t.embedded;delete t.embedded,delete t.parent_elt,delete t.dataset_config;var i=n?new y(t):new v(t);return i.render(),e&&(e.append(i.$el),i.expand_to_container()),i}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(139),c=n(19),d=n(10),u=n(200),h=s.a.View.extend({initialize:function(t,e){var n=this;this.app=t,this.app_options=t.model?t.model.attributes:{},this.field=e&&e.field||new s.a.View,this.model=e&&e.model||new s.a.Model({text_enable:this.app_options.text_enable||"Enable",text_disable:this.app_options.text_disable||"Disable",text_connected_enable:this.app_options.text_connected_enable||"Add connection to module",text_connected_disable:this.app_options.text_connected_disable||"Remove connection from module",cls_enable:this.app_options.cls_enable||"fa fa-caret-square-o-down",cls_disable:this.app_options.cls_disable||"fa fa-caret-square-o-up",always_refresh:this.app_options.always_refresh}).set(e),this.setElement(this._template()),this.$field=this.$(".ui-form-field"),this.$info=this.$(".ui-form-info"),this.$preview=this.$(".ui-form-preview"),this.$collapsible=this.$(".ui-form-collapsible"),this.$collapsible_text=this.$(".ui-form-collapsible-text"),this.$collapsible_icon=this.$(".ui-form-collapsible-icon"),this.$connected_icon=this.$(".ui-form-connected-icon"),this.$title=this.$(".ui-form-title"),this.$title_text=this.$(".ui-form-title-text"),this.$error_text=this.$(".ui-form-error-text"),this.$error=this.$(".ui-form-error"),this.$backdrop=this.$(".ui-form-backdrop"),this.$field.prepend(this.field.$el);var i=this.model.get("collapsible_value"),a=JSON.stringify(this.model.get("value"));this.field.connected=a==JSON.stringify({__class__:"ConnectedValue"}),this.field.collapsed=this.field.connected||void 0!==i&&JSON.stringify(this.model.get("value"))==JSON.stringify(i),this.listenTo(this.model,"change",this.render,this),this.render();var r=this;this.$collapsible_icon.on("click",(function(){r.field.collapsed=!r.field.collapsed,r.field.connected=!1,t.trigger&&t.trigger("change"),r.render()})),this.$connected_icon.on("click",(function(){r.field.connected=!r.field.connected,r.field.collapsed=r.field.connected,t.trigger&&t.trigger("change"),r.render()})),this.field.model&&!this.model.get("always_refresh")&&this.listenTo(this.field.model,"change:value",(function(){r.reset()})),this.field.model&&this.listenTo(this.field.model,"error",(function(t){t?n.error(t):n.reset()}))},backdrop:function(){this.model.set("backdrop",!0)},error:function(t){this.model.set("error_text",t)},reset:function(){!this.model.get("fixed")&&this.model.set("error_text",null)},render:function(){a()(".tooltip").hide();var t=this.model.get("help",""),e=this.model.get("argument");e&&-1==t.indexOf("(".concat(e,")"))&&(t+=" (".concat(e,")")),this.$info.html(t),this.$el[this.model.get("hidden")?"hide":"show"]();var n=r.default.escape(this.model.get("text_value")).replace(/\n/g,"<br />");this.$preview[this.field.collapsed&&this.model.get("collapsible_preview")||this.model.get("disabled")?"show":"hide"]().html(n);var i=this.model.get("error_text");this.$error[i?"show":"hide"](),this.$el[i?"addClass":"removeClass"]("alert alert-danger"),this.$error_text.html(i),this.$backdrop[this.model.get("backdrop")?"show":"hide"](),this.field.collapsed||this.model.get("disabled")?this.$field.hide():this.$field.show(),this.field.model&&this.field.model.set({color:this.model.get("color"),style:this.model.get("style")});var o=this.field.connected,s=!this.field.collapsible_disabled&&!this.model.get("disabled")&&void 0!==this.model.get("collapsible_value"),l=s&&this.model.get("connectable");if(s||l){var c=this.field.collapsed?"enable":"disable";if(this.$title_text.hide(),this.$collapsible.show(),this.$collapsible_text.text(this.model.get("label")),s&&!o?this.$collapsible_icon.removeClass().addClass("icon ui-form-collapsible-icon").addClass(this.model.get("cls_".concat(c))).tooltip("dispose").attr("data-original-title",this.model.get("text_".concat(c))).tooltip({placement:"bottom"}).show():this.$collapsible_icon.hide(),l){var d=this.field.connected?"fa fa-times":"fa fa-arrows-h",u=!o&&s?"ml-1":"",h=this.field.connected?"disable":"enable";this.$connected_icon.removeClass().addClass("icon ui-form-connected-icon").addClass(d).addClass(u).tooltip("dispose").attr("data-original-title",this.model.get("text_connected_".concat(h))).tooltip({placement:"bottom"}).show()}else this.$connected_icon.hide()}else this.$title_text.show().text(this.model.get("label")),this.$collapsible.hide();this.$field.attr("data-label",this.model.get("label"))},_template:function(){return a()("<div/>").addClass("ui-form-element").append(a()("<div/>").addClass("ui-form-error").append(a()("<span/>").addClass("fa fa-arrow-down mr-1")).append(a()("<span/>").addClass("ui-form-error-text"))).append(a()("<div/>").addClass("ui-form-title").append(a()("<div/>").addClass("ui-form-collapsible").append(a()("<i/>").addClass("ui-form-collapsible-icon")).append(a()("<i/>").addClass("ui-form-connected-icon")).append(a()("<span/>").addClass("ui-form-collapsible-text ml-1"))).append(a()("<span/>").addClass("ui-form-title-text"))).append(a()("<div/>").addClass("ui-form-field").append(a()("<span/>").addClass("ui-form-info form-text text-muted mt-2")).append(a()("<div/>").addClass("ui-form-backdrop"))).append(a()("<div/>").addClass("ui-form-preview"))}}),f=n(6),p=n(2),m=n.n(p),_=n(151),g="disabled",v="enabled",y="linked",b={data:[{src:"hda",icon:"fa-file-o",tooltip:m()("Single dataset"),library:!0,multiple:!1,batch:g},{src:"hda",icon:"fa-files-o",tooltip:m()("Multiple datasets"),multiple:!0,batch:y},{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collection"),multiple:!1,batch:y}],data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:m()("Multiple datasets"),multiple:!0,batch:g},{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collections"),multiple:!0,batch:g}],data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collection"),multiple:!1,batch:g}],workflow_data:[{src:"hda",icon:"fa-file-o",tooltip:m()("Single dataset"),multiple:!1,batch:g}],workflow_data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:m()("Multiple datasets"),multiple:!0,batch:g}],workflow_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collection"),multiple:!1,batch:g}],module_data:[{src:"hda",icon:"fa-file-o",tooltip:m()("Single dataset"),multiple:!1,batch:g},{src:"hda",icon:"fa-files-o",tooltip:m()("Multiple datasets"),multiple:!0,batch:v}],module_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:m()("Dataset collection"),multiple:!1,batch:g},{src:"hdca",icon:"fa-folder",tooltip:m()("Multiple collections"),multiple:!0,batch:v}]},w={View:s.a.View.extend({initialize:function(t){var e=this,n=this;this.model=t&&t.model||new s.a.Model({src_labels:{hda:"dataset",hdca:"dataset collection"},pagelimit:100,statustimer:1e3}).set(t),this.setElement(a()("<div/>").addClass("ui-select-content")),this.button_product=new c.a.RadioButton.View({value:"false",data:[{icon:"fa fa-chain",value:"false",tooltip:"Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads."},{icon:"fa fa-chain-broken",value:"true",tooltip:"Unlinked dataset inputs will be run against *all* other inputs."}]}),this.$batch={linked:a()(this._templateBatch()).clone(),enabled:a()(this._templateBatch()).clone().append(this.button_product.$el)};var i=this.$el.get(0);i.addEventListener("dragenter",(function(t){e.lastenter=t.target,n.$el.addClass("ui-dragover")})),i.addEventListener("dragover",(function(t){t.preventDefault()})),i.addEventListener("dragleave",(function(t){e.lastenter===t.target&&n.$el.removeClass("ui-dragover")})),i.addEventListener("drop",(function(t){t.preventDefault();try{var n=JSON.parse(t.dataTransfer.getData("text"))[0];e._handleDropValues(n)}catch(t){e._handleDropStatus("danger")}})),this.cache={},this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:current",this._changeCurrent,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:type change:optional change:multiple change:extensions",this._changeType,this),this.render(),this.on("change",(function(){t.onchange&&t.onchange(n.value())}))},render:function(){this._changeType(),this._changeValue(),this._changeWait()},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},update:function(t){this.model.set("data",t.options)},value:function(t){var e=Object(f.a)();t&&(this._patchValue(t),this.model.set("value",t));var n=this.model.get("current");if(this.config[n]){var i=this.fields[n].value();if(null!==i&&(i=a.a.isArray(i)?i:[i]).length>0){var r=this._batch({values:[]});for(var o in i){var s=this.cache["".concat(i[o],"_").concat(this.config[n].src)];if(!s)return e.emit.debug("ui-select-content::value()","Requested details not found for '".concat(i[o],"'.")),null;var l=this._unpatchValue(s);r.values.push(l)}return r.values.sort((function(t,e){return t.hid-e.hid})),r}}else e.emit.debug("ui-select-content::value()","Invalid value/source '".concat(t,"'."));return null},_changeCurrent:function(){var t=this;r.default.each(this.fields,(function(e,n){var i=t.config[n];t.model.get("current")==n?(e.$el.show(),r.default.each(t.$batch,(function(t,e){i.batch==e?t.show():t.hide()})),"hda"==i.src?(t.button_dialog.show(),t.upload_dialog.show()):(t.button_dialog.hide(),t.upload_dialog.hide()),t.button_type.value(n)):e.$el.hide()})),this.fields.length>1?this.button_type.show():this.button_type.hide()},_changeType:function(){var t=this,e=this,n=Object(f.a)(),i=(this.model.get("flavor")?"".concat(this.model.get("flavor"),"_"):"")+String(this.model.get("type"))+(this.model.get("multiple")?"_multiple":"");b[i]?this.config=b[i]:(this.config=b.data,n.emit.debug("ui-select-content::_changeType()","Invalid configuration/type id '".concat(i,"'.")));var o=e.model.get("data"),s=this.model.get("extensions"),l=d.b.textify(s),u=this.model.get("src_labels");this.fields=[],this.button_data=[],r.default.each(this.config,(function(t,n){e.button_data.push({value:n,icon:t.icon,tooltip:t.tooltip}),e.fields.push(new _.a.View({optional:e.model.get("optional"),multiple:t.multiple,searchable:!t.multiple||o&&o[t.src]&&o[t.src].length>e.model.get("pagelimit"),individual:!0,error_text:"No ".concat(l?"".concat(l," "):"").concat(u[t.src]||"content"," available."),onchange:function(){e.trigger("change")}}))})),this.button_type=new c.a.RadioButton.View({value:this.model.get("current"),data:this.button_data,cls:"pr-lg-2",onchange:function(t){e.model.set("current",t),e.trigger("change")}}),this.button_dialog=new c.a.Button({icon:"fa-folder-open-o",tooltip:"Browse Datasets",onclick:function(){var e=t.model.get("current"),i=t.config[e];n.data.dialog((function(e){t._handleDropValues(e,!1)}),{multiple:i.multiple,library:!!i.library,format:null,allowUpload:!0})}}),this.upload_dialog=new c.a.Button({icon:"fa-upload",tooltip:"Upload Dataset",onclick:function(){var e=t.model.get("current"),i=t.config[e];n.data.dialog((function(e){t._handleDropValues(e,!1)}),{multiple:i.multiple,formats:s,new:!0})}});var h=a()("<div/>").addClass("overflow-auto w-100 py-2 py-lg-0 pr-lg-2 ");this.$el.empty().addClass("d-flex flex-row flex-wrap flex-lg-nowrap").append(a()("<div/>").append(this.button_type.$el)).append(h),"always-on"==n.config.upload_from_form_button&&this.$el.append(a()("<div style='margin-right: 5px;' />").append(this.upload_dialog.$el)),this.$el.append(a()("<div/>").append(this.button_dialog.$el)),r.default.each(this.fields,(function(t){h.append(t.$el)})),r.default.each(this.$batch,(function(t,e){h.append(t)})),this.model.set("current",0),this._changeCurrent(),this._changeData()},_changeWait:function(){var t=this;r.default.each(this.fields,(function(e){e[t.model.get("wait")?"wait":"unwait"]()}))},_changeData:function(){var t=this.model.get("data"),e=this,n={hda:[],hdca:[]};r.default.each(t,(function(t,i){r.default.each(t,(function(t){e._patchValue(t);var a=t.src||i;n[a].push({hid:t.hid,keep:t.keep,label:"".concat(t.hid||"Selected",": ").concat(t.name),value:t.id,origin:t.origin,tags:t.tags}),e.cache["".concat(t.id,"_").concat(a)]=t}))})),r.default.each(this.config,(function(t,i){n[t.src]&&e.fields[i].add(n[t.src],(function(t,e){return e.hid-t.hid}))}))},_changeValue:function(){var t=this.model.get("value");if(t&&t.values&&t.values.length>0){var e=[];r.default.each(t.values,(function(t){e.push(t.id)}));for(var n=t.values[0].src,i=t.values.length>1,a=0;a<this.config.length;a++){var o=this.fields[a],s=this.config[a];if(s.src==n&&-1!==[i,!0].indexOf(s.multiple)){this.model.set("current",a),o.value(e);break}}}else r.default.each(this.fields,(function(t){t.value(null)}))},_getSource:function(t){return"dataset_collection"==t.history_content_type?"hdca":"hda"},_patchValue:function(t){var e=this,n={ldda:"hda",dce:"hdca"};t.values?r.default.each(t.values,(function(t){e._patchValue(t)})):n[t.src]&&(t.origin=t.src,t.src=n[t.src],t.id="".concat(t.origin).concat(t.id))},_unpatchValue:function(t){if(t.origin){var e=Object.assign({},t);return e.id=e.id.substr(e.origin.length),e.src=e.origin,e}return t},_handleDropValues:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,o=this.model.get("data"),s=this.model.get("current"),l=this.config[s],c=this.fields[s];if(o){var d=a.a.isArray(t)?t:[t];if(d.length>0){var u=!1;r.default.each(d,(function(t){i._patchValue(t);var n=t.id,a=t.src=e._getSource(t),s={id:n,src:a};r.default.findWhere(o[a],s)||(u=!0,o[a].push({id:n,src:a,hid:t.hid||"Selected",name:t.name?t.name:n,origin:t.origin,keep:!0,tags:[]}))})),u&&this._changeData();var h=d[0].id,f=d[0].src;if(l.src==f&&n){var p=c.value();p&&l.multiple?r.default.each(d,(function(t){-1==p.indexOf(t.id)&&p.push(t.id)})):p=h,c.value(p)}else this.model.set("value",{values:d}),this.model.trigger("change:value");this.trigger("change")}}this._handleDropStatus("success")},_handleDropStatus:function(t){var e=this;this.$el.removeClass("ui-dragover").addClass("ui-dragover-".concat(t)),setTimeout((function(){e.$el.removeClass("ui-dragover-".concat(t))}),this.model.get("statustimer"))},_batch:function(t){t.batch=!1;var e=this.model.get("current"),n=this.config[e];if("dce"==n.src||"hdca"==n.src){var i=this.cache["".concat(this.fields[e].value(),"_").concat(n.src)];i&&i.map_over_type&&(t.batch=!0)}return n.batch!=y&&n.batch!=v||(t.batch=!0,n.batch==v&&"true"===this.button_product.value()&&(t.product=!0)),t},_templateBatch:function(){return'<div class="form-text text-muted" style="clear: both;">\n                    <i class="fa fa-sitemap"/>\n                    <span>\n                        This is a batch mode input field. Separate jobs will be triggered for each dataset selection.\n                    </span>\n                </div>'}})},k={View:s.a.View.extend({initialize:function(t){var e=this;this.options=t,this.name=t.name||"element",this.multiple=t.multiple||!1,this.message=new c.a.Message({cls:"col mb-0"}),this.selections=a()("<div/>"),this.select=new c.a.Select.View({optional:t.optional}),this.$button=a()('<button class="fa fa-sign-in"/>'),this.$button.on("click",(function(){e.add({id:e.select.value(),name:e.select.text()})})),this.setElement(this._template(t)),this.$(".ui-list-message").append(this.message.$el),this.$(".ui-list-selections").append(this.selections),this.$(".ui-list-button").append(this.$button),this.$(".ui-list-select").append(this.select.$el)},value:function(t){if(void 0!==t){if(this.selections.empty(),a.a.isArray(t))for(var e in t){var n=t[e],i=null,r=null;"string"!=a.a.type(n)?(i=n.id,r=n.name):i=r=n,null!=i&&this.add({id:i,name:r})}this._refresh()}var o=[];return this.$(".ui-list-id").each((function(){o.push({id:a()(this).prop("id"),name:a()(this).find(".ui-list-name").html()})})),0==o.length?null:o},add:function(t){var e=this;if(0===this.$('[id="'.concat(t.id,'"]')).length)if(d.b.isEmpty(t.id))this.message.update({message:"Please select a valid ".concat(this.name,"."),status:"danger"});else{var n=a()(this._templateRow({id:t.id,name:t.name}));n.find("button").on("click",(function(){n.remove(),e._refresh()})),this.selections.append(n),this._refresh()}else this.message.update({message:"This ".concat(this.name," is already in the list.")})},update:function(t){this.select.update(t)},_refresh:function(){this.$(".ui-list-id").length>0?!this.multiple&&this.$button.attr("disabled",!0):this.$button.attr("disabled",!1),this.options.onchange&&this.options.onchange()},_template:function(t){return'<div class="ui-list container">\n                    <div class="row">\n                        <div class="col-1 pl-0 mb-2">\n                            <div class="ui-list-button"/>\n                        </div>\n                        <div class="ui-list-select col pr-0"/>\n                    </div>\n                    <div class="ui-list-message mt-2 row"/>\n                    <div class="ui-list-selections mt-2"/>\n                </div>'},_templateRow:function(t){return'<div id="'.concat(t.id,'" class="ui-list-id row mt-2">\n                    <button class="ui-list-delete fa fa-trash mr-3"/>\n                    <div class="ui-list-name">').concat(t.name,"</span>\n                </div>")}})},x=n(3),S=s.a.Collection.extend({url:"".concat(Object(x.getAppRoot)(),"api/libraries?deleted=false")}),M=s.a.Collection.extend({initialize:function(){var t=this;this.config=new s.a.Model({library_id:null}),this.config.on("change",(function(){t.fetch({reset:!0})}))},url:function(){return"".concat(Object(x.getAppRoot)(),"api/libraries/").concat(this.config.get("library_id"),"/contents")}}),C={View:s.a.View.extend({initialize:function(t){var e=this;this.libraries=new S,this.datasets=new M,this.options=t,this.library_select=new c.a.Select.View({onchange:function(t){e.datasets.config.set("library_id",t)}}),this.dataset_list=new k.View({name:"dataset",optional:t.optional,multiple:t.multiple,onchange:function(){e.trigger("change")}}),this.libraries.on("reset",(function(){var t=[];e.libraries.each((function(e){t.push({value:e.id,label:e.get("name")})})),e.library_select.update({data:t})})),this.datasets.on("reset",(function(){var t=[];null!==e.library_select.text()&&e.datasets.each((function(e){"file"===e.get("type")&&t.push({value:e.id,label:e.get("name")})})),e.dataset_list.update({data:t})})),this.on("change",(function(){t.onchange&&t.onchange(e.value())})),this.setElement(this._template()),this.$(".library-select").append(this.library_select.$el),this.$el.append(this.dataset_list.$el),this.libraries.fetch({reset:!0,success:function(){e.library_select.trigger("change"),void 0!==e.options.value&&e.value(e.options.value)}})},value:function(t){return this.dataset_list.value(t)},_template:function(){return'<div class="ui-select-library">\n                    <div class="library-select mb-2"/>\n                </div>'}})},T={View:s.a.View.extend({initialize:function(t){var e=this;this.ftpfile_list=new k.View({name:"file",optional:t.optional,multiple:t.multiple,onchange:function(){t.onchange&&t.onchange(e.value())}}),this.setElement(this.ftpfile_list.$el),d.b.get({url:"".concat(Object(x.getAppRoot)(),"api/remote_files"),success:function(t){var n=[];for(var i in t)n.push({value:t[i].path,label:t[i].path});e.ftpfile_list.update(n)}})},value:function(t){return this.ftpfile_list.value(t)}})},j=n(7),O=n.n(j),L=n(8),D=n(154),A=n(119),E={data:function(){return{}},computed:{mapping:function(){return this.inputRules?this.inputRules.mapping:[]},rules:function(){return this.inputRules?this.inputRules.rules:[]},columnData:function(){var t=A.a.applyRules([],[],[],this.rules);return{colHeadersPerRule:t.colHeadersPerRule,columns:t.columns}},colHeaders:function(){var t=this.columnData.columns;return A.a.colHeadersFor([],t)}},props:{inputRules:{required:!1,type:Object}},components:{RuleDisplayPreview:{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"rule"},[n("span",{staticClass:"rule-display"},[t._v(t._s(t.title)+"\n            ")]),t._v(" "),t.rule.warn?n("span",{staticClass:"rule-warning"},[t._v("\n                "+t._s(t.rule.warn)+"\n            ")]):t._e(),t._v(" "),t.rule.error?n("span",{staticClass:"rule-error"},[n("span",{staticClass:"alert-message"},[t._v(t._s(t.rule.error))])]):t._e()])},staticRenderFns:[],props:{rule:{required:!0,type:Object},colHeaders:{type:Array,required:!1}},computed:{title:function(){var t=this.rule.type;return A.a.RULES[t].display(this.rule,this.colHeaders)}},methods:{}},IdentifierDisplayPreview:{render:function(){var t=this.$createElement;return(this._self._c||t)("li",{staticClass:"rule",attrs:{title:this.help}},[this._v("\n        Set "+this._s(this.columnsLabel)+" as "+this._s(this.typeDisplay)+"\n      ")])},staticRenderFns:[],props:{type:{type:String,required:!0},columns:{required:!0},colHeaders:{type:Array,required:!0}},computed:{typeDisplay:function(){return A.a.MAPPING_TARGETS[this.type].label},help:function(){return A.a.MAPPING_TARGETS[this.type].help||""},columnsLabel:function(){return A.a.columnDisplay(this.columns,this.colHeaders)}}}}},I=n(5),P=Object(I.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ol",{staticClass:"rules"},[t._l(t.rules,(function(e,i){return n("rule-display-preview",{key:i,attrs:{rule:e,index:i,"col-headers":t.columnData.colHeadersPerRule[i]}})})),t._v(" "),t._l(t.mapping,(function(e,i){return n("identifier-display-preview",t._b({key:e.type,attrs:{index:i,"col-headers":t.colHeaders}},"identifier-display-preview",e,!1))}))],2)])}),[],!1,null,null,null).exports;function Y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var H={View:s.a.View.extend({initialize:function(t){var e=this;this.model=new s.a.Model,this.target=t.target;var n=this;this.browse_button=new c.a.Button({title:m()("Edit"),icon:"fa fa-edit",tooltip:m()("Edit Rules"),onclick:function(){n.target?n._fetchCollectionAndEdit():n._showRuleEditor(null)}}),this.on("change",(function(){t.onchange&&t.onchange(e.value())})),this.setElement(this._template(t)),this.$(".ui-rules-edit-button").append(this.browse_button.$el);var i=L.default.extend(P),a=document.createElement("div");this.$(".ui-rules-preview").append(a),this.instance=new i({propsData:{initialRules:{rules:[],mapping:[]}}}),this.instance.$mount(a),this.collapsible_disabled=!0},_fetchCollectionAndEdit:function(){var t=this,e="".concat(Object(x.getAppRoot)(),"api/dataset_collections/").concat(this.target.id,"?instance_type=history");O.a.get(e).then((function(e){return t._showCollection(e)})).catch(this._renderFetchError)},_showCollection:function(t){var e=t.data;this._showRuleEditor(e)},_showRuleEditor:function(t){var e=this,n={saveRulesFn:function(t){return e._handleRulesSave(t)},initialRules:this._value};D.a.ruleBasedCollectionCreatorModal(t,"collection_contents","collections",n).catch((function(){}))},_handleRulesSave:function(t){this._setValue(t)},_renderFetchError:function(t){console.log(t),console.log("problem fetching collection")},_template:function(t){return'\n            <div class="ui-rules-edit clearfix">\n                <span class="ui-rules-preview" />\n                <span class="ui-rules-edit-button float-left" />\n            </div>\n        '},value:function(t){if(void 0===t)return this._getValue();this._setValue(t)},update:function(t){this.target=t.target},_getValue:function(){return this._value},_setValue:function(t){t&&("string"==typeof t&&(t=JSON.parse(t)),this._value=t,this.model.trigger("error",null),this.trigger("change"),this.instance.inputRules=t)},validate:function(){var t=this._value,e=null;if(t&&0!==t.rules.length)if(0===t.mapping.length)e="No collection identifiers defined, specify at least one collection identifier.";else{var n,i=Y(t.rules);try{for(i.s();!(n=i.n()).done;){if(n.value.error){e="One or more rules in error.";break}}}catch(t){i.e(t)}finally{i.f()}}else e="No rules defined, define at least one rule.";return e}})},N=n(64),$={View:s.a.View.extend({initialize:function(t){var e=this;this.model=new s.a.Model,this.target=t.target;var n={mode:"directory",requireWritable:!0};this.browse_button=new c.a.Button({title:m()("Select"),icon:"fa fa-edit",tooltip:m()("Select URI"),onclick:function(){Object(N.c)((function(t){e._handleRemoteFilesUri(t)}),n)}}),this.on("change",(function(){t.onchange&&t.onchange(e.value())})),this.setElement(this._template(t)),this.$text=this.$(".ui-uri-preview"),this.$(".ui-file-select-button").append(this.browse_button.$el),this.listenTo(this.model,"change",this.render,this),this.render()},_handleRemoteFilesUri:function(t){this._setValue(t)},render:function(){var t=this._value;t?"string"==typeof t?this.$text.text(t):t.url!==this.$text.text()&&this.$text.text(t.url):this.$text.text("select...")},_template:function(t){return'\n            <div class="ui-rules-edit clearfix">\n                <span class="ui-uri-preview" />\n                <span class="ui-file-select-button float-left" />\n            </div>\n        '},value:function(t){if(void 0===t)return this._getValue();this._setValue(t)},update:function(t){this.target=t.target},_getValue:function(){var t;return null===(t=this._value)||void 0===t?void 0:t.url},_setValue:function(t){if(t){var e;if("string"==typeof t)try{e=JSON.parse(t)}catch(n){e=t}finally{t=e}this._value=t,this.model.trigger("error",null),this.model.trigger("change"),this.trigger("change")}}})};function F(t){return"0".concat(parseInt(t).toString(16)).slice(-2)}var W=s.a.View.extend({colors:{standard:["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],base:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],theme:[["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada"],["d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5"],["bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f"],["a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09"],["7f7f7e","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"]]},initialize:function(t){this.options=d.b.merge(t,{}),this.setElement(this._template()),this.$panel=this.$(".ui-color-picker-panel"),this.$view=this.$(".ui-color-picker-view"),this.$value=this.$(".ui-color-picker-value"),this.$header=this.$(".ui-color-picker-header"),this._build(),this.visible=!1,this.value(this.options.value),this.$boxes=this.$(".ui-color-picker-box");var e=this;this.$boxes.on("click",(function(){e.value(a()(this).css("background-color")),e.$header.trigger("click")})),this.$header.on("click",(function(){e.visible=!e.visible,e.visible?e.$view.fadeIn("fast"):e.$view.fadeOut("fast")}))},value:function(t){return null!=t&&(this.$value.css("background-color",t),this.$(".ui-color-picker-box").empty(),this.$(this._getValue()).html(this._templateCheck()),this.options.onchange&&this.options.onchange(t)),this._getValue()},_getValue:function(){var t=this.$value.css("background-color");return(t=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?"#".concat(F(t[1])).concat(F(t[2])).concat(F(t[3])):null},_build:function(){for(var t in this._content({colors:this.colors.base}),this.colors.theme){var e={};0==t?e.bottom=!0:t!=this.colors.theme.length-1?(e.top=!0,e.bottom=!0):e.top=!0,e.colors=this.colors.theme[t],this._content(e)}this._content({colors:this.colors.standard})},_content:function(t){var e=t.colors,n=a()(this._templateContent()),i=n.find(".line");for(var r in this.$panel.append(n),e){var o=a()(this._templateBox(e[r]));t.top&&(o.css("border-top","none"),o.css("border-top-left-radius","0px"),o.css("border-top-right-radius","0px")),t.bottom&&(o.css("border-bottom","none"),o.css("border-bottom-left-radius","0px"),o.css("border-bottom-right-radius","0px")),i.append(o)}return n},_templateCheck:function(){return'<div class="ui-color-picker-check fa fa-check"/>'},_templateContent:function(){return'<div class="ui-color-picker-content"><div class="line"/></div>'},_templateBox:function(t){return'<div id="'.concat(t,'" class="ui-color-picker-box" style="background-color: #').concat(t,';"/>')},_template:function(){return'\n            <div class="ui-color-picker">\n                <div class="ui-color-picker-header">\n                    <div class="ui-color-picker-value"/>\n                    <div class="ui-color-picker-label">Select a color</div>\n                </div>\n                <div class="ui-color-picker-view ui-input">\n                    <div class="ui-color-picker-panel"/>\n                </div>\n            </div>\n            '}}),z=n(67),U=s.a.View.extend({constructor:function(t){var e=this,n=Object(f.a)();this.model=t&&t.model||new s.a.Model(t),this.button_dialog=new z.a.Button({icon:"fa-folder-open-o",tooltip:"Browse Datasets",cls:"btn btn-secondary float-left mr-2",onclick:function(){n.data.dialog((function(t){e.model.set("value",t),e.model.get("onchange")&&e.model.get("onchange")(t)}),{multiple:Boolean(e.model.get("multiple"))})}}),this.$info=a()("<input disabled/>").addClass("ui-input float-left"),this.setElement(a()("<div/>").addClass("d-flex").append(this.button_dialog.$el).append(this.$info)),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(t){return void 0!==t&&this.model.set("value",t),this.model.get("value")},render:function(){this.$el.attr("id",this.model.id);var t=this.model.get("value");return t&&this.model.get("multiple")&&(t=t.join(", ")),this.$info.val(t||"Empty"),this}}),V=s.a.Model.extend({types:{text:"_fieldText",password:"_fieldText",select:"_fieldSelect",data_column:"_fieldSelect",genomebuild:"_fieldSelect",data:"_fieldData",data_collection:"_fieldData",integer:"_fieldSlider",float:"_fieldSlider",boolean:"_fieldBoolean",drill_down:"_fieldDrilldown",color:"_fieldColor",group_tag:"_fieldSelect",hidden:"_fieldHidden",hidden_data:"_fieldHidden",baseurl:"_fieldHidden",library_data:"_fieldLibrary",ftpfile:"_fieldFtp",upload:"_fieldUpload",rules:"_fieldRulesEdit",directory_uri:"_fieldDirectoryUri",data_dialog:"_fieldDialog"},create:function(t){var e=Object(f.a)(),n=this.types[t.type],i="function"==typeof this[n]?this[n].call(this,t):null;return i||(i=t.options?this._fieldSelect(t):this._fieldText(t),e.emit.debug("form-parameters::_addRow()","Auto matched field type (".concat(t.type,")."))),void 0===t.value&&(t.value=null),i.value(t.value),i},_fieldData:function(t){return new w.View({id:"field-".concat(t.id),extensions:t.extensions,optional:t.optional,multiple:t.multiple,type:t.type,flavor:t.flavor,data:t.options,onchange:t.onchange})},_fieldSelect:function(t){if(t.is_workflow)return this._fieldText(t);"data_column"==t.type&&(t.error_text="Missing columns in referenced dataset.");var e={checkboxes:c.a.Checkbox,radio:c.a.Radio,radiobutton:c.a.RadioButton}[t.display]||c.a.Select,n=Object(f.a)(),i=!0;return"workflow"==t.flavor&&(-1==n.config.select_type_workflow_threshold?i=!1:0==n.config.select_type_workflow_threshold?i=!0:n.config.select_type_workflow_threshold<t.options.length&&(i=!1)),new c.a.TextSelect({id:"field-".concat(t.id),data:t.data,options:t.options,display:t.display,error_text:t.error_text||"No options available",readonly:t.readonly,multiple:t.multiple,optional:t.optional,onchange:t.onchange,individual:t.individual,searchable:i,textable:t.textable,SelectClass:e})},_fieldDrilldown:function(t){return t.is_workflow?this._fieldText(t):new c.a.Drilldown.View({id:"field-".concat(t.id),data:t.options,display:t.display,optional:t.optional,onchange:t.onchange})},_fieldText:function(t){if("SelectTagParameter"===t.model_class||t.options&&t.data)if(t.area=t.multiple,d.b.isEmpty(t.value))t.value=null;else if(a.a.isArray(t.value)){var e="";for(var n in t.value){if(e+=String(t.value[n]),!t.multiple)break;e+="\n"}t.value=e}return new c.a.Input({id:"field-".concat(t.id),type:t.type,area:t.area,readonly:t.readonly,placeholder:t.placeholder,datalist:t.datalist,onchange:t.onchange})},_fieldSlider:function(t){return new c.a.Slider.View({id:"field-".concat(t.id),precise:"float"==t.type,is_workflow:t.is_workflow,min:t.min,max:t.max,onchange:t.onchange})},_fieldHidden:function(t){return new c.a.Hidden({id:"field-".concat(t.id),info:t.info})},_fieldBoolean:function(t){return new c.a.Switch({id:"field-".concat(t.id),onchange:t.onchange})},_fieldColor:function(t){return new W({id:"field-".concat(t.id),onchange:t.onchange})},_fieldDialog:function(t){return new U({id:"field-".concat(t.id),multiple:t.multiple,onchange:t.onchange})},_fieldLibrary:function(t){return new C.View({id:"field-".concat(t.id),optional:t.optional,multiple:t.multiple,onchange:t.onchange})},_fieldFtp:function(t){return new T.View({id:"field-".concat(t.id),optional:t.optional,multiple:t.multiple,onchange:t.onchange})},_fieldDirectoryUri:function(t){return new $.View({id:"field-".concat(t.id),onchange:t.onchange,target:t.target})},_fieldRulesEdit:function(t){return new H.View({id:"field-".concat(t.id),onchange:t.onchange,target:t.target})},_fieldUpload:function(t){return new c.a.Upload({id:"field-".concat(t.id),onchange:t.onchange})}}),B=s.a.View.extend({initialize:function(t,e){this.app=t,this.inputs=e.inputs,this.parameters=new V,this.setElement(a()("<div/>")),this.rendered=!1,this.elements={},!0!==e.skip_render&&this.renderOnce()},render:function(){var t=this;this.$el.empty(),r.default.each(this.inputs,(function(e){t.add(e)}))},renderOnce:function(){!1===this.rendered&&(this.render(),this.rendered=!0)},add:function(t){var e=a.a.extend({},t);switch(e.id=d.b.uid(),this.app.input_list[e.id]=e,e.type){case"conditional":this._addConditional(e);break;case"repeat":this._addRepeat(e);break;case"section":this._addSection(e);break;default:this._addRow(e)}},_addConditional:function(t){var e=this;t.test_param.id=t.id,t.test_param.textable=!1,this.app.model.get("sustain_conditionals")&&(t.test_param.disabled=!0);var n=this._addRow(t.test_param);if(n.model){for(var i in t.cases){var a=new B(this.app,{inputs:t.cases[i].inputs,skip_render:!0});this.elements[t.id+"_"+i]=a,this._append(a.$el.addClass("ui-portlet-section pl-2"),"".concat(t.id,"-section-").concat(i))}n.model.set("onchange",(function(n){var i=e.app.data.matchCase(t,n);for(var a in t.cases){var r=t.cases[a],o=e.$("#".concat(t.id,"-section-").concat(a)),s=!1;for(var l in r.inputs)if(!r.inputs[l].hidden){s=!0;break}if(a==i)e.elements[t.id+"_"+a].renderOnce();a==i&&s?o.fadeIn("fast"):o.hide()}e.app.trigger("change")})),n.trigger("change")}},_addRepeat:function(t){var e=this,n=0,i=new u.a.View({title:t.title||"Repeat",min:t.min,max:t.max,onnew:function(){a(t.inputs),e.app.trigger("change")}});function a(a){var r="".concat(t.id,"-section-").concat(n++),o=new B(e.app,{inputs:a});i.add({id:r,$el:o.$el,ondel:function(){i.del(r),e.app.trigger("change")}})}for(var o=r.default.size(t.cache),s=0;s<Math.max(Math.max(o,t.min||0),t.default||0);s++)a(s<o?t.cache[s]:t.inputs);this.app.model.get("sustain_repeats")&&i.hideOptions();var l=new h(this.app,{label:t.title||t.name,help:t.help,field:i});this._append(l.$el,t.id)},_addSection:function(t){var e=new B(this.app,{inputs:t.inputs}),n=new l.a.View({title:t.title||t.name,cls:"ui-portlet-section",collapsible:!0,collapsible_button:!0,collapsed:!t.expanded,section:e});n.append(e.$el),n.append(a()("<div/>").addClass("form-text text-muted").html(t.help)),this.app.on("expand",(function(t){n.$("#".concat(t)).length>0&&n.expand()})),this._append(n.$el,t.id)},_addRow:function(t){var e=this,n=t.id;t.onchange=t.onchange||function(){e.app.trigger("change",n)};var i=this.parameters.create(t);this.app.field_list[n]=i;var a=new h(this.app,{name:t.name,label:t.hide_label?"":t.label||t.name,value:t.value,text_value:t.text_value,collapsible_value:t.collapsible_value,collapsible_preview:t.collapsible_preview,connectable:t.connectable,help:t.help,argument:t.argument,disabled:t.disabled,color:t.color,style:t.style,backdrop:t.backdrop,hidden:t.hidden,fixed:t.fixed,field:i});return this.app.element_list[n]=a,this._append(a.$el,t.id),i},_append:function(t,e){this.$el.append(t.addClass("section-row").attr("id",e))}}),q={View:B},G=n(126);e.a=s.a.View.extend({initialize:function(t){this.model=new s.a.Model({initial_errors:!1,cls:"ui-portlet",icon:null,always_refresh:!0,status:"warning",hide_operations:!1,onchange:function(){}}).set(t),this.setElement(t.el||"<div/>"),this.render()},update:function(t){var e=this;this.data.matchModel(t,(function(t,n){var i=e.field_list[n];i.update&&(i.update(t),i.trigger("change"),Object(f.a)().emit.debug("form-view::update()","Updating input: ".concat(n)))}))},wait:function(t){for(var e in this.input_list){var n=this.field_list[e];this.input_list[e].is_dynamic&&n.wait&&n.unwait&&n[t?"wait":"unwait"]()}},highlight:function(t,e,n){var i=this.element_list[t];if(i&&(i.error(e||"Please verify this parameter."),this.portlet.expand(),this.trigger("expand",t),!n)){var r=this.$el.parents().filter((function(){return-1!=["auto","scroll"].indexOf(a()(this).css("overflow"))})).first();r.animate({scrollTop:r.scrollTop()+i.$el.offset().top-r.position().top-120},500)}},errors:function(t){if(this.trigger("reset"),t&&t.errors){var e=this.data.matchResponse(t.errors);for(var n in this.element_list)e[n]&&this.highlight(n,e[n],!0)}},render:function(){var t=this;this.off("change"),this.off("reset"),this.field_list={},this.input_list={},this.element_list={},this.data=new G.a.Manager(this),this._renderForm(),this.data.create(),this.model.get("initial_errors")&&this.errors(this.model.attributes);var e=this.data.checksum();return this.on("change",(function(n){var i=t.input_list[n];if(!i||i.refresh_on_change||t.model.get("always_refresh")){var a=t.data.checksum();a!=e&&(e=a,t.model.get("onchange")())}})),this.on("reset",(function(){r.default.each(t.element_list,(function(t){t.reset()}))})),this},_renderForm:function(){a()(".tooltip").remove();var t=this.model.attributes;this.message=new c.a.UnescapedMessage,this.section=new q.View(this,{inputs:t.inputs}),this.portlet=new l.a.View({icon:t.icon,title:t.title,title_id:t.title_id,operations:!t.hide_operations&&t.operations,cls:t.cls,buttons:t.buttons,collapsible:t.collapsible,collapsed:t.collapsed,onchange_title:t.onchange_title}),this.portlet.append(this.message.$el),this.portlet.append(this.section.$el),this.$el.empty(),t.inputs&&this.$el.append(this.portlet.$el),t.message&&this.message.update({persistent:!0,status:t.status,message:t.message}),Object(f.a)().emit.debug("form-view::initialize()","Completed")}})},,function(t,e,n){"use strict";var i=n(4),a=n.n(i),r=n(3),o=n(6),s=n(117),l=a.a.Model.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/libraries/"),isVisible:function(t){var e=!0;return!t&&this.get("deleted")&&(e=!1),e}}),c=a.a.Collection.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/libraries"),model:l,initialize:function(t){t=t||{}},search:function(t){if(""==t)return this;var e=t.toLowerCase();return this.filter((function(t){return-1!==t.get("name").toLowerCase().indexOf(e)}))},getVisible:function(t,e){return e=e||[],new c(this.filter((function(e){return e.isVisible(t)})))},sortLibraries:function(t,e){this.comparator=s.a.generateComparator(t,e),this.sort()}}),d=a.a.Model.extend({}),u=d.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/libraries/datasets/")}),h=d.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/folders/")}),f=a.a.Collection.extend({model:d}),p=a.a.Model.extend({defaults:{folder:new f,urlRoot:"".concat(Object(r.getAppRoot)(),"api/folders/"),id:"unknown"},search:function(t){if(""==t)return this;var e=t.toLowerCase();return this.get("folder").filter((function(t){return-1!==t.get("name").toLowerCase().indexOf(e)}))},sortFolder:function(t,e){return this.get("folder").comparator=s.a.generateComparator(t,e),this.get("folder").sort(),this.get("folder")},parse:function(t){var e=Object(o.a)();this.get("folder").reset();for(var n=0;n<t.folder_contents.length;n++)if("folder"===t.folder_contents[n].type){var i=new h(t.folder_contents[n]);this.get("folder").add(i)}else if("file"===t.folder_contents[n].type){var a=new u(t.folder_contents[n]);this.get("folder").add(a)}else e.emit.error("Unknown folder item type encountered while parsing response.");return t}}),m=a.a.Model.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/histories/")}),_=a.a.Collection.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/histories/"),initialize:function(t){this.id=t.id},url:function(){return"".concat(this.urlRoot+this.id,"/contents")},model:m}),g=a.a.Model.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/histories/")}),v=a.a.Collection.extend({url:"".concat(Object(r.getAppRoot)(),"api/histories"),model:g}),y=a.a.Model.extend({urlRoot:"".concat(Object(r.getAppRoot)(),"api/remote_files")});e.a={Library:l,Libraries:c,Item:u,Ldda:u,FolderAsModel:h,Folder:f,FolderContainer:p,HistoryItem:m,HistoryContents:_,GalaxyHistory:g,GalaxyHistories:v,Jstree:y}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n(137);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.text="",t.text&&t.text.startsWith("#")&&(t.text=t.text.replace("#","name:")),Object.assign(this,t),Object.defineProperty(this,"style",{enumerable:!0,get:function(){if(this.text.startsWith("name:")){var t=Object(i.a)(this.text),e={"background-color":t.primary,color:t.contrasting,"border-color":t.darker};return Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join(";")}return""}}),Object.defineProperty(this,"label",{enumerable:!0,get:function(){return this.text.startsWith("name:")?this.text.replace("name:","#"):this.text}}),Object.defineProperty(this,"valid",{enumerable:!1,get:function(){return!!this.text.length&&"name:"!=this.text}})}function o(t){var e={};switch(a(t)){case"string":e={text:t};break;case"object":e=Object.assign({},t)}return new r(e)}r.prototype.equals=function(t){return this.text==t.text},r.prototype.toString=function(){return this.text};var s=function(t,e){var n=t.map(o),i=e.map(o);return n.filter((function(t){return!i.some((function(e){return e.equals(t)}))}))}},function(t,e,n){"use strict";n.d(e,"d",(function(){return N})),n.d(e,"a",(function(){return c.a})),n.d(e,"b",(function(){return Y.getAppRoot})),n.d(e,"c",(function(){return i.a}));n(678),n(476),n(527);var i=n(88);n.p="".concat(Object(i.a)().replace(/\/+$/,""),"/static/dist/");var a=n(2139),r=n(251),o=n(89),s=n(6),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Galaxy";return Object(s.b)((function(n){var i=new n(t.options,t.bootstrapped);return i.debug("".concat(e," app")),i}))},c=n(77),d=function(){return null},u=function(t){return Object.keys(t).filter((function(e){return"function"==typeof t[e]})).reduce((function(t,e){return t[e]=d,t}),{})};function h(t){"Galaxy"!=t&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i="window.".concat(t),a=(r=t,1==m()[r]?console:u(console));var r;Object.defineProperty(window,t,{enumerable:!0,configurable:!1,get:function(){var n=void 0;a.groupCollapsed("".concat(i," read")),a.trace();try{n=e?e():window._monitorStorage[t],a.log(n)}catch(t){a.warn("Unable to retrieve"),a.warn(t)}return a.groupEnd(),n},set:function(e){a.groupCollapsed("".concat(i," write..."),String(e)),a.trace();try{n?n(e):window._monitorStorage[t]=e}catch(t){a.log("Unable to set value on window facade"),a.warn(t)}a.groupEnd()}})}(t)}function f(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=m();return e?n[t]=!0:t in n&&delete n[t],function(t){sessionStorage.setItem("global_monitors",JSON.stringify(t))}(n),n}function p(){var t=m();console.log(t)}function m(){var t=sessionStorage.getItem("global_monitors");return t?JSON.parse(t):{}}function _(){var t=Object.keys(m());console.groupCollapsed("monitor init"),console.log("The following global properties are monitored because they were setup in the javascript source manually:",t),console.log("To toggle messages on/off, type toggleGlobalMonitor('Galaxy', true|false) into the console"),console.log("You can set up any other variable by typing installMonitor('a window variable name')"),console.groupEnd(),t.forEach(h),window.installMonitor=h,window.showMonitorToggles=p,window.toggleGlobalMonitor=f}window._monitorStorage=window._monitorStorage||{};var g=n(436),v=n(220),y=n(490),b=function(t,e){if(console.log("initSentry"),e.sentry){var n=e.sentry,i=n.sentry_dsn_public,a=n.email;g.e({dsn:i}),a&&v.e((function(t){t.setUser({email:a})})),t.Sentry=y}},w=n(0),k=n.n(w);function x(){console.log("initTooltips"),k.a.fn.tooltip&&(k()(".unified-panel-header [title]").tooltip({placement:"bottom"}),k()("[title]").tooltip())}function S(){console.log("adjustIframeLinks"),k()("a").click((function(){var t=k()(this),e=window.parent.frames&&window.parent.frames.galaxy_main;if("galaxy_main"==t.attr("target")&&!e){var n=t.attr("href");-1==n.indexOf("?")?n+="?":n+="&",n+="use_panels=True",t.attr("href",n),t.attr("target","_self")}return t}))}function M(){console.log("addIframeClass"),window.self!==window.top&&(console.log(">>> We are in an iframe"),document.body.classList.add("framed"))}var C=n(138),T=n(109),j=n(10);function O(t){console.log("onloadWebhooks"),t.config.enable_webhooks&&T.a.load({type:"onload",callback:function(t){t.each((function(t){var e=t.toJSON();e.activate&&e.script&&j.b.appendScriptStyle(e)}))}})}function L(t,e,n){console.log("replace_big_select_inputs"),k.a.fn.select2?(void 0===t&&(t=20),void 0===e&&(e=3e3),(n=n||k()("select")).each((function(){var n,i,a=k()(this).not("[multiple]"),r=a.find("option").length;r<t||r>e||(a.hasClass("no-autocomplete")||(n=a,i={placeholder:"Click to select",closeOnSelect:!k()(n).is("[MULTIPLE]"),dropdownAutoWidth:!0,containerCssClass:"select2-minwidth"},n.select2(i)))}))):console.warn("No select 2")}var D=n(55),A=n(211);function E(t){console.log("initTours"),A.a.activeGalaxyTourRunner(),t.giveTourWithData=A.a.giveTourWithData}var I=n(74);function P(t){console.log("initModals"),t.modal||(t.modal=new I.a.View)}var Y=n(3);function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Galaxy",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;Object(c.d)(_,b,M,S,P,x,C.a,(function(){return L(20,1500)}),D.a,E,O);var n=Y.config$.pipe(Object(r.a)((function(n){return e(n,t)})));Object(a.a)([Y.config$,n,c.c]).subscribe((function(e){var n=R(e,3),i=n[0],a=n[1],r=n[2];console.group("runInitializations",t,Object(o.a)()),r.forEach((function(t){return t(a,i)})),Object(c.b)(),console.groupEnd()}))}var $=n(72);!0==!$.a.testBuild&&console.log("Configs:",$.a.name,$.a)},function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return h}));var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(1),l=n(11),c=o.a.View.extend(l.a.LoggableMixin).extend({_logNamespace:"list",initialize:function(t){this.expanded=t.expanded||!1,this.log("\t expanded:",this.expanded),this.fxSpeed=void 0!==t.fxSpeed?t.fxSpeed:this.fxSpeed},fxSpeed:"fast",render:function(t){var e=this._buildNewRender();return this._setUpBehaviors(e),this._queueNewRender(e,t),this},_buildNewRender:function(){var t=a()(this.templates.el(this.model.toJSON(),this));return this.expanded&&this.$details(t).replaceWith(this._renderDetails().show()),t},_queueNewRender:function(t,e){e=void 0===e?this.fxSpeed:e;var n=this;0===e?(n._swapNewRender(t),n.trigger("rendered",n)):a()(n).queue("fx",[function(t){n.$el.fadeOut(e,t)},function(e){n._swapNewRender(t),e()},function(t){n.$el.fadeIn(e,t)},function(t){n.trigger("rendered",n),t()}])},_swapNewRender:function(t){return this.$el.empty().attr("class",s.default.isFunction(this.className)?this.className():this.className).append(t.children())},_setUpBehaviors:function(t){(t=t||this.$el).find("[title]").tooltip({placement:"bottom"})},$details:function(t){return(t=t||this.$el).find("> .details")},_renderDetails:function(){var t=a()(this.templates.details(this.model.toJSON(),this));return this._setUpBehaviors(t),t},toggleExpanded:function(t){return(t=void 0===t?!this.expanded:t)?this.expand():this.collapse(),this},expand:function(){var t=this;return t._fetchModelDetails().always((function(){t._expand()}))},_fetchModelDetails:function(){return this.model.hasDetails()?a.a.when():this.model.fetch()},_expand:function(){var t=this,e=t._renderDetails();t.$details().replaceWith(e),t.expanded=!0,t.$details().slideDown(t.fxSpeed,(function(){t.trigger("expanded",t)}))},collapse:function(){this.debug("".concat(this,"(ExpandableView).collapse"));var t=this;t.expanded=!1,this.$details().slideUp(t.fxSpeed,(function(){t.trigger("collapsed",t)}))}}),d=c.extend(l.a.mixin(l.a.SelectableViewMixin,l.a.DraggableViewMixin,{tagName:"div",className:"list-item",initialize:function(t){c.prototype.initialize.call(this,t),l.a.SelectableViewMixin.initialize.call(this,t),l.a.DraggableViewMixin.initialize.call(this,t),this._setUpListeners()},_setUpListeners:function(){return this.on("selectable",(function(t){t?this.$(".primary-actions").hide():this.$(".primary-actions").show()}),this),this},_buildNewRender:function(){var t=c.prototype._buildNewRender.call(this);return t.children(".warnings").replaceWith(this._renderWarnings()),t.children(".title-bar").replaceWith(this._renderTitleBar()),t.children(".primary-actions").append(this._renderPrimaryActions()),t.find("> .title-bar .subtitle").replaceWith(this._renderSubtitle()),t},_swapNewRender:function(t){return c.prototype._swapNewRender.call(this,t),this.selectable&&this.showSelector(0),this.draggable&&this.draggableOn(),this.$el},_renderWarnings:function(){var t=this,e=a()('<div class="warnings"></div>'),n=t.model.toJSON();return s.default.each(t.templates.warnings,(function(i){e.append(a()(i(n,t)))})),e},_renderTitleBar:function(){return a()(this.templates.titleBar(this.model.toJSON(),this))},_renderPrimaryActions:function(){return[]},_renderSubtitle:function(){return a()(this.templates.subtitle(this.model.toJSON(),this))},events:{"click .title-bar":"_clickTitleBar","keydown .title-bar":"_keyDownTitleBar","click .selector":"toggleSelect"},_clickTitleBar:function(t){t.stopPropagation(),t.altKey?(this.toggleSelect(t),this.selectable||this.showSelector()):this.toggleExpanded()},_keyDownTitleBar:function(t){return!t||"keydown"!==t.type||32!==t.keyCode&&13!==t.keyCode||(this.toggleExpanded(),t.stopPropagation(),!1)},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"ListItemView(".concat(t,")")}}));d.prototype.templates={el:l.a.wrapTemplate(['<div class="list-element">','<div class="warnings"></div>','<div class="selector">','<span class="fa fa-2x fa-square-o"></span>',"</div>",'<div class="primary-actions"></div>','<div class="title-bar"></div>','<div class="details"></div>',"</div>"]),warnings:{},titleBar:l.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element"),subtitle:l.a.wrapTemplate(['<div class="subtitle"></div>']),details:l.a.wrapTemplate(['<div class="details"></div>'])};var u,h=d.extend({foldoutStyle:"foldout",foldoutPanelClass:null,initialize:function(t){"drilldown"===this.foldoutStyle&&(this.expanded=!1),this.foldoutStyle=t.foldoutStyle||this.foldoutStyle,this.foldoutPanelClass=t.foldoutPanelClass||this.foldoutPanelClass,d.prototype.initialize.call(this,t),this.foldout=this._createFoldoutPanel()},_renderDetails:function(){if("drilldown"===this.foldoutStyle)return a()();var t=d.prototype._renderDetails.call(this);return this._attachFoldout(this.foldout,t)},_createFoldoutPanel:function(){var t=this.model,e=this._getFoldoutPanelClass(t),n=this._getFoldoutPanelOptions(t);return new e(s.default.extend(n,{model:t}))},_getFoldoutPanelClass:function(){return this.foldoutPanelClass},_getFoldoutPanelOptions:function(){return{foldoutStyle:this.foldoutStyle,fxSpeed:this.fxSpeed}},_attachFoldout:function(t,e){return e=e||this.$("> .details"),this.foldout=t.render(0),t.$("> .controls").hide(),e.append(t.$el)},expand:function(){var t=this;return t._fetchModelDetails().always((function(){"foldout"===t.foldoutStyle?t._expand():"drilldown"===t.foldoutStyle&&t._expandByDrilldown()}))},_expandByDrilldown:function(){var t=this;t.listenTo(t.foldout,"close",(function(){t.trigger("collapsed:drilldown",t,t.foldout)})),t.trigger("expanded:drilldown",t,t.foldout)}});h.prototype.templates=(u=l.a.wrapTemplate(['<div class="details">',"</div>"],"collection"),s.default.extend({},d.prototype.templates,{details:u})),e.c={ExpandableView:c,ListItemView:d,FoldoutListItemView:h}},function(t,e,n){"use strict";n.d(e,"d",(function(){return S})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return T})),n.d(e,"a",(function(){return O}));var i=n(0),a=n.n(i),r=n(7),o=n.n(r),s=n(8),l=n(140),c=n(103),d=n(194),u=n(232);function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.values={},this.multiple=e.multiple||!1}var e,n,i;return e=t,(n=[{key:"add",value:function(t){this.multiple||(this.values={});var e=t&&t.id;if(!e)throw"Invalid record with no <id>.";this.values[e]?delete this.values[e]:this.values[e]=t}},{key:"count",value:function(){return Object.keys(this.values).length}},{key:"exists",value:function(t){return!!this.values[t]}},{key:"finalize",value:function(){var t=[];return Object.values(this.values).forEach((function(e){t.push(e)})),t.length>0&&!this.multiple&&(t=t[0]),t}}])&&h(e.prototype,n),i&&h(e,i),t}();function p(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var _={mixins:[c.a],props:{multiple:{type:Boolean,default:!1},mode:{type:String,default:"file",validator:function(t){return["file","directory"].includes(t)}},requireWritable:{type:Boolean,default:!1}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,undoShow:!1,hasValue:!1,showTime:!0,showDetails:!0}},created:function(){this.services=new u.a,this.urlTracker=new d.a(""),this.model=new f({multiple:this.multiple}),this.load()},computed:{fileMode:function(){return"file"==this.mode}},methods:{formatRows:function(){var t,e=p(this.items);try{for(e.s();!(t=e.n()).done;){var n=t.value,i="active";!n.isLeaf&&this.fileMode||(i=this.model.exists(n.id)?"success":"default"),s.default.set(n,"_rowVariant",i)}}catch(t){e.e(t)}finally{e.f()}},clicked:function(t){t.isLeaf||!this.fileMode?(this.model.add(t),this.hasValue=this.model.count()>0,this.multiple?this.formatRows():this.finalize()):this.open(t)},open:function(t){this.load(t.url)},finalize:function(){var t=this.model.finalize();this.modalShow=!1,this.callback(t)},load:function(t){var e=this;t=this.urlTracker.getUrl(t),this.filter=null,this.optionsShow=!1,this.undoShow=!this.urlTracker.atRoot(),this.urlTracker.atRoot()?this.services.getFileSources().then((function(t){t=t.filter((function(t){return!e.requireWritable||t.writable})).map((function(t){return{id:t.id,label:t.label,details:t.doc,isLeaf:!1,url:t.uri_root,labelTitle:t.uri_root}})),e.items=t,e.formatRows(),e.optionsShow=!0,e.showTime=!1,e.showDetails=!0})).catch((function(t){e.errorMessage=t})):this.services.list(t).then((function(t){t=e.fileMode?t.map((function(t){var e=t.class;return{id:t.uri,label:t.name,time:t.ctime,isLeaf:"File"==e,size:t.size,url:t.uri,labelTitle:t.uri}})):t.filter((function(t){return"Directory"==t.class})).map((function(t){return{id:t.uri,label:t.name,time:t.ctime,isLeaf:!1,size:t.size,url:t.uri,labelTitle:t.uri}})),e.items=t,e.formatRows(),e.optionsShow=!0,e.showTime=!0,e.showDetails=!1})).catch((function(t){e.errorMessage=t}))}}},g=n(5),v=Object(g.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("selection-dialog",{attrs:{"error-message":t.errorMessage,"options-show":t.optionsShow,"modal-show":t.modalShow,"hide-modal":function(){return t.modalShow=!1}},scopedSlots:t._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[t.optionsShow?n("data-dialog-table",{attrs:{items:t.items,multiple:t.multiple,filter:t.filter,"show-details":t.showDetails,"show-time":t.showTime,"show-navigate":"directory"==t.mode},on:{clicked:t.clicked,open:t.open,load:t.load}}):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[t.undoShow?n("b-btn",{staticClass:"float-left",attrs:{size:"sm"},on:{click:function(e){return t.load()}}},[n("div",{staticClass:"fa fa-caret-left mr-1"}),t._v("\n            Back\n        ")]):t._e(),t._v(" "),t.multiple?n("b-btn",{staticClass:"float-right ml-1",attrs:{size:"sm",variant:"primary",disabled:!t.hasValue},on:{click:t.finalize}},[t._v("\n            Ok\n        ")]):t._e()]},proxy:!0}])})}),[],!1,null,null,null).exports,y=(n(203),n(166)),b=n(6),w=n(3);function k(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){k(r,i,a,o,s,"next",t)}function s(t){k(r,i,a,o,s,"throw",t)}o(void 0)}))}}function S(){return M.apply(this,arguments)}function M(){return(M=x(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=Object(b.a)()).currHistoryPanel||!e.currHistoryPanel.model.id){t.next=5;break}return t.abrupt("return",e.currHistoryPanel.model.id);case 5:return t.abrupt("return",o.a.get("".concat(Object(w.getAppRoot)(),"history/current_history_json")).then((function(t){return t.data.id})).catch((function(t){return console.error("Error fetching current user history:",t),null})));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S().then((function(n){Object.assign(e,{callback:t,history:n}),e.new?Object(y.b)(e):j(l.a,e)}))}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(e,{callback:t}),j(v,e)}function j(t,e){var n=s.default.extend(t),i=document.createElement("div");a()("body").append(i),new n({propsData:e}).$mount(i)}function O(t){var e=Object(b.a)().currHistoryPanel;function n(){return(n=x(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.history_id){e.next=2;break}return e.abrupt("return",S());case 2:return e.abrupt("return",t.history_id);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().then((function(n){a.a.uploadpost({url:"".concat(Object(w.getAppRoot)(),"api/tools"),success:function(n){e&&e.refreshContents(),t.success&&t.success(n)},error:t.error,data:{payload:{tool_id:"upload1",history_id:n,inputs:JSON.stringify({"files_0|type":"upload_dataset","files_0|NAME":t.file_name,"files_0|space_to_tab":t.space_to_tab?"Yes":null,"files_0|to_posix_lines":t.to_posix_lines?"Yes":null,"files_0|dbkey":t.genome||"?","files_0|file_type":t.extension||"auto","files_0|url_paste":t.url_paste})}}})}))}},,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(55),c=s.a.Model.extend({defaults:{title:"",icon_class:"",on_click:null,menu_options:null,is_menu_button:!0,id:null,href:null,target:null,enabled:!0,visible:!0,tooltip_config:{}}}),d=s.a.View.extend({initialize:function(){this.model.attributes.tooltip_config={placement:"bottom"},this.model.bind("change",this.render,this)},render:function(){this.$el.tooltip("hide");var t=this.template(this.model.toJSON());return t.tooltip(this.model.get("tooltip_config")),this.$el.replaceWith(t),this.setElement(t),this},events:{click:"click"},click:function(t){return!r.default.isFunction(this.model.get("on_click"))||(this.model.get("on_click")(t),!1)},template:function(t){var e='title="'.concat(t.title,'" class="icon-button');return t.is_menu_button&&(e+=" menu-button"),e+=" ".concat(t.icon_class),t.enabled||(e+="_disabled"),e+='"',t.id&&(e+=' id="'.concat(t.id,'"')),e+=' href="'.concat(t.href,'"'),t.target&&(e+=' target="'.concat(t.target,'"')),t.visible||(e+=' style="display: none;"'),e=t.enabled?"<a ".concat(e,"/>"):"<span ".concat(e,"/>"),a()(e)}}),u=s.a.Collection.extend({model:c}),h=s.a.View.extend({tagName:"div",initialize:function(){this.render()},render:function(){var t=this;return this.collection.each((function(e){var n=a()("<a/>").attr("href","javascript:void(0)").attr("title",e.attributes.title).addClass("icon-button menu-button").addClass(e.attributes.icon_class).appendTo(t.$el).click(e.attributes.on_click);e.attributes.tooltip_config&&n.tooltip(e.attributes.tooltip_config);var i=e.get("options");i&&Object(l.b)(n,i)})),this}});e.a={IconButton:c,IconButtonView:d,IconButtonCollection:u,IconButtonMenuView:h,create_icon_buttons_menu:function(t,e){e||(e={});var n=new u(r.default.map(t,(function(t){return new c(r.default.extend(t,e))})));return new h({collection:n})}}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(10),o=n(4),s=n.n(o),l=s.a.View.extend({initialize:function(t){this.model=t&&t.model||new s.a.Model({id:r.b.uid(),title:"",icon:"",cls:"btn btn-secondary",wait:!1,wait_text:"Sending...",wait_cls:"btn btn-info",disabled:!1,percentage:-1,visible:!0}).set(t),this.setElement(a()("<button/>").attr("type","button").append(this.$icon=a()("<i/>")).append(this.$title=a()("<span/>")).append(this.$progress=a()("<div/>").append(this.$progress_bar=a()("<div/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("ui-button-default").addClass(e.disabled&&"disabled").attr("id",e.id).attr("disabled",e.disabled).css("display",e.visible?"inline-block":"none").off("click").on("click",(function(){a()(".tooltip").hide(),e.onclick&&!t.disabled&&e.onclick()})).tooltip({title:e.tooltip||"",placement:"bottom"}),this.$progress.addClass("progress").css("display",-1!==e.percentage?"block":"none"),this.$progress_bar.addClass("progress-bar").css({width:"".concat(e.percentage,"%")}),this.$icon.removeClass().addClass("icon fa"),this.$title.removeClass().addClass("title"),e.wait?(this.$el.addClass(e.wait_cls).prop("disabled",!0),this.$icon.addClass("fa-spinner fa-spin mr-1"),this.$title.html(e.wait_text)):(this.$el.addClass(e.cls),this.$icon.addClass(e.icon),e.title&&(this.$title.html(e.title),e.icon&&this.$icon.addClass("mr-1")))},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},setIcon:function(t){this.model.set("icon",t)}}),c=l.extend({initialize:function(t){this.model=t&&t.model||new s.a.Model({id:r.b.uid(),visible:!0,title:"",icon:"",cls:""}).set(t),this.setElement(a()("<a/>").append(this.$icon=a()("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var t=this.model.attributes;this.$el.removeClass().addClass(t.cls).attr({id:t.id,href:t.href||"javascript:void(0)",title:t.title,target:t.target||"_top",disabled:t.disabled}).css("display",t.visible?"inline-block":"none").tooltip({placement:"bottom"}).off("click").on("click",(function(){t.onclick&&!t.disabled&&t.onclick()})),this.$icon.removeClass().addClass(t.icon)}}),d=s.a.View.extend({initialize:function(t){this.model=t&&t.model||new s.a.Model({id:r.b.uid(),title:"Select/Unselect all",icons:["fa-square-o","fa-minus-square-o","fa-check-square-o"],value:0,visible:!0,onchange:function(){}}).set(t),this.setElement(a()("<div/>").addClass("mb-2").append(this.$icon=a()("<span/>")).append(this.$title=a()("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(t){var e=this;t=this.model.attributes,this.$el.addClass("ui-button-check").css("display",t.visible?"inline-block":"none").off("click").on("click",(function(){e.model.set("value",0===e.model.get("value")?2:0),t.onclick&&t.onclick()})),this.$title.html(t.title),this.$icon.removeClass().addClass("icon fa mr-1").addClass(t.icons[t.value])},value:function(t,e){return void 0!==t&&(e&&0!==t&&(t=t!==e?1:2),this.model.set("value",t),this.model.get("onchange")(this.model.get("value"))),this.model.get("value")}}),u=s.a.View.extend({$menu:null,initialize:function(t){this.model=t&&t.model||new s.a.Model({id:"",title:"",pull:"right",icon:null,onclick:null,cls:"btn btn-secondary float-right",tooltip:"",target:"",href:"",onunload:null,visible:!0,tag:""}).set(t),this.collection=new s.a.Collection,this.setElement(a()("<div/>").append(this.$root=a()("<button/>").append(this.$icon=a()("<i/>")).append(this.$title=a()("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"change add remove reset",this.render,this),this.render()},render:function(){var t=this,e=this.model.attributes;this.$el.removeClass().addClass("dropdown").attr("id",e.id).css({display:e.visible&&this.collection.where({visible:!0}).length>0?"block":"none"}),this.$root.addClass(e.cls).attr("data-toggle","dropdown").tooltip({title:e.tooltip||"",placement:"bottom"}).off("click").on("click",(function(t){a()(".tooltip").hide(),t.preventDefault(),e.onclick&&e.onclick()})),this.$icon.removeClass().addClass("icon fa").addClass(e.icon),e.title&&this.$title.removeClass().addClass("title ml-1").html(e.title),this.$menu&&this.$menu.remove(),this.collection.length>0&&(this.$menu=a()("<div/>").addClass("menu dropdown-menu dropdown-menu-right").addClass("pull-".concat(this.model.get("pull"))).attr("role","menu"),this.$el.append(this.$menu)),this.collection.each((function(e){var n=e.attributes;if(n.visible){var i=a()("<a/>").addClass("dropdown-item").attr({href:n.href,target:n.target}).append(a()("<i/>").addClass("fa mr-2").addClass(n.icon).css("display",n.icon?"inline-block":"none")).append(n.title).on("click",(function(t){n.onclick&&(t.preventDefault(),n.onclick())}));t.$menu.append(i),n.divider&&t.$menu.append(a()("<div/>").addClass("divider"))}}))},addMenu:function(t){this.collection.add(r.b.merge(t,{title:"",target:"",href:"",onclick:null,divider:!1,visible:!0,icon:null,cls:"button-menu btn-group"}))}});e.a={Button:l,ButtonLink:c,ButtonCheck:d,ButtonMenu:u}},function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return h})),n.d(e,"e",(function(){return p})),n.d(e,"d",(function(){return _})),n.d(e,"f",(function(){return v})),n.d(e,"b",(function(){return b}));var i=n(7),a=n.n(i),r=n(21),o=n(3),s=n(95);function l(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){l(r,i,a,o,s,"next",t)}function s(t){l(r,i,a,o,s,"throw",t)}o(void 0)}))}}function d(t){return u.apply(this,arguments)}function u(){return(u=c(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.get("".concat(Object(o.getAppRoot)(),"api/workflows/").concat(e,"/versions"));case 3:return n=t.sent,i=n.data,t.abrupt("return",i);case 8:t.prev=8,t.t0=t.catch(0),Object(r.b)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function h(t){return f.apply(this,arguments)}function f(){return(f=c(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.post("".concat(Object(o.getAppRoot)(),"api/workflows/build_module"),e);case 3:return n=t.sent,i=n.data,t.abrupt("return",i);case 8:t.prev=8,t.t0=t.catch(0),Object(r.b)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function p(t,e){return m.apply(this,arguments)}function m(){return(m=c(regeneratorRuntime.mark((function t(e,n){var i,s,l,c,d=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=d.length>2&&void 0!==d[2]&&d[2],t.prev=1,s={actions:n,style:"editor",dry_run:i},t.next=5,a.a.put("".concat(Object(o.getAppRoot)(),"api/workflows/").concat(e,"/refactor"),s);case 5:return l=t.sent,c=l.data,t.abrupt("return",c);case 10:t.prev=10,t.t0=t.catch(1),Object(r.b)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function _(t,e,n,i){return g.apply(this,arguments)}function g(){return(g=c(regeneratorRuntime.mark((function t(e,n,i,l){var c,d,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=Number.isInteger(i)?"version=".concat(i):"",t.next=4,a.a.get("".concat(Object(o.getAppRoot)(),"workflow/load_workflow?_=true&id=").concat(n,"&").concat(c));case 4:return d=t.sent,u=d.data,Object(s.a)(e,u,l),t.abrupt("return",u);case 10:t.prev=10,t.t0=t.catch(0),console.debug(t.t0),Object(r.b)(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function v(t){return y.apply(this,arguments)}function y(){return(y=c(regeneratorRuntime.mark((function t(e){var n,i,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasChanges){t.next=19;break}return t.prev=1,n={workflow:Object(s.b)(e),from_tool_form:!0},t.next=5,a.a.put("".concat(Object(o.getAppRoot)(),"api/workflows/").concat(e.id),n);case 5:return i=t.sent,l=i.data,e.name=l.name,e.hasChanges=!1,e.requiresReindex=!1,e.stored=!0,e.version=l.version,e.annotation=l.annotation,t.abrupt("return",l);case 16:t.prev=16,t.t0=t.catch(1),Object(r.b)(t.t0);case 19:return t.abrupt("return",{});case 20:case"end":return t.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}function b(t){return w.apply(this,arguments)}function w(){return(w=c(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.post("".concat(Object(o.getAppRoot)(),"api/workflows/get_tool_predictions"),e);case 3:return n=t.sent,i=n.data,t.abrupt("return",i);case 8:t.prev=8,t.t0=t.catch(0),Object(r.b)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}},function(t,e,n){"use strict";var i=n(1);e.a={get:function(t,e){e=e||window.location.search.substr(1);var n=new RegExp("".concat(t,"=([^&#$]+)"),"g"),a=e.match(n);if(a&&a.length)return 1===(a=i.default.map(a,(function(e){return decodeURIComponent(e.substr(t.length+1).replace(/\+/g," "))}))).length?a[0]:a},parse:function(t){if(!t)return{};var e={};return t.split("&").forEach((function(t){var n=t.split("=");e[n[0]]=decodeURI(n[1])})),e}}},,function(t,e,n){var i,a,r;
/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */a="undefined"!=typeof window?window:this,r=function(n,a){var r=[],o=n.document,s=r.slice,l=r.concat,c=r.push,d=r.indexOf,u={},h=u.toString,f=u.hasOwnProperty,p={},m=function(t,e){return new m.fn.init(t,e)},_=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g=/^-ms-/,v=/-([\da-z])/gi,y=function(t,e){return e.toUpperCase()};function b(t){var e=!!t&&"length"in t&&t.length,n=m.type(t);return"function"!==n&&!m.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}m.fn=m.prototype={jquery:"2.2.4",constructor:m,selector:"",length:0,toArray:function(){return s.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:s.call(this)},pushStack:function(t){var e=m.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return m.each(this,t)},map:function(t){return this.pushStack(m.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},m.extend=m.fn.extend=function(){var t,e,n,i,a,r,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||m.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=o[e],o!==(i=t[e])&&(c&&i&&(m.isPlainObject(i)||(a=m.isArray(i)))?(a?(a=!1,r=n&&m.isArray(n)?n:[]):r=n&&m.isPlainObject(n)?n:{},o[e]=m.extend(c,r,i)):void 0!==i&&(o[e]=i));return o},m.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===m.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!m.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==m.type(t)||t.nodeType||m.isWindow(t))return!1;if(t.constructor&&!f.call(t,"constructor")&&!f.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||f.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[h.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=m.trim(t))&&(1===t.indexOf("use strict")?((e=o.createElement("script")).text=t,o.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(g,"ms-").replace(v,y)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,i=0;if(b(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(_,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(b(Object(t))?m.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:d.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,a=t.length;i<n;i++)t[a++]=e[i];return t.length=a,t},grep:function(t,e,n){for(var i=[],a=0,r=t.length,o=!n;a<r;a++)!e(t[a],a)!==o&&i.push(t[a]);return i},map:function(t,e,n){var i,a,r=0,o=[];if(b(t))for(i=t.length;r<i;r++)null!=(a=e(t[r],r,n))&&o.push(a);else for(r in t)null!=(a=e(t[r],r,n))&&o.push(a);return l.apply([],o)},guid:1,proxy:function(t,e){var n,i,a;if("string"==typeof e&&(n=t[e],e=t,t=n),m.isFunction(t))return i=s.call(arguments,2),(a=function(){return t.apply(e||this,i.concat(s.call(arguments)))}).guid=t.guid=t.guid||m.guid++,a},now:Date.now,support:p}),"function"==typeof Symbol&&(m.fn[Symbol.iterator]=r[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){u["[object "+e+"]"]=e.toLowerCase()}));var w=
/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){var e,n,i,a,r,o,s,l,c,d,u,h,f,p,m,_,g,v,y,b="sizzle"+1*new Date,w=t.document,k=0,x=0,S=rt(),M=rt(),C=rt(),T=function(t,e){return t===e&&(u=!0),0},j=1<<31,O={}.hasOwnProperty,L=[],D=L.pop,A=L.push,E=L.push,I=L.slice,P=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},Y="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+R+"*("+H+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+R+"*\\]",$=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",F=new RegExp(R+"+","g"),W=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),z=new RegExp("^"+R+"*,"+R+"*"),U=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),V=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),B=new RegExp($),q=new RegExp("^"+H+"$"),G={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+Y+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,tt=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),nt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},it=function(){h()};try{E.apply(L=I.call(w.childNodes),w.childNodes),L[w.childNodes.length].nodeType}catch(t){E={apply:L.length?function(t,e){A.apply(t,I.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,a){var r,s,c,d,u,p,g,v,k=e&&e.ownerDocument,x=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return i;if(!a&&((e?e.ownerDocument||e:w)!==f&&h(e),e=e||f,m)){if(11!==x&&(p=Q.exec(t)))if(r=p[1]){if(9===x){if(!(c=e.getElementById(r)))return i;if(c.id===r)return i.push(c),i}else if(k&&(c=k.getElementById(r))&&y(e,c)&&c.id===r)return i.push(c),i}else{if(p[2])return E.apply(i,e.getElementsByTagName(t)),i;if((r=p[3])&&n.getElementsByClassName&&e.getElementsByClassName)return E.apply(i,e.getElementsByClassName(r)),i}if(n.qsa&&!C[t+" "]&&(!_||!_.test(t))){if(1!==x)k=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((d=e.getAttribute("id"))?d=d.replace(tt,"\\$&"):e.setAttribute("id",d=b),s=(g=o(t)).length,u=q.test(d)?"#"+d:"[id='"+d+"']";s--;)g[s]=u+" "+mt(g[s]);v=g.join(","),k=Z.test(t)&&ft(e.parentNode)||e}if(v)try{return E.apply(i,k.querySelectorAll(v)),i}catch(t){}finally{d===b&&e.removeAttribute("id")}}}return l(t.replace(W,"$1"),e,i,a)}function rt(){var t=[];return function e(n,a){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=a}}function ot(t){return t[b]=!0,t}function st(t){var e=f.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var n=t.split("|"),a=n.length;a--;)i.attrHandle[n[a]]=e}function ct(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||j)-(~t.sourceIndex||j);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ut(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ht(t){return ot((function(e){return e=+e,ot((function(n,i){for(var a,r=t([],n.length,e),o=r.length;o--;)n[a=r[o]]&&(n[a]=!(i[a]=n[a]))}))}))}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},r=at.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},h=at.setDocument=function(t){var e,a,o=t?t.ownerDocument||t:w;return o!==f&&9===o.nodeType&&o.documentElement?(p=(f=o).documentElement,m=!r(f),(a=f.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",it,!1):a.attachEvent&&a.attachEvent("onunload",it)),n.attributes=st((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=st((function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=X.test(f.getElementsByClassName),n.getById=st((function(t){return p.appendChild(t).id=b,!f.getElementsByName||!f.getElementsByName(b).length})),n.getById?(i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}},i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}}):(delete i.find.ID,i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],a=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[a++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},g=[],_=[],(n.qsa=X.test(f.querySelectorAll))&&(st((function(t){p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||_.push("\\["+R+"*(?:value|"+Y+")"),t.querySelectorAll("[id~="+b+"-]").length||_.push("~="),t.querySelectorAll(":checked").length||_.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||_.push(".#.+[+~]")})),st((function(t){var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&_.push("name"+R+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),_.push(",.*:")}))),(n.matchesSelector=X.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&st((function(t){n.disconnectedMatch=v.call(t,"div"),v.call(t,"[s!='']:x"),g.push("!=",$)})),_=_.length&&new RegExp(_.join("|")),g=g.length&&new RegExp(g.join("|")),e=X.test(p.compareDocumentPosition),y=e||X.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return u=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===f||t.ownerDocument===w&&y(w,t)?-1:e===f||e.ownerDocument===w&&y(w,e)?1:d?P(d,t)-P(d,e):0:4&i?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,i=0,a=t.parentNode,r=e.parentNode,o=[t],s=[e];if(!a||!r)return t===f?-1:e===f?1:a?-1:r?1:d?P(d,t)-P(d,e):0;if(a===r)return ct(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;o[i]===s[i];)i++;return i?ct(o[i],s[i]):o[i]===w?-1:s[i]===w?1:0},f):f},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&h(t),e=e.replace(V,"='$1']"),n.matchesSelector&&m&&!C[e+" "]&&(!g||!g.test(e))&&(!_||!_.test(e)))try{var i=v.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return at(e,f,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!==f&&h(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==f&&h(t);var a=i.attrHandle[e.toLowerCase()],r=a&&O.call(i.attrHandle,e.toLowerCase())?a(t,e,!m):void 0;return void 0!==r?r:n.attributes||!m?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],a=0,r=0;if(u=!n.detectDuplicates,d=!n.sortStable&&t.slice(0),t.sort(T),u){for(;e=t[r++];)e===t[r]&&(a=i.push(r));for(;a--;)t.splice(i[a],1)}return d=null,t},a=at.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=a(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=a(e);return n},(i=at.selectors={cacheLength:50,createPseudo:ot,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&B.test(n)&&(e=o(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&S(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var a=at.attr(i,t);return null==a?"!="===e:!e||(a+="","="===e?a===n:"!="===e?a!==n:"^="===e?n&&0===a.indexOf(n):"*="===e?n&&a.indexOf(n)>-1:"$="===e?n&&a.slice(-n.length)===n:"~="===e?(" "+a.replace(F," ")+" ").indexOf(n)>-1:"|="===e&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,a){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===a?function(t){return!!t.parentNode}:function(e,n,l){var c,d,u,h,f,p,m=r!==o?"nextSibling":"previousSibling",_=e.parentNode,g=s&&e.nodeName.toLowerCase(),v=!l&&!s,y=!1;if(_){if(r){for(;m;){for(h=e;h=h[m];)if(s?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?_.firstChild:_.lastChild],o&&v){for(y=(f=(c=(d=(u=(h=_)[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]||[])[0]===k&&c[1])&&c[2],h=f&&_.childNodes[f];h=++f&&h&&h[m]||(y=f=0)||p.pop();)if(1===h.nodeType&&++y&&h===e){d[t]=[k,f,y];break}}else if(v&&(y=f=(c=(d=(u=(h=e)[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]||[])[0]===k&&c[1]),!1===y)for(;(h=++f&&h&&h[m]||(y=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++y||(v&&((d=(u=h[b]||(h[b]={}))[h.uniqueID]||(u[h.uniqueID]={}))[t]=[k,y]),h!==e)););return(y-=a)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,e){var n,a=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return a[b]?a(e):a.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ot((function(t,n){for(var i,r=a(t,e),o=r.length;o--;)t[i=P(t,r[o])]=!(n[i]=r[o])})):function(t){return a(t,0,n)}):a}},pseudos:{not:ot((function(t){var e=[],n=[],i=s(t.replace(W,"$1"));return i[b]?ot((function(t,e,n,a){for(var r,o=i(t,null,a,[]),s=t.length;s--;)(r=o[s])&&(t[s]=!(e[s]=r))})):function(t,a,r){return e[0]=t,i(e,null,r,n),e[0]=null,!n.pop()}})),has:ot((function(t){return function(e){return at(t,e).length>0}})),contains:ot((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||e.innerText||a(e)).indexOf(t)>-1}})),lang:ot((function(t){return q.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ht((function(){return[0]})),last:ht((function(t,e){return[e-1]})),eq:ht((function(t,e,n){return[n<0?n+e:n]})),even:ht((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:ht((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:ht((function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t})),gt:ht((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ut(e);function pt(){}function mt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function _t(t,e,n){var i=e.dir,a=n&&"parentNode"===i,r=x++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r)}:function(e,n,o){var s,l,c,d=[k,r];if(o){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||a){if((s=(l=(c=e[b]||(e[b]={}))[e.uniqueID]||(c[e.uniqueID]={}))[i])&&s[0]===k&&s[1]===r)return d[2]=s[2];if(l[i]=d,d[2]=t(e,n,o))return!0}}}function gt(t){return t.length>1?function(e,n,i){for(var a=t.length;a--;)if(!t[a](e,n,i))return!1;return!0}:t[0]}function vt(t,e,n,i,a){for(var r,o=[],s=0,l=t.length,c=null!=e;s<l;s++)(r=t[s])&&(n&&!n(r,i,a)||(o.push(r),c&&e.push(s)));return o}function yt(t,e,n,i,a,r){return i&&!i[b]&&(i=yt(i)),a&&!a[b]&&(a=yt(a,r)),ot((function(r,o,s,l){var c,d,u,h=[],f=[],p=o.length,m=r||function(t,e,n){for(var i=0,a=e.length;i<a;i++)at(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),_=!t||!r&&e?m:vt(m,h,t,s,l),g=n?a||(r?t:p||i)?[]:o:_;if(n&&n(_,g,s,l),i)for(c=vt(g,f),i(c,[],s,l),d=c.length;d--;)(u=c[d])&&(g[f[d]]=!(_[f[d]]=u));if(r){if(a||t){if(a){for(c=[],d=g.length;d--;)(u=g[d])&&c.push(_[d]=u);a(null,g=[],c,l)}for(d=g.length;d--;)(u=g[d])&&(c=a?P(r,u):h[d])>-1&&(r[c]=!(o[c]=u))}}else g=vt(g===o?g.splice(p,g.length):g),a?a(null,o,g,l):E.apply(o,g)}))}function bt(t){for(var e,n,a,r=t.length,o=i.relative[t[0].type],s=o||i.relative[" "],l=o?1:0,d=_t((function(t){return t===e}),s,!0),u=_t((function(t){return P(e,t)>-1}),s,!0),h=[function(t,n,i){var a=!o&&(i||n!==c)||((e=n).nodeType?d(t,n,i):u(t,n,i));return e=null,a}];l<r;l++)if(n=i.relative[t[l].type])h=[_t(gt(h),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[b]){for(a=++l;a<r&&!i.relative[t[a].type];a++);return yt(l>1&&gt(h),l>1&&mt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(W,"$1"),n,l<a&&bt(t.slice(l,a)),a<r&&bt(t=t.slice(a)),a<r&&mt(t))}h.push(n)}return gt(h)}return pt.prototype=i.filters=i.pseudos,i.setFilters=new pt,o=at.tokenize=function(t,e){var n,a,r,o,s,l,c,d=M[t+" "];if(d)return e?0:d.slice(0);for(s=t,l=[],c=i.preFilter;s;){for(o in n&&!(a=z.exec(s))||(a&&(s=s.slice(a[0].length)||s),l.push(r=[])),n=!1,(a=U.exec(s))&&(n=a.shift(),r.push({value:n,type:a[0].replace(W," ")}),s=s.slice(n.length)),i.filter)!(a=G[o].exec(s))||c[o]&&!(a=c[o](a))||(n=a.shift(),r.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return e?s.length:s?at.error(t):M(t,l).slice(0)},s=at.compile=function(t,e){var n,a=[],r=[],s=C[t+" "];if(!s){for(e||(e=o(t)),n=e.length;n--;)(s=bt(e[n]))[b]?a.push(s):r.push(s);(s=C(t,function(t,e){var n=e.length>0,a=t.length>0,r=function(r,o,s,l,d){var u,p,_,g=0,v="0",y=r&&[],b=[],w=c,x=r||a&&i.find.TAG("*",d),S=k+=null==w?1:Math.random()||.1,M=x.length;for(d&&(c=o===f||o||d);v!==M&&null!=(u=x[v]);v++){if(a&&u){for(p=0,o||u.ownerDocument===f||(h(u),s=!m);_=t[p++];)if(_(u,o||f,s)){l.push(u);break}d&&(k=S)}n&&((u=!_&&u)&&g--,r&&y.push(u))}if(g+=v,n&&v!==g){for(p=0;_=e[p++];)_(y,b,o,s);if(r){if(g>0)for(;v--;)y[v]||b[v]||(b[v]=D.call(l));b=vt(b)}E.apply(l,b),d&&!r&&b.length>0&&g+e.length>1&&at.uniqueSort(l)}return d&&(k=S,c=w),y};return n?ot(r):r}(r,a))).selector=t}return s},l=at.select=function(t,e,a,r){var l,c,d,u,h,f="function"==typeof t&&t,p=!r&&o(t=f.selector||t);if(a=a||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(d=c[0]).type&&n.getById&&9===e.nodeType&&m&&i.relative[c[1].type]){if(!(e=(i.find.ID(d.matches[0].replace(et,nt),e)||[])[0]))return a;f&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(l=G.needsContext.test(t)?0:c.length;l--&&(d=c[l],!i.relative[u=d.type]);)if((h=i.find[u])&&(r=h(d.matches[0].replace(et,nt),Z.test(c[0].type)&&ft(e.parentNode)||e))){if(c.splice(l,1),!(t=r.length&&mt(c)))return E.apply(a,r),a;break}}return(f||s(t,p))(r,e,!m,a,!e||Z.test(t)&&ft(e.parentNode)||e),a},n.sortStable=b.split("").sort(T).join("")===b,n.detectDuplicates=!!u,h(),n.sortDetached=st((function(t){return 1&t.compareDocumentPosition(f.createElement("div"))})),st((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||lt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&st((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||lt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),st((function(t){return null==t.getAttribute("disabled")}))||lt(Y,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),at}(n);m.find=w,m.expr=w.selectors,m.expr[":"]=m.expr.pseudos,m.uniqueSort=m.unique=w.uniqueSort,m.text=w.getText,m.isXMLDoc=w.isXML,m.contains=w.contains;var k=function(t,e,n){for(var i=[],a=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(a&&m(t).is(n))break;i.push(t)}return i},x=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},S=m.expr.match.needsContext,M=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,C=/^.[^:#\[\.,]*$/;function T(t,e,n){if(m.isFunction(e))return m.grep(t,(function(t,i){return!!e.call(t,i,t)!==n}));if(e.nodeType)return m.grep(t,(function(t){return t===e!==n}));if("string"==typeof e){if(C.test(e))return m.filter(e,t,n);e=m.filter(e,t)}return m.grep(t,(function(t){return d.call(e,t)>-1!==n}))}m.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?m.find.matchesSelector(i,t)?[i]:[]:m.find.matches(t,m.grep(e,(function(t){return 1===t.nodeType})))},m.fn.extend({find:function(t){var e,n=this.length,i=[],a=this;if("string"!=typeof t)return this.pushStack(m(t).filter((function(){for(e=0;e<n;e++)if(m.contains(a[e],this))return!0})));for(e=0;e<n;e++)m.find(t,a[e],i);return(i=this.pushStack(n>1?m.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(T(this,t||[],!1))},not:function(t){return this.pushStack(T(this,t||[],!0))},is:function(t){return!!T(this,"string"==typeof t&&S.test(t)?m(t):t||[],!1).length}});var j,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(t,e,n){var i,a;if(!t)return this;if(n=n||j,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:O.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof m?e[0]:e,m.merge(this,m.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:o,!0)),M.test(i[1])&&m.isPlainObject(e))for(i in e)m.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(a=o.getElementById(i[2]))&&a.parentNode&&(this.length=1,this[0]=a),this.context=o,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):m.isFunction(t)?void 0!==n.ready?n.ready(t):t(m):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),m.makeArray(t,this))}).prototype=m.fn,j=m(o);var L=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function A(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}m.fn.extend({has:function(t){var e=m(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(m.contains(this,e[t]))return!0}))},closest:function(t,e){for(var n,i=0,a=this.length,r=[],o=S.test(t)||"string"!=typeof t?m(t,e||this.context):0;i<a;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&m.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?m.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?d.call(m(t),this[0]):d.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),m.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,n){return k(t,"parentNode",n)},next:function(t){return A(t,"nextSibling")},prev:function(t){return A(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,n){return k(t,"nextSibling",n)},prevUntil:function(t,e,n){return k(t,"previousSibling",n)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return t.contentDocument||m.merge([],t.childNodes)}},(function(t,e){m.fn[t]=function(n,i){var a=m.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=m.filter(i,a)),this.length>1&&(D[t]||m.uniqueSort(a),L.test(t)&&a.reverse()),this.pushStack(a)}}));var E,I=/\S+/g;function P(){o.removeEventListener("DOMContentLoaded",P),n.removeEventListener("load",P),m.ready()}m.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return m.each(t.match(I)||[],(function(t,n){e[n]=!0})),e}(t):m.extend({},t);var e,n,i,a,r=[],o=[],s=-1,l=function(){for(a=t.once,i=e=!0;o.length;s=-1)for(n=o.shift();++s<r.length;)!1===r[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=r.length,n=!1);t.memory||(n=!1),e=!1,a&&(r=n?[]:"")},c={add:function(){return r&&(n&&!e&&(s=r.length-1,o.push(n)),function e(n){m.each(n,(function(n,i){m.isFunction(i)?t.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==m.type(i)&&e(i)}))}(arguments),n&&!e&&l()),this},remove:function(){return m.each(arguments,(function(t,e){for(var n;(n=m.inArray(e,r,n))>-1;)r.splice(n,1),n<=s&&s--})),this},has:function(t){return t?m.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return a=o=[],r=n="",this},disabled:function(){return!r},lock:function(){return a=o=[],n||(r=n=""),this},locked:function(){return!!a},fireWith:function(t,n){return a||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},m.extend({Deferred:function(t){var e=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var t=arguments;return m.Deferred((function(n){m.each(e,(function(e,r){var o=m.isFunction(t[e])&&t[e];a[r[1]]((function(){var t=o&&o.apply(this,arguments);t&&m.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,o?[t]:arguments)}))})),t=null})).promise()},promise:function(t){return null!=t?m.extend(t,i):i}},a={};return i.pipe=i.then,m.each(e,(function(t,r){var o=r[2],s=r[3];i[r[1]]=o.add,s&&o.add((function(){n=s}),e[1^t][2].disable,e[2][2].lock),a[r[0]]=function(){return a[r[0]+"With"](this===a?i:this,arguments),this},a[r[0]+"With"]=o.fireWith})),i.promise(a),t&&t.call(a,a),a},when:function(t){var e,n,i,a=0,r=s.call(arguments),o=r.length,l=1!==o||t&&m.isFunction(t.promise)?o:0,c=1===l?t:m.Deferred(),d=function(t,n,i){return function(a){n[t]=this,i[t]=arguments.length>1?s.call(arguments):a,i===e?c.notifyWith(n,i):--l||c.resolveWith(n,i)}};if(o>1)for(e=new Array(o),n=new Array(o),i=new Array(o);a<o;a++)r[a]&&m.isFunction(r[a].promise)?r[a].promise().progress(d(a,n,e)).done(d(a,i,r)).fail(c.reject):--l;return l||c.resolveWith(i,r),c.promise()}}),m.fn.ready=function(t){return m.ready.promise().done(t),this},m.extend({isReady:!1,readyWait:1,holdReady:function(t){t?m.readyWait++:m.ready(!0)},ready:function(t){(!0===t?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==t&&--m.readyWait>0||(E.resolveWith(o,[m]),m.fn.triggerHandler&&(m(o).triggerHandler("ready"),m(o).off("ready"))))}}),m.ready.promise=function(t){return E||(E=m.Deferred(),"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?n.setTimeout(m.ready):(o.addEventListener("DOMContentLoaded",P),n.addEventListener("load",P))),E.promise(t)},m.ready.promise();var Y=function(t,e,n,i,a,r,o){var s=0,l=t.length,c=null==n;if("object"===m.type(n))for(s in a=!0,n)Y(t,e,s,n[s],!0,r,o);else if(void 0!==i&&(a=!0,m.isFunction(i)||(o=!0),c&&(o?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(m(t),n)})),e))for(;s<l;s++)e(t[s],n,o?i:i.call(t[s],s,e(t[s],n)));return a?t:c?e.call(t):l?e(t[0],n):r},R=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function H(){this.expando=m.expando+H.uid++}H.uid=1,H.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!R(t))return{};var e=t[this.expando];return e||(e={},R(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,a=this.cache(t);if("string"==typeof e)a[e]=n;else for(i in e)a[i]=e[i];return a},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?void 0!==(i=this.get(t,e))?i:this.get(t,m.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,a,r=t[this.expando];if(void 0!==r){if(void 0===e)this.register(t);else{m.isArray(e)?i=e.concat(e.map(m.camelCase)):(a=m.camelCase(e),i=e in r?[e,a]:(i=a)in r?[i]:i.match(I)||[]),n=i.length;for(;n--;)delete r[i[n]]}(void 0===e||m.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!m.isEmptyObject(e)}};var N=new H,$=new H,F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,W=/[A-Z]/g;function z(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(W,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:F.test(n)?m.parseJSON(n):n)}catch(t){}$.set(t,e,n)}else n=void 0;return n}m.extend({hasData:function(t){return $.hasData(t)||N.hasData(t)},data:function(t,e,n){return $.access(t,e,n)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,n){return N.access(t,e,n)},_removeData:function(t,e){N.remove(t,e)}}),m.fn.extend({data:function(t,e){var n,i,a,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(a=$.get(r),1===r.nodeType&&!N.get(r,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=m.camelCase(i.slice(5)),z(r,i,a[i]));N.set(r,"hasDataAttrs",!0)}return a}return"object"==typeof t?this.each((function(){$.set(this,t)})):Y(this,(function(e){var n,i;if(r&&void 0===e)return void 0!==(n=$.get(r,t)||$.get(r,t.replace(W,"-$&").toLowerCase()))?n:(i=m.camelCase(t),void 0!==(n=$.get(r,i))?n:void 0!==(n=z(r,i,void 0))?n:void 0);i=m.camelCase(t),this.each((function(){var n=$.get(this,i);$.set(this,i,e),t.indexOf("-")>-1&&void 0!==n&&$.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){$.remove(this,t)}))}}),m.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=N.get(t,e),n&&(!i||m.isArray(n)?i=N.access(t,e,m.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=m.queue(t,e),i=n.length,a=n.shift(),r=m._queueHooks(t,e);"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===e&&n.unshift("inprogress"),delete r.stop,a.call(t,(function(){m.dequeue(t,e)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return N.get(t,n)||N.access(t,n,{empty:m.Callbacks("once memory").add((function(){N.remove(t,[e+"queue",n])}))})}}),m.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?m.queue(this[0],t):void 0===e?this:this.each((function(){var n=m.queue(this,t,e);m._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&m.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){m.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,a=m.Deferred(),r=this,o=this.length,s=function(){--i||a.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=N.get(r[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),a.promise(e)}});var U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+U+")([a-z%]*)$","i"),B=["Top","Right","Bottom","Left"],q=function(t,e){return t=e||t,"none"===m.css(t,"display")||!m.contains(t.ownerDocument,t)};function G(t,e,n,i){var a,r=1,o=20,s=i?function(){return i.cur()}:function(){return m.css(t,e,"")},l=s(),c=n&&n[3]||(m.cssNumber[e]?"":"px"),d=(m.cssNumber[e]||"px"!==c&&+l)&&V.exec(m.css(t,e));if(d&&d[3]!==c){c=c||d[3],n=n||[],d=+l||1;do{d/=r=r||".5",m.style(t,e,d+c)}while(r!==(r=s()/l)&&1!==r&&--o)}return n&&(d=+d||+l||0,a=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=a)),a}var J=/^(?:checkbox|radio)$/i,K=/<([\w:-]+)/,X=/^$|\/(?:java|ecma)script/i,Q={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Z(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&m.nodeName(t,e)?m.merge([t],n):n}function tt(t,e){for(var n=0,i=t.length;n<i;n++)N.set(t[n],"globalEval",!e||N.get(e[n],"globalEval"))}Q.optgroup=Q.option,Q.tbody=Q.tfoot=Q.colgroup=Q.caption=Q.thead,Q.th=Q.td;var et,nt,it=/<|&#?\w+;/;function at(t,e,n,i,a){for(var r,o,s,l,c,d,u=e.createDocumentFragment(),h=[],f=0,p=t.length;f<p;f++)if((r=t[f])||0===r)if("object"===m.type(r))m.merge(h,r.nodeType?[r]:r);else if(it.test(r)){for(o=o||u.appendChild(e.createElement("div")),s=(K.exec(r)||["",""])[1].toLowerCase(),l=Q[s]||Q._default,o.innerHTML=l[1]+m.htmlPrefilter(r)+l[2],d=l[0];d--;)o=o.lastChild;m.merge(h,o.childNodes),(o=u.firstChild).textContent=""}else h.push(e.createTextNode(r));for(u.textContent="",f=0;r=h[f++];)if(i&&m.inArray(r,i)>-1)a&&a.push(r);else if(c=m.contains(r.ownerDocument,r),o=Z(u.appendChild(r),"script"),c&&tt(o),n)for(d=0;r=o[d++];)X.test(r.type||"")&&n.push(r);return u}et=o.createDocumentFragment().appendChild(o.createElement("div")),(nt=o.createElement("input")).setAttribute("type","radio"),nt.setAttribute("checked","checked"),nt.setAttribute("name","t"),et.appendChild(nt),p.checkClone=et.cloneNode(!0).cloneNode(!0).lastChild.checked,et.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!et.cloneNode(!0).lastChild.defaultValue;var rt=/^key/,ot=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,st=/^([^.]*)(?:\.(.+)|)/;function lt(){return!0}function ct(){return!1}function dt(){try{return o.activeElement}catch(t){}}function ut(t,e,n,i,a,r){var o,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)ut(t,s,n,i,e[s],r);return t}if(null==i&&null==a?(a=n,i=n=void 0):null==a&&("string"==typeof n?(a=i,i=void 0):(a=i,i=n,n=void 0)),!1===a)a=ct;else if(!a)return t;return 1===r&&(o=a,(a=function(t){return m().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=m.guid++)),t.each((function(){m.event.add(this,e,a,i,n)}))}m.event={global:{},add:function(t,e,n,i,a){var r,o,s,l,c,d,u,h,f,p,_,g=N.get(t);if(g)for(n.handler&&(n=(r=n).handler,a=r.selector),n.guid||(n.guid=m.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(e){return void 0!==m&&m.event.triggered!==e.type?m.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(I)||[""]).length;c--;)f=_=(s=st.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(u=m.event.special[f]||{},f=(a?u.delegateType:u.bindType)||f,u=m.event.special[f]||{},d=m.extend({type:f,origType:_,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&m.expr.match.needsContext.test(a),namespace:p.join(".")},r),(h=l[f])||((h=l[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,p,o)||t.addEventListener&&t.addEventListener(f,o)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),m.event.global[f]=!0)},remove:function(t,e,n,i,a){var r,o,s,l,c,d,u,h,f,p,_,g=N.hasData(t)&&N.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(I)||[""]).length;c--;)if(f=_=(s=st.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(u=m.event.special[f]||{},h=l[f=(i?u.delegateType:u.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=h.length;r--;)d=h[r],!a&&_!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(h.splice(r,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(t,d));o&&!h.length&&(u.teardown&&!1!==u.teardown.call(t,p,g.handle)||m.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)m.event.remove(t,f+e[c],n,i,!0);m.isEmptyObject(l)&&N.remove(t,"handle events")}},dispatch:function(t){t=m.event.fix(t);var e,n,i,a,r,o=[],l=s.call(arguments),c=(N.get(this,"events")||{})[t.type]||[],d=m.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,t)){for(o=m.event.handlers.call(this,t,c),e=0;(a=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=a.elem,n=0;(r=a.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(r.namespace)||(t.handleObj=r,t.data=r.data,void 0!==(i=((m.event.special[r.origType]||{}).handle||r.handler).apply(a.elem,l))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,a,r,o=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(i=[],n=0;n<s;n++)void 0===i[a=(r=e[n]).selector+" "]&&(i[a]=r.needsContext?m(a,this).index(l)>-1:m.find(a,this,null,[l]).length),i[a]&&i.push(r);i.length&&o.push({elem:l,handlers:i})}return s<e.length&&o.push({elem:this,handlers:e.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,a,r=e.button;return null==t.pageX&&null!=e.clientX&&(i=(n=t.target.ownerDocument||o).documentElement,a=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[m.expando])return t;var e,n,i,a=t.type,r=t,s=this.fixHooks[a];for(s||(this.fixHooks[a]=s=ot.test(a)?this.mouseHooks:rt.test(a)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new m.Event(r),e=i.length;e--;)t[n=i[e]]=r[n];return t.target||(t.target=o),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==dt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===dt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(t){return m.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},m.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},m.Event=function(t,e){if(!(this instanceof m.Event))return new m.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?lt:ct):this.type=t,e&&m.extend(this,e),this.timeStamp=t&&t.timeStamp||m.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:ct,isPropagationStopped:ct,isImmediatePropagationStopped:ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=lt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=lt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=lt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){m.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,a=t.relatedTarget,r=t.handleObj;return a&&(a===i||m.contains(i,a))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}})),m.fn.extend({on:function(t,e,n,i){return ut(this,t,e,n,i)},one:function(t,e,n,i){return ut(this,t,e,n,i,1)},off:function(t,e,n){var i,a;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,m(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(a in t)this.off(a,e,t[a]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=ct),this.each((function(){m.event.remove(this,t,n,e)}))}});var ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ft=/<script|<style|<link/i,pt=/checked\s*(?:[^=]|=\s*.checked.)/i,mt=/^true\/(.*)/,_t=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function gt(t,e){return m.nodeName(t,"table")&&m.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function vt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function yt(t){var e=mt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function bt(t,e){var n,i,a,r,o,s,l,c;if(1===e.nodeType){if(N.hasData(t)&&(r=N.access(t),o=N.set(e,r),c=r.events))for(a in delete o.handle,o.events={},c)for(n=0,i=c[a].length;n<i;n++)m.event.add(e,a,c[a][n]);$.hasData(t)&&(s=$.access(t),l=m.extend({},s),$.set(e,l))}}function wt(t,e,n,i){e=l.apply([],e);var a,r,o,s,c,d,u=0,h=t.length,f=h-1,_=e[0],g=m.isFunction(_);if(g||h>1&&"string"==typeof _&&!p.checkClone&&pt.test(_))return t.each((function(a){var r=t.eq(a);g&&(e[0]=_.call(this,a,r.html())),wt(r,e,n,i)}));if(h&&(r=(a=at(e,t[0].ownerDocument,!1,t,i)).firstChild,1===a.childNodes.length&&(a=r),r||i)){for(s=(o=m.map(Z(a,"script"),vt)).length;u<h;u++)c=a,u!==f&&(c=m.clone(c,!0,!0),s&&m.merge(o,Z(c,"script"))),n.call(t[u],c,u);if(s)for(d=o[o.length-1].ownerDocument,m.map(o,yt),u=0;u<s;u++)c=o[u],X.test(c.type||"")&&!N.access(c,"globalEval")&&m.contains(d,c)&&(c.src?m._evalUrl&&m._evalUrl(c.src):m.globalEval(c.textContent.replace(_t,"")))}return t}function kt(t,e,n){for(var i,a=e?m.filter(e,t):t,r=0;null!=(i=a[r]);r++)n||1!==i.nodeType||m.cleanData(Z(i)),i.parentNode&&(n&&m.contains(i.ownerDocument,i)&&tt(Z(i,"script")),i.parentNode.removeChild(i));return t}m.extend({htmlPrefilter:function(t){return t.replace(ht,"<$1></$2>")},clone:function(t,e,n){var i,a,r,o,s,l,c,d=t.cloneNode(!0),u=m.contains(t.ownerDocument,t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||m.isXMLDoc(t)))for(o=Z(d),i=0,a=(r=Z(t)).length;i<a;i++)s=r[i],l=o[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&J.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(e)if(n)for(r=r||Z(t),o=o||Z(d),i=0,a=r.length;i<a;i++)bt(r[i],o[i]);else bt(t,d);return(o=Z(d,"script")).length>0&&tt(o,!u&&Z(t,"script")),d},cleanData:function(t){for(var e,n,i,a=m.event.special,r=0;void 0!==(n=t[r]);r++)if(R(n)){if(e=n[N.expando]){if(e.events)for(i in e.events)a[i]?m.event.remove(n,i):m.removeEvent(n,i,e.handle);n[N.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),m.fn.extend({domManip:wt,detach:function(t){return kt(this,t,!0)},remove:function(t){return kt(this,t)},text:function(t){return Y(this,(function(t){return void 0===t?m.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return wt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||gt(this,t).appendChild(t)}))},prepend:function(){return wt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=gt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(m.cleanData(Z(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return m.clone(this,t,e)}))},html:function(t){return Y(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ft.test(t)&&!Q[(K.exec(t)||["",""])[1].toLowerCase()]){t=m.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(m.cleanData(Z(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return wt(this,arguments,(function(e){var n=this.parentNode;m.inArray(this,t)<0&&(m.cleanData(Z(this)),n&&n.replaceChild(e,this))}),t)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){m.fn[t]=function(t){for(var n,i=[],a=m(t),r=a.length-1,o=0;o<=r;o++)n=o===r?this:this.clone(!0),m(a[o])[e](n),c.apply(i,n.get());return this.pushStack(i)}}));var xt,St={HTML:"block",BODY:"block"};function Mt(t,e){var n=m(e.createElement(t)).appendTo(e.body),i=m.css(n[0],"display");return n.detach(),i}function Ct(t){var e=o,n=St[t];return n||("none"!==(n=Mt(t,e))&&n||((e=(xt=(xt||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),n=Mt(t,e),xt.detach()),St[t]=n),n}var Tt=/^margin/,jt=new RegExp("^("+U+")(?!px)[a-z%]+$","i"),Ot=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Lt=function(t,e,n,i){var a,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in a=n.apply(t,i||[]),e)t.style[r]=o[r];return a},Dt=o.documentElement;function At(t,e,n){var i,a,r,o,s=t.style;return""!==(o=(n=n||Ot(t))?n.getPropertyValue(e)||n[e]:void 0)&&void 0!==o||m.contains(t.ownerDocument,t)||(o=m.style(t,e)),n&&!p.pixelMarginRight()&&jt.test(o)&&Tt.test(e)&&(i=s.width,a=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=a,s.maxWidth=r),void 0!==o?o+"":o}function Et(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){var t,e,i,a,r=o.createElement("div"),s=o.createElement("div");function l(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Dt.appendChild(r);var o=n.getComputedStyle(s);t="1%"!==o.top,a="2px"===o.marginLeft,e="4px"===o.width,s.style.marginRight="50%",i="4px"===o.marginRight,Dt.removeChild(r)}s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(s),m.extend(p,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==e&&l(),e},pixelMarginRight:function(){return null==e&&l(),i},reliableMarginLeft:function(){return null==e&&l(),a},reliableMarginRight:function(){var t,e=s.appendChild(o.createElement("div"));return e.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",s.style.width="1px",Dt.appendChild(r),t=!parseFloat(n.getComputedStyle(e).marginRight),Dt.removeChild(r),s.removeChild(e),t}}))}();var It=/^(none|table(?!-c[ea]).+)/,Pt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Rt=["Webkit","O","Moz","ms"],Ht=o.createElement("div").style;function Nt(t){if(t in Ht)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Rt.length;n--;)if((t=Rt[n]+e)in Ht)return t}function $t(t,e,n){var i=V.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function Ft(t,e,n,i,a){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,o=0;r<4;r+=2)"margin"===n&&(o+=m.css(t,n+B[r],!0,a)),i?("content"===n&&(o-=m.css(t,"padding"+B[r],!0,a)),"margin"!==n&&(o-=m.css(t,"border"+B[r]+"Width",!0,a))):(o+=m.css(t,"padding"+B[r],!0,a),"padding"!==n&&(o+=m.css(t,"border"+B[r]+"Width",!0,a)));return o}function Wt(t,e,n){var i=!0,a="width"===e?t.offsetWidth:t.offsetHeight,r=Ot(t),o="border-box"===m.css(t,"boxSizing",!1,r);if(a<=0||null==a){if(((a=At(t,e,r))<0||null==a)&&(a=t.style[e]),jt.test(a))return a;i=o&&(p.boxSizingReliable()||a===t.style[e]),a=parseFloat(a)||0}return a+Ft(t,e,n||(o?"border":"content"),i,r)+"px"}function zt(t,e){for(var n,i,a,r=[],o=0,s=t.length;o<s;o++)(i=t[o]).style&&(r[o]=N.get(i,"olddisplay"),n=i.style.display,e?(r[o]||"none"!==n||(i.style.display=""),""===i.style.display&&q(i)&&(r[o]=N.access(i,"olddisplay",Ct(i.nodeName)))):(a=q(i),"none"===n&&a||N.set(i,"olddisplay",a?n:m.css(i,"display"))));for(o=0;o<s;o++)(i=t[o]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[o]||"":"none"));return t}function Ut(t,e,n,i,a){return new Ut.prototype.init(t,e,n,i,a)}m.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=At(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,r,o,s=m.camelCase(e),l=t.style;if(e=m.cssProps[s]||(m.cssProps[s]=Nt(s)||s),o=m.cssHooks[e]||m.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(t,!1,i))?a:l[e];"string"==(r=typeof n)&&(a=V.exec(n))&&a[1]&&(n=G(t,e,a),r="number"),null!=n&&n==n&&("number"===r&&(n+=a&&a[3]||(m.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(l[e]=n))}},css:function(t,e,n,i){var a,r,o,s=m.camelCase(e);return e=m.cssProps[s]||(m.cssProps[s]=Nt(s)||s),(o=m.cssHooks[e]||m.cssHooks[s])&&"get"in o&&(a=o.get(t,!0,n)),void 0===a&&(a=At(t,e,i)),"normal"===a&&e in Yt&&(a=Yt[e]),""===n||n?(r=parseFloat(a),!0===n||isFinite(r)?r||0:a):a}}),m.each(["height","width"],(function(t,e){m.cssHooks[e]={get:function(t,n,i){if(n)return It.test(m.css(t,"display"))&&0===t.offsetWidth?Lt(t,Pt,(function(){return Wt(t,e,i)})):Wt(t,e,i)},set:function(t,n,i){var a,r=i&&Ot(t),o=i&&Ft(t,e,i,"border-box"===m.css(t,"boxSizing",!1,r),r);return o&&(a=V.exec(n))&&"px"!==(a[3]||"px")&&(t.style[e]=n,n=m.css(t,e)),$t(0,n,o)}}})),m.cssHooks.marginLeft=Et(p.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(At(t,"marginLeft"))||t.getBoundingClientRect().left-Lt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),m.cssHooks.marginRight=Et(p.reliableMarginRight,(function(t,e){if(e)return Lt(t,{display:"inline-block"},At,[t,"marginRight"])})),m.each({margin:"",padding:"",border:"Width"},(function(t,e){m.cssHooks[t+e]={expand:function(n){for(var i=0,a={},r="string"==typeof n?n.split(" "):[n];i<4;i++)a[t+B[i]+e]=r[i]||r[i-2]||r[0];return a}},Tt.test(t)||(m.cssHooks[t+e].set=$t)})),m.fn.extend({css:function(t,e){return Y(this,(function(t,e,n){var i,a,r={},o=0;if(m.isArray(e)){for(i=Ot(t),a=e.length;o<a;o++)r[e[o]]=m.css(t,e[o],!1,i);return r}return void 0!==n?m.style(t,e,n):m.css(t,e)}),t,e,arguments.length>1)},show:function(){return zt(this,!0)},hide:function(){return zt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){q(this)?m(this).show():m(this).hide()}))}}),m.Tween=Ut,Ut.prototype={constructor:Ut,init:function(t,e,n,i,a,r){this.elem=t,this.prop=n,this.easing=a||m.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(m.cssNumber[n]?"":"px")},cur:function(){var t=Ut.propHooks[this.prop];return t&&t.get?t.get(this):Ut.propHooks._default.get(this)},run:function(t){var e,n=Ut.propHooks[this.prop];return this.options.duration?this.pos=e=m.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ut.propHooks._default.set(this),this}},Ut.prototype.init.prototype=Ut.prototype,Ut.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=m.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){m.fx.step[t.prop]?m.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[m.cssProps[t.prop]]&&!m.cssHooks[t.prop]?t.elem[t.prop]=t.now:m.style(t.elem,t.prop,t.now+t.unit)}}},Ut.propHooks.scrollTop=Ut.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},m.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},m.fx=Ut.prototype.init,m.fx.step={};var Vt,Bt,qt=/^(?:toggle|show|hide)$/,Gt=/queueHooks$/;function Jt(){return n.setTimeout((function(){Vt=void 0})),Vt=m.now()}function Kt(t,e){var n,i=0,a={height:t};for(e=e?1:0;i<4;i+=2-e)a["margin"+(n=B[i])]=a["padding"+n]=t;return e&&(a.opacity=a.width=t),a}function Xt(t,e,n){for(var i,a=(Qt.tweeners[e]||[]).concat(Qt.tweeners["*"]),r=0,o=a.length;r<o;r++)if(i=a[r].call(n,e,t))return i}function Qt(t,e,n){var i,a,r=0,o=Qt.prefilters.length,s=m.Deferred().always((function(){delete l.elem})),l=function(){if(a)return!1;for(var e=Vt||Jt(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),r=0,o=c.tweens.length;r<o;r++)c.tweens[r].run(i);return s.notifyWith(t,[c,i,n]),i<1&&o?n:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:m.extend({},e),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},n),originalProperties:e,originalOptions:n,startTime:Vt||Jt(),duration:n.duration,tweens:[],createTween:function(e,n){var i=m.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(a)return this;for(a=!0;n<i;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),d=c.props;for(function(t,e){var n,i,a,r,o;for(n in t)if(a=e[i=m.camelCase(n)],r=t[n],m.isArray(r)&&(a=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(o=m.cssHooks[i])&&"expand"in o)for(n in r=o.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=a);else e[i]=a}(d,c.opts.specialEasing);r<o;r++)if(i=Qt.prefilters[r].call(c,t,d,c.opts))return m.isFunction(i.stop)&&(m._queueHooks(c.elem,c.opts.queue).stop=m.proxy(i.stop,i)),i;return m.map(d,Xt,c),m.isFunction(c.opts.start)&&c.opts.start.call(t,c),m.fx.timer(m.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}m.Animation=m.extend(Qt,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return G(n.elem,t,V.exec(e),n),n}]},tweener:function(t,e){m.isFunction(t)?(e=t,t=["*"]):t=t.match(I);for(var n,i=0,a=t.length;i<a;i++)n=t[i],Qt.tweeners[n]=Qt.tweeners[n]||[],Qt.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,a,r,o,s,l,c,d=this,u={},h=t.style,f=t.nodeType&&q(t),p=N.get(t,"fxshow");for(i in n.queue||(null==(s=m._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,m.queue(t,"fx").length||s.empty.fire()}))}))),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(c=m.css(t,"display"))?N.get(t,"olddisplay")||Ct(t.nodeName):c)&&"none"===m.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),e)if(a=e[i],qt.exec(a)){if(delete e[i],r=r||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!p||void 0===p[i])continue;f=!0}u[i]=p&&p[i]||m.style(t,i)}else c=void 0;if(m.isEmptyObject(u))"inline"===("none"===c?Ct(t.nodeName):c)&&(h.display=c);else for(i in p?"hidden"in p&&(f=p.hidden):p=N.access(t,"fxshow",{}),r&&(p.hidden=!f),f?m(t).show():d.done((function(){m(t).hide()})),d.done((function(){var e;for(e in N.remove(t,"fxshow"),u)m.style(t,e,u[e])})),u)o=Xt(f?p[i]:0,i,d),i in p||(p[i]=o.start,f&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}],prefilter:function(t,e){e?Qt.prefilters.unshift(t):Qt.prefilters.push(t)}}),m.speed=function(t,e,n){var i=t&&"object"==typeof t?m.extend({},t):{complete:n||!n&&e||m.isFunction(t)&&t,duration:t,easing:n&&e||e&&!m.isFunction(e)&&e};return i.duration=m.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.fn.extend({fadeTo:function(t,e,n,i){return this.filter(q).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var a=m.isEmptyObject(t),r=m.speed(e,n,i),o=function(){var e=Qt(this,m.extend({},t),r);(a||N.get(this,"finish"))&&e.stop(!0)};return o.finish=o,a||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,a=null!=t&&t+"queueHooks",r=m.timers,o=N.get(this);if(a)o[a]&&o[a].stop&&i(o[a]);else for(a in o)o[a]&&o[a].stop&&Gt.test(a)&&i(o[a]);for(a=r.length;a--;)r[a].elem!==this||null!=t&&r[a].queue!==t||(r[a].anim.stop(n),e=!1,r.splice(a,1));!e&&n||m.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=N.get(this),i=n[t+"queue"],a=n[t+"queueHooks"],r=m.timers,o=i?i.length:0;for(n.finish=!0,m.queue(this,t,[]),a&&a.stop&&a.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),m.each(["toggle","show","hide"],(function(t,e){var n=m.fn[e];m.fn[e]=function(t,i,a){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Kt(e,!0),t,i,a)}})),m.each({slideDown:Kt("show"),slideUp:Kt("hide"),slideToggle:Kt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){m.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),m.timers=[],m.fx.tick=function(){var t,e=0,n=m.timers;for(Vt=m.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||m.fx.stop(),Vt=void 0},m.fx.timer=function(t){m.timers.push(t),t()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Bt||(Bt=n.setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){n.clearInterval(Bt),Bt=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(t,e){return t=m.fx&&m.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var a=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(a)}}))},function(){var t=o.createElement("input"),e=o.createElement("select"),n=e.appendChild(o.createElement("option"));t.type="checkbox",p.checkOn=""!==t.value,p.optSelected=n.selected,e.disabled=!0,p.optDisabled=!n.disabled,(t=o.createElement("input")).value="t",t.type="radio",p.radioValue="t"===t.value}();var Zt,te=m.expr.attrHandle;m.fn.extend({attr:function(t,e){return Y(this,m.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){m.removeAttr(this,t)}))}}),m.extend({attr:function(t,e,n){var i,a,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?m.prop(t,e,n):(1===r&&m.isXMLDoc(t)||(e=e.toLowerCase(),a=m.attrHooks[e]||(m.expr.match.bool.test(e)?Zt:void 0)),void 0!==n?null===n?void m.removeAttr(t,e):a&&"set"in a&&void 0!==(i=a.set(t,n,e))?i:(t.setAttribute(e,n+""),n):a&&"get"in a&&null!==(i=a.get(t,e))?i:null==(i=m.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&m.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,a=0,r=e&&e.match(I);if(r&&1===t.nodeType)for(;n=r[a++];)i=m.propFix[n]||n,m.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)}}),Zt={set:function(t,e,n){return!1===e?m.removeAttr(t,n):t.setAttribute(n,n),n}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=te[e]||m.find.attr;te[e]=function(t,e,i){var a,r;return i||(r=te[e],te[e]=a,a=null!=n(t,e,i)?e.toLowerCase():null,te[e]=r),a}}));var ee=/^(?:input|select|textarea|button)$/i,ne=/^(?:a|area)$/i;m.fn.extend({prop:function(t,e){return Y(this,m.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[m.propFix[t]||t]}))}}),m.extend({prop:function(t,e,n){var i,a,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&m.isXMLDoc(t)||(e=m.propFix[e]||e,a=m.propHooks[e]),void 0!==n?a&&"set"in a&&void 0!==(i=a.set(t,n,e))?i:t[e]=n:a&&"get"in a&&null!==(i=a.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=m.find.attr(t,"tabindex");return e?parseInt(e,10):ee.test(t.nodeName)||ne.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(m.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var ie=/[\t\r\n\f]/g;function ae(t){return t.getAttribute&&t.getAttribute("class")||""}m.fn.extend({addClass:function(t){var e,n,i,a,r,o,s,l=0;if(m.isFunction(t))return this.each((function(e){m(this).addClass(t.call(this,e,ae(this)))}));if("string"==typeof t&&t)for(e=t.match(I)||[];n=this[l++];)if(a=ae(n),i=1===n.nodeType&&(" "+a+" ").replace(ie," ")){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a!==(s=m.trim(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,a,r,o,s,l=0;if(m.isFunction(t))return this.each((function(e){m(this).removeClass(t.call(this,e,ae(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(I)||[];n=this[l++];)if(a=ae(n),i=1===n.nodeType&&(" "+a+" ").replace(ie," ")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a!==(s=m.trim(i))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):m.isFunction(t)?this.each((function(n){m(this).toggleClass(t.call(this,n,ae(this),e),e)})):this.each((function(){var e,i,a,r;if("string"===n)for(i=0,a=m(this),r=t.match(I)||[];e=r[i++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==n||((e=ae(this))&&N.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":N.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ae(n)+" ").replace(ie," ").indexOf(e)>-1)return!0;return!1}});var re=/\r/g,oe=/[\x20\t\r\n\f]+/g;m.fn.extend({val:function(t){var e,n,i,a=this[0];return arguments.length?(i=m.isFunction(t),this.each((function(n){var a;1===this.nodeType&&(null==(a=i?t.call(this,n,m(this).val()):t)?a="":"number"==typeof a?a+="":m.isArray(a)&&(a=m.map(a,(function(t){return null==t?"":t+""}))),(e=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,a,"value")||(this.value=a))}))):a?(e=m.valHooks[a.type]||m.valHooks[a.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(re,""):null==n?"":n:void 0}}),m.extend({valHooks:{option:{get:function(t){var e=m.find.attr(t,"value");return null!=e?e:m.trim(m.text(t)).replace(oe," ")}},select:{get:function(t){for(var e,n,i=t.options,a=t.selectedIndex,r="select-one"===t.type||a<0,o=r?null:[],s=r?a+1:i.length,l=a<0?s:r?a:0;l<s;l++)if(((n=i[l]).selected||l===a)&&(p.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!m.nodeName(n.parentNode,"optgroup"))){if(e=m(n).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var n,i,a=t.options,r=m.makeArray(e),o=a.length;o--;)((i=a[o]).selected=m.inArray(m.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(t,e){if(m.isArray(e))return t.checked=m.inArray(m(t).val(),e)>-1}},p.checkOn||(m.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var se=/^(?:focusinfocus|focusoutblur)$/;m.extend(m.event,{trigger:function(t,e,i,a){var r,s,l,c,d,u,h,p=[i||o],_=f.call(t,"type")?t.type:t,g=f.call(t,"namespace")?t.namespace.split("."):[];if(s=l=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!se.test(_+m.event.triggered)&&(_.indexOf(".")>-1&&(g=_.split("."),_=g.shift(),g.sort()),d=_.indexOf(":")<0&&"on"+_,(t=t[m.expando]?t:new m.Event(_,"object"==typeof t&&t)).isTrigger=a?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:m.makeArray(e,[t]),h=m.event.special[_]||{},a||!h.trigger||!1!==h.trigger.apply(i,e))){if(!a&&!h.noBubble&&!m.isWindow(i)){for(c=h.delegateType||_,se.test(c+_)||(s=s.parentNode);s;s=s.parentNode)p.push(s),l=s;l===(i.ownerDocument||o)&&p.push(l.defaultView||l.parentWindow||n)}for(r=0;(s=p[r++])&&!t.isPropagationStopped();)t.type=r>1?c:h.bindType||_,(u=(N.get(s,"events")||{})[t.type]&&N.get(s,"handle"))&&u.apply(s,e),(u=d&&s[d])&&u.apply&&R(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=_,a||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!R(i)||d&&m.isFunction(i[_])&&!m.isWindow(i)&&((l=i[d])&&(i[d]=null),m.event.triggered=_,i[_](),m.event.triggered=void 0,l&&(i[d]=l)),t.result}},simulate:function(t,e,n){var i=m.extend(new m.Event,n,{type:t,isSimulated:!0});m.event.trigger(i,null,e)}}),m.fn.extend({trigger:function(t,e){return this.each((function(){m.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return m.event.trigger(t,e,n,!0)}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(t,e){m.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),m.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),p.focusin="onfocusin"in n,p.focusin||m.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){m.event.simulate(e,t.target,m.event.fix(t))};m.event.special[e]={setup:function(){var i=this.ownerDocument||this,a=N.access(i,e);a||i.addEventListener(t,n,!0),N.access(i,e,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this,a=N.access(i,e)-1;a?N.access(i,e,a):(i.removeEventListener(t,n,!0),N.remove(i,e))}}}));var le=n.location,ce=m.now(),de=/\?/;m.parseJSON=function(t){return JSON.parse(t+"")},m.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+t),e};var ue=/#.*$/,he=/([?&])_=[^&]*/,fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,pe=/^(?:GET|HEAD)$/,me=/^\/\//,_e={},ge={},ve="*/".concat("*"),ye=o.createElement("a");function be(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,a=0,r=e.toLowerCase().match(I)||[];if(m.isFunction(n))for(;i=r[a++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function we(t,e,n,i){var a={},r=t===ge;function o(s){var l;return a[s]=!0,m.each(t[s]||[],(function(t,s){var c=s(e,n,i);return"string"!=typeof c||r||a[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)})),l}return o(e.dataTypes[0])||!a["*"]&&o("*")}function ke(t,e){var n,i,a=m.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((a[n]?t:i||(i={}))[n]=e[n]);return i&&m.extend(!0,t,i),t}ye.href=le.href,m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:le.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(le.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ke(ke(t,m.ajaxSettings),e):ke(m.ajaxSettings,t)},ajaxPrefilter:be(_e),ajaxTransport:be(ge),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,a,r,s,l,c,d,u,h=m.ajaxSetup({},e),f=h.context||h,p=h.context&&(f.nodeType||f.jquery)?m(f):m.event,_=m.Deferred(),g=m.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,k="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!s)for(s={};e=fe.exec(r);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?r:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return w||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(w<2)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||k;return i&&i.abort(e),S(0,e),this}};if(_.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||le.href)+"").replace(ue,"").replace(me,le.protocol+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=m.trim(h.dataType||"*").toLowerCase().match(I)||[""],null==h.crossDomain){c=o.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=ye.protocol+"//"+ye.host!=c.protocol+"//"+c.host}catch(t){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=m.param(h.data,h.traditional)),we(_e,h,e,x),2===w)return x;for(u in(d=m.event&&h.global)&&0==m.active++&&m.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!pe.test(h.type),a=h.url,h.hasContent||(h.data&&(a=h.url+=(de.test(a)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=he.test(a)?a.replace(he,"$1_="+ce++):a+(de.test(a)?"&":"?")+"_="+ce++)),h.ifModified&&(m.lastModified[a]&&x.setRequestHeader("If-Modified-Since",m.lastModified[a]),m.etag[a]&&x.setRequestHeader("If-None-Match",m.etag[a])),(h.data&&h.hasContent&&!1!==h.contentType||e.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+ve+"; q=0.01":""):h.accepts["*"]),h.headers)x.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(!1===h.beforeSend.call(f,x,h)||2===w))return x.abort();for(u in k="abort",{success:1,error:1,complete:1})x[u](h[u]);if(i=we(ge,h,e,x)){if(x.readyState=1,d&&p.trigger("ajaxSend",[x,h]),2===w)return x;h.async&&h.timeout>0&&(l=n.setTimeout((function(){x.abort("timeout")}),h.timeout));try{w=1,i.send(y,S)}catch(t){if(!(w<2))throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,o,s){var c,u,y,b,k,S=e;2!==w&&(w=2,l&&n.clearTimeout(l),i=void 0,r=s||"",x.readyState=t>0?4:0,c=t>=200&&t<300||304===t,o&&(b=function(t,e,n){for(var i,a,r,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)r=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){r=a;break}o||(o=a)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),n[r]}(h,x,o)),b=function(t,e,n,i){var a,r,o,s,l,c={},d=t.dataTypes.slice();if(d[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(r=d.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(o=c[l+" "+r]||c["* "+r]))for(a in c)if((s=a.split(" "))[1]===r&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[a]:!0!==c[a]&&(r=s[0],d.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(h,b,x,c),c?(h.ifModified&&((k=x.getResponseHeader("Last-Modified"))&&(m.lastModified[a]=k),(k=x.getResponseHeader("etag"))&&(m.etag[a]=k)),204===t||"HEAD"===h.type?S="nocontent":304===t?S="notmodified":(S=b.state,u=b.data,c=!(y=b.error))):(y=S,!t&&S||(S="error",t<0&&(t=0))),x.status=t,x.statusText=(e||S)+"",c?_.resolveWith(f,[u,S,x]):_.rejectWith(f,[x,S,y]),x.statusCode(v),v=void 0,d&&p.trigger(c?"ajaxSuccess":"ajaxError",[x,h,c?u:y]),g.fireWith(f,[x,S]),d&&(p.trigger("ajaxComplete",[x,h]),--m.active||m.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return m.get(t,e,n,"json")},getScript:function(t,e){return m.get(t,void 0,e,"script")}}),m.each(["get","post"],(function(t,e){m[e]=function(t,n,i,a){return m.isFunction(n)&&(a=a||i,i=n,n=void 0),m.ajax(m.extend({url:t,type:e,dataType:a,data:n,success:i},m.isPlainObject(t)&&t))}})),m._evalUrl=function(t){return m.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(t){var e;return m.isFunction(t)?this.each((function(e){m(this).wrapAll(t.call(this,e))})):(this[0]&&(e=m(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this)},wrapInner:function(t){return m.isFunction(t)?this.each((function(e){m(this).wrapInner(t.call(this,e))})):this.each((function(){var e=m(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m.isFunction(t);return this.each((function(n){m(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(t){return!m.expr.filters.visible(t)},m.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var xe=/%20/g,Se=/\[\]$/,Me=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function je(t,e,n,i){var a;if(m.isArray(e))m.each(e,(function(e,a){n||Se.test(t)?i(t,a):je(t+"["+("object"==typeof a&&null!=a?e:"")+"]",a,n,i)}));else if(n||"object"!==m.type(e))i(t,e);else for(a in e)je(t+"["+a+"]",e[a],n,i)}m.param=function(t,e){var n,i=[],a=function(t,e){e=m.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(t)||t.jquery&&!m.isPlainObject(t))m.each(t,(function(){a(this.name,this.value)}));else for(n in t)je(n,t[n],e,a);return i.join("&").replace(xe,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=m.prop(this,"elements");return t?m.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!m(this).is(":disabled")&&Te.test(this.nodeName)&&!Ce.test(t)&&(this.checked||!J.test(t))})).map((function(t,e){var n=m(this).val();return null==n?null:m.isArray(n)?m.map(n,(function(t){return{name:e.name,value:t.replace(Me,"\r\n")}})):{name:e.name,value:n.replace(Me,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Oe={0:200,1223:204},Le=m.ajaxSettings.xhr();p.cors=!!Le&&"withCredentials"in Le,p.ajax=Le=!!Le,m.ajaxTransport((function(t){var e,i;if(p.cors||Le&&!t.crossDomain)return{send:function(a,r){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);e=function(t){return function(){e&&(e=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Oe[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),i=s.onerror=e("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){e&&i()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return m.globalEval(t),t}}}),m.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),m.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain)return{send:function(i,a){e=m("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&a("error"===t.type?404:200,t.type)}),o.head.appendChild(e[0])},abort:function(){n&&n()}}}));var De=[],Ae=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=De.pop()||m.expando+"_"+ce++;return this[t]=!0,t}}),m.ajaxPrefilter("json jsonp",(function(t,e,i){var a,r,o,s=!1!==t.jsonp&&(Ae.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ae.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=m.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ae,"$1"+a):!1!==t.jsonp&&(t.url+=(de.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||m.error(a+" was not called"),o[0]},t.dataTypes[0]="json",r=n[a],n[a]=function(){o=arguments},i.always((function(){void 0===r?m(n).removeProp(a):n[a]=r,t[a]&&(t.jsonpCallback=e.jsonpCallback,De.push(a)),o&&m.isFunction(r)&&r(o[0]),o=r=void 0})),"script"})),m.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||o;var i=M.exec(t),a=!n&&[];return i?[e.createElement(i[1])]:(i=at([t],e,a),a&&a.length&&m(a).remove(),m.merge([],i.childNodes))};var Ee=m.fn.load;function Ie(t){return m.isWindow(t)?t:9===t.nodeType&&t.defaultView}m.fn.load=function(t,e,n){if("string"!=typeof t&&Ee)return Ee.apply(this,arguments);var i,a,r,o=this,s=t.indexOf(" ");return s>-1&&(i=m.trim(t.slice(s)),t=t.slice(0,s)),m.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(a="POST"),o.length>0&&m.ajax({url:t,type:a||"GET",dataType:"html",data:e}).done((function(t){r=arguments,o.html(i?m("<div>").append(m.parseHTML(t)).find(i):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,r||[t.responseText,e,t])}))}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){m.fn[e]=function(t){return this.on(e,t)}})),m.expr.filters.animated=function(t){return m.grep(m.timers,(function(e){return t===e.elem})).length},m.offset={setOffset:function(t,e,n){var i,a,r,o,s,l,c=m.css(t,"position"),d=m(t),u={};"static"===c&&(t.style.position="relative"),s=d.offset(),r=m.css(t,"top"),l=m.css(t,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(o=(i=d.position()).top,a=i.left):(o=parseFloat(r)||0,a=parseFloat(l)||0),m.isFunction(e)&&(e=e.call(t,n,m.extend({},s))),null!=e.top&&(u.top=e.top-s.top+o),null!=e.left&&(u.left=e.left-s.left+a),"using"in e?e.using.call(t,u):d.css(u)}},m.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){m.offset.setOffset(this,t,e)}));var e,n,i=this[0],a={top:0,left:0},r=i&&i.ownerDocument;return r?(e=r.documentElement,m.contains(e,i)?(a=i.getBoundingClientRect(),n=Ie(r),{top:a.top+n.pageYOffset-e.clientTop,left:a.left+n.pageXOffset-e.clientLeft}):a):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===m.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),m.nodeName(t[0],"html")||(i=t.offset()),i.top+=m.css(t[0],"borderTopWidth",!0),i.left+=m.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-m.css(n,"marginTop",!0),left:e.left-i.left-m.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===m.css(t,"position");)t=t.offsetParent;return t||Dt}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;m.fn[t]=function(i){return Y(this,(function(t,i,a){var r=Ie(t);if(void 0===a)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:a,n?a:r.pageYOffset):t[i]=a}),t,i,arguments.length)}})),m.each(["top","left"],(function(t,e){m.cssHooks[e]=Et(p.pixelPosition,(function(t,n){if(n)return n=At(t,e),jt.test(n)?m(t).position()[e]+"px":n}))})),m.each({Height:"height",Width:"width"},(function(t,e){m.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){m.fn[i]=function(i,a){var r=arguments.length&&(n||"boolean"!=typeof i),o=n||(!0===i||!0===a?"margin":"border");return Y(this,(function(e,n,i){var a;return m.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===i?m.css(e,n,o):m.style(e,n,i,o)}),e,r?i:void 0,r,null)}}))})),m.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),m.fn.andSelf=m.fn.addBack,void 0===(i=function(){return m}.apply(e,[]))||(t.exports=i);var Pe=n.jQuery,Ye=n.$;return m.noConflict=function(t){return n.$===m&&(n.$=Ye),t&&n.jQuery===m&&(n.jQuery=Pe),m},a||(n.jQuery=n.$=m),m},"object"==typeof t.exports?t.exports=a.document?r(a,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return r(t)}:r(a)},function(t,e,n){"use strict";e.a={name:"production",debug:!1,rxjsDebug:!1,caching:{adapter:"idb",revs_limit:1,pageSize:60}}},function(t,e,n){"use strict";e.a=function(t){var e=document.createElement("p");e.textContent=t,e.setAttribute("role","alert"),document.body.appendChild(e),setTimeout((function(){document.body.removeChild(e)}),2e3)}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o).a.View.extend({className:"ui-modal",optionsDefault:{container:"body",title:"ui-modal",cls:"ui-modal",body:"",backdrop:!0,height:null,width:null,xlarge:!1,closing_events:!1,closing_callback:null,title_separator:!0},buttonList:{},initialize:function(t){this.options=r.default.defaults(t||{},this.optionsDefault),a()(this.options.container).prepend(this.el),t&&this.render()},show:function(t){var e=this;t&&(this.options=r.default.defaults(t,this.optionsDefault),this.render()),this.visible||(this.visible=!0,this.$el.fadeIn("fast")),this.options.closing_events&&(a()(document).on("keyup.ui-modal",(function(t){27==t.keyCode&&e.hide(!0)})),this.$backdrop.on("click",(function(){e.hide(!0)}))),this.$el.find(".title").focus()},hide:function(t){this.visible=!1,this.$el.fadeOut("fast"),this.options.closing_callback&&this.options.closing_callback(t),a()(document).off("keyup.ui-modal"),this.$backdrop.off("click")},render:function(){var t=this;if(this.$el.html(this._template()),this.$header=this.$(".modal-header"),this.$dialog=this.$(".modal-dialog"),this.options.extra_class&&this.$dialog.addClass(this.options.extra_class),this.$body=this.$(".modal-body"),this.$footer=this.$(".modal-footer"),this.$backdrop=this.$(".modal-backdrop"),this.$buttons=this.$(".buttons"),"progress"==this.options.body&&(this.options.body=a()('<div class="progress progress-striped active"><div class="progress-bar progress-bar-info" style="width:100%"/></div>')),this.$el.removeClass().addClass("modal").addClass(this.options.cls),this.$header.find(".title").html(this.options.title),this.$body.html(this.options.body),this.$buttons.empty(),this.buttonList={},this.options.buttons){var e=0;a.a.each(this.options.buttons,(function(n,i){var r=a()("<button/>").attr("id","button-".concat(e++)).text(n).click(i);t.$buttons.append(r).append("&nbsp;"),t.buttonList[n]=r}))}else this.$footer.hide();this.$backdrop[this.options.backdrop?"addClass":"removeClass"]("in"),this.$header[this.options.title_separator?"removeClass":"addClass"]("no-separator"),this.$body.removeAttr("style"),this.options.height?(this.$body.css("height",this.options.height),this.$body.css("overflow","hidden")):this.$body.css("max-height",a()(window).height()/2),this.options.width&&this.$dialog.css("width",this.options.width),this.options.xlarge&&this.$dialog.css("max-width","3000px")},getButton:function(t){return this.buttonList[t]},enableButton:function(t){this.getButton(t).prop("disabled",!1)},disableButton:function(t){this.getButton(t).prop("disabled",!0)},showButton:function(t){this.getButton(t).show()},hideButton:function(t){this.getButton(t).hide()},scrollTop:function(){return this.$body.scrollTop()},_template:function(){return'<div class="modal-backdrop fade"/><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="title" tabindex="0"/></div><div class="modal-body"/><div class="modal-footer"><div class="buttons"/></div></div></div>'}});e.a={View:s}},,,function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return u}));var i=n(763),a=n(275);function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var s=new i.a([]),l=s.pipe(Object(a.a)((function(t){return t.length>0}))),c=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=[].concat(r(s.getValue()),e);s.next(i)},d=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=[].concat(e,r(s.getValue()));s.next(i)},u=function(){return s.next([])}},,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(3),o=n(7),s=n.n(o),l=n(21);function c(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function d(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var h;var f,p=function(t){return function(e,n){return e.id==t?-1:n.id==t?1:e.text>n.text?1:e.text<n.text?-1:0}};function m(){var t;return t=regeneratorRuntime.mark((function t(e){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Object(r.getAppRoot)(),"api/remote_files?target=").concat(e),t.prev=1,t.next=4,s.a.get(n);case 4:return i=t.sent,a=i.data,t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(1),Object(l.b)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})),(m=function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){c(r,i,a,o,s,"next",t)}function s(t){c(r,i,a,o,s,"throw",t)}o(void 0)}))}).apply(this,arguments)}e.a={AUTO_EXTENSION:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically. If your file is not detected properly as one of the known formats, it most likely means that it has some format problems (e.g., different number of columns on different rows). You can still coerce the system to set your data to the format you think it should be.  You can also upload compressed files, which will automatically be decompressed."},DEFAULT_GENOME:"?",DEFAULT_EXTENSION:"auto",getRemoteFiles:function(t,e){return a.a.ajax({url:"".concat(Object(r.getAppRoot)(),"api/remote_files"),method:"GET",success:t,error:e})},getRemoteFilesAt:function(t){return m.apply(this,arguments)},getUploadDatatypes:function(t,e){return function(){if(h)return Promise.resolve(h);var t="".concat(Object(r.getAppRoot)(),"api/datatypes?extension_only=False");return s.a.get(t).then((function(t){var e=t.data,n=[];for(var i in e)n.push({id:e[i].extension,text:e[i].extension,description:e[i].description,description_url:e[i].description_url,composite_files:e[i].composite_files});return n.sort((function(t,e){var n=t.text&&t.text.toLowerCase(),i=e.text&&e.text.toLowerCase();return n>i?1:n<i?-1:0})),n})).then((function(t){return h=t,t}))}().then((function(n){var i=d(n);return t||i.unshift(e),i}))},getUploadGenomes:function(t){return function(){if(f)return Promise.resolve(f);var t="".concat(Object(r.getAppRoot)(),"api/genomes");return s.a.get(t).then((function(t){var e=t.data,n=[];for(var i in e)n.push({id:e[i][1],text:e[i][0]});return n})).then((function(t){return f=t,t}))}().then((function(e){var n=d(e);return n.sort(p(t)),n}))}}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(51),c=n(6),d=s.a.Model.extend({initialize:function(t){var e=this.get("key");this.set("id",e);var n=r.default.find([{key:"name",label:"Name",type:"text",default_value:""},{key:"color",label:"Color",type:"color",default_value:null},{key:"min_value",label:"Min Value",type:"float",default_value:null},{key:"max_value",label:"Max Value",type:"float",default_value:null},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:32,hidden:!0},{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"block_color",label:"Block color",type:"color",default_value:null},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"reverse_strand_color",label:"Antisense strand color",type:"color",default_value:null},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0}],(function(t){return t.key===e}));n&&this.set(r.default.extend({},n,t)),void 0===this.get("value")&&void 0!==this.get("default_value")&&(this.set_value(this.get("default_value")),this.get("value")||"color"!==this.get("type")||this.set("value",l.a.get_random_color()))},set_value:function(t,e){var n=this.get("type");"float"===n?t=parseFloat(t):"int"===n&&(t=parseInt(t,10)),this.set({value:t},e)}}),u=s.a.Collection.extend({model:d,to_key_value_dict:function(){var t={};return this.each((function(e){t[e.get("key")]=e.get("value")})),t},get_value:function(t){var e=this.get(t);if(e)return e.get("value")},set_value:function(t,e,n){var i=this.get(t);if(i)return i.set_value(e,n)},set_default_value:function(t,e){var n=this.get(t);if(n)return n.set("default_value",e)}},{from_models_and_saved_values:function(t,e){return e&&(t=r.default.map(t,(function(t){return r.default.extend({},t,{value:e[t.key]})}))),new u(t)}}),h=s.a.View.extend({className:"config-settings-view",render:function(){var t=this.$el;return this.collection.each((function(e,n){if(!e.get("hidden")){var i,o="param_".concat(n),s=e.get("type"),c=e.get("value"),d=a()("<div class='form-row' />").appendTo(t);if(d.append(a()("<label />").attr("for",o).text("".concat(e.get("label"),":"))),"bool"===s)d.append(a()('<input type="checkbox" />').attr("id",o).attr("name",o).attr("checked",c));else if("text"===s)d.append(a()('<input type="text"/>').attr("id",o).val(c).click((function(){a()(this).select()})));else if("select"===s){var u=a()("<select />").attr("id",o);r.default.each(e.get("options"),(function(t){a()("<option/>").text(t.label).attr("value",t.value).appendTo(u)})),u.val(c),d.append(u)}else if("color"===s){var h=a()("<div/>").appendTo(d),f=a()("<input />").attr("id",o).attr("name",o).val(c).css("float","left").appendTo(h).click((function(t){a()(".tooltip").removeClass("in");var e=a()(this).siblings(".tooltip").addClass("in");e.css({left:a()(this).position().left+a()(this).width()+5,top:a()(this).position().top-a()(e).height()/2+a()(this).height()/2}).show(),e.click((function(t){t.stopPropagation()})),a()(document).bind("click.color-picker",(function(){e.hide(),a()(document).unbind("click.color-picker")})),t.stopPropagation()})),p=a()("<a href='javascript:void(0)'/>").addClass("icon-button arrow-circle").appendTo(h).attr("title","Set new random color").tooltip(),m=a()("<div class='tooltip right' style='position: absolute;' />").appendTo(h).hide(),_=a()("<div class='tooltip-inner' style='text-align: inherit'></div>").appendTo(m);a()("<div class='tooltip-arrow'></div>").appendTo(m);var g=a.a.farbtastic(_,{width:100,height:100,callback:f,color:c});h.append(a()("<div/>").css("clear","both")),i=g,p.click((function(){i.setColor(l.a.get_random_color())}))}else d.append(a()("<input />").attr("id",o).attr("name",o).val(c));e.help&&d.append(a()("<div class='help'/>").text(e.help))}})),this},render_in_modal:function(t){var e=this,n=Object(c.a)(),i=function(){n.modal.hide(),a()(window).unbind("keypress.check_enter_esc")},r=function(){n.modal.hide(),a()(window).unbind("keypress.check_enter_esc"),e.update_from_form()};a()(window).bind("keypress.check_enter_esc",(function(t){27===(t.keyCode||t.which)?i():13===(t.keyCode||t.which)&&r()})),0===this.$el.children().length&&this.render(),n.modal.show({title:t||"Configure",body:this.$el,buttons:{Cancel:i,OK:r}})},update_from_form:function(){var t=this;this.collection.each((function(e,n){if(!e.get("hidden")){var i="param_".concat(n),a=t.$el.find("#".concat(i)).val();"bool"===e.get("type")&&(a=t.$el.find("#".concat(i)).is(":checked")),e.set_value(a)}}))}});e.a={ConfigSetting:d,ConfigSettingCollection:u,ConfigSettingCollectionView:h}},,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(13),o=n(12);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.manager=e,this.dragging=!1,this.innerClass="ribbon-inner",this.canvas=document.createElement("div"),this.canvas.style.position="absolute",document.getElementById("canvas-container").appendChild(this.canvas),this.svg=r.select(this.canvas).append("svg"),this.svg.attr("class","ribbon"),n&&i&&this.connect(n,i)}var e,n,i;return e=t,(n=[{key:"connect",value:function(t,e){var n,i;this.outputHandle=t,null===(n=this.outputHandle)||void 0===n||n.connect(this),this.inputHandle=e,null===(i=this.inputHandle)||void 0===i||i.connect(this)}},{key:"destroy",value:function(){var t,e;null===(t=this.outputHandle)||void 0===t||t.disconnect(this),null===(e=this.inputHandle)||void 0===e||e.disconnect(this),this.canvas.remove()}},{key:"destroyIfInvalid",value:function(t){this.outputHandle&&this.inputHandle&&!this.inputHandle.attachable(this.outputHandle).canAccept&&(t&&o.a.warning("Destroying a connection because collection type has changed."),this.destroy())}},{key:"dropStart",value:function(t){this.innerClass=t?"ribbon-inner-valid":"ribbon-inner-invalid"}},{key:"dropEnd",value:function(){this.innerClass="ribbon-inner"}},{key:"redraw",value:function(){var t=this.outputHandle,e=this.inputHandle;if(t&&e){var n=a()("#canvas-container"),i=this.manager.canvasZoom;this.dragging&&(this.canvas.style.zIndex=1e3);var r=function(t){return(a()(t).offset().left-n.offset().left)/i},o=function(t){return(a()(t).offset().top-n.offset().top)/i};if(t&&e){this.canvas.setAttribute("output-handle-id",t.element.getAttribute("id")),this.canvas.setAttribute("input-handle-id",e.element.getAttribute("id"));var s=r(t.element)+8,l=o(t.element)+.5*a()(t.element).height(),c=r(e.element)+8,d=o(e.element)+.5*a()(e.element).height(),u=Math.min(s,c),h=Math.max(s,c),f=Math.min(l,d),p=Math.max(l,d),m=u-100,_=f-100,g=h-u+200,v=p-f+200;this.canvas.style.left="".concat(m,"px"),this.canvas.style.top="".concat(_,"px"),this.svg.style("width","".concat(g,"px")),this.svg.style("height","".concat(v,"px")),s-=m,l-=_,c-=m,d-=_;var y=Math.min(Math.max(Math.abs(p-f)/2,10),30);this.drawRibbon(t,e,y,s,l,c,d)}}}},{key:"drawRibbon",value:function(t,e,n,i,a,r,o){var s=t&&t.isMappedOver(),l=e&&e.isMappedOver(),c=[0],d=[0],u=[-8,-4,0,4,8],h=1;s&&(c=u,h=u.length),l&&(d=u,h=u.length),this.svg.selectAll("*").remove();for(var f=0;f<h;f++){var p=4,m=6;(c.length>1||d.length>1)&&(p=1,m=3),this.drawCurve(i,a,r,o,n,p,m,c[f%c.length],d[f%d.length])}}},{key:"drawCurve",value:function(t,e,n,i,a,o,s,l,c){var d=[{x:t,y:e+(l=l||0)},{x:t+a,y:e+l},{x:n-a,y:i+(c=c||0)},{x:n,y:i+c}],u=r.svg.line().x((function(t){return t.x})).y((function(t){return t.y})).interpolate("basis");this.svg.append("path").attr("class","ribbon-outer").attr("d",u(d)).attr("stroke-width",s).attr("fill","none"),this.svg.append("path").attr("class",this.innerClass).attr("d",u(d)).attr("stroke-width",o).attr("fill","none")}}])&&s(e.prototype,n),i&&s(e,i),t}();e.a=l},function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(2),s=n.n(o),l=n(6),c=s()("Please contact a Galaxy administrator if the problem persists."),d=s()("An error occurred while updating information with the server."),u=s()("The following information can assist the developers in finding the source of the error:");function h(t,e,n){if(t){var i=Object(l.a)();if(t=s()(t),e=s()(e)||s()("Error:"),i&&i.modal)return function(t,e,n){var i=Object(l.a)();return i.modal.show({title:e,body:t,closing_events:!0,buttons:{Ok:function(){i.modal.hide()}}}),i.modal.$el.addClass("error-modal"),n&&(i.modal.$(".error-details").add(i.modal.$('button:contains("Details")')).remove(),r()("<div/>").addClass("error-details").hide().appendTo(i.modal.$(".modal-content")).append([r()("<p/>").text(u),r()("<pre/>").text(JSON.stringify(n,null,"  "))]),r()('<button id="button-1" class="float-left">'.concat(s()("Details"),"</button>")).appendTo(i.modal.$(".buttons")).click((function(){i.modal.$(".error-details").toggle()}))),i.modal}(t,e,n);alert("".concat(e,"\n\n").concat(t)),console.log("error details:",JSON.stringify(n))}}e.a={errorModal:h,offlineErrorModal:function(){return h(s()("You appear to be offline. Please check your connection and try again."),s()("Offline?"))},badGatewayErrorModal:function(){return h("".concat(s()("Galaxy is currently unreachable. Please try again in a few minutes.")," ").concat(c),s()("Cannot connect to Galaxy"))},ajaxErrorModal:function(t,e,n,a,r){return a=a||d,h(a+=" ".concat(c),r=r||s()("An error occurred"),function(t,e,n){var a=Object(l.a)();return{sentry:null==a?void 0:a.Sentry.lastEventId(),userAgent:navigator.userAgent,onLine:navigator.onLine,version:i.default.result(a.config,"version_major"),xhr:i.default.omit(e,i.default.functions(e)),options:i.default.omit(n,"xhr"),url:i.default.result(a.lastAjax,"url"),data:i.default.result(a.lastAjax,"data"),model:i.default.result(t,"toJSON","".concat(t)),user:i.default.omit(i.default.result(a.user,"toJSON"),"email")}}(t,e,n))}}},,function(t,e,n){"use strict";var i=n(4),a=n.n(i),r=n(1),o=n(0),s=n.n(o),l=n(6),c=n(10),d=a.a.Model.extend({defaults:{url_base:"",title_id:void 0,async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},add_filter:function(t,e,n){if(n){var i,a=this.attributes.filters[t];if(null==a)i=e;else if("string"==typeof a)if("All"==a||a==e)i=e;else{var r=[];r[0]=a,r[1]=e,i=r}else-1===(i=a).indexOf(e)&&i.push(e);this.attributes.filters[t]=i}else this.attributes.filters[t]=e},remove_filter:function(t,e){var n=this.attributes.filters[t];if(null==n)return!1;if("string"==typeof n)this.attributes.filters[t]="";else{var i=r.default.indexOf(n,e);-1!==i&&(n[i]="")}},get_url_data:function(){var t={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(t.operation=this.attributes.operation),this.attributes.item_ids&&(t.id=this.attributes.item_ids);return r.default.each(r.default.pairs(this.attributes.filters),(function(e){t["f-".concat(e[0])]=e[1]})),t},get_url:function(t){return"".concat(this.get("url_base"),"?").concat(s.a.param(this.get_url_data()),"&").concat(s.a.param(t))}});function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var f={grid:function(t){var e;return e=t.embedded?this.grid_header(t)+this.grid_table(t):'\n                <div class="loading-elt-overlay"></div>\n                <table class="grid-table">\n                    <tr>\n                        <td width="75%">'.concat(this.grid_header(t),'</td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                    <tr>\n                        <td width="100%" id="grid-message" valign="top"></td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                </table>\n                ').concat(this.grid_table(t),"\n            "),t.info_text&&(e+='<br><div class="toolParamHelp" style="clear: both;">'.concat(t.info_text,"</div>")),e},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(t){var e='<div class="grid-header">';if(!t.embedded){var n="";t.title_id&&(n+=' id="'.concat(t.title_id,'"')),e+="<h2".concat(n,">").concat(t.title,"</h2>")}if(t.global_actions){e+='<ul class="manage-table-actions">';var i=t.global_actions.length>=3;i&&(e+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');var a,r=u(t.global_actions);try{for(r.s();!(a=r.n()).done;){var o=a.value;e+='<li><a class="action-button use-target" target="'.concat(o.target,'" href="').concat(o.url_args,'" onclick="return false;" >').concat(o.label,"</a></li>")}}catch(t){r.e(t)}finally{r.f()}i&&(e+="</div>"),e+="</ul>"}return t.insert&&(e+=t.insert),e+=this.grid_filters(t),e+="</div>"},header:function(t){var e="<tr>";t.show_item_checkboxes&&(e+="<th>",t.items.length>0&&(e+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),e+="</th>");var n,i=u(t.columns);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.visible&&(e+='<th id="'.concat(a.key,'-header">'),a.sortable?e+='<a href="javascript:void(0)" class="sort-link" sort_key="'.concat(a.key,'">').concat(a.label,"</a>"):e+=a.label,e+='<span class="sort-arrow">'.concat(a.extra,"</span></th>"))}}catch(t){i.e(t)}finally{i.f()}return e+="</tr>"},body:function(t){var e="";if(0===t.items.length){var n=t.filters,i=n["free-text-search"]||"",a=n.tags&&"All"!==n.tags?"tags:".concat(n.tags," "):"",r=n.name&&"All"!==n.name?"name:".concat(n.name):"",o=i||"".concat(a).concat(r),l=o?"No matching entries found for <strong>".concat(o,"</strong>"):"No items";e+='<tr><td colspan="100"><em>'.concat(l,"</em></td></tr>")}var c,d=u(t.items);try{for(d.s();!(c=d.n()).done;){var h=c.value;e+="<tr ",t.current_item_id==h.id&&(e+='class="current"'),e+=">",t.show_item_checkboxes&&(e+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'.concat(h.encode_id,'" id="').concat(h.encode_id,'" class="grid-row-select-checkbox" /></td>'));var f,p=u(t.columns);try{for(p.s();!(f=p.n()).done;){var m=f.value;if(m.visible){var _="";m.nowrap&&(_='style="white-space:nowrap;"');var g=h.column_config[m.label],v=g.link,y=g.value,b=g.target;"string"===s.a.type(y)&&(y=y.replace(/\/\//g,"/"));var w="";m.attach_popup&&(w="grid-".concat(h.encode_id,"-popup")),e+="<td ".concat(_,">"),m.delayed?e+='<div class="delayed-value-'.concat(m.key,'" data-id="').concat(h.encode_id,'" data-value="').concat(y,'"><span class="fa fa-spinner fa-spin"></span></div>'):m.attach_popup&&v?e+='<div class="btn-group">\n                                    <button class="btn btn-secondary use-target" target="'.concat(b,'" href="').concat(v,'" onclick="return false;">').concat(y,'</button>\n                                    <button id="').concat(w,'" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"/>\n                                </div>'):m.attach_popup?e+='<button id="'.concat(w,'" class="btn dropdown-toggle" data-toggle="dropdown">').concat(y,"</button>"):e+=v?'<a class="use-target" target="'.concat(b,'" href="').concat(v,'" onclick="return false;">').concat(y,"</a>"):"<label>".concat(y||"","</label>"),e+="</td>"}}}catch(t){p.e(t)}finally{p.f()}e+="</tr>"}}catch(t){d.e(t)}finally{d.f()}return e},footer:function(t){var e="";if(t.use_paging&&t.num_pages>1){var n=t.num_page_links,i=t.cur_page_num,a=t.num_pages,r=n/2,o=i-r,s=0;o<=0&&(s=r-(i-(o=1)));var l,c=r+s,d=i+c;0!==(l=d<=a?0:c-((d=a)+1-i))&&(o-=l)<1&&(o=1),e+='<tr id="page-links-row">',t.show_item_checkboxes&&(e+="<td></td>"),e+='<td colspan="100"><span id="page-link-container">Page:',o>1&&(e+='<span class="page-link-grid" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var h=o;h<d+1;h++)h==t.cur_page_num?e+='<span class="page-link-grid inactive-link" id="page-link-'.concat(h,'">').concat(h,"</span>"):e+='<span class="page-link-grid" id="page-link-'.concat(h,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(h,'">').concat(h,"</a></span>");d<a&&(e+='...<span class="page-link-grid" id="page-link-'.concat(a,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(a,'">').concat(a,"</a></span>")),e+="</span>",e+='\n                    <span class="page-link-grid" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                    </td>\n                </tr>'}if(t.show_item_checkboxes){e+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items: \n            ';var f,p=u(t.operations);try{for(p.s();!(f=p.n()).done;){var m=f.value;m.allow_multiple&&(e+='<input type="button" value="'.concat(m.label,'" class="operation-button action-button">&nbsp;'))}}catch(t){p.e(t)}finally{p.f()}e+="</td></tr>"}var _,g=!1,v=u(t.operations);try{for(v.s();!(_=v.n()).done;){if(_.value.global_operation){g=!0;break}}}catch(t){v.e(t)}finally{v.f()}if(g){e+='<tr><td colspan="100">';var y,b=u(t.operations);try{for(b.s();!(y=b.n()).done;){var w=y.value;w.global_operation&&(e+='<a class="action-button" href="'.concat(w.global_operation,'">').concat(w.label,"</a>"))}}catch(t){b.e(t)}finally{b.f()}e+="</td></tr>"}return t.legend&&(e+='<tr><td colspan="100">'.concat(t.legend,"</td></tr>")),e},message:function(t){var e=t.status;return-1!=["success","ok"].indexOf(e)&&(e="done"),'<p><div class="'.concat(e,'message transient-message">').concat(r.default.escape(t.message),'</div><div style="clear: both"></div></p>')},grid_filters:function(t){var e=t.default_filter_dict,n=t.filters,i="none";t.advanced_search&&(i="block");var a,r=!1,o=u(t.columns);try{for(o.s();!(a=o.n()).done;){var s=a.value;if("advanced"==s.filterable){var l=s.key,c=n[l],d=e[l];c&&d&&c!=d&&(i="block"),r=!0}}}catch(t){o.e(t)}finally{o.f()}var h="block";"block"==i&&(h="none");var f,p='<div id="standard-search" style="display: '.concat(h,';"><table><tr><td style="padding: 0;"><table>'),m=u(t.columns);try{for(m.s();!(f=m.n()).done;){var _=f.value;"standard"==_.filterable&&(p+=this.grid_column_filter(t,_))}}catch(t){m.e(t)}finally{m.f()}p+="</table></td></tr><tr><td>",r&&(p+='<a href="javascript:void(0)" class="advanced-search-toggle">Advanced Search</a>'),p+="</td></tr></table></div>",p+='<div id="advanced-search" style="display: '.concat(i,'; margin-top: 5px;"><table><tr><td style="text-align: left" colspan="100"><a href="javascript:void(0)" class="advanced-search-toggle">Close Advanced Search</a></td></tr>');var g,v=u(t.columns);try{for(v.s();!(g=v.n()).done;){var y=g.value;"advanced"==y.filterable&&(p+=this.grid_column_filter(t,y))}}catch(t){v.e(t)}finally{v.f()}return p+="</table></div>"},grid_column_filter:function(t,e){var n=t.filters,i=e.label,a=e.key;"advanced"==e.filterable&&(i=i.toLowerCase());var r="<tr>";if("advanced"==e.filterable&&(r+='<td align="left" style="padding-left: 10px">'.concat(i,":</td>")),r+='<td style="padding-bottom: 1px;">',e.is_text){r+='<form class="text-filter-form" column_key="'.concat(a,'" action="').concat(t.url,'" method="get" >');var o,l=u(t.columns);try{for(l.s();!(o=l.n()).done;){var c=o.value,d=n[c.key];d&&"All"!=d&&(c.is_text&&(d=JSON.stringify(d)),r+='<input type="hidden" id="'.concat(c.key,'" name="f-').concat(c.key,'" value="').concat(d,'"/>'))}}catch(t){l.e(t)}finally{l.f()}r+='<span id="'.concat(a,'-filtering-criteria">');var h=n[a];if(h){var f=s.a.type(h);if("string"==f&&"All"!=h&&(r+=this.filter_element(a,h)),"array"==f)for(var p in h){h.slice(p),r+=this.filter_element(a,h[p])}}r+="</span>";var m="",_=20;"standard"==e.filterable&&((m=e.label.toLowerCase()).length<20&&(_=m.length),_+=4),r+='\n                <span class="search-box">\n                    <input class="search-box-input" id="input-'.concat(a,'-filter" name="f-').concat(a,'" type="text" placeholder="').concat(m,'" size="').concat(_,'"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>')}else{r+='<span id="'.concat(a,'-filtering-criteria">');var g=!1;for(var v in t.categorical_filters[a]){var y=t.categorical_filters[a][v],b="",w="";for(var k in y)b=k,w=y[k];g&&(r+=" | "),g=!0;var x=n[a];x&&y[a]&&x==w?r+='<span class="categorical-filter '.concat(a,'-filter current-filter">').concat(v,"</span>"):r+='<span class="categorical-filter '.concat(a,'-filter"><a href="javascript:void(0);" filter_key="').concat(b,'" filter_val="').concat(w,'">').concat(v,"</a></span>")}r+="</span>"}return r+="</td></tr>"},filter_element:function(t,e){return e=c.b.sanitize(e),'<span class="text-filter-val">'.concat(e,'<a href="javascript:void(0);" filter_key="').concat(t,'" filter_val="').concat(e,'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>')}},p=n(163),m=n(153),_=n(138),g=n(101),v=n(483),y=n.n(v);s.a.ajaxSettings.traditional=!0;e.a=a.a.View.extend({grid:null,initialize:function(t){this.grid=new d,this.title=t.title,this.active_tab=t.active_tab;var e=this;if(g.a.watch((function(t){return t.gridSearch.searchTags}),(function(t){var n=Array.from(t);e.grid.add_filter("tags",n,!1),e.openAdvancedSearch(),e.render_filter_button("tags",n),e.go_page_one(),e.execute()})),t.url_base&&!t.items){m.a.markViewAsLoading(this);var n=t.url_data||{};r.default.each(t.filters,(function(t,e){n["f-".concat(e)]=t})),s.a.ajax({url:"".concat(t.url_base,"?").concat(s.a.param(n)),success:function(n){n.embedded=t.embedded,n.filters=t.filters||{},e.init_grid(n)}})}else this.setElement("<div>"),this.init_grid(t);t.use_panels&&s()("#center").css({padding:"10px",overflow:"auto"})},openAdvancedSearch:function(){s()("#advanced-search").is(":visible")||(s()("#standard-search").slideToggle("fast"),s()("#advanced-search").slideToggle("fast"))},handle_refresh:function(t){if(t&&s.a.inArray("history",t)>-1){var e=Object(l.a)();e&&e.currHistoryPanel&&e.currHistoryPanel.loadCurrentHistory()}},init_grid:function(t){this.grid.set(t);var e=this.grid.attributes;this.allow_title_display&&e.title&&c.b.setWindowTitle(e.title),this.handle_refresh(e.refresh_frames);var n=this.grid.get("url_base");if(n=n.replace(/^.*\/\/[^/]+/,""),this.grid.set("url_base",n),this.$el.html(f.grid(e)),this.$el.addClass(this.getRootClassName(t)),this.$el.find("#grid-table-header").html(f.header(e)),this.$el.find("#grid-table-body").html(f.body(e)),this.$el.find("#grid-table-footer").html(f.footer(e)),e.message){this.$el.find("#grid-message").html(f.message(e));var i=this;e.use_hide_message&&window.setTimeout((function(){i.$el.find("#grid-message").html("")}),5e3)}this.init_grid_elements(),this.init_grid_controls(),Object(_.a)()},init_grid_controls:function(){var t=this;this.$el.find(".operation-button").each((function(){s()(this).off(),s()(this).click((function(){return t.submit_operation(this),!1}))})),this.$el.find("input[type=text]").each((function(){s()(this).off(),s()(this).click((function(){s()(this).select()})).keyup((function(){s()(this).css("font-style","normal")}))})),this.$el.find(".sort-link").each((function(){s()(this).off(),s()(this).click((function(){return t.set_sort_condition(s()(this).attr("sort_key")),!1}))})),this.$el.find(".text-filter-form").each((function(){s()(this).off(),s()(this).submit((function(){var e=s()(this).attr("column_key"),n=s()("#input-".concat(e,"-filter")),i=n.val();return n.val(""),t.add_filter_condition(e,i),!1}))})),this.$el.find(".text-filter-val > a").each((function(){s()(this).off(),s()(this).click((function(){return s()(this).parent().remove(),t.remove_filter_condition(s()(this).attr("filter_key"),s()(this).attr("filter_val")),!1}))})),this.$el.find(".categorical-filter > a").each((function(){s()(this).off(),s()(this).click((function(){return t.set_categorical_filter(s()(this).attr("filter_key"),s()(this).attr("filter_val")),!1}))})),this.$el.find(".advanced-search-toggle").each((function(){s()(this).off(),s()(this).click((function(){return t.$el.find("#standard-search").slideToggle("fast"),t.$el.find("#advanced-search").slideToggle("fast"),!1}))})),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",(function(){t.check_all_items()}))},init_grid_elements:function(){this.$el.find(".grid").each((function(){var t=s()(this).find("input.grid-row-select-checkbox"),e=s()(this).find("span.grid-selected-count"),n=function(){e.text(s()(t).filter(":checked").length)};s()(t).each((function(){s()(this).change(n)})),n()})),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var t=this.grid.attributes,e=this;this.$el.find(".page-link-grid > a").each((function(){s()(this).click((function(){return e.set_page(s()(this).attr("page_num")),!1}))})),this.$el.find(".use-target").each((function(){s()(this).click((function(){return e.execute({href:s()(this).attr("href"),target:s()(this).attr("target")}),!1}))})),0!==t.items.length&&r.default.each(t.items,(function(n,i){var a=e.$("#grid-".concat(n.encode_id,"-popup")).off(),o=new p.a(a);r.default.each(t.operations,(function(t){e.add_operation(o,t,n)}))}))},add_operation:function(t,e,n){var i=this,a=n.operation_config[e.label];a.allowed&&e.allow_popup&&t.addItem({html:e.label,href:a.url_args,target:a.target,confirmation_text:e.confirm,func:function(t){t.preventDefault();var a=s()(t.target).html();e.onclick?e.onclick(n.encode_id):i.execute(this.findItemByHtml(a))}})},add_filter_condition:function(t,e){if(""===e)return!1;this.grid.add_filter(t,e,!0),this.render_filter_button(t,e),this.go_page_one(),this.execute()},render_filter_button:function(t,e){var n=s()(f.filter_element(t,e)),i=this;n.click((function(){s()(this).remove(),i.remove_filter_condition(t,e)})),this.$el.find("#".concat(t,"-filtering-criteria")).append(n)},remove_filter_condition:function(t,e){this.grid.remove_filter(t,e),"tags"==t&&g.a.dispatch("removeSearchTag",{text:e}),this.go_page_one(),this.execute()},set_sort_condition:function(t){var e=this.grid.get("sort_key"),n=t;-1!==e.indexOf(t)&&"-"!==e.substring(0,1)&&(n="-".concat(t)),this.$el.find(".sort-arrow").remove();var i="-"==n.substring(0,1)?"&uarr;":"&darr;",a=s()("<span>".concat(i,"</span>")).addClass("sort-arrow");this.$el.find("#".concat(t,"-header")).append(a),this.grid.set("sort_key",n),this.go_page_one(),this.execute()},set_categorical_filter:function(t,e){var n=this.grid.get("categorical_filters")[t],i=this.grid.get("filters")[t],a=this;this.$el.find(".".concat(t,"-filter")).each((function(){var r=s.a.trim(s()(this).text()),o=n[r][t];if(o==e)s()(this).empty(),s()(this).addClass("current-filter"),s()(this).append(r);else if(o==i){s()(this).empty();var l=s()('<a href="javascript:void(0)" role="button">'.concat(r,"</a>"));l.click((function(){a.set_categorical_filter(t,o)})),s()(this).removeClass("current-filter"),s()(this).append(l)}})),this.grid.add_filter(t,e),this.go_page_one(),this.execute()},set_page:function(t){var e=this;this.$el.find(".page-link").each((function(){var n,i=s()(this).attr("id"),a=parseInt(i.split("-")[2],10),r=e.grid.get("cur_page");if(a===t)n=s()(this).children().text(),s()(this).empty(),s()(this).addClass("inactive-link"),s()(this).text(n);else if(a===r){n=s()(this).text(),s()(this).empty(),s()(this).removeClass("inactive-link");var o=s()('<a href="javascript:void(0)" role="button">'.concat(n,"</a>"));o.click((function(){e.set_page(a)})),s()(this).append(o)}})),"all"===t?this.grid.set("cur_page",t):this.grid.set("cur_page",parseInt(t,10)),this.execute()},submit_operation:function(t,e){var n=s()(t).val();if(this.$el.find('input[name="id"]:checked').length<1)return!1;var i=r.default.findWhere(this.grid.attributes.operations,{label:n});i&&!e&&(e=i.confirm||"");var a=[];this.$el.find("input[name=id]:checked").each((function(){a.push(s()(this).val())}));var o={operation:n,id:a,confirmation_text:e};return"top"!=i.target&&"center"!=i.target||(o=r.default.extend(o,{href:i.href,target:i.target})),this.execute(o),!0},check_all_items:function(){var t=this.$(".grid-row-select-checkbox"),e=this.$("#check_all").prop("checked");r.default.each(t,(function(t){s()(t).prop("checked",e)})),this.init_grid_elements()},go_page_one:function(){var t=this.grid.get("cur_page");null!=t&&"all"!==t&&this.grid.set("cur_page",1)},execute:function(t){var e=null,n=null,i=null,a=null,r=null;if(t&&(n=t.href,i=t.operation,e=t.id,a=t.confirmation_text,r=t.target,void 0!==n&&-1!=n.indexOf("operation="))){var o=n.split("?");if(o.length>1)for(var l=o[1].split("&"),c=0;c<l.length;c++)-1!=l[c].indexOf("operation")?i=(i=l[c].split("=")[1]).replace(/\+/g," "):-1!=l[c].indexOf("id")&&(e=l[c].split("=")[1])}return i&&e?!(a&&""!==a&&"None"!=a&&"null"!=a&&!window.confirm(a))&&(i=i.toLowerCase(),this.grid.set({operation:i,item_ids:e}),"top"==r?window.top.location="".concat(n,"?").concat(s.a.param(this.grid.get_url_data())):"center"==r?s()("#galaxy_main").attr("src","".concat(n,"?").concat(s.a.param(this.grid.get_url_data()))):this.update_grid(),!1):n?(this.go_to(r,n),!1):(this.update_grid(),!1)},go_to:function(t,e){var n=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",n),e||(e="".concat(this.grid.get("url_base"),"?").concat(s.a.param(this.grid.get_url_data()))),this.grid.set({operation:void 0,item_ids:void 0}),t){case"center":s()("#galaxy_main").attr("src",e);break;case"top":window.top.location=e;break;default:window.location=e}},update_grid:function(){var t=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var e=this;s.a.ajax({type:t,url:e.grid.get("url_base"),data:e.grid.get_url_data(),error:function(){alert("Grid refresh failed")},success:function(t){var n=e.grid.get("embedded"),i=e.grid.get("insert"),a=e.$el.find("#advanced-search").is(":visible"),r=t;r.embedded=n,r.insert=i,r.advanced_search=a,e.init_grid(r),e.$el.find(".loading-elt-overlay").hide()},complete:function(){e.grid.set({operation:void 0,item_ids:void 0})}})},getRootClassName:function(t){var e=t.title,n=void 0===e?"grid":e;return y()(n).toLowerCase()}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return E})),n.d(e,"e",(function(){return I})),n.d(e,"g",(function(){return P})),n.d(e,"f",(function(){return Y})),n.d(e,"c",(function(){return R})),n.d(e,"d",(function(){return H})),n.d(e,"b",(function(){return N}));var i=n(1),a=n(0),r=n.n(a),o=n(3),s=n(2),l=n.n(s),c=n(7),d=n.n(c),u=n(6),h=n(10),f=n(57),p=n(237),m=n(112),_=n(19);function g(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var S=function t(e){x(this,t);var n=this,i=e.node,a=e.workflow;this.workflow=a,C(this,i);var r={};"subworkflow"==i.type&&(r.edit_subworkflow=new _.a.Button({tooltip:l()("Edit targeted subworkflow at its newest version. You'll need to return here and upgrade this workflow step after."),icon:"fa-pencil-alt",onclick:function(){a.onEditSubworkflow(i.content_id)}}),r.upgrade_subworkflow=new _.a.Button({tooltip:l()("Attempt to upgrade this step to latest version of this subworkflow."),icon:"fa-cubes",onclick:function(){a.onAttemptRefactor([{action_type:"upgrade_subworkflow",step:{order_index:parseInt(i.id)}}])}})),this.form=new f.a(w(w({},i.config_form),{},{icon:m.a[i.type],operations:r,cls:"ui-portlet-section",onchange:function(){d.a.post("".concat(Object(o.getAppRoot)(),"api/workflows/build_module"),{id:i.id,type:i.type,content_id:i.content_id,inputs:n.form.data.create()}).then((function(t){var e=t.data;i.updateData(e)}))}}))},M=function(){function t(e){x(this,t);var n=this,i=e.node;this.workflow=e.workflow,this.datatypes=e.datatypes,this._customize(i),this.form=new p.a(w(w({},i.config_form),{},{tool_version:i.config_form.version,icon:m.a[i.type],text_enable:"Set in Advance",text_disable:"Set at Runtime",narrow:!0,initial_errors:!0,cls:"ui-portlet-section",postchange:function(t,e){var a=Object(u.a)(),r=e.model.attributes,s={tool_id:r.id,tool_version:r.version,type:"tool",inputs:Object.assign({},e.data.create())};a.emit.debug("tool-form-workflow::postchange()","Sending current state.",s),d.a.post("".concat(Object(o.getAppRoot)(),"api/workflows/build_module"),s).then((function(e){var r=e.data;i.updateData(r),n.form.model.set(i.config_form),n.form.update(i.config_form),n.form.errors(i.config_form),n._customize(i),a.emit.debug("tool-form-workflow::postchange()","Received new model.",r),t.resolve()})).catch((function(e){a.emit.debug("tool-form-workflow::postchange()","Refresh request failed.",e),t.reject()}))}}))}var e,n,i;return e=t,(n=[{key:"_customize",value:function(t){var e=t.config_form.inputs;h.b.deepeach(e,(function(t){t.type&&(-1!=["data","data_collection","hidden"].indexOf(t.type)?(t.type="hidden",t.info="Data input '".concat(t.name,"' (").concat(h.b.textify(t.extensions),")"),t.value={__class__:"RuntimeValue"}):t.fixed||(t.connectable=!0,t.collapsible_value={__class__:"RuntimeValue"},t.is_workflow=t.options&&0===t.options.length||-1!=["integer","float"].indexOf(t.type)))})),h.b.deepeach(e,(function(t){"conditional"===t.type&&(t.connectable=!1,t.test_param.collapsible_value=void 0)})),function(t,e){var n=e.config_form.inputs,i=e.postJobActions,a=e.outputs.length>0&&e.outputs[0];if(a){n.push({name:"pja__".concat(a.name,"__EmailAction"),label:"Email notification",type:"boolean",value:String(Boolean(i["EmailAction".concat(a.name)])),ignore:"false",help:l()("An email notification will be sent when the job has completed."),payload:{host:window.location.host},skipOnClone:!0}),n.push({name:"pja__".concat(a.name,"__DeleteIntermediatesAction"),label:"Output cleanup",type:"boolean",value:String(Boolean(i["DeleteIntermediatesAction".concat(a.name)])),ignore:"false",help:"Upon completion of this step, delete non-starred outputs from completed workflow steps if they are no longer required as inputs.",skipOnClone:!0});var r,o=g(e.outputs);try{for(o.s();!(r=o.n()).done;){var s=r.value;n.push(T(t,e,s))}}catch(t){o.e(t)}finally{o.f()}}}(this,t),C(this,t)}}])&&y(e.prototype,n),i&&y(e,i),t}();function C(t,e){var n=t.workflow,i=e.config_form.inputs;i.unshift({skipOnClone:!0,type:"text",name:"__annotation",label:"Step Annotation",fixed:!0,value:e.annotation,area:!0,onchange:function(t){e.setAnnotation(t)},help:"Add an annotation or notes to this step. Annotations are available when a workflow is viewed."}),i.unshift({skipOnClone:!0,type:"text",name:"__label",label:"Label",value:e.label,help:l()("Add a step label."),fixed:!0,onchange:function(i){e.setLabel(i);var a=!1;for(var r in n.nodes){var o=n.nodes[r];if(o.label&&o.label==i&&o.id!=e.id){a=!0;break}}t.form.data.create();var s=t.form.data.match("__label");t.form.element_list[s].model.set("error_text",a&&"Duplicate label. Please fix this before saving the workflow.")}})}function T(t,e,n){var i=[],a=[],r=t.datatypes;for(var o in r)i.push({0:r[o],1:r[o]});var s,c=g(e.inputs);try{for(c.s();!(s=c.n()).done;){var d=s.value;a.push({name:d.name,label:d.label})}}catch(t){c.e(t)}finally{c.f()}var u,h=(u='This action will rename the output dataset. Click <a href="https://galaxyproject.org/learn/advanced-workflow/variables/">here</a> for more information. Valid input variables are:',u+="\n        <ul>\n            ".concat(a.map((function(t){return"<li><strong>".concat(t.name.replace(/\|/g,"."),"</strong>\n                                                         ").concat(t.label?"(".concat(t.label,")"):"","\n                                             </li>")})).join(""),"\n        </ul>\n    "));i.sort((function(t,e){return t.label>e.label?1:t.label<e.label?-1:0})),i.unshift({0:"Sequences",1:"Sequences"}),i.unshift({0:"Roadmaps",1:"Roadmaps"}),i.unshift({0:"Leave unchanged",1:"__empty__"});var f=e.activeOutputs.get(n.name),p=n.label||n.name,m={skipOnClone:!0,title:"Configure Output: '".concat(p,"'"),type:"section",flat:!0,inputs:[{label:"Label",name:"__label__".concat(n.name),type:"text",value:f&&f.label,help:"This will provide a short name to describe the output - this must be unique across workflows.",fixed:!0,onchange:function(i){t.form.data.create();var a=e.labelOutput(n.name,i),r=t.form.data.match("__label__".concat(n.name)),o=t.form.element_list[r];a?(o.field.model.set("value",a),o.model.set("error_text","Duplicate output label '".concat(i,"' will be ignored."))):o.model.set("error_text",""),t.form.trigger("change")}},{action:"RenameDatasetAction",pja_arg:"newname",label:"Rename dataset",type:"text",value:"",ignore:"",help:h},{action:"ChangeDatatypeAction",pja_arg:"newtype",label:"Change datatype",type:"select",ignore:"__empty__",value:"__empty__",options:i,help:"This action will change the datatype of the output to the indicated datatype.",onchange:function(t){e.changeOutputDatatype(n.name,t)}},{action:"TagDatasetAction",pja_arg:"tags",label:"Add Tags",type:"text",value:"",ignore:"",help:"This action will set tags for the dataset."},{action:"RemoveTagDatasetAction",pja_arg:"tags",label:"Remove Tags",type:"text",value:"",ignore:"",help:"This action will remove tags for the dataset."},{title:l()("Assign columns"),type:"section",flat:!0,inputs:[{action:"ColumnSetAction",pja_arg:"chromCol",label:"Chrom column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"startCol",label:"Start column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"endCol",label:"End column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"strandCol",label:"Strand column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"nameCol",label:"Name column",type:"integer",value:"",ignore:""}],help:"This action will set column assignments in the output dataset. Blank fields are ignored."}]};return function t(e,n,i,a){var r=a.postJobActions;for(var o in(n=n||[]).push(e),e.inputs){var s=e.inputs[o];if(s.action){if(s.name="pja__".concat(i.name,"__").concat(s.action),s.pja_arg&&(s.name+="__".concat(s.pja_arg)),s.payload)for(var l in s.payload)s.payload["".concat(s.name,"__").concat(l)]=s.payload[l],delete s.payload[l];var c=r[s.action+i.name];if(c){for(var d in n)n[d].expanded=!0;s.pja_arg?s.value=c.action_arguments&&c.action_arguments[s.pja_arg]||s.value:s.value="true"}}s.inputs&&t(s,n.slice(0),i,a)}}(m,[],n,e),m}var j=n(68),O=n(95),L=n(27);function D(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=function(){t.onWorkflowMessage("Importing workflow","progress"),Object(j.d)(t,e,null,!0).then((function(e){var n=R(e);t.onInsertedStateMessages(n)}))};n<2?i():Object(L.e)(l()("Warning"),"This will copy ".concat(n," new steps into your workflow."),{Cancel:function(){t.hideModal()},Copy:i})}function I(){r()(".right-content").hide(),r()("#edit-attributes").show()}function P(){r()(".right-content").hide(),r()("#lint-panel").show()}function Y(t,e,n){if(e&&e.config_form&&Object.keys(e.config_form).length>0){var i="right-content",a="".concat(i,"-").concat(e.id),o=r()("#".concat(i));if(0===o.find("#".concat(a)).length){var s=r()('<div id="'.concat(a,'" class="').concat(i,'"/>')),l={node:e,workflow:t,datatypes:n},c=null;c="tool"==e.type?new M(l):new S(l),s.append(c.form.$el),o.append(s)}r()(".".concat(i)).hide(),o.find("#".concat(a)).show(),o.show(),o.scrollTop()}}function R(t){var e=[];return i.default.each(t.steps,(function(n,a){var r=[];if(n.errors&&r.push(n.errors),i.default.each(t.upgrade_messages[a],(function(t){r.push(t)})),r.length){var o=m.a[n.type],s={stepIndex:a,name:n.name,details:r,iconType:o,label:n.label};e.push(s)}})),e}function H(t){var e=r()('<form><label style="display:inline-block; width: 100%;">Save as name: </label><input type="text" id="workflow_rename" style="width: 80%;" autofocus/><br><label style="display:inline-block; width: 100%;">Annotation: </label><input type="text" id="wf_annotation" style="width: 80%;" /></form>');Object(L.e)("Save As a New Workflow",e,{OK:function(){var e=r()("#workflow_rename").val().length>0?r()("#workflow_rename").val():"SavedAs_".concat(t.name),n=r()("#wf_annotation").val().length>0?r()("#wf_annotation").val():"";r.a.ajax({url:"".concat(Object(o.getAppRoot)(),"workflow/save_workflow_as"),type:"POST",data:{workflow_name:e,workflow_annotation:n,from_tool_form:!0,workflow_data:function(){return JSON.stringify(Object(O.b)(t))}}}).done((function(e){t.onNavigate("".concat(Object(o.getAppRoot)(),"workflow/editor?id=").concat(e),!0)})).fail((function(e){console.debug(e),t.onWorkflowError("Saving this workflow failed. Please contact this site's administrator.",e)}))},Cancel:function(){t.hideModal()}})}function N(t,e,n){var i,a=[],r=new Map,o=D(t.entries());try{for(o.s();!(i=o.n()).done;){var s,l=i.value,c=l[1].i_extensions,d=D(e.entries());try{for(d.s();!(s=d.n()).done;){var u,h=s.value,f=D(c.entries());try{for(f.s();!(u=f.n()).done;){var p=u.value;if(n.isSubType(h[1],p[1])||"input"===h[1]||"_sniff_"===h[1]||"input_collection"===h[1]){var m=l[1].tool_id;if(!r.has(m)){r.set(m,!0),a.push({id:m,name:l[1].name});break}}}}catch(t){f.e(t)}finally{f.f()}}}catch(t){d.e(t)}finally{d.f()}}}catch(t){o.e(t)}finally{o.f()}return a}},function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return v}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(6),c=n(3),d=n(135),u=n(195),h=n(10),f=n(11),p=n(2),m=n.n(p),_=s.a.Model.extend(f.a.LoggableMixin).extend(f.a.mixin(f.a.SearchableModelMixin,{_logNamespace:"history",UPDATE_DELAY:4e3,defaults:{model_class:"History",id:null,name:"Unnamed History",state:"new",deleted:!1,contents_active:{},contents_states:{}},contentsClass:d.a,searchAttributes:["name","annotation","tags"],searchAliases:{title:"name",tag:"tags"},initialize:function(t,e){e=e||{},this.logger=e.logger||null,this.log("".concat(this,".initialize:"),t,e),this.urlRoot="".concat(Object(c.getAppRoot)(),"api/histories"),this.contents=new this.contentsClass([],{history:this,historyId:this.get("id"),order:e.order}),this._setUpListeners(),this._setUpCollectionListeners(),this.updateTimeoutId=null},_setUpListeners:function(){return this.on({error:function(t,e,n,i,a){this.clearUpdateTimeout()},"change:id":function(t,e){this.contents&&(this.contents.historyId=e)}})},_setUpCollectionListeners:function(){return this.contents?this.listenTo(this.contents,{error:function(){this.trigger.apply(this,r.a.makeArray(arguments))}}):this},contentsShown:function(){var t=this.get("contents_active"),e=t.active||0;return e+=this.contents.includeDeleted?t.deleted:0,e+=this.contents.includeHidden?t.hidden:0},nice_size:function(){var t=this.get("size");return t?h.b.bytesToString(t,!0,2):m()("(empty)")},toJSON:function(){return i.default.extend(s.a.Model.prototype.toJSON.call(this),{nice_size:this.nice_size()})},get:function(t){return"nice_size"===t?this.nice_size():s.a.Model.prototype.get.apply(this,arguments)},ownedByCurrUser:function(){var t=Object(l.a)();return!(!t||!t.user)&&(!t.user.isAnonymous()&&t.user.id===this.get("user_id"))},numOfUnfinishedJobs:function(){var t=this.get("non_ready_jobs");return t?t.length:0},numOfUnfinishedShownContents:function(){return this.contents.runningAndActive().length||0},_fetchContentRelatedAttributes:function(){return this.fetch({data:r.a.param({keys:["size","non_ready_jobs","contents_active","hid_counter"].join(",")})})},refresh:function(t){var e=this;t=t||{};var n=this.lastUpdateTime;return this.contents.allFetched=!1,(0!==this.contents.currentPage?function(){return e.contents.fetchPage(e.contents.currentPage)}:function(){return e.contents.fetchUpdated(n)})().done((function(n,i,a){var r;try{r=new Date(a.getResponseHeader("Date"))}catch(t){console.error(t)}e.lastUpdateTime=r||new Date,e.checkForUpdates(t)}))},checkForUpdates:function(t){var e=this;t=t||{};var n=this.UPDATE_DELAY;if(this.id){var i=function(){e.clearUpdateTimeout(),e.updateTimeoutId=setTimeout((function(){e.refresh(t)}),n)};this.numOfUnfinishedShownContents()>0?i():this._fetchContentRelatedAttributes().done((function(t){e.numOfUnfinishedJobs()>0?i():e.trigger("ready")}))}},clearUpdateTimeout:function(){this.updateTimeoutId&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)},stopPolling:function(){this.clearUpdateTimeout(),this.contents&&this.contents.stopPolling()},parse:function(t,e){var n=s.a.Model.prototype.parse.call(this,t,e);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},fetchWithContents:function(t,e){var n=this;return(t=t||{}).view="dev-detailed",this.fetch(t).then((function(t){return n.contents.history=n,n.contents.setHistoryId(t.id),n.fetchContents(e)}))},fetchContents:function(t){return t=t||{},this.lastUpdateTime=new Date,this.contents.fetchCurrentPage(t)},_delete:function(t){return this.get("deleted")?r.a.when():this.save({deleted:!0},t)},purge:function(t){return this.get("purged")?r.a.when():this.save({deleted:!0,purged:!0},t)},undelete:function(t){return this.get("deleted")?this.save({deleted:!1},t):r.a.when()},copy:function(t,e,n){if(t=void 0===t||t,!this.id)throw new Error("You must set the history ID before copying it.");var i={history_id:this.id};t&&(i.current=!0),e&&(i.name=e),n||(i.all_datasets=!1),i.view="dev-detailed";var a=this,o=r.a.post(this.urlRoot,i);return t?o.then((function(t){return new _(t).setAsCurrent().done((function(){a.trigger("copied",a,t)}))})):o.done((function(t){a.trigger("copied",a,t)}))},setAsCurrent:function(){var t=this,e=r.a.getJSON("".concat(Object(c.getAppRoot)(),"history/set_as_current?id=").concat(this.id));return e.done((function(){t.trigger("set-as-current",t)})),e},toString:function(){return"History(".concat(this.get("id"),",").concat(this.get("name"),")")}})),g=u.a.InfinitelyScrollingCollection,v=g.extend(f.a.LoggableMixin).extend({_logNamespace:"history",model:_,order:"update_time",limitOnFirstFetch:10,limitPerFetch:10,initialize:function(t,e){e=e||{},this.log("HistoryCollection.initialize",t,e),this.urlRoot="".concat(Object(c.getAppRoot)(),"api/histories"),g.prototype.initialize.call(this,t,e),this.includeDeleted=e.includeDeleted||!1,this.currentHistoryId=e.currentHistoryId,this.setUpListeners()},url:function(){return this.urlRoot},setUpListeners:function(){return this.on({"change:deleted":function(t){this.debug("change:deleted",this.includeDeleted,t.get("deleted")),!this.includeDeleted&&t.get("deleted")&&this.remove(t)},copied:function(t,e){this.setCurrent(new _(e,[]))},"set-as-current":function(t){var e=this.currentHistoryId;this.trigger("no-longer-current",e),this.currentHistoryId=t.id}})},_buildFetchData:function(t){return i.default.extend(g.prototype._buildFetchData.call(this,t),{view:"dev-detailed"})},_buildFetchFilters:function(t){var e=g.prototype._buildFetchFilters.call(this,t)||{},n={};return!0!==this.includeDeleted?(n.deleted=!1,n.purged=!1):n.deleted=null,i.default.defaults(e,n)},fetchFirst:function(t){var e=this,n=r.a.when();return this.currentHistoryId&&(n=g.prototype.fetchFirst.call(this,{silent:!0,limit:1,filters:{"encoded_id-in":this.currentHistoryId,deleted:null,purged:""}})),n.then((function(){return(t=t||{}).offset=0,e.fetchMore(t)}))},comparators:i.default.extend(i.default.clone(g.prototype.comparators),{name:f.a.buildComparator("name",{ascending:!0}),"name-dsc":f.a.buildComparator("name",{ascending:!1}),size:f.a.buildComparator("size",{ascending:!1}),"size-asc":f.a.buildComparator("size",{ascending:!0})}),sort:function(t){var e=(t=t||{}).silent,n=this.remove(this.get(this.currentHistoryId));return g.prototype.sort.call(this,i.default.defaults({silent:!0},t)),this.unshift(n,{silent:!0}),e||this.trigger("sort",this,t),this},create:function(t,e,n,i){var a=this;return r.a.getJSON("".concat(Object(c.getAppRoot)(),"history/create_new_current")).done((function(t){a.setCurrent(new _(t,[],n||{}))}))},setCurrent:function(t,e){return e=e||{},this.unshift(t,e),this.currentHistoryId=t.get("id"),e.silent||this.trigger("new-current",t,this),this},toString:function(){return"HistoryCollection(".concat(this.length,",current:").concat(this.currentHistoryId,")")}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(89);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=document.getElementsByTagName("link"),n=Array.from(e).find((function(t){return"index"==t.rel}));return n&&n.href?Object(i.a)(n.href):t}},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return new URL(t).pathname}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";var i,a,r,o=n(1),s=n(0),l=n.n(s),c=n(63),d=n(96),u=n(11),h=n(2),f=n.n(h),p=c.a.extend({className:"".concat(c.a.prototype.className," dataset-collection"),id:function(){return["dataset_collection",this.model.get("id")].join("-")},initialize:function(t){this.linkTarget=t.linkTarget||"_blank",this.hasUser=t.hasUser,c.a.prototype.initialize.call(this,t)},_setUpListeners:function(){c.a.prototype._setUpListeners.call(this),this.listenTo(this.model,"change",(function(t,e){o.default.has(t.changed,"deleted")?this.render():o.default.has(t.changed,"element_count")&&this.$("> .title-bar .subtitle").replaceWith(this._renderSubtitle())}))},_renderSubtitle:function(){return l()(this.templates.subtitle(this.model.toJSON(),this))},_getFoldoutPanelOptions:function(){var t=c.a.prototype._getFoldoutPanelOptions.call(this);return o.default.extend(t,{linkTarget:this.linkTarget,hasUser:this.hasUser})},$selector:function(){return this.$("> .selector")},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"DCListItemView(".concat(t,")")}});p.prototype.templates=(i=o.default.extend({},c.a.prototype.templates.warnings,{error:u.a.wrapTemplate(["<% if( model.error ){ %>",'<div class="errormessagesmall">',f()("There was an error getting the data for this collection"),": <%- model.error %>","</div>","<% } %>"]),purged:u.a.wrapTemplate(["<% if( model.purged ){ %>",'<div class="purged-msg warningmessagesmall">',f()("This collection has been deleted and removed from disk"),"</div>","<% } %>"]),deleted:u.a.wrapTemplate(["<% if( model.deleted && !model.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',f()("This collection has been deleted"),"</div>","<% } %>"])}),a=u.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- collection.element_identifier || collection.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"collection"),r=u.a.wrapTemplate(['<div class="subtitle">','<% var countText = collection.element_count? ( collection.element_count + " " ) : ""; %>','<%        if( collection.collection_type === "list" ){ %>',f()("a list of <%- countText %>datasets"),'<% } else if( collection.collection_type === "paired" ){ %>',f()("a pair of datasets"),'<% } else if( collection.collection_type === "list:paired" ){ %>',f()("a list of <%- countText %>dataset pairs"),'<% } else if( collection.collection_type === "list:list" ){ %>',f()("a list of <%- countText %>dataset lists"),"<% } %>","</div>"],"collection"),o.default.extend({},c.a.prototype.templates,{warnings:i,titleBar:a,subtitle:r}));var m=c.b.extend({className:"".concat(c.b.prototype.className," dataset-collection-element"),initialize:function(t){t.logger&&(this.logger=this.model.logger=t.logger),this.log("DCEListItemView.initialize:",t),c.b.prototype.initialize.call(this,t)},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"DCEListItemView(".concat(t,")")}});m.prototype.templates=function(){var t=u.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element");return o.default.extend({},c.b.prototype.templates,{titleBar:t})}();var _=d.a.extend({className:"".concat(d.a.prototype.className," dataset-collection-element"),initialize:function(t){t.logger&&(this.logger=this.model.logger=t.logger),this.log("DatasetDCEListItemView.initialize:",t),d.a.prototype.initialize.call(this,t)},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):l.a.when()},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"DatasetDCEListItemView(".concat(t,")")}});_.prototype.templates=function(){var t=u.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>","</div>"],"element");return o.default.extend({},d.a.prototype.templates,{titleBar:t})}();var g=p.extend({className:"".concat(p.prototype.className," dataset-collection-element"),_swapNewRender:function(t){p.prototype._swapNewRender.call(this,t);var e=this.model.get("state")||"ok";return this.$el.addClass("state-".concat(e)),this.$el},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"NestedDCDCEListItemView(".concat(t,")")}});e.a={DCListItemView:p,DCEListItemView:m,DatasetDCEListItemView:_,NestedDCDCEListItemView:g}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return j}));var i=n(133),a=n(8),r=n(210),o=n(34),s=n(251),l=n(61),c=n(128);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}a.default.use(r.a);var h={components:{StatelessTags:i.a},props:{tags:{type:Array,required:!1,default:function(){return[]}},tagService:{type:c.a,required:!0},storeKey:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1}},computed:{observedTags:{get:function(){return this.$store.getters.getTagsById(this.storeKey)},set:function(t){this.updateTags({key:this.storeKey,tags:t})}}},subscriptions:function(){var t=this;return{autocompleteItems:this.tagService.autocompleteOptions.pipe(Object(s.a)((function(e){return Object(l.b)(e,t.tags)})))}},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({onClick:function(t){this.$emit("tag-click",t)},beforeAddingTag:function(t){var e=t.tag,n=t.addTag;this.tagService.save(e).then((function(){return n(e)})).catch((function(t){return console.warn("Unable to save tag",t)}))},beforeDeletingTag:function(t){var e=t.tag,n=t.deleteTag;this.tagService.delete(e).then((function(){return n(e)})).catch((function(t){return console.warn("Unable to delete tag",t)}))},updateTagSearch:function(t){this.tagService.autocompleteSearchText=t}},Object(o.b)(["updateTags","initializeTags"])),mounted:function(){this.initializeTags({key:this.storeKey,tags:this.tags})}},f=n(5),p=Object(f.a)(h,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("stateless-tags",{attrs:{disabled:t.disabled,"autocomplete-items":t.autocompleteItems},on:{"tag-click":t.onClick,"tag-input-changed":t.updateTagSearch,"before-adding-tag":t.beforeAddingTag,"before-deleting-tag":t.beforeDeletingTag},model:{value:t.observedTags,callback:function(e){t.observedTags=e},expression:"observedTags"}})}),[],!1,null,null,null).exports,m=n(36),_=n(42);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function y(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){v(r,i,a,o,s,"next",t)}function s(t){v(r,i,a,o,s,"throw",t)}o(void 0)}))}}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=S(t);if(e){var a=S(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return x(this,n)}}function x(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(s,t);var e,n,i,a,r,o=k(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=o.call(this,t)).model=t.model,e}return e=s,(n=[{key:"save",value:(r=y(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=Object(l.a)(e)).valid){t.next=3;break}throw new Error("Invalid tag");case 3:return(i=new Set(this.model.attributes.tags)).add(n.text),i=Array.from(i),t.next=8,this.model.save({tags:i});case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"delete",value:(a=y(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(l.a)(e),(i=new Set(this.model.attributes.tags)).delete(n.text),i=Array.from(i),t.next=6,this.model.save({tags:i});case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})}])&&b(e.prototype,n),i&&b(e,i),s}(c.a),C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=t.id,i=t.itemClass,a=t.tags,r=void 0===a?[]:a,o=t.disabled,s=void 0!==o&&o,l=t.context,d=void 0===l?"unspecified":l,u={storeKey:"".concat(i,"-").concat(n),tagService:new c.a({id:n,itemClass:i,context:d}),tags:r,disabled:s},h=Object(m.a)(p),f=h(u,e);return f.$on("tag-click",T(t,f)),f},T=function(t,e){return function(n){if(n){var i=t.tagClickFn,a=void 0===i?"none":i,r=t.clickUrl;switch(a){case"community_tag_click":if(void 0!==r){var o=n.value?":".concat(n.value):"",s="".concat(r,"?f-tags=").concat(n.text).concat(o);Object(_.c)(s)}break;case"add_tag_to_grid_filter":e.$store.dispatch("toggleSearchTag",n)}}}},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=t.model,i=t.disabled,a=void 0!==i&&i,r=t.context,o=void 0===r?"unspecified":r;if(n){var s=n.attributes,l=s.id,c=s.model_class,d=s.tags,u=void 0===d?[]:d,h={storeKey:"".concat(c,"-").concat(l),tagService:new M({id:l,itemClass:c,context:o,model:n}),tags:u,disabled:a},f=Object(m.a)(p);return f(h,e)}console.warn("Missing model in mountModelTags")}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return u}));var i=n(82),a=n(8);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=0;n?o=t.nodeIndex:(t.nodeIndex=0,t.name=e.name,t.annotation=e.annotation,t.license=e.license,t.creator=e.creator,Object.values(t.nodes).forEach((function(t){t.onRemove()}))),a.default.nextTick((function(){t.version=e.version,t.report=e.report||{},Object.values(e.steps).forEach((function(e){n&&(e.uuid=null),a.default.set(t.steps,t.nodeIndex++,l(l({},e),{},{_complete:!0}))})),a.default.nextTick((function(){var n=!1;Object.entries(e.steps).forEach((function(t){var e=r(t,2),i=(e[0],e[1]);i.workflow_outputs&&i.workflow_outputs.length>0&&(n=!0)})),Object.entries(e.steps).forEach((function(e){var a=r(e,2),s=a[0],l=a[1],c=parseInt(s)+o,d=t.nodes[c];Object.entries(l.input_connections).forEach((function(e){var n=r(e,2),a=n[0],s=n[1];s&&(Array.isArray(s)||(s=[s]),s.forEach((function(e){var n=parseInt(e.id)+o,r=t.nodes[n],s=new i.a(t.canvasManager);s.connect(r.outputTerminals[e.output_name],d.inputTerminals[a]),s.redraw()})))})),n||Object.values(d.outputs).forEach((function(t){d.postJobActions["HideDatasetAction".concat(t.name)]||d.activeOutputs.add(t.name)}))}))}))}))}function u(t){var e={},n=t.canvasManager.canvasZoom;!function(t){var e=!1,n=!1;Object.values(t.nodes).forEach((function(t){t.activeOutputs.count()>0&&(e=!0),Object.values(t.postJobActions).forEach((function(t){"HideDatasetAction"===t.action_type&&(n=!0)}))})),(!1!==e||!1!==n)&&Object.values(t.nodes).forEach((function(t){null===t.postJobActions&&(t.postJobActions={});var n=[];Object.entries(t.postJobActions).forEach((function(t){var e=r(t,2),i=e[0];"HideDatasetAction"==e[1].action_type&&n.push(i)})),n.length>0&&n.forEach((function(e){delete t.postJobActions[e]})),e&&Object.values(t.outputs).forEach((function(e){if(!0===!t.activeOutputs.exists(e.name)){var n={action_type:"HideDatasetAction",output_name:e.name,action_arguments:{}};t.postJobActions["HideDatasetAction".concat(e.name)]=null,t.postJobActions["HideDatasetAction".concat(e.name)]=n}}))}))}(t),Object.values(t.nodes).forEach((function(t){var i={};Object.values(t.inputTerminals).forEach((function(t){i[t.name]=null;var e=[];t.connectors.forEach((function(n,a){if(n.outputHandle){var r={id:n.outputHandle.node.id,output_name:n.outputHandle.name},o=t.attributes.input.input_subworkflow_step_id;void 0!==o&&(r.input_subworkflow_step_id=o),e[a]=r,i[t.name]=e}}))}));var a={};t.postJobActions&&Object.values(t.postJobActions).forEach((function(t){var e={action_type:t.action_type,output_name:t.output_name,action_arguments:t.action_arguments};a[t.action_type+t.output_name]=null,a[t.action_type+t.output_name]=e}));var r={id:t.id,type:t.type,content_id:t.content_id,tool_version:t.config_form?t.config_form.version:null,tool_state:t.tool_state,errors:t.errors,input_connections:i,position:h(t.element,n),annotation:t.annotation,post_job_actions:t.postJobActions,uuid:t.uuid,label:t.label,workflow_outputs:t.activeOutputs.getAll()};e[t.id]=r}));var i=t.report,a=t.license,o=t.creator,s=t.annotation,l=t.name;return{steps:e,report:i,license:a,creator:o,annotation:s,name:l}}function h(t,e){var n=t.getBoundingClientRect();return n.x/=e,n.y/=e,n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(6),c=n(63),d=n(24),u=n(52),h=n(11),f=n(2),p=n.n(f),m=n(99),_=n(12),g=c.c.ListItemView,v=g.extend({_logNamespace:"dataset",className:"".concat(g.prototype.className," dataset"),id:function(){return["dataset",this.model.get("id")].join("-")},initialize:function(t){t.logger&&(this.logger=this.model.logger=t.logger),this.log("".concat(this,".initialize:"),t),g.prototype.initialize.call(this,t),this.linkTarget=t.linkTarget||"_blank"},render:function(){var t=g.prototype.render.apply(this,arguments);return this._mountVueNametags(),t},_mountVueNametags:function(){var t=this.$(".nametags")[0],e=this.model.attributes,n=e.id,i=e.model_class,a=e.tags,r="".concat(i,"-").concat(n);Object(m.b)({storeKey:r,tags:a},t)},_setUpListeners:function(){g.prototype._setUpListeners.call(this);var t=this;return t.listenTo(t.model,{change:function(e){t.model.changedAttributes().state&&t.model.inReadyState()&&t.expanded&&!t.model.hasDetails()?t.model.fetch({silent:!0}).done((function(){t.render()})):i.default.has(t.model.changed,"tags")&&2===i.default.keys(t.model.changed).length?t._mountVueNametags():t.render()}})},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):r.a.when()},remove:function(t,e){var n=this;t=t||this.fxSpeed,this.$el.fadeOut(t,(function(){s.a.View.prototype.remove.call(n),e&&e.call(n)}))},_swapNewRender:function(t){return g.prototype._swapNewRender.call(this,t),this.model.has("state")&&this.$el.addClass("state-".concat(this.model.get("state"))),this.$el},_renderPrimaryActions:function(){return[this._renderDisplayButton()]},_renderDisplayButton:function(){var t=this.model.get("state");if(t===d.a.NOT_VIEWABLE||t===d.a.DISCARDED||!this.model.get("accessible"))return null;var e={target:this.linkTarget,classes:"display-btn"};if(this.model.get("purged"))e.disabled=!0,e.title=p()("Cannot display datasets removed from disk");else if(t===d.a.UPLOAD)e.disabled=!0,e.title=p()("This dataset must finish uploading before it can be viewed");else if(t===d.a.NEW)e.disabled=!0,e.title=p()("This dataset is not yet viewable");else{e.title=p()("View data"),e.href=this.model.urls.display;var n=this;e.onclick=function(t){var e=Object(l.a)();if(e.frame&&e.frame.active){var i=n.model.get("element_id")||n.model.get("id");e.frame.addDataset(i),t.preventDefault()}}}return e.faIcon="fa-eye",Object(u.a)(e)},_renderDetails:function(){if(this.model.get("state")===d.a.NOT_VIEWABLE)return r()(this.templates.noAccess(this.model.toJSON(),this));var t=g.prototype._renderDetails.call(this);return t.find(".actions .left").empty().append(this._renderSecondaryActions()),t.find(".summary").html(this._renderSummary()).prepend(this._renderDetailMessages()),t.find(".display-applications").html(this._renderDisplayApplications()),this._setUpBehaviors(t),t},_renderSummary:function(){var t=this.model.toJSON(),e=this.templates.summaries[t.state];return(e=e||this.templates.summaries.unknown)(t,this)},_renderDetailMessages:function(){var t=this,e=r()('<div class="detail-messages"></div>'),n=t.model.toJSON();return i.default.each(t.templates.detailMessages,(function(i){e.append(r()(i(n,t)))})),e},_renderDisplayApplications:function(){return this.model.isDeletedOrPurged()?"":[this.templates.displayApplications(this.model.get("display_apps"),this),this.templates.displayApplications(this.model.get("display_types"),this)].join("")},_renderSecondaryActions:function(){switch(this.debug("_renderSecondaryActions"),this.model.get("state")){case d.a.NOT_VIEWABLE:return[];case d.a.OK:case d.a.FAILED_METADATA:case d.a.ERROR:return[this._renderDownloadButton(),this._renderClipboardButton(),this._renderShowParamsButton()]}return[this._renderShowParamsButton()]},_renderShowParamsButton:function(){return Object(u.a)({title:p()("View details"),classes:"params-btn",href:this.model.urls.show_params,target:this.linkTarget,faIcon:"fa-info-circle",onclick:function(t){var e=Object(l.a)();e.frame&&e.frame.active&&(e.frame.add({title:p()("Dataset details"),url:this.href}),t.preventDefault(),t.stopPropagation())}})},isPurged:function(){return!(!this.model.get("purged")&&this.model.hasData())},_renderClipboardButton:function(){var t=this.model.attributes.permissions&&1===this.model.attributes.permissions.access.length&&this.model.attributes.permissions.access.includes(Object(l.a)().user.id),e=this.model.urls;if(!this.isPurged()&&e.download){var n=p()("Copy link"),i="";return t&&(n=p()("Preferences restrict sharing"),i="opacity: 0.3"),Object(u.a)({faIcon:"fa-chain",style:i,title:n,onclick:function(){t?_.a.warning("Dataset is not sharable"):navigator.clipboard.writeText("".concat(window.location.origin).concat(e.download)).then((function(){_.a.info("Link is copied to your clipboard")}))}})}},_renderDownloadButton:function(){return this.isPurged()?null:i.default.isEmpty(this.model.get("meta_files"))?r()('\n                <a class="download-btn icon-btn" href="'.concat(this.model.urls.download,'" title="').concat(p()("Download"),'">\n                    <span class="fa fa-floppy-o"></span>\n                </a>')):this._renderMetaFileDownloadButton()},_renderMetaFileDownloadButton:function(){var t=this.model.urls;return r()('\n                <div class="metafile-dropdown dropdown">\n                    <a class="download-btn icon-btn" href="'.concat(t.download,'" data-toggle="dropdown" title="').concat(p()("Download"),'">\n                        <span class="fa fa-floppy-o"></span>\n                    </a>\n                    <div class="dropdown-menu" role="menu">\n                        <a class="dropdown-item" href="').concat(t.download,'">\n                            ').concat(p()("Download dataset"),"\n                        </a>\n                        ").concat(i.default.map(this.model.get("meta_files"),(function(e){return'<a class="dropdown-item" href="'.concat(t.meta_download+e.file_type,'">\n                                    ').concat(p()("Download")," ").concat(e.file_type,"\n                                </a>")})),"\n                    </div>\n                </div>"))},events:i.default.extend(i.default.clone(g.prototype.events),{"click .display-btn":function(t){this.trigger("display",this,t)},"click .params-btn":function(t){this.trigger("params",this,t)},"click .download-btn":function(t){this.trigger("download",this,t)}}),toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"DatasetListItemView(".concat(t,")")}});v.prototype.templates=function(){var t=i.default.extend({},g.prototype.templates.warnings,{failed_metadata:h.a.wrapTemplate(['<% if( model.state === "failed_metadata" ){ %>','<div class="warningmessagesmall">',p()("An error occurred setting the metadata for this dataset"),"</div>","<% } %>"]),error:h.a.wrapTemplate(["<% if( model.error ){ %>",'<div class="errormessagesmall">',p()("There was an error getting the data for this dataset"),": <%- model.error %>","</div>","<% } %>"]),purged:h.a.wrapTemplate(["<% if( model.purged ){ %>",'<div class="purged-msg warningmessagesmall">',p()("This dataset has been deleted and removed from disk"),"</div>","<% } %>"]),deleted:h.a.wrapTemplate(["<% if( model.deleted && !model.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',p()("This dataset has been deleted"),"</div>","<% } %>"])}),e=h.a.wrapTemplate(['<div class="details">','<div class="summary"></div>','<div class="actions clear">','<div class="left"></div>','<div class="right"></div>',"</div>","<% if( !dataset.deleted && !dataset.purged ){ %>",'<div class="tags-display"></div>','<div class="annotation-display"></div>','<div class="display-applications"></div>',"<% if( dataset.peek ){ %>",'<pre class="dataset-peek"><%= dataset.peek %></pre>',"<% } %>","<% } %>","</div>"],"dataset"),n=h.a.wrapTemplate(['<div class="details">','<div class="summary">',p()("You do not have permission to view this dataset"),"</div>","</div>"],"dataset"),a={};a[d.a.OK]=a[d.a.FAILED_METADATA]=h.a.wrapTemplate(["<% if( dataset.misc_blurb ){ %>",'<div class="blurb">','<span class="value"><%- dataset.misc_blurb %></span>',"</div>","<% } %>","<% if( dataset.file_ext ){ %>",'<div class="datatype">','<label class="prompt">',p()("format"),"</label>",'<span class="value"><%- dataset.file_ext %></span>',"</div>","<% } %>","<% if( dataset.metadata_dbkey ){ %>",'<div class="dbkey">','<label class="prompt">',p()("database"),"</label>",'<span class="value">',"<%- dataset.metadata_dbkey %>","</span>","</div>","<% } %>","<% if( dataset.misc_info ){ %>",'<div class="info">','<span class="value"><%- dataset.misc_info %></span>',"</div>","<% } %>"],"dataset"),a[d.a.NEW]=h.a.wrapTemplate(["<div>",p()("This is a new dataset and not all of its data are available yet"),"</div>"],"dataset"),a[d.a.NOT_VIEWABLE]=h.a.wrapTemplate(["<div>",p()("You do not have permission to view this dataset"),"</div>"],"dataset"),a[d.a.DISCARDED]=h.a.wrapTemplate(["<div>",p()("The job creating this dataset was cancelled before completion"),"</div>"],"dataset"),a[d.a.QUEUED]=h.a.wrapTemplate(["<div>",p()("This job is waiting to run"),"</div>"],"dataset"),a[d.a.RUNNING]=h.a.wrapTemplate(["<div>",p()("This job is currently running"),"</div>"],"dataset"),a[d.a.UPLOAD]=h.a.wrapTemplate(["<div>",p()("This dataset is currently uploading"),"</div>"],"dataset"),a[d.a.SETTING_METADATA]=h.a.wrapTemplate(["<div>",p()("Metadata is being auto-detected"),"</div>"],"dataset"),a[d.a.PAUSED]=h.a.wrapTemplate(["<div>",p()('This job is paused. Use the "Resume Paused Jobs" in the history menu to resume'),"</div>",'<div class="info"><%- dataset.misc_info %></div>'],"dataset"),a[d.a.ERROR]=h.a.wrapTemplate(["<% if( !dataset.purged ){ %>","<div><%- dataset.misc_blurb %></div>","<% } %>",'<span class="help-text">',p()("An error occurred with this dataset"),":</span>",'<div class="job-error-text"><%- dataset.misc_info %></div>'],"dataset"),a[d.a.EMPTY]=h.a.wrapTemplate(["<div>",p()("No data"),": <i><%- dataset.misc_blurb %></i></div>"],"dataset"),a.unknown=h.a.wrapTemplate(['<div>Error: unknown dataset state: "<%- dataset.state %>"</div>'],"dataset");var r={resubmitted:h.a.wrapTemplate(["<% if( model.resubmitted ){ %>",'<div class="resubmitted-msg infomessagesmall">',p()("The job creating this dataset has been resubmitted"),"</div>","<% } %>"])},o=h.a.wrapTemplate(["<% _.each( apps, function( app ){ %>",'<div class="display-application">','<span class="display-application-location"><%- app.label %></span> ','<span class="display-application-links">',"<% _.each( app.links, function( link ){ %>",'<a target="<%- link.target %>" href="<%- link.href %>">',"<% print( _l( link.text ) ); %>","</a> ","<% }); %>","</span>","</div>","<% }); %>"],"apps");return i.default.extend({},g.prototype.templates,{warnings:t,details:e,noAccess:n,summaries:a,detailMessages:r,displayApplications:o})}(),e.b={DatasetListItemView:v}},function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(6),d=n(2),u=n.n(d),h=n(32),f=n(55),p={TrackHeaderView:s.a.View.extend({className:"track-header",initialize:function(){this.model.config.get("name").on("change:value",this.update_name,this),this.render()},render:function(){this.$el.append(r()("<div/>").addClass(this.model.drag_handle_class)),this.$el.append(r()("<div/>").addClass("track-name").text(this.model.config.get_value("name"))),this.action_icons={},this.render_action_icons(),this.$el.dblclick((function(t){t.stopPropagation()})),this.$el.append(r()("<div style='clear: both'/>"))},update_name:function(){this.$el.find(".track-name").text(this.model.config.get_value("name"))},render_action_icons:function(){var t=this;this.icons_div=r()("<div/>").addClass("track-icons").hide().appendTo(this.$el),i.default.each(this.model.action_icons_def,(function(e){t.add_action_icon(e.name,e.title,e.css_class,e.on_click_fn,e.prepend,e.hide)})),this.set_display_modes(this.model.display_modes)},add_action_icon:function(t,e,n,i,a,o){var s=this;this.action_icons[t]=r()("<a/>").attr("title",e).addClass("icon-button").addClass(n).tooltip().click((function(){i(s.model)})).appendTo(this.icons_div),o&&this.action_icons[t].hide()},set_display_modes:function(t,e){if(t){this.model.display_modes=t,this.model.mode=e||this.model.config.get_value("mode")||this.model.display_modes[0],this.action_icons.mode_icon.attr("title","Set display mode (now: ".concat(this.mode,")"));for(var n=this.model,i={},a=0,r=n.display_modes.length;a<r;a++){var o=n.display_modes[a];i[o]=function(t){return function(){n.change_mode(t)}}(o)}Object(f.b)(this.action_icons.mode_icon,i)}}})},m=n(51),_=i.default.extend,g=function(t,e){this.slot=t,this.feature=e},v=function(t,e,n,i){this.slots={},this.start_end_dct={},this.w_scale=t,this.mode=e,this.include_label="Pack"===e,this.max_rows=n,this.measureText=i};_(v.prototype,{_get_draw_coords:function(t){var e=Math.floor(t[1]*this.w_scale),n=Math.ceil(t[2]*this.w_scale),i=t[3];if(void 0!==i&&this.include_label){var a=this.measureText(i).width+7;e-a>=0?e-=a:n+=a}return[e,n]},_find_slot:function(t){for(var e=t[0],n=t[1],i=0;i<=this.max_rows;i++){var a=!1,r=this.start_end_dct[i];if(void 0!==r)for(var o=0,s=r.length;o<s;o++){var l=r[o];if(n>l[0]&&e<l[1]){a=!0;break}}if(!a)return i}return-1},slot_features:function(t){for(var e,n,i=this.start_end_dct,a=[],r=0,o=0,s=t.length;o<s;o++){n=(e=t[o])[0];var l=this.slots[n];if(l){if(e[1]<l.feature[1]||l.feature[2]<e[2])for(var c=this._get_draw_coords(l.feature),d=this._get_draw_coords(e),u=this.start_end_dct[l.slot],h=0;h<u.length;h++){var f=u[h];f[0]===c[0]&&f[1]===c[1]&&(u[h]=d)}r=Math.max(r,this.slots[n].slot)}else a.push(o)}for(var p=0,m=a.length;p<m;p++){n=(e=t[a[p]])[0];var _=this._get_draw_coords(e),v=this._find_slot(_);v>=0&&(void 0===i[v]&&(i[v]=[]),i[v].push(_),this.slots[n]=new g(v,e),r=Math.max(r,v))}return r+1}});var y=v;function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=M(t);if(e){var a=M(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return S(this,n)}}function S(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function j(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),t}var O=1001,L=1002,D=1003,A=1004,E=1005,I=1006;function P(t,e){var n=t[0],i=t[1],a=e[0],r=e[1];return n<a?i<=a?O:i<=r?D:L:n>r?I:i<=r?E:A}function Y(t,e){var n=P(t,e);return n!==O&&n!==I}function R(t,e,n,i){var a=e-i/2,r=e+i/2,o=n-Math.sqrt(3*i/2);t.beginPath(),t.moveTo(a,o),t.lineTo(r,o),t.lineTo(e,n),t.lineTo(a,o),t.strokeStyle=this.fillStyle,t.fill(),t.stroke(),t.closePath()}var H=function(){function t(e){C(this,t),this.default_val=e||1}return j(t,[{key:"gen_val",value:function(t){return this.default_val}}]),t}(),N=function t(e){C(this,t),this.incomplete_features=e.incomplete_features,this.feature_mapper=e.feature_mapper},$=function(){function t(e,n,a,r,o){C(this,t),this.data=e,this.default_prefs={},this.view_start=n,this.view_end=a,this.prefs=i.default.extend({},this.default_prefs,r),this.mode=o}return j(t,[{key:"draw",value:function(t,e,n,i){}},{key:"get_start_draw_pos",value:function(t,e){return this._chrom_pos_to_draw_pos(t,e,-.5)}},{key:"get_end_draw_pos",value:function(t,e){return this._chrom_pos_to_draw_pos(t,e,.5)}},{key:"get_draw_pos",value:function(t,e){return this._chrom_pos_to_draw_pos(t,e,0)}},{key:"_chrom_pos_to_draw_pos",value:function(t,e,n){return Math.floor(e*(Math.max(0,t-this.view_start)+n))}}],[{key:"default_prefs",get:function(){return{}}}]),t}(),F=function(t){w(n,t);var e=x(n);function n(t,i,a,r,o){return C(this,n),e.call(this,t,i,a,r,o)}return j(n,[{key:"draw",value:function(t,e,n,a){var r=!1,o=this.prefs.min_value,s=this.prefs.max_value,l=s-o,c=n,d=this.view_start,u=this.mode,h=this.data;t.save();var f,p,m,_=Math.round(n+o/l*n);"Intensity"!==u&&(t.fillStyle="#aaa",t.fillRect(0,_,e,1)),t.beginPath(),m=h.length>1?i.default.map(h.slice(0,-1),(function(t,e){return Math.ceil((h[e+1][0]-h[e][0])*a)})):[10];for(var g,v=this.prefs.block_color||this.prefs.color,y=parseInt(v.slice(1),16),b=(16711680&y)>>16,w=(65280&y)>>8,k=255&y,x=!1,S=!1,M=0,C=h.length;M<C;M++)if(t.fillStyle=t.strokeStyle=v,x=S=!1,g=m[M],f=Math.floor((h[M][0]-d-.5)*a),null!==(p=h[M][1])){if(p<o?(S=!0,p=o):p>s&&(x=!0,p=s),"Histogram"===u)p=Math.round(p/l*c),t.fillRect(f,_,g,-p);else if("Intensity"===u){var T=(p-o)/l,j=Math.round(b+(255-b)*(1-T)),O=Math.round(w+(255-w)*(1-T)),L=Math.round(k+(255-k)*(1-T));t.fillStyle="rgb(".concat(j,",").concat(O,",").concat(L,")"),t.fillRect(f,0,g,c)}else p=Math.round(c-(p-o)/l*c),r?t.lineTo(f,p):(r=!0,"Filled"===u?(t.moveTo(f,c),t.lineTo(f,p)):t.moveTo(f,p));var D;if(t.fillStyle=this.prefs.overflow_color,x||S)"Histogram"===u||"Intensity"===u?D=g:(f-=2,D=4),x&&t.fillRect(f,0,D,3),S&&t.fillRect(f,c-3,D,3);t.fillStyle=v}else r&&"Filled"===u&&t.lineTo(f,c),r=!1;"Filled"===u?(r&&(t.lineTo(f,_),t.lineTo(0,_)),t.fill()):t.stroke(),t.restore()}}],[{key:"default_prefs",get:function(){return{min_value:void 0,max_value:void 0,mode:"Histogram",color:"#000",overflow_color:"#F66"}}}]),n}($),W=function(){function t(e){C(this,t),this.feature_positions={},this.slot_height=e,this.translation=0,this.y_translation=0}return j(t,[{key:"map_feature_data",value:function(t,e,n,i){this.feature_positions[e]||(this.feature_positions[e]=[]),this.feature_positions[e].push({data:t,x_start:n,x_end:i})}},{key:"get_feature_data",value:function(t,e){var n,i=Math.floor((e-this.y_translation)/this.slot_height);if(!this.feature_positions[i])return null;t+=this.translation;for(var a=0;a<this.feature_positions[i].length;a++)if(t>=(n=this.feature_positions[i][a]).x_start&&t<=n.x_end)return n.data}}]),t}(),z=function(t){w(n,t);var e=x(n);function n(t,i,a,r,o,s,l){var c;return C(this,n),(c=e.call(this,t,i,a,r,o)).alpha_scaler=s||new H,c.height_scaler=l||new H,c.max_label_length=200,c}return j(n,[{key:"get_required_height",value:function(t,e){var n=this.get_row_height(),i=n,a=this.mode;return"no_detail"!==a&&"Squish"!==a&&"Pack"!==a||(n=t*i),n+this.get_top_padding(e)}},{key:"get_top_padding",value:function(t){return 0}},{key:"draw",value:function(t,e,n,i,a){t.save(),t.fillStyle=this.prefs.block_color,t.textAlign="right";for(var r,o=this.get_row_height(),s=new W(o),l=[],c=0,d=this.data.length;c<d;c++){var u=this.data[c],h=u[0],f=u[1],p=u[2],m=a&&void 0!==a[h]?a[h].slot:null;("Dense"===this.mode||null!==m)&&f<this.view_end&&p>this.view_start&&(r=this.draw_element(t,this.mode,u,m,this.view_start,this.view_end,i,o,e),s.map_feature_data(u,m,r[0],r[1]),(f<this.view_start||p>this.view_end)&&l.push(u))}return t.restore(),s.y_translation=this.get_top_padding(e),new N({incomplete_features:l,feature_mapper:s})}},{key:"draw_element",value:function(t,e,n,i,a,r,o,s,l){return[0,0]}}],[{key:"default_prefs",get:function(){return{block_color:"#FFF",connector_color:"#FFF"}}}]),n}($),U=function(t){w(n,t);var e=x(n);function n(t,i,a,r,o,s,l){var c;return C(this,n),(c=e.call(this,t,i,a,r,o,s,l)).draw_background_connector=!0,c.draw_individual_connectors=!1,c}return j(n,[{key:"get_row_height",value:function(){var t=this.mode;return"Dense"===t?10:"no_detail"===t?3:"Squish"===t?5:10}},{key:"draw_element",value:function(t,e,n,i,a,r,o,s,l){var c=n[1],d=n[2],u=n[3],h=n[4],f=Math.floor(Math.max(0,(c-a-.5)*o)),p=Math.ceil(Math.min(l,Math.max(0,(d-a-.5)*o))),m=f,_=p,g=("Dense"===e?0:0+i)*s+this.get_top_padding(l),v=null,y=null,b=h&&"+"!==h&&"."!==h?this.prefs.reverse_strand_color:this.prefs.block_color,w=this.prefs.label_color;if(t.globalAlpha=this.alpha_scaler.gen_val(n),"Dense"===e&&(i=1),"no_detail"===e)t.fillStyle=b,t.fillRect(f,g+5,p-f,1);else{var k,x,S=n[5],M=n[6],C=n[7],T=!0;if(S&&M&&(v=Math.floor(Math.max(0,(S-a)*o)),y=Math.ceil(Math.min(l,Math.max(0,(M-a)*o)))),"Squish"===e?(k=1,x=3,T=!1):(k=5,x=9),C){var j,O;"Squish"===e||"Dense"===e?(j=g+Math.floor(1.5)+1,O=1):h?(j=g,O=x):(j+=2.5,O=1),this.draw_background_connector&&("Squish"===e||"Dense"===e?t.fillStyle="#ccc":h?"+"===h?t.fillStyle=t.canvas.manager.get_pattern("right_strand"):"-"===h&&(t.fillStyle=t.canvas.manager.get_pattern("left_strand")):t.fillStyle="#ccc",t.fillRect(f,j,p-f,O));for(var L=0,D=C.length;L<D;L++){var A,E,I=C[L],P=Math.floor(Math.max(0,(I[0]-a-.5)*o)),Y=Math.ceil(Math.min(l,Math.max((I[1]-a-.5)*o)));if(!(P>Y)){if(t.fillStyle=b,t.fillRect(P,g+(x-k)/2+1,Y-P,k),void 0!==v&&M>S&&!(P>y||Y<v)){var R=Math.max(P,v),H=Math.min(Y,y);t.fillRect(R,g+1,H-R,x),1===C.length&&"Pack"===e&&("+"===h?t.fillStyle=t.canvas.manager.get_pattern("right_strand_inv"):"-"===h&&(t.fillStyle=t.canvas.manager.get_pattern("left_strand_inv")),R+14<H&&(R+=2,H-=2),t.fillRect(R,g+1,H-R,x))}this.draw_individual_connectors&&A&&this.draw_connector(t,A,E,P,Y,g),A=P,E=Y}}if("Pack"===e){t.globalAlpha=1,t.fillStyle="white";var N=this.height_scaler.gen_val(n),$=Math.ceil(x*N),F=Math.round((x-$)/2);1!==N&&(t.fillRect(f,j+1,p-f,F),t.fillRect(f,j+x-F+1,p-f,F))}}else t.fillStyle=b,t.fillRect(f,g+1,p-f,x),h&&T&&("+"===h?t.fillStyle=t.canvas.manager.get_pattern("right_strand_inv"):"-"===h&&(t.fillStyle=t.canvas.manager.get_pattern("left_strand_inv")),t.fillRect(f,g+1,p-f,x));t.globalAlpha=1,u&&"Pack"===e&&c>a&&(t.fillStyle=w,0===a&&f-t.measureText(u).width<0?(t.textAlign="left",t.fillText(u,p+2,g+8,this.max_label_length),_+=t.measureText(u).width+2):(t.textAlign="right",t.fillText(u,f-2,g+8,this.max_label_length),m-=t.measureText(u).width+2))}return t.globalAlpha=1,[m,_]}}]),n}(z),V=function(t){w(n,t);var e=x(n);function n(t,i,a,r,o,s,l,c,d){var u;return C(this,n),(u=e.call(this,t,i,a,r,o,s,l)).ref_seq=c?c.data:null,u.base_color_fn=d,u}return j(n,[{key:"get_row_height",value:function(){var t,e=this.mode;return"Dense"===e?t=10:"Squish"===e?t=5:(t=10,this.prefs.show_insertions&&(t*=2)),t}},{key:"_parse_cigar",value:function(t){var e=[[0,0]],n=e[0],a=0,r=i.default.map(t.match(/[0-9]+[MIDNSHP=X]/g),(function(t){var i=parseInt(t.slice(0,-1),10),r=t.slice(-1);return"N"===r?0!==n[1]&&(n=[a+i,a+i],e.push(n)):-1==="ISHP".indexOf(r)&&(n[1]+=i,a+=i),["MIDNSHP=X".indexOf(r),i]}));return{blocks:e,cigar:r}}},{key:"draw_read",value:function(t,e,n,i,a,r,o,s,l,c){var d=function(t,e,n){return-1!=="M=NXD".indexOf(e)&&(t+=n),t},u=function(t,e,n){return-1!=="IX".indexOf(e)&&(t+=n),t},h=function(t){return Math.floor(Math.max(0,(t-a-.5)*n))};t.textAlign="center";var f,p,m,_,g,v,y=[a,r],b=0,w=0,k=Math.round(n/2),x=t.canvas.manager.char_width_px,S="+"===l?this.prefs.detail_block_color:this.prefs.reverse_strand_color,M="Pack"===e,C=M?9:3,T=i+1,j=new X(t,C,n,e),O=[],I=this._parse_cigar(s);s=I.cigar,f=I.blocks;for(var H=0;H<f.length;H++){var N=f[H];Y([o+N[0],o+N[1]],y)&&((p=h(o+N[0]))===(m=h(o+N[1]))&&(m+=1),t.fillStyle=S,t.fillRect(p,T,m-p,C))}for(var $=0,F=s.length;$<F;$++){var W=s[$],z="MIDNSHP=X"[W[0]],U=W[1],V=o+b;if(p=h(V),m=h(V+U),Y([V,V+U],y))switch(p===m&&(m+=1),z){case"H":case"S":case"P":break;case"M":b+=U;break;case"=":case"X":var B="";"X"===z?B=c.slice(w,w+U):this.ref_seq&&(B=this.ref_seq.slice(Math.max(0,V-a),Math.min(V-a+U,r-a)));for(var q=Math.max(V,a),G=0;G<B.length;G++)if(B&&!this.prefs.show_differences||"X"===z){var J=Math.floor(Math.max(0,(q+G-a)*n));t.fillStyle=this.base_color_fn(B[G]),M&&n>x?t.fillText(B[G],J,i+9):n>.05&&t.fillRect(J-k,T,Math.max(1,Math.round(n)),C)}"X"===z&&(w+=U),b+=U;break;case"N":t.fillStyle="#ccc",t.fillRect(p,T+(C-1)/2,m-p,1),b+=U;break;case"D":j.draw_deletion(p,T,U),b+=U;break;case"I":var K=p-k;if(Y([V,V+U],y)){var Q=c.slice(w,w+U);if(this.prefs.show_insertions){var Z=p-(m-p)/2;if(("Pack"===e||"Auto"===this.mode)&&void 0!==c&&n>x){switch(t.fillStyle="yellow",t.fillRect(Z-k,i-9,m-p,9),O[O.length]={type:"triangle",data:[K,i+4,5]},t.fillStyle="#ccc",P([V,V+U],y)){case D:Q=Q.slice(a-V);break;case A:Q=Q.slice(0,V-r);break;case E:break;case L:Q=Q.slice(a-V,V-r)}for(var tt=0,et=Q.length;tt<et;tt++){var nt=Math.floor(Math.max(0,(V+tt-a)*n));t.fillText(Q[tt],nt-(m-p)/2,i)}}else t.fillStyle="yellow",t.fillRect(Z,i+("Dense"!==this.mode?2:5),m-p,"Dense"!==e?3:9)}else("Pack"===e||"Auto"===this.mode)&&void 0!==c&&n>x&&O.push({type:"text",data:[Q.length,K,i+9]})}w+=U}else b=d(b,z,U),w=u(w,z,U)}t.fillStyle="yellow";for(var it=0;it<O.length;it++)g=(_=O[it]).type,v=_.data,"text"===g?(t.save(),t.font="bold ".concat(t.font),t.fillText(v[0],v[1],v[2]),t.restore()):"triangle"===g&&R(t,v[0],v[1],v[2])}},{key:"draw_element",value:function(t,e,n,i,a,r,o,s,l){var c=n[1],d=n[2],u=n[3],h=Math.floor(Math.max(-.5*o,(c-a-.5)*o)),f=Math.ceil(Math.min(l,Math.max(0,(d-a-.5)*o))),p=("Dense"===e?0:0+i)*s,m="Pack"===e?9:3;if(n[5]instanceof Array){var _=!0;n[4][1]>=a&&n[4][0]<=r&&n[4][2]?this.draw_read(t,e,o,p,a,r,n[4][0],n[4][2],n[4][3],n[4][4]):_=!1,n[5][1]>=a&&n[5][0]<=r&&n[5][2]?this.draw_read(t,e,o,p,a,r,n[5][0],n[5][2],n[5][3],n[5][4]):_=!1;var g=Math.ceil(Math.min(l,Math.max(-.5*o,(n[4][1]-a-.5)*o))),v=Math.floor(Math.max(-.5*o,(n[5][0]-a-.5)*o));if(_&&v>g){t.fillStyle="#ccc";var y=p+1+(m-1)/2;!function(t,e,n,i,a,r){void 0===r&&(r=4);var o,s=i-e,l=a-n,c=Math.floor(Math.sqrt(s*s+l*l)/r),d=s/c,u=l/c;for(o=0;o<c;o++,e+=d,n+=u)o%2==0&&t.fillRect(e,n,r,1)}(t,g,y,v,y)}}else this.draw_read(t,e,o,p,a,r,c,n[4],n[5],n[6]);return"Pack"===e&&c>=a&&"."!==u&&(t.fillStyle=this.prefs.label_color,0===a&&h-t.measureText(u).width<0?(t.textAlign="left",t.fillText(u,f+2,p+9,this.max_label_length)):(t.textAlign="right",t.fillText(u,h-2,p+9,this.max_label_length))),[0,0]}}]),n}(z),B=function(t){w(n,t);var e=x(n);function n(t,i,a,r,o,s,l){var c;return C(this,n),(c=e.call(this,t,i,a,r,o,s,l)).longest_feature_length=c.calculate_longest_feature_length(),c.draw_background_connector=!1,c.draw_individual_connectors=!0,c}return j(n,[{key:"calculate_longest_feature_length",value:function(){for(var t=0,e=0,n=this.data.length;e<n;e++){var i=this.data[e],a=i[1],r=i[2];t=Math.max(t,r-a)}return t}},{key:"get_top_padding",value:function(t){var e=t/(this.view_end-this.view_start);return Math.min(128,Math.ceil(this.longest_feature_length/2*e))}},{key:"draw_connector",value:function(t,e,n,i,a,r){var o=(n+i)/2;i-o>0&&(t.beginPath(),t.arc(o,r,i-o,Math.PI,0),t.stroke())}}]),n}(U),q=function(){function t(e,n){C(this,t),Array.isArray(e)?this.rgb=e:6==e.length?this.rgb=e.match(/.{2}/g).map((function(t){return parseInt(t,16)})):7==e.length?this.rgb=e.substring(1,7).match(/.{2}/g).map((function(t){return parseInt(t,16)})):this.rgb=e.split("").map((function(t){return parseInt(t+t,16)})),this.alpha="number"==typeof n?n:1}return j(t,[{key:"eval",value:function(){return this}},{key:"toCSS",value:function(){return this.alpha<1?"rgba(".concat(this.rgb.map((function(t){return Math.round(t)})).concat(this.alpha).join(", "),")"):"#".concat(this.rgb.map((function(t){return 1===(t=((t=Math.round(t))>255?255:t<0?0:t).toString(16)).length?"0".concat(t):t})).join(""))}},{key:"toHSL",value:function(){var t,e,n=this.rgb[0]/255,i=this.rgb[1]/255,a=this.rgb[2]/255,r=this.alpha,o=Math.max(n,i,a),s=Math.min(n,i,a),l=(o+s)/2,c=o-s;if(o===s)t=e=0;else{switch(e=l>.5?c/(2-o-s):c/(o+s),o){case n:t=(i-a)/c+(i<a?6:0);break;case i:t=(a-n)/c+2;break;case a:t=(n-i)/c+4}t/=6}return{h:360*t,s:e,l:l,a:r}}},{key:"toARGB",value:function(){var t=[Math.round(255*this.alpha)].concat(this.rgb);return"#".concat(t.map((function(t){return 1===(t=((t=Math.round(t))>255?255:t<0?0:t).toString(16)).length?"0".concat(t):t})).join(""))}},{key:"mix",value:function(e,n){var i=n,a=2*i-1,r=this.toHSL().a-e.toHSL().a,o=((a*r==-1?a:(a+r)/(1+a*r))+1)/2,s=1-o;return new t([this.rgb[0]*o+e.rgb[0]*s,this.rgb[1]*o+e.rgb[1]*s,this.rgb[2]*o+e.rgb[2]*s],this.alpha*i+e.alpha*(1-i))}}]),t}(),G=function(){function t(e,n,i,a){C(this,t),this.start_color=new q(e),this.end_color=new q(n),this.start_value=i,this.end_value=a,this.value_range=a-i}return j(t,[{key:"map_value",value:function(t){return t=Math.max(t,this.start_value),t=((t=Math.min(t,this.end_value))-this.start_value)/this.value_range,this.start_color.mix(this.end_color,1-t).toCSS()}}]),t}(),J=function(){function t(e,n,i,a,r){C(this,t),this.positive_ramp=new G(n,i,0,r),this.negative_ramp=new G(n,e,0,-a),this.start_value=a,this.end_value=r}return j(t,[{key:"map_value",value:function(t){return t=Math.max(t,this.start_value),(t=Math.min(t,this.end_value))>=0?this.positive_ramp.map_value(t):this.negative_ramp.map_value(-t)}}]),t}(),K=function(t){w(n,t);var e=x(n);function n(t,i,a,r,o){var s,l,c;if(C(this,n),void 0===(s=e.call(this,t,i,a,r,o)).prefs.min_value){var d=1/0;for(l=0,c=s.data.length;l<c;l++)d=Math.min(d,s.data[l][6]);s.prefs.min_value=d}if(void 0===s.prefs.max_value){var u=-1/0;for(l=0,c=s.data.length;l<c;l++)u=Math.max(u,s.data[l][6]);s.prefs.max_value=u}return s}return j(n,[{key:"draw",value:function(t,e,n,i){var a,r,o,s,l,c,d=this.prefs.min_value,u=this.prefs.max_value,h=this.view_start,f=1/Math.sqrt(2),p=new J(this.prefs.neg_color,"#FFFFFF",this.prefs.pos_color,d,u),m=function(t){return(t-h)*i};t.save(),t.rotate(-45*Math.PI/180),t.scale(f,f);for(var _=0,g=this.data.length;_<g;_++)r=m((a=this.data[_])[1]),o=m(a[2]),s=m(a[4]),l=m(a[5]),c=a[6],t.fillStyle=p.map_value(c),t.fillRect(r,s,o-r,l-s);t.restore()}}],[{key:"default_prefs",get:function(){return{min_value:void 0,max_value:void 0,mode:"Heatmap",pos_color:"#FF8C00",neg_color:"#4169E1"}}}]),n}($),X=function(){function t(e,n,i,a){C(this,t),this.ctx=e,this.row_height=n,this.px_per_base=i,this.draw_details=("Pack"===a||"Auto"===a)&&i>=e.canvas.manager.char_width_px,this.delete_details_thickness=.2}return j(t,[{key:"draw_deletion",value:function(t,e,n){this.ctx.fillStyle="black";var i=(this.draw_details?this.delete_details_thickness:1)*this.row_height;e+=.5*(this.row_height-i),this.ctx.fillRect(t,e,n*this.px_per_base,i)}}]),t}(),Q={Scaler:H,LinePainter:F,LinkedFeaturePainter:U,ReadPainter:V,ArcLinkedFeaturePainter:B,DiagonalHeatmapPainter:K,VariantPainter:function(t){w(n,t);var e=x(n);function n(t,i,a,r,o,s){var l;return C(this,n),(l=e.call(this,t,i,a,r,o)).base_color_fn=s,l.divider_height=1,l}return j(n,[{key:"get_row_height",value:function(){var t=this.mode;return"Dense"===t?10:"Squish"===t?5:10}},{key:"get_required_height",value:function(t){var e=this.prefs.summary_height;return t>1&&this.prefs.show_sample_data&&(e+=this.divider_height+t*this.get_row_height()),e}},{key:"draw",value:function(t,e,n,a){t.save();var r,o,s,l,c,d,u,h,f,p,m,_=function(t,e){var n=t.length,i=e.length,a=0,r=1,o=null;return"-"===e?(o="deletion",r=t.length):0===t.indexOf(e)&&n>i?(o="deletion",r=n-i,a=i):0===e.indexOf(t)&&n<i&&(o="insertion",r=i-n,a=i),null!==o?{type:o,start:a,len:r}:{}},g=Math.max(1,Math.floor(a)),v=this.data.length?this.data[0][7].split(",").length:0,y="Squish"===this.mode?5:10,b=a<.1?y:"Squish"===this.mode?3:9,w=!0,k=new X(t,y,a,this.mode);1===v&&(y=b=a<t.canvas.manager.char_width_px?this.prefs.summary_height:y,k.row_height=y,w=!1),this.prefs.show_sample_data&&w&&(t.fillStyle="#F3F3F3",t.globalAlpha=1,t.fillRect(0,this.prefs.summary_height-this.divider_height,e,this.divider_height)),t.textAlign="center";for(var x=0;x<this.data.length;x++)if(o=(r=this.data[x])[1],s=r[3],l=[r[4].split(",")],c=r[7].split(","),d=r.slice(8),l=i.default.map(i.default.flatten(l),(function(t){var e={type:"snp",value:t,start:0},n=_(s,t);return i.default.extend(e,n)})),!(o<this.view_start||o>this.view_end)){if(w)for(t.fillStyle="#999999",t.globalAlpha=1,m=0;m<l.length;m++)for(h=this.get_start_draw_pos(o+l[m].start,a),t.fillRect(h,0,g,this.prefs.summary_height),f=this.prefs.summary_height,m=0;m<l.length;m++){t.fillStyle="deletion"===l[m].type?"black":this.base_color_fn(l[m].value);var S=d/c.length,M=Math.ceil(this.prefs.summary_height*S);t.fillRect(h,f-M,g,M),f-=M}if(this.prefs.show_sample_data)for(f=w?this.prefs.summary_height+this.divider_height:0,m=0;m<c.length;m++,f+=y)if(u=null,(p=c[m]?c[m].split(/\/|\|/):["0","0"])[0]===p[1]?"."===p[0]||"0"!==p[0]&&(u=l[parseInt(p[0],10)-1],t.globalAlpha=1):(u="0"!==p[0]?p[0]:p[1],u=l[parseInt(u,10)-1],t.globalAlpha=.5),u)if(h=this.get_start_draw_pos(o+u.start,a),"snp"===u.type){var C=u.value;t.fillStyle=this.base_color_fn(C),k.draw_details?t.fillText(C,this.get_draw_pos(o,a),f+y):t.fillRect(h,f+1,g,b)}else"deletion"===u.type&&k.draw_deletion(h,f+1,u.len)}t.restore()}}]),n}($)},Z=function(t){this.manager=null,this.name=t.name,this.index=t.index,this.tool_id=t.tool_id,this.tool_exp_name=t.tool_exp_name};i.default.extend(Z.prototype,{to_dict:function(){return{name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name}}});var tt=function(t,e,n){return r()("<a/>").attr("href","javascript:void(0);").attr("title",t).addClass("icon-button").addClass(e).tooltip().click(n)},et=function(t){Z.call(this,t),this.low="low"in t?t.low:-Number.MAX_VALUE,this.high="high"in t?t.high:Number.MAX_VALUE,this.min="min"in t?t.min:Number.MAX_VALUE,this.max="max"in t?t.max:-Number.MAX_VALUE,this.container=null,this.slider=null,this.slider_label=null;var e=this;e.parent_div=r()("<div/>").addClass("filter-row slider-row");var n=r()("<div/>").addClass("elt-label").appendTo(e.parent_div);r()("<span/>").addClass("slider-name").text("".concat(e.name,"  ")).appendTo(n);var i=r()("<span/>").text("".concat(this.low,"-").concat(this.high)),a=r()("<span/>").addClass("slider-value").appendTo(n).append("[").append(i).append("]");e.values_span=i;var o,s,l,c=r()("<div/>").addClass("slider").appendTo(e.parent_div);e.control_element=r()("<div/>").attr("id","".concat(e.name,"-filter-control")).appendTo(c),e.control_element.slider({range:!0,min:this.min,max:this.max,step:this.get_slider_step(this.min,this.max),values:[this.low,this.high],slide:function(t,n){e.slide(t,n)},change:function(t,n){e.control_element.slider("option","slide").call(e.control_element,t,n)}}),e.slider=e.control_element,e.slider_label=i,o=a,s=i,l=e.control_element,o.click((function(){var t=s.text(),e=parseFloat(l.slider("option","max")),n=e<=1?4:e<=1e6?e.toString().length:6,i=!1,a=r()(this).parents(".slider-row");a.addClass("input"),l.slider("option","values")&&(n=2*n+1,i=!0),s.text(""),r()("<input type='text'/>").attr("size",n).attr("maxlength",n).attr("value",t).appendTo(s).focus().select().click((function(t){t.stopPropagation()})).blur((function(){r()(this).remove(),s.text(t),a.removeClass("input")})).keyup((function(t){if(27===t.keyCode)r()(this).trigger("blur");else if(13===t.keyCode){var e=l.slider("option","min"),n=l.slider("option","max"),o=function(t){return isNaN(t)||t>n||t<e},s=r()(this).val();if(i){if(s=s.split("-"),o((s=[parseFloat(s[0]),parseFloat(s[1])])[0])||o(s[1]))return alert("Parameter value must be in the range [".concat(e,"-").concat(n,"]")),r()(this)}else if(o(s=parseFloat(s)))return alert("Parameter value must be in the range [".concat(e,"-").concat(n,"]")),r()(this);l.slider(i?"values":"value",s),a.removeClass("input")}}))}));var d=r()("<div/>").addClass("display-controls").appendTo(e.parent_div);this.transparency_icon=tt("Use filter for data transparency","layer-transparent",(function(){e.manager.alpha_filter!==e?(e.manager.alpha_filter=e,e.manager.parent_div.find(".layer-transparent").removeClass("active").hide(),e.transparency_icon.addClass("active").show()):(e.manager.alpha_filter=null,e.transparency_icon.removeClass("active")),e.manager.track.request_draw({force:!0,clear_after:!0})})).appendTo(d).hide(),this.height_icon=tt("Use filter for data height","arrow-resize-090",(function(){e.manager.height_filter!==e?(e.manager.height_filter=e,e.manager.parent_div.find(".arrow-resize-090").removeClass("active").hide(),e.height_icon.addClass("active").show()):(e.manager.height_filter=null,e.height_icon.removeClass("active")),e.manager.track.request_draw({force:!0,clear_after:!0})})).appendTo(d).hide(),e.parent_div.hover((function(){e.transparency_icon.show(),e.height_icon.show()}),(function(){e.manager.alpha_filter!==e&&e.transparency_icon.hide(),e.manager.height_filter!==e&&e.height_icon.hide()})),r()("<div style='clear: both;'/>").appendTo(e.parent_div)};i.default.extend(et.prototype,{to_dict:function(){var t=Z.prototype.to_dict.call(this);return i.default.extend(t,{type:"number",min:this.min,max:this.max,low:this.low,high:this.high})},copy:function(){return new et({name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name})},get_slider_step:function(t,e){return e-t<=2?.01:1},slide:function(t,e){var n=e.values;this.values_span.text("".concat(n[0],"-").concat(n[1])),this.low=n[0],this.high=n[1];var i=this;setTimeout((function(){n[0]===i.low&&n[1]===i.high&&i.manager.track.request_draw({force:!0,clear_after:!0})}),25)},applies_to:function(t){return t.length>this.index},_keep_val:function(t){return isNaN(t)||t>=this.low&&t<=this.high},keep:function(t){if(!this.applies_to(t))return!0;var e=t[this.index];if(e instanceof Array){for(var n=!0,i=0;i<e.length;i++)if(!this._keep_val(e[i])){n=!1;break}return n}return this._keep_val(t[this.index])},update_attrs:function(t){var e=!1;if(!this.applies_to(t))return e;var n=t[this.index];n instanceof Array||(n=[n]);for(var i=0;i<n.length;i++){var a=n[i];a<this.min&&(this.min=Math.floor(a),e=!0),a>this.max&&(this.max=Math.ceil(a),e=!0)}return e},update_ui_elt:function(){this.min<this.max?this.parent_div.show():this.parent_div.hide();var t=this.slider.slider("option","min"),e=this.slider.slider("option","max");(this.min<t||this.max>e)&&(this.slider.slider("option","min",this.min),this.slider.slider("option","max",this.max),this.slider.slider("option","step",this.get_slider_step(this.min,this.max)),this.slider.slider("option","values",[this.min,this.max]))}});var nt=function(t,e){if(this.track=t,this.alpha_filter=null,this.height_filter=null,this.filters=[],this.parent_div=r()("<div/>").addClass("filters").hide(),this.parent_div.bind("drag",(function(t){t.stopPropagation()})).click((function(t){t.stopPropagation()})).bind("dblclick",(function(t){t.stopPropagation()})).bind("keydown",(function(t){t.stopPropagation()})),e&&"filters"in e){for(var n,i=("alpha_filter"in e?e.alpha_filter:null),a=("height_filter"in e?e.height_filter:null),o=e.filters,s=0;s<o.length;s++)"number"===o[s].type?(n=new et(o[s]),this.add_filter(n),n.name===i&&(this.alpha_filter=n,n.transparency_icon.addClass("active").show()),n.name===a&&(this.height_filter=n,n.height_icon.addClass("active").show())):console.log("ERROR: unsupported filter: ",o[s]);"visible"in e&&e.visible&&this.parent_div.show()}if(0!==this.filters.length){var l=r()("<div/>").addClass("param-row").appendTo(this.parent_div),c=r()("<input type='submit'/>").attr("value","Run on complete dataset").appendTo(l),d=this;c.click((function(){d.run_on_dataset()}))}};i.default.extend(nt.prototype,{show:function(){this.parent_div.show()},hide:function(){this.parent_div.hide()},toggle:function(){this.parent_div.toggle()},visible:function(){return this.parent_div.is(":visible")},to_dict:function(){for(var t,e={},n=[],i=0;i<this.filters.length;i++)t=this.filters[i],n.push(t.to_dict());return e.filters=n,e.alpha_filter=this.alpha_filter?this.alpha_filter.name:null,e.height_filter=this.height_filter?this.height_filter.name:null,e.visible=this.parent_div.is(":visible"),e},copy:function(t){for(var e=new nt(t),n=0;n<this.filters.length;n++)e.add_filter(this.filters[n].copy());return e},add_filter:function(t){t.manager=this,this.parent_div.append(t.parent_div),this.filters.push(t)},remove_all:function(){this.filters=[],this.parent_div.children().remove()},init_filters:function(){for(var t=0;t<this.filters.length;t++){this.filters[t].update_ui_elt()}},clear_filters:function(){for(var t=0;t<this.filters.length;t++){var e=this.filters[t];e.slider.slider("option","values",[e.min,e.max])}this.alpha_filter=null,this.height_filter=null,this.parent_div.find(".icon-button").hide()},run_on_dataset:function(){for(var t,e,n=function(t,e,n){return e in t||(t[e]=n),t[e]},i={},a=0;a<this.filters.length;a++)(t=this.filters[a]).tool_id&&(t.min!==t.low&&((e=n(i,t.tool_id,[]))[e.length]="".concat(t.tool_exp_name," >= ").concat(t.low)),t.max!==t.high&&((e=n(i,t.tool_id,[]))[e.length]="".concat(t.tool_exp_name," <= ").concat(t.high)));var o=[];for(var s in i)o[o.length]=[s,i[s]];!function t(e,n){var i=n[0],a=i[0],o=i[1],s={cond:"(".concat(o.join(") and ("),")"),input:e,target_dataset_id:e,tool_id:a};n=n.slice(1),r.a.getJSON(run_tool_url,s,(function(e){var i=Object(c.a)();e.error?i.modal.show({title:u()("Filter Dataset"),body:"Error running tool ".concat(a),buttons:{Close:i.modal.hide()}}):0===n.length?i.modal.show({title:u()("Filtering Dataset"),body:"Filter(s) are running on the complete dataset. Outputs are in dataset's history.",buttons:{Close:i.modal.hide()}}):t(e.dataset_id,n)}))}(this.track.dataset_id,o)}});var it=nt,at=et,rt=n(56),ot=n(104),st=n(80),lt=n(421),ct={BBIDataManager:h.a.GenomeDataManager.extend({load_data:function(t,e,n,i){var a=r.a.Deferred();this.set_data(t,a);var o="".concat(Object(l.getAppRoot)(),"datasets/").concat(this.get("dataset").id,"/display"),s=this;return r.a.when(lt.makeBwg(o)).then((function(e,n){r.a.when(e.readWigData(t.get("chrom"),t.get("start"),t.get("end"))).then((function(e){var n=[],i={max:Number.MIN_VALUE};e.forEach((function(t){i.max!==t.min-1&&(n.push([i.max+1,0]),n.push([t.min-2,0])),n.push([t.min-1,t.score]),n.push([t.max,t.score]),i=t}));var r={data:n,region:t,dataset_type:"bigwig"};s.set_data(t,r),a.resolve(r)}))})),a}})},dt=(n(150),i.default.extend),ut={};function ht(t,e){ut[t.attr("id")]=e}function ft(t,e,n,i){ut[t.attr("id")]=i,t.bind("drag",{handle:".".concat(e),relative:!0},(function(t,e){var n,i,a,o,s,l=r()(this).parent(),c=l.children(".track,.group"),d=ut[r()(this).attr("id")];if(0!==(i=r()(this).parents(".group")).length){o=(a=i.position().top)+i.outerHeight();var u=ut[i.attr("id")];if(e.offsetY<a)return r()(this).insertBefore(i),u.remove_drawable(d),void u.container.add_drawable_before(d,u);if(e.offsetY>o)return r()(this).insertAfter(i),u.remove_drawable(d),void u.container.add_drawable(d)}for(i=null,s=0;s<c.length;s++)if(o=(a=(n=r()(c.get(s))).position().top)+n.outerHeight(),n.is(".group")&&this!==n.get(0)&&e.offsetY>=a&&e.offsetY<=o)return e.offsetY-a<o-e.offsetY?n.find(".content-div").prepend(this):n.find(".content-div").append(this),d.container&&d.container.remove_drawable(d),void ut[n.attr("id")].add_drawable(d);for(s=0;s<c.length&&(n=r()(c.get(s)),!(e.offsetY<n.position().top)||n.hasClass("reference-track")||n.hasClass("intro"));s++);s===c.length?this!==c.get(s-1)&&(l.append(this),ut[l.attr("id")].move_drawable(d,s)):this!==c.get(s)&&(r()(this).insertBefore(c.get(s)),ut[l.attr("id")].move_drawable(d,e.deltaY>0?s-1:s))})).bind("dragstart",(function(){r()(this).addClass("dragging")})).bind("dragend",(function(){r()(this).removeClass("dragging")}))}var pt="A converter for this dataset is not installed. Please check your datatypes_conf.xml file.",mt=["Histogram","Line","Filled","Intensity"];function _t(t,e){e||(e=0);var n=Math.pow(10,e);return Math.round(t*n)/n}var gt=function t(e,n,i){if(t.id_counter||(t.id_counter=0),this.id=t.id_counter++,this.view=e,this.container=n,this.drag_handle_class=i.drag_handle_class,this.is_overview=!1,this.action_icons={},this.config=st.a.ConfigSettingCollection.from_models_and_saved_values(this.build_config_params(),i.prefs),this.config.get_value("name")||this.config.set_value("name",i.name),this.config_onchange&&this.config.on("change",this.config_onchange,this),this.container_div=this.build_container_div(),this.header_div=null,!1!==i.header){var a=new p.TrackHeaderView({model:this,id:this.id});this.header_div=a.$el,this.container_div.append(this.header_div);var r=a.icons_div;this.action_icons=a.action_icons,this.container_div.hover((function(){r.show()}),(function(){r.hide()}))}};gt.prototype.action_icons_def=[{name:"toggle_icon",title:"Hide/show content",css_class:"toggle",on_click_fn:function(t){t.config.get_value("content_visible")?(t.action_icons.toggle_icon.addClass("toggle-expand").removeClass("toggle"),t.hide_contents(),t.config.set_value("content_visible",!1)):(t.action_icons.toggle_icon.addClass("toggle").removeClass("toggle-expand"),t.config.set_value("content_visible",!0),t.show_contents())}},{name:"settings_icon",title:u()("Edit settings"),css_class:"gear",on_click_fn:function(t){new st.a.ConfigSettingCollectionView({collection:t.config}).render_in_modal("Configure Track")}},{name:"remove_icon",title:u()("Remove"),css_class:"remove-icon",on_click_fn:function(t){r()(".tooltip").remove(),t.remove()}}],dt(gt.prototype,{config_params:[{key:"name",label:"Name",type:"text",default_value:""},{key:"content_visible",type:"bool",default_value:!0,hidden:!0}],build_config_params:function(){return this.config_params},config_onchange:function(){},init:function(){},changed:function(){this.view.changed()},can_draw:function(){return!(!this.enabled||!this.config.get_value("content_visible"))},request_draw:function(){},_draw:function(t){},to_dict:function(){},set_name:function(t){this.old_name=this.config.get_value("name"),this.config.set_value("name",t)},revert_name:function(){this.old_name&&this.config.set_value("name",this.old_name)},remove:function(){this.changed(),this.container.remove_drawable(this);var t=this.view;this.container_div.hide(0,(function(){r()(this).remove(),t.update_intro_div()}))},build_container_div:function(){},update_icons:function(){},hide_contents:function(){},show_contents:function(){},get_drawables:function(){}});var vt=function(t,e,n){gt.call(this,t,e,n),this.obj_type=n.obj_type,this.drawables=[]};dt(vt.prototype,gt.prototype,{unpack_drawables:function(t){var e;this.drawables=[];for(var n=0;n<t.length;n++)e=Nt(t[n],this.view,this),this.add_drawable(e)},init:function(){for(var t=0;t<this.drawables.length;t++)this.drawables[t].init()},_draw:function(t){for(var e=0;e<this.drawables.length;e++)this.drawables[e]._draw(t)},to_dict:function(){for(var t=[],e=0;e<this.drawables.length;e++)t.push(this.drawables[e].to_dict());return{prefs:this.config.to_key_value_dict(),obj_type:this.obj_type,drawables:t}},add_drawable:function(t){this.drawables.push(t),t.container=this,this.changed()},add_drawable_before:function(t,e){this.changed();var n=this.drawables.indexOf(e);return-1!==n&&(this.drawables.splice(n,0,t),!0)},replace_drawable:function(t,e,n){var i=this.drawables.indexOf(t);return-1!==i&&(this.drawables[i]=e,n&&t.container_div.replaceWith(e.container_div),this.changed()),i},remove_drawable:function(t){var e=this.drawables.indexOf(t);return-1!==e&&(this.drawables.splice(e,1),t.container=null,this.changed(),!0)},move_drawable:function(t,e){var n=this.drawables.indexOf(t);return-1!==n&&(this.drawables.splice(n,1),this.drawables.splice(e,0,t),this.changed(),!0)},get_drawables:function(){return this.drawables},get_tracks:function(t){for(var e,n=this.drawables.slice(0),i=[];0!==n.length;)(e=n.shift())instanceof t?i.push(e):e.drawables&&(n=n.concat(e.drawables));return i}});var yt=function(t,e,n){if(dt(n,{obj_type:"DrawableGroup",drag_handle_class:"group-handle"}),vt.call(this,t,e,n),this.content_div=r()("<div/>").addClass("content-div").attr("id","group_".concat(this.id,"_content_div")).appendTo(this.container_div),ht(this.container_div,this),ht(this.content_div,this),ft(this.container_div,this.drag_handle_class,0,this),this.filters_manager=new it(this),this.header_div.after(this.filters_manager.parent_div),this.filters_manager.parent_div.after(r()("<div style='clear: both'/>")),this.saved_filters_managers=[],"drawables"in n&&this.unpack_drawables(n.drawables),"filters"in n){var i=this.filters_manager;this.filters_manager=new it(this,n.filters),i.parent_div.replaceWith(this.filters_manager.parent_div),n.filters.visible&&this.setup_multitrack_filtering()}};dt(yt.prototype,gt.prototype,vt.prototype,{action_icons_def:[gt.prototype.action_icons_def[0],gt.prototype.action_icons_def[1],{name:"composite_icon",title:u()("Show composite track"),css_class:"layers-stack",on_click_fn:function(t){r()(".tooltip").remove(),t.show_composite_track()}},{name:"filters_icon",title:u()("Filters"),css_class:"ui-slider-050",on_click_fn:function(t){t.filters_manager.visible()?(t.filters_manager.clear_filters(),t._restore_filter_managers()):(t.setup_multitrack_filtering(),t.request_draw({clear_tile_cache:!0})),t.filters_manager.toggle()}},gt.prototype.action_icons_def[2]],build_container_div:function(){var t=r()("<div/>").addClass("group").attr("id","group_".concat(this.id));return this.container&&this.container.content_div.append(t),t},hide_contents:function(){this.tiles_div.hide()},show_contents:function(){this.tiles_div.show(),this.request_draw()},update_icons:function(){var t=this.drawables.length;if(0===t)this.action_icons.composite_icon.hide(),this.action_icons.filters_icon.hide();else if(1===t)this.action_icons.composite_icon.toggle(this.drawables[0]instanceof Dt),this.action_icons.filters_icon.hide();else{var e,n,i,a=this.drawables[0].get_type(),o=0;for(e=0;e<t&&(i=this.drawables[e]).get_type()===a;e++)i instanceof Pt&&o++;if(this.drawables[0]instanceof Et?this.action_icons.composite_icon.show():(this.action_icons.composite_icon.hide(),r()(".tooltip").remove()),o>1&&o===this.drawables.length){var s,l={};for(i=this.drawables[0],n=0;n<i.filters_manager.filters.length;n++)l[(s=i.filters_manager.filters[n]).name]=[s];for(e=1;e<this.drawables.length;e++)for(i=this.drawables[e],n=0;n<i.filters_manager.filters.length;n++)(s=i.filters_manager.filters[n]).name in l&&l[s.name].push(s);for(var c in this.filters_manager.remove_all(),l){var d=l[c];if(d.length===o){var u=new at({name:d[0].name,index:d[0].index});this.filters_manager.add_filter(u)}}this.action_icons.filters_icon.toggle(this.filters_manager.filters.length>0)}else this.action_icons.filters_icon.hide()}},_restore_filter_managers:function(){for(var t=0;t<this.drawables.length;t++)this.drawables[t].filters_manager=this.saved_filters_managers[t];this.saved_filters_managers=[]},setup_multitrack_filtering:function(){if(this.filters_manager.filters.length>0){this.saved_filters_managers=[];for(var t=0;t<this.drawables.length;t++){var e=this.drawables[t];this.saved_filters_managers.push(e.filters_manager),e.filters_manager=this.filters_manager}}this.filters_manager.init_filters()},show_composite_track:function(){var t=new Dt(this.view,this.view,{name:this.config.get_value("name"),drawables:this.drawables});this.container.replace_drawable(this,t,!0),t.request_draw()},add_drawable:function(t){vt.prototype.add_drawable.call(this,t),this.update_icons()},remove_drawable:function(t){vt.prototype.remove_drawable.call(this,t),this.update_icons()},to_dict:function(){this.filters_manager.visible()&&this._restore_filter_managers();var t=dt(vt.prototype.to_dict.call(this),{filters:this.filters_manager.to_dict()});return this.filters_manager.visible()&&this.setup_multitrack_filtering(),t},request_draw:function(t){i.default.each(this.drawables,(function(e){e.request_draw(t)}))}});var bt=s.a.View.extend({initialize:function(t){dt(t,{obj_type:"View"}),vt.call(this,"View",t.container,t),this.chrom=null,this.vis_id=t.vis_id,this.dbkey=t.dbkey,this.stand_alone=void 0===t.stand_alone||t.stand_alone,this.label_tracks=[],this.tracks_to_be_redrawn=[],this.max_low=0,this.max_high=0,this.zoom_factor=3,this.min_separation=30,this.has_changes=!1,this.load_chroms_deferred=null,this.render(),this.canvas_manager=new h.a.CanvasManager(this.container.get(0).ownerDocument),this.reset(),this.config=st.a.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"}],{name:t.name})},render:function(){this.requested_redraw=!1;var t=this.container,e=this;this.top_container=r()("<div/>").addClass("top-container").appendTo(t),this.browser_content_div=r()("<div/>").addClass("content").appendTo(t),this.bottom_container=r()("<div/>").addClass("bottom-container").appendTo(t),this.top_labeltrack=r()("<div/>").addClass("top-labeltrack").appendTo(this.top_container),this.viewport_container=r()("<div/>").addClass("viewport-container").attr("id","viewport-container").appendTo(this.browser_content_div),this.content_div=this.viewport_container,ht(this.viewport_container,e),this.intro_div=r()("<div/>").addClass("intro").appendTo(this.viewport_container),r()("<div/>").text("Add Datasets to Visualization").addClass("action-button").appendTo(this.intro_div).click((function(){h.a.select_datasets({dbkey:e.dbkey},(function(t){i.default.each(t,(function(t){e.add_drawable(Nt(t,e,e))}))}))})),t.attr("style","overflow: visible !important"),this.nav_container=r()("<div/>").addClass("trackster-nav-container").prependTo(this.top_container),this.nav=r()("<div/>").addClass("trackster-nav").appendTo(this.nav_container),this.stand_alone&&(this.nav_container.addClass("stand-alone"),this.nav.addClass("stand-alone")),this.overview=r()("<div/>").addClass("overview").appendTo(this.bottom_container),this.overview_viewport=r()("<div/>").addClass("overview-viewport").appendTo(this.overview),this.overview_close=r()("<a/>").attr("title","Close overview").addClass("icon-button overview-close tooltip").hide().appendTo(this.overview_viewport),this.overview_highlight=r()("<div/>").addClass("overview-highlight").hide().appendTo(this.overview_viewport),this.overview_box_background=r()("<div/>").addClass("overview-boxback").appendTo(this.overview_viewport),this.overview_box=r()("<div/>").addClass("overview-box").appendTo(this.overview_viewport),this.default_overview_height=this.overview_box.height(),this.nav_controls=r()("<div/>").addClass("nav-controls").appendTo(this.nav),this.chrom_select=r()("<select/>").attr({name:"chrom"}).addClass("chrom-nav").append("<option value=''>Loading</option>").appendTo(this.nav_controls);this.nav_input=r()("<input/>").addClass("nav-input").hide().bind("keyup focusout",(function(t){"focusout"!==t.type&&13!==(t.keyCode||t.which)&&27!==(t.keyCode||t.which)||(27!==(t.keyCode||t.which)&&e.go_to(r()(this).val()),r()(this).hide(),r()(this).val(""),e.location_span.show(),e.chrom_select.show()),t.stopPropagation()})).appendTo(this.nav_controls),this.location_span=r()("<span/>").addClass("location").attr("title","Click to change location").tooltip({placement:"bottom"}).appendTo(this.nav_controls),this.location_span.click((function(){e.location_span.hide(),e.chrom_select.hide(),e.nav_input.val("".concat(e.chrom,":").concat(e.low,"-").concat(e.high)),e.nav_input.css("display","inline-block"),e.nav_input.select(),e.nav_input.focus(),e.nav_input.autocomplete({source:function(t,n){var i=[],a=r.a.map(e.get_tracks(Pt),(function(e){return e.data_manager.search_features(t.term).success((function(t){i=i.concat(t)}))}));r.a.when.apply(r.a,a).done((function(){n(r.a.map(i,(function(t){return{label:t[0],value:t[1]}})))}))},minLength:2})})),void 0!==this.vis_id&&(this.hidden_input=r()("<input/>").attr("type","hidden").val(this.vis_id).appendTo(this.nav_controls)),this.zo_link=r()("<a/>").attr("id","zoom-out").attr("title","Zoom out").tooltip({placement:"bottom"}).click((function(){e.zoom_out()})).appendTo(this.nav_controls),this.zi_link=r()("<a/>").attr("id","zoom-in").attr("title","Zoom in").tooltip({placement:"bottom"}).click((function(){e.zoom_in()})).appendTo(this.nav_controls),this.load_chroms_deferred=this.load_chroms({low:0}),this.chrom_select.bind("change",(function(){e.change_chrom(e.chrom_select.val())})),this.browser_content_div.click((function(t){r()(this).find("input").trigger("blur")})),this.browser_content_div.bind("dblclick",(function(t){e.zoom_in(t.pageX,this.viewport_container)})),this.overview_box.bind("dragstart",(function(t,e){this.current_x=e.offsetX})).bind("drag",(function(t,n){var i=n.offsetX-this.current_x;this.current_x=n.offsetX;var a=Math.round(i/e.viewport_container.width()*(e.max_high-e.max_low));e.move_delta(-a)})),this.overview_close.click((function(){e.reset_overview()})),this.viewport_container.bind("draginit",(function(t,n){if(t.clientX>e.viewport_container.width()-16)return!1})).bind("dragstart",(function(t,n){n.original_low=e.low,n.current_height=t.clientY,n.current_x=n.offsetX})).bind("drag",(function(t,n){var i=r()(this),a=n.offsetX-n.current_x,o=i.scrollTop()-(t.clientY-n.current_height);i.scrollTop(o),n.current_height=t.clientY,n.current_x=n.offsetX;var s=Math.round(a/e.viewport_container.width()*(e.high-e.low));e.move_delta(s)})),this.top_labeltrack.bind("dragstart",(function(t,n){return r()("<div/>").addClass("zoom-area").css("height",e.browser_content_div.height()+e.top_labeltrack.height()+1).appendTo(r()(this))})).bind("drag",(function(t,n){r()(n.proxy).css({left:Math.min(t.pageX,n.startX)-e.container.offset().left,width:Math.abs(t.pageX-n.startX)});var i=Math.min(t.pageX,n.startX)-e.container.offset().left,a=Math.max(t.pageX,n.startX)-e.container.offset().left,o=e.high-e.low,s=e.viewport_container.width();e.update_location(Math.round(i/s*o)+e.low,Math.round(a/s*o)+e.low)})).bind("dragend",(function(t,n){var i=Math.min(t.pageX,n.startX),a=Math.max(t.pageX,n.startX),o=e.high-e.low,s=e.viewport_container.width(),l=e.low;e.low=Math.round(i/s*o)+l,e.high=Math.round(a/s*o)+l,r()(n.proxy).remove(),e.request_redraw()})),this.add_label_track(new Lt(this,{content_div:this.top_labeltrack})),r()(window).bind("resize",(function(){this.resize_timer&&window.clearTimeout(this.resize_timer),this.resize_timer=window.setTimeout((function(){e.resize_window()}),500)})),r()(document).bind("redraw",(function(){e.redraw()})),this.reset(),r()(window).trigger("resize")},get_base_color:function(t){return this.config.get_value("".concat(t.toLowerCase(),"_color"))||this.config.get_value("n_color")}});dt(bt.prototype,vt.prototype,{changed:function(){this.has_changes=!0},update_intro_div:function(){this.intro_div.toggle(0===this.drawables.length)},trigger_navigate:function(t,e,n,i){var a=this;this.timer&&window.clearTimeout(this.timer),i?this.timer=window.setTimeout((function(){a.trigger("navigate","".concat(t,":").concat(e,"-").concat(n))}),500):this.trigger("navigate","".concat(t,":").concat(e,"-").concat(n))},update_location:function(t,e){this.location_span.text("".concat(m.a.commatize(t)," - ").concat(m.a.commatize(e))),this.nav_input.val("".concat(this.chrom,":").concat(m.a.commatize(t),"-").concat(m.a.commatize(e)));var n=this.chrom_select.val();""!==n&&this.trigger_navigate(n,this.low,this.high,!0)},load_chroms:function(t){var e=this;t.num=100;var n=r.a.Deferred();return r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/genomes/").concat(this.dbkey),data:t,dataType:"json",success:function(t){if(0!==t.chrom_info.length){if(t.reference){var i=new At(e);e.add_label_track(i),e.reference_track=i}e.chrom_data=t.chrom_info,e.chrom_select.html(""),e.chrom_select.append(r()('<option value="">Select Chrom/Contig</option>'));for(var a=0,o=e.chrom_data.length;a<o;a++){var s=e.chrom_data[a].chrom,l=r()("<option>");l.text(s),l.val(s),e.chrom_select.append(l)}t.prev_chroms&&e.chrom_select.append(r()('<option value="previous">Previous '.concat(100,"</option>"))),t.next_chroms&&e.chrom_select.append(r()('<option value="next">Next '.concat(100,"</option>"))),e.chrom_start_index=t.start_index,n.resolve(t.chrom_info)}},error:function(){alert("Could not load chroms for this dbkey: ".concat(this.dbkey))}}),n},change_chrom:function(t,e,n){var i=this;if(i.chrom_data){if(t&&"None"!==t)if("previous"!==t)if("next"!==t){var a=r.a.grep(i.chrom_data,(function(e,n){return e.chrom===t}))[0];if(void 0!==a){if(t!==i.chrom){i.chrom=t,i.chrom_select.val(i.chrom),i.max_high=a.len-1,i.reset();for(var o=0,s=i.drawables.length;o<s;o++){var l=i.drawables[o];l.init&&l.init()}i.reference_track&&i.reference_track.init()}void 0===e&&void 0===n?(i.low=0,i.high=i.max_high):(i.low=void 0!==e?Math.max(e,0):0,void 0===n?(i.low=Math.max(i.low-15,0),i.high=i.low+30):i.high=Math.min(n,i.max_high)),i.request_redraw()}else i.load_chroms({chrom:t},(function(){i.change_chrom(t,e,n)}))}else i.load_chroms({low:this.chrom_start_index+100});else i.load_chroms({low:this.chrom_start_index-100})}else i.load_chroms_deferred.then((function(){i.change_chrom(t,e,n)}))},go_to:function(t){var e=(t=(t=t.replace(/,/g,"")).replace(/:|-/g," ")).split(/\s+/),n=e[0],i=e[1]?parseInt(e[1],10):void 0,a=e[2]?parseInt(e[2],10):void 0;this.change_chrom(n,i,a)},move_fraction:function(t){var e=this.high-this.low;this.move_delta(t*e)},move_delta:function(t){var e=this,n=e.high-e.low;e.low-t<e.max_low?(e.low=e.max_low,e.high=e.max_low+n):e.high-t>e.max_high?(e.high=e.max_high,e.low=e.max_high-n):(e.high-=t,e.low-=t),e.request_redraw({data_fetch:!1}),this.redraw_on_move_fn&&window.clearTimeout(this.redraw_on_move_fn),this.redraw_on_move_fn=window.setTimeout((function(){e.request_redraw()}),200);var i=e.chrom_select.val();this.trigger_navigate(i,e.low,e.high,!0)},add_drawable:function(t){vt.prototype.add_drawable.call(this,t),t.init(),this.changed(),this.update_intro_div();var e=this;t.config.on("change",(function(){e.changed()}))},add_label_track:function(t){t.view=this,t.init(),this.label_tracks.push(t)},remove_drawable:function(t,e){if(vt.prototype.remove_drawable.call(this,t),e){var n=this;t.container_div.hide(0,(function(){r()(this).remove(),n.update_intro_div()}))}},reset:function(){this.low=this.max_low,this.high=this.max_high,this.viewport_container.find(".yaxislabel").remove()},request_redraw:function(t,e){var n=this,a=e?[e]:n.drawables;i.default.each(a,(function(e){var a=i.default.find(n.tracks_to_be_redrawn,(function(t){return t[0]===e}));a?a[1]=t:n.tracks_to_be_redrawn.push([e,t])})),this.requested_redraw||(window.requestAnimationFrame((function(){n._redraw()})),this.requested_redraw=!0)},_redraw:function(){this.requested_redraw=!1;var t=this.low,e=this.high;t<this.max_low&&(t=this.max_low),e>this.max_high&&(e=this.max_high);var n=this.high-this.low;0!==this.high&&n<this.min_separation&&(e=t+this.min_separation),this.low=Math.floor(t),this.high=Math.ceil(e),this.update_location(this.low,this.high),this.resolution_px_b=this.viewport_container.width()/(this.high-this.low);var a=this.low/(this.max_high-this.max_low)*this.overview_viewport.width()||0,r=(this.high-this.low)/(this.max_high-this.max_low)*this.overview_viewport.width()||0;this.overview_box.css({left:a,width:Math.max(13,r)}).show(),r<13&&this.overview_box.css("left",a-(13-r)/2),this.overview_highlight&&this.overview_highlight.css({left:a,width:r}),i.default.each(this.tracks_to_be_redrawn,(function(t){var e=t[0],n=t[1];e&&e._draw(n)})),this.tracks_to_be_redrawn=[],i.default.each(this.label_tracks,(function(t){t._draw()}))},zoom_in:function(t,e){if(!(0===this.max_high||this.high-this.low<=this.min_separation)){var n=this.high-this.low,i=n/2+this.low,a=n/this.zoom_factor/2;t&&(i=t/this.viewport_container.width()*(this.high-this.low)+this.low),this.low=Math.round(i-a),this.high=Math.round(i+a),this.changed(),this.request_redraw()}},zoom_out:function(){if(0!==this.max_high){var t=this.high-this.low,e=t/2+this.low,n=t*this.zoom_factor/2;this.low=Math.round(e-n),this.high=Math.round(e+n),this.changed(),this.request_redraw()}},resize_viewport:function(){this.viewport_container.height(this.container.height()-this.top_container.height()-this.bottom_container.height())},resize_window:function(){this.resize_viewport(),this.request_redraw()},set_overview:function(t){if(this.overview_drawable){if(this.overview_drawable.dataset.id===t.dataset.id)return;this.overview_viewport.find(".track").remove()}var e=t.copy({content_div:this.overview_viewport}),n=this;e.header_div.hide(),e.is_overview=!0,n.overview_drawable=e,this.overview_drawable.postdraw_actions=function(){n.overview_highlight.show().height(n.overview_drawable.content_div.height()),n.overview_viewport.height(n.overview_drawable.content_div.height()+n.overview_box.outerHeight()),n.overview_close.show(),n.resize_window()},n.overview_drawable.request_draw(),this.changed()},reset_overview:function(){r()(".tooltip").remove(),this.overview_viewport.find(".track-tile").remove(),this.overview_viewport.height(this.default_overview_height),this.overview_box.height(this.default_overview_height),this.overview_close.hide(),this.overview_highlight.hide(),this.resize_window(),this.overview_drawable=null}});var wt=ot.a.Tool.extend({defaults:{track:null},initialize:function(t){ot.a.Tool.prototype.initialize.call(this,t);var e=!0;void 0!==t.tool_state&&void 0!==t.tool_state.hidden&&(e=t.tool_state.hidden),this.set("hidden",e),this.remove_inputs(["data","hidden_data","conditional"])},state_dict:function(t){return i.default.extend(this.get_inputs_dict(),{hidden:!this.is_visible()})}}),kt=s.a.View.extend({events:{"change :input":"update_value"},render:function(){var t=this.$el.addClass("param-row"),e=this.model;r()("<div>").addClass("param-label").text(e.get("label")).appendTo(t),r()("<div/>").addClass("param-input").html(e.get("html")).appendTo(t).find(":input").val(e.get("value")),r()("<div style='clear: both;'/>").appendTo(t)},update_value:function(t){this.model.set_value(r()(t.target).val())}}),xt=s.a.View.extend({initialize:function(t){this.model.on("change:hidden",this.set_visible,this)},render:function(){var t=this,e=this.model,n=this.$el.addClass("dynamic-tool").hide();n.bind("drag",(function(t){t.stopPropagation()})).click((function(t){t.stopPropagation()})).bind("dblclick",(function(t){t.stopPropagation()})).keydown((function(t){t.stopPropagation()})),r()("<div class='tool-name'>").appendTo(n).text(e.get("name")),e.get("inputs").each((function(t){var e=new kt({model:t});e.render(),n.append(e.$el)})),n.find("input").click((function(){r()(this).select()}));var i=r()("<div>").addClass("param-row").appendTo(n),a=r()("<input type='submit'>").attr("value","Run on complete dataset").appendTo(i);r()("<input type='submit'>").attr("value","Run on visible region").appendTo(i).click((function(){t.run_on_region()})),a.click((function(){t.run_on_dataset()})),e.is_visible()&&this.$el.show()},set_visible:function(){this.$el.toggle(this.model.is_visible())},update_params:function(){for(var t=0;t<this.params.length;t++)this.params[t].update_value()},run_on_dataset:function(){var t=this.model,e=Object(c.a)();this.run({target_dataset_id:this.model.get("track").dataset.id,action:"rerun",tool_id:t.id},null,(function(n){e.modal.show({title:"".concat(t.get("name")," is Running"),body:"".concat(t.get("name")," is running on the complete dataset. Tool outputs are in dataset's history."),buttons:{Close:function(){e.modal.hide()}}})}))},run_on_region:function(){var t,e=this.model.get("track"),n=this.model,i=new h.a.GenomeRegion({chrom:e.view.chrom,start:e.view.low,end:e.view.high}),a={target_dataset_id:e.dataset.id,action:"rerun",tool_id:n.id,regions:[i.toJSON()]},r=n.get("name")+e.tool_region_and_parameters_str(i);if(e.container===e.view){var o=new yt(e.view,e.view,{name:e.config.get_value("name")}),s=e.container.replace_drawable(e,o,!1);o.container_div.insertBefore(e.view.content_div.children()[s]),o.add_drawable(e),e.container_div.appendTo(o.content_div),t=o}else t=e.container;var l=new e.constructor(e.view,t,{name:r,hda_ldda:"hda"});l.init_for_tool_data(),l.change_mode(e.mode),l.set_filters_manager(e.filters_manager.copy(l)),l.update_icons(),t.add_drawable(l),l.tiles_div.text("Starting job."),this.run(a,l,(function(t){l.set_dataset(new rt.a(t)),l.tiles_div.text("Running job."),l.init()}))},run:function(t,e,n){t.inputs=this.model.get_inputs_dict();var i=new m.a.ServerStateDeferred({ajax_settings:{url:"".concat(Object(l.getAppRoot)(),"api/tools"),data:JSON.stringify(t),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(t){return"pending"!==t}});r.a.when(i.go()).then((function(t){"no converter"===t?(e.container_div.addClass("error"),e.content_div.text(pt)):t.error?(e.container_div.addClass("error"),e.content_div.text("Tool cannot be rerun: "+t.message)):n(t)}))}}),St=function(t,e){Q.Scaler.call(this,e),this.filter=t};St.prototype.gen_val=function(t){return this.filter.high===Number.MAX_VALUE||this.filter.low===-Number.MAX_VALUE||this.filter.low===this.filter.high?this.default_val:(parseFloat(t[this.filter.index])-this.filter.low)/(this.filter.high-this.filter.low)};var Mt=function(t,e,n,i,a){this.track=t,this.region=e,this.low=e.get("start"),this.high=e.get("end"),this.w_scale=n,this.canvas=i,this.html_elt=r()("<div class='track-tile'/>").append(i),this.data=a,this.stale=!1};Mt.prototype.predisplay_actions=function(){};var Ct=function(t,e,n,i,a){Mt.call(this,t,e,n,i,a)};Ct.prototype.predisplay_actions=function(){};var Tt=function(t,e,n,i,a,r,o,s,l,c,d){Mt.call(this,t,e,n,i,a),this.mode=r,this.all_slotted=s,this.feature_mapper=l,this.has_icons=!1,this.incomplete_features=c,this.other_tiles_features_drawn={},this.seq_data=d};dt(Tt.prototype,Mt.prototype),Tt.prototype.predisplay_actions=function(){};var jt=function(t,e,n){dt(n,{drag_handle_class:"draghandle"}),gt.call(this,t,e,n),this.dataset=null,n.dataset&&(this.dataset=n.dataset instanceof s.a.Model?n.dataset:new rt.a(n.dataset)),this.dataset_check_type="converted_datasets_state",this.data_url_extra_params={},this.data_query_wait="data_query_wait"in n?n.data_query_wait:5e3,this.data_manager="data_manager"in n?n.data_manager:new h.a.GenomeDataManager({dataset:this.dataset,genome:new h.a.Genome({key:t.dbkey,chroms_info:{chrom_info:t.chrom_data}}),data_mode_compatible:this.data_and_mode_compatible,can_subset:this.can_subset}),this.min_height_px=16,this.max_height_px=800,this.visible_height_px=this.config.get_value("height"),this.content_div=r()("<div class='track-content'>").appendTo(this.container_div),this.container&&(this.container.content_div.append(this.container_div),"resize"in n&&!n.resize||this.add_resize_handle())};dt(jt.prototype,gt.prototype,{action_icons_def:[{name:"mode_icon",title:u()("Set display mode"),css_class:"chevron-expand",on_click_fn:function(){}},gt.prototype.action_icons_def[0],{name:"overview_icon",title:u()("Set as overview"),css_class:"application-dock-270",on_click_fn:function(t){t.view.set_overview(t)}},gt.prototype.action_icons_def[1],{name:"filters_icon",title:u()("Filters"),css_class:"ui-slider-050",on_click_fn:function(t){t.filters_manager.visible()?t.filters_manager.clear_filters():t.filters_manager.init_filters(),t.filters_manager.toggle()}},{name:"tools_icon",title:u()("Tool"),css_class:"hammer",on_click_fn:function(t){t.tool.toggle(),t.tool.is_visible()?t.set_name(t.config.get_value("name")+t.tool_region_and_parameters_str()):t.revert_name(),r()(".tooltip").remove()}},{name:"param_space_viz_icon",title:u()("Tool parameter space visualization"),css_class:"arrow-split",on_click_fn:function(t){var e=Object(c.a)(),n="\n                    <strong>Tool</strong>:".concat(t.tool.get("name"),"<br/>\n                    <strong>Dataset</strong>:").concat(t.config.get_value("name"),'<br/>\n                    <strong>Region(s)</strong>:\n                        <select name="regions">\n                            <option value="cur">current viewing area</option>\n                            <option value="bookmarks">bookmarks</option>\n                            <option value="both">current viewing area and bookmarks</option>\n                        </select>\n                    ');e.modal.show({title:"Visualize tool parameter space and output from different parameter settings?",body:n,buttons:{No:function(){e.modal.hide(),r()(window).unbind("keypress.check_enter_esc")},Yes:function(){var n,a=r()('select[name="regions"] option:selected').val(),o=new h.a.GenomeRegion({chrom:(void 0).view.chrom,start:(void 0).view.low,end:(void 0).view.high}),c=i.default.map(r()(".bookmark"),(function(t){return new h.a.GenomeRegion({from_str:r()(t).children(".position").text()})}));n="cur"===a?[o]:"bookmarks"===a?c:[o].concat(c),e.modal.hide(),window.top.location.href="".concat(Object(l.getAppRoot)(),"visualization/sweepster?").concat(r.a.param({dataset_id:t.dataset.id,hda_ldda:t.dataset.get("hda_ldda"),regions:JSON.stringify(new s.a.Collection(n).toJSON())}))}}})}},gt.prototype.action_icons_def[2]],can_draw:function(){return this.dataset&&gt.prototype.can_draw.call(this)},build_container_div:function(){return r()("<div/>").addClass("track").attr("id","track_".concat(this.id))},set_dataset:function(t){this.dataset=t,this.data_manager.set("dataset",t)},on_resize:function(){this.request_draw({clear_tile_cache:!0})},add_resize_handle:function(){var t=this,e=!1,n=!1,i=r()("<div class='track-resize'>");r()(t.container_div).hover((function(){t.config.get_value("content_visible")&&(e=!0,i.show())}),(function(){e=!1,n||i.hide()})),i.hide().bind("dragstart",(function(e,i){n=!0,i.original_height=r()(t.content_div).height()})).bind("drag",(function(e,n){var i=Math.min(Math.max(n.original_height+n.deltaY,t.min_height_px),t.max_height_px);r()(t.tiles_div).css("height",i),t.visible_height_px=t.max_height_px===i?0:i,t.on_resize()})).bind("dragend",(function(a,r){t.tile_cache.clear(),n=!1,e||i.hide(),t.config.set_value("height",t.visible_height_px),t.changed()})).appendTo(t.container_div)},hide_contents:function(){this.tiles_div.hide(),this.container_div.find(".yaxislabel, .track-resize").hide()},show_contents:function(){this.tiles_div.show(),this.container_div.find(".yaxislabel, .track-resize").show(),this.request_draw()},get_type:function(){return this instanceof Lt?"LabelTrack":this instanceof At?"ReferenceTrack":this instanceof Et?"LineTrack":this instanceof Rt?"ReadTrack":this instanceof Yt?"VariantTrack":this instanceof Dt?"CompositeTrack":this instanceof Pt?"FeatureTrack":""},show_message:function(t){return this.tiles_div.remove(),r()("<span/>").addClass("message").html(t).appendTo(this.content_div)},init:function(t){var e=this;if(e.enabled=!1,e.tile_cache.clear(),e.data_manager.clear(),e.content_div.children().remove(),e.container_div.removeClass("nodata error pending"),e.tiles_div=r()("<div/>").addClass("tiles").appendTo(e.content_div),e.dataset.id){var n=r.a.Deferred(),i={hda_ldda:e.dataset.get("hda_ldda"),data_type:this.dataset_check_type,chrom:e.view.chrom,retry:t};return r.a.getJSON(this.dataset.url(),i,(function(t){if(t&&"error"!==t&&"error"!==t.kind)"no converter"===t?(e.container_div.addClass("error"),e.show_message(pt)):"no data"===t||void 0!==t.data&&(null===t.data||0===t.data.length)?(e.container_div.addClass("nodata"),e.show_message("No data for this chrom/contig.")):"pending"===t?(e.container_div.addClass("pending"),e.show_message("Preparing data. This can take a while for a large dataset. If the visualization is saved and closed, preparation will continue in the background."),window.setTimeout((function(){e.init()}),e.data_query_wait)):"data"!==t&&"data"!==t.status||(t.valid_chroms&&(e.valid_chroms=t.valid_chroms,e.update_icons()),e.tiles_div.text("Ready for display"),e.view.chrom?(e.tiles_div.text(""),e.tiles_div.css("height","".concat(e.visible_height_px,"px")),e.enabled=!0,r.a.when.apply(r.a,e.predraw_init()).done((function(){n.resolve(),e.container_div.removeClass("nodata error pending"),e.request_draw()}))):n.resolve());else{e.container_div.addClass("error");var i=e.show_message("Cannot display dataset due to an error. ");t.message&&(i.append(r()("<a href='javascript:void(0);'></a>").text("View error").click((function(){var e=Object(c.a)();e.modal.show({title:u()("Trackster Error"),body:"<pre>".concat(t.message,"</pre>"),buttons:{Close:function(){e.modal.hide()}}})}))),i.append(r()("<span/>").text(" ")),i.append(r()("<a href='javascript:void(0);'></a>").text("Try again").click((function(){e.init(!0)}))))}})),this.update_icons(),n}},predraw_init:function(){var t=this;return r.a.getJSON(t.dataset.url(),{data_type:"data",stats:!0,chrom:t.view.chrom,low:0,high:t.view.max_high,hda_ldda:t.dataset.get("hda_ldda")},(function(e){var n=e.data;if(n&&void 0!==n.min&&void 0!==n.max){var i=n.min,a=n.max;i=Math.floor(Math.min(0,Math.max(i,n.mean-2*n.sd))),a=Math.ceil(Math.max(0,Math.min(a,n.mean+2*n.sd))),t.config.set_default_value("min_value",i),t.config.set_default_value("max_value",a),t.config.set_value("min_value",i),t.config.set_value("max_value",a)}}))},get_drawables:function(){return this}});var Ot=function(t,e,n){jt.call(this,t,e,n);if(ft(this.container_div,this.drag_handle_class,0,this),this.filters_manager=new it(this,"filters"in n?n.filters:null),this.data_manager.set("filters_manager",this.filters_manager),this.filters_available=!1,this.tool=n.tool?new wt(i.default.extend(n.tool,{track:this,tool_state:n.tool_state})):null,this.tile_cache=new h.a.Cache(10),this.left_offset=0,this.header_div&&(this.set_filters_manager(this.filters_manager),this.tool)){var a=new xt({model:this.tool});a.render(),this.dynamic_tool_div=a.$el,this.header_div.after(this.dynamic_tool_div)}this.tiles_div=r()("<div/>").addClass("tiles").appendTo(this.content_div),this.config.get_value("content_visible")||this.tiles_div.hide(),this.overlay_div=r()("<div/>").addClass("overlay").appendTo(this.content_div),n.mode&&this.change_mode(n.mode)};dt(Ot.prototype,gt.prototype,jt.prototype,{action_icons_def:jt.prototype.action_icons_def.concat([{name:"show_more_rows_icon",title:"To minimize track height, not all feature rows are displayed. Click to display more rows.",css_class:"exclamation",on_click_fn:function(t){r()(".tooltip").remove(),t.slotters[t.view.resolution_px_b].max_rows*=2,t.request_draw({clear_tile_cache:!0})},hide:!0}]),copy:function(t){var e=this.to_dict();dt(e,{data_manager:this.data_manager});var n=new this.constructor(this.view,t,e);return n.change_mode(this.mode),n.enabled=this.enabled,n},set_filters_manager:function(t){this.filters_manager=t,this.header_div.after(this.filters_manager.parent_div)},to_dict:function(){return{track_type:this.get_type(),dataset:{id:this.dataset.id,hda_ldda:this.dataset.get("hda_ldda")},prefs:this.config.to_key_value_dict(),mode:this.mode,filters:this.filters_manager.to_dict(),tool_state:this.tool?this.tool.state_dict():{}}},set_min_max:function(){var t=this;return r.a.getJSON(t.dataset.url(),{data_type:"data",stats:!0,chrom:t.view.chrom,low:0,high:t.view.max_high,hda_ldda:t.dataset.get("hda_ldda")},(function(e){var n=e.data;if(isNaN(parseFloat(t.config.get_value("min_value")))||isNaN(parseFloat(t.config.get_value("max_value")))){var i=n.min,a=n.max;i=Math.floor(Math.min(0,Math.max(i,n.mean-2*n.sd))),a=Math.ceil(Math.max(0,Math.min(a,n.mean+2*n.sd))),t.config.set_value("min_value",i),t.config.set_value("max_value",a)}}))},change_mode:function(t){return this.mode=t,this.config.set_value("mode",t),"Auto"===t&&this.data_manager.clear(),this.request_draw({clear_tile_cache:!0}),this.action_icons.mode_icon.attr("title","Set display mode (now: ".concat(this.mode,")")),this},update_icons:function(){this.action_icons.filters_icon.toggle(this.filters_available),this.action_icons.tools_icon.toggle(null!==this.tool),this.action_icons.param_space_viz_icon.toggle(null!==this.tool)},_gen_tile_cache_key:function(t,e){return"".concat(t,"_").concat(e)},request_draw:function(t){t&&t.clear_tile_cache&&this.tile_cache.clear(),this.view.request_redraw(t,this)},before_draw:function(){this.max_height_px=0},_draw:function(t){var e=this;if(this.can_draw()){var n=t&&t.clear_after,a=this.view.low,o=this.view.high,s=this.view.container.width(),l=this.view.resolution_px_b,c=1/l;this.is_overview&&(a=this.view.max_low,o=this.view.max_high,c=1/(l=s/(this.view.max_high-this.view.max_low))),this.before_draw(),this.tiles_div.children().addClass("remove");for(var d,u,f=Math.floor(400*c),p=Math.floor(a/f),m=[],_=[];p*f<o;)d=new h.a.GenomeRegion({chrom:this.view.chrom,start:p*f,end:Math.min((p+1)*f,this.view.max_high)}),u=this.draw_helper(d,l,t),m.push(u),r.a.when(u).then((function(t){_.push(t)})),p+=1;n||this.tiles_div.children(".remove").removeClass("remove").remove(),r.a.when.apply(r.a,m).then((function(){e.tiles_div.children(".remove").remove(),0!==(_=i.default.filter(_,(function(t){return null!==t}))).length&&e.postdraw_actions(_,s,l,n)}))}},_add_yaxis_label:function(t,e){var n=this,i="max"===t?"top":"bottom",a="max"===t?"max":"min",o="max"===t?"max_value":"min_value",s=this.container_div.find(".yaxislabel.".concat(i)),l=_t(this.config.get_value(o),1);e=e||function(){n.request_draw({clear_tile_cache:!0})},0!==s.length?s.text(l):(s=r()("<div/>").text(l).make_text_editable({num_cols:12,on_finish:function(t){r()(".tooltip").remove(),this.config.set_value(o,_t(t,1)),e()},help_text:"Set ".concat(a," value")}).addClass("yaxislabel ".concat(i)).css("color",this.config.get_value("label_color")),this.container_div.prepend(s))},postdraw_actions:function(t,e,n,a){var r=this;i.default.filter(t,(function(t){return t instanceof Ct})).length>0?(this.max_height_px=0,i.default.each(t,(function(t){t instanceof Ct||(t.html_elt.remove(),r.draw_helper(t.region,n,{force:!0,mode:"Coverage"}))})),this._add_yaxis_label("max")):(this.container_div.find(".yaxislabel").remove(),i.default.find(t,(function(t){return t.has_icons}))&&i.default.each(t,(function(t){t.has_icons||t.html_elt.css("padding-top",20)})))},get_mode:function(t){return this.mode},update_auto_mode:function(t){},_get_drawables:function(){return[this]},draw_helper:function(t,e,n){var a=this;n||(n={});var o,s=n.force,l=n.mode||this.mode,c=1/e,d=this._get_drawables(),u=this._gen_tile_cache_key(e,t),h=s?void 0:this.tile_cache.get_elt(u);if(h)return(o=h)&&"track"in o&&this.show_tile(h,e),h;if(!1===n.data_fetch)return null;var f=function(){var e=i.default.find(mt,(function(t){return t===l}))?"Coverage":l,n=i.default.map(d,(function(n){return n.data_manager.get_data(t,e,c,a.data_url_extra_params)}));return a.view.reference_track&&n.push(a.view.reference_track.data_manager.get_data(t,l,c,a.view.reference_track.data_url_extra_params)),n},p=r.a.Deferred();return this.tile_cache.set_elt(u,p),r.a.when.apply(r.a,f()).then((function(){var o,s=f(),l=s;if(i.default.find(s,(function(t){return m.a.is_deferred(t)})))return a.tile_cache.set_elt(u,void 0),void r.a.when(a.draw_helper(t,e,n)).then((function(t){p.resolve(t)}));a.view.reference_track&&(o=a.view.reference_track.data_manager.subset_entry(s.pop(),t));var c=[],h=[];i.default.each(d,(function(t,n){var i=l[n];"Auto"===t.mode&&(t.mode=t.get_mode(i),t.update_auto_mode(t.mode)),c.push(t.mode),h.push(t.get_canvas_height(i,t.mode,e,b))}));var _,g=a.view.canvas_manager.new_canvas(),v=t.get("start"),y=t.get("end"),b=Math.ceil((y-v)*e)+a.left_offset,w=i.default.max(h);g.width=b,g.height=n.height||w;var k=g.getContext("2d");k.translate(a.left_offset,0),d.length>1&&(k.globalAlpha=.5,k.globalCompositeOperation="source-over"),i.default.each(d,(function(n,i){_=n.draw_tile(l[i],k,c[i],t,e,o)})),void 0!==_&&(a.tile_cache.set_elt(u,_),a.show_tile(_,e)),p.resolve(_)})),p},get_canvas_height:function(t,e,n,i){return this.visible_height_px},_draw_line_track_tile:function(t,e,n,a,r){-1!==[void 0,null].indexOf(this.config.get_value("min_value"))&&this.config.set_value("min_value",0),-1!==[void 0,null,0].indexOf(this.config.get_value("max_value"))&&this.config.set_value("max_value",i.default.max(i.default.map(t.data,(function(t){return t[1]})))||0);var o=e.canvas;return new Q.LinePainter(t.data,a.get("start"),a.get("end"),this.config.to_key_value_dict(),n).draw(e,o.width,o.height,r),new Ct(this,a,r,o,t.data)},draw_tile:function(t,e,n,i,a,r){},show_tile:function(t,e){var n=t.html_elt;t.predisplay_actions();var i=Math.round((t.low-(this.is_overview?this.view.max_low:this.view.low))*e);this.left_offset&&(i-=this.left_offset),n.css("left",i),n.hasClass("remove")?n.removeClass("remove"):this.tiles_div.append(n),n.css("height","auto"),this.max_height_px=Math.max(this.max_height_px,n.height()-2),n.parent().children().css("height","".concat(this.max_height_px,"px"));var a=this.max_height_px;0!==this.visible_height_px&&(a=Math.min(this.max_height_px,this.visible_height_px)),this.tiles_div.css("height","".concat(a,"px"))},tool_region_and_parameters_str:function(t){var e=void 0!==t?t.toString():"all",n=i.default.values(this.tool.get_inputs_dict()).join(", ");return" - region=[".concat(e,"], parameters=[").concat(n,"]")},data_and_mode_compatible:function(t,e){return"Auto"===e||("Coverage"===e?"bigwig"===t.dataset_type:"bigwig"!==t.dataset_type&&"no_detail"!==t.extra_info)},can_subset:function(t){return!t.message&&"no_detail"!==t.extra_info&&("bigwig"!==t.dataset_type||t.data[1][0]-t.data[0][0]==1)},init_for_tool_data:function(){this.data_manager.set("data_type","raw_data"),this.data_query_wait=1e3,this.dataset_check_type="state"}});var Lt=function(t,e){jt.call(this,t,e,{resize:!1,header:!1}),this.container_div.addClass("label-track")};dt(Lt.prototype,jt.prototype,{init:function(){this.enabled=!0},predraw_init:function(){},_draw:function(t){for(var e=this.view,n=e.high-e.low,i=Math.floor(Math.pow(10,Math.floor(Math.log(n)/Math.log(10)))),a=Math.floor(e.low/i)*i,o=this.view.container.width(),s=r()("<div/>").addClass("label-container");a<e.high;){var l=Math.floor((a-e.low)/n*o);s.append(r()("<div/>").addClass("pos-label").text(m.a.commatize(a)).css({left:l})),a+=i}this.content_div.children(":first").remove(),this.content_div.append(s)}});var Dt=function(t,e,n){if(Ot.call(this,t,e,n),this.drawables=[],"drawables"in n){for(var a,r=0;r<n.drawables.length;r++)a=n.drawables[r],this.drawables[r]=Nt(a,t,null),a.left_offset>this.left_offset&&(this.left_offset=a.left_offset);this.enabled=!0}i.default.each(this.drawables,(function(t){(t instanceof Pt||t instanceof Rt)&&t.change_mode("Coverage")})),this.update_icons(),this.obj_type="CompositeTrack"};dt(Dt.prototype,Ot.prototype,{display_modes:mt,build_config_params:function(){return i.default.union(gt.prototype.config_params,[{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},action_icons_def:[{name:"composite_icon",title:u()("Show individual tracks"),css_class:"layers-stack",on_click_fn:function(t){r()(".tooltip").remove(),t.show_group()}}].concat(Ot.prototype.action_icons_def),to_dict:vt.prototype.to_dict,add_drawable:vt.prototype.add_drawable,unpack_drawables:vt.prototype.unpack_drawables,config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},on_resize:function(){var t=this.visible_height_px;i.default.each(this.drawables,(function(e){e.visible_height_px=t})),jt.prototype.on_resize.call(this)},change_mode:function(t){Ot.prototype.change_mode.call(this,t);for(var e=0;e<this.drawables.length;e++)this.drawables[e].change_mode(t)},init:function(){for(var t=[],e=0;e<this.drawables.length;e++)t.push(this.drawables[e].init());var n=this;r.a.when.apply(r.a,t).then((function(){n.enabled=!0,n.request_draw()}))},update_icons:function(){this.action_icons.filters_icon.hide(),this.action_icons.tools_icon.hide(),this.action_icons.param_space_viz_icon.hide()},can_draw:gt.prototype.can_draw,_get_drawables:function(){return this.drawables},show_group:function(){for(var t,e=new yt(this.view,this.container,{name:this.config.get_value("name")}),n=0;n<this.drawables.length;n++)(t=this.drawables[n]).update_icons(),e.add_drawable(t),t.container=e,e.content_div.append(t.container_div);this.container.replace_drawable(this,e,!0),e.request_draw({clear_tile_cache:!0})},before_draw:function(){var t=i.default.min(i.default.map(this.drawables,(function(t){return t.config.get_value("min_value")}))),e=i.default.max(i.default.map(this.drawables,(function(t){return t.config.get_value("max_value")})));this.config.set_value("min_value",t),this.config.set_value("max_value",e),i.default.each(this.drawables,(function(n){n.config.set_value("min_value",t),n.config.set_value("max_value",e)}))},update_all_min_max:function(){var t=this.config.get_value("min_value"),e=this.config.get_value("max_value");i.default.each(this.drawables,(function(n){n.config.set_value("min_value",t),n.config.set_value("max_value",e)})),this.request_draw({clear_tile_cache:!0})},postdraw_actions:function(t,e,n,i){var a,r=-1;for(a=0;a<t.length;a++){var o=t[a].html_elt.find("canvas").height();o>r&&(r=o)}for(a=0;a<t.length;a++){var s=t[a];s.html_elt.find("canvas").height()!==r&&(this.draw_helper(s.region,n,{force:!0,height:r}),s.html_elt.remove())}var l=this,c=function(){l.update_all_min_max()};this._add_yaxis_label("min",c),this._add_yaxis_label("max",c)}});var At=function(t){Ot.call(this,t,{content_div:t.top_labeltrack},{resize:!1,header:!1}),this.left_offset=t.canvas_manager.char_width_px,this.container_div.addClass("reference-track"),this.data_url="".concat(Object(l.getAppRoot)(),"api/genomes/").concat(this.view.dbkey),this.data_url_extra_params={reference:!0},this.data_manager=new h.a.GenomeReferenceDataManager({data_url:this.data_url,can_subset:this.can_subset}),this.hide_contents()};dt(At.prototype,gt.prototype,Ot.prototype,{build_config_params:function(){return i.default.union(gt.prototype.config_params,[{key:"height",type:"int",default_value:13,hidden:!0}])},init:function(){this.data_manager.clear(),this.enabled=!0},predraw_init:function(){},can_draw:gt.prototype.can_draw,draw_helper:function(t,e,n){var i,a=this.tiles_div.is(":visible"),r=null;return e>this.view.canvas_manager.char_width_px?(this.tiles_div.show(),i=!0,r=Ot.prototype.draw_helper.call(this,t,e,n)):(i=!1,this.tiles_div.hide()),a!==i&&this.view.resize_viewport(),r},can_subset:function(t){return!0},draw_tile:function(t,e,n,i,a){var r=this.data_manager.subset_entry(t,i),o=r.data,s=e.canvas;e.font=e.canvas.manager.default_font,e.textAlign="center";for(var l=0,c=o.length;l<c;l++)e.fillStyle=this.view.get_base_color(o[l]),e.fillText(o[l],Math.floor(l*a),10);return new Mt(this,i,a,s,r)}});var Et=function(t,e,n){this.mode="Histogram",Ot.call(this,t,e,n),this.left_offset=30;var i,a,o=this;r.a.when((i="".concat(Object(l.getAppRoot)(),"datasets/").concat(this.dataset.id,"/display"),a=r.a.Deferred(),r.a.ajax({type:"HEAD",url:i,beforeSend:function(t){t.setRequestHeader("Range","bytes=0-10")},success:function(t,e,n){a.resolve(206===n.status)}}),a)).then((function(t){t&&(o.data_manager=new ct.BBIDataManager({dataset:o.dataset}))}))};dt(Et.prototype,gt.prototype,Ot.prototype,{display_modes:mt,build_config_params:function(){return i.default.union(gt.prototype.config_params,[{key:"color",label:"Color",type:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},before_draw:function(){},draw_tile:function(t,e,n,i,a){return this._draw_line_track_tile(t,e,n,i,a)},can_subset:function(t){return t.data[1][0]-t.data[0][0]==1},postdraw_actions:function(t,e,n,i){this._add_yaxis_label("max"),this._add_yaxis_label("min")}});var It=function(t,e,n){this.mode="Heatmap",Ot.call(this,t,e,n)};dt(It.prototype,gt.prototype,Ot.prototype,{display_modes:["Heatmap"],build_config_params:function(){return i.default.union(gt.prototype.config_params,[{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"min_value",label:"Min Value",type:"int",default_value:void 0},{key:"max_value",label:"Max Value",type:"int",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:500,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},predraw_init:function(){return r.a.getJSON(this.dataset.url(),{data_type:"data",stats:!0,chrom:this.view.chrom,low:0,high:this.view.max_high,hda_ldda:this.dataset.get("hda_ldda")},(function(t){}))},draw_tile:function(t,e,n,i,a){var r=e.canvas;return new Q.DiagonalHeatmapPainter(t.data,i.get("start"),i.get("end"),this.config.to_key_value_dict(),n).draw(e,r.width,r.height,a),new Mt(this,i,a,r,t.data)}});var Pt=function(t,e,n){Ot.call(this,t,e,n),this.container_div.addClass("feature-track"),this.summary_draw_height=30,this.slotters={},this.start_end_dct={},this.left_offset=200,this.set_painter_from_config()};dt(Pt.prototype,gt.prototype,Ot.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return i.default.union(gt.prototype.config_params,[{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0,help:"Show the number of items in each bin when drawing summary histogram"},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"connector_style",label:"Connector style",type:"select",default_value:"fishbones",options:[{label:"Line with arrows",value:"fishbone"},{label:"Arcs",value:"arcs"}]},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.set_painter_from_config(),this.request_draw({clear_tile_cache:!0})},set_painter_from_config:function(){"arcs"===this.config.get_value("connector_style")?this.painter=Q.ArcLinkedFeaturePainter:this.painter=Q.LinkedFeaturePainter},postdraw_actions:function(t,e,n,a){var o=this;if(Ot.prototype.postdraw_actions.call(this,t,e,n,a),0===i.default.filter(t,(function(t){return t instanceof Ct})).length){var s={};i.default.each(i.default.pluck(t,"incomplete_features"),(function(t){i.default.each(t,(function(t){s[t[0]]=t}))})),i.default.each(t,(function(t){var e=i.default.omit(s,i.default.map(t.incomplete_features,(function(t){return t[0]})));if(e=i.default.omit(e,i.default.keys(t.other_tiles_features_drawn)),0!==i.default.size(e)){var n={data:i.default.values(e)},a=o.view.canvas_manager.new_canvas(),l=a.getContext("2d");a.height=Math.max(t.canvas.height,o.get_canvas_height(n,t.mode,t.w_scale,100)),a.width=t.canvas.width,l.drawImage(t.canvas,0,0),l.translate(o.left_offset,0);var c=o.draw_tile(n,l,t.mode,t.region,t.w_scale,t.seq_data);r()(t.canvas).replaceWith(r()(c.canvas)),t.canvas=a,i.default.extend(t.other_tiles_features_drawn,s)}}))}if(this.filters_manager){var l,c=this.filters_manager.filters;for(l=0;l<c.length;l++)c[l].update_ui_elt();for(var d,u,h=!1,f=0;f<t.length;f++)if(t[f].data.length)for(d=t[f].data[0],l=0;l<c.length;l++)if((u=c[l]).applies_to(d)&&u.min!==u.max){h=!0;break}this.filters_available!==h&&(this.filters_available=h,this.filters_available||this.filters_manager.hide(),this.update_icons())}if(t[0]instanceof Tt){for(var p=!0,m=0;m<t.length;m++)if(!t[m].all_slotted){p=!1;break}this.action_icons.show_more_rows_icon.toggle(!p)}else this.action_icons.show_more_rows_icon.hide()},update_auto_mode:function(t){"Auto"===this.mode&&("no_detail"===t&&(t="feature spans"),this.action_icons.mode_icon.attr("title","Set display mode (now: Auto/".concat(t,")")))},incremental_slots:function(t,e,n){var i=this.view.canvas_manager.dummy_context,a=this.slotters[t];return a&&a.mode===n||(a=new y(t,n,100,(function(t){return i.measureText(t)})),this.slotters[t]=a),a.slot_features(e)},get_mode:function(t){return"no_detail"===t.extra_info||this.is_overview?"no_detail":this.view.high-this.view.low>12e3?"Squish":"Pack"},get_canvas_height:function(t,e,n,i){if("Coverage"===e||"bigwig"===t.dataset_type)return this.summary_draw_height;var a=this.incremental_slots(n,t.data,e),r=new this.painter(null,null,null,this.config.to_key_value_dict(),e);return Math.max(this.min_height_px,r.get_required_height(a,i))},draw_tile:function(t,e,n,i,a,r,o){var s=this,l=e.canvas,c=i.get("start"),d=i.get("end"),u=this.left_offset;if("bigwig"===t.dataset_type)return this._draw_line_track_tile(t,e,n,i,a);var h=[],f=this.slotters[a].slots,p=!0;if(t.data)for(var m=this.filters_manager.filters,_=0,g=t.data.length;_<g;_++){for(var v,y=t.data[_],b=!1,w=0,k=m.length;w<k;w++)if((v=m[w]).update_attrs(y),!v.keep(y)){b=!0;break}b||(h.push(y),y[0]in f||(p=!1))}var x=this.filters_manager.alpha_filter?new St(this.filters_manager.alpha_filter):null,S=this.filters_manager.height_filter?new St(this.filters_manager.height_filter):null,M=new this.painter(h,c,d,this.config.to_key_value_dict(),n,x,S,r,(function(t){return s.view.get_base_color(t)})),C=null,T=null;if(e.fillStyle=this.config.get_value("block_color"),e.font=e.canvas.manager.default_font,e.textAlign="right",t.data){var j=M.draw(e,l.width,l.height,a,f);C=j.feature_mapper,T=j.incomplete_features,C.translation=-u}return o?void 0:new Tt(s,i,a,l,t.data,n,t.message,p,C,T,r)}});var Yt=function(t,e,n){Ot.call(this,t,e,n),this.painter=Q.VariantPainter,this.summary_draw_height=30,this.left_offset=30};dt(Yt.prototype,gt.prototype,Ot.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return i.default.union(gt.prototype.config_params,[{key:"color",label:"Histogram color",type:"color"},{key:"show_sample_data",label:"Show sample data",type:"bool",default_value:!0},{key:"show_labels",label:"Show summary and sample labels",type:"bool",default_value:!0},{key:"summary_height",label:"Locus summary height",type:"float",default_value:20},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},draw_tile:function(t,e,n,i,a){if("bigwig"===t.dataset_type)return this._draw_line_track_tile(t,e,"Histogram",i,a);var r=this.view;return new this.painter(t.data,i.get("start"),i.get("end"),this.config.to_key_value_dict(),n,(function(t){return r.get_base_color(t)})).draw(e,e.canvas.width,e.canvas.height,a),new Mt(this,i,a,e.canvas,t.data)},get_canvas_height:function(t,e,n,i){if("bigwig"===t.dataset_type)return this.summary_draw_height;var a=this.dataset.get_metadata("sample_names")?this.dataset.get_metadata("sample_names").length:0;return 0===a&&0!==t.data.length&&(a=null===(a=t.data[0][7].match(/,/g))?1:a.length+1),new this.painter(null,null,null,this.config.to_key_value_dict(),e).get_required_height(a)},predraw_init:function(){var t=[jt.prototype.predraw_init.call(this)];return this.dataset.get_metadata("sample_names")||t.push(this.dataset.fetch()),t},postdraw_actions:function(t,e,n,a){Ot.prototype.postdraw_actions.call(this,t,e,n,a);var o=i.default.filter(t,(function(t){return t instanceof Ct})),s=this.dataset.get_metadata("sample_names");if(0===o.length&&this.config.get_value("show_labels")&&s&&s.length>1){var l;if(0===this.container_div.find(".yaxislabel.variant").length&&(l=this.config.get_value("summary_height")/2,this.tiles_div.prepend(r()("<div/>").text("Summary").addClass("yaxislabel variant top").css({"font-size":"".concat(l,"px"),top:"".concat((this.config.get_value("summary_height")-l)/2,"px")})),this.config.get_value("show_sample_data"))){var c=s.join("<br/>");this.tiles_div.prepend(r()("<div/>").html(c).addClass("yaxislabel variant top sample").css({top:this.config.get_value("summary_height")}))}l="".concat("Squish"===this.mode?5:10,"px"),r()(this.tiles_div).find(".sample").css({"font-size":l,"line-height":l}),r()(this.tiles_div).find(".yaxislabel").css("color",this.config.get_value("label_color"))}else this.container_div.find(".yaxislabel.variant").remove()}});var Rt=function(t,e,n){Pt.call(this,t,e,n),this.painter=Q.ReadPainter,this.update_icons()};dt(Rt.prototype,gt.prototype,Ot.prototype,Pt.prototype,{build_config_params:function(){return i.default.union(gt.prototype.config_params,[{key:"block_color",label:"Histogram color",type:"color"},{key:"detail_block_color",label:"Sense strand block color",type:"color",default_value:"#AAAAAA"},{key:"reverse_strand_color",label:"Antisense strand block color",type:"color",default_value:"#DDDDDD"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})}});var Ht={CompositeTrack:Dt,DrawableGroup:yt,DiagonalHeatmapTrack:It,FeatureTrack:Pt,LineTrack:Et,ReadTrack:Rt,VariantTrack:Yt,VcfTrack:Yt},Nt=function(t,e,n){if("copy"in t)return t.copy(n);var i=t.obj_type;return i||(i=t.track_type),new Ht[i](e,n,t)};e.a={TracksterView:bt,DrawableGroup:yt,LineTrack:Et,FeatureTrack:Pt,DiagonalHeatmapTrack:It,ReadTrack:Rt,VariantTrack:Yt,CompositeTrack:Dt,object_from_template:Nt}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return f}));var i=n(137),a={props:{tag:{type:String,required:!0}},computed:{tagLabel:function(){return this.tag.startsWith("name:")?this.tag.replace("name:",""):this.tag},tagStyles:function(){var t=Object(i.a)(this.tag);return{"background-color":t.primary,color:t.contrasting,"border-color":t.darker}}}},r=(n(537),n(5)),o=Object(r.a)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"badge badge-tags",style:t.tagStyles,on:{click:function(e){return e.preventDefault(),t.$emit("tag-click",t.tag)}}},[t._v(" "+t._s(t.tagLabel)+" ")])}),[],!1,null,null,null).exports,s=n(34);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={components:{Nametag:o},props:{storeKey:{type:String,required:!0},tags:{type:Array,required:!1,default:function(){return[]}}},computed:{nameTags:function(){return this.$store.getters.getTagsById(this.storeKey).filter((function(t){return t.startsWith("name:")}))},title:function(){return"".concat(this.nameTags.length," nametags")}},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.b)(["updateTags","initializeTags"])),mounted:function(){this.initializeTags({key:this.storeKey,tags:this.tags})}},u=(n(538),Object(r.a)(d,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nametags",attrs:{title:this.title}},this._l(this.nameTags,(function(t){return e("nametag",{key:t,attrs:{tag:t}})})),1)}),[],!1,null,null,null).exports),h=n(36),f=Object(h.a)(u)},function(t,e,n){"use strict";var i=n(9),a=n.n(i),r={props:{date:{type:String,required:!0},mode:{type:String,default:"date"},customFormat:{type:String,default:void 0}},computed:{elapsedTime:function(){return a()(a.a.utc(this.formattedDate)).from(a()().utc())},fullDate:function(){return a.a.utc(this.formattedDate).format()},formattedDate:function(){return void 0!==this.customFormat?a()(this.date,this.customFormat).format():this.date},pretty:function(){return a.a.utc(this.formattedDate).format("dddd MMM Do h:mm:ss YYYY [UTC]")}}},o=n(5),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return"date"==t.mode?n("span",{staticClass:"utc-time",attrs:{title:t.elapsedTime}},[t._v("\n    "+t._s(t.fullDate)+"\n")]):"elapsed"===t.mode?n("span",{staticClass:"utc-time utc-time-elapsed",attrs:{title:t.fullDate}},[t._v("\n    "+t._s(t.elapsedTime)+"\n")]):n("span",{staticClass:"utc-time",attrs:{title:t.elapsedTime}},[t._v("\n    "+t._s(t.pretty)+"\n")])}),[],!1,null,null,null);e.a=s.exports},function(t,e,n){"use strict";var i=n(8),a=n(34),r=n(50),o=n(72),s={state:{searchTags:new Set},mutations:{setSearchTags:function(t,e){t.searchTags=new Set(e)}},actions:{toggleSearchTag:function(t,e){var n=t.state,i=t.commit,a=e.text,r=new Set(n.searchTags);r.has(a)?r.delete(a):r.add(a),i("setSearchTags",r)},removeSearchTag:function(t,e){var n=t.state,i=t.commit,a=e.text,r=new Set(n.searchTags);r.delete(a),i("setSearchTags",r)},clearSearchTags:function(t){t.state;(0,t.commit)("setSearchTags",new Set)}}},l={state:{userTagList:[],modelTagCache:new Map},getters:{getTagsById:function(t){return function(e){if(t.modelTagCache.has(e)){var n=t.modelTagCache.get(e);return Array.from(n)}return[]}}},actions:{updateTags:function(t,e){(0,t.commit)("setTags",{key:e.key,tags:e.tags})},initializeTags:function(t,e){var n=t.dispatch,i=t.state,a=e.key,r=e.tags;i.modelTagCache.has(a)||n("updateTags",{key:a,tags:r})}},mutations:{setTags:function(t,e){var n=e.key,i=e.tags;t.modelTagCache=new Map(t.modelTagCache),t.modelTagCache.set(n,new Set(i))},reset:function(t){t.userTagList=[],t.modelTagCache=new Map}}},c=n(3),d=n(7),u=n.n(d);function h(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){h(r,i,a,o,s,"next",t)}function s(t){h(r,i,a,o,s,"throw",t)}o(void 0)}))}}var p,m,_={state:{jobMetricsByHdaId:{},jobMetricsByLddaId:{},jobMetricsByJobId:{}},getters:{getJobMetricsByDatasetId:function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hda",i="hda"==n?t.jobMetricsByHdaId:t.jobMetricsByLddaId;return i[e]||[]}},getJobMetricsByJobId:function(t){return function(e){return t.jobMetricsByJobId[e]||[]}}},actions:{fetchJobMetricsForDatasetId:(m=f(regeneratorRuntime.mark((function t(e,n){var i,a,r,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,a=n.datasetId,r=n.datasetType,t.next=4,u.a.get("".concat(Object(c.getAppRoot)(),"api/datasets/").concat(a,"/metrics?hda_ldda=").concat(r));case 4:o=t.sent,s=o.data,i("saveJobMetricsForDatasetId",{datasetId:a,datasetType:r,jobMetrics:s});case 7:case"end":return t.stop()}}),t)}))),function(t,e){return m.apply(this,arguments)}),fetchJobMetricsForJobId:(p=f(regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,t.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/jobs/").concat(n,"/metrics"));case 3:a=t.sent,r=a.data,i("saveJobMetricsForJobId",{jobId:n,jobMetrics:r});case 6:case"end":return t.stop()}}),t)}))),function(t,e){return p.apply(this,arguments)})},mutations:{saveJobMetricsForDatasetId:function(t,e){var n=e.datasetId,a=e.datasetType,r=e.jobMetrics,o="hda"==a?t.jobMetricsByHdaId:t.jobMetricsByLddaId;i.default.set(o,n,r)},saveJobMetricsForJobId:function(t,e){var n=e.jobId,a=e.jobMetrics;i.default.set(t.jobMetricsByJobId,n,a)}}};function g(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var v,y,b={state:{jobDestinationParametersByJobId:{}},getters:{jobDestinationParams:function(t){return function(e){return t.jobDestinationParametersByJobId[e]||[]}}},actions:{fetchJobDestinationParams:(v=regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,t.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/jobs/").concat(n,"/destination_params"));case 3:a=t.sent,r=a.data,i("saveJobDestinationParamsForJobId",{jobId:n,jobDestinationParams:r});case 6:case"end":return t.stop()}}),t)})),y=function(){var t=this,e=arguments;return new Promise((function(n,i){var a=v.apply(t,e);function r(t){g(a,n,i,r,o,"next",t)}function o(t){g(a,n,i,r,o,"throw",t)}r(void 0)}))},function(t,e){return y.apply(this,arguments)})},mutations:{saveJobDestinationParamsForJobId:function(t,e){var n=e.jobId,a=e.jobDestinationParams;i.default.set(t.jobDestinationParametersByJobId,n,a)}}};function w(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function k(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){w(r,i,a,o,s,"next",t)}function s(t){w(r,i,a,o,s,"throw",t)}o(void 0)}))}}var x,S,M,C={state:{invocationDetailsById:{},invocationJobsSummaryById:{},invocationStepById:{}},getters:{getInvocationById:function(t){return function(e){return t.invocationDetailsById[e]}},getInvocationJobsSummaryById:function(t){return function(e){return t.invocationJobsSummaryById[e]}},getInvocationStepById:function(t){return function(e){return t.invocationStepById[e]}}},actions:{fetchInvocationForId:(M=k(regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,t.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/invocations/").concat(n));case 3:a=t.sent,r=a.data,i("saveInvocationForId",{invocationId:n,invocationData:r});case 6:case"end":return t.stop()}}),t)}))),function(t,e){return M.apply(this,arguments)}),fetchInvocationJobsSummaryForId:(S=k(regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,t.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/invocations/").concat(n,"/jobs_summary"));case 3:a=t.sent,r=a.data,i("saveInvocationJobsSummaryForId",{invocationId:n,jobsSummary:r});case 6:case"end":return t.stop()}}),t)}))),function(t,e){return S.apply(this,arguments)}),fetchInvocationStepById:(x=k(regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,t.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/invocations/any/steps/").concat(n));case 3:a=t.sent,r=a.data,i("saveInvocationStepById",{invocationStepId:n,invocationStepData:r});case 6:case"end":return t.stop()}}),t)}))),function(t,e){return x.apply(this,arguments)})},mutations:{saveInvocationForId:function(t,e){var n=e.invocationId,a=e.invocationData;i.default.set(t.invocationDetailsById,n,a)},saveInvocationJobsSummaryForId:function(t,e){var n=e.invocationId,a=e.jobsSummary;i.default.set(t.invocationJobsSummaryById,n,a)},saveInvocationStepById:function(t,e){var n=e.invocationStepId,a=e.invocationStepData;i.default.set(t.invocationStepById,n,a)}}};function T(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function j(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){T(r,i,a,o,s,"next",t)}function s(t){T(r,i,a,o,s,"throw",t)}o(void 0)}))}}var O,L,D={state:{historyDetailsById:{},historyById:{}},getters:{getHistoryById:function(t){return function(e){return t.historyById[e]}},getHistoryNameById:function(t){return function(e){var n=t.historyById[e];return n&&n.name?n.name:"..."}}},actions:{fetchHistories:(L=j(regeneratorRuntime.mark((function t(e){var n,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/histories"));case 3:i=t.sent,a=i.data,n("saveHistories",{histories:a});case 6:case"end":return t.stop()}}),t)}))),function(t){return L.apply(this,arguments)}),fetchHistoryForId:(O=j(regeneratorRuntime.mark((function t(e,n){var i,a,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,a={},t.next=4,u.a.get("".concat(Object(c.getAppRoot)(),"api/histories/").concat(n),{params:a});case 4:r=t.sent,o=r.data,i("saveHistoryForId",{historyId:n,historyData:o});case 7:case"end":return t.stop()}}),t)}))),function(t,e){return O.apply(this,arguments)})},mutations:{saveHistories:function(t,e){var n=e.histories,i={};n.forEach((function(t){i[t.id]=t})),t.historyDetailsById=i},saveHistoryForId:function(t,e){var n=e.historyId,a=e.historyData;i.default.set(t.historyById,n,a)}}},A=n(42);function E(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function I(){return(I=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){E(r,i,a,o,s,"next",t)}function s(t){E(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(A.b)("/api/users/current"),t.next=3,u.a.get(e);case 3:if(200==(n=t.sent).status){t.next=6;break}throw new Error(n);case 6:return t.abrupt("return",n.data);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,e)}var e,n,i;return e=t,(n=[{key:"isAnonymous",get:function(){return!this.email}}])&&P(e.prototype,n),i&&P(e,i),t}();function R(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var H,N={namespaced:!0,state:{currentUser:null},getters:{currentUser:function(t){var e=t.currentUser||{},n=new Y(e);return Object.freeze(n)}},mutations:{setCurrentUser:function(t,e){t.currentUser=e}},actions:{loadUser:function(t){var e=t.dispatch;H||(H=function(){return I.apply(this,arguments)}().then((function(t){e("setCurrentUser",t)})).catch((function(t){console.warn("loadUser error",t)})).finally((function(){H=null})))},setCurrentUser:function(t,e){return function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){R(r,i,a,o,s,"next",t)}function s(t){R(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.commit,a=t.dispatch,i("setCurrentUser",e),n.next=4,a("betaHistory/loadUserHistories",e,{root:!0});case 4:case"end":return n.stop()}}),n)})))()}}},$=n(2140),F=n(764),W=n(2129),z=n(251);function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function B(t,e){return t.pipe(Object($.a)("user"),Object(F.a)((function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"change";return Object(W.a)(t,e).pipe(Object(z.a)((function(t){return U(t,1)[0].toJSON()})))}(t)}))).subscribe((function(t){return e.commit("user/setCurrentUser",t)}),(function(t){return console.log("syncUserToGalaxy error",t)}),(function(){return console.log("syncUserToGalaxy complete")}))}function q(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function G(){return(G=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){q(r,i,a,o,s,"next",t)}function s(t){q(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(A.b)("/api/configuration"),t.next=3,u.a.get(e);case 3:if(200==(n=t.sent).status){t.next=6;break}throw new Error(n);case 6:return t.abrupt("return",n.data);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var J,K={namespaced:!0,getters:{config:function(t){return(null==t?void 0:t.config)||{}},configIsLoaded:function(t){return null!==(null==t?void 0:t.config)}},state:{config:null},mutations:{setConfigs:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.config=Object.assign({},t.config||{},e)}},actions:{loadConfigs:function(t){var e=t.commit;J||(J=function(){return G.apply(this,arguments)}().then((function(t){return e("setConfigs",t)})).catch((function(t){return console.warn("loadConfigs error",t)})).finally((function(){return J=null})))}}};function X(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var Q,Z={state:{workflowsByInstanceId:{}},getters:{getWorkflowByInstanceId:function(t){return function(e){return t.workflowsByInstanceId[e]}},getWorkflowNameByInstanceId:function(t){return function(e){var n=t.workflowsByInstanceId[e];return n&&n.name?n.name:"..."}}},actions:{fetchWorkflowForInstanceId:(Q=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){X(r,i,a,o,s,"next",t)}function s(t){X(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function t(e,n){var i,a,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,a={instance:"true"},t.next=4,u.a.get("".concat(Object(c.getAppRoot)(),"api/workflows/").concat(n),{params:a});case 4:r=t.sent,o=r.data,i("saveWorkflowForInstanceId",{workflowId:n,workflowData:o});case 7:case"end":return t.stop()}}),t)}))),function(t,e){return Q.apply(this,arguments)})},mutations:{saveWorkflowForInstanceId:function(t,e){var n=e.workflowId,a=e.workflowData;i.default.set(t.workflowsByInstanceId,n,a)}}};function tt(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var et,nt={state:{toolById:{}},getters:{getToolForId:function(t){return function(e){return t.toolById[e]}},getToolNameById:function(t){return function(e){var n=t.toolById[e];return n&&n.name?n.name:"..."}}},actions:{fetchToolForId:(et=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){tt(r,i,a,o,s,"next",t)}function s(t){tt(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,console.log("fetching tool"),t.next=4,u.a.get("".concat(Object(c.getAppRoot)(),"api/tools/").concat(n));case 4:a=t.sent,r=a.data,i("saveToolForId",{toolId:n,toolData:r});case 7:case"end":return t.stop()}}),t)}))),function(t,e){return et.apply(this,arguments)})},mutations:{saveToolForId:function(t,e){var n=e.toolId,a=e.toolData;i.default.set(t.toolById,n,a)}}},it=n(162);function at(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var rt=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){at(r,i,a,o,s,"next",t)}function s(t){at(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=new it.a({root:Object(c.getAppRoot)()}),a=function(t){if(void 0===n||"undefined"===n)return t;var a=n,o=r.find((function(t){return a===t.path}));if(o){if("Directory"===o.class)return t.isDirectory=!0,t.filepath=a,t;t.fileLink=i.getCompositeDatasetLink(e,o.path)}return t},null!=(r=Gt.getters.getDatasetExtFiles(e))){t.next=7;break}return t.next=6,Gt.dispatch("fetchDatasetExtFiles",e);case 6:r=Gt.getters.getDatasetExtFiles(e);case 7:return t.abrupt("return",a({datasetContent:r}));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function ot(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var st,lt={state:{datasetPathDestination:{}},getters:{pathDestination:function(t){return function(e,n){return t.datasetPathDestination[e]?t.datasetPathDestination[e][n]:void 0}}},actions:{fetchPathDestination:(st=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){ot(r,i,a,o,s,"next",t)}function s(t){ot(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function t(e,n){var i,a,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,a=n.history_dataset_id,r=n.path,t.next=4,rt(a,r);case 4:o=t.sent,i("savePathDestination",{history_dataset_id:a,path:r,pathDestination:o});case 6:case"end":return t.stop()}}),t)}))),function(t,e){return st.apply(this,arguments)})},mutations:{savePathDestination:function(t,e){var n,i,a,r=e.history_dataset_id,o=e.path,s=e.pathDestination;t.datasetPathDestination[r]=(a=s,(i=o)in(n={})?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,n)}}};function ct(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var dt,ut={state:{datasetExtFilesById:{}},getters:{getDatasetExtFiles:function(t){return function(e){return t.datasetExtFilesById[e]||null}}},actions:{fetchDatasetExtFiles:(dt=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){ct(r,i,a,o,s,"next",t)}function s(t){ct(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,t.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/histories/").concat(n,"/contents/").concat(n,"/extra_files"));case 3:a=t.sent,r=a.data,i("saveDatasetExtFiles",{history_dataset_id:n,datasetExtFiles:r});case 6:case"end":return t.stop()}}),t)}))),function(t,e){return dt.apply(this,arguments)})},mutations:{saveDatasetExtFiles:function(t,e){var n=e.history_dataset_id,a=e.datasetExtFiles;i.default.set(t.datasetExtFilesById,n,a)}}};function ht(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var ft,pt={state:{job:{}},getters:{job:function(t){return function(e){return t.job[e]||[]}}},actions:{fetchJob:(ft=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){ht(r,i,a,o,s,"next",t)}function s(t){ht(r,i,a,o,s,"throw",t)}o(void 0)}))}}(regeneratorRuntime.mark((function t(e,n){var i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commit,t.next=3,u.a.get("".concat(Object(c.getAppRoot)(),"api/jobs/").concat(n,"?full=true"));case 3:a=t.sent,r=a.data,i("saveJobForJobId",{jobId:n,job:r});case 6:case"end":return t.stop()}}),t)}))),function(t,e){return ft.apply(this,arguments)})},mutations:{saveJobForJobId:function(t,e){var n=e.jobId,a=e.job;i.default.set(t.job,n,a)}}},mt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){if(void 0!==t)return e in t?t[e]:void 0}),t)}},_t=n(43);function gt(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function vt(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function yt(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){vt(r,i,a,o,s,"next",t)}function s(t){vt(r,i,a,o,s,"throw",t)}o(void 0)}))}}function bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){St(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mt={setCurrentHistoryId:function(t,e){t.currentHistoryId=e},setHistory:function(t,e){i.default.set(t.histories,e.id,e)},deleteHistory:function(t,e){i.default.delete(t.histories,e.id)},setHistories:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.reduce((function(t,e){return xt(xt({},t),{},St({},e.id,e))}),{});i.default.set(t,"histories",n)},setLoadedForUser:function(t,e){t.loadedForUser=e}},Ct={currentHistoryId:function(t,e){var n=t.histories,i=t.currentHistoryId;return i in n?i:e.firstHistoryId},firstHistoryId:function(t,e){var n=e.histories;return n.length?n[0].id:null},currentHistory:function(t,e){var n=e.currentHistoryId;return n?e.getHistoryById(n):null},histories:function(t){return Object.values(t.histories).sort(function(){var t=mt.apply(void 0,arguments);return function(e,n){var i=t(e).toLowerCase();return t(n).toLowerCase()-i}}("name"))},getHistoryById:function(t){return function(e){return e in t.histories?t.histories[e]:null}}},Tt={load:null,byId:new Map},jt={namespaced:!0,state:{loadedForUser:null,currentHistoryId:null,histories:{}},getters:Ct,mutations:Mt,actions:{loadUserHistories:function(t){var e=t.dispatch,n=t.commit;Tt.load||(Tt.load=Promise.all([Object(_t.k)(),Object(_t.i)()]).then((function(t){var i=bt(t,2),a=i[0],r=i[1];n("setHistories",a),e("selectHistory",r)})).catch((function(t){console.warn("loadUserHistories error",t)})).finally((function(){Tt.load=null})))},loadHistoryById:function(t,e){var n=t.commit,i=t.getters;if(!Tt.byId.has(e)){var a=i.getHistoryById(e),r=(null==a?void 0:a.update_time)||null,o=Object(_t.j)(e,r).then((function(t){n("setHistory",t)})).catch((function(t){console.warn("loadHistoryById error",e,t)})).finally((function(){Tt.byId.delete(e)}));Tt.byId.set(e,o)}},setCurrentHistoryId:function(t,e){return yt(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.dispatch,n.next=3,Object(_t.n)(e);case 3:a=n.sent,i("selectHistory",a);case 5:case"end":return n.stop()}}),n)})))()},createNewHistory:function(t){return yt(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,e.next=3,Object(_t.d)();case 3:i=e.sent,n("selectHistory",i);case 5:case"end":return e.stop()}}),e)})))()},updateHistory:function(t,e){return yt(regeneratorRuntime.mark((function n(){var i,a,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.commit,a=e.id,r=gt(e,["id"]),n.next=4,Object(_t.p)(a,r);case 4:o=n.sent,i("setHistory",o);case 6:case"end":return n.stop()}}),n)})))()},deleteHistory:function(t,e){return yt(regeneratorRuntime.mark((function n(){var i,a,r,o,s,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.dispatch,a=t.commit,r=t.getters,o=e.history,s=e.purge,l=void 0!==s&&s,n.next=4,Object(_t.g)(o.id,l);case 4:if(c=n.sent,a("deleteHistory",c),0!=r.histories.length){n.next=9;break}return n.next=9,i("createNewHistory");case 9:case"end":return n.stop()}}),n)})))()},copyHistory:function(t,e){return yt(regeneratorRuntime.mark((function n(){var i,a,r,o,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.dispatch,a=e.history,r=e.name,o=e.copyAll,n.next=4,Object(_t.b)(a,r,o);case 4:s=n.sent,i("selectHistory",s);case 6:case"end":return n.stop()}}),n)})))()},secureHistory:function(t,e){return yt(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.commit,n.next=3,Object(_t.m)(e);case 3:a=n.sent,i("setHistory",a);case 5:case"end":return n.stop()}}),n)})))()},setHistory:function(t,e){(0,t.commit)("setHistory",e)},selectHistory:function(t,e){var n=t.commit;n("setHistory",e),n("setCurrentHistoryId",e.id)},reset:function(t){var e=t.commit;e("setHistories",[]),e("setCurrentHistoryId",null)}}},Ot=n(1044),Lt=n(2159),Dt=n(6),At=n(2141),Et=n(2143),It=n(275),Pt=n(2160),Yt=n(2142);function Rt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.spamTime,i=void 0===n?100:n,a=e.timeout,r=void 0===a?1e4:a,o=e.isValid,s=void 0===o?function(t){return void 0!==t}:o;return Object(At.a)(i).pipe(Object(z.a)((function(){return t()})),Object(It.a)(s),Object(Pt.a)(1),Object(Yt.a)(Object(Et.a)(r)))}var Ht=n(1043),Nt=n(2162),$t=n(2144),Ft=n(2161),Wt=n(617),zt=n(2145);var Ut=n(217),Vt=function(t){var e=Object(Ot.a)((function(){return Rt((function(){return Object(Dt.a)()})).pipe(Object(Lt.a)(1))}));B(e,t),function(t,e){t.pipe(Object($.a)("config"),Object(z.a)((function(t){return Object.assign({},t)}))).subscribe((function(t){return e.commit("config/setConfigs",t)}),(function(t){return console.log("syncConfigToGalaxy error",t)}),(function(){return console.log("syncConfigToGalaxy complete")}))}(e,t),Object(Ut.a)()||function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.retryPeriod,a=void 0===i?500:i,r=n.retries,o=void 0===r?20:r;t.pipe(Object($.a)("currHistoryPanel"),Object(F.a)((function(t){return Object(W.a)(t,"all").pipe(Object(z.a)((function(){return t.model.id})))})),Object($t.a)((function(t){var e=t.pipe(Object(Ft.a)(a),Object(Pt.a)(o)),n=Object(Ht.a)("Unable to sync to currHistoryPanel because it never appeared");return Object(Nt.a)(e,n)})),Object(It.a)(Boolean),Object(Wt.a)(),Object(zt.a)((function(){return console.log("Vuex is now tracking galaxy.currHistoryPanel")}))).subscribe((function(t){return e.dispatch("betaHistory/setCurrentHistoryId",t)}),(function(t){return console.warn("syncCurrentHistoryToGalaxy error",t)}),(function(){return console.log("syncCurrentHistoryToGalaxy complete")}))}(e,t)};i.default.use(a.a);var Bt,qt=(Bt={plugins:[Object(r.a)()],modules:{user:N,config:K,betaHistory:jt,gridSearch:s,histories:D,tags:l,jobMetrics:_,destinationParameters:b,datasetPathDestination:lt,datasetExtFiles:ut,invocations:C,workflows:Z,informationStore:pt,tools:nt}},o.a.testBuild||Bt.plugins.push(Vt),new a.a.Store(Bt)),Gt=e.a=qt},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(6),a=n(74),r=n(2),o=n.n(r);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(e=e||Object(i.a)()).modal||new a.a.View;return{promise:new Promise((function(e,i){t.oncancel=function(){n.hide(),i("cancelled")},t.oncreate=function(t,i){n.hide(),e(i)}})),options:t,showEl:function(e){n.show({title:t.title||o()("Create a collection"),body:e,width:"85%",height:"100%",xlarge:!0,closing_events:!0})}}}},function(t,e,n){"use strict";var i=n(8),a=n(15);i.default.use(a.a);var r={props:{value:{type:String,default:null},title:{type:String,default:""}},computed:{placeholder:function(){return"Type to Search ".concat(this.title)},filter:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},o=n(5),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-input-group",[n("b-input",{attrs:{placeholder:t.placeholder},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[n("i",{staticClass:"fa fa-times"})])],1)],1)}),[],!1,null,null,null).exports;i.default.use(a.a);var l={key:"label",sortable:!0},c={key:"details",sortable:!0},d={key:"time",sortable:!0},u={key:"navigate",label:"",sortable:!1},h={props:{items:{type:Array,required:!0},filter:{type:String,default:null},multiple:{type:Boolean,default:!1},leafIcon:{type:String,default:"fa fa-file-o"},showDetails:{type:Boolean,default:!0},showTime:{type:Boolean,default:!0},showNavigate:{type:Boolean,default:!1},isEncoded:{type:Boolean,default:!1}},data:function(){return{currentPage:1,nItems:0,perPage:100}},watch:{items:{immediate:!0,handler:function(t){this.filtered(t)}}},computed:{fields:function(){var t=[l];return this.showDetails&&t.push(c),this.showTime&&t.push(d),this.showNavigate&&t.push(u),t}},methods:{filtered:function(t){this.nItems=t.length,this.currentPage=1},clicked:function(t){this.$emit("clicked",t)},open:function(t){this.$emit("open",t)}}},f=Object(o.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{attrs:{small:"",hover:"",items:t.items,fields:t.fields,filter:t.filter,"per-page":t.perPage,"current-page":t.currentPage},on:{"row-clicked":t.clicked,filtered:t.filtered},scopedSlots:t._u([{key:"cell(label)",fn:function(e){return[t.isEncoded?n("pre",{attrs:{title:e.item.labelTitle}},[n("code",[t._v(t._s(e.value?e.value:"-"))])]):n("span",[e.item.isLeaf?n("i",{class:t.leafIcon}):n("i",{staticClass:"fa fa-folder"}),t._v(" "),n("span",{attrs:{title:e.item.labelTitle}},[t._v(t._s(e.value?e.value:"-"))])])]}},{key:"cell(details)",fn:function(e){return[t._v("\n            "+t._s(e.value?e.value:"-")+"\n        ")]}},{key:"cell(time)",fn:function(e){return[t._v("\n            "+t._s(e.value?e.value:"-")+"\n        ")]}},{key:"cell(navigate)",fn:function(e){return[e.item.isLeaf?t._e():n("i",{staticClass:"fa fa-caret-square-o-right",on:{click:function(n){return n.stopPropagation(),t.open(e.item)}}})]}}])}),t._v(" "),0===t.nItems?n("div",[t.filter?n("div",[t._v("\n            No search results found for: "),n("b",[t._v(t._s(this.filter))]),t._v(".\n        ")]):n("div",[t._v("No entries.")])]):t._e(),t._v(" "),t.nItems>t.perPage?n("b-pagination",{attrs:{"per-page":t.perPage,"total-rows":t.nItems},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)}),[],!1,null,null,null).exports;i.default.use(a.a);var p={props:{multiple:{type:Boolean,default:!1},modalStatic:{type:Boolean,default:!1},errorMessage:{type:String,default:null},optionsShow:{type:Boolean,default:!1},modalShow:{type:Boolean,default:!0},hideModal:{type:Function,required:!0}}},m=(n(525),Object(o.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.modalShow?n("b-modal",{attrs:{"modal-class":"selection-dialog-modal",visible:"","ok-only":"","ok-title":"Close",static:t.modalStatic},on:{hide:t.hideModal},scopedSlots:t._u([{key:"modal-header",fn:function(){return[t._t("search")]},proxy:!0},t.errorMessage?null:{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[t._t("buttons"),t._v(" "),n("b-btn",{staticClass:"float-right selection-dialog-modal-cancel",attrs:{size:"sm"},on:{click:t.hideModal}},[t._v(" Cancel ")])],2)]},proxy:!0}],null,!0)},[t._v(" "),t.errorMessage?n("b-alert",{attrs:{variant:"danger",show:""},domProps:{innerHTML:t._s(t.errorMessage)}}):n("div",[t.optionsShow?t._t("options"):n("div",[n("span",{staticClass:"fa fa-spinner fa-spin"}),t._v(" "),n("span",[t._v("Please wait...")])])],2)],1):t._e()}),[],!1,null,null,null).exports);e.a={components:{"selection-dialog":m,"data-dialog-table":f,"data-dialog-search":s},props:{callback:{type:Function,default:function(){}}}}},function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(13),s=n.n(o),l=n(4),c=n.n(l),d=n(3),u=n(51),h=n(56),f=c.a.Model.extend({defaults:{name:null,label:null,type:null,value:null,html:null,num_samples:5},initialize:function(t){this.attributes.html=unescape(this.attributes.html)},copy:function(){return new f(this.toJSON())},set_value:function(t){this.set("value",t||"")}}),p=c.a.Collection.extend({model:f}),m=f.extend({}),_=f.extend({set_value:function(t){this.set("value",parseInt(t,10))},get_samples:function(){return s.a.scale.linear().domain([this.get("min"),this.get("max")]).ticks(this.get("num_samples"))}}),g=_.extend({set_value:function(t){this.set("value",parseFloat(t))}}),v=f.extend({get_samples:function(){return i.default.map(this.get("options"),(function(t){return t[0]}))}});f.subModelTypes={integer:_,float:g,data:m,select:v};var y=c.a.Model.extend({defaults:{id:null,name:null,description:null,target:null,inputs:[],outputs:[]},urlRoot:"".concat(Object(d.getAppRoot)(),"api/tools"),initialize:function(t){this.set("inputs",new p(i.default.map(t.inputs,(function(t){return new(f.subModelTypes[t.type]||f)(t)}))))},toJSON:function(){var t=c.a.Model.prototype.toJSON.call(this);return t.inputs=this.get("inputs").map((function(t){return t.toJSON()})),t},remove_inputs:function(t){var e=this.get("inputs").filter((function(e){return-1!==t.indexOf(e.get("type"))}));this.get("inputs").remove(e)},copy:function(t){var e=new y(this.toJSON());if(t){var n=new c.a.Collection;e.get("inputs").each((function(t){t.get_samples()&&n.push(t)})),e.set("inputs",n)}return e},apply_search_results:function(t){return-1!==i.default.indexOf(t,this.attributes.id)?this.show():this.hide(),this.is_visible()},set_input_value:function(t,e){this.get("inputs").find((function(e){return e.get("name")===t})).set("value",e)},set_input_values:function(t){var e=this;i.default.each(i.default.keys(t),(function(n){e.set_input_value(n,t[n])}))},run:function(){return this._run()},rerun:function(t,e){return this._run({action:"rerun",target_dataset_id:t.id,regions:e})},get_inputs_dict:function(){var t={};return this.get("inputs").each((function(e){t[e.get("name")]=e.get("value")})),t},_run:function(t){var e=i.default.extend({tool_id:this.id,inputs:this.get_inputs_dict()},t),n=r.a.Deferred(),a=new u.a.ServerStateDeferred({ajax_settings:{url:this.urlRoot,data:JSON.stringify(e),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(t){return"pending"!==t}});return r.a.when(a.go()).then((function(t){n.resolve(new h.b(t))})),n}});i.default.extend(y.prototype,{hidden:!1,show:function(){this.set("hidden",!1)},hide:function(){this.set("hidden",!0)},toggle:function(){this.set("hidden",!this.get("hidden"))},is_visible:function(){return!this.attributes.hidden}});var b=c.a.View.extend({className:"toolForm",render:function(){this.$el.children().remove(),this.$el.append(w.tool_form(this.model.toJSON()))}}),w={tool_form:i.default.template(['<div class="toolFormTitle"><%- tool.name %> (version <%- tool.version %>)</div>','<div class="toolFormBody">',"<% _.each( tool.inputs, function( input ){ %>",'<div class="form-row">','<label for="<%- input.name %>"><%- input.label %>:</label>','<div class="form-row-input">',"<%= input.html %>","</div>",'<div class="toolParamHelp" style="clear: both;">',"<%- input.help %>","</div>",'<div style="clear: both;"></div>',"</div>","<% }); %>","</div>",'<div class="form-row form-actions">','<input type="submit" class="btn btn-primary" name="runtool_btn" value="Execute" />',"</div>",'<div class="toolHelp">','<div class="toolHelpBody"><% tool.help %></div>',"</div>"].join(""),{variable:"tool"})};e.a={ToolParameter:f,IntegerToolParameter:_,SelectToolParameter:v,Tool:y,ToolFormView:b}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={UPLOAD:"upload",QUEUED:"queued",RUNNING:"running",SETTING_METADATA:"setting_metadata",NEW:"new",EMPTY:"empty",OK:"ok",PAUSED:"paused",FAILED_METADATA:"failed_metadata",NOT_VIEWABLE:"noPermission",DISCARDED:"discarded",ERROR:"error",DELETED:"deleted"};i.UPLOAD,i.QUEUED,i.RUNNING,i.SETTING_METADATA,i.NEW},,,function(t,e,n){"use strict";var i=n(1),a=n(156),r=n(196),o=n(11),s=a.a.DatasetAssociation,l=r.a.HistoryContentMixin,c=s.extend(o.a.mixin(l,{defaults:i.default.extend({},s.prototype.defaults,l.defaults,{history_content_type:"dataset",model_class:"HistoryDatasetAssociation"})}));e.a={HistoryDatasetAssociation:c}},function(t,e,n){"use strict";var i=n(4),a=n.n(i),r=n(3),o=n(10);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var d=a.a.Collection.extend({url:function(){return"".concat(Object(r.getAppRoot)(),"api/webhooks")}}),u=a.a.View.extend({el:"#webhook-view",initialize:function(t){var e=this,n=t.toolId||"",i=t.toolVersion||"";this.$el.attr("tool_id",n),this.$el.attr("tool_version",i),(new d).fetch({success:function(n){t.type&&n.reset(h(n,t.type)),n.length>0&&e.render(function(t){var e=t.pluck("weight"),n=e.reduce((function(t,e){return t+e})),i=new Map;e.forEach((function(t,e){i.set(e,parseFloat((t/n).toFixed(2)))}));var a,r=[],o=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}(i);try{for(o.s();!(a=o.n()).done;)for(var c=s(a.value,2),d=c[0],u=c[1],h=0;h<100*u;h++)r.push(d)}catch(t){o.e(t)}finally{o.f()}return t.at(r[Math.floor(Math.random()*r.length)])}(n))}})},render:function(t){var e=t.toJSON();return this.$el.html('<div id="'.concat(e.id,'"></div>')),o.b.appendScriptStyle(e),this}});function h(t,e){return t.models.filter((function(t){var n=t.get("type");return!!n&&-1!==n.indexOf(e)}))}e.a={WebhookView:u,load:function(t){(new d).fetch({async:void 0===t.async||t.async,success:function(e){t.type&&e.reset(h(e,t.type)),t.callback(e)}})}}},function(t,e,n){"use strict";var i=n(0),a=n.n(i);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=d(t);if(e){var a=d(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var p=function(){function t(e){u(this,t),this.deferred=a.a.Deferred(),this.queue=[],this.responses=[],this.numToProcess=0,this.running=!1,this.init(e||[]),this.start()}return f(t,[{key:"init",value:function(t){var e=this;t.forEach((function(t){e.add(t)}))}},{key:"add",value:function(t){var e=this,n=this.queue.length;return this.numToProcess+=1,this.queue.push((function(){var i=n,a=t();a.done((function(t){e.deferred.notify({curr:i,total:e.numToProcess,response:t})})),a.always((function(t){e.responses.push(t),e.queue.length?e.queue.shift()():e.stop()}))})),this}},{key:"start",value:function(){return this.queue.length&&(this.running=!0,this.queue.shift()()),this}},{key:"stop",value:function(t,e){return this.running=!1,this.queue=[],t?this.deferred.reject(e):this.deferred.resolve(this.responses),this.numToProcess=0,this.deferred=a.a.Deferred(),this}},{key:"done",value:function(t){return this.deferred.done(t)}},{key:"fail",value:function(t){return this.deferred.fail(t)}},{key:"always",value:function(t){return this.deferred.always(t)}},{key:"progress",value:function(t){return this.deferred.progress(t)}}],[{key:"create",value:function(e){return new t(e).deferred}}]),t}(),m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,t);var e=l(n);function n(t){var i;return u(this,n),(i=e.call(this,t)).names={},i}return f(n,[{key:"add",value:function(t){if(!Object.prototype.hasOwnProperty.call(t,"name")||!Object.prototype.hasOwnProperty.call(t,"fn"))throw new Error('NamedAjaxQueue.add requires an object with both "name" and "fn": '.concat(JSON.stringify(t)));if(!Object.prototype.hasOwnProperty.call(this.names,t.name))return this.names[t.name]=!0,o(d(n.prototype),"add",this).call(this,t.fn)}},{key:"clear",value:function(){return this.names={},this}}],[{key:"create",value:function(t){return new n(t).deferred}}]),n}(p);e.a={AjaxQueue:p,NamedAjaxQueue:m}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"e",(function(){return m})),n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return y})),n.d(e,"d",(function(){return b}));var i=n(7),a=n.n(i),r=n(42),o=n(50),s=n(34);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){u(r,i,a,o,s,"next",t)}function s(t){u(r,i,a,o,s,"throw",t)}o(void 0)}))}}var f={props:{id:{type:String,required:!0}},data:function(){return{loading:!1,item:null}},watch:{id:{immediate:!0,handler:function(t,e){t!==e&&this.load()}}},methods:{load:function(){var t=this;return h(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,a.a.get(t.url);case 3:n=e.sent,i=n.data,t.item=i,t.loading=!1;case 7:case"end":return e.stop()}}),e)})))()},save:function(t){var e=this;return h(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,a.a.put(e.url,t);case 3:i=n.sent,r=i.data,e.item=r,e.loading=!1;case 7:case"end":return n.stop()}}),n)})))()}},render:function(){return this.$scopedSlots.default({loading:this.loading,item:this.item,save:this.save})}},p=(c(c({},Object(o.b)("datasetCollections",["fetchDatasetCollection"])),{},{load:function(){var t=this;return h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.fetchDatasetCollection(t.id);case 3:t.item=e.sent,t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()}}),c(c({},Object(s.c)("datasetCollections",["getDatasetCollectionById"])),{},{storeItem:function(){return this.getDatasetCollectionById(this.id)}}),{mixins:[f],computed:{url:function(){return Object(r.b)(this.id)}}}),m={mixins:[f],computed:{url:function(){return Object(r.b)("api/jobs/".concat(this.id,"?full=true"))}}},_={props:{id:{type:String,required:!0}},data:function(){return{item:void 0}},computed:{loading:function(){return void 0===this.item}},methods:{buildMonitor:function(){throw new Error("define me")}},created:function(){var t=this,e=this.watch$("id").pipe(this.buildMonitor());this.listenTo(e,{next:function(e){t.item=e},error:function(t){console.warn("error in content monitor",t)},complete:function(){console.log("I should only complete on destroy")}})},render:function(){return this.$scopedSlots.default({loading:this.loading,item:this.item})}},g=n(116),v={mixins:[_],methods:{buildMonitor:function(){return Object(g.b)()}}},y={mixins:[_],methods:{buildMonitor:function(){return Object(g.a)()}}},b={mixins:[_],methods:{buildMonitor:function(){return Object(g.c)()}}}},function(t,e,n){"use strict";e.a={tool:"fa-wrench",data_input:"fa-file-o",data_collection_input:"fa-folder-o",subworkflow:"fa-sitemap fa-rotate-270",parameter_input:"fa-pencil",pause:"fa-pause"}},,function(t,e,n){"use strict";var i=n(74),a=n(83),r=n(2),o=n.n(r),s=n(1),l=n(0),c=n.n(l),d=n(6),u=n(3),h=c.a,f={defaultName:s.default.template("Copy of '<%- name %>'"),title:s.default.template("".concat(o()("Copying history"),' "<%- name %>"')),submitLabel:o()("Copy"),errorMessage:o()("History could not be copied."),progressive:o()("Copying history"),activeLabel:o()("Copy only the active, non-deleted datasets"),allLabel:o()("Copy all datasets including deleted ones"),anonWarning:o()("As an anonymous user, unless you login or register, you will lose your current history ")+o()("after copying this history. "),_template:s.default.template(["<% if( isAnon ){ %>",'<div class="warningmessage">',"<%- anonWarning %>",o()("You can"),' <a href="<%= galaxyRoot %>user/login">',o()("login here"),"</a> ",o()("or")," ",' <a href="<%= galaxyRoot %>user/create">',o()("register here"),"</a>.","</div>","<% } %>","<form>",'<label for="copy-modal-title">',o()("Enter a title for the new history"),":","</label><br />",'<input id="copy-modal-title" class="form-control" style="width: 100%" value="<%= name %>" />','<p class="invalid-title bg-danger" style="color: red; margin: 8px 0px 8px 0px; display: none">',o()("Please enter a valid history title"),"</p>","<% if( allowAll ){ %>","<br />","<p>",o()("Choose which datasets from the original history to include:"),"</p>",'<input name="copy-what" type="radio" id="copy-non-deleted" value="copy-non-deleted" ','<% if( copyWhat === "copy-non-deleted" ){ print( "checked" ); } %>/>','<label for="copy-non-deleted"> <%- activeLabel %></label>',"<br />",'<input name="copy-what" type="radio" id="copy-all" value="copy-all" ','<% if( copyWhat === "copy-all" ){ print( "checked" ); } %>/>','<label for="copy-all"> <%- allLabel %></label>',"<% } %>","</form>"].join("")),_showAjaxIndicator:function(){var t='<p><span class="fa fa-spinner fa-spin"></span> '.concat(this.progressive,"...</p>");this.modal.$(".modal-body").empty().append(t).css({"margin-top":"8px"})},dialog:function(t,e,n){n=n||{};var i=this,r=c.a.Deferred(),l=(n.nameFn||this.defaultName)({name:e.get("name")}),f=n.allDatasets?"copy-all":"copy-non-deleted",p=!!s.default.isUndefined(n.allowAll)||n.allowAll,m=!!s.default.isUndefined(n.autoClose)||n.autoClose;function _(){var n=t.$("#copy-modal-title").val();if(n){var o="copy-all"===t.$('input[name="copy-what"]:checked').val();t.$("button").prop("disabled",!0),i._showAjaxIndicator(),e.copy(!0,n,o).done((function(t){r.resolve(t)})).fail((function(t,s,l){var c={name:n,copyAllDatasets:o};a.a.ajaxErrorModal(e,t,c,i.errorMessage),r.rejectWith(r,arguments)})).done((function(){m&&t.hide()}))}else t.$(".invalid-title").show()}this.modal=t;var g=n.closing_callback,v=Object(d.a)();return t.show(s.default.extend(n,{title:this.title({name:e.get("name")}),body:h(i._template({galaxyRoot:Object(u.getAppRoot)(),name:l,isAnon:v.user.isAnonymous(),allowAll:p,copyWhat:f,activeLabel:this.activeLabel,allLabel:this.allLabel,anonWarning:this.anonWarning})),buttons:s.default.object([[o()("Cancel"),function(){t.hide()}],[this.submitLabel,_]]),height:"auto",closing_events:!0,closing_callback:function(t){t&&r.reject({cancelled:!0}),g&&g(t)}})),t.$("#copy-modal-title").focus().select(),t.$("#copy-modal-title").on("keydown",(function(t){13===t.keyCode&&(t.preventDefault(),_())})),r}},p=s.default.extend({},f,{defaultName:s.default.template("imported: <%- name %>"),title:s.default.template("".concat(o()("Importing history"),' "<%- name %>"')),submitLabel:o()("Import"),errorMessage:o()("History could not be imported."),progressive:o()("Importing history"),activeLabel:o()("Import only the active, non-deleted datasets"),allLabel:o()("Import all datasets including deleted ones"),anonWarning:o()("As an anonymous user, unless you login or register, you will lose your current history ")+o()("after importing this history. ")});e.a=function(t,e){e=e||{};var n=Object(d.a)().modal||new i.a.View({});return e.useImport?p.dialog(n,t,e):f.dialog(n,t,e)}},function(t,e,n){"use strict";var i=n(3),a=n(7),r=n.n(a),o=n(8),s=n(15);o.default.use(s.a);var l={props:{parameter_value:{type:Array}},methods:{appRoot:function(){return Object(i.getAppRoot)()}}},c=n(5),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{staticStyle:{"padding-inline-start":"25px"}},t._l(t.parameter_value,(function(e,i){return n("li",{key:i},["hda"==e.src?n("span",[n("a",{attrs:{href:t.appRoot()+"datasets/"+e.id+"/show_params"}},[t._v("\n                    "+t._s(e.hid)+": "+t._s(e.name)+"\n                ")])]):n("span",[t._v(" "+t._s(e.hid)+": "+t._s(e.name)+" ")])])})),0)])}),[],!1,null,null,null).exports;o.default.use(s.a);var u={props:{jobId:{type:String,default:null},datasetId:{type:String,default:null},datasetType:{type:String,default:"hda"},param:{type:String,default:void 0},includeTitle:{type:Boolean,default:!0}},components:{JobParametersArrayValue:d},data:function(){return{parameters:[],hasParameterErrors:!1,isSingleParam:!1}},created:function(){var t;t=this.jobId?"".concat(Object(i.getAppRoot)(),"api/jobs/").concat(this.jobId,"/parameters_display"):"".concat(Object(i.getAppRoot)(),"api/datasets/").concat(this.datasetId,"/parameters_display?hda_ldda=").concat(this.datasetType),this.ajaxCall(t),this.isSingleParam=void 0!==this.param&&"undefined"!==this.param},computed:{anyNotes:function(){var t=!1;return this.parameters.forEach((function(e){t=t||e.notes})),t},singleParam:function(){var t=this;if(this.isSingleParam){var e=this.parameters.find((function(e){return e.text===t.param}));return e?e.value:'Parameter "'.concat(this.param,'" is not found!')}}},methods:{appRoot:function(){return Object(i.getAppRoot)()},ajaxCall:function(t){var e=this;r.a.get(t).then((function(t){return t.data})).then((function(t){e.hasParameterErrors=t.has_parameter_errors,e.parameters=t.parameters})).catch((function(t){console.error(t)}))}}},h=Object(c.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isSingleParam?t._e():n("div",{staticClass:"tool-parameters"},[t.includeTitle?n("h3",[t._v("Tool Parameters")]):t._e(),t._v(" "),n("table",{staticClass:"tabletip info_data_table",attrs:{id:"tool-parameters"}},[n("thead",[n("tr",[n("th",[t._v("Input Parameter")]),t._v(" "),n("th",[t._v("Value")]),t._v(" "),t.anyNotes?n("th",[t._v("Note for rerun")]):t._e()])]),t._v(" "),n("tbody",t._l(t.parameters,(function(e,i){return n("tr",{key:i},[n("td",{style:{"padding-left":10*(e.depth-1)+"px"}},[t._v("\n                        "+t._s(e.text)+"\n                    ")]),t._v(" "),Array.isArray(e.value)?n("td",[n("JobParametersArrayValue",{attrs:{parameter_value:e.value}})],1):n("td",[t._v("\n                        "+t._s(e.value)+"\n                    ")]),t._v(" "),t.anyNotes?n("td",[e.notes?n("em",[t._v(t._s(e.notes))]):t._e()]):t._e()])})),0)]),t._v(" "),n("b-alert",{attrs:{show:t.hasParameterErrors,variant:"danger"}},[t._v("\n            One or more of your original parameters may no longer be valid or displayed properly.\n        ")])],1),t._v(" "),t.isSingleParam?n("div",{attrs:{id:"single-param"}},[Array.isArray(t.singleParam)?n("div",[n("JobParametersArrayValue",{attrs:{parameter_value:t.singleParam}})],1):n("td",[t._v("\n            "+t._s(t.singleParam)+"\n        ")])]):t._e()])}),[],!1,null,null,null);e.a=h.exports},function(t,e,n){"use strict";n.d(e,"b",(function(){return S})),n.d(e,"a",(function(){return M})),n.d(e,"c",(function(){return A})),n.d(e,"d",(function(){return Y}));var i=n(1041),a=n(747),r=n(2152),o=n(2162),s=n(2155),l=n(764),c=n(2131),d=n(275),u=n(2161),h=n(749),f=n(2160),p=n(2153),m=n(2154),_=n(53),g=n(219),v=n(251),y=n(2164),b=n(42),w=function(){return Object(i.a)(Object(v.a)((function(t){return Object(b.b)("/api/datasets/".concat(t))})),Object(h.a)((function(t){return y.a.getJSON(t)})))},k=function(){return Object(i.a)(Object(v.a)((function(t){return Object(b.b)("/api/dataset_collections/".concat(t,"?instance_type=history"))})),Object(h.a)((function(t){return y.a.getJSON(t)})))},x=function(){return Object(i.a)(Object(v.a)((function(t){return Object(b.b)("/api/invocations/any/steps/".concat(t))})),Object(h.a)((function(t){return y.a.getJSON(t)})))},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.spinUpDelay;return Object(i.a)(Object(l.a)((function(t){return C(t,"dataset",e)})))},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.spinUpDelay;return Object(i.a)(Object(l.a)((function(t){return C(t,"dataset_collection",e)})))},C=function(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250;switch(e){case"dataset":n=w;break;case"dataset_collection":n=k;break;default:console.error("Can't create monitor for ".concat(e,"-").concat(t))}return j(t,e,n,i)},T=function(t,e){return{selector:{id:{$eq:t},history_content_type:e}}},j=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250,s=Object(a.a)(T(t,e)).pipe(Object(_.f)(),Object(g.b)(),Object(c.a)()),l=s.pipe(Object(d.a)(Boolean)),p=Object(a.a)(t).pipe(Object(u.a)(i),n(),Object(h.a)((function(t){return Object(_.b)(t,!0)}))),m=Object(r.a)(p,l).pipe(Object(f.a)(1));return Object(o.a)(m,s)},O=["ok","error","deleted","paused"],L=function(t){return["scheduled","cancelled","failed"].includes(t.state)&&t.jobs.every((function(t){return O.includes(t.state)}))},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=Object(a.a)(t).pipe(x()),i=Object(a.a)(t).pipe(Object(u.a)(e),x(),Object(p.a)(),Object(m.a)((function(t){return!L(t)}),!0));return n.pipe(Object(h.a)((function(t){return Object(s.a)((function(){return L(t)}),Object(a.a)(t),Object(o.a)(Object(a.a)(t),i))})))},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;return Object(i.a)(Object(l.a)((function(e){return D(e,t)})))},E=new Map,I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return E.has(t)||E.set(t,P(t,e)),E.get(t)},P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=1e5;return Object(a.a)([t,{showHidden:!0,showVisible:!0},1]).pipe(Object(_.e)({windowSize:n,noInitial:!0}),Object(u.a)(e),Object(p.a)(),Object(c.a)())},Y=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,i=I(e,n),a=i.pipe(Object(m.a)((function(){return!t()})),Object(c.a)());return Object(o.a)(a,i.pipe(Object(f.a)(1)))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r}));var i=n(441),a=n.n(i);function r(t){document.querySelectorAll(t).forEach((function(t){t.innerHTML=a()(t.innerHTML)}))}e.a={generateComparator:function(t,e){return function(n,i){return n.has(t)||i.has(t)?n.has(t)?i.has(t)?("number"==typeof n.get(t)?(a=n.get(t),r=i.get(t)):(a=n.get(t).toLowerCase(),r=i.get(t).toLowerCase()),a>r?"asc"===e?1:-1:r>a?"asc"===e?-1:1:0):-1:1:0;var a,r}},linkifyHtmlElements:r}},function(t,e,n){"use strict";var i=n(1),a=n(3),r=n(197),o=n(90),s=n(2),l=n.n(s),c=r.a.ModelListPanel,d=c.extend({_logNamespace:"collections",className:"".concat(c.prototype.className," dataset-collection-panel"),DatasetDCEViewClass:o.a.DatasetDCEListItemView,modelCollectionKey:"elements",initialize:function(t){c.prototype.initialize.call(this,t),this.linkTarget=t.linkTarget||"_blank",this.dragItems=!0,this.hasUser=t.hasUser,this.panelStack=[],this.parentName=t.parentName,this.foldoutStyle=t.foldoutStyle||"foldout",this.downloadUrl="".concat(Object(a.getAppRoot)(),"api/dataset_collections/").concat(this.model.attributes.id,"/download")},getNestedDCDCEViewClass:function(){return o.a.NestedDCDCEListItemView.extend({foldoutPanelClass:d})},_queueNewRender:function(t,e){e=void 0===e?this.fxSpeed:e;this.handleWarning(t),this.log("_queueNewRender:",t,e),this._swapNewRender(t),this.trigger("rendered",this)},handleWarning:function(t){var e=this.views.length,n=this.model.get("element_count");if(n&&n!==e){var i=l()("displaying only ".concat(e," of ").concat(n," items"));t.find(".elements-warning").html('<div class="warningmessagesmall">'.concat(i,"</div>"))}},_filterCollection:function(){return this.model.getVisibleContents()},_getItemViewClass:function(t){switch(t.get("element_type")){case"hda":return this.DatasetDCEViewClass;case"dataset_collection":return this.getNestedDCDCEViewClass()}throw new TypeError("Unknown element type:",t.get("element_type"))},_getItemViewOptions:function(t){var e=c.prototype._getItemViewOptions.call(this,t);return i.default.extend(e,{linkTarget:this.linkTarget,hasUser:this.hasUser,foldoutStyle:this.foldoutStyle})},_setUpItemViewListeners:function(t){return c.prototype._setUpItemViewListeners.call(this,t),this.listenTo(t,{"expanded:drilldown":function(t,e){this._expandDrilldownPanel(e)},"collapsed:drilldown":function(t,e){this._collapseDrilldownPanel(e)}}),this},_expandDrilldownPanel:function(t){this.panelStack.push(t),this.$("> .controls").add(this.$list()).hide(),t.parentName=this.model.get("name"),this.$el.append(t.render().$el)},_collapseDrilldownPanel:function(t){this.panelStack.pop(),this.render()},events:{"click .navigation .back":"close"},close:function(t){this.remove(),this.trigger("close")},toString:function(){return"CollectionView(".concat(this.model?this.model.get("name"):"",")")}});function u(t){var e=t.get("collection_type");return"list"==e?l()("list"):"paired"==e?l()("dataset pair"):"list:paired"==e?l()("list of pairs"):l()("nested list")}function h(t){var e,n=t.get("element_count"),i="a ".concat(u(t));n&&(1==n?e="with 1 item":n&&(e="with ".concat(n," items")),i="".concat(i," ").concat(l()(e)));return i}d.prototype.templates=i.default.extend(i.default.clone(c.prototype.templates),{controls:function(t,e){var n=h(e.model);return'\n        <div class="controls">\n            <div class="navigation">\n            <a class="back" href="javascript:void(0)">\n                <span class="fa fa-icon fa-angle-left"></span>\n                '.concat(l()("Back to "),"\n                ").concat(i.default.escape(e.parentName),'\n            </a>\n            </div>\n            <div class="title">\n                <div class="name">').concat(i.default.escape(t.name)||i.default.escape(t.element_identifier),'</div>\n                <div class="subtitle">\n                    ').concat(n,'\n                </div>\n            </div>\n            <div class="elements-warning">\n            </div>\n            <div class="tags-display"></div>\n            <div class="actions">\n                <a class="download-btn icon-btn" href="').concat(e.downloadUrl,'"\n                   title="" download="" data-original-title="Download Collection">\n                   <span class="fa fa-floppy-o"></span>\n                </a>\n            </div>\n        </div>')}}),e.a={collectionTypeDescription:u,collectionDescription:h,CollectionView:d}},function(t,e,n){"use strict";var i=n(1),a=n(2),r=n.n(a),o=n(282),s=n.n(o);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=function(t,e){if(0==t.length)return"no columns";if(1==t.length)return"column ".concat(e[t[0]]);var n=t.map((function(t){return e[t]}));return"columns ".concat([n.slice(0,-1).join(", "),n.slice(-1)[0]].join(" and "))},d=function(t,e){var n=[];for(var i in t)-1===e.indexOf(i)&&n.push(t[i]);return n},u=function(t,e,n,i,a){var r;try{r=s()(String(t))}catch(t){return{error:"Invalid regular expression specified."}}var o=0;return n=n.map((function(t){var n=t[e],s=r.exec(n);return s?i?t.concat([r.pyreReplace(s[0],i)]):(a=a&&parseInt(a,10))?s.length!=a+1?(o++,null):t.concat(s.splice(1,s.length)):t.concat([s[0]]):(o++,null)})),o>0?{error:"".concat(o," row(s) failed to match specified regular expression.")}:{data:n}},h=function(t,e){return e.reduce((function(e,n){return e.concat(t(n))}),[])},f={add_column_basename:{title:r()("Basename of Path of URL"),display:function(t,e){return"Add column using basename of column ".concat(e[t.target_column])},init:function(t,e){t.addColumnBasenameTarget=e?e.target_column:0},save:function(t,e){e.target_column=t.addColumnBasenameTarget},apply:function(t,e,n,i){var a=t.target_column,r=u("[^/]*$",a,e);return i.push("new"),r.columns=i,r}},add_column_rownum:{title:r()("Row Number"),display:function(t,e){return"Add column for the current row number."},init:function(t,e){t.addColumnRownumStart=e?e.start:1},save:function(t,e){e.start=parseInt(t.addColumnRownumStart,10)},apply:function(t,e,n,i){var a=t.start;return e=e.map((function(t){var e=t.slice();return e.push(String(a)),a+=1,e})),i.push("new"),{data:e,columns:i}}},add_column_value:{title:r()("Fixed Value"),display:function(t,e){return"Add column for the constant value of ".concat(t.value,".")},init:function(t,e){t.addColumnValue=e?e.value:""},save:function(t,e){e.value=t.addColumnValue},apply:function(t,e,n,i){var a=t.value;return e=e.map((function(t){var e=t.slice();return e.push(a),e})),i.push("new"),{data:e,columns:i}}},add_column_metadata:{title:r()("Add Column from Metadata"),display:function(t,e){return"Add column for ".concat(t.value,".")},init:function(t,e){t.addColumnMetadataValue=e?e.value:null},save:function(t,e){e.value=t.addColumnMetadataValue},apply:function(t,e,n,i){var a,r=t.value;if(0==r.indexOf("identifier")){var o=parseInt(r.substring("identifier".length),10);a=function(t,e){var i=t.slice();return i.push(n[e].identifiers[o]),i}}else if("tags"==r)a=function(t,e){var i=t.slice(),a=n[e].tags;return a.sort(),i.push(a.join(",")),i};else{if("hid"!=r&&"name"!=r&&"path"!=r&&"uri"!=r)return{error:"Unknown metadata type [".concat(r,"]")};a=function(t,e){var i=t.slice();return i.push(n[e][r]),i}}return e=e.map(a),i.push("new"),{data:e,columns:i}}},add_column_group_tag_value:{title:r()("Add Column from Group Tag Value"),display:function(t,e){return"Add column for value of group tag ".concat(t.value,".")},init:function(t,e){e?(t.addColumnGroupTagValueValue=e.value,t.addColumnGroupTagValueDefault=e.default_value):(t.addColumnGroupTagValueValue=null,t.addColumnGroupTagValueDefault="")},save:function(t,e){e.value=t.addColumnGroupTagValueValue,e.default_value=t.addColumnGroupTagValueDefault},apply:function(t,e,n,i){var a=t.value,r="group:".concat(a,":");return e=e.map((function(e,i){var a=e.slice(),o=n[i].tags;o.sort();var s=t.default_value;for(var l in o){var c=o[l];if(0==c.indexOf(r)){s=c.substr(r.length);break}}return a.push(s),a})),i.push("new"),{data:e,columns:i}}},add_column_regex:{title:r()("Using a Regular Expression"),display:function(t,e){return"Add new column using ".concat(t.expression," applied to column ").concat(e[t.target_column])},init:function(t,e){e?(t.addColumnRegexTarget=e.target_column,t.addColumnRegexExpression=e.expression,t.addColumnRegexReplacement=e.replacement,t.addColumnRegexGroupCount=parseInt(e.group_count)):(t.addColumnRegexTarget=0,t.addColumnRegexExpression="",t.addColumnRegexReplacement=null,t.addColumnRegexGroupCount=null);var n="global";t.addColumnRegexGroupCount?n="groups":t.addColumnRegexReplacement&&(n="replacement"),t.addColumnRegexType=n},save:function(t,e){e.target_column=t.addColumnRegexTarget,e.expression=t.addColumnRegexExpression,t.addColumnRegexReplacement&&(e.replacement=t.addColumnRegexReplacement),t.addColumnRegexGroupCount&&(e.group_count=parseInt(t.addColumnRegexGroupCount))},apply:function(t,e,n,i){var a=t.target_column,r=u(t.expression,a,e,t.replacement,t.group_count);if(t.group_count)for(var o=0;o<t.group_count;o++)i.push("new");else i.push("new");return r.columns=i,r}},add_column_concatenate:{title:r()("Concatenate Columns"),display:function(t,e){return"Concatenate column ".concat(e[t.target_column_0]," and column ").concat(e[t.target_column_1])},init:function(t,e){e?(t.addColumnConcatenateTarget0=e.target_column_0,t.addColumnConcatenateTarget1=e.target_column_1):(t.addColumnConcatenateTarget0=0,t.addColumnConcatenateTarget1=0)},save:function(t,e){e.target_column_0=t.addColumnConcatenateTarget0,e.target_column_1=t.addColumnConcatenateTarget1},apply:function(t,e,n,i){var a=t.target_column_0,r=t.target_column_1;return e=e.map((function(t){var e=t.slice();return e.push(t[a]+t[r]),e})),i.push("new"),{data:e,columns:i}}},add_column_substr:{title:r()("Keep or Trim Prefix or Suffix"),display:function(t,e){var n,i=t.substr_type;return n="keep_prefix"==i?"Keep only ".concat(t.length," characters from the start of column ").concat(e[t.target_column]):"drop_prefix"==i?"Remove ".concat(t.length," characters from the start of column ").concat(e[t.target_column]):"keep_suffix"==i?"Keep only ".concat(t.length," characters from the end of column ").concat(e[t.target_column]):"Remove ".concat(t.length," characters from the end of column ").concat(e[t.target_column]),n},init:function(t,e){e?(t.addColumnSubstrTarget=e.target_column,t.addColumnSubstrLength=e.length,t.addColumnSubstrType=e.substr_type):(t.addColumnSubstrTarget=0,t.addColumnSubstrType="keep_prefix",t.addColumnSubstrLength=1)},save:function(t,e){e.target_column=t.addColumnSubstrTarget,e.length=parseInt(t.addColumnSubstrLength,10),e.substr_type=t.addColumnSubstrType},apply:function(t,e,n,i){var a=t.target_column,r=t.length,o=t.substr_type;return e=e.map((function(t){var e=t.slice(),n=t[a],i=0,s=n.length;return"keep_prefix"==o?s=r:"drop_prefix"==o?i=r:"keep_suffix"==o?(i=s-r)<0&&(i=0):(s-=r)<0&&(s=0),e.push(n.substr(i,s)),e})),i.push("new"),{data:e}}},remove_columns:{title:r()("Remove Column(s)"),display:function(t,e){var n=t.target_columns;return"Remove ".concat(c(n,e))},init:function(t,e){t.removeColumnTargets=e?e.target_columns:[]},save:function(t,e){e.target_columns=t.removeColumnTargets},apply:function(t,e,n,i){var a=t.target_columns;return{data:e=e.map((function(t){var e=[];for(var n in t)-1==a.indexOf(parseInt(n,10))&&e.push(t[n]);return e})),columns:i=d(i,a)}}},add_filter_regex:{title:r()("Using a Regular Expression"),display:function(t,e){return"Filter rows using regular expression ".concat(t.expression," on column ").concat(e[t.target_column])},init:function(t,e){e?(t.addFilterRegexTarget=e.target_column,t.addFilterRegexExpression=e.expression,t.addFilterRegexInvert=e.invert):(t.addFilterRegexTarget=0,t.addFilterRegexExpression="",t.addFilterRegexInvert=!1)},save:function(t,e){e.target_column=t.addFilterRegexTarget,e.expression=t.addFilterRegexExpression,e.invert=t.addFilterRegexInvert},apply:function(t,e,n,i){var a,r=String(t.expression);try{a=s()(r)}catch(t){return{error:"Invalid regular expression specified."}}var o=t.target_column,l=t.invert,c=function(t,n){var i=e[parseInt(n,10)];return a.exec(i[o])?!l:l};return n=n.filter(c),{data:e=e.filter(c),sources:n}}},add_filter_count:{title:r()("First or Last N Rows"),display:function(t,e){var n=t.which,i=t.invert;return"first"!=n||i?"first"==n&&i?"Keep only first ".concat(t.count," row(s)."):"last"!=n||i?"Keep only last ".concat(t.count," row(s)."):"Filter out last ".concat(t.count," row(s)."):"Filter out first ".concat(t.count," row(s).")},init:function(t,e){e?(t.addFilterCountN=parseInt(e.count,10),t.addFilterCountWhich=e.which,t.addFilterCountInvert=e.inverse):(t.addFilterCountN=0,t.addFilterCountWhich="first",t.addFilterCountInvert=!1)},save:function(t,e){e.count=parseInt(t.addFilterCountN,10),e.which=t.addFilterCountWhich,e.invert=t.addFilterCountInvert},apply:function(t,e,n,i){var a=t.count,r=t.invert,o=t.which,s=e.length,l=function(t,e){return("first"==o?e>=a:e<s-a)?!r:r};return n=n.filter(l),{data:e=e.filter(l),sources:n}}},add_filter_empty:{title:r()("On Emptiness"),display:function(t,e){return"Filter rows if no value for column ".concat(e[t.target_column])},init:function(t,e){e?(t.addFilterEmptyTarget=e.target_column,t.addFilterEmptyInvert=e.invert):(t.addFilterEmptyTarget=0,t.addFilterEmptyInvert=!1)},save:function(t,e){e.target_column=t.addFilterEmptyTarget,e.invert=t.addFilterEmptyInvert},apply:function(t,e,n,i){var a=t.target_column,r=t.invert,o=function(t,n){return e[parseInt(n,10)][a].length?!r:r};return n=n.filter(o),{data:e=e.filter(o),sources:n}}},add_filter_matches:{title:r()("Matching a Supplied Value"),display:function(t,e){return"Filter rows with value ".concat(t.value," for column ").concat(e[t.target_column])},init:function(t,e){e?(t.addFilterMatchesTarget=e.target_column,t.addFilterMatchesValue=e.value,t.addFilterMatchesInvert=e.invert):(t.addFilterMatchesTarget=0,t.addFilterMatchesValue="",t.addFilterMatchesInvert=!1)},save:function(t,e){e.target_column=t.addFilterMatchesTarget,e.value=t.addFilterMatchesValue,e.invert=t.addFilterMatchesInvert},apply:function(t,e,n,i){var a=t.target_column,r=t.invert,o=t.value,s=function(t,n){return e[parseInt(n,10)][a]==o?!r:r};return n=n.filter(s),{data:e=e.filter(s),sources:n}}},add_filter_compare:{title:r()("By Comparing to a Numeric Value"),display:function(t,e){return"Filter rows with value ".concat(t.compare_type," ").concat(t.value," for column ").concat(e[t.target_column])},init:function(t,e){e?(t.addFilterCompareTarget=e.target_column,t.addFilterCompareValue=e.value,t.addFilterCompareType=e.compare_type):(t.addFilterCompareTarget=0,t.addFilterCompareValue=0,t.addFilterCompareType="less_than")},save:function(t,e){e.target_column=t.addFilterCompareTarget,e.value=t.addFilterCompareValue,e.compare_type=t.addFilterCompareType},apply:function(t,e,n,i){var a=t.target_column,r=t.compare_type,o=t.value,s=function(t,n){var i,s=e[parseInt(n,10)],l=parseFloat(s[a]);return"less_than"==r?i=l<o:"less_than_equal"==r?i=l<=o:"greater_than"==r?i=l>o:"greater_than_equal"==r&&(i=l>=o),i};return n=n.filter(s),{data:e=e.filter(s),sources:n}}},sort:{title:r()("Sort"),display:function(t,e){return"Sort on column ".concat(e[t.target_column])},init:function(t,e){e?(t.addSortingTarget=e.target_column,t.addSortingNumeric=e.numeric):(t.addSortingTarget=0,t.addSortingNumeric=!1)},save:function(t,e){e.target_column=t.addSortingTarget,e.numeric=t.addSortingNumeric},apply:function(t,e,n,a){var r=t.target_column,o=t.numeric,s=i.default.zip(e,n);s.sort((function(t,e){var n=t[0][r],i=e[0][r];return o&&(n=parseFloat(n),i=parseFloat(i)),n<i?-1:i<n?1:0}));var l=[],c=[];return s.map((function(t){l.push(t[0]),c.push(t[1])})),{data:l,sources:c}}},swap_columns:{title:r()("Swap Column(s)"),display:function(t,e){return"Swap ".concat(c([t.target_column_0,t.target_column_1],e))},init:function(t,e){e?(t.swapColumnsTarget0=e.target_column_0,t.swapColumnsTarget1=e.target_column_1):(t.swapColumnsTarget0=0,t.swapColumnsTarget1=0)},save:function(t,e){e.target_column_0=t.swapColumnsTarget0,e.target_column_1=t.swapColumnsTarget1},apply:function(t,e,n,i){var a=t.target_column_0,r=t.target_column_1;e=e.map((function(t){var e=t.slice();return e[a]=t[r],e[r]=t[a],e}));var o=i[a];return i[a]=i[r],i[r]=o,{data:e,columns:i}}},split_columns:{title:r()("Split Column(s)"),display:function(t,e){return"Duplicate each row and split up columns"},init:function(t,e){e?(t.splitColumnsTargets0=e.target_columns_0,t.splitColumnsTargets1=e.target_columns_1):(t.splitColumnsTargets0=[],t.splitColumnsTargets1=[])},save:function(t,e){e.target_columns_0=t.splitColumnsTargets0,e.target_columns_1=t.splitColumnsTargets1},apply:function(t,e,n,i){var a=t.target_columns_0,r=t.target_columns_1;return{data:e=h((function(t){var e=[],n=[];for(var i in t)i=parseInt(i,10),a.indexOf(i)>-1?e.push(t[i]):r.indexOf(i)>-1?n.push(t[i]):(e.push(t[i]),n.push(t[i]));return[e,n]}),e),sources:n=h((function(t){return[t,t]}),n),columns:i=d(i,a)}}}},p={list_identifiers:{multiple:!0,label:r()("List Identifier(s)"),columnHeader:r()("List Identifier"),help:r()("This should be a short description of the replicate, sample name, condition, etc... that describes each level of the list structure."),importType:"collections"},paired_identifier:{label:r()("Paired-end Indicator"),columnHeader:r()("Paired Indicator"),help:r()("This should be set to '1', 'R1', 'forward', 'f', or 'F' to indicate forward reads, and '2', 'r', 'reverse', 'R2', 'R', or 'R2' to indicate reverse reads."),importType:"collections"},collection_name:{label:r()("Collection Name"),help:r()("If this is set, all rows with the same collection name will be joined into a collection and it is possible to create multiple collections at once."),modes:["raw","ftp","datasets","library_datasets"],importType:"collections"},name_tag:{label:r()("Name Tag"),help:r()("Add a name tag or hash tag based on the specified column value for imported datasets."),importType:"datasets",modes:["raw","ftp"]},tags:{multiple:!0,label:r()("General Purpose Tag(s)"),help:r()("Add a general purpose tag based on the specified column value, use : to separate key-value pairs if desired. These tags are not propagated to derived datasets the way name and group tags are."),modes:["raw","ftp","datasets","library_datasets","collection_contents"]},group_tags:{multiple:!0,label:r()("Group Tag(s)"),help:r()("Add a group tag based on the specified column value, use : to separate key-value pairs. These tags are propagated to derived datasets and may be useful for factorial experiments."),modes:["raw","ftp","datasets","library_datasets","collection_contents"]},name:{label:r()("Name"),importType:"datasets"},dbkey:{label:r()("Genome"),modes:["raw","ftp"]},file_type:{label:r()("Type"),modes:["raw","ftp"],help:r()("This should be the Galaxy file type corresponding to this file.")},url:{label:r()("URL"),modes:["raw"],help:r()("This should be a URL the file can be downloaded from.")},info:{label:r()("Info"),help:r()("Unstructured text associated with the dataset that shows up in the history panel, this is optional and can be whatever you would like."),modes:["raw","ftp"]},ftp_path:{label:r()("FTP Path"),modes:["raw","ftp"],help:r()("This should be the path to the target file to include relative to your FTP directory on the Galaxy server"),requiresFtp:!0}},m=function(t,e){return 0==t.length?e?e.map((function(t,e){return String.fromCharCode(65+e)})):[]:t[0].map((function(t,e){return String.fromCharCode(65+e)}))};e.a={applyRules:function(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=Array.from(a),s=!1;for(var l in i){o[l]=m(t,n);var c=i[l];if(c.error=null,c.warn=null,s)c.warn=r()("Skipped due to previous errors.");else{var d=c.type,u=f[d],h=u.apply(c,t,e,n);h.error?(s=!0,c.error=h.error):(h.warn&&(c.warn=h.warn),t=h.data||t,e=h.sources||e,n=h.columns||n)}}return{data:t,sources:e,columns:n,colHeadersPerRule:o}},columnDisplay:function(t,e){var n;return 2==(n="object"==l(t)?t.map((function(t){return e[t]})):[e[t]]).length?"columns "+n[0]+" and "+n[1]:n.length>2?"columns "+n.slice(0,-1).join(", ")+", and "+n[n.length-1]:"column "+n[0]},colHeadersFor:m,RULES:f,MAPPING_TARGETS:p}},function(t,e,n){"use strict";(function(t,i){var a=n(10);function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}e.a={grid:function(t){var e="";return e=t.embedded?this.grid_header(t)+this.grid_table(t):'<div class="loading-elt-overlay"></div><table><tr><td width="75%">'.concat(this.grid_header(t),'</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>').concat(this.grid_table(t)),t.info_text&&(e+='<br><div class="toolParamHelp" style="clear: both;">'.concat(t.info_text,"</div>")),e},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(t){var e='<div class="grid-header">';if(t.embedded||(e+="<h2>".concat(t.title,"</h2>")),t.global_actions){e+='<ul class="manage-table-actions">';var n=t.global_actions.length>=3;n&&(e+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');var i,a=r(t.global_actions);try{for(a.s();!(i=a.n()).done;){var o=i.value;e+='<li><a class="action-button use-target" target="'.concat(o.target,'" href="').concat(o.url_args,'" onclick="return false;" >').concat(o.label,"</a></li>")}}catch(t){a.e(t)}finally{a.f()}n&&(e+="</div>"),e+="</ul>"}return t.insert&&(e+=t.insert),e+=this.grid_filters(t),e+="</div>"},header:function(t){var e="<tr>";t.show_item_checkboxes&&(e+="<th>",t.items.length>0&&(e+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),e+="</th>");var n,i=r(t.columns);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.visible&&(e+='<th id="'.concat(a.key,'-header">'),a.href?e+='<a href="'.concat(a.href,'" class="sort-link" sort_key="').concat(a.key,'">').concat(a.label,"</a>"):e+=a.label,e+='<span class="sort-arrow">'.concat(a.extra,"</span></th>"))}}catch(t){i.e(t)}finally{i.f()}return e+="</tr>"},body:function(e){var n="";0===e.items.length&&(n+='<tr><td colspan="100"><em>No items</em></td></tr>');var i,a=r(e.items);try{for(a.s();!(i=a.n()).done;){var o=i.value;n+="<tr ",e.current_item_id==o.id&&(n+='class="current"'),n+=">",e.show_item_checkboxes&&(n+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'.concat(o.encode_id,'" id="').concat(o.encode_id,'" class="grid-row-select-checkbox" /></td>'));var s,l=r(e.columns);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(c.visible){var d="";c.nowrap&&(d='style="white-space:nowrap;"');var u=o.column_config[c.label],h=u.link,f=u.value,p=u.target;"string"===t.type(f)&&(f=f.replace(/\/\//g,"/"));var m="",_="";c.attach_popup&&(m="grid-".concat(o.encode_id,"-popup"),_="menubutton",""!==h&&(_+=" split"),_+=" popup"),n+="<td ".concat(d,">"),h?(0!==e.operations.length&&(n+='<div id="'.concat(m,'" class="').concat(_,'" style="float: left;">')),n+='<a class="menubutton-label use-target" target="'.concat(p,'" href="').concat(h,'" onclick="return false;">').concat(f,"</a>"),0!==e.operations.length&&(n+="</div>")):n+='<div id="'.concat(m,'" class="').concat(_,'"><label id="').concat(c.label_id_prefix).concat(o.encode_id,'" for="').concat(o.encode_id,'">').concat(f||"","</label></div>"),n+="</td>"}}}catch(t){l.e(t)}finally{l.f()}n+="</tr>"}}catch(t){a.e(t)}finally{a.f()}return n},footer:function(t){var e="";if(t.use_paging&&t.num_pages>1){var n=t.num_page_links,i=t.cur_page_num,a=t.num_pages,o=t.allow_fetching_all_results,s=n/2,l=i-s,c=0;l<=0&&(c=s-(i-(l=1)));var d,u=s+c,h=i+u;0!==(d=h<=a?0:u-((h=a)+1-i))&&(l-=d)<1&&(l=1),e+='<tr id="page-links-row">',t.show_item_checkboxes&&(e+="<td></td>"),e+='<td colspan="100"><span id="page-link-container">Page:',l>1&&(e+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var f=l;f<h+1;f++)f==t.cur_page_num?e+='<span class="page-link inactive-link" id="page-link-'.concat(f,'">').concat(f,"</span>"):e+='<span class="page-link" id="page-link-'.concat(f,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(f,'">').concat(f,"</a></span>");h<a&&(e+='...<span class="page-link" id="page-link-'.concat(a,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(a,'">').concat(a,"</a></span>")),e+="</span>",o&&(e+='\n                        <span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                        </td>\n                    </tr>')}if(t.show_item_checkboxes){e+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items: \n            ';var p,m=r(t.operations);try{for(m.s();!(p=m.n()).done;){var _=p.value;_.allow_multiple&&(e+='<input type="button" value="'.concat(_.label,'" class="operation-button action-button">&nbsp;'))}}catch(t){m.e(t)}finally{m.f()}e+="</td></tr>"}var g,v=!1,y=r(t.operations);try{for(y.s();!(g=y.n()).done;){if(g.value.global_operation){v=!0;break}}}catch(t){y.e(t)}finally{y.f()}if(v){e+='<tr><td colspan="100">';var b,w=r(t.operations);try{for(w.s();!(b=w.n()).done;){var k=b.value;k.global_operation&&(e+='<a class="action-button" href="'.concat(k.global_operation,'">').concat(k.label,"</a>"))}}catch(t){w.e(t)}finally{w.f()}e+="</td></tr>"}return t.legend&&(e+='<tr><td colspan="100">'.concat(t.legend,"</td></tr>")),e},message:function(t){var e=t.status;return-1!=["success","ok"].indexOf(e)&&(e="done"),'<p><div class="'.concat(e,'message transient-message">').concat(i.escape(t.message),'</div><div style="clear: both"></div></p>')},grid_filters:function(t){var e=t.default_filter_dict,n=t.filters,i="none";t.advanced_search&&(i="block");var a,o=!1,s=r(t.columns);try{for(s.s();!(a=s.n()).done;){var l=a.value;if("advanced"==l.filterable){var c=l.key,d=n[c],u=e[c];d&&u&&d!=u&&(i="block"),o=!0}}}catch(t){s.e(t)}finally{s.f()}var h="block";"block"==i&&(h="none");var f,p='<div id="standard-search" style="display: '.concat(h,';"><table><tr><td style="padding: 0;"><table>'),m=r(t.columns);try{for(m.s();!(f=m.n()).done;){var _=f.value;"standard"==_.filterable&&(p+=this.grid_column_filter(t,_))}}catch(t){m.e(t)}finally{m.f()}p+="</table></td></tr><tr><td>",o&&(p+='<a href="javascript:void(0)" class="advanced-search-toggle">Advanced Search</a>'),p+="</td></tr></table></div>",p+='<div id="advanced-search" style="display: '.concat(i,'; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="javascript:void(0)" class="advanced-search-toggle">Close Advanced Search</a></td></tr>');var g,v=r(t.columns);try{for(v.s();!(g=v.n()).done;){var y=g.value;"advanced"==y.filterable&&(p+=this.grid_column_filter(t,y))}}catch(t){v.e(t)}finally{v.f()}return p+="</table></div>"},grid_column_filter:function(e,n){var i=e.filters,a=n.label,o=n.key;"advanced"==n.filterable&&(a=a.toLowerCase());var s="<tr>";if("advanced"==n.filterable&&(s+='<td align="left" style="padding-left: 10px">'.concat(a,":</td>")),s+='<td style="padding-bottom: 1px;">',n.is_text){s+='<form class="text-filter-form" column_key="'.concat(o,'" action="').concat(e.url,'" method="get" >');var l,c=r(e.columns);try{for(c.s();!(l=c.n()).done;){var d=l.value,u=i[d.key];u&&"All"!=u&&(d.is_text&&(u=JSON.stringify(u)),s+='<input type="hidden" id="'.concat(d.key,'" name="f-').concat(d.key,'" value="').concat(u,'"/>'))}}catch(t){c.e(t)}finally{c.f()}s+='<span id="'.concat(o,'-filtering-criteria">');var h=i[o];if(h){var f=t.type(h);if("string"==f&&"All"!=h&&(s+=this.filter_element(o,h)),"array"==f)for(var p in h){h.slice(p),s+=this.filter_element(o,h[p])}}s+="</span>";var m="",_=20;"standard"==n.filterable&&((m=n.label.toLowerCase()).length<20&&(_=m.length),_+=4),s+='\n                <span class="search-box">\n                    <input class="search-box-input" id="input-'.concat(o,'-filter" name="f-').concat(o,'" type="text" placeholder="').concat(m,'" size="').concat(_,'"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>')}else{s+='<span id="'.concat(o,'-filtering-criteria">');var g=!1;for(var v in e.categorical_filters[o]){var y=e.categorical_filters[o][v],b="",w="";for(var k in y)b=k,w=y[k];g&&(s+=" | "),g=!0;var x=i[o];x&&y[o]&&x==w?s+='<span class="categorical-filter '.concat(o,'-filter current-filter">').concat(v,"</span>"):s+='<span class="categorical-filter '.concat(o,'-filter"><a href="javascript:void(0);" filter_key="').concat(b,'" filter_val="').concat(w,'">').concat(v,"</a></span>")}s+="</span>"}return s+="</td></tr>"},filter_element:function(t,e){return e=a.b.sanitize(e),'<span class="text-filter-val">'.concat(e,'<a href="javascript:void(0);" filter_key="').concat(t,'" filter_val="').concat(e,'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>')}}}).call(this,n(0),n(1))},,,,,,function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(6),c=s.a.Model.extend({initialize:function(t){this.app=t},checksum:function(){var t="",e=this;return this.app.section.$el.find(".section-row").each((function(){var n=r()(this).attr("id"),i=e.app.field_list[n];i&&(t+="".concat(n,":").concat(JSON.stringify(i.value&&i.value()),":").concat(i.collapsed,":").concat(i.connected,";"))})),t},create:function(){var t=this,e={};this._iterate(this.app.section.$el,e);var n={};function i(e,i,a){t.flat_dict[e]=i,n[e]=a,t.app.element_list[i]&&t.app.element_list[i].$el.attr("tour_id",e)}return this.flat_dict={},function e(n,a){for(var r in a){var o=a[r];if(o.input){var s=o.input,l=n;switch(""!==n&&(l+="|"),l+=s.name,s.type){case"repeat":var c=[],u=null;for(var h in o){var f=h.indexOf("section-");-1!=f&&(f+="section-".length,c.push(parseInt(h.substr(f))),u||(u=h.substr(0,f)))}for(var p in c.sort((function(t,e){return t-e})),r=0,c)e("".concat(l,"_").concat(r++),o[u+c[p]]);break;case"conditional":var m=t.app.field_list[s.id].value();i("".concat(l,"|").concat(s.test_param.name),s.id,m);var _=d(s,m);-1!=_&&e(l,a["".concat(s.id,"-section-").concat(_)]);break;case"section":e(!s.flat&&l||"",o);break;default:var g=t.app.field_list[s.id];if(g&&g.value&&(m=g.value(),(void 0===s.ignore||s.ignore!=m)&&(g.connected?m={__class__:"ConnectedValue"}:g.collapsed&&s.collapsible_value&&(m=s.collapsible_value),i(l,s.id,m),s.payload)))for(var v in s.payload)i(v,s.id,s.payload[v])}}}}("",e),n},match:function(t){return this.flat_dict&&this.flat_dict[t]},matchCase:function(t,e){return d(t,e)},matchModel:function(t,e){var n=this;u(t.inputs,(function(t,i){n.flat_dict[i]&&e(t,n.flat_dict[i])}))},matchResponse:function(t){var e={},n=this;return function t(i,a){if("string"==typeof a){var r=n.flat_dict[i];r&&(e[r]=a)}else for(var o in a){var s=o;if(""!==i){var l="|";a instanceof Array&&(l="_"),s=i+l+s}t(s,a[o])}}("",t),e},_iterate:function(t,e){var n=this;r()(t).children().each((function(){var t=r()(this).attr("id");if(r()(this).hasClass("section-row")){var i=n.app.input_list[t];e[t]=i&&{input:i}||{},n._iterate(this,e[t])}else n._iterate(this,e)}))}}),d=function(t,e){for(var n in"boolean"==t.test_param.type&&(e="true"==e?t.test_param.truevalue||"true":t.test_param.falsevalue||"false"),t.cases)if(t.cases[n].value==e)return n;return-1},u=function t(e,n,a,o){for(var s in o=r.a.extend({},o),i.default.each(e,(function(t){t&&t.type&&t.name&&(o[t.name]=t)})),e){var c=Object(l.a)(),u=e[s];u.name=u.name||s;var h=a?"".concat(a,"|").concat(u.name):u.name;switch(u.type){case"repeat":i.default.each(u.cache,(function(e,i){t(e,n,"".concat(h,"_").concat(i),o)}));break;case"conditional":if(u.test_param){n(u.test_param,"".concat(h,"|").concat(u.test_param.name),o);var f=d(u,u.test_param.value);-1!=f?t(u.cases[f].inputs,n,h,o):c.emit.debug("form-data::visitInputs() - Invalid case for ".concat(h,"."))}else c.emit.debug("form-data::visitInputs() - Conditional test parameter missing for ".concat(h,"."));break;case"section":t(u.inputs,n,h,o);break;default:n(u,h,o)}}};e.a={Manager:c,visitInputs:u}},function(t,e,n){"use strict";n.d(e,"b",(function(){return C}));var i=n(1),a=n(0),r=n.n(a),o=n(3),s=n(6),l=n(2),c=n.n(l),d=n(197),u=n(87),h=n(135),f=n(198),p=n(202),m=n(83),_=n(52),g=n(11),v=n(144),y=n(114),b=(n(229),r.a);function w(t,e){return this.currModeIndex=0,this._init(t,e)}w.prototype.DATA_KEY="mode-button",w.prototype.defaults={switchModesOnClick:!0},w.prototype._init=function(t,e){if(e=e||{},this.$element=b(t),this.options=b.extend(!0,{},this.defaults,e),!e.modes)throw new Error('ModeButton requires a "modes" array');var n=this;return this.$element.click((function(t){n.callModeFn(),n.options.switchModesOnClick&&n._incModeIndex(),b(this).html(n.options.modes[n.currModeIndex].html)})),this.reset()},w.prototype._incModeIndex=function(){return this.currModeIndex+=1,this.currModeIndex>=this.options.modes.length&&(this.currModeIndex=0),this},w.prototype._getModeIndex=function(t){for(var e=0;e<this.options.modes.length;e+=1)if(this.options.modes[e].mode===t)return e;throw new Error("mode not found: ".concat(t))},w.prototype._setModeByIndex=function(t){var e=this.options.modes[t];if(!e)throw new Error("mode index not found: ".concat(t));return this.currModeIndex=t,e.html&&this.$element.html(e.html),this},w.prototype.currentMode=function(){return this.options.modes[this.currModeIndex]},w.prototype.current=function(){return this.currentMode().mode},w.prototype.getMode=function(t){return t?this.options.modes[this._getModeIndex(t)]:this.currentMode()},w.prototype.hasMode=function(t){try{return!!this.getMode(t)}catch(t){console.debug(t)}return!1},w.prototype.setMode=function(t){return this._setModeByIndex(this._getModeIndex(t))},w.prototype.reset=function(){return this.currModeIndex=0,this.options.initialMode&&(this.currModeIndex=this._getModeIndex(this.options.initialMode)),this._setModeByIndex(this.currModeIndex)},w.prototype.callModeFn=function(t){var e=this.getMode(t).onclick;if(e&&b.type("function"===e))return e.call(this.$element.get(0))},b.fn.modeButton=function(t){if(!this.length)return this;if("object"===b.type(t))return this.map((function(){var e=b(this);return e.data("mode-button",new w(e,t)),this}));var e=b(this[0]),n=e.data("mode-button");if(!n)throw new Error("modeButton needs an options object or string name of a function");if(n&&"string"===b.type(t)){var i=t;if(n&&"function"===b.type(n[i]))return n[i].apply(n,b.makeArray(arguments).slice(1))}return n};var k,x,S=d.a.ModelListPanel,M=S.extend({_logNamespace:"history",HDAViewClass:f.a.HDAListItemView,HDCAViewClass:p.a.HDCAListItemView,collectionClass:h.a,modelCollectionKey:"contents",tagName:"div",className:"".concat(S.prototype.className," history-panel"),emptyMsg:c()("This history is empty"),noneFoundMsg:c()("No matching datasets found"),searchPlaceholder:c()("search datasets"),initialize:function(t){S.prototype.initialize.call(this,t),this.linkTarget=t.linkTarget||"_blank"},_createDefaultCollection:function(){return new this.collectionClass([],{history:this.model})},freeModel:function(){return S.prototype.freeModel.call(this),this.model&&this.model.stopPolling(),this},_setUpListeners:function(){S.prototype._setUpListeners.call(this),this.on({error:function(t,e,n,i,a){this.errorHandler(t,e,n,i,a)},"views:ready view:attached view:removed":function(t){this._renderSelectButton()},"view:attached":function(t){this.scrollTo(0)}})},loadHistory:function(t,e,n){var a=this;return n=i.default.extend(n||{silent:!0}),this.info("loadHistory:",t,e,n),this.setModel(new u.a({id:t})),n.silent=!0,this.trigger("loading"),this.model.fetchWithContents(e,n).always((function(){a.render(),a.trigger("loading-done")}))},refreshContents:function(t){return this.model?this.model.refresh(t):r.a.when()},_setUpCollectionListeners:function(){return S.prototype._setUpCollectionListeners.call(this),this.listenTo(this.collection,{"fetching-more":function(){this._toggleContentsLoadingIndicator(!0),this.$emptyMessage().hide()},"fetching-more-done":function(){this._toggleContentsLoadingIndicator(!1)}})},_showLoadingIndicator:function(t,e,n){var a=r()('<div class="loading-indicator"/>');this.$el.html(a.text(t).slideDown(i.default.isUndefined(e)?this.fxSpeed:e))},_hideLoadingIndicator:function(t){this.$(".loading-indicator").slideUp(i.default.isUndefined(t)?this.fxSpeed+200:t,(function(){r()(this).remove()}))},_buildNewRender:function(){var t=S.prototype._buildNewRender.call(this);return this._renderSelectButton(t),t},_renderSelectButton:function(t){if(t=t||this.$el,!this.multiselectActions().length)return null;if(!this.views.length)return this.hideSelectors(),t.find(".controls .actions .show-selectors-btn").remove(),null;var e=t.find(".controls .actions .show-selectors-btn");return e.length?e:Object(_.a)({title:c()("Operations on multiple datasets"),classes:"show-selectors-btn",faIcon:"fa-check-square-o",tooltipConfig:{placement:"top"}}).prependTo(t.find(".controls .actions"))},_renderEmptyMessage:function(t){var e=this.$emptyMessage(t);return this.model.get("contents_active").active<=0?e.empty().append(this.emptyMsg).show():this.searchFor&&this.model.contents.haveSearchDetails()&&!this.views.length?e.empty().append(this.noneFoundMsg).show():(e.hide(),r()())},$scrollContainer:function(t){return this.$list(t)},_toggleContentsLoadingIndicator:function(t){t?this.$list().html('<div class="contents-loading-indicator"><span class="fa fa-2x fa-spinner fa-spin"/></div>'):this.$list().find(".contents-loading-indicator").remove()},renderItems:function(t){t=t||this.$el;var e=this.$list(t);r()(".tooltip").remove(),e.empty(),this.views=[];var n=this._filterCollection();return n.length?(this._renderPagination(t),this.views=this._renderSomeItems(n,e)):t.find("> .controls .list-pagination").empty(),this._renderEmptyMessage(t).toggle(!n.length),this.trigger("views:ready",this.views),this.views},_renderPagination:function(t){var e=t.find("> .controls .list-pagination");return this.searchFor||!this.model.contents.shouldPaginate()?e.empty():(e.html(this.templates.pagination({current:this.model.contents.currentPage+1,last:this.model.contents.getLastPage()+1},this)),e.find("select.pages").tooltip(),e)},_renderSomeItems:function(t,e){var n=this,i=[];return e.append(t.map((function(t){var e=n._createItemView(t);return i.push(e),n._renderItemView$el(e)}))),i},_filterItem:function(t){var e=this.model.contents;return(e.includeHidden||!t.hidden())&&(e.includeDeleted||!t.isDeletedOrPurged())&&S.prototype._filterItem.call(this,t)},_getItemViewClass:function(t){var e=t.get("history_content_type");switch(e){case"dataset":return this.HDAViewClass;case"dataset_collection":return this.HDCAViewClass}throw new TypeError("Unknown history_content_type: ".concat(e))},_getItemViewOptions:function(t){var e=S.prototype._getItemViewOptions.call(this,t);return i.default.extend(e,{linkTarget:this.linkTarget,expanded:this.model.contents.storage.isExpanded(t.id),hasUser:this.model.ownedByCurrUser()})},_setUpItemViewListeners:function(t){var e=this;return S.prototype._setUpItemViewListeners.call(e,t),e.listenTo(t,{expanded:function(t){e.model.contents.storage.addExpanded(t.model)},collapsed:function(t){e.model.contents.storage.removeExpanded(t.model)}})},collapseAll:function(){this.model.contents.storage.clearExpanded(),S.prototype.collapseAll.call(this)},getSelectedModels:function(){var t=S.prototype.getSelectedModels.call(this);return t.historyId=this.collection.historyId,t},events:i.default.extend(i.default.clone(S.prototype.events),{"click .show-selectors-btn":"toggleSelectors","click > .controls .prev":"_clickPrevPage","click > .controls .next":"_clickNextPage","change > .controls .pages":"_changePageSelect","click .messages [class$=message]":"clearMessages"}),_clickPrevPage:function(t){this.model.stopPolling(),this.model.contents.fetchPrevPage()},_clickNextPage:function(t){this.model.stopPolling(),this.model.contents.fetchNextPage()},_changePageSelect:function(t){this.model.stopPolling();var e=r()(t.currentTarget).val();this.model.contents.fetchPage(e)},toggleShowDeleted:function(t,e){t=void 0!==t?t:!this.model.contents.includeDeleted;var n=this.model.contents;return n.setIncludeDeleted(t,e),this.trigger("show-deleted",t),n.fetchCurrentPage({renderAll:!0}),t},toggleShowHidden:function(t,e,n){t=void 0!==t?t:!this.model.contents.includeHidden;var i=this.model.contents;return i.setIncludeHidden(t,n),this.trigger("show-hidden",t),i.fetchCurrentPage({renderAll:!0}),t},_firstSearch:function(t){var e=this;this.log("onFirstSearch",t),this.model.contents.haveSearchDetails()?this.searchItems(t):(this.$("> .controls .search-input").searchInput("toggle-loading"),this.searchFor=t,this.model.contents.progressivelyFetchDetails({silent:!0}).progress((function(t,n,i){e.renderItems(),e.trigger("search:loading-progress",n,i)})).always((function(){e.$el.find("> .controls .search-input").searchInput("toggle-loading")})).done((function(){e.searchItems(t,"force")})))},clearSearch:function(t){var e=this;return this.searchFor?(this.searchFor="",this.trigger("search:clear",this),this.$("> .controls .search-query").val(""),this.model.contents.fetchCurrentPage({silent:!0}).done((function(){e.renderItems()})),this):this},errorHandler:function(t,e,n){if(!e||0!==e.status||0!==e.readyState){if(this.error(t,e,n),i.default.isString(t)&&i.default.isString(e)){var a=t;return m.a.errorModal(a,e,n)}return e&&502===e.status?m.a.badGatewayErrorModal():m.a.ajaxErrorModal(t,e,n)}},clearMessages:function(t){return(i.default.isUndefined(t)?this.$messages().children('[class$="message"]'):r()(t.currentTarget)).fadeOut(this.fxSpeed,(function(){r()(this).remove()})),this},scrollToHid:function(t){return this.scrollToItem(i.default.first(this.viewsWhereModel({hid:t})))},ordinalIndicator:function(t){var e="".concat(t);switch(e.charAt(e.length-1)){case"1":return"".concat(e,"st");case"2":return"".concat(e,"nd");case"3":return"".concat(e,"rd");default:return"".concat(e,"th")}},toString:function(){return"HistoryView(".concat(this.model?this.model.get("name"):"",")")}});function C(t){r()("#toggle-deleted").modeButton({initialMode:t.initialModeDeleted,modes:[{mode:"showing_deleted",html:c()("Exclude deleted")},{mode:"not_showing_deleted",html:c()("Include deleted")}]}),r()("#toggle-hidden").modeButton({initialMode:t.initialModeHidden,modes:[{mode:"showing_hidden",html:c()("Exclude hidden")},{mode:"not_showing_hidden",html:c()("Include hidden")}]}),r()("#switch").click((function(){var t=Object(s.a)(),e=t.currHistoryPanel?t.currHistoryPanel:null;e?e.switchToHistory("${ history[ 'id' ] }"):window.location="${ switch_to_url }"})),t.hasMasthead&&r()("#center").addClass("flex-vertical-container");var e=t.userIsOwner?v.a.HistoryViewEdit:M.HistoryView,n=new u.a(t.historyJSON);r()("#import").click((function(){var t=Object(s.a)();Object(y.a)(n,{useImport:!0,allDatasets:"showing_deleted"===r()("#toggle-deleted").modeButton("getMode").mode}).done((function(){window===window.parent?window.location=Object(o.getAppRoot)():t.currHistoryPanel&&t.currHistoryPanel.loadCurrentHistory()}))}));var i=new e({el:r()("#history-"+t.historyJSON.id),className:e.prototype.className+" wide",$scrollContainer:t.hasMasthead?function(){return this.$el.parent()}:void 0,model:n,show_deleted:t.showDeletedJson,show_hidden:t.showHiddenJson,purgeAllowed:t.allow_user_dataset_purge});i.trigger("loading"),n.fetchContents({silent:!0}).fail((function(){alert("Galaxy history failed to load")})).done((function(){i.trigger("loading-done"),i.render()})),r()("#toggle-deleted").on("click",(function(){i.toggleShowDeleted()})),r()("#toggle-hidden").on("click",(function(){i.toggleShowHidden()}))}M.prototype.templates=(k=g.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- history.name %></div>',"</div>",'<div class="subtitle"></div>','<div class="history-size"><%- history.nice_size %></div>','<div class="actions"></div>','<div class="messages">',"<% if( history.deleted && history.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',c()("This history has been purged and deleted"),"</div>","<% } else if( history.deleted ){ %>",'<div class="deleted-msg warningmessagesmall">',c()("This history has been deleted"),"</div>","<% } else if( history.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',c()("This history has been purged"),"</div>","<% } %>","<% if( history.message ){ %>",'<div class="<%= history.message.level || "info" %>messagesmall">',"<%= history.message.text %>","</div>","<% } %>","</div>",'<div class="tags-display"></div>','<div class="annotation-display"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',c()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',c()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>",'<div class="list-pagination form-inline"></div>',"</div>"],"history"),x=g.a.wrapTemplate(['<button class="prev" <%- pages.current === 1 ? "disabled" : "" %>>previous</button>','<select class="pages form-control" ','title="',c()("Click to open and select a page. Begin typing a page number to select it"),'">',"<% _.range( 1, pages.last + 1 ).forEach( function( i ){ %>",'<option value="<%- i - 1 %>" <%- i === pages.current ? "selected" : "" %>>',"<%- view.ordinalIndicator( i ) %> of <%- pages.last %> pages","</option>","<% }); %>","</select>",'<button class="next" <%- pages.current === pages.last ? "disabled" : "" %>>next</button>'],"pages"),i.default.extend(i.default.clone(S.prototype.templates),{el:function(){return'<div>\n            <div class="controls"></div>\n            <ul class="list-items"></ul>\n            <div class="empty-message infomessagesmall"></div>\',\n        </div>'},controls:k,pagination:x}));e.a={HistoryView:M,historyEntry:C}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n(7),a=n.n(i),r=n(61),o=n(243),s=n(251),l=n(275),c=n(616),d=n(617),u=n(764);function h(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){h(r,i,a,o,s,"next",t)}function s(t){h(r,i,a,o,s,"throw",t)}o(void 0)}))}}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(e){var n=e.id,i=e.itemClass,a=e.context,r=e.debounceInterval,s=void 0===r?150:r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.itemClass=i,this.context=a,this.debounceInterval=s,this._searchText=new o.a}var e,n,i,h,m,_;return e=t,(n=[{key:"save",value:(_=f(regeneratorRuntime.mark((function t(e){var n,i,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.id,i=this.itemClass,o=this.context,(s=Object(r.a)(e)).valid){t.next=4;break}throw new Error("Invalid tag");case 4:return l="/tag/add_tag_async?item_id=".concat(n,"&item_class=").concat(i,"&context=").concat(o,"&new_tag=").concat(s.text),t.next=7,a.a.get(l);case 7:if(200===t.sent.status){t.next=10;break}throw new Error("Unable to save tag: ".concat(s));case 10:return t.abrupt("return",Object(r.a)(s));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return _.apply(this,arguments)})},{key:"delete",value:(m=f(regeneratorRuntime.mark((function t(e){var n,i,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.id,i=this.itemClass,o=this.context,s=Object(r.a)(e),l="/tag/remove_tag_async?item_id=".concat(n,"&item_class=").concat(i,"&context=").concat(o,"&tag_name=").concat(s.text),t.next=5,a.a.get(l);case 5:if(200===t.sent.status){t.next=8;break}throw new Error("Unable to delete tag: ".concat(s));case 8:return t.abrupt("return",s);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"autocomplete",value:(h=f(regeneratorRuntime.mark((function t(e){var n,i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.id,i=this.itemClass,o="/tag/tag_autocomplete_data?item_id=".concat(n,"&item_class=").concat(i,"&q=").concat(e),t.next=4,a.a.get(o);case 4:if(200===(s=t.sent).status){t.next=7;break}throw new Error("Unable to retrieve autocomplete tags for search string: ".concat(e));case 7:return t.abrupt("return",(l=s.data,l.split("\n").filter((function(t){return t.includes("|")})).map((function(t){return t.split("|")[0]})).filter((function(t){return t.length})).filter((function(t){return"#Header"!==t}))).map(r.a));case 8:case"end":return t.stop()}var l}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"autocompleteOptions",get:function(){var t=this;return this._searchText.pipe(Object(s.a)((function(t){return t.replace("name:","")})),Object(l.a)((function(t){return t.length})),Object(c.a)(this.debounceInterval),Object(d.a)(),Object(u.a)((function(e){return t.autocomplete(e)})))}},{key:"autocompleteSearchText",set:function(t){this._searchText.next(t)}}])&&p(e.prototype,n),i&&p(e,i),t}()},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return C})),n.d(e,"b",(function(){return T}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(6),d=n(2),u=n.n(d),h=n(97),f=n(32),p=n(66),m=n(69),_=n(85);n(531),n(532),n(679),n(533),n(534),n(416),n(535),n(536),n(150);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function b(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=M(t);if(e){var a=M(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return S(this,n)}}function S(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(t){w(n,t);var e=x(n);function n(t){return v(this,n),e.call(this,t)}return b(n,[{key:"initialize",value:function(t){this.baseURL=t}},{key:"save_viz",value:function(){var t=this,e=Object(c.a)();e.modal.show({title:"Saving...",body:"progress"});var n=[];r()(".bookmark").each((function(){n.push({position:r()(t).children(".position").text(),annotation:r()(t).children(".annotation").text()})}));var i=this.view.overview_drawable?this.view.overview_drawable.config.get_value("name"):null,a={view:this.view.to_dict(),viewport:{chrom:this.view.chrom,start:this.view.low,end:this.view.high,overview:i},bookmarks:n};return r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"visualization/save"),type:"POST",dataType:"json",data:{id:this.view.vis_id,title:this.view.config.get_value("name"),dbkey:this.view.dbkey,type:"trackster",vis_json:JSON.stringify(a)}}).success((function(n){e.modal.hide(),t.view.vis_id=n.vis_id,t.view.has_changes=!1,window.history.pushState({},"",n.url+window.top.location.hash)})).error((function(){e.modal.show({title:u()("Could Not Save"),body:"Could not save visualization. Please try again later.",buttons:{Cancel:function(){e.modal.hide()}}})}))}},{key:"createButtonMenu",value:function(){var t=this,e=p.a.create_icon_buttons_menu([{icon_class:"plus-button",title:u()("Add tracks"),on_click:function(){f.a.select_datasets({dbkey:t.view.dbkey},(function(e){i.default.each(e,(function(e){t.view.add_drawable(h.a.object_from_template(e,t.view,t.view))}))}))}},{icon_class:"block--plus",title:u()("Add group"),on_click:function(){t.view.add_drawable(new h.a.DrawableGroup(t.view,t.view,{name:"New Group"}))}},{icon_class:"bookmarks",title:u()("Bookmarks"),on_click:function(){window.force_right_panel("0px"==r()("div#right").css("right")?"hide":"show")}},{icon_class:"globe",title:u()("Circster"),on_click:function(){var e=t.view.vis_id,n="id="+e;null==e&&(n="dataset_id=".concat(t.view.drawables[0].dataset.id,"&hda_ldda=").concat(t.view.drawables[0].dataset.attributes.hda_ldda)),window.top.location="".concat(t.baseURL,"visualization/circster?").concat(n)}},{icon_class:"disk--arrow",title:u()("Save"),on_click:function(){t.save_viz()}},{icon_class:"cross-circle",title:u()("Close"),on_click:function(){t.handle_unsaved_changes(t.view)}}],{tooltip_config:{placement:"bottom"}});return this.buttonMenu=e,e}},{key:"add_bookmark",value:function(t,e,n){var i=this,a=r()("#right .unified-panel-body"),o=r()("<div/>").addClass("bookmark").appendTo(a),s=r()("<div/>").addClass("position").appendTo(o);r()("<a href='javascript:void(0)'/>").text(t).appendTo(s).click((function(){return i.view.go_to(t),!1}));var l=r()("<div/>").text(e).appendTo(o);if(n){var c=r()("<div/>").addClass("delete-icon-container").prependTo(o).click((function(){return o.slideUp("fast"),o.remove(),i.view.has_changes=!0,!1}));r()("<a href='javascript:void(0)'/>").addClass("icon-button delete").appendTo(c),l.make_text_editable({num_rows:3,use_textarea:!0,help_text:"Edit bookmark note"}).addClass("annotation")}return this.view.has_changes=!0,o}},{key:"create_visualization",value:function(t,e,n,a,o){var s=this;return this.view=new h.a.TracksterView(i.default.extend(t,{header:!1})),this.view.editor=!0,r.a.when(this.view.load_chroms_deferred).then((function(t){var i=null;if(e){var r=e.chrom,l=e.start,c=e.end;i=e.overview,r&&void 0!==l&&c?s.view.change_chrom(r,l,c):s.view.change_chrom(t[0].chrom)}else s.view.change_chrom(t[0].chrom);if(n)for(var d=0;d<n.length;d++)s.view.add_drawable(h.a.object_from_template(n[d],s.view,s.view));for(var u=0;u<s.view.drawables.length;u++)if(s.view.drawables[u].config.get_value("name")===i){s.view.set_overview(s.view.drawables[u]);break}if(a)for(var f,p=0;p<a.length;p++)f=a[p],s.add_bookmark(f.position,f.annotation,o);s.view.has_changes=!1})),this.set_up_router({view:this.view}),this.view}},{key:"set_up_router",value:function(t){new f.a.TrackBrowserRouter(t),s.a.history.start()}},{key:"init_keyboard_nav",value:function(t){r()(document).keyup((function(e){if(!r()(e.srcElement).is(":input"))switch(e.which){case 37:t.move_fraction(.25);break;case 38:t.viewport_container.scrollTop(t.viewport_container.scrollTop()-20);break;case 39:t.move_fraction(-.25);break;case 40:t.viewport_container.scrollTop(t.viewport_container.scrollTop()+20)}}))}},{key:"handle_unsaved_changes",value:function(t){var e=this,n=Object(c.a)();t.has_changes?n.modal.show({title:u()("Close visualization"),body:"There are unsaved changes to your visualization which will be lost if you do not save them.",buttons:{Cancel:function(){n.modal.hide()},"Leave without Saving":function(){r()(window).off("beforeunload"),window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")},Save:function(){r.a.when(e.save_viz()).then((function(){window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")}))}}}):window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")}}]),n}(s.a.Model),T=function(t){w(n,t);var e=x(n);function n(t){return v(this,n),e.call(this,t)}return b(n,[{key:"initialize",value:function(){var t=this;this.ui=new C(Object(l.getAppRoot)()),this.ui.createButtonMenu(),this.ui.buttonMenu.$el.attr("style","float: right"),r()("#center .unified-panel-header-inner").append(this.ui.buttonMenu.$el),r()("#right .unified-panel-title").append("Bookmarks"),r()("#right .unified-panel-icons").append("<a id='add-bookmark-button' class='icon-button menu-button plus-button' href='javascript:void(0);' title='Add bookmark'></a>"),r()("#right-border").click((function(){t.ui.view.resize_window()})),window.force_right_panel("hide"),window.galaxy_config.app.id?this.view_existing():m.a.get("dataset_id")?this.choose_existing_or_new():this.view_new()}},{key:"choose_existing_or_new",value:function(){var t=this,e=Object(c.a)(),n=m.a.get("dbkey"),i={dbkey:n,dataset_id:m.a.get("dataset_id"),hda_ldda:m.a.get("hda_ldda"),gene_region:m.a.get("gene_region")};e.modal.show({title:"View Data in a New or Saved Visualization?",body:"<p><ul style='list-style: disc inside none'>You can add this dataset as:<li>a new track to one of your existing, saved Trackster sessions if they share the genome build: <b>".concat(n||"Not available.","</b></li><li>or create a new session with this dataset as the only track</li></ul></p>"),buttons:{Cancel:function(){window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")},"View in saved visualization":function(){t.view_in_saved(i)},"View in new visualization":function(){t.view_new()}}})}},{key:"view_in_saved",value:function(t){var e=this,n=Object(c.a)(),i=new _.a({url_base:"".concat(Object(l.getAppRoot)(),"visualization/list_tracks"),embedded:!0});n.modal.show({title:u()("Add Data to Saved Visualization"),body:i.$el,buttons:{Cancel:function(){window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")},"Add to visualization":function(){r()(window.parent.document).find("input[name=id]:checked").each((function(){t.id=r()(e).val(),window.top.location="".concat(Object(l.getAppRoot)(),"visualization/trackster?").concat(r.a.param(t))}))}}})}},{key:"view_existing",value:function(){var t=window.galaxy_config.app.viz_config;this.ui.create_visualization({container:r()("#center .unified-panel-body"),name:t.title,vis_id:t.vis_id,dbkey:t.dbkey},t.viewport,t.tracks,t.bookmarks,!0),this.init_editor()}},{key:"view_new",value:function(){var t=this,e=Object(c.a)();r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/genomes?chrom_info=True"),data:{},error:function(){alert("Couldn't create new browser.")},success:function(n){e.modal.show({title:u()("New Visualization"),body:t.template_view_new(n),buttons:{Cancel:function(){window.top.location="".concat(Object(l.getAppRoot)(),"visualizations/list")},Create:function(){t.create_browser(r()("#new-title").val(),r()("#new-dbkey").val()),e.modal.hide()}}});var a=n.map((function(t){return t[1]}));window.galaxy_config.app.default_dbkey&&i.default.contains(a,window.galaxy_config.app.default_dbkey)&&r()("#new-dbkey").val(window.galaxy_config.app.default_dbkey),r()("#new-title").focus(),r()("select[name='dbkey']").select2(),r()("#overlay").css("overflow","auto")}})}},{key:"template_view_new",value:function(t){for(var e='<form id="new-browser-form" action="javascript:void(0);" method="post" onsubmit="return false;"><div class="form-row"><label for="new-title">Browser name:</label><div class="form-row-input"><input type="text" name="title" id="new-title" value="Unnamed"></input></div><div style="clear: both;"></div></div><div class="form-row"><label for="new-dbkey">Reference genome build (dbkey): </label><div class="form-row-input"><select name="dbkey" id="new-dbkey">',n=0;n<t.length;n++)e+='<option value="'.concat(t[n][1],'">').concat(t[n][0],"</option>");return e+='</select></div><div style="clear: both;"></div></div><div class="form-row">Is the build not listed here? <a href="'.concat(Object(l.getAppRoot)(),'custom_builds" target="_top">Add a Custom Build</a></div></form>')}},{key:"init_editor",value:function(){var t=this;r()("#center .unified-panel-title").text("".concat(this.ui.view.config.get_value("name")," (").concat(this.ui.view.dbkey,")")),window.galaxy_config.app.add_dataset&&r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/datasets/").concat(window.galaxy_config.app.add_dataset),data:{hda_ldda:"hda",data_type:"track_config"},dataType:"json",success:function(e){t.ui.view.add_drawable(h.a.object_from_template(e,t.ui.view,t.ui.view))}}),r()("#add-bookmark-button").click((function(){var e="".concat(t.ui.view.chrom,":").concat(t.ui.view.low,"-").concat(t.ui.view.high);return t.ui.add_bookmark(e,"Bookmark description",!0)})),this.ui.init_keyboard_nav(this.ui.view),r()(window).on("beforeunload",(function(){if(t.ui.view.has_changes)return"There are unsaved changes to your visualization that will be lost if you leave this page."}))}},{key:"create_browser",value:function(t,e){r()(document).trigger("convert_to_values"),this.ui.create_visualization({container:r()("#center .unified-panel-body"),name:t,dbkey:e},window.galaxy_config.app.gene_region),this.init_editor(),this.ui.view.editor=!0}}]),n}(s.a.View)},function(t,e,n){"use strict";var i=n(50),a=n(3),r=n(204),o=n(8),s=n(15);o.default.use(s.a);var l={props:{codeLabel:String,codeItem:String},data:function(){return{expanded:!1}},methods:{toggleExpanded:function(){this.codeItem&&(this.expanded=!this.expanded)}}},c=n(5),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{on:{click:t.toggleExpanded}},[n("td",[t._v("\n        "+t._s(t.codeLabel)+"\n    ")]),t._v(" "),t.expanded?n("td",[n("pre",{staticClass:"code"},[t._v(t._s(t.codeItem))])]):t.codeItem?n("td",[n("pre",{staticClass:"code preview"},[t._v(t._s(t.codeItem))]),t._v(" "),n("b",[t._v("(Click to expand)")])]):n("td",[n("i",[t._v("empty")])])])}),[],!1,null,null,null).exports,u=n(100);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={components:{CodeRow:d,DecodedId:r.a,UtcDate:u.a},props:{job_id:{type:String,required:!0},includeTimes:{type:Boolean,default:!1}},created:function(){this.fetchJob(this.job_id)},computed:{job:function(){var t=this.$store.getters.job(this.job_id);return t}},methods:f(f({},Object(i.b)(["fetchJob"])),{},{getAppRoot:function(){return Object(a.getAppRoot)()}})},_=Object(c.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("Job Information")]),t._v(" "),n("table",{staticClass:"tabletip info_data_table",attrs:{id:"job-information"}},[n("tbody",[t.job&&t.job.tool_id?n("tr",[n("td",[t._v("Galaxy Tool ID:")]),t._v(" "),n("td",{attrs:{id:"galaxy-tool-id"}},[t._v(t._s(t.job.tool_id))])]):t._e(),t._v(" "),t.job&&t.job.tool_version?n("tr",[n("td",[t._v("Galaxy Tool Version:")]),t._v(" "),n("td",{attrs:{id:"galaxy-tool-version"}},[t._v(t._s(t.job.tool_version))])]):t._e(),t._v(" "),t.job&&t.includeTimes?n("tr",[n("td",[t._v("Created")]),t._v(" "),t.job.create_time?n("td",{attrs:{id:"created"}},[n("UtcDate",{attrs:{date:t.job.create_time,mode:"pretty"}})],1):t._e()]):t._e(),t._v(" "),t.job&&t.includeTimes?n("tr",[n("td",[t._v("Updated")]),t._v(" "),t.job.update_time?n("td",{attrs:{id:"created"}},[n("UtcDate",{attrs:{date:t.job.update_time,mode:"pretty"}})],1):t._e()]):t._e(),t._v(" "),t.job?n("code-row",{attrs:{id:"command-line",codeLabel:"Command Line",codeItem:t.job.command_line}}):t._e(),t._v(" "),t.job?n("code-row",{attrs:{id:"stdout",codeLabel:"Tool Standard Output",codeItem:t.job.tool_stdout}}):t._e(),t._v(" "),t.job?n("code-row",{attrs:{id:"stderr",codeLabel:"Tool Standard Error",codeItem:t.job.tool_stderr}}):t._e(),t._v(" "),t.job?n("tr",[n("td",[t._v("Tool Exit Code:")]),t._v(" "),n("td",{attrs:{id:"exist-code"}},[t._v(t._s(t.job.exit_code))])]):t._e(),t._v(" "),t.job&&t.job.job_messages&&t.job.job_messages.length>0?n("tr",{attrs:{id:"job-messages"}},[n("td",[t._v("Job Messages")]),t._v(" "),n("td",[n("ul",{staticStyle:{"padding-left":"15px","margin-bottom":"0px"}},t._l(t.job.job_messages,(function(e){return n("li",{key:e},[t._v(t._s(e))])})),0)])]):t._e(),t._v(" "),t.job&&t.job.id?n("tr",[n("td",[t._v("Job API ID:")]),t._v(" "),n("td",{attrs:{id:"encoded-job-id"}},[t._v(t._s(t.job.id)+" "),n("decoded-id",{attrs:{id:t.job.id}})],1)]):t._e(),t._v(" "),t.job&&t.job.copied_from_job_id?n("tr",[n("td",[t._v("Copied from Job API ID:")]),t._v(" "),n("td",{attrs:{id:"encoded-copied-from-job-id"}},[t._v("\n                    "+t._s(t.job.copied_from_job_id)+" "),n("decoded-id",{attrs:{id:t.job.copied_from_job_id}})],1)]):t._e()],1)])])}),[],!1,null,null,null);e.a=_.exports},function(t,e,n){"use strict";var i=n(485),a=n.n(i),r=n(61),o={components:{VueTagsInput:a.a},props:{value:{type:Array,required:!1,default:function(){return[]}},autocompleteItems:{type:Array,required:!1,default:function(){return[]}},maxVisibleTags:{type:Number,required:!1,default:5},useToggleLink:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{tagText:"",tagToggle:!(this.useToggleLink&&this.value.length>this.maxVisibleTags),triggerKeys:[13," "]}},computed:{tagContainerClasses:function(){return{disabled:this.disabled}},tagModels:function(){return this.value.map(r.a)},autocompleteTags:function(){return this.autocompleteItems.map(r.a)},linkText:function(){return"".concat(this.tagModels.length," Tags")},linkVisible:function(){return this.useToggleLink&&this.tagModels.length>this.maxVisibleTags},tagsVisible:function(){return!this.useToggleLink||this.tagToggle}},watch:{tagText:function(t){this.$emit("tag-input-changed",t)}},methods:{tagsChanged:function(t){this.$emit("input",this.pluckLabels(t))},pluckLabels:function(t){return t.map((function(t){return Object(r.a)(t).toString()}))},toggleTagDisplay:function(){this.tagToggle=!this.tagToggle,this.$emit("show",this.tagToggle)},beforeAddingTag:function(t){if(!this.emitHookEvent("before-adding-tag",t)){var e=t.tag;(0,t.addTag)(e)}},beforeDeletingTag:function(t){if(!this.emitHookEvent("before-deleting-tag",t)){var e=t.tag;(0,t.deleteTag)(e)}},emitHookEvent:function(t,e){return!!this.hasHandler(t)&&(this.$emit(t,e),!0)},hasHandler:function(t){return Object.keys(this.$listeners).includes(t)}}},s=(n(540),n(5)),l=Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags-display",class:t.tagContainerClasses},[t.linkVisible?n("a",{staticClass:"toggle-link",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(e){return e.preventDefault(),t.toggleTagDisplay(e)}}},[t._v("\n        "+t._s(t.linkText)+"\n    ")]):t._e(),t._v(" "),t.tagsVisible?n("vue-tags-input",{staticClass:"tags-input tag-area",attrs:{tags:t.tagModels,"autocomplete-items":t.autocompleteTags,disabled:t.disabled,placeholder:"Add Tags","add-on-key":t.triggerKeys},on:{"before-adding-tag":t.beforeAddingTag,"before-deleting-tag":t.beforeDeletingTag,"tags-changed":t.tagsChanged},scopedSlots:t._u([{key:"tag-center",fn:function(e){return[n("div",{staticClass:"tag-name",on:{click:function(n){return t.$emit("tag-click",e.tag)}}},[t._v(t._s(e.tag.label))])]}}],null,!1,4090180873),model:{value:t.tagText,callback:function(e){t.tagText=e},expression:"tagText"}}):t._e()],1)}),[],!1,null,null,null);e.a=l.exports},function(t,e,n){"use strict";var i=n(50),a=n(34),r=n(423);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={props:{jobId:{type:String},datasetId:{type:String},aws_estimate:{type:String},datasetType:{type:String,default:"hda"},includeTitle:{type:Boolean,default:!0}},data:function(){return{}},created:function(){this.jobId?this.fetchJobMetricsForJobId(this.jobId):this.fetchJobMetricsForDatasetId({datasetId:this.datasetId,datasetType:this.datasetType})},computed:s(s({},Object(a.c)(["getJobMetricsByDatasetId","getJobMetricsByJobId"])),{},{isAwsEstimate:function(){return this.aws_estimate&&this.aws_estimate.toUpperCase()==="true".toUpperCase()},awsEstimate:function(){if(this.isAwsEstimate){var t={};if(this.jobMetrics.forEach((function(e){switch(e.name){case"galaxy_memory_mb":t.memory=parseInt(e.raw_value);break;case"galaxy_slots":t.vcpus=parseInt(e.raw_value);break;case"runtime_seconds":t.seconds=parseInt(e.raw_value)}})),t.memory?t.memory/=1024:t.memory=.5,t.instance=r.find((function(e){return e.mem>=t.memory&&e.vcpus>=t.vcpus})),void 0!==t.instance)return t.price=(t.seconds*t.instance.price/3600).toFixed(2),t}},jobMetrics:function(){return this.jobId?this.getJobMetricsByJobId(this.jobId):this.getJobMetricsByDatasetId(this.datasetId,this.datasetType)},metricsByPlugins:function(){var t={};return this.jobMetrics.forEach((function(e){e.plugin in t||(t[e.plugin]={}),t[e.plugin][e.title]=e.value})),t},orderedPlugins:function(){return Object.keys(this.metricsByPlugins).sort()}}),methods:s({},Object(i.b)(["fetchJobMetricsForDatasetId","fetchJobMetricsForJobId"]))},d=n(5),u=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.orderedPlugins.length>0?n("div",[t.includeTitle?n("h3",[t._v("Job Metrics")]):t._e(),t._v(" "),t._l(t.orderedPlugins,(function(e){return n("div",{key:e,staticClass:"metrics_plugin"},[n("h4",{staticClass:"metrics_plugin_title"},[t._v(t._s(e))]),t._v(" "),n("table",{staticClass:"tabletip info_data_table"},[n("tbody",t._l(t.metricsByPlugins[e],(function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(i))]),t._v(" "),n("td",[t._v(t._s(e))])])})),0)])])})),t._v(" "),t.isAwsEstimate&&t.awsEstimate?n("div",{attrs:{id:"aws-estimate"}},[n("h3",[t._v("AWS estimate")]),t._v(" "),n("b",[t._v(t._s(t.awsEstimate.price)+" USD")]),n("br"),t._v("\n        This job requested "+t._s(t.awsEstimate.vcpus)+" cores and "+t._s(t.awsEstimate.memory)+" Gb. Given this, the smallest\n        EC2 machine we could find is "),n("span",{attrs:{id:"aws_name"}},[t._v(t._s(t.awsEstimate.instance.name))]),t._v(" ("),n("span",{attrs:{id:"aws_mem"}},[t._v(t._s(t.awsEstimate.instance.mem))]),t._v("\n        GB / "),n("span",{attrs:{id:"aws_vcpus"}},[t._v(t._s(t.awsEstimate.instance.vcpus))]),t._v(" vCPUs /\n        "),n("span",{attrs:{id:"aws_cpu"}},[t._v(t._s(t.awsEstimate.instance.cpu))]),t._v("). That instance is priced at "+t._s(t.awsEstimate.instance.price)+" USD/hour."),n("br"),t._v("\n        Please note, that those numbers are only estimates, all jobs are always free of charge for all users.\n    ")]):t._e()],2):t._e()}),[],!1,null,null,null);e.a=u.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(195),d=n(108),u=n(270),h=n(11),f=h.a.SessionStorageModel.extend({defaults:{expandedIds:{},show_deleted:!1,show_hidden:!1},addExpanded:function(t){var e=this.get("expandedIds");e[t.id]=t.get("id"),this.save("expandedIds",e)},removeExpanded:function(t){var e=this.get("expandedIds");delete e[t.id],this.save("expandedIds",e)},isExpanded:function(t){return i.default.result(this.get("expandedIds"),t,!1)},allExpanded:function(){return i.default.values(this.get("expandedIds"))},clearExpanded:function(){this.set("expandedIds",{})},includeDeleted:function(t){return i.default.isUndefined(t)||this.set("show_deleted",t),this.get("show_deleted")},includeHidden:function(t){return i.default.isUndefined(t)||this.set("show_hidden",t),this.get("show_hidden")},toString:function(){return"HistoryPrefs(".concat(this.id,")")}},{storageKeyPrefix:"history:",historyStorageKey:function(t){if(!t)throw new Error("HistoryPrefs.historyStorageKey needs valid id: ".concat(t));return f.storageKeyPrefix+t},get:function(t){return new f({id:f.historyStorageKey(t)})},clearAll:function(t){for(var e in sessionStorage)0===e.indexOf(f.storageKeyPrefix)&&sessionStorage.removeItem(e)}}),p={HistoryPrefs:f},m=n(142),_=n(110),g=window.localStorage.getItem("historyContentsLimitPerPageDefault")||500,v=c.a.PaginatedCollection,y=v.extend(h.a.LoggableMixin).extend({_logNamespace:"history",limitPerPage:g,limitPerProgressiveFetch:g,order:"hid",url:function(){return"".concat(this.urlRoot,"/").concat(this.historyId,"/contents")},initialize:function(t,e){this.on({"sync add":this.trackJobStates}),e=e||{},this.urlRoot="".concat(Object(l.getAppRoot)(),"api/histories"),v.prototype.initialize.call(this,t,e),this.history=e.history||null,this.setHistoryId(e.historyId||null),this.includeDeleted=e.includeDeleted||this.includeDeleted,this.includeHidden=e.includeHidden||this.includeHidden,this.model.prototype.idAttribute="type_id"},trackJobStates:function(){var t=this;this.each((function(e){t.jobStateSummariesCollection&&t.jobStateSummariesCollection.trackModel(e)}))},model:function(t,e){return"dataset"===t.history_content_type?new d.a.HistoryDatasetAssociation(t,e):"dataset_collection"===t.history_content_type?new u.a.HistoryDatasetCollection(t,e):{validationError:"Unknown history_content_type: ".concat(t.history_content_type)}},stopPolling:function(){this.jobStateSummariesCollection&&(this.jobStateSummariesCollection.active=!1,this.jobStateSummariesCollection.clearUpdateTimeout())},setHistoryId:function(t){this.stopPolling(),this.historyId=t,t&&(this._setUpWebStorage(),this.jobStateSummariesCollection=new m.a.JobStatesSummaryCollection,this.jobStateSummariesCollection.historyId=t,this.jobStateSummariesCollection.monitor())},_setUpWebStorage:function(t){return this.storage=new p.HistoryPrefs({id:p.HistoryPrefs.historyStorageKey(this.historyId)}),this.trigger("new-storage",this.storage,this),this.on({"include-deleted":function(t){this.storage.includeDeleted(t)},"include-hidden":function(t){this.storage.includeHidden(t)}}),this.includeDeleted=this.storage.includeDeleted()||!1,this.includeHidden=this.storage.includeHidden()||!1,this},comparators:i.default.extend(i.default.clone(v.prototype.comparators),{name:h.a.buildComparator("name",{ascending:!0}),"name-dsc":h.a.buildComparator("name",{ascending:!1}),hid:h.a.buildComparator("hid",{ascending:!1}),"hid-asc":h.a.buildComparator("hid",{ascending:!0})}),running:function(){return this.filter((function(t){return!t.inReadyState()}))},runningAndActive:function(){return this.filter((function(t){return!t.inReadyState()&&t.get("visible")&&!t.get("deleted")}))},getByHid:function(t){return this.findWhere({hid:t})},haveDetails:function(){return this.all((function(t){return t.hasDetails()}))},hidden:function(){return this.filter((function(t){return t.hidden()}))},deleted:function(){return this.filter((function(t){return t.get("deleted")}))},visibleAndUndeleted:function(){return this.filter((function(t){return t.get("visible")&&!t.get("deleted")}))},setIncludeDeleted:function(t,e){if(i.default.isBoolean(t)&&t!==this.includeDeleted){if(this.includeDeleted=t,i.default.result(e,"silent"))return;this.trigger("include-deleted",t,this)}},setIncludeHidden:function(t,e){if(i.default.isBoolean(t)&&t!==this.includeHidden){if(this.includeHidden=t,e=e||{},i.default.result(e,"silent"))return;this.trigger("include-hidden",t,this)}},fetch:function(t){if(t=t||{},this.historyId&&!t.details){var e=p.HistoryPrefs.get(this.historyId).toJSON();i.default.isEmpty(e.expandedIds)||(t.details=i.default.values(e.expandedIds).join(","))}return v.prototype.fetch.call(this,t)},_buildFetchData:function(t){return i.default.extend(v.prototype._buildFetchData.call(this,t),{v:"dev"})},_fetchParams:v.prototype._fetchParams.concat(["v","details"]),_buildFetchFilters:function(t){var e=v.prototype._buildFetchFilters.call(this,t)||{},n={};return this.includeDeleted||(n.deleted=!1,n.purged=!1),this.includeHidden||(n.visible=!0),i.default.defaults(e,n)},getTotalItemCount:function(){return this.history.contentsShown()},fetchUpdated:function(t,e){return t&&((e=e||{filters:{}}).remove=!1,e.filters={"update_time-ge":t.toISOString(),visible:""}),this.fetch(e)},fetchDeleted:function(t){var e=this;return(t=t||{}).filters=i.default.extend(t.filters,{deleted:!0,purged:void 0}),t.remove=!1,this.trigger("fetching-deleted",this),this.fetch(t).always((function(){e.trigger("fetching-deleted-done",e)}))},fetchHidden:function(t){var e=this;return(t=t||{}).filters=i.default.extend(t.filters,{visible:!1}),t.remove=!1,this.trigger("fetching-hidden",this),this.fetch(t).always((function(){e.trigger("fetching-hidden-done",e)}))},fetchAllDetails:function(t){return(t=t||{}).data=i.default.extend(t.data||{},{details:"all"}),this.fetch(t)},_filterAndUpdate:function(t,e){var n=this,i=this.model.prototype.idAttribute,a=[e];return this.fetch({filters:t,remove:!1}).then((function(t){return t=t.reduce((function(t,e,a){var r=n.get(e[i]);return r?t.concat(r):t}),[]),n.ajaxQueue("save",a,t)}))},ajaxQueue:function(t,e,n){return n=n||this.models,new _.a.AjaxQueue(n.slice().reverse().map((function(n,a){var r=i.default.isString(t)?n[t]:t;return function(){return r.apply(n,e)}}))).deferred},_recursivelyFetch:function(t,e,n,a,r){var o=this;r=r||0;var s=i.default.extend(i.default.clone(t),{view:"summary",keys:e,limit:a,offset:r,reset:0===r,remove:!1});i.default.defer((function(){o.fetch.call(o,s).fail(n.reject).done((function(i){n.notify(i,a,r),i.length!==a?(o.allFetched=!0,n.resolve(i,a,r)):o._recursivelyFetch(t,e,n,a,r+a)}))}))},progressivelyFetchDetails:function(t){t=t||{};var e=r.a.Deferred();return this._recursivelyFetch(t,d.a.HistoryDatasetAssociation.prototype.searchAttributes.join(","),e,t.limitPerCall||this.limitPerProgressiveFetch),e},isCopyable:function(t){return i.default.isObject(t)&&t.id&&i.default.contains(["HistoryDatasetAssociation","HistoryDatasetCollectionAssociation"],t.model_class)},copy:function(t){var e,n,a;i.default.isString(t)?(e=t,a="hda",n="dataset"):(e=t.id,a={HistoryDatasetAssociation:"hda",LibraryDatasetDatasetAssociation:"ldda",HistoryDatasetCollectionAssociation:"hdca"}[t.model_class]||"hda",n="hdca"===a?"dataset_collection":"dataset");var o=this,s=r.a.ajax(this.url(),{method:"POST",contentType:"application/json",data:JSON.stringify({content:e,source:a,type:n,copy_elements:!0})}).done((function(t){o.add([t],{parse:!0})})).fail((function(t,i,r){o.trigger("error",o,s,{},"Error copying contents",{type:n,id:e,source:a})}));return s},createHDCA:function(t,e,n,i,a,r){return void 0===a&&(a=!0),this.model({history_content_type:"dataset_collection",collection_type:e,history_id:this.historyId,name:n,hide_source_items:i||!1,copy_elements:a,element_identifiers:t}).save(r)},haveSearchDetails:function(){return this.allFetched&&this.all((function(t){return i.default.has(t.attributes,"annotation")}))},matches:function(t){return this.filter((function(e){return e.matches(t)}))},clone:function(){var t=s.a.Collection.prototype.clone.call(this);return t.historyId=this.historyId,t},toString:function(){return["HistoryContents(",[this.historyId,this.length].join(),")"].join("")}})},function(t,e,n){"use strict";var i=["log","debug","info","warn","error","metric"];e.a=function(t,e){var n=void 0!==t.prototype?t.prototype:t;return void 0!==e&&(n._logNamespace=e),i.forEach((function(t){n[t]=function(){if(this.logger)return this.logger.emit?this.logger.emit(t,this._logNamespace,arguments):this.logger[t]?this.logger[t].apply(this.logger,arguments):void 0}})),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(10);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function o(t){var e=Object(i.c)(t),n=Math.abs((e>>4)%360),r=75+(15&e),o="hsl(".concat(n,", 100%, ").concat(r,"%)"),s="hsl(".concat(n,", 100%, ").concat(r-40,"%)"),l=a(function(t,e,n){var i,a,r;if(0==e)i=a=r=n;else{var o=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=o(l,s,t+1/3),a=o(l,s,t),r=o(l,s,t-1/3)}return[i,a,r]}(n,1,r/100),3);return{primary:o,darker:s,contrasting:function(t,e,n){return(255*t*299+255*e*587+255*n*114)/1e3>125?"black":"white"}(l[0],l[1],l[2])}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(0),a=n.n(i);function r(){console.log("init_refresh_on_change"),a()("select[refresh_on_change='true']").off("change").change((function(){var t=a()(this),e=t.val(),n=t.attr("refresh_on_change_values");if(n){n=n.split(",");var i=t.attr("last_selected_value");if(-1===a.a.inArray(e,n)&&-1===a.a.inArray(i,n))return}a()(window).trigger("refresh_on_change"),a()(document).trigger("convert_to_values"),t.get(0).form.submit()})),a()(":checkbox[refresh_on_change='true']").off("click").click((function(){var t=a()(this),e=t.val(),n=t.attr("refresh_on_change_values");if(n){n=n.split(",");var i=t.attr("last_selected_value");if(-1===a.a.inArray(e,n)&&-1===a.a.inArray(i,n))return}a()(window).trigger("refresh_on_change"),t.get(0).form.submit()})),a()("a[confirm]").off("click").click((function(){return confirm(a()(this).attr("confirm"))}))}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(10),l=n(19),c=o.a.View.extend({visible:!1,initialize:function(t){var e=this;this.model=t&&t.model||new o.a.Model({id:s.b.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,operations:null,collapsible:!1,collapsible_button:!0,collapsed:!1,onchange_title:null}).set(t),this.setElement(this._template()),this.section=t.section,this.$body=this.$(".portlet-body"),this.$title=this.$(".portlet-title"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new l.a.Button({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){e[e.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var t=this,e=this.model.attributes;return this.$el.removeClass().addClass(e.cls).attr("id",e.id),this.$header[e.title?"show":"hide"](),this.$title_text.html(e.title),e.title_id&&this.$title.attr("id",e.title_id),e.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa mr-1").addClass(e.icon).show():this.$title_icon.hide(),this.$title_text[e.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),e.collapsible&&(this.$title_text.on("click",(function(){t[t.collapsed?"expand":"collapse"]()})),e.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!e.onchange_title),e.onchange_title&&this.$title_text.make_text_editable({on_finish:function(t){e.onchange_title(t)}}),e.buttons?(this.$buttons.empty().show(),a.a.each(this.model.get("buttons"),(function(e,n){n&&(n.$el.prop("id",e),t.$buttons.append(n.$el))}))):this.$buttons.hide(),this.$operations.empty,e.collapsible&&e.collapsible_button&&this.$operations.append(this.collapsible_button.$el),e.operations&&a.a.each(e.operations,(function(e,n){n.$el.prop("id",e),t.$operations.append(n.$el)})),this},append:function(t){this.$body.append(t)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(t){this.$buttons.find("#".concat(t)).prop("disabled",!1)},disableButton:function(t){this.$buttons.find("#".concat(t)).prop("disabled",!0)},hideOperation:function(t){this.$operations.find("#".concat(t)).hide()},showOperation:function(t){this.$operations.find("#".concat(t)).show()},setOperation:function(t,e){this.$operations.find("#".concat(t)).off("click").on("click",e)},title:function(t){return t&&this.$title_text.html(t),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.section&&this.section.renderOnce(),this.$content.show(),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return a()("<div/>").append(a()("<div/>").addClass("portlet-header").append(a()("<div/>").addClass("portlet-operations")).append(a()("<div/>").addClass("portlet-title").append(a()("<i/>").addClass("portlet-title-icon")).append(a()("<span/>").addClass("portlet-title-text")))).append(a()("<div/>").addClass("portlet-content").append(a()("<div/>").addClass("portlet-body")).append(a()("<div/>").addClass("portlet-buttons mt-3 mb-3"))).append(a()("<div/>").addClass("portlet-backdrop"))}});e.a={View:c}},function(t,e,n){"use strict";var i=n(8),a=n(15),r=n(103),o=n(194);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.values={},this.multiple=e.multiple||!1,this.format=e.format||null}var e,n,i;return e=t,(n=[{key:"add",value:function(t){this.multiple||(this.values={});var e=t&&t.id;if(!e)throw"Invalid record with no <id>.";this.values[e]?delete this.values[e]:this.values[e]=t}},{key:"count",value:function(){return Object.keys(this.values).length}},{key:"exists",value:function(t){return!!this.values[t]}},{key:"finalize",value:function(){var t=this,e=[];return Object.values(this.values).forEach((function(n){var i=null;i=t.format?n[t.format]:n,e.push(i)})),e.length>0&&!this.multiple&&(e=e[0]),e}}])&&s(e.prototype,n),i&&s(e,i),t}(),c=n(7),d=n.n(c),u=n(3);function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"get",value:function(t){var e=this;return new Promise((function(n,i){d.a.get(t).then((function(t){var i=e.getItems(t.data);n(i)})).catch((function(t){var e="Request failed.";t.response&&(e=t.response.data.err_msg||"".concat(t.response.statusText," (").concat(t.response.status,")")),i(e)}))}))}},{key:"getItems",value:function(t){for(var e=[],n=[t];n.length>0;){var i=n.pop();if(Array.isArray(i))i.forEach((function(t){n.push(t)}));else if(i.elements)n.push(i.elements);else if(i.object)n.push(i.object);else{var a=this.getRecord(i);a&&e.push(a)}}return e}},{key:"getRecord",value:function(t){var e="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port);return t.details=t.extension||t.description,t.time=t.update_time||t.create_time,t.isLeaf=this.isDataset(t),t.time&&(t.time=t.time.substring(0,16).replace("T"," ")),"Library"==t.model_class?(t.label=t.name,t.url="".concat(Object(u.getAppRoot)(),"api/libraries/").concat(t.id,"/contents"),t):t.hid?(t.label="".concat(t.hid,": ").concat(t.name),t.download="".concat(e).concat(Object(u.getAppRoot)(),"api/histories/").concat(t.history_id,"/contents/").concat(t.id,"/display"),t):"file"==t.type?(t.src="ldda",t.label=t.name,t.download="".concat(e).concat(Object(u.getAppRoot)(),"api/libraries/datasets/download/uncompressed?ld_ids=").concat(t.id),t):void 0}},{key:"isDataset",value:function(t){return"dataset"==t.history_content_type||"file"==t.type}}])&&h(e.prototype,n),i&&h(e,i),t}(),p=n(166);function m(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}i.default.use(a.a);var g={mixins:[r.a],props:{multiple:{type:Boolean,default:!1},format:{type:String,default:"download"},library:{type:Boolean,default:!0},history:{type:String,required:!0},modalStatic:{type:Boolean,default:!1},allowUpload:{type:Boolean,default:!0}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,undoShow:!1,hasValue:!1}},created:function(){this.services=new f,this.urlTracker=new o.a(this.getHistoryUrl()),this.model=new l({multiple:this.multiple,format:this.format}),this.load()},methods:{getHistoryUrl:function(){return"".concat(Object(u.getAppRoot)(),"api/histories/").concat(this.history,"/contents?deleted=false")},formatRows:function(){var t,e=m(this.items);try{for(e.s();!(t=e.n()).done;){var n=t.value,a="active";n.isLeaf&&(a=this.model.exists(n.id)?"success":"default"),i.default.set(n,"_rowVariant",a)}}catch(t){e.e(t)}finally{e.f()}},onClick:function(t){t.isLeaf?(this.model.add(t),this.hasValue=this.model.count()>0,this.multiple?this.formatRows():this.onOk()):this.load(t.url)},onUpload:function(){var t={multiple:this.multiple,format:this.format,callback:this.callback,modalShow:!0,selectable:!0};Object(p.b)(t),this.modalShow=!1},onOk:function(){var t=this.model.finalize();this.modalShow=!1,this.callback(t),this.$emit("onOk",t)},onCancel:function(){this.modalShow=!1,this.$emit("onCancel")},load:function(t){var e=this;t=this.urlTracker.getUrl(t),this.filter=null,this.optionsShow=!1,this.undoShow=!this.urlTracker.atRoot(),this.services.get(t).then((function(t){e.library&&e.urlTracker.atRoot()&&t.unshift({label:"Data Libraries",url:"".concat(Object(u.getAppRoot)(),"api/libraries")}),e.items=t,e.formatRows(),e.optionsShow=!0})).catch((function(t){e.errorMessage=t}))}}},v=n(5),y=Object(v.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("selection-dialog",{attrs:{"error-message":t.errorMessage,"options-show":t.optionsShow,"modal-show":t.modalShow,"hide-modal":t.onCancel},scopedSlots:t._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[t.optionsShow?n("data-dialog-table",{attrs:{items:t.items,multiple:t.multiple,filter:t.filter},on:{clicked:t.onClick,load:t.load}}):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[t.undoShow?n("b-btn",{staticClass:"float-left",attrs:{size:"sm"},on:{click:function(e){return t.load()}}},[n("div",{staticClass:"fa fa-caret-left mr-1"}),t._v("\n            Back\n        ")]):t._e(),t._v(" "),t.allowUpload?n("b-btn",{staticClass:"float-left mr-1",attrs:{size:"sm"},on:{click:t.onUpload}},[n("div",{staticClass:"fa fa-upload ml-1"}),t._v("\n            Upload\n        ")]):t._e(),t._v(" "),t.multiple?n("b-btn",{staticClass:"float-right ml-1",attrs:{size:"sm",variant:"primary",disabled:!t.hasValue},on:{click:t.onOk}},[t._v("\n            Ok\n        ")]):t._e()]},proxy:!0}])})}),[],!1,null,null,null);e.a=y.exports},function(t,e,n){"use strict";var i,a=n(1),r=n(0),o=n.n(r),s=n(3),l=n(6),c=n(24),d=n(96),u=n(92),h=n(199),f=n(52),p=n(11),m=n(2),_=n.n(m),g=d.b.DatasetListItemView,v=g.extend({initialize:function(t){g.prototype.initialize.call(this,t),this.hasUser=t.hasUser,this.purgeAllowed=t.purgeAllowed||!1,this.tagsEditorShown=t.tagsEditorShown||!1,this.annotationEditorShown=t.annotationEditorShown||!1},_renderPrimaryActions:function(){var t=g.prototype._renderPrimaryActions.call(this);return this.model.get("state")===c.a.NOT_VIEWABLE?t:g.prototype._renderPrimaryActions.call(this).concat([this._renderEditButton(),this._renderDeleteButton()])},_renderEditButton:function(){var t=this;if(this.model.get("state")===c.a.DISCARDED||!this.model.get("accessible"))return null;var e=this.model.get("purged"),n=this.model.get("deleted"),i={title:_()("Edit attributes"),href:"".concat(Object(s.getAppRoot)(),"datasets/edit?dataset_id=").concat(this.model.attributes.id),faIcon:"fa-pencil",classes:"edit-btn",onclick:function(i){if(!n&&!e){var a=Object(l.a)();if(a.router){i.preventDefault();var r=t.model.get("element_id")||t.model.get("id");a.router.push("datasets/edit",{dataset_id:r})}}}};return n||e?(i.disabled=!0,e?i.title=_()("Cannot edit attributes of datasets removed from disk"):n&&(i.title=_()("Undelete dataset to edit attributes"))):[c.a.UPLOAD,c.a.NEW].includes(this.model.get("state"))&&(i.disabled=!0,i.title=_()("This dataset is not yet editable")),Object(f.a)(i)},_renderDeleteButton:function(){if(!this.model.get("accessible"))return null;var t=this,e=this.model.isDeletedOrPurged();return Object(f.a)({title:e?_()("Dataset is already deleted"):_()("Delete"),disabled:e,faIcon:"fa-times",classes:"delete-btn",onclick:function(){t.$el.find(".icon-btn.delete-btn").tooltip("dispose"),t.model.delete()}})},_renderDetails:function(){var t=g.prototype._renderDetails.call(this),e=this.model.get("state");return this.model.isDeletedOrPurged()||(this._renderTags(t),this._renderAnnotation(t),[c.a.OK,c.a.FAILED_METADATA].includes(e)&&this._makeDbkeyEditLink(t)),this._setUpBehaviors(t),t},_renderToolHelpButton:function(){var t=this.model.attributes.dataset_id,e=this.model.attributes.creating_job,n=this,i=function(e){var i='<div id="thdiv-'.concat(t,'" class="toolhelp">');e.name&&e.help?(i+="<strong>Tool help for ".concat(e.name,"</strong><hr/>"),i+=e.help):i+="<strong>Tool help is unavailable for this dataset.</strong><hr/>",i+="</div>",n.$el.find(".details").append(o.a.parseHTML(i))};return null===Object(l.a)().user.id?null:Object(f.a)({title:_()("Tool Help"),classes:"icon-btn",href:"#",faIcon:"fa-question",onclick:function(){n.$el.find(".toolhelp").length>0?n.$el.find(".toolhelp").toggle():o.a.ajax({url:"".concat(Object(s.getAppRoot)(),"api/jobs/").concat(e)}).done((function(t){!function(t){o.a.ajax({url:"".concat(Object(s.getAppRoot)(),"api/tools/").concat(t.tool_id,"/build")}).done((function(t){i(t)})).fail((function(){i({})}))}(t)})).fail((function(){console.log('Failed at recovering job information from the  Galaxy API for job id "'.concat(e,'".'))}))}})},_renderSecondaryActions:function(){var t=g.prototype._renderSecondaryActions.call(this);switch(this.model.get("state")){case c.a.UPLOAD:case c.a.NOT_VIEWABLE:return t;case c.a.ERROR:return t.unshift(this._renderErrButton()),t.concat([this._renderRerunButton(),this._renderToolHelpButton()]);case c.a.OK:case c.a.FAILED_METADATA:return t.concat([this._renderRerunButton(),this._renderVisualizationsButton(),this._renderToolHelpButton()])}return t.concat([this._renderRerunButton(),this._renderToolHelpButton()])},_renderErrButton:function(){var t=this;return Object(f.a)({title:_()("View or report this error"),href:"".concat(Object(s.getAppRoot)(),"datasets/error?dataset_id=").concat(this.model.attributes.id),classes:"report-error-btn",faIcon:"fa-bug",onclick:function(e){var n=Object(l.a)();n.router&&(e.preventDefault(),n.router.push("datasets/error",{dataset_id:t.model.attributes.id}))}})},_renderRerunButton:function(){var t=this.model.get("creating_job");if(this.model.get("rerunnable"))return Object(f.a)({title:_()("Run this job again"),href:this.model.urls.rerun,classes:"rerun-btn",target:this.linkTarget,faIcon:"fa-refresh",onclick:function(e){var n=Object(l.a)();n.router&&(e.preventDefault(),n.router.push("/",{job_id:t}))}})},_renderVisualizationsButton:function(){var t=Object(l.a)(),e=this.model.get("visualizations");if(!t.config.visualizations_visible||this.model.isDeletedOrPurged()||!this.hasUser||!this.model.hasData()||a.default.isEmpty(e))return null;if(!a.default.isObject(e[0]))return this.warn("Visualizations have been switched off"),null;if(e.length>=1){var n=this.model.get("id"),i=Object(s.getAppRoot)()+"visualizations?dataset_id="+n;return Object(f.a)({title:_()("Visualize this data"),href:i,classes:"visualization-link",faIcon:"fa-bar-chart-o",onclick:function(e){t.frame&&t.frame.active?(e.preventDefault(),t.frame.add({url:i,title:"Visualization"})):t.router&&(e.preventDefault(),t.router.push("visualizations",{dataset_id:n}),t.trigger("activate-hda",n))}})}},_renderTags:function(t){var e=this;if(this.hasUser){var n=t.find(".tags-display")[0],i={model:this.model,disabled:!1,context:"dataset-li-edit"},a=Object(u.d)(i,n),r=function(){o()(a.$el).toggleClass("active"),e.tagsEditorShown=o()(a.$el).hasClass("active")};if(Object(f.a)({title:_()("Edit dataset tags"),classes:"tag-btn",faIcon:"fa-tags"}).appendTo(t.find(".actions .right")).on("click",r),this.tagsEditorShown)o()(a.$el).hasClass("active")||r();return a}},_renderAnnotation:function(t){if(this.hasUser){var e=this;this.annotationEditor=new h.a.AnnotationEditor({model:this.model,el:t.find(".annotation-display"),onshowFirstTime:function(){this.render()},onshow:function(){e.annotationEditorShown=!0},onhide:function(){e.annotationEditorShown=!1},$activator:Object(f.a)({title:_()("Edit dataset annotation"),classes:"annotate-btn",faIcon:"fa-comment"}).appendTo(t.find(".actions .right"))}),this.annotationEditorShown&&this.annotationEditor.toggle(!0)}},_makeDbkeyEditLink:function(t){if("?"===this.model.get("metadata_dbkey")&&!this.model.isDeletedOrPurged()){var e=o()('<a class="value">?</a>').attr("href",this.model.urls.edit).attr("target","_top");t.find(".dbkey .value").replaceWith(e)}},events:a.default.extend(a.default.clone(g.prototype.events),{"click .undelete-link":"_clickUndeleteLink","click .purge-link":"_clickPurgeLink","click .edit-btn":function(t){this.trigger("edit",this,t)},"click .delete-btn":function(t){this.trigger("delete",this,t)},"click .rerun-btn":function(t){this.trigger("rerun",this,t)},"click .report-err-btn":function(t){this.trigger("report-err",this,t)},"click .visualization-btn":function(t){this.trigger("visualize",this,t)},"click .dbkey a":function(t){this.trigger("edit",this,t)}}),_clickUndeleteLink:function(t){return this.model.undelete(),!1},_clickPurgeLink:function(t){return window.confirm(_()("This will permanently remove the data in your dataset. Are you sure?"))&&this.model.purge(),!1},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"HDAEditView(".concat(t,")")}});v.prototype.templates=(i=a.default.extend({},g.prototype.templates.warnings,{failed_metadata:p.a.wrapTemplate(['<% if( dataset.state === "failed_metadata" ){ %>','<div class="failed_metadata-warning warningmessagesmall">',_()("An error occurred setting the metadata for this dataset"),'<br /><a href="<%- dataset.urls.edit %>" target="_top">',_()("Set it manually or retry auto-detection"),"</a>","</div>","<% } %>"],"dataset"),deleted:p.a.wrapTemplate(["<% if( dataset.deleted && !dataset.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',_()("This dataset has been deleted"),'<br /><a class="undelete-link" href="javascript:void(0);">',_()("Undelete it"),"</a>","<% if( view.purgeAllowed ){ %>",'<br /><a class="purge-link" href="javascript:void(0);">',_()("Permanently remove it from disk"),"</a>","<% } %>","</div>","<% } %>"],"dataset")}),a.default.extend({},g.prototype.templates,{warnings:i})),e.a={DatasetListItemEdit:v}},function(t,e,n){"use strict";var i=n(4),a=n.n(i),r=n(3),o=(n(110),["new","queued","running"]),s=["error","deleted"],l=["ok"].concat(s),c=a.a.Model.extend({url:function(){return"".concat(Object(r.getAppRoot)(),"api/histories/").concat(this.attributes.history_id,"/contents/dataset_collections/").concat(this.attributes.collection_id,"/jobs_summary")},hasDetails:function(){return this.has("populated_state")},new:function(){return!this.hasDetails()||"new"==this.get("populated_state")},errored:function(){return"error"===this.get("populated_state")||this.anyWithStates(s)},states:function(){return this.get("states")||{}},anyWithState:function(t){return(this.states()[t]||0)>0},anyWithStates:function(t){var e=this.states();for(var n in t)if((e[t[n]]||0)>0)return!0;return!1},numWithStates:function(t){var e=this.states(),n=0;for(var i in t)n+=e[t[i]]||0;return n},numInError:function(){return this.numWithStates(s)},numTerminal:function(){return this.numWithStates(l)},running:function(){return this.anyWithState("running")},terminal:function(){return!this.new()&&!this.anyWithStates(o)},jobCount:function(){var t=this.states(),e=0;for(var n in t)e+=t[n];return e},toString:function(){return"JobStatesSummary(id=".concat(this.get("id"),")")}}),d=a.a.Collection.extend({model:c,initialize:function(){var t=this;this.on({add:function(e){t.active||e.fetch()}}),this.updateTimeoutId=null,this.active=!0},trackModel:function(t){if(!t.has("job_states_summary")){var e=this.historyId;if("dataset_collection"===t.attributes.history_content_type){var n=t.attributes.job_source_type,i=t.attributes.job_source_id;n&&(this.add({id:i,model:n,history_id:e,collection_id:t.attributes.id}),t.jobStatesSummary=this.get(i))}}},url:function(){var t=this.models.filter((function(t){return!t.terminal()})),e=t.map((function(t){return t.get("id")})).join(","),n=t.map((function(t){return t.get("model")})).join(",");return"".concat(Object(r.getAppRoot)(),"api/histories/").concat(this.historyId,"/jobs_summary?ids=").concat(e,"&types=").concat(n)},monitor:function(){var t=this;if(this.clearUpdateTimeout(),this.active){var e=function(){t.updateTimeoutId=setTimeout((function(){t.monitor()}),2e3)},n=this.models.filter((function(t){return!t.terminal()}));n.length,n.length>0?this.fetch({remove:!1}).done(e):e()}},clearUpdateTimeout:function(){this.updateTimeoutId&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)},toString:function(){return"JobStatesSummaryCollection()"}});e.a={JobStatesSummary:c,JobStatesSummaryCollection:d,FETCH_STATE_ON_ADD:!1,NON_TERMINAL_STATES:o,ERROR_STATES:s}},,function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(6),s=n(127),l=n(108),c=n(161),d=n(202),u=n(118),h=n(90),f=n(141),p=h.a.DCListItemView,m=p.extend({initialize:function(t){p.prototype.initialize.call(this,t)},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"DCListItemEdit(".concat(t,")")}}),_=h.a.DCEListItemView,g=_.extend({initialize:function(t){_.prototype.initialize.call(this,t)},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"DCEListItemEdit(".concat(t,")")}}),v=f.a.DatasetListItemEdit.extend({initialize:function(t){f.a.DatasetListItemEdit.prototype.initialize.call(this,t)},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):r.a.when()},_renderDeleteButton:function(){return null},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"DatasetDCEListItemEdit(".concat(t,")")}});v.prototype.templates=i.default.extend({},f.a.DatasetListItemEdit.prototype.templates,{titleBar:h.a.DatasetDCEListItemView.prototype.templates.titleBar});var y={DCListItemEdit:m,DCEListItemEdit:g,DatasetDCEListItemEdit:v,NestedDCDCEListItemEdit:h.a.NestedDCDCEListItemView.extend({toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"NestedDCDCEListItemEdit(".concat(t,")")}})},b=n(92),w=n(2),k=n.n(w),x=(n(150),u.a.CollectionView),S=x.extend({DatasetDCEViewClass:y.DatasetDCEListItemEdit,NestedDCDCEViewClass:y.NestedDCDCEListItemEdit,getNestedDCDCEViewClass:function(){return y.NestedDCDCEListItemEdit.extend({foldoutPanelClass:S})},initialize:function(t){x.prototype.initialize.call(this,t)},_setUpBehaviors:function(t){var e=this;if(t=t||this.$el,x.prototype._setUpBehaviors.call(this,t),this.model){var n=Object(o.a)();if(n.user&&!n.user.isAnonymous()){this.tagsEditorShown=!0;var i=this;t.find("> .controls .name").attr("title",k()("Click to rename collection")).tooltip({placement:"bottom"}).make_text_editable({on_finish:function(t){var e=i.model.get("name");t&&t!==e?(i.$el.find("> .controls .name").text(t),i.model.save({name:t}).fail((function(){i.$el.find("> .controls .name").text(i.model.previous("name"))}))):i.$el.find("> .controls .name").text(e)}});var a=t.find(".tags-display")[0],s={model:this.model,disabled:!1,context:"collection-view-edit"},l=Object(b.d)(s,a);if(this.tagsEditorShown)r()(l.$el).hasClass("active")||(r()(l.$el).toggleClass("active"),e.tagsEditorShown=r()(l.$el).hasClass("active"))}}},toString:function(){return"CollectionViewEdit(".concat(this.model?this.model.get("name"):"",")")}}),M={CollectionViewEdit:S},C=d.a.HDCAListItemView,T={HDCAListItemEdit:C.extend({initialize:function(t){C.prototype.initialize.call(this,t),this.purgeAllowed=t.purgeAllowed||!1},_getFoldoutPanelClass:function(){return M.CollectionViewEdit},_renderPrimaryActions:function(){return this.log("".concat(this,"._renderPrimaryActions")),C.prototype._renderPrimaryActions.call(this).concat([this._renderDeleteButton()])},_renderDeleteButton:function(){return r()('\n                <div class="dropdown">\n                    <a class="delete-btn icon-btn" title="'.concat(k()("Delete"),'" data-toggle="dropdown">\n                        <span class="fa fa-times"></span>\n                    </a>\n                    <div class="dropdown-menu" role="menu">\n                            <a href="javascript:void(0)" role="button" class="dropdown-item delete-collection">\n                                ').concat(k()("Collection Only"),'\n                            </a>\n                            <a href="javascript:void(0)" role="button" class="dropdown-item delete-collection-and-datasets">\n                                ').concat(k()("Delete Datasets"),'\n                            </a>\n                            <a href="javascript:void(0)" role="button" style="display: ').concat(this.purgeAllowed?"inherit":"none",'" class="dropdown-item delete-collection-and-purge-datasets">\n                                ').concat(k()("Permanently Delete Datasets"),"\n                            </a>\n                    </div>\n                </div>"))},events:i.default.extend(i.default.clone(C.prototype.events),{"click .delete-collection":function(t){this.model.delete()},"click .delete-collection-and-datasets":function(t){this.model.delete(!0)},"click .delete-collection-and-purge-datasets":function(t){this.model.delete(!0,!0)}}),toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"HDCAListItemEdit(".concat(t,")")}})},j=n(199),O=n(234),L=n(154),D=n(235),A=n(236),E=n(52),I=n(11);function P(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var R,H,N=r.a,$=s.a.HistoryView,F=$.extend({HDAViewClass:c.a.HDAListItemEdit,HDCAViewClass:T.HDCAListItemEdit,initialize:function(t){t=t||{},$.prototype.initialize.call(this,t),this.tagsEditor=null,this.dragItems=!0,this.annotationEditor=null,this.purgeAllowed=t.purgeAllowed||!1,this.annotationEditorShown=t.annotationEditorShown||!1,this.tagsEditorShown=t.tagsEditorShown||!1},_setUpListeners:function(){return $.prototype._setUpListeners.call(this),this.on({"droptarget:drop":function(t,e){this.dataDropped(e),this.dropTargetOff()},"view:attached view:removed":function(){this._renderCounts()},"search:loading-progress":this._renderSearchProgress,"search:searching":this._renderSearchFindings})},_setUpModelListeners:function(){return $.prototype._setUpModelListeners.call(this),this.listenTo(this.model,"change:size",this.updateHistoryDiskSize),this},_setUpCollectionListeners:function(){return $.prototype._setUpCollectionListeners.call(this),this.listenTo(this.collection,{"change:deleted":this._handleItemDeletedChange,"change:visible":this._handleItemVisibleChange,"change:purged":function(t){this.model.fetch()},"fetching-deleted":function(t){this.$("> .controls .deleted-count").html("<i>".concat(k()("loading..."),"</i>"))},"fetching-hidden":function(t){this.$("> .controls .hidden-count").html("<i>".concat(k()("loading..."),"</i>"))},"fetching-deleted-done fetching-hidden-done":this._renderCounts}),this},_buildNewRender:function(){var t=Object(o.a)(),e=$.prototype._buildNewRender.call(this);return this.model?(t&&t.user&&t.user.id&&t.user.id===this.model.get("user_id")&&(this._renderTags(e),this._renderAnnotation(e)),e):e},updateHistoryDiskSize:function(){this.$(".history-size").text(this.model.get("nice_size"))},renderItems:function(t){var e=$.prototype.renderItems.call(this,t);return this.searchFor?this._renderSearchFindings(t):this._renderCounts(t),e},_renderCounts:function(t){t=t instanceof r.a?t:this.$el;var e=this.templates.counts(this.model.toJSON(),this);return t.find("> .controls .subtitle").html(e)},_renderTags:function(t){var e=t.find(".controls .tags-display")[0],n={model:this.model,disabled:!1,context:"history-view-edit"},i=Object(b.d)(n,e);return Object(E.a)({title:k()("Edit history tags"),classes:"history-tag-btn",faIcon:"fa-tags",tooltipConfig:{placement:"top"}}).appendTo(t.find(".controls .actions")).on("click",(function(){N(i.$el).toggleClass("active")})),i},_renderAnnotation:function(t){var e=this;this.annotationEditor=new j.a.AnnotationEditor({model:this.model,el:t.find(".controls .annotation-display"),onshowFirstTime:function(){this.render()},onshow:function(){e.toggleHDAAnnotationEditors(!0,e.fxSpeed)},onhide:function(){e.toggleHDAAnnotationEditors(!1,e.fxSpeed)},$activator:Object(E.a)({title:k()("Edit history annotation"),classes:"history-annotate-btn",faIcon:"fa-comment",tooltipConfig:{placement:"top"}}).appendTo(t.find(".controls .actions"))})},_setUpBehaviors:function(t){var e=Object(o.a)();if(t=t||this.$el,$.prototype._setUpBehaviors.call(this,t),this.model&&e.user&&!e.user.isAnonymous()&&e.user.id===this.model.get("user_id")){var n=this;t.find("> .controls .name").attr("title",k()("Click to rename history")).tooltip({placement:"bottom"}).make_text_editable({on_finish:function(t){var e=n.model.get("name");t&&t!==e?(n.$el.find("> .controls .name").text(t),n.model.save({name:t}).fail((function(){n.$el.find("> .controls .name").text(n.model.previous("name"))}))):n.$el.find("> .controls .name").text(e)}})}},multiselectActions:function(){var t=this,e=Object(o.a)(),n=this,i=function(i,a){var o={},s=n.getSelectedModels().filter((function(t){return console.log(t.attributes[i]),t.attributes[i]!=a})).map((function(t){var e={history_content_type:t.attributes.history_content_type,id:t.attributes.id};return o[t.id]=t,e}));if(0!=s.length){var l={};l.url="".concat(e.root,"api/histories/").concat(t.model.id,"/contents"),l.type="PUT";var c={items:s};c[i]=a,l.data=JSON.stringify(c),l.contentType="application/json";var d=r.a.ajax(l);return d.done((function(t,e,n){var i,a=P(t);try{for(a.s();!(i=a.n()).done;){var r=i.value,s=r.history_content_type+"-"+r.id;o[s].set(r)}}catch(t){a.e(t)}finally{a.f()}})),d.fail((function(t,e,n){console.error(n)})),d}},a=[{html:k()("Hide datasets"),func:function(){i("visible",!1)}},{html:k()("Unhide datasets"),func:function(){i("visible",!0)}},{html:k()("Delete datasets"),func:function(){i("deleted",!0)}},{html:k()("Undelete datasets"),func:function(){i("deleted",!1)}}];return n.purgeAllowed&&a.push({html:k()("Permanently delete datasets"),func:function(){if(window.confirm(k()("This will permanently remove the data in your datasets. Are you sure?"))){var t=l.a.HistoryDatasetAssociation.prototype.purge,e=n.getSelectedModels(),i=e.filter((function(t){return"dataset"==t.get("history_content_type")}));e.ajaxQueue(t,{},i)}}}),a=a.concat(n._collectionActions())},_collectionActions:function(){var t=this;return[{html:k()("Build Dataset List"),func:function(){return t.buildCollection("list")}},{html:k()("Build Dataset Pair"),func:function(){return t.buildCollection("paired")}},{html:k()("Build List of Dataset Pairs"),func:function(){return t.buildCollection("list:paired")}},{html:k()("Build Collection from Rules"),func:function(){return t.buildCollection("rules")}}]},buildCollection:function(t,e,n){var i=this;e=e||i.getSelectedModels();var a,r=n||!0;"list"==t?a=O.a.createListCollection:"paired"==t?a=D.a.createPairCollection:"list:paired"==t?a=A.a.createPairedListCollection:t.startsWith("rules")?a=L.a.createCollectionViaRules:console.warn("Unknown collectionType encountered ".concat(t)),a(e,r).then((function(){i.model.refresh()})).catch((function(){}))},_getItemViewOptions:function(t){var e=$.prototype._getItemViewOptions.call(this,t);return i.default.extend(e,{purgeAllowed:this.purgeAllowed,tagsEditorShown:this.tagsEditor&&!this.tagsEditor.hidden,annotationEditorShown:this.annotationEditor&&!this.annotationEditor.hidden}),e},_handleItemDeletedChange:function(t){t.get("deleted")?this._handleItemDeletion(t):this._handleItemUndeletion(t),this._renderCounts()},_handleItemDeletion:function(t){var e=this.model.get("contents_active");e.deleted+=1,e.active-=1,this.model.contents.includeDeleted||this.removeItemView(t),this.model.set("contents_active",e)},_handleItemUndeletion:function(t){var e=this.model.get("contents_active");e.deleted-=1,this.model.contents.includeDeleted||(e.active-=1),this.model.set("contents_active",e)},_handleItemVisibleChange:function(t){t.hidden()?this._handleItemHidden(t):this._handleItemUnhidden(t),this._renderCounts()},_handleItemHidden:function(t){var e=this.model.get("contents_active");e.hidden+=1,e.active-=1,this.model.contents.includeHidden||this.removeItemView(t),this.model.set("contents_active",e)},_handleItemUnhidden:function(t){var e=this.model.get("contents_active");e.hidden-=1,this.model.contents.includeHidden||(e.active-=1),this.model.set("contents_active",e)},toggleHDAAnnotationEditors:function(t,e){i.default.each(this.views,(function(n){n.annotationEditor&&n.annotationEditor.toggle(t,e)}))},events:i.default.extend(i.default.clone($.prototype.events),{"click .show-selectors-btn":"toggleSelectors","click .toggle-deleted-link":function(t){this.toggleShowDeleted()},"click .toggle-hidden-link":function(t){this.toggleShowHidden()}}),_renderSearchProgress:function(t,e){var n=t+e;return this.$("> .controls .subtitle").html(["<i>",k()("Searching "),n,"/",this.model.contentsShown(),"</i>"].join(""))},_renderSearchFindings:function(t){t=t instanceof r.a?t:this.$el;var e=this.templates.found(this.model.toJSON(),this);return t.find("> .controls .subtitle").html(e),this},dropTargetOn:function(){if(this.dropTarget)return this;this.dropTarget=!0;var t={dragenter:i.default.bind(this.dragenter,this),dragover:i.default.bind(this.dragover,this),dragleave:i.default.bind(this.dragleave,this),drop:i.default.bind(this.drop,this)},e=this._renderDropTarget();for(var n in this.$list().before([this._renderDropTargetHelp(),e]),t)Object.prototype.hasOwnProperty.call(t,n)&&e.get(0).addEventListener(n,t[n]);return this},_renderDropTarget:function(){return this.$(".history-drop-target").remove(),N("<div/>").addClass("history-drop-target")},_renderDropTargetHelp:function(){return this.$(".history-drop-target-help").remove(),N("<div/>").addClass("history-drop-target-help").text(k()("Drag datasets here to copy them to the current history"))},dropTargetOff:function(){if(!this.dropTarget)return this;this.dropTarget=!1;var t=this.$(".history-drop-target").get(0);for(var e in this._dropHandlers)Object.prototype.hasOwnProperty.call(this._dropHandlers,e)&&t.off(e,this._dropHandlers[e]);return this.$(".history-drop-target").remove(),this.$(".history-drop-target-help").remove(),this},dropTargetToggle:function(){return this.dropTarget?this.dropTargetOff():this.dropTargetOn(),this},dragenter:function(t){t.preventDefault(),t.stopPropagation(),this.$(".history-drop-target").css("border","2px solid black")},dragover:function(t){t.preventDefault(),t.stopPropagation()},dragleave:function(t){t.preventDefault(),t.stopPropagation(),this.$(".history-drop-target").css("border","1px dashed black")},drop:function(t){t.preventDefault();var e=t.dataTransfer,n=e.getData("text");e.dropEffect="move";try{n=JSON.parse(n)}catch(t){this.warn("error parsing JSON from drop:",n)}return this.trigger("droptarget:drop",t,n,this),!1},dataDropped:function(t){var e=this;return i.default.isObject(t)&&"HistoryDatasetAssociation"===t.model_class&&t.id?0!==this.contents.currentPage?this.contents.fetchPage(0).then((function(){return e.model.contents.copy(t.id)})):this.model.contents.copy(t.id):r.a.when()},toString:function(){return"HistoryViewEdit(".concat(this.model?this.model.get("name"):"",")")}});F.prototype.templates=(R=I.a.wrapTemplate(["<% var shown = Math.max( view.views.length, history.contents_active.active ) %>","<% if( shown ){ %>",'<span class="shown-count">',"<%- shown %> ",k()("shown"),"</span>","<% } %>","<% if( history.contents_active.deleted ){ %>",'<span class="deleted-count">',"<% if( view.model.contents.includeDeleted ){ %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("hide deleted"),"</a>","<% } else { %>","<%- history.contents_active.deleted %> ",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("deleted"),"</a>","<% } %>","</span>","<% } %>","<% if( history.contents_active.hidden ){ %>",'<span class="hidden-count">',"<% if( view.model.contents.includeHidden ){ %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hide hidden"),"</a>","<% } else { %>","<%- history.contents_active.hidden %> ",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hidden"),"</a>","<% } %>","</span>","<% } %>"],"history"),H=I.a.wrapTemplate([k()("Found")," <%- view.views.length %>","<% if( history.contents_active.deleted ){ %>",", ","<% if( view.model.contents.includeDeleted ){ %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("hide deleted"),"</a>","<% } else { %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("show deleted"),"</a>","<% } %>","<% } %>","<% if( history.contents_active.hidden ){ %>",", ","<% if( view.model.contents.includeHidden ){ %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hide hidden"),"</a>","<% } else { %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("show hidden"),"</a>","<% } %>","<% } %>"],"history"),i.default.extend(i.default.clone($.prototype.templates),{counts:R,found:H}));e.a={HistoryViewEdit:F}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return W})),n.d(e,"b",(function(){return z}));var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(3),c=n(6),d=n(2),u=n.n(d),h=s.a.View.extend({initialize:function(t){this.model=t&&t.model||new s.a.Model(t),this.setElement(a()("<div/>").addClass("corner frame")),this.$el.append(a()("<div/>").addClass("f-header corner").append(a()("<div/>").addClass("f-title")).append(a()("<div/>").addClass("f-icon f-close fa fa-close").tooltip({title:u()("Close"),placement:"bottom"}))).append(a()("<div/>").addClass("f-content")).append(a()("<div/>").addClass("f-resize f-icon corner fa fa-expand").tooltip({title:"Resize"})).append(a()("<div/>").addClass("f-cover")),this.$header=this.$(".f-header"),this.$title=this.$(".f-title"),this.$content=this.$(".f-content"),this.render(),this.listenTo(this.model,"change",this.render,this)},render:function(){var t=this,e=this.model.attributes;this.$title.html(r.default.escape(e.title)||""),this.$header.find(".f-icon-left").remove(),r.default.each(e.menu,(function(e){var n=a()("<div/>").addClass("f-icon-left").addClass(e.icon);r.default.isFunction(e.disabled)&&e.disabled()?n.attr("disabled",!0):n.on("click",(function(){e.onclick(t)})).tooltip({title:e.tooltip||"",placement:"bottom"}),t.$header.append(n)})),e.url?this.$content.html(a()("<iframe/>").addClass("f-iframe").attr("scrolling","auto").attr("src","".concat(e.url+(-1===e.url.indexOf("?")?"?":"&"),"widget=True"))):e.content&&(r.default.isFunction(e.content)?e.content(t.$content):t.$content.html(e.content))}}),f={View:s.a.View.extend({defaultOptions:{frame:{cols:6,rows:3},rows:1e3,cell:130,margin:5,scroll:5,top_min:40,frame_max:9,visible:!0},cols:0,top:0,top_max:0,frame_z:0,frame_counter:0,frame_uid:0,frame_list:{},frame_shadow:null,visible:!1,event:{},initialize:function(t){var e=this;this.options=r.default.defaults(t||{},this.defaultOptions),this.visible=this.options.visible,this.top=this.top_max=this.options.top_min,this.setElement(a()("<div/>").addClass("galaxy-frame").append(a()("<div/>").addClass("frame-background")).append(a()("<div/>").addClass("frame-menu frame-scroll-up fa fa-chevron-up fa-2x")).append(a()("<div/>").addClass("frame-menu frame-scroll-down fa fa-chevron-down fa-2x"))),this.frame_shadow=new s.a.View({el:a()("<div/>").addClass("corner frame-shadow")}),this.$el.append(this.frame_shadow.$el),this._frameInit(this.frame_shadow,"#frame-shadow"),this._frameResize(this.frame_shadow,{width:0,height:0}),this.frame_list["#frame-shadow"]=this.frame_shadow,this.visible?this.show():this.hide(),this._panelRefresh(),a()(window).resize((function(){e.visible&&e._panelRefresh()}))},render:function(){this.$(".frame-scroll-up")[this.top!=this.options.top_min?"show":"hide"](),this.$(".frame-scroll-down")[this.top!=this.top_max?"show":"hide"]()},add:function(t){var e=Object(c.a)();if(this.frame_counter>=this.options.frame_max)e.modal.show({title:u()("Warning"),body:"You have reached the maximum number of allowed frames (".concat(this.options.frame_max,")."),buttons:{Close:function(){e.modal.hide()}}});else{var n="#frame-".concat(this.frame_uid++);if(0!==a()(n).length)e.modal.show({title:u()("Error"),body:"This frame already exists. This page might contain multiple frame managers.",buttons:{Close:function(){e.modal.hide()}}});else{this.top=this.options.top_min;var i=new h(t);this.$el.append(i.$el),t.width=this._toPixelCoord("width",this.options.frame.cols),t.height=this._toPixelCoord("height",this.options.frame.rows),this.frame_z=parseInt(i.$el.css("z-index")),this.frame_list[n]=i,this.frame_counter++,this._frameInit(i,n),this._frameResize(i,{width:t.width,height:t.height}),this._frameInsert(i,{top:0,left:0},!0),this.visible||this.show(),this.trigger("add")}}},del:function(t){var e=this,n=this,i=t.$el;i.fadeOut("fast",(function(){i.remove(),delete n.frame_list[t.id],n.frame_counter--,n._panelRefresh(!0),n._panelAnimationComplete(),0==e.frame_counter&&e._eventHide(),n.trigger("remove")}))},show:function(){this.visible=!0,this.$el.fadeIn("fast"),this.trigger("show")},hide:function(){this.event.type||(this.visible=!1,this.$el.fadeOut("fast",(function(){a()(this).hide()})),this.trigger("hide"))},length:function(){return this.frame_counter},events:{mousemove:"_eventFrameMouseMove",mouseup:"_eventFrameMouseUp",mouseleave:"_eventFrameMouseUp",mousewheel:"_eventPanelScroll",DOMMouseScroll:"_eventPanelScroll","mousedown .frame":"_eventFrameMouseDown","mousedown .frame-background":"_eventHide","mousedown .frame-scroll-up":"_eventPanelScroll_up","mousedown .frame-scroll-down":"_eventPanelScroll_down","mousedown .f-close":"_eventFrameClose"},_eventFrameMouseDown:function(t){a()(".tooltip").hide(),this.event.type||((a()(t.target).hasClass("f-header")||a()(t.target).hasClass("f-title"))&&(this.event.type="drag"),a()(t.target).hasClass("f-resize")&&(this.event.type="resize"),this.event.type&&(t.preventDefault(),this.event.target=this._frameIdentify(t.target),this.event.xy={x:t.originalEvent.pageX,y:t.originalEvent.pageY},this._frameDragStart(this.event.target)))},_eventFrameMouseMove:function(t){if(this.event.type){var e={x:t.originalEvent.pageX,y:t.originalEvent.pageY},n={x:e.x-this.event.xy.x,y:e.y-this.event.xy.y};this.event.xy=e;var i=this._frameScreen(this.event.target);if("resize"==this.event.type){i.width+=n.x,i.height+=n.y;var a=this.options.cell-this.options.margin-1;i.width=Math.max(i.width,a),i.height=Math.max(i.height,a),this._frameResize(this.event.target,i),i.width=this._toGridCoord("width",i.width)+1,i.height=this._toGridCoord("height",i.height)+1,i.width=this._toPixelCoord("width",i.width),i.height=this._toPixelCoord("height",i.height),this._frameResize(this.frame_shadow,i),this._frameInsert(this.frame_shadow,{top:this._toGridCoord("top",i.top),left:this._toGridCoord("left",i.left)})}else if("drag"==this.event.type){i.left+=n.x,i.top+=n.y,this._frameOffset(this.event.target,i);var r={top:this._toGridCoord("top",i.top),left:this._toGridCoord("left",i.left)};0!==r.left&&r.left++,this._frameInsert(this.frame_shadow,r)}}},_eventFrameMouseUp:function(t){this.event.type&&(this._frameDragStop(this.event.target),this.event.type=null)},_eventFrameClose:function(t){this.event.type||(t.preventDefault(),this.del(this._frameIdentify(t.target)))},_eventHide:function(t){this.event.type||this.hide()},_eventPanelScroll:function(t){!this.event.type&&this.visible&&(0!==a()(t.srcElement).parents(".frame").length?t.stopPropagation():(t.preventDefault(),this._panelScroll(t.originalEvent.detail?t.originalEvent.detail:t.originalEvent.wheelDelta/-3)))},_eventPanelScroll_up:function(t){this.event.type||(t.preventDefault(),this._panelScroll(-this.options.scroll))},_eventPanelScroll_down:function(t){this.event.type||(t.preventDefault(),this._panelScroll(this.options.scroll))},_frameIdentify:function(t){return this.frame_list["#".concat(a()(t).closest(".frame").attr("id"))]},_frameDragStart:function(t){this._frameFocus(t,!0);var e=this._frameScreen(t);this._frameResize(this.frame_shadow,e),this._frameGrid(this.frame_shadow,t.grid_location),t.grid_location=null,this.frame_shadow.$el.show(),a()(".f-cover").show()},_frameDragStop:function(t){this._frameFocus(t,!1);var e=this._frameScreen(this.frame_shadow);this._frameResize(t,e),this._frameGrid(t,this.frame_shadow.grid_location,!0),this.frame_shadow.grid_location=null,this.frame_shadow.$el.hide(),a()(".f-cover").hide(),this._panelAnimationComplete()},_toGridCoord:function(t,e){var n="width"==t||"height"==t?1:-1;return"top"==t&&(e-=this.top),parseInt((e+n*this.options.margin)/this.options.cell,10)},_toPixelCoord:function(t,e){var n="width"==t||"height"==t?1:-1,i=e*this.options.cell-n*this.options.margin;return"top"==t&&(i+=this.top),i},_toGrid:function(t){return{top:this._toGridCoord("top",t.top),left:this._toGridCoord("left",t.left),width:this._toGridCoord("width",t.width),height:this._toGridCoord("height",t.height)}},_toPixel:function(t){return{top:this._toPixelCoord("top",t.top),left:this._toPixelCoord("left",t.left),width:this._toPixelCoord("width",t.width),height:this._toPixelCoord("height",t.height)}},_isCollision:function(t){for(var e in this.frame_list){var n=this.frame_list[e];if(null!==n.grid_location&&(i=t,a=n.grid_location,!(i.left>a.left+a.width-1||i.left+i.width-1<a.left||i.top>a.top+a.height-1||i.top+i.height-1<a.top)))return!0}var i,a;return!1},_locationRank:function(t){return t.top*this.cols+t.left},_panelRefresh:function(t){this.cols=parseInt(a()(window).width()/this.options.cell,10)+1,this._frameInsert(null,null,t)},_panelAnimationComplete:function(){var t=this;a()(".frame").promise().done((function(){t._panelScroll(0,!0)}))},_panelScroll:function(t,e){var n=this.top-this.options.scroll*t;if(n=Math.max(n,this.top_max),n=Math.min(n,this.options.top_min),this.top!=n){for(var i in this.frame_list){var a=this.frame_list[i];if(null!==a.grid_location){var r={top:a.screen_location.top-(this.top-n),left:a.screen_location.left};this._frameOffset(a,r,e)}}this.top=n}this.render()},_frameInit:function(t,e){t.id=e,t.screen_location={},t.grid_location={},t.grid_rank=null,t.$el.attr("id",e.substring(1))},_frameInsert:function(t,e,n){var i=this,o=[];t&&(t.grid_location=null,o.push([t,this._locationRank(e)])),r.default.each(this.frame_list,(function(t){null!==t.grid_location&&(t.grid_location=null,o.push([t,t.grid_rank]))})),o.sort((function(t,e){return t[1]<e[1]?-1:t[1]>e[1]?1:0})),r.default.each(o,(function(t){i._framePlace(t[0],n)})),this.top_max=0,r.default.each(this.frame_list,(function(t){null!==t.grid_location&&(i.top_max=Math.max(i.top_max,t.grid_location.top+t.grid_location.height))})),this.top_max=a()(window).height()-this.top_max*this.options.cell-2*this.options.margin,this.top_max=Math.min(this.top_max,this.options.top_min),this.render()},_framePlace:function(t,e){t.grid_location=null;for(var n=this._toGrid(this._frameScreen(t)),i=!1,a=0;a<this.options.rows;a++){for(var r=0;r<Math.max(1,this.cols-n.width);r++)if(n.top=a,n.left=r,!this._isCollision(n)){i=!0;break}if(i)break}i?this._frameGrid(t,n,e):console.log("Grid dimensions exceeded.")},_frameFocus:function(t,e){t.$el.css("z-index",this.frame_z+(e?1:0))},_frameOffset:function(t,e,n){if(t.screen_location.left=e.left,t.screen_location.top=e.top,n){this._frameFocus(t,!0);var i=this;t.$el.animate({top:e.top,left:e.left},"fast",(function(){i._frameFocus(t,!1)}))}else t.$el.css({top:e.top,left:e.left})},_frameResize:function(t,e){t.$el.css({width:e.width,height:e.height}),t.screen_location.width=e.width,t.screen_location.height=e.height},_frameGrid:function(t,e,n){t.grid_location=e,this._frameOffset(t,this._toPixel(e),n),t.grid_rank=this._locationRank(e)},_frameScreen:function(t){var e=t.screen_location;return{top:e.top,left:e.left,width:e.width,height:e.height}}})},p=n(56),m=n(32),_=n(131),g=s.a.View.extend({initialize:function(t){var e=this;t=t||{},this.frames=new f.View({visible:!1}),this.setElement(this.frames.$el),this.active=!1,this.buttonActive={id:"enable-scratchbook",icon:"fa-th",tooltip:u()("Enable/Disable Scratchbook"),toggle:!1,onclick:function(){e.active=!e.active,e.buttonActive.toggle=e.active,e.buttonActive.show_note=e.active,e.buttonActive.note_cls=e.active&&"fa fa-check",e.active||e.frames.hide()}},this.buttonLoad={id:"show-scratchbook",icon:"fa-eye",tooltip:u()("Show/Hide Scratchbook"),show_note:!0,visible:!1,note:"",onclick:function(t){e.frames.visible?e.frames.hide():e.frames.show()}},this.history_cache={}},getFrames:function(){return this.frames},beforeUnload:function(){var t="";return this.frames.length()>0&&(t="You opened ".concat(this.frames.length()," frame(s) which will be lost.")),t},addDataset:function(t){var e=this,n=null,i=Object(c.a)();if(i&&i.currHistoryPanel){var a=i.currHistoryPanel.collection.historyId;this.history_cache[a]={name:i.currHistoryPanel.model.get("name"),dataset_ids:[]},i.currHistoryPanel.collection.each((function(t){!t.get("deleted")&&t.get("visible")&&e.history_cache[a].dataset_ids.push(t.get("id"))}))}var o=function(t,n){if(t){var i=e.history_cache[t.get("history_id")];if(i&&i.dataset_ids){var a=i.dataset_ids,r=a.indexOf(t.get("id"));if(-1!==r&&r+n>=0&&r+n<a.length)return a[r+n]}}},s=function(t,i,a){var r=o(t,i);r?e._loadDataset(r,(function(t,e){n=t,a.model.set(e)})):a.model.trigger("change")};this._loadDataset(t,(function(t,i){n=t,e.add(r.default.extend({menu:[{icon:"fa fa-chevron-circle-left",tooltip:u()("Previous in History"),onclick:function(t){s(n,-1,t)},disabled:function(){return!o(n,-1)}},{icon:"fa fa-chevron-circle-right",tooltip:u()("Next in History"),onclick:function(t){s(n,1,t)},disabled:function(){return!o(n,1)}}]},i))}))},_loadDataset:function(t,e){var n=this,i=new p.a({id:t});a.a.when(i.fetch()).then((function(){var a=r.default.find(["tabular","interval"],(function(t){return-1!==i.get("data_type").indexOf(t)})),o=i.get("name"),s=n.history_cache[i.get("history_id")];s&&(o="".concat(s.name,": ").concat(o)),e(i,a?{title:o,url:null,content:Object(p.d)({model:new p.c(i.toJSON()),embedded:!0,height:"100%"}).$el}:{title:o,url:"".concat(Object(l.getAppRoot)(),"datasets/").concat(t,"/display/?preview=True"),content:null})}))},addTrackster:function(t){var e=this,n=new m.a.Visualization({id:t});a.a.when(n.fetch()).then((function(){var t=new _.a(Object(l.getAppRoot)()),i={title:n.get("name"),type:"other",content:function(e){var i={container:e,name:n.get("title"),id:n.id,dbkey:n.get("dbkey"),stand_alone:!1},a=n.get("latest_revision"),o=a.config.view.drawables;r.default.each(o,(function(t){t.dataset={hda_ldda:t.hda_ldda,id:t.dataset_id}})),t.create_visualization(i,a.config.viewport,a.config.view.drawables,a.config.bookmarks,!1)}};e.add(i)}))},add:function(t){if("_blank"==t.target)window.open(t.url);else if("_top"==t.target||"_parent"==t.target||"_self"==t.target)window.location=t.url;else if(!this.active||t.noscratchbook){var e=a()(window.parent.document).find("#galaxy_main");"galaxy_main"==t.target||"center"==t.target?0===e.length?window.location=this._build_url(t.url,{use_panels:!0}):e.attr("src",t.url):window.location=t.url}else t.url=this._build_url(t.url,{hide_panels:!0,hide_masthead:!0}),this.frames.add(t)},_build_url:function(t,e){if(t)return t+=-1==t.indexOf("?")?"?":"&",t+=a.a.param(e,!0)}}),v=n(11),y={UserQuotaMeter:s.a.View.extend(v.a.LoggableMixin).extend({_logNamespace:"user",options:{warnAtPercent:85,errorAtPercent:100,quotaUrl:"https://galaxyproject.org/support/account-quotas/"},initialize:function(t){this.log("".concat(this,".initialize:"),t),r.default.extend(this.options,t),this.listenTo(this.model,"change:quota_percent change:total_disk_usage",this.render)},update:function(t){return this.log("".concat(this," updating user data..."),t),this.model.loadFromApi(this.model.get("id"),t),this},isOverQuota:function(){return null!==this.model.get("quota_percent")&&this.model.get("quota_percent")>=this.options.errorAtPercent},_render_quota:function(){var t=this.model.toJSON(),e=t.quota_percent,n=a()(this._templateQuotaMeter(t)),i=n.find(".progress-bar");return this.isOverQuota()?(i.attr("class","progress-bar bg-danger"),n.find(".quota-meter-text").css("color","white"),this.trigger("quota:over",t)):e>=this.options.warnAtPercent?(i.attr("class","progress-bar bg-warning"),this.trigger("quota:under quota:under:approaching",t)):(i.attr("class","progress-bar bg-success"),this.trigger("quota:under quota:under:ok",t)),n},_render_usage:function(){var t=a()(this._templateUsage(this.model.toJSON()));return this.log("".concat(this,".rendering usage:"),t),t},render:function(){var t=null;return this.log("".concat(this,".model.quota_percent:"),this.model.get("quota_percent")),t=null===this.model.get("quota_percent")||void 0===this.model.get("quota_percent")?this._render_usage():this._render_quota(),this.$el.html(t),this.$el.find(".quota-meter-text").tooltip(),this},_templateQuotaMeter:function(t){var e=t.nice_total_disk_usage?'title="Using '.concat(t.nice_total_disk_usage,'. Click for details."'):"",n="".concat(u()("Using")," ").concat(t.quota_percent,"%"),i=this.options.quotaUrl;return'<div id="quota-meter" class="quota-meter progress">\n    <div class="progress-bar" style="width: '.concat(t.quota_percent,'%"></div>\n    <div class="quota-meter-text" data-placement="left" ').concat(e,'>\n        <a href="').concat(i,'" target="_blank">').concat(n,"</a>\n    </div>\n</div>")},_templateUsage:function(t){return['<div id="quota-meter" class="quota-meter" style="background-color: transparent">','<div class="quota-meter-text" data-placement="left" data-original-title="This value is recalculated when you log out." style="color: white">',t.nice_total_disk_usage?u()("Using ")+t.nice_total_disk_usage:"","</div>","</div>"].join("")},toString:function(){return"UserQuotaMeter(".concat(this.model,")")}})},b=n(634),w=n(636),k=n(635),x=n(8),S=n(596),M=n(597),C=n(633),T=n(482),j=n(594);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}x.default.use(S.a),x.default.use(M.a);var A={name:"MastheadItem",components:{BNavItem:C.a,BNavItemDropdown:T.a,BDropdownItem:j.a},props:{tab:{type:Object},activeTab:{type:String}},computed:{menu:function(){return this.tab.menu},popoverNote:function(){return'Please <a href="'.concat(Object(l.getAppRoot)(),'login">login or register</a> to use this feature.')},classes:function(){var t=this.tab.id==this.activeTab;return Object.fromEntries([["active",t],[this.tab.cls,!0]])},linkClasses:function(){return{"nav-icon":this.tab.icon,toggle:this.tab.toggle}},iconClasses:function(){return Object.fromEntries([["fa fa-fw",!0],[this.tab.icon,this.tab.icon]])},styles:function(){return{visibility:this.tab.visible?"visible":"hidden"}},galaxyIframe:function(){return document.getElementById("galaxy_main")}},updated:function(){this.$refs.dropdown&&this.galaxyIframe&&this.galaxyIframe.addEventListener("load",this.iframeListener)},destroyed:function(){this.$refs.dropdown&&this.galaxyIframe&&this.galaxyIframe.removeEventListener("load",this.iframeListener)},methods:{iframeListener:function(){return this.galaxyIframe.contentDocument.addEventListener("click",this.hideDropdown)},hideDropdown:function(){this.$refs.dropdown&&this.$refs.dropdown.hide()},open:function(t,e){var n=this;if(t.onclick)return this.propogateClick(t,e);if(t.disabled)e.preventDefault(),this.$root.$emit("bv::hide::tooltip"),this.$root.$emit("bv::show::popover",t.id),setTimeout((function(){n.$root.$emit("bv::hide::popover",t.id)}),3e3);else if(!t.menu){e.preventDefault();var i=Object(c.a)();if("__use_router__"===t.target&&void 0!==i.page)i.page.router.executeUseRouter(this.formatUrl(t.url));else try{i.frame.add(L(L({},t),{},{url:this.formatUrl(t.url)}))}catch(t){console.warn("Missing frame element on galaxy instance",t)}}},propogateClick:function(t,e){e.preventDefault(),t.onclick(),"enable-scratchbook"===t.id&&this.$emit("updateScratchbookTab",t)},formatUrl:function(t){return"string"==typeof t&&-1===t.indexOf("//")&&"/"!=t.charAt(0)?Object(l.getAppRoot)()+t:t}}},E=n(5),I=Object(E.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.menu?n("b-nav-item-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}},{name:"b-popover",rawName:"v-b-popover.manual.bottom",value:{id:t.tab.id,content:t.popoverNote,html:!0},expression:"{ id: tab.id, content: popoverNote, html: true }",modifiers:{manual:!0,bottom:!0}}],ref:"dropdown",class:t.classes,style:t.styles,attrs:{text:t.tab.title,id:t.tab.id,href:"#",title:t.tab.tooltip},on:{show:function(e){return t.open(t.tab,e)}}},[t._l(t.tab.menu,(function(e,i){return[n("b-dropdown-item",{key:"item-"+i,attrs:{href:t.formatUrl(e.url),target:e.target||"_parent",role:"menuitem",disabled:!0===e.disabled},on:{click:function(n){return t.open(e,n)}}},[t._v("\n            "+t._s(e.title)+"\n        ")]),t._v(" "),e.divider?n("div",{key:"divider-"+i,staticClass:"dropdown-divider"}):t._e()]}))],2):n("b-nav-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}},{name:"b-popover",rawName:"v-b-popover.manual.bottom",value:{id:t.tab.id,content:t.popoverNote,html:!0},expression:"{ id: tab.id, content: popoverNote, html: true }",modifiers:{manual:!0,bottom:!0}}],class:t.classes,style:t.styles,attrs:{id:t.tab.id,href:t.formatUrl(t.tab.url),target:t.tab.target||"_parent",role:"menuitem","link-classes":t.linkClasses,title:t.tab.tooltip},on:{click:function(e){return t.open(t.tab,e)}}},[t.tab.icon?[n("span",{class:t.iconClasses}),t._v(" "),t.tab.show_note?n("span",{class:["nav-note",t.tab.note_cls]},[t._v(t._s(t.tab.note))]):t._e()]:[t._v("\n        "+t._s(t.tab.title)+"\n    ")]],2)}),[],!1,null,null,null).exports,P=n(224),Y=n(109),R=n(10);var H={name:"Masthead",props:{displayGalaxyBrand:{type:Boolean,default:!0},brand:{type:String,default:null},brandLink:{type:String,default:null},brandImage:{type:String,default:null},brandImageSecondary:{type:String,default:null},activeTab:{type:String,default:null},mastheadState:{type:Object,default:null},menuOptions:{type:Object,default:null}},components:{BNavbar:b.a,BNavbarBrand:w.a,BNavbarNav:k.a,MastheadItem:I},methods:{addItem:function(t){this.tabs.push(t)},highlight:function(t){this.activeTab=t},_tabToJson:function(t){var e;return e=t.toJSON instanceof Function?t.toJSON():t,Object.assign({},{visible:!0,target:"_parent"},e)},_reflectScratchbookFrames:function(){var t=this.mastheadState.frame.getFrames(),e=this.mastheadState.frame.buttonLoad;e.toggle=t.visible,e.icon=t.visible?"fa-eye":"fa-eye-slash"}},data:function(){return{baseTabs:[],extensionTabs:[]}},computed:{brandTitle:function(){var t=this.displayGalaxyBrand?"Galaxy ":"";return this.brand&&(t+=this.brand),t},tabs:function(){var t=[this.mastheadState.frame.buttonActive,this.mastheadState.frame.buttonLoad],e=[].concat(this.baseTabs,this.extensionTabs,t);return e.map(this._tabToJson)}},created:function(){var t;this.baseTabs=Object(P.a)(this.menuOptions),t=this.extensionTabs,Y.a.load({type:"masthead",callback:function(e){e.each((function(e){var n=e.toJSON();if(n.activate){var i={id:n.id,icon:n.config.icon,url:n.config.url,tooltip:n.config.tooltip,onclick:n.config.function&&new Function(n.config.function),visible:!0,target:"_parent"};t.push(i),R.b.appendScriptStyle(n)}}))}})},mounted:function(){var t=this;this.mastheadState.quotaMeter.setElement(this.$refs["quota-meter-container"]),this.mastheadState.quotaMeter.render();var e=this.mastheadState.frame.getFrames();e.on("add remove",(function(){var n=t.mastheadState.frame.buttonLoad;n.note=String(e.length()),n.visible=e.length()>0,n.show_note=e.length()>0})).on("show hide",(function(){t._reflectScratchbookFrames()}))}},N=Object(E.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{staticClass:"justify-content-center",attrs:{id:"masthead",type:"dark",role:"navigation","aria-label":"Main"}},[n("b-navbar-brand",{attrs:{href:t.brandLink,"aria-label":"homepage"}},[n("img",{staticClass:"navbar-brand-image",attrs:{alt:"logo",src:t.brandImage}}),t._v(" "),t.brandImageSecondary?n("img",{staticClass:"navbar-brand-image",attrs:{alt:"logo",src:t.brandImageSecondary}}):t._e(),t._v(" "),n("span",{staticClass:"navbar-brand-title"},[t._v(t._s(t.brandTitle))])]),t._v(" "),n("b-navbar-nav",t._l(t.tabs,(function(e,i){return n("masthead-item",{directives:[{name:"show",rawName:"v-show",value:!(void 0!==e.hidden&&e.hidden),expression:"!(tab.hidden === undefined ? false : tab.hidden)"}],key:"tab-"+i,attrs:{tab:e,"active-tab":t.activeTab}})})),1),t._v(" "),n("div",{ref:"quota-meter-container",staticClass:"quota-meter-container"})],1)}),[],!1,null,null,null).exports,$=n(36);function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var W=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;F(this,t),(n=n||Object(c.a)()).frame=this.frame=new g,n.quotaMeter=this.quotaMeter=new y.UserQuotaMeter({model:n.user,quotaUrl:n.config.quota_url}),a()(window).on("click",(function(t){var e=a()(t.target).closest("a[download]");1==e.length&&(0===a()("iframe[id=download]").length&&a()("body").append(a()("<iframe/>").attr("id","download").hide()),a()("iframe[id=download]").attr("src",e.attr("href")),t.preventDefault())})).on("beforeunload",(function(){var t=e.frame.beforeUnload();if(t)return t}))};function z(t,e,n){return Object($.a)(N)({el:t,mastheadState:n,displayGalaxyBrand:e.display_galaxy_brand,brand:e.brand,brandLink:e.logo_url,brandImage:e.logo_src,brandImageSecondary:e.logo_src_secondary,menuOptions:e},t)}},,function(t,e,n){"use strict";var i=n(0),a=n.n(i).a;a.fn.make_text_editable=function(t){var e="num_cols"in t?t.num_cols:30,n="num_rows"in t?t.num_rows:4,i="use_textarea"in t&&t.use_textarea,r="on_finish"in t?t.on_finish:null,o="help_text"in t?t.help_text:null,s=a(this);return s.addClass("editable-text").click((function(o){if(!(a(this).children(":input").length>0)){s.removeClass("editable-text");var l,c,d=function(t){s.find(":input").remove(),""!==t?s.text(t):s.html("<br>"),s.addClass("editable-text"),r&&r(t)},u="cur_text"in t?t.cur_text:s.text();i?(l=a("<textarea/>").attr({rows:n,cols:e}).text(a.trim(u)).keyup((function(t){27===t.keyCode&&d(u)})),c=a("<button/>").addClass("btn-sm float-right").text("Done").click((function(){return d(l.val()),!1}))):l=a("<input type='text'/>").attr({value:a.trim(u),size:e}).blur((function(t){var e=a(t.currentTarget).val();d(e)})).keyup((function(t){27===t.keyCode?d(u):13===t.keyCode&&a(t.currentTarget).trigger("blur"),t.stopPropagation()})),s.text(""),s.append(l),c&&s.append(c),l.focus(),l.select(),o.stopPropagation()}})),o&&s.attr("title",o).tooltip(),s}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(10),c=n(137),d=n(67),u=s.a.View.extend({initialize:function(t){var e=this;this.data=[],this.data2=[],this.model=t&&t.model||new s.a.Model({id:l.b.uid(),cls:"ui-select",error_text:"No options available",empty_text:"Nothing selected",visible:!0,wait:!1,multiple:!1,searchable:!0,optional:!1,disabled:!1,readonly:!1,onchange:function(){},value:null,individual:!1,pagesize:20}).set(t),this.on("change",(function(){e.model.get("onchange")&&e.model.get("onchange")(e.value())})),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:disabled",this._changeDisabled,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:multiple change:searchable change:cls change:id",this.render,this),this.render()},render:function(){var t=this;this.model.get("searchable")?this._renderSearchable():this._renderClassic(),this.$el.addClass(this.model.get("cls")).attr("id",this.model.get("id")),this.$select.empty().addClass("select").attr("id","".concat(this.model.get("id"),"_select")).prop("multiple",this.model.get("multiple")).on("change",(function(){t.value(t._getValue()),t.trigger("change")})),this._changeData(),this._changeWait(),this._changeVisible(),this._changeDisabled()},_renderClassic:function(){var t=this;this.$el.addClass(this.model.get("multiple")?"ui-select-multiple":"ui-select").append(this.$select=a()("<select/>")).append(this.$dropdown=a()("<div/>")).append(this.$resize=a()("<div/>").append(this.$resize_icon=a()("<i/>"))),this.model.get("multiple")?(this.$dropdown.hide(),this.$resize_icon.addClass("fa fa-angle-double-right fa-rotate-45").show(),this.$resize.removeClass().addClass("icon-resize").show().off("mousedown").on("mousedown",(function(e){var n=e.pageY,i=t.$select.height();t.minHeight=t.minHeight||i,a()("#dd-helper").show().on("mousemove",(function(e){t.$select.height(Math.max(i+(e.pageY-n),t.minHeight))})).on("mouseup mouseleave",(function(){a()("#dd-helper").hide().off()}))}))):(this.$dropdown.show(),this.$resize.hide(),this.$resize_icon.hide())},_renderSearchable:function(){var t=this;this.$el.append(this.$select=a()("<div/>")).append(this.$dropdown=a()("<div/>")),this.$dropdown.hide(),this.model.get("multiple")||this.$dropdown.show().on("click",(function(){t.$select.select2&&t.$select.select2("open")})),this.all_button=null,!this.model.get("multiple")||this.model.get("individual")||this.model.get("readonly")||(this.all_button=new d.a.ButtonCheck({onclick:function(){var e=[];0!==t.all_button.value()&&r.default.each(t.model.get("data"),(function(t){e.push(t.value)})),t.value(e),t.trigger("change")}}),this.$el.prepend(this.all_button.$el))},_match:function(t,e){return!t||""===t||String(e).toUpperCase().indexOf(t.toUpperCase())>=0},_changeData:function(){var t=this;this.data=[],!this.model.get("multiple")&&this.model.get("optional")&&this.data.push({value:"__null__",label:this.model.get("empty_text")}),r.default.each(this.model.get("data"),(function(e){t.data.push(e)})),0===this.length()&&this.data.push({value:"__null__",label:this.model.get("error_text")}),this.model.get("searchable")?(this.data2=[],this.data2index={},r.default.each(this.data,(function(e,n){var i={order:n,id:e.value,text:e.label,tags:e.tags};t.data2.push(i),t.data2index[i.id]=i})),this.$select.data("select2")&&this.$select.select2("destroy"),this.matched_tags={},this.$select.select2({data:this.data2,closeOnSelect:!this.model.get("multiple"),multiple:this.model.get("multiple"),query:function(e){t.matched_tags={};var n=t.model.get("pagesize"),i=r.default.filter(t.data2,(function(n){var i=!1;return r.default.each(n.tags,(function(n){t._match(e.term,n)&&(i=t.matched_tags[n]=!0)})),i||t._match(e.term,n.text)}));e.callback({results:i.slice((e.page-1)*n,e.page*n),more:i.length>=e.page*n})},formatResult:function(e){var n="",i=r.default.filter(e.tags,(function(e){return Object.prototype.hasOwnProperty.call(t.matched_tags,e)}));return i.length>5&&(n='&nbsp;<div class="label label-warning">'.concat(i.length-5," more tags</div>")),"\n                    ".concat(r.default.escape(e.text),"\n                    <div>\n                        ").concat(i.slice(0,5).reduce((function(t,e){var n=Object(c.a)(e),i=0===e.indexOf("name:"),a=i?"#".concat(e.slice(5)):e,o=i?'style="background-color: '.concat(n.primary,"; color: ").concat(n.contrasting,"; border: 1px solid ").concat(n.darker,'"'):"";return"".concat(t,"&nbsp;<div ").concat(o,' class="badge badge-primary badge-tags">').concat(r.default.escape(a),"</div>")}),""),"\n                        ").concat(n,"\n                   </div>")}}),this.$(".select2-container .select2-search input").off("blur")):(this.$select.find("option").remove(),r.default.each(this.data,(function(e){t.$select.append(a()("<option/>").attr("value",e.value).html(r.default.escape(e.label)))}))),this.model.set("disabled",this.model.get("readonly")||0===this.length()),this._changeValue()},_changeDisabled:function(){this.model.get("searchable")?this.$select.select2(this.model.get("disabled")?"disable":"enable"):this.$select.prop("disabled",this.model.get("disabled"))},_changeWait:function(){this.$dropdown.removeClass().addClass("icon-dropdown fa").addClass(this.model.get("wait")?"fa-spinner fa-spin":"fa-caret-down")},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"](),this.$select[this.model.get("visible")?"show":"hide"]()},_changeValue:function(){if(this._setValue(this.model.get("value")),this.model.get("multiple")){if(this.all_button){var t=this._getValue();this.all_button.value(a.a.isArray(t)?t.length:0,this.length())}}else null!==this._getValue()||this.model.get("optional")||this._setValue(this.first())},value:function(t){return void 0!==t&&this.model.set("value",t),this._getValue()},first:function(){return this.data.length>0?this.data[0].value:null},exists:function(t){return r.default.findWhere(this.data,{value:t})},text:function(){var t=this._getValue(),e=this.exists(a.a.isArray(t)?t[0]:t);return e?e.label:""},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},disabled:function(){return this.model.get("disabled")},enable:function(){this.model.set("disabled",!1)},disable:function(){this.model.set("disabled",!0)},add:function(t,e){r.default.each(this.model.get("data"),(function(e){e.keep&&!r.default.findWhere(t,{value:e.value})&&t.push(e)})),e&&t&&t.sort(e),this.model.set("data",t)},update:function(t){this.model.set("data",t.data)},setOnChange:function(t){this.model.set("onchange",t)},length:function(){return a.a.isArray(this.model.get("data"))?this.model.get("data").length:0},_setValue:function(t){var e=this;if(null==t&&(t="__null__"),this.model.get("multiple")?t=a.a.isArray(t)?t:[t]:a.a.isArray(t)&&(t=t.length>0?t[0]:"__null__"),this.model.get("searchable")){if(a.a.isArray(t)){var n=[];r.default.each(t,(function(t){var i=e.data2index[t];i&&n.push(i)})),t=n}else t=this.data2index[t];this.$select.select2("data",t)}else this.$select.val(t)},_getValue:function(){var t=null;if(this.model.get("searchable")){var e=this.$select.select2("data");e&&(a.a.isArray(e)?(t=[],e.sort((function(t,e){return t.order-e.order})),r.default.each(e,(function(e){t.push(e.id)}))):t=e.id)}else t=this.$select.val();return l.b.isEmpty(t)?null:t}});e.a={View:u}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(170),a=n(10);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=d(t);if(e){var a=d(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(c,t);var e,n,i,r=l(c);function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),r.apply(this,arguments)}return e=c,(n=[{key:"active",get:function(){return!this.deleted&&!this.purged}},{key:"hidItems",get:function(){return parseInt(this.hid_counter)-1}},{key:"totalItems",get:function(){var t=this;return Object.keys(this.contents_active).reduce((function(e,n){var i=t.contents_active[n];return e+parseInt(i)}),0)}},{key:"niceSize",get:function(){return this.size?Object(a.a)(this.size,!0,2):"(empty)"}},{key:"statusDescription",get:function(){var t=[];return this.shared&&t.push("Shared"),this.importable&&t.push("Accessible"),this.published&&t.push("Published"),this.isDeleted&&t.push("Deleted"),this.purged&&t.push("Purged"),t.join(", ")}}])&&o(e.prototype,n),i&&o(e,i),c}(Object(i.b)(i.a));u.equals=function(t,e){return JSON.stringify(t)==JSON.stringify(e)}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=a.a;function o(t,e){var n=this;return e=a.a.extend({cover:!1},e||{}),n.show=function(i,a,o){var s,l;return i=i||"loading...",a=a||"fast",t.parent().find(".loading-indicator").remove(),n.$indicator=(s=['<div class="loading-indicator">','<div class="loading-indicator-text">','<span class="fa fa-spinner fa-spin fa-lg"></span>','<span class="loading-indicator-message">loading...</span>',"</div>","</div>"].join("\n"),l=r(s).hide().css(e.css||{position:"fixed"}),l.children(".loading-indicator-text"),e.cover?(l.css({"z-index":2,top:t.css("top"),bottom:t.css("bottom"),left:t.css("left"),right:t.css("right"),opacity:.5,"background-color":"white","text-align":"center"}),l.children(".loading-indicator-text").css({"margin-top":"20px"})):l.children(".loading-indicator-text").css({margin:"12px 0px 0px 10px",opacity:"0.85",color:"grey"}).children(".loading-indicator-message").css({margin:"0px 8px 0px 0px","font-style":"italic"}),l).insertBefore(t),n.message(i),n.$indicator.fadeIn(a,o),n},n.message=function(t){n.$indicator.find("i").text(t)},n.hide=function(t,e){return t=t||"fast",n.$indicator&&n.$indicator.length?n.$indicator.fadeOut(t,(function(){n.$indicator.remove(),e&&e()})):e&&e(),n},n}e.a={LoadingIndicator:o,markViewAsLoading:function(t){t.setElement(r('<div><div class="loading"></div></div>')),new o(t.$(".loading")).show()}}},function(t,e,n){"use strict";var i=n(2),a=n.n(i),r=n(8),o=n(102);function s(t,e,i,s){var l;l="datasets"==i?a()("Build Rules for Uploading Datasets"):"collection_contents"==e?a()("Build Rules for Applying to Existing Collection"):"datasets"==e||"library_datasets"==e?a()("Build Rules for Creating Collection(s)"):a()("Build Rules for Uploading Collections"),s.title=l;var c=Object(o.a)(s),d=c.promise,u=c.showEl;return Promise.all([n.e(0),n.e(1),n.e(10),n.e(9)]).then(n.bind(null,765)).then((function(n){var a=r.default.extend(n.default),o=document.createElement("div");return u(o),new a({propsData:{initialElements:t,elementsType:e,importType:i,ftpUploadSite:s.ftpUploadSite,creationFn:s.creationFn,oncancel:s.oncancel,oncreate:s.oncreate,defaultHideSourceItems:s.defaultHideSourceItems,saveRulesFn:s.saveRulesFn,initialRules:s.initialRules}}).$mount(o),d}))}e.a={ruleBasedCollectionCreatorModal:s,createCollectionViaRules:function(t,e){var n,i,a,r=t.selectionType,o=!e;if(r)if(t.elements)i=t.selectionType,a=t.dataType||"collections",n=t.elements;else{var l=RegExp(/[^\s]/),c=t.content.split(/[\n\r]/).filter((function(t){return t.length>0&&l.exec(t)})),d=!1;if(c.length>0)c[0].indexOf("\t")>=0&&(d=!0);var u=d?/\t/:/\s+/;n=c.map((function(t){return t.split(u)})),i=t.selectionType,a=t.dataType||"collections"}else n=t.toJSON(),i="datasets",a="collections";return s(n,i,a,{ftpUploadSite:t.ftpUploadSite,defaultHideSourceItems:e,creationFn:function(e,n,i,a){return t.createHDCA(e,n,i,a,o)}})}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(12);function a(t,e){navigator.clipboard?navigator.clipboard.writeText(t).then((function(){i.a.info(e)})):prompt("Copy to clipboard: Ctrl+C, Enter",t)}},function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(24),d=n(11),u=n(2),h=n.n(u);function f(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}function p(){var t=f();return!!t&&document[t]}var m={change_favicon:function(t){var e=document.createElement("link");e.id="tabicon",e.setAttribute("rel","shortcut icon"),document.querySelector("head").appendChild(e),e.setAttribute("type","image/png"),e.setAttribute("href",t)},hidden_permit:f,is_hidden:p,hidden_count:function(t){p()&&(document.title=1===t?"Galaxy (1 job completed)":"Galaxy ("+t+" jobs completed)")}},_=1,g=d.a.SearchableModelMixin,v=s.a.Model.extend(d.a.LoggableMixin).extend(d.a.mixin(g,{_logNamespace:"dataset",defaults:{state:c.a.NEW,deleted:!1,purged:!1,name:"(unnamed dataset)",accessible:!0,data_type:"",file_ext:"",file_size:0,meta_files:[],misc_blurb:"",misc_info:"",tags:[]},initialize:function(t,e){this.debug("".concat(this,"(Dataset).initialize"),t,e),//!! this state is not in trans.app.model.Dataset.states - set it here -
this.get("accessible")||this.set("state",c.a.NOT_VIEWABLE),this.urls=this._generateUrls(),this._setUpListeners()},_getDatasetId:function(){return this.get("id")},_generateUrls:function(){var t=this._getDatasetId();if(!t)return{};var e={purge:"datasets/".concat(t,"/purge_async"),display:"datasets/".concat(t,"/display/?preview=True"),edit:"datasets/edit?dataset_id=".concat(t),download:"datasets/".concat(t,"/display").concat(this._downloadQueryParameters()),report_error:"dataset/errors?id=".concat(t),rerun:"tool_runner/rerun?id=".concat(t),show_params:"datasets/".concat(t,"/show_params"),visualization:"visualization",meta_download:"dataset/get_metadata_file?hda_id=".concat(t,"&metadata_name=")};return i.default.each(e,(function(t,n){e[n]=Object(l.getAppRoot)()+t})),this.urls=e,e},_downloadQueryParameters:function(){return"?to_ext=".concat(this.get("file_ext"))},_setUpListeners:function(){this.on("change:state",(function(t,e){this.log("".concat(this," has changed state:"),t,e),this.inReadyState()&&(this.trigger("state:ready",t,e,this.previous("state")),"discarded"!=e&&("ok"===e?(new Notification("Job complete: ".concat(this.get("name")),{icon:"static/favicon.ico"}),m.is_hidden()&&(m.hidden_count(_),_++)):"error"==e&&(new Notification("Job failure: ".concat(this.get("name")),{icon:"static/erricon.ico"}),m.is_hidden()&&"granted"==Notification.permission&&m.change_favicon("static/erricon.ico"))))})),this.on("change:id change:file_ext",(function(t){this._generateUrls()}))},toJSON:function(){var t=s.a.Model.prototype.toJSON.call(this);return i.default.extend(t,{urls:this.urls})},isDeletedOrPurged:function(){return this.get("deleted")||this.get("purged")},inReadyState:function(){var t=i.default.contains(c.a.READY_STATES,this.get("state"));return this.isDeletedOrPurged()||t},hasDetails:function(){return!this.get("accessible")||this.has("annotation")},hasData:function(){return this.get("file_size")>0},fetch:function(t){var e=this;return s.a.Model.prototype.fetch.call(this,t).always((function(){e._generateUrls()}))},parse:function(t,e){var n=s.a.Model.prototype.parse.call(this,t,e);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},save:function(t,e){return(e=e||{}).wait=!!i.default.isUndefined(e.wait)||e.wait,s.a.Model.prototype.save.call(this,t,e)},delete:function(t){return this.get("deleted")?r.a.when():this.save({deleted:!0},t)},undelete:function(t){return!this.get("deleted")||this.get("purged")?r.a.when():this.save({deleted:!1},t)},purge:function(t){if(this.get("purged"))return r.a.when();(t=t||{}).url=this.urls.purge;var e=this,n=r.a.ajax(t);return n.done((function(t,n,i){e.set({deleted:!0,purged:!0})})),n.fail((function(n,i,a){var r=h()("Unable to purge dataset");n.responseJSON&&n.responseJSON.error?r=n.responseJSON.error:-1!==n.responseText.indexOf("Removal of datasets by users is not allowed in this Galaxy instance")&&(r="Removal of datasets by users is not allowed in this Galaxy instance"),n.responseText=r,e.trigger("error",e,n,t,h()(r),{error:r})})),n},searchAttributes:["name","file_ext","genome_build","misc_blurb","misc_info","annotation","tags"],searchAliases:{title:"name",format:"file_ext",database:"genome_build",blurb:"misc_blurb",description:"misc_blurb",info:"misc_info",tag:"tags"},toString:function(){var t=this.get("id")||"";return this.get("name")&&(t='"'.concat(this.get("name"),'",').concat(t)),"Dataset(".concat(t,")")}})),y=s.a.Collection.extend(d.a.LoggableMixin).extend({_logNamespace:"dataset",model:v,urlRoot:"".concat(Object(l.getAppRoot)(),"api/datasets"),url:function(){return this.urlRoot},ids:function(){return this.map((function(t){return t.get("id")}))},notReady:function(){return this.filter((function(t){return!t.inReadyState()}))},haveDetails:function(){return this.all((function(t){return t.hasDetails()}))},ajaxQueue:function(t,e){var n=r.a.Deferred(),i=this.length,a=[];if(!i)return n.resolve([]),n;var o=this.chain().reverse().map((function(r,s){return function(){var l=t.call(r,e);l.done((function(t){n.notify({curr:s,total:i,response:t,model:r})})),l.always((function(t){a.push(t),o.length?o.shift()():n.resolve(a)}))}})).value();return o.shift()(),n},matches:function(t){return this.filter((function(e){return e.matches(t)}))},toString:function(){return["DatasetAssociationCollection(",this.length,")"].join("")}});window.addEventListener("focus",(function(){var t=document.getElementById("tabicon");t&&-1!=t.href.search("erricon")&&m.change_favicon("static/favicon.ico"),document.title="Galaxy",_=1}));e.a={DatasetAssociation:v,DatasetAssociationCollection:y}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return M})),n.d(e,"b",(function(){return C}));var i=n(7),a=n.n(i),r=n(6),o=n(21),s=n(3),l=n(243),c=n(78),d=n(616),u=n(251);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=v(t);if(e){var a=v(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(o,t);var e,n,i,r=_(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,t)).cancel=null,n.completed=!1,a.a.get(e,{cancelToken:new a.a.CancelToken((function(t){n.cancel=t}))}).then((function(e){t.next(e.data),n.completed=!0,t.complete()})).catch((function(e){n.completed=!0,t.error(e)})),n}return e=o,(n=[{key:"unsubscribe",value:function(){p(v(o.prototype),"unsubscribe",this).call(this),!1===this.completed&&null!==this.cancel&&(this.cancel(),this.completed=!0)}}])&&f(e.prototype,n),i&&f(e,i),o}(n(75).a);function b(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){b(r,i,a,o,s,"next",t)}function s(t){b(r,i,a,o,s,"throw",t)}o(void 0)}))}}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),t}var M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,t),this.root=e.root||Object(s.getAppRoot)()}var e,n,i,l,c,d,u;return S(t,[{key:"copyWorkflow",value:(u=w(regeneratorRuntime.mark((function t(e){var n,i,s,l,c,d,u,h,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(r.a)(),i="".concat(this.root,"api/workflows/").concat(e.id,"/download"),t.prev=2,t.next=5,a.a.get(i);case 5:return s=t.sent,l=s.data,c=e.owner,d="Copy of ".concat(e.name),c!=n.user.attributes.username&&(d+=" shared by user ".concat(c)),l.name=d,u="".concat(this.root,"api/workflows"),t.next=14,a.a.post(u,{workflow:l});case 14:return h=t.sent,f=h.data,this._addAttributes(f),t.abrupt("return",f);case 20:t.prev=20,t.t0=t.catch(2),Object(o.b)(t.t0);case 23:case"end":return t.stop()}}),t,this,[[2,20]])}))),function(t){return u.apply(this,arguments)})},{key:"deleteWorkflow",value:(d=w(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(this.root,"api/workflows/").concat(e),t.prev=1,t.next=4,a.a.delete(n);case 4:return i=t.sent,t.abrupt("return",i.data);case 8:t.prev=8,t.t0=t.catch(1),Object(o.b)(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t){return d.apply(this,arguments)})},{key:"getWorkflows",value:(c=w(regeneratorRuntime.mark((function t(){var e,n,i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(this.root,"api/workflows"),t.prev=1,t.next=4,a.a.get(e);case 4:return n=t.sent,(i=n.data).forEach((function(t){r._addAttributes(t)})),t.abrupt("return",i);case 10:t.prev=10,t.t0=t.catch(1),Object(o.b)(t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return c.apply(this,arguments)})},{key:"updateWorkflow",value:(l=w(regeneratorRuntime.mark((function t(e,n){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(this.root,"api/workflows/").concat(e),t.prev=1,t.next=4,a.a.put(i,n);case 4:return r=t.sent,t.abrupt("return",r.data);case 8:t.prev=8,t.t0=t.catch(1),Object(o.b)(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t,e){return l.apply(this,arguments)})},{key:"_addAttributes",value:function(t){var e=Object(r.a)();if(t.shared=t.owner!==e.user.attributes.username,t.description="",t.annotations&&t.annotations.length>0){var n=t.annotations[0].trim();n&&(t.description=n)}}},{key:"getTrsServers",value:(i=w(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(this.root,"api/trs_consume/servers"),t.prev=1,t.next=4,a.a.get(e);case 4:return n=t.sent,t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(1),Object(o.b)(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return i.apply(this,arguments)})},{key:"getTrsTool",value:(n=w(regeneratorRuntime.mark((function t(e,n){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=btoa(n),i="".concat(this.root,"api/trs_consume/").concat(e,"/tools/").concat(n,"?tool_id_b64_encoded=true"),t.prev=2,t.next=5,a.a.get(i);case 5:return r=t.sent,t.abrupt("return",r.data);case 9:t.prev=9,t.t0=t.catch(2),Object(o.b)(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(t,e){return n.apply(this,arguments)})},{key:"importTrsTool",value:(e=w(regeneratorRuntime.mark((function t(e,n,i){var r,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={archive_source:"trs_tool",trs_server:e,trs_tool_id:n,trs_version_id:i},s="".concat(this.root,"api/workflows"),t.prev=2,t.next=5,a.a.post(s,r);case 5:return l=t.sent,t.abrupt("return",l.data);case 9:t.prev=9,t.t0=t.catch(2),Object(o.b)(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(t,n,i){return e.apply(this,arguments)})}]),t}(),C=function(){function t(e){var n=e.debounceInterval,i=void 0===n?1e3:n;k(this,t),this.debounceInterval=i,this._searchText=new l.a,this._trsServer=null}return S(t,[{key:"searchResults",get:function(){var t=this;return this._searchText.pipe(Object(d.a)(this.debounceInterval),Object(u.a)((function(e){return[e,new c.a((function(n){return new y(n,"".concat(Object(s.getAppRoot)(),"api/trs_search?query=").concat(e,"&trs_server=").concat(t._trsServer))}))]})))}},{key:"searchQuery",set:function(t){this._searchText.next(t)}},{key:"trsServer",set:function(t){this._trsServer=t}}]),t}()},,,function(t,e,n){"use strict";var i,a=n(0),r=n.n(a),o=n(1),s=n(141),l=n(198),c=n(11),d=n(2),u=n.n(d),h=s.a.DatasetListItemEdit,f=h.extend({className:"".concat(h.prototype.className," history-content"),_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):this.model.has("rerunnable")?r.a.when():this.model.fetch({silent:!0,data:{keys:["rerunnable","creating_job"].join(",")}})},events:o.default.extend(o.default.clone(h.prototype.events),{"click .unhide-link":function(t){return this.model.unhide(),!1}}),toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"HDAListItemEdit(".concat(t,")")}});f.prototype.templates=(i=o.default.extend({},h.prototype.templates.warnings,{hidden:c.a.wrapTemplate(["<% if( !dataset.visible ){ %>",'<div class="hidden-msg warningmessagesmall">',u()("This dataset has been hidden"),'<br /><a class="unhide-link" a href="javascript:void(0);">',u()("Unhide it"),"</a>","</div>","<% } %>"],"dataset")}),o.default.extend({},h.prototype.templates,{titleBar:l.a.HDAListItemView.prototype.templates.titleBar,warnings:i})),e.a={HDAListItemEdit:f}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(7),a=n.n(i),r=n(21);function o(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function s(t){o(r,i,a,s,l,"next",t)}function l(t){o(r,i,a,s,l,"throw",t)}s(void 0)}))}}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=e.root}var e,n,i,o,c,d,u,h,f;return e=t,(n=[{key:"getDatasets",value:(f=s(regeneratorRuntime.mark((function t(){var e,n,i,r,o,s,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},n="",e.sortBy&&(i=e.sortDesc?"-dsc":"-asc",n+="order=".concat(e.sortBy).concat(i,"&")),e.limit&&(n+="limit=".concat(e.limit,"&")),e.offset&&(n+="offset=".concat(e.offset,"&")),e.query&&(n+="q=name-contains&qv=".concat(e.query,"&")),r="".concat(this.root,"api/datasets?").concat(n),t.prev=7,t.next=10,a.a.get(r);case 10:return o=t.sent,s=o.data,t.abrupt("return",s);case 15:t.prev=15,t.t0=t.catch(7),this._errorMessage(t.t0);case 18:case"end":return t.stop()}}),t,this,[[7,15]])}))),function(){return f.apply(this,arguments)})},{key:"copyDataset",value:(h=s(regeneratorRuntime.mark((function t(e,n){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(this.root,"api/histories/").concat(n,"/contents"),t.prev=1,t.next=4,a.a.post(i,{type:"dataset",source:"hda",content:e});case 4:return r=t.sent,t.abrupt("return",r.data);case 8:t.prev=8,t.t0=t.catch(1),this._errorMessage(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t,e){return h.apply(this,arguments)})},{key:"setHistory",value:(u=s(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(this.root,"history/set_as_current?id=").concat(e),t.prev=1,t.next=4,a.a.get(n);case 4:return i=t.sent,t.abrupt("return",i.data);case 8:t.prev=8,t.t0=t.catch(1),this._errorMessage(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t){return u.apply(this,arguments)})},{key:"updateTags",value:(d=s(regeneratorRuntime.mark((function t(e,n,i){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(this.root,"api/tags"),t.prev=1,t.next=4,a.a.put(r,{item_id:e,item_class:n,item_tags:i});case 4:return o=t.sent,t.abrupt("return",o.data);case 8:t.prev=8,t.t0=t.catch(1),this._errorMessage(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t,e,n){return d.apply(this,arguments)})},{key:"getCompositeDatasetContentFiles",value:(c=s(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(this.root,"api/histories/").concat(e,"/contents/").concat(e,"/extra_files"),t.prev=1,t.next=4,a.a.get(n);case 4:return i=t.sent,t.abrupt("return",i.data);case 8:t.prev=8,t.t0=t.catch(1),Object(r.b)(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t){return c.apply(this,arguments)})},{key:"getCompositeDatasetLink",value:function(t,e){return"".concat(this.root,"api/histories/").concat(t,"/contents/").concat(t,"/display?filename=").concat(e)}},{key:"getCompositeDatasetInfo",value:(o=s(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(this.root,"api/histories/").concat(e,"/contents/").concat(e),t.prev=1,t.next=4,a.a.get(n);case 4:return i=t.sent,t.abrupt("return",i.data);case 8:t.prev=8,t.t0=t.catch(1),Object(r.b)(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t){return o.apply(this,arguments)})},{key:"_errorMessage",value:function(t){var e="Request failed.";throw t.response&&(e=t.response.data.err_msg||"".concat(t.response.statusText," (").concat(t.response.status,")")),e}}])&&l(e.prototype,n),i&&l(e,i),t}()},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o).a.View.extend({initialize:function(t,e){var n=this;this.$button=t,this.$button.length||(this.$button=a()("<div/>")),this.options=e||[],this.$button.data("popupmenu",this),this.$button.click((function(t){return a()(".popmenu-wrapper").remove(),n._renderAndShow(t),!1}))},_renderAndShow:function(t){this.render(),this.$el.appendTo("body").css(this._getShownPosition(t)).show(),this._setUpCloseBehavior()},render:function(){var t=this;return this.$el.addClass("popmenu-wrapper").hide().css({position:"absolute"}).html(this.template(this.$button.attr("id"),this.options)),this.options.length&&this.$(".popupmenu-option").each((function(e,n){var i=t.options[e];i.func&&a()(n).click((function(e){i.func.call(t,e,i),e.preventDefault()}))})),this},template:function(t,e){return'<div id="'.concat(t,'-menu" class="dropdown-menu">\n                    ').concat(this._templateOptions(e),"\n                </div>")},_templateOptions:function(t){return t.length?r.default.map(t,(function(t){if(t.divider)return'<div class="popupmenu-option dropdown-divider"/>';if(t.header)return'<div class="popupmenu-option dropdown-header">'.concat(t.html,"</div>");var e=t.href||"javascript:void(0);",n=t.target?'target="'.concat(t.target,'"'):"",i=t.checked?'<span class="fa fa-check mr-1"/>':"";return'<a class="popupmenu-option dropdown-item" href="'.concat(e,'" ').concat(n,">").concat(i).concat(t.html,"</a>")})).join(""):'<div class="dropdown-header">(no options)</div>'},_getShownPosition:function(t){var e=this.$el.width(),n=t.pageX-e/2;return n=Math.min(n,a()(document).scrollLeft()+a()(window).width()-e-5),n=Math.max(n,a()(document).scrollLeft()+5),{top:t.pageY,left:n}},_setUpCloseBehavior:function(){var t=this,e=function(e){if(!e.target.classList.contains("dropdown-header")){a()(document).off("click.close_popup");try{window&&window.parent!==window?a()(window.parent.document).off("click.close_popup"):a()("iframe#galaxy_main").contents().off("click.close_popup")}catch(t){t instanceof DOMException?console.debug("Error clearing parent popups, likely cross-origin frame access from the toolshed and not problematic."):console.debug(t)}t.remove()}};a()("html").on("click.close_popup",e);try{window&&window.parent!==window?a()(window.parent.document).find("html").on("click.close_popup",e):a()("iframe#galaxy_main").contents().on("click.close_popup",e)}catch(t){t instanceof DOMException?console.debug("Error clearing parent popups, likely cross-origin frame access from the toolshed and not problematic."):console.debug(t)}},addItem:function(t,e){return e=e>=0?e:this.options.length,this.options.splice(e,0,t),this},removeItem:function(t){return t>=0&&this.options.splice(t,1),this},findIndexByHtml:function(t){for(var e=0;e<this.options.length;e++)if(r.default.has(this.options[e],"html")&&this.options[e].html===t)return e;return null},findItemByHtml:function(t){return this.options[this.findIndexByHtml(t)]},toString:function(){return"PopupMenu"}});s.create=function(t,e){return new s(t,e)},e.a=s},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=o.a.View.extend({initialize:function(t){this.collection=new o.a.Collection,this.model=t&&t.model||new o.a.Model({onchange:null,visible:!0}).set(t),this.setElement(a()(this._template())),this.$nav=this.$(".tab-navigation"),this.$content=this.$(".tab-content"),this.$el.on("click",(function(){a()(".tooltip").hide()})),this.render(),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"add",this._add,this),this.listenTo(this.collection,"remove",this._remove,this),this.listenTo(this.collection,"change",this._change,this),this.listenTo(this.collection,"reset",this._reset,this),this.listenTo(this.collection,"add remove reset",this.render,this)},render:function(){var t=this.model.get("current");(t=this.$("#".concat(t)).length>0?t:this.first())&&(this.$nav.find(".nav-link.active").removeClass("active"),this.$content.children().removeClass("active"),this.$("#tab-".concat(t," .nav-link")).addClass("active"),this.$("#".concat(t)).addClass("active")),this.$el[this.model.get("visible")?"fadeIn":"fadeOut"]("fast"),this.$nav[this.size()>1?"show":"hide"]()},current:function(){return this.model.get("current")},show:function(t){t&&(this.model.set({current:t,visible:!0}),this.model.get("onchange")&&this.model.get("onchange")(t))},hide:function(){this.model.set("visible",!1)},first:function(){var t=this.collection.first();return t&&t.id},size:function(){return this.collection.length},add:function(t){this.collection.add(t)},del:function(t){this.collection.remove(t)},delAll:function(){this.collection.reset()},showTab:function(t){this.collection.get(t).set("hidden",!1)},hideTab:function(t){this.collection.get(t).set("hidden",!0)},_add:function(t){var e=this,n=t.attributes;this.$content.append(a()("<div/>").attr("id",n.id).addClass("tab-pane").append(n.$el)),this.$nav.append(a()(this._template_tab(n)).show().tooltip({title:n.tooltip||"",placement:"bottom",container:e.$el}).on("click",(function(t){t.preventDefault(),e.show(n.id)}))),1==this.size()&&this.show(n.id)},_remove:function(t){this.$("#tab-".concat(t.id)).remove(),this.$("#".concat(t.id)).remove()},_reset:function(){this.$nav.empty(),this.$content.empty()},_change:function(t){this.$("#tab-".concat(t.id))[t.get("hidden")?"hide":"show"]()},_template:function(){return a()("<div/>").addClass("tabbable tabs-left").append(a()("<ul/>").attr("style","display: flex").addClass("tab-navigation nav nav-tabs")).append(a()("<div/>").addClass("tab-content"))},_template_tab:function(t){var e=a()("<li/>").addClass("nav-item").attr("id","tab-".concat(t.id)).append(a()("<a/>").addClass("nav-link").attr("id","tab-title-link-".concat(t.id)).attr("href","javascript:void(0);")),n=e.find("a");return t.icon&&n.append(a()("<i/>").addClass("fa").addClass(t.icon)),t.title&&n.append(a()("<span/>").attr("id","tab-title-text-".concat(t.id)).addClass("tab-title-text ml-1").append(t.title)),e}});e.a={View:s}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(10),l=n(6);e.a=o.a.Model.extend({initialize:function(){this.active={},this.last=null},execute:function(t){var e=this,n=s.b.uid(),i=t.length>0,r=Object(l.a)();this.active[n]=!0;var o=a.a.Deferred();o.promise().always((function(){delete e.active[n],i&&r.emit.debug("deferred::execute()","".concat(this.state().charAt(0).toUpperCase()+this.state().slice(1)," ").concat(n))})),a.a.when(this.last).always((function(){e.active[n]?(i&&r.emit.debug("deferred::execute()","Running ".concat(n)),t(o),!i&&o.resolve()):o.reject()})),this.last=o.promise()},reset:function(){var t=Object(l.a)();for(var e in t.emit.debug("deferred::execute()","Reset"),this.active)this.active[e]=!1},ready:function(){return a.a.isEmptyObject(this.active)}})},function(t,e,n){"use strict";n.d(e,"b",(function(){return mt})),n.d(e,"a",(function(){return yt}));var i=n(264),a=n(231),r=n(4),o=n.n(r),s=n(79),l=n(169),c=n(2),d=n.n(c),u=n(1),h=n(0),f=n.n(h),p=n(6),m=n(10),_=o.a.View.extend({options:{class_check:"fa-check-square-o",class_uncheck:"fa-square-o",parameters:[{id:"space_to_tab",title:"Convert spaces to tabs"},{id:"to_posix_lines",title:"Use POSIX standard"}]},initialize:function(t){this.model=t.model,this.setElement(f()("<div/>").addClass("upload-settings")),this.$el.append(f()("<div/>").addClass("upload-settings-cover")),this.$el.append(f()("<table/>").addClass("upload-settings-table grid").append("<tbody/>")),this.$cover=this.$(".upload-settings-cover"),this.$table=this.$(".upload-settings-table > tbody"),this.listenTo(this.model,"change",this.render,this),this.model.trigger("change")},render:function(){var t=this;this.$table.empty(),u.default.each(this.options.parameters,(function(e){var n=f()("<div/>").addClass("upload-".concat(e.id," fa")).addClass(t.model.get(e.id)&&t.options.class_check||t.options.class_uncheck),i=f()("<tr/>").append(f()("<td/>").append(n)).append(f()("<td/>").append(e.title)).on("click",(function(){t.model.get("enabled")&&t.model.set(e.id,!t.model.get(e.id))}));t.$table.append(i)})),this.$cover[this.model.get("enabled")?"hide":"show"]()}}),g=o.a.View.extend({initialize:function(t){this.model=new o.a.Model({cls:"upload-ftp",class_add:"upload-icon-button fa fa-square-o",class_remove:"upload-icon-button fa fa-check-square-o",class_partial:"upload-icon-button fa fa-minus-square-o",help_enabled:!0,oidc_text:"<br/>If you are signed-in to Galaxy using a third-party identity and you <strong>do not have a Galaxy password</strong> please use the reset password option in the login form with your email to create a password for your account.",help_text:"This Galaxy server allows you to upload files via FTP. To upload some files, log in to the FTP server at <strong>".concat(t.ftp_upload_site,'</strong> using your Galaxy credentials.\n            For help visit the <a href="https://galaxyproject.org/ftp-upload/" target="_blank">tutorial</a>.'),collection:null,onchange:function(){},onadd:function(){},onremove:function(){}}).set(t),this.collection=this.model.get("collection"),Object(p.a)().config.enable_oidc&&this.model.set("help_text",this.model.get("help_text")+this.model.get("oidc_text")),this.setElement(this._template()),this.$content=this.$(".upload-ftp-content"),this.$wait=this.$(".upload-ftp-wait"),this.$help=this.$(".upload-ftp-help"),this.$number=this.$(".upload-ftp-number"),this.$disk=this.$(".upload-ftp-disk"),this.$body=this.$(".upload-ftp-body"),this.$warning=this.$(".upload-ftp-warning"),this.$select=this.$(".upload-ftp-select-all"),this.render()},render:function(){var t=this;this.$wait.show(),this.$content.hide(),this.$warning.hide(),this.$help.hide(),s.a.getRemoteFiles((function(e){t.model.set("ftp_files",e),t._index(),t._renderTable()}),(function(){t._renderTable()}))},_renderTable:function(){var t=this,e=this.model.get("ftp_files");if(this.rows=[],e&&e.length>0){this.$body.empty();var n=0;u.default.each(e,(function(e){t.rows.push(t._renderRow(e)),n+=e.size})),this.$number.html("".concat(e.length," files")),this.$disk.html(m.b.bytesToString(n,!0)),this.collection&&(this.$("._has_collection").show(),this.$select.addClass(this.model.get("class_add")).off().on("click",(function(){t._all()})),this._refresh()),this.$content.show()}else this.$warning.show();this.model.get("help_enabled")&&this.$help.show(),this.$wait.hide()},_renderRow:function(t){var e=this,n=this.model.attributes,i=f()(this._templateRow(t)),a=i.find(".icon");if(this.$body.append(i),this.collection){var r=this.ftp_index[t.path];a.addClass(void 0===r?n.class_add:n.class_remove),i.on("click",(function(){e._switch(a,t),e._refresh()}))}else i.on("click",(function(){n.onchange(t)}));return a},_index:function(){var t=this;this.ftp_index={},this.collection&&this.collection.each((function(e){"ftp"==e.get("file_mode")&&(t.ftp_index[e.get("file_path")]=e.id)}))},_all:function(){var t=this.model.attributes,e=this.model.get("ftp_files"),n=this.$select.hasClass(t.class_add);for(var i in e){var a=e[i],r=this.ftp_index[a.path];(void 0===r&&n||void 0!==r&&!n)&&this._switch(this.rows[i],a)}this._refresh()},_switch:function(t,e){t.removeClass();var n=this.model.attributes,i=this.ftp_index[e.path];if(void 0===i){var a=n.onadd(e);t.addClass(n.class_remove),this.ftp_index[e.path]=a}else n.onremove(i),t.addClass(n.class_add),this.ftp_index[e.path]=void 0},_refresh:function(){var t=u.default.reduce(this.ftp_index,(function(t,e){return void 0!==e&&t++,t}),0);this.$select.removeClass(),0==t?this.$select.addClass(this.model.get("class_add")):this.$select.addClass(t==this.rows.length?this.model.get("class_remove"):this.model.get("class_partial"))},_templateRow:function(t){return'<tr class="upload-ftp-row">\n                    <td class="_has_collection" style="display: none;">\n                        <div class="icon"/>\n                    </td>\n                    <td class="ftp-name">'.concat(u.default.escape(t.path),'</td>\n                    <td class="ftp-size">').concat(m.b.bytesToString(t.size),'</td>\n                    <td class="ftp-time">').concat(t.ctime,"</td>\n                </tr>")},_template:function(){return'<div class="'.concat(this.model.get("cls"),'">\n                    <div class="upload-ftp-wait fa fa-spinner fa-spin"/>\n                    <div class="upload-ftp-help">').concat(this.model.get("help_text"),'</div>\n                    <div class="upload-ftp-content">\n                        <span style="whitespace: nowrap; float: left;">Available files: </span>\n                        <span style="whitespace: nowrap; float: right;">\n                            <span class="upload-icon fa fa-file-text-o"/>\n                            <span class="upload-ftp-number"/>\n                            <span class="upload-icon fa fa-hdd-o"/>\n                            <span class="upload-ftp-disk"/>\n                        </span>\n                        <table class="grid" style="float: left;">\n                            <thead>\n                                <tr>\n                                    <th class="_has_collection" style="display: none;">\n                                        <div class="upload-ftp-select-all">\n                                    </th>\n                                    <th>Name</th>\n                                    <th>Size</th>\n                                    <th>Created</th>\n                                </tr>\n                            </thead>\n                            <tbody class="upload-ftp-body"/>\n                        </table>\n                    </div>\n                    <div class="upload-ftp-warning warningmessage">Your FTP directory does not contain any files.</div>\n                </div>')}}),v=o.a.View.extend({initialize:function(t){this.options=u.default.defaults(t||{},{title:null,placement:"top",container:"body"}),this.uid=m.b.uid(),this.$target=this.options.container},show:function(t){var e=this;f()(this.$target).popover({title:"".concat(this.options.title," ").concat("<i class='popover-close fa fa-times-circle'/>"),placement:this.options.placement,content:t,html:!0,trigger:"manual"}),this.options.class&&f()(this.$target).addClass(this.options.class),f()(this.$target).popover("show");var n=this,i=f()(this.$target.data("bs.popover").tip);i.find(".popover-header > i").on("click",(function(){return e.hide()})),f()("body").on("mousedown.".concat(this.uid),(function(t){f()(i).is(t.target)||0!==f()(i).has(t.target).length||n.hide()}))},hide:function(){f()(this.$target).popover("dispose"),f()("body").off("mousedown.".concat(this.uid))}}),y=n(19),b=n(3);!function(t){f.a.event.props.push("dataTransfer");var e=function(e){var n=t.extend({error_default:"Please make sure the file is available.",error_server:"Upload request failed.",error_login:"Uploads require you to log in.",error_retry:"Waiting for server to resume..."},e);console.debug(n);var i=new XMLHttpRequest;i.open("POST",n.url,!0),i.setRequestHeader("Cache-Control","no-cache"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Accept","application/json"),i.onreadystatechange=function(){if(i.readyState==i.DONE)if(-1!==[502,0].indexOf(i.status)&&n.warning)n.warning(n.error_retry);else if(i.status<200||i.status>299){var t=i.statusText;403==i.status?t=n.error_login:0==i.status?t=n.error_server:t||(t=n.error_default),n.error("".concat(t," (").concat(i.status,")"))}else{var e=null;if(i.responseText)try{e=f.a.parseJSON(i.responseText)}catch(t){e=i.responseText}n.success(e)}},i.upload.addEventListener("progress",n.progress,!1),i.send(n.data)};t.uploadchunk=function(n){var i=t.extend({},{data:{},success:function(){},error:function(){},warning:function(){},progress:function(){},attempts:7e4,timeout:5e3,url:null,error_file:"File not provided.",error_attempt:"Maximum number of attempts reached.",error_tool:"Tool submission failed."},n),a=i.data;if(a.error_message)i.error(a.error_message);else{var r=a.files&&a.files[0];if(r){var o=r.file,s=i.attempts,l="".concat(i.session.id,"-").concat((new Date).valueOf(),"-").concat(o.size),c=i.session.chunk_upload_size;console.debug("Starting chunked uploads [size=".concat(c,"].")),function n(r){r=r||0;var d=o.mozSlice||o.webkitSlice||o.slice;if(d){var u=Math.min(r+c,o.size),h=o.size;console.debug("Submitting chunk at ".concat(r," bytes..."));var f=new FormData;f.append("session_id",l),f.append("session_start",r),f.append("session_chunk",d.bind(o)(r,u)),e({url:"".concat(Object(b.getAppRoot)(),"api/uploads"),data:f,success:function(e){var d=r+c;d<h?(s=i.attempts,n(d)):(console.debug("Upload completed."),a.payload.inputs=JSON.parse(a.payload.inputs),a.payload.inputs["files_0|file_data"]={session_id:l,name:o.name},a.payload.inputs=JSON.stringify(a.payload.inputs),t.ajax({url:"".concat(Object(b.getAppRoot)(),"api/tools"),method:"POST",data:a.payload,success:function(t){i.success(t)},error:function(t){var e=t&&t.responseJSON&&t.responseJSON.err_msg;i.error(e||i.error_tool)}}))},warning:function(t){--s>0?(console.debug("Retrying last chunk..."),i.warning(t),setTimeout((function(){return n(r)}),i.timeout)):(console.debug(i.error_attempt),i.error(i.error_attempt))},error:function(t){console.debug(t),i.error(t)},progress:function(t){t.lengthComputable&&i.progress(Math.min(Math.round(100*(r+t.loaded)/o.size),100))}})}else i.error("Browser does not support chunked uploads.")}()}else i.error(i.error_file)}},t.uploadpost=function(n){var i=t.extend({},{data:{},success:function(){},error:function(){},progress:function(){},url:null,maxfilesize:2147483648,error_filesize:"File exceeds 2GB. Please use a FTP client."},n),a=i.data;if(a.error_message)i.error(a.error_message);else{var r=new FormData;for(var o in a.payload)r.append(o,a.payload[o]);var s=0;for(var l in a.files){var c=a.files[l];r.append(c.name,c.file,c.file.name),s+=c.file.size}s>i.maxfilesize?i.error(i.error_filesize):e({url:i.url,data:r,success:i.success,error:i.error,progress:function(t){t.lengthComputable&&i.progress(Math.round(100*t.loaded/t.total))}})}},t.fn.uploadinput=function(e){var n=t.extend({},{ondragover:function(){},ondragleave:function(){},onchange:function(){},multiple:!1},e),i=t('<input type="file" style="display: none" '.concat(n.multiple?"multiple":"","/>"));this.append(i.change((function(t){n.onchange(t.target.files),t.target.value=null})));var a=this.get(0);return a.addEventListener("drop",(function(t){n.ondragleave(t),t.dataTransfer&&(n.onchange(t.dataTransfer.files),t.preventDefault())})),a.addEventListener("dragover",(function(t){t.preventDefault(),n.ondragover(t)})),a.addEventListener("dragleave",(function(t){t.stopPropagation(),n.ondragleave(t)})),{dialog:function(){i.trigger("click")}}},t.fn.uploadbox=function(e){var n=t.extend({},{dragover:function(){},dragleave:function(){},announce:function(t){},initialize:function(t){},progress:function(t,e){},success:function(t,e){},warning:function(t,e){},error:function(t,e){alert(e)},complete:function(){},multiple:!0},e),i={},a=null,r=0,o=0,s=!1,l=!1,c=t(this).uploadinput({multiple:n.multiple,onchange:function(t){u.default.each(t,(function(t){t.chunk_mode=!0})),d(t)},ondragover:e.ondragover,ondragleave:e.ondragleave});function d(t){if(t&&t.length&&!s){var e=void 0;return u.default.each(t,(function(t,e){"new"!==t.mode&&u.default.filter(i,(function(e){return e.name===t.name&&e.size===t.size})).length&&(t.duplicate=!0)})),u.default.each(t,(function(t){t.duplicate||(e=String(r++),i[e]=t,n.announce(e,i[e]),o++)})),e}}function h(t){i[t]&&(delete i[t],o--)}return{select:function(){c.dialog()},add:d,remove:h,start:function(e){a=e,s||(s=!0,function e(){if(0==o||l)return l=!1,s=!1,void n.complete();s=!0;var r=-1;for(var c in i){r=c;break}var d=i[r];h(r);var u=t.uploadpost;d.chunk_mode&&a&&a.id&&a.chunk_upload_size&&a.chunk_upload_size>0&&(u=t.uploadchunk),u({url:n.url,data:n.initialize(r),session:a,success:function(t){n.success(r,t),e()},warning:function(t){n.warning(r,t)},error:function(t){n.error(r,t),e()},progress:function(t){n.progress(r,t)}})}())},stop:function(){l=!0},reset:function(t){for(t in i)h(t)},configure:function(e){return n=t.extend({},n,e)},compatible:function(){return window.File&&window.FormData&&window.XMLHttpRequest&&window.FileList}}}}(f.a);var w=o.a.View.extend({status_classes:{init:"upload-mode fa fa-exclamation text-primary",ready:"upload-mode fa fa-check text-success",running:"upload-mode fa fa-spinner fa-spin",success:"upload-mode fa fa-check",error:"upload-mode fa fa-exclamation-triangle"},initialize:function(t,e){var n=this;this.app=t,this.model=e.model,this.setElement(this._template()),this.$source=this.$(".upload-source"),this.$settings=this.$(".upload-settings"),this.$status=this.$(".upload-status"),this.$text=this.$(".upload-text"),this.$text_content=this.$(".upload-text-content"),this.$info_text=this.$(".upload-info-text"),this.$info_progress=this.$(".upload-info-progress"),this.$file_name=this.$(".upload-file-name"),this.$file_desc=this.$(".upload-file-desc"),this.$file_size=this.$(".upload-file-size"),this.$progress_bar=this.$(".upload-progress-bar"),this.$percentage=this.$(".upload-percentage"),this.uploadinput=this.$el.uploadinput({ondragover:function(){n.model.get("enabled")&&n.$el.addClass("alert-success")},ondragleave:function(){n.$el.removeClass("alert-success")},onchange:function(t){"running"!=n.model.get("status")&&t&&t.length>0&&(n.model.reset({file_data:t[0],file_name:t[0].name,file_size:t[0].size,file_mode:t[0].mode||"local"}),n._refreshReady())}}),this.button_menu=new y.a.ButtonMenu({icon:"fa-caret-down",title:d()("Select"),pull:"left"}),this.$source.append(this.button_menu.$el),this.button_menu.addMenu({icon:"fa-laptop",title:d()("Choose local file"),onclick:function(){n.uploadinput.dialog()}}),this.app.ftpUploadSite&&this.button_menu.addMenu({icon:"fa-folder-open-o",title:d()("Choose FTP file"),onclick:function(){n._showFtp()}}),this.button_menu.addMenu({icon:"fa-edit",title:"Paste/Fetch data",onclick:function(){n.model.reset({file_mode:"new",file_name:"New File"})}}),this.ftp=new v({title:"Select a file",container:this.$source.find(".dropdown"),placement:"right"}),this.settings=new v({title:d()("Upload configuration"),container:this.$settings,placement:"bottom"}),this.$text_content.on("change input",(function(t){n.model.set({url_paste:f()(t.target).val(),file_size:f()(t.target).val().length}),n._refreshReady()})),this.$settings.on("click",(function(t){n._showSettings()})).on("mousedown",(function(t){t.preventDefault()})),this.listenTo(this.model,"change:percentage",(function(){n._refreshPercentage()})),this.listenTo(this.model,"change:status",(function(){n._refreshStatus()})),this.listenTo(this.model,"change:info",(function(){n._refreshInfo()})),this.listenTo(this.model,"change:file_name",(function(){n._refreshFileName()})),this.listenTo(this.model,"change:file_mode",(function(){n._refreshMode()})),this.listenTo(this.model,"change:file_size",(function(){n._refreshFileSize()})),this.listenTo(this.model,"remove",(function(){n.remove()})),this.app.collection.on("reset",(function(){n.remove()}))},render:function(){this.$el.attr("id","upload-row-".concat(this.model.id)),this.$file_name.html(u.default.escape(this.model.get("file_name")||"-")),this.$file_desc.html(this.model.get("file_desc")||"Unavailable"),this.$file_size.html(m.b.bytesToString(this.model.get("file_size"))),this.$status.removeClass().addClass(this.status_classes.init)},remove:function(){o.a.View.prototype.remove.apply(this)},_refreshReady:function(){this.app.collection.each((function(t){t.set("status",t.get("file_size")>0?"ready":"init")}))},_refreshMode:function(){"new"==this.model.get("file_mode")?(this.height=this.$el.height(),this.$text.css({width:"".concat(this.$el.width()-16,"px"),top:"".concat(this.$el.height()-8,"px")}).show(),this.$el.height(this.$el.height()-8+this.$text.height()+16),this.$text_content.val("").trigger("keyup")):(this.$el.height(this.height),this.$text.hide())},_refreshInfo:function(){var t=this.model.get("info");t?this.$info_text.html("<strong>Failed: </strong>".concat(t)).show():this.$info_text.hide()},_refreshPercentage:function(){var t=parseInt(this.model.get("percentage"));0!=t?this.$progress_bar.css({width:"".concat(t,"%")}):(this.$progress_bar.addClass("no-transition"),this.$progress_bar.css({width:"0%"}),this.$progress_bar[0].offsetHeight,this.$progress_bar.removeClass("no-transition")),this.$percentage.html(100!=t?"".concat(t,"%"):"Adding to history...")},_refreshStatus:function(){var t=this.model.get("status");this.$status.removeClass().addClass(this.status_classes[t]),this.model.set("enabled","running"!=t),this.$text_content.attr("disabled",!this.model.get("enabled")),this.$el.removeClass("table-success table-danger table-warning"),"running"!=t&&"ready"!=t||this.model.set("percentage",0),this.$source.find(".button")["running"==t?"addClass":"removeClass"]("disabled"),"success"==t&&(this.$el.addClass("table-success"),this.model.set("percentage",100),this.$percentage.html("100%")),"error"==t?(this.$el.addClass("table-danger"),this.model.set("percentage",0),this.$info_progress.hide(),this.$info_text.show()):(this.$info_progress.show(),this.$info_text.hide())},_refreshFileName:function(){this.$file_name.html(this.model.get("file_name")||"-")},_refreshFileSize:function(){this.$file_size.html(m.b.bytesToString(this.model.get("file_size")))},_showFtp:function(){var t=this;this.ftp.show(new g({ftp_upload_site:this.app.ftpUploadSite,onchange:function(e){t.ftp.hide(),"running"!=t.model.get("status")&&e&&(t.model.reset({file_mode:"ftp",file_name:e.path,file_size:e.size,file_path:e.path}),t._refreshReady())}}).$el)},_showSettings:function(){this.settings.show(new _(this).$el)},_template:function(){return'<tr class="upload-row">\n                <td>\n                    <div class="upload-source"/>\n                    <div class="upload-text-column">\n                        <div class="upload-text">\n                            <div class="upload-text-info">Download data from the web by entering a URL (one per line) or directly paste content.</div>\n                            <textarea class="upload-text-content form-control"/>\n                        </div>\n                    </div>\n                </td>\n                <td>\n                    <div class="upload-status"/>\n                </td>\n                <td>\n                    <div class="upload-file-desc upload-title"/>\n                </td>\n                <td>\n                    <div class="upload-file-name upload-title"/>\n                </td>\n                <td>\n                    <div class="upload-file-size upload-size"/>\n                </td>\n                <td>\n                    <div class="upload-settings upload-icon-button fa fa-gear"/>\n                </td>\n                <td>\n                    <div class="upload-info">\n                        <div class="upload-info-text"/>\n                        <div class="upload-info-progress progress">\n                            <div class="upload-progress-bar progress-bar progress-bar-success"/>\n                            <div class="upload-percentage">0%</div>\n                        </div>\n                    </div>\n                </td>\n            </tr>'}}),k=n(420),x=o.a.View.extend({initialize:function(t){this.model=new o.a.Model(t),this.setElement("<div/>"),this.render()},render:function(){var t=this.model.attributes,e=u.default.findWhere(t.list,{id:t.extension});this.extension_popup&&this.extension_popup.remove(),this.extension_popup=new v({title:t.title,placement:t.placement||"bottom",container:t.$el}),this.extension_popup.show(this._templateDescription(e))},_templateDescription:function(t){if(t.description){var e=t.description;return t.description_url&&(e+='&nbsp;(<a href="'.concat(t.description_url,'" target="_blank">read more</a>)')),e}return"There is no description available for this file extension."}}),S=o.a.Model.extend({defaults:{extension:"auto",genome:"?",url_paste:"",status:"init",optional:!1,info:null,file_name:"",file_mode:"",file_size:0,file_type:null,file_path:"",file_data:null,percentage:0,space_to_tab:!1,to_posix_lines:!0,enabled:!0},reset:function(t){this.clear().set(this.defaults).set(t)}}),M={Model:S,Collection:o.a.Collection.extend({model:S})},C={props:{topInfo:{type:String,default:"&nbsp;"},wrapperClass:{type:String,default:"upload-view-default"},highlightBox:{type:Boolean,default:!1}},computed:{hasFooter:function(){return!!this.$slots.footer||!!this.$scopedSlots.footer},boxStyle:function(){return{height:this.hasFooter?"300px":"335px"}}}},T=n(5),j=Object(T.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapperClass},[n("div",{staticClass:"upload-top"},[n("div",{staticClass:"upload-top-info",domProps:{innerHTML:t._s(t.topInfo)}})]),t._v(" "),n("div",{ref:"uploadBox",staticClass:"upload-box",class:{highlight:t.highlightBox},style:t.boxStyle},[t._t("default")],2),t._v(" "),t.hasFooter?n("div",{staticClass:"upload-footer"},[t._t("footer")],2):n("div",{staticClass:"clear"}),t._v(" "),n("div",{staticClass:"upload-buttons"},[t._t("buttons")],2)])}),[],!1,null,null,null).exports,O=o.a.View.extend({initialize:function(t){this.$container=t.$container,this.collection=t.collection,this.new_content=t.new_content,this.max=t.max||50,this.content_list={},this.$message=f()("<div/>").addClass("ui-limitloader").append("...only the first ".concat(this.max," entries are visible.")).hide(),this.$container.append(this.$message),this.listenTo(this.collection,"reset",this._reset,this),this.listenTo(this.collection,"add",this._refresh,this),this.listenTo(this.collection,"remove",this._remove,this)},_done:function(){var t=u.default.size(this.content_list)>=this.max;return this.$message[t?"show":"hide"](),t},_reset:function(){u.default.each(this.content_list,(function(t){t.remove()})),this.content_list={},this.$message.hide()},_remove:function(t){var e=t.id,n=this.content_list[e];n&&(n.remove(),delete this.content_list[e]),this._refresh()},_refresh:function(){if(!this._done())for(var t in this.collection.models){var e=this.collection.models[t];if(!this.content_list[e.id]&&(this.content_list[e.id]=this.new_content(e),this._done()))break}}});var L=n(64),D=d.a,A={components:{UploadWrapper:j,Select2:k.a},props:{app:{type:Object,required:!0},lazyLoadMax:{type:Number,default:null},selectable:{type:Boolean,default:!1},hasCallback:{type:Boolean,default:!1}},computed:{btnFilesTitle:function(){return this.fileSourcesConfigured?D("Choose remote files"):D("Choose FTP files")},remoteFiles:function(){return!!this.fileSourcesConfigured||!!this.ftpUploadSite},btnCloseTitle:function(){return this.hasCallback?"Cancel":"Close"}},methods:{$uploadBox:function(){return f()(this.$refs.wrapper.$refs.uploadBox)},initUploadbox:function(t){var e=this,n=this.$uploadBox();if(this.uploadbox=n.uploadbox(t),null!==this.lazyLoadMax){var i=this.$uploadBox();this.loader=new O({$container:i,collection:this.collection,max:this.lazyLoadMax,new_content:function(t){return e.renderNewModel(t)}})}},uploadSelect:function(){this.uploadbox.select()},_uploadFtp:function(){var t=this,e=[];this.collection.each((function(n){"queued"==n.get("status")&&"ftp"==n.get("file_mode")&&(t.uploadbox.remove(n.id),e.push(n))})),e.length>0&&f.a.uploadpost({data:this.app.toData(e),url:this.app.uploadPath,success:function(n){e.forEach((function(e){t._eventSuccess(e.id,n)}))},error:function(t){e.forEach((function(e){self._eventError(e.id,t)}))}})},renderNewModel:function(t){var e=new this.rowUploadModel(this,{model:t});return this.$uploadTable().find("tbody:first").append(e.$el),this._updateStateForCounters(),this.$nextTick((function(){e.render()})),e},_updateStateForCounters:function(){this.setTopInfoBasedOnCounters();var t=this.counterAnnounce+this.counterSuccess+this.counterError;this.enableReset=0==this.counterRunning&&t>0,this.enableStart=0==this.counterRunning&&this.counterAnnounce>0,this.enableBuild=0==this.counterRunning&&0==this.counterAnnounce&&this.counterSuccess>0&&0==this.counterError,this.enableSources=0==this.counterRunning&&(this.multiple||0==t);var e=this.counterAnnounce+this.counterSuccess+this.counterError>0;this.showHelper=!e},setTopInfoBasedOnCounters:function(){var t="";t=0==this.counterAnnounce?this.uploadbox.compatible()?"&nbsp;":"Browser does not support Drag & Drop. Try Firefox 4+, Chrome 7+, IE 10+, Opera 12+ or Safari 6+.":0==this.counterRunning?"You added ".concat(this.counterAnnounce," file(s) to the queue. Add more files or click 'Start' to proceed."):"Please wait...".concat(this.counterAnnounce," out of ").concat(this.counterRunning," remaining."),this.topInfo=t},_eventProgress:function(t,e){var n=this.collection.get(t);n.set("percentage",e),this.appModel.set("percentage",this._uploadPercentage(e,n.get("file_size")))},_uploadPercentage:function(t,e){return(this.uploadCompleted+t*e)/this.uploadSize},_updateStateForSuccess:function(t){this.appModel.set("percentage",this._uploadPercentage(100,t.get("file_size"))),this.uploadCompleted+=100*t.get("file_size"),this.counterAnnounce--,this.counterSuccess++,this._updateStateForCounters(),Object(p.a)().currHistoryPanel.refreshContents()},_eventAnnounce:function(t,e){this.counterAnnounce++;var n=this._newUploadModelProps(t,e),i=new M.Model(n);this.collection.add(i),this.loader?this._updateStateForCounters():this.renderNewModel(i)},_eventError:function(t,e){var n=this.collection.get(t);n.set({percentage:100,status:"error",info:e}),this.appModel.set({percentage:this._uploadPercentage(100,n.get("file_size")),status:"danger"}),this.uploadCompleted+=100*n.get("file_size"),this.counterAnnounce--,this.counterError++,this._updateStateForCounters()},_eventComplete:function(){this.collection.each((function(t){"queued"==t.get("status")&&t.set("status","init")})),this.counterRunning=0,this._updateStateForCounters()},_eventRemove:function(t){var e=t.get("status");"success"==e?this.counterSuccess--:"error"==e?this.counterError--:this.counterAnnounce--,this.uploadbox.remove(t.id),this._updateStateForCounters()},_eventRemoteFiles:function(){var t=this;this.fileSourcesConfigured?Object(L.c)((function(e){t.uploadbox.add(e.map((function(t){return{mode:"ftp",name:t.label,size:t.size,path:t.url}})))}),{multiple:!0}):this.ftp.show(new g({collection:this.collection,ftp_upload_site:this.ftpUploadSite,onadd:function(e){return t.uploadbox.add([{mode:"ftp",name:e.path,size:e.size,path:e.path}])},onremove:function(t){this.collection.remove(t)}}).$el)},_eventCreate:function(){this.uploadbox.add([{name:"New File",size:0,mode:"new"}])},_eventStop:function(){this.counterRunning>0&&(this.appModel.set("status","info"),this.topInfo="Queue will pause after completing the current file...",this.uploadbox.stop())},_eventWarning:function(t,e){this.collection.get(t).set({status:"warning",info:e})},$uploadTable:function(){return f()(this.$refs.uploadTable)},extensionDetails:function(t){return e=this.app.effectiveExtensions,n=t,e.find((function(t){return t.id==n}));var e,n},initExtensionInfo:function(){var t=this;f()(this.$refs.footerExtensionInfo).on("click",(function(e){var n=t.extensionDetails(t.extension);n&&new x({$el:f()(e.target),title:n&&n.text,extension:n&&n.id,list:t.listExtensions,placement:"top"})})).on("mousedown",(function(t){t.preventDefault()}))},initCollection:function(){this.collection=new M.Collection},initAppProperties:function(){this.listExtensions=this.app.effectiveExtensions,this.listGenomes=this.app.listGenomes,this.ftpUploadSite=this.app.currentFtp(),this.fileSourcesConfigured=this.app.fileSourcesConfigured},initFtpPopover:function(){this.ftp=new v({title:d()("FTP files"),class:"ftp-upload",container:f()(this.$refs.btnFtp)})},updateExtension:function(t,e){var n=this;this.collection.each((function(i){"init"!=i.get("status")||i.get("extension")!=n.app.defaultExtension&&e||i.set("extension",t)}))},updateGenome:function(t,e){var n=this;this.collection.each((function(i){"init"!=i.get("status")||i.get("genome")!=n.app.defaultGenome&&e||i.set("genome",t)}))},getUploadedModels:function(){var t=Object(p.a)(),e=[];return this.collection.models.forEach((function(t){e.push.apply(e,t.get("hids"))})),e.map((function(e){return t.currHistoryPanel.collection.getByHid(e)}))}}},E={mixins:[A],data:function(){return{extension:"_select_",genome:this.app.defaultGenome,listExtensions:[],listGenomes:[],running:!1,showHelper:!0,btnResetTitle:d()("Reset"),btnStartTitle:d()("Start"),readyStart:!1}},created:function(){this.initCollection(),this.initAppProperties()},computed:{extensions:function(){var t=u.default.filter(this.listExtensions,(function(t){return t.composite_files}));return t.unshift({id:"_select_",text:"Select"}),t}},mounted:function(){var t=this;this.initExtensionInfo(),this.collection.on("add",(function(e){t._eventAnnounce(e)})),this.collection.on("change add",(function(){t.renderNonReactiveComponents()})),this.renderNonReactiveComponents()},methods:{renderNonReactiveComponents:function(){var t=this.collection.first();t&&"running"==t.get("status")?this.running=!0:this.running=!1,this.collection.where({status:"ready"}).length+this.collection.where({optional:!0}).length==this.collection.length&&this.collection.length>0?this.readyStart=!0:this.readyStart=!1,this.showHelper=0==this.collection.length},_eventAnnounce:function(t){var e=new w(this,{model:t});this.$uploadTable().find("tbody:first").append(e.$el),this.showHelper=0==this.collection.length,e.render()},_eventStart:function(){var t=this;this.collection.each((function(e){e.set({genome:t.genome,extension:t.extension})})),f.a.uploadpost({url:this.app.uploadPath,data:this.app.toData(this.collection.filter()),success:function(e){t._eventSuccess(e)},error:function(e){t._eventError(e)},progress:function(e){t._eventProgress(e)}})},_eventReset:function(){0==this.collection.where({status:"running"}).length&&(this.collection.reset(),this.extension=this.app.defaultExtension,this.genome=this.app.defaultGenome,this.renderNonReactiveComponents())},_eventProgress:function(t){this.collection.each((function(e){e.set("percentage",t)}))},_eventSuccess:function(t){var e=Object(p.a)();this.collection.each((function(t){t.set("status","success")})),e.currHistoryPanel.refreshContents()},_eventError:function(t){this.collection.each((function(e){e.set({status:"error",info:t})}))}},watch:{extension:function(t){var e=this;this.collection.reset();var n=this.extensionDetails(t);n&&n.composite_files&&u.default.each(n.composite_files,(function(t){e.collection.add({id:e.collection.size(),file_desc:t.description||t.name,optional:t.optional})}))}}},I=Object(T.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("upload-wrapper",{attrs:{"wrapper-class":"upload-view-composite"},scopedSlots:t._u([{key:"footer",fn:function(){return[n("span",{staticClass:"upload-footer-title"},[t._v("Composite Type:")]),t._v(" "),n("select2",{ref:"footerExtension",attrs:{"container-class":"upload-footer-extension",enabled:!t.running},model:{value:t.extension,callback:function(e){t.extension=e},expression:"extension"}},t._l(t.extensions,(function(e,i){return n("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.text))])})),0),t._v(" "),n("span",{ref:"footerExtensionInfo",staticClass:"upload-footer-extension-info upload-icon-button fa fa-search"}),t._v(" "),n("span",{staticClass:"upload-footer-title"},[t._v("Genome/Build:")]),t._v(" "),n("select2",{ref:"footerGenome",attrs:{"container-class":"upload-footer-genome",enabled:!t.running},model:{value:t.genome,callback:function(e){t.genome=e},expression:"genome"}},t._l(t.listGenomes,(function(e,i){return n("option",{key:i,domProps:{value:e.id}},[t._v("\n                "+t._s(e.text)+"\n            ")])})),0)]},proxy:!0},{key:"buttons",fn:function(){return[n("b-button",{ref:"btnClose",staticClass:"ui-button-default",on:{click:function(e){return t.$emit("dismiss")}}},[t._v("\n            "+t._s(t._f("localize")(t.btnCloseTitle))+"\n        ")]),t._v(" "),n("b-button",{ref:"btnStart",staticClass:"ui-button-default",attrs:{id:"btn-start",disabled:!t.readyStart,variant:t.readyStart?"primary":""},on:{click:t._eventStart}},[t._v("\n            "+t._s(t.btnStartTitle)+"\n        ")]),t._v(" "),n("b-button",{ref:"btnReset",staticClass:"ui-button-default",attrs:{id:"btn-reset"},on:{click:t._eventReset}},[t._v("\n            "+t._s(t.btnResetTitle)+"\n        ")])]},proxy:!0}])},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showHelper,expression:"showHelper"}],staticClass:"upload-helper"},[t._v("Select Composite Type to show files required to upload")]),t._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:!t.showHelper,expression:"!showHelper"}],ref:"uploadTable",staticClass:"upload-table ui-table-striped"},[n("thead",[n("tr",[n("th"),t._v(" "),n("th"),t._v(" "),n("th",[t._v("Description")]),t._v(" "),n("th",[t._v("Name")]),t._v(" "),n("th",[t._v("Size")]),t._v(" "),n("th",[t._v("Settings")]),t._v(" "),n("th",[t._v("Status")])])]),t._v(" "),n("tbody")])])}),[],!1,null,null,null).exports,P=o.a.View.extend({status_classes:{init:"upload-icon-button fa fa-trash-o",queued:"upload-icon fa fa-spinner fa-spin",running:"upload-icon fa fa-spinner fa-spin",success:"upload-icon-button fa fa-check",error:"upload-icon-button fa fa-exclamation-triangle"},_setupSettings:function(){this.settings=new v({title:d()("Upload configuration"),container:this.$(".upload-settings"),placement:"bottom"})},_renderStatusType:function(t){"success"==t?(this.$el.addClass("table-success"),this.$percentage.html("100%")):"error"==t?(this.$el.addClass("table-danger"),this.$info_progress.hide()):"warning"==t&&(this.$el.addClass("table-warning"),this.$info_progress.hide())},_setupUploadBoxListeners:function(){var t=this;this.listenTo(this.model,"change:percentage",(function(){t._refreshPercentage()})),this.listenTo(this.model,"change:status",(function(){t._refreshStatus()})),this.listenTo(this.model,"change:info",(function(){t._refreshInfo()})),this.listenTo(this.model,"change:file_size",(function(){t._refreshFileSize()}))},_refreshInfo:function(){var t=this.model.get("info");t?this.$info_text.html("<strong>Warning: </strong>".concat(t)).show():this.$info_text.hide()},_refreshPercentage:function(){var t=parseInt(this.model.get("percentage"));this.$progress_bar.css({width:"".concat(t,"%")}),this.$percentage.html(100!=t?"".concat(t,"%"):"Adding to history...")},_refreshFileSize:function(){this.$size.html(m.b.bytesToString(this.model.get("file_size")))},_removeRow:function(){-1!==["init","success","error"].indexOf(this.model.get("status"))&&this.app.collection.remove(this.model)},_showSettings:function(){this.settings.show(new _(this).$el)}}),Y=P.extend({initialize:function(t,e){var n=this;this.app=t,this.model=e.model,this.setElement(this._template(e.model)),this.$mode=this.$(".upload-mode"),this.$title=this.$(".upload-title-extended"),this.$text=this.$(".upload-text"),this.$size=this.$(".upload-size"),this.$info_text=this.$(".upload-info-text"),this.$info_progress=this.$(".upload-info-progress"),this.$text_content=this.$(".upload-text-content"),this.$symbol=this.$(".upload-symbol"),this.$progress_bar=this.$(".upload-progress-bar"),this.$percentage=this.$(".upload-percentage"),this._setupSettings(),this.$symbol.on("click",(function(){n._removeRow()})),this.$text_content.on("change input",(function(t){n.model.set({url_paste:f()(t.target).val(),file_size:f()(t.target).val().length})})),this._setupUploadBoxListeners(),this.listenTo(this.model,"remove",(function(){n.remove()})),this.app.collection.on("reset",(function(){n.remove()}))},render:function(){var t=this.model.attributes;this.$title.html(u.default.escape(t.file_name)),this.$size.html(m.b.bytesToString(t.file_size)),this.$mode.removeClass().addClass("upload-mode").addClass("text-primary"),"new"==t.file_mode?(this.$text.css({width:"".concat(this.$el.width()-16,"px"),top:"".concat(this.$el.height()-8,"px")}).show(),this.$el.height(this.$el.height()-8+this.$text.height()+16),this.$mode.addClass("fa fa-edit")):"local"==t.file_mode?this.$mode.addClass("fa fa-laptop"):"ftp"==t.file_mode&&this.$mode.addClass("fa fa-folder-open-o")},_refreshStatus:function(){var t=this.model.get("status");this.$symbol.removeClass().addClass("upload-symbol").addClass(this.status_classes[t]),this.model.set("enabled","init"==t);var e=this.model.get("enabled");this.$text_content.attr("disabled",!e),this._renderStatusType(t)},_template:function(t){return'<tr id="upload-row-'.concat(t.id,'" class="upload-row"><td><div class="upload-text-column"><div class="upload-mode"/><div class="upload-title-extended"/><div class="upload-text"><div class="upload-text-info">Download data from the web by entering URLs (one per line) or directly paste content.</div><textarea class="upload-text-content form-control"/></div></div></td><td><div class="upload-size"/></td><td><div class="upload-info"><div class="upload-info-text"/><div class="upload-info-progress progress"><div class="upload-progress-bar progress-bar progress-bar-success"/><div class="upload-percentage">0%</div></div></div></td><td><div class="upload-symbol ').concat(this.status_classes.init,'"/></td></tr>')}}),R=n(147),H={mixins:[A],components:{BButton:R.a},data:function(){return{topInfo:"",showHelper:!0,extension:this.app.defaultExtension,genome:this.app.defaultGenome,collectionType:"list",listExtensions:[],listGenomes:[],running:!1,multiple:!0,counterAnnounce:0,counterSuccess:0,counterError:0,counterRunning:0,uploadSize:0,uploadCompleted:0,enableReset:!1,enableStart:!1,enableSources:!1,enableBuild:!1,highlightBox:!1,rowUploadModel:Y,btnLocalTitle:d()("Choose local files"),btnCreateTitle:d()("Paste/Fetch data"),btnFtpTitle:d()("Choose FTP files"),btnStartTitle:d()("Start"),btnBuildTitle:d()("Build"),btnStopTitle:d()("Pause"),btnResetTitle:d()("Reset")}},created:function(){this.initCollection(),this.initAppProperties()},mounted:function(){var t=this;this.initExtensionInfo(),this.initFtpPopover(),this.initUploadbox({url:this.app.uploadPath,announce:function(e,n){t._eventAnnounce(e,n)},initialize:function(e){return t.app.toData([t.collection.get(e)],t.history_id)},progress:function(e,n){t._eventProgress(e,n)},success:function(e,n){t._eventSuccess(e,n)},warning:function(e,n){t._eventWarning(e,n)},error:function(e,n){t._eventError(e,n)},complete:function(){t._eventComplete()},ondragover:function(){t.highlightBox=!0},ondragleave:function(){t.highlightBox=!1}}),this.collection.on("remove",(function(e){t._eventRemove(e)})),this._updateStateForCounters()},computed:{extensions:function(){return u.default.filter(this.listExtensions,(function(t){return!t.composite_files}))},appModel:function(){return this.app.model},history_id:function(){var t,e=null===(t=this.$store)||void 0===t?void 0:t.getters["betaHistory/currentHistoryId"];return e||this.app.currentHistory()}},watch:{extension:function(t){this.updateExtension(t)},genome:function(t){this.updateGenome(t)}},methods:{_newUploadModelProps:function(t,e){return{id:t,file_name:e.name,file_size:e.size,file_mode:e.mode||"local",file_path:e.path,file_data:e,extension:this.extension,genome:this.genome}},_eventSuccess:function(t,e){var n=u.default.pluck(e.outputs,"hid"),i=this.collection.get(t);i.set({percentage:100,status:"success",hids:n}),this._updateStateForSuccess(i),Object(p.a)().currHistoryPanel.refreshContents()},_eventBuild:function(){var t=Object(p.a)(),e=this.getUploadedModels(),n=new t.currHistoryPanel.collection.constructor(e);n.historyId=t.currHistoryPanel.collection.historyId,t.currHistoryPanel.buildCollection(this.collectionType,n,!0),this.counterRunning=0,this._updateStateForCounters(),this._eventReset(),this.$emit("dismiss")},_eventStart:function(){var t=this;0==this.counterAnnounce||this.counterRunning>0||(this.uploadSize=0,this.uploadCompleted=0,this.collection.each((function(e){"init"==e.get("status")&&(e.set("status","queued"),t.uploadSize+=e.get("file_size"))})),this.appModel.set({percentage:0,status:"success"}),this.counterRunning=this.counterAnnounce,this._uploadFtp(),this.uploadbox.start(),this._updateStateForCounters())},_eventReset:function(){0==this.counterRunning&&(this.collection.reset(),this.counterAnnounce=0,this.counterSuccess=0,this.counterError=0,this.counterRunning=0,this.uploadbox.reset(),this.extension=this.app.defaultExtension,this.genome=this.app.defaultGenome,this.appModel.set("percentage",0),this._updateStateForCounters())}}},N=Object(T.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("upload-wrapper",{ref:"wrapper",attrs:{"top-info":t.topInfo,"highlight-box":t.highlightBox},scopedSlots:t._u([{key:"footer",fn:function(){return[n("span",{staticClass:"upload-footer-title"},[t._v("Collection Type:")]),t._v(" "),n("select2",{ref:"footerCollectionType",attrs:{"container-class":"upload-footer-collection-type",enabled:!t.running},model:{value:t.collectionType,callback:function(e){t.collectionType=e},expression:"collectionType"}},[n("option",{attrs:{value:"list"}},[t._v("List")]),t._v(" "),n("option",{attrs:{value:"paired"}},[t._v("Pair")]),t._v(" "),n("option",{attrs:{value:"list:paired"}},[t._v("List of Pairs")])]),t._v(" "),n("span",{staticClass:"upload-footer-title"},[t._v("File Type:")]),t._v(" "),n("select2",{ref:"footerExtension",attrs:{"container-class":"upload-footer-extension",enabled:!t.running},model:{value:t.extension,callback:function(e){t.extension=e},expression:"extension"}},t._l(t.extensions,(function(e,i){return n("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.text))])})),0),t._v(" "),n("span",{staticClass:"upload-footer-extension-info upload-icon-button fa fa-search"}),t._v(" "),n("span",{staticClass:"upload-footer-title"},[t._v("Genome (set all):")]),t._v(" "),n("select2",{ref:"footerGenome",attrs:{"container-class":"upload-footer-genome",enabled:!t.running},model:{value:t.genome,callback:function(e){t.genome=e},expression:"genome"}},t._l(t.listGenomes,(function(e,i){return n("option",{key:i,domProps:{value:e.id}},[t._v("\n                "+t._s(e.text)+"\n            ")])})),0)]},proxy:!0},{key:"buttons",fn:function(){return[n("b-button",{ref:"btnClose",staticClass:"ui-button-default",attrs:{id:"btn-close"},on:{click:function(e){return t.$emit("dismiss")}}},[t._v("\n            "+t._s(t._f("localize")(t.btnCloseTitle))+"\n        ")]),t._v(" "),n("b-button",{ref:"btnReset",staticClass:"ui-button-default",attrs:{id:"btn-reset",disabled:!t.enableReset},on:{click:t._eventReset}},[t._v("\n            "+t._s(t.btnResetTitle)+"\n        ")]),t._v(" "),n("b-button",{ref:"btnStop",staticClass:"ui-button-default",attrs:{id:"btn-stop",disabled:0==t.counterRunning},on:{click:t._eventStop}},[t._v("\n            "+t._s(t.btnStopTitle)+"\n        ")]),t._v(" "),n("b-button",{ref:"btnBuild",staticClass:"ui-button-default",attrs:{id:"btn-build",disabled:!t.enableBuild,variant:t.enableBuild?"primary":""},on:{click:t._eventBuild}},[t._v("\n            "+t._s(t.btnBuildTitle)+"\n        ")]),t._v(" "),n("b-button",{ref:"btnStart",staticClass:"ui-button-default",attrs:{id:"btn-start",disabled:!t.enableStart,variant:t.enableStart?"primary":""},on:{click:t._eventStart}},[t._v("\n            "+t._s(t.btnStartTitle)+"\n        ")]),t._v(" "),n("b-button",{ref:"btnCreate",staticClass:"ui-button-default",attrs:{id:"btn-new",disabled:!t.enableSources},on:{click:t._eventCreate}},[n("span",{staticClass:"fa fa-edit"}),t._v(t._s(t.btnCreateTitle)+"\n        ")]),t._v(" "),t.remoteFiles?n("b-button",{ref:"btnFtp",staticClass:"ui-button-default",attrs:{id:"btn-ftp",disabled:!t.enableSources},on:{click:t._eventRemoteFiles}},[n("span",{staticClass:"fa fa-folder-open-o"}),t._v(t._s(t.btnFilesTitle)+"\n        ")]):t._e(),t._v(" "),n("b-button",{ref:"btnLocal",staticClass:"ui-button-default",attrs:{id:"btn-local",title:t.btnLocalTitle,disabled:!t.enableSources},on:{click:t.uploadSelect}},[n("span",{staticClass:"fa fa-laptop"}),t._v(t._s(t.btnLocalTitle)+"\n        ")])]},proxy:!0}])},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showHelper,expression:"showHelper"}],staticClass:"upload-helper"},[n("i",{staticClass:"fa fa-files-o"}),t._v("Drop files here")]),t._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:!t.showHelper,expression:"!showHelper"}],ref:"uploadTable",staticClass:"upload-table ui-table-striped"},[n("thead",[n("tr",[n("th",[t._v("Name")]),t._v(" "),n("th",[t._v("Size")]),t._v(" "),n("th",[t._v("Status")]),t._v(" "),n("th")])]),t._v(" "),n("tbody")])])}),[],!1,null,null,null).exports,$=n(49),F=P.extend({initialize:function(t,e){var n=this,i=this;this.app=t,this.list_extensions=t.listExtensions,this.model=e.model,this.setElement(this._template(e.model)),this.$mode=this.$(".upload-mode"),this.$title=this.$(".upload-title"),this.$text=this.$(".upload-text"),this.$size=this.$(".upload-size"),this.$info_text=this.$(".upload-info-text"),this.$info_progress=this.$(".upload-info-progress"),this.$text_content=this.$(".upload-text-content"),this.$settings=this.$(".upload-settings"),this.$symbol=this.$(".upload-symbol"),this.$progress_bar=this.$(".upload-progress-bar"),this.$percentage=this.$(".upload-percentage"),this._setupSettings();var a=this.app.genome,r=this.app.extension;this.select_genome=new $.a.View({css:"upload-genome",data:i.app.listGenomes,container:this.$(".upload-genome"),value:a,onchange:function(t){i.model.set("genome",t)}}),this.select_extension=new $.a.View({css:"upload-extension",data:i.app.extensions,container:this.$(".upload-extension"),value:r,onchange:function(t){i.model.set("extension",t)}}),this.model.set({genome:a,extension:r}),this.$symbol.on("click",(function(){i._removeRow()})),this.$(".upload-extension-info").on("click",(function(t){var e=n.upload_extension;e?e.extension_popup.visible?e.extension_popup.hide():(e.extension_popup.remove(),n._makeUploadExtensionsPopover(t)):n._makeUploadExtensionsPopover(t)})).on("mousedown",(function(t){t.preventDefault()})),this.$settings.on("click",(function(t){i._showSettings()})).on("mousedown",(function(t){t.preventDefault()})),this.$text_content.on("change input",(function(t){i.model.set({url_paste:f()(t.target).val(),file_size:f()(t.target).val().length})})),this.$title.on("change input",(function(t){i.model.set({file_name:f()(t.target).val()})})),this._setupUploadBoxListeners(),this.listenTo(this.model,"change:genome",(function(){i._refreshGenome()})),this.listenTo(this.model,"change:extension",(function(){i._refreshExtension()}))},render:function(){this._refreshType(),this._refreshPercentage(),this._refreshStatus(),this._refreshInfo(),this._refreshGenome(),this._refreshExtension(),this._refreshFileSize()},remove:function(){this.select_genome.remove(),this.select_extension.remove(),o.a.View.prototype.remove.apply(this)},_refreshType:function(){var t=this.model.attributes;this.$title.val(u.default.escape(t.file_name)),this.$title.select(),this.$size.html(m.b.bytesToString(t.file_size)),this.$mode.removeClass().addClass("upload-mode").addClass("text-primary"),"new"==t.file_mode?(this.$text.css({width:"".concat(this.$el.width()-16,"px"),top:"".concat(this.$el.height()-8,"px")}).show(),this.$el.height(this.$el.height()-8+this.$text.height()+16),this.$mode.addClass("fa fa-edit")):"local"==t.file_mode?this.$mode.addClass("fa fa-laptop"):"ftp"==t.file_mode&&this.$mode.addClass("fa fa-folder-open-o")},_refreshExtension:function(){this.select_extension.value(this.model.get("extension"))},_refreshGenome:function(){this.select_genome.value(this.model.get("genome"))},_refreshStatus:function(){var t=this.model.get("status");this.$symbol.removeClass().addClass("upload-symbol").addClass(this.status_classes[t]),this.model.set("enabled","init"==t);var e=this.model.get("enabled");this.$text_content.attr("disabled",!e),this.$title.attr("disabled",!e),e?(this.select_genome.enable(),this.select_extension.enable()):(this.select_genome.disable(),this.select_extension.disable()),this.$info_progress.show(),this.$el.removeClass().addClass("upload-row"),this._renderStatusType(t)},_makeUploadExtensionsPopover:function(t){this.upload_extension=new x({$el:f()(t.target),title:this.select_extension.text(),extension:this.select_extension.value(),list:this.list_extensions})},_template:function(t){return'<tr id="upload-row-'.concat(t.id,'" class="upload-row">\n                    <td>\n                        <div class="upload-text-column">\n                            <div class="upload-mode"/>\n                            <input class="upload-title ml-2 border rounded"/>\n                            <div class="upload-text">\n                                <div class="upload-text-info">\n                                    Download data from the web by entering URLs (one per line) or directly paste content.\n                                </div>\n                                <textarea class="upload-text-content form-control"/>\n                            </div>\n                        </div>\n                    </td>\n                    <td>\n                        <div class="upload-size"/>\n                    </td>\n                    <td>\n                        <div class="upload-extension float-left mr-1"/>\n                        <div class="upload-extension-info upload-icon-button fa fa-search"/>\n                    </td>\n                    <td>\n                        <div class="upload-genome"/>\n                    </td>\n                    <td>\n                        <div class="upload-settings upload-icon-button fa fa-gear"/>\n                    </td>\n                    <td>\n                        <div class="upload-info">\n                            <div class="upload-info-text"/>\n                            <div class="upload-info-progress progress">\n                                <div class="upload-progress-bar progress-bar progress-bar-success"/>\n                                <div class="upload-percentage">0%</div>\n                            </div>\n                        </div>\n                    </td>\n                    <td>\n                        <div class="upload-symbol ').concat(this.status_classes.init,'"/>\n                    </td>\n                </tr>')}}),W={mixins:[A],components:{BButton:R.a},props:{multiple:{type:Boolean,default:!0}},data:function(){return{topInfo:"",highlightBox:!1,showHelper:!0,extension:this.app.defaultExtension,genome:this.app.defaultGenome,listExtensions:[],listGenomes:[],running:!1,rowUploadModel:F,counterAnnounce:0,counterSuccess:0,counterError:0,counterRunning:0,uploadSize:0,uploadCompleted:0,enableReset:!1,enableBuild:!1,enableStart:!1,enableSources:!1,btnLocalTitle:d()("Choose local files"),btnCreateTitle:d()("Paste/Fetch data"),btnStartTitle:d()("Start"),btnStopTitle:d()("Pause"),btnResetTitle:d()("Reset"),btnSelectTitle:d()("Select")}},created:function(){this.initCollection(),this.initAppProperties()},mounted:function(){var t=this;this.initExtensionInfo(),this.initFtpPopover(),this.initUploadbox({url:this.app.uploadPath,multiple:this.multiple,announce:function(e,n){t._eventAnnounce(e,n)},initialize:function(e){return t.app.toData([t.collection.get(e)],t.history_id)},progress:function(e,n){t._eventProgress(e,n)},success:function(e,n){t._eventSuccess(e,n)},error:function(e,n){t._eventError(e,n)},warning:function(e,n){t._eventWarning(e,n)},complete:function(){t._eventComplete()},ondragover:function(){t.highlightBox=!0},ondragleave:function(){t.highlightBox=!1}}),this.collection.on("remove",(function(e){t._eventRemove(e)})),this._updateStateForCounters()},computed:{extensions:function(){return u.default.filter(this.listExtensions,(function(t){return!t.composite_files}))},appModel:function(){return this.app.model},history_id:function(){var t,e=null===(t=this.$store)||void 0===t?void 0:t.getters["betaHistory/currentHistoryId"];return e||this.app.currentHistoryId}},watch:{extension:function(t){this.updateExtension(t)},genome:function(t){this.updateGenome(t)}},methods:{_eventSelect:function(){var t=this.getUploadedModels().map((function(t){return{id:t.attributes.id,src:t.src,hid:t.attributes.hid,name:t.attributes.name}}));this.$emit("dismiss",t)},_newUploadModelProps:function(t,e){return{id:t,file_name:e.name,file_size:e.size,file_mode:e.mode||"local",file_path:e.path,file_data:e}},_eventSuccess:function(t,e){var n=u.default.pluck(e.outputs,"hid"),i=this.collection.get(t);i.set({percentage:100,status:"success",hids:n}),this._updateStateForSuccess(i)},_eventStart:function(){var t=this;if(0!==this.counterAnnounce&&0===this.counterRunning){this.uploadSize=0,this.uploadCompleted=0,this.collection.each((function(e){"init"==e.get("status")&&(e.set("status","queued"),t.uploadSize+=e.get("file_size"))})),this.appModel.set({percentage:0,status:"success"}),this.counterRunning=this.counterAnnounce,this._uploadFtp();var e=Object(p.a)();this.uploadbox.start({id:e.user.id,chunk_upload_size:this.app.chunkUploadSize}),this._updateStateForCounters()}},_eventReset:function(){0===this.counterRunning&&(this.collection.reset(),this.counterAnnounce=0,this.counterSuccess=0,this.counterError=0,this.counterRunning=0,this.uploadbox.reset(),this.extension=this.app.defaultExtension,this.genome=this.app.defaultGenome,this.appModel.set("percentage",0),this._updateStateForCounters())}}},z=Object(T.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("upload-wrapper",{ref:"wrapper",attrs:{"top-info":t.topInfo,"highlight-box":t.highlightBox},scopedSlots:t._u([{key:"footer",fn:function(){return[n("span",{staticClass:"upload-footer-title"},[t._v("Type (set all):")]),t._v(" "),n("select2",{ref:"footerExtension",attrs:{"container-class":"upload-footer-extension",enabled:!t.running},model:{value:t.extension,callback:function(e){t.extension=e},expression:"extension"}},t._l(t.extensions,(function(e,i){return n("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.text))])})),0),t._v(" "),n("span",{staticClass:"upload-footer-extension-info upload-icon-button fa fa-search"}),t._v(" "),n("span",{staticClass:"upload-footer-title"},[t._v("Genome (set all):")]),t._v(" "),n("select2",{ref:"footerGenome",attrs:{"container-class":"upload-footer-genome",enabled:!t.running},model:{value:t.genome,callback:function(e){t.genome=e},expression:"genome"}},t._l(t.listGenomes,(function(e,i){return n("option",{key:i,domProps:{value:e.id}},[t._v("\n                "+t._s(e.text)+"\n            ")])})),0)]},proxy:!0},{key:"buttons",fn:function(){return[n("b-button",{ref:"btnClose",staticClass:"ui-button-default",attrs:{id:"btn-close"},on:{click:function(e){return t.$emit("dismiss")}}},[t._v("\n            "+t._s(t.btnCloseTitle)+"\n        ")]),t._v(" "),n("b-button",{ref:"btnReset",staticClass:"ui-button-default",attrs:{id:"btn-reset",disabled:!t.enableReset},on:{click:t._eventReset}},[t._v("\n            "+t._s(t.btnResetTitle)+"\n        ")]),t._v(" "),n("b-button",{ref:"btnStop",staticClass:"ui-button-default",attrs:{id:"btn-stop",disabled:0==t.counterRunning},on:{click:t._eventStop}},[t._v("\n            "+t._s(t.btnStopTitle)+"\n        ")]),t._v(" "),t.selectable?n("b-button",{ref:"btnBuild",staticClass:"ui-button-default",attrs:{id:"btn-build",disabled:!t.enableBuild,variant:t.enableBuild?"primary":""},on:{click:t._eventSelect}},[t._v("\n            "+t._s(t.btnSelectTitle)+"\n        ")]):t._e(),t._v(" "),n("b-button",{ref:"btnStart",staticClass:"ui-button-default",attrs:{id:"btn-start",disabled:!t.enableStart,variant:t.enableStart?"primary":""},on:{click:t._eventStart}},[t._v("\n            "+t._s(t.btnStartTitle)+"\n        ")]),t._v(" "),n("b-button",{ref:"btnCreate",staticClass:"ui-button-default",attrs:{id:"btn-new",disabled:!t.enableSources},on:{click:t._eventCreate}},[n("span",{staticClass:"fa fa-edit"}),t._v(t._s(t.btnCreateTitle)+"\n        ")]),t._v(" "),t.remoteFiles?n("b-button",{ref:"btnFtp",staticClass:"ui-button-default",attrs:{id:"btn-ftp",disabled:!t.enableSources},on:{click:t._eventRemoteFiles}},[n("span",{staticClass:"fa fa-folder-open-o"}),t._v(t._s(t.btnFilesTitle)+"\n        ")]):t._e(),t._v(" "),n("b-button",{ref:"btnLocal",staticClass:"ui-button-default",attrs:{id:"btn-local",title:t.btnLocalTitle,disabled:!t.enableSources},on:{click:t.uploadSelect}},[n("span",{staticClass:"fa fa-laptop"}),t._v(t._s(t.btnLocalTitle)+"\n        ")])]},proxy:!0}])},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showHelper,expression:"showHelper"}],staticClass:"upload-helper"},[n("i",{staticClass:"fa fa-files-o"}),t._v("Drop files here")]),t._v(" "),n("table",{directives:[{name:"show",rawName:"v-show",value:!t.showHelper,expression:"!showHelper"}],ref:"uploadTable",staticClass:"upload-table ui-table-striped"},[n("thead",[n("tr",[n("th",[t._v("Name")]),t._v(" "),n("th",[t._v("Size")]),t._v(" "),n("th",[t._v("Type")]),t._v(" "),n("th",[t._v("Genome")]),t._v(" "),n("th",[t._v("Settings")]),t._v(" "),n("th",[t._v("Status")]),t._v(" "),n("th")])]),t._v(" "),n("tbody")])])}),[],!1,null,null,null).exports,U=n(7),V=n.n(U),B=n(26),q=n(20),G=n(17),J=n(93);q.c.add(G.j);var K={mixins:[A],components:{BLink:J.a,BButton:R.a,FontAwesomeIcon:B.a},data:function(){return{datasets:[],ftpFiles:[],uris:[],topInfo:"Tabular source data to extract collection files and metadata from",enableReset:!1,enableBuild:!1,dataType:"datasets",selectedDatasetId:null,selectedDatasetName:null,sourceContent:"",selectionType:"paste",btnBuildTitle:"Build",btnResetTitle:"Reset"}},created:function(){this.initCollection(),this.initAppProperties()},watch:{selectionType:function(t){var e=this;"dataset"!=t||this.datasetsSet?"ftp"==t?s.a.getRemoteFiles((function(t){e.sourceContent=t.map((function(t){return t.path})).join("\n"),e.ftpFiles=t})):"remote_files"==t&&Object(L.c)(this._handleRemoteFilesUri,{mode:"directory"}):this.onSelectDataset()},selectedDatasetId:function(t){var e=this;if(t){var n=Object(p.a)();V.a.get("".concat(Object(b.getAppRoot)(),"api/histories/").concat(n.currHistoryPanel.model.id,"/contents/").concat(t,"/display")).then((function(t){e.sourceContent=t.data})).catch((function(t){return console.log(t)}))}else this.sourceContent=""}},methods:{_eventReset:function(){this.selectedDatasetId=null,this.sourceContent=""},_handleRemoteFilesUri:function(t){var e=this;s.a.getRemoteFilesAt(t.url).then((function(t){t=t.filter((function(t){return"File"==t.class})),e.sourceContent=t.map((function(t){return t.uri})).join("\n"),e.uris=t}))},_eventBuild:function(){this._buildSelection(this.sourceContent)},onSelectDataset:function(){var t=this;Object(p.a)().data.dialog((function(e){t.selectedDatasetId=e.id,t.selectedDatasetName=e.name}),{multiple:!1,library:!1,format:null,allowUpload:!1})},_buildSelection:function(t){var e=this.selectionType,n={},i=Object(p.a)();"dataset"==e||"paste"==e?(n.selectionType="raw",n.content=t):"ftp"==e?(n.selectionType="ftp",n.elements=this.ftpFiles,n.ftpUploadSite=this.ftpUploadSite):"remote_files"==e&&(n.selectionType="remote_files",n.elements=this.uris),n.dataType=this.dataType,i.currHistoryPanel.buildCollection("rules",n,!0),this.$emit("dismiss")}}},X=Object(T.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("upload-wrapper",{ref:"wrapper",attrs:{"top-info":t._f("l")(t.topInfo)},scopedSlots:t._u([{key:"buttons",fn:function(){return[n("b-button",{ref:"btnClose",staticClass:"ui-button-default",attrs:{id:"btn-close"},on:{click:function(e){return t.$emit("dismiss")}}},[t._v("\n            "+t._s(t._f("l")(t.btnCloseTitle))+"\n        ")]),t._v(" "),n("b-button",{ref:"btnBuild",staticClass:"ui-button-default",attrs:{id:"btn-build",disabled:!t.sourceContent,variant:t.sourceContent?"primary":""},on:{click:t._eventBuild}},[t._v("\n            "+t._s(t._f("l")(t.btnBuildTitle))+"\n        ")]),t._v(" "),n("b-button",{ref:"btnReset",staticClass:"ui-button-default",attrs:{id:"btn-reset",disabled:!t.enableReset},on:{click:t._eventReset}},[t._v("\n            "+t._s(t._f("l")(t.btnResetTitle))+"\n        ")])]},proxy:!0}])},[n("span",{staticClass:"float-left",staticStyle:{width:"25%",display:"inline",height:"100%"}},[n("div",{staticClass:"upload-rule-option"},[n("div",{staticClass:"upload-rule-option-title"},[t._v(t._s(t._f("l")("Upload data as")))]),t._v(" "),n("div",{staticClass:"rule-data-type"},[n("select2",{attrs:{"container-class":"upload-footer-selection"},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}},[n("option",{attrs:{value:"datasets"}},[t._v("Datasets")]),t._v(" "),n("option",{attrs:{value:"collections"}},[t._v("Collection(s)")])])],1)]),t._v(" "),n("div",{staticClass:"upload-rule-option"},[n("div",{staticClass:"upload-rule-option-title"},[t._v(t._s(t._f("l")("Load tabular data from")))]),t._v(" "),n("div",{staticClass:"rule-select-type"},[n("select2",{attrs:{"container-class":"upload-footer-selection"},model:{value:t.selectionType,callback:function(e){t.selectionType=e},expression:"selectionType"}},[n("option",{attrs:{value:"paste"}},[t._v(t._s(t._f("l")("Pasted Table")))]),t._v(" "),n("option",{attrs:{value:"dataset"}},[t._v(t._s(t._f("l")("History Dataset")))]),t._v(" "),t.ftpUploadSite?n("option",{attrs:{value:"ftp"}},[t._v(t._s(t._f("l")("FTP Directory")))]):t._e(),t._v(" "),n("option",{attrs:{value:"remote_files"}},[t._v(t._s(t._f("l")("Remote Files Directory")))])])],1)]),t._v(" "),"dataset"==t.selectionType?n("div",{staticClass:"upload-rule-option",attrs:{id:"upload-rule-dataset-option"}},[n("div",{staticClass:"upload-rule-option-title"},[t._v("History dataset")]),t._v(" "),n("div",[null==t.selectedDatasetName?n("b-link",{on:{click:t.onSelectDataset}},[t._v("\n                    "+t._s(t._f("l")("Select"))+"\n                ")]):n("span",[t._v("\n                    "+t._s(t.selectedDatasetName)+" "),n("font-awesome-icon",{attrs:{icon:"edit"},on:{click:t.onSelectDataset}})],1)],1)]):t._e()]),t._v(" "),n("span",{staticStyle:{display:"inline",float:"right",width:"75%",height:"300px"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sourceContent,expression:"sourceContent"}],staticClass:"upload-rule-source-content form-control",staticStyle:{height:"100%"},attrs:{disabled:"paste"!=t.selectionType},domProps:{value:t.sourceContent},on:{input:function(e){e.target.composing||(t.sourceContent=e.target.value)}}})])])}),[],!1,null,null,null).exports,Q=n(29),Z=n(638),tt=n(639),et={uploadPath:{type:String,required:!0},chunkUploadSize:{type:Number,required:!0},fileSourcesConfigured:{type:Boolean,required:!0},ftpUploadSite:{type:String,default:""},defaultGenome:{type:String,default:s.a.DEFAULT_GENOME},defaultExtension:{type:String,default:s.a.DEFAULT_EXTENSION},datatypesDisableAuto:{type:Boolean,default:!1},formats:{type:Array,default:null},multiple:{type:Boolean,default:!0},hasCallback:{type:Boolean,default:!1},selectable:{type:Boolean,required:!1,default:!1},auto:{type:Object,default:function(){return s.a.AUTO_EXTENSION}}};function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ot={components:{Collection:N,Composite:I,Default:z,RulesInput:X,LoadingSpan:Q.a,BTabs:Z.a,BTab:tt.a},props:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({currentHistoryId:{type:String,required:!0},currentUserId:{type:String,default:""}},et),data:function(){return{listGenomes:[],listExtensions:[],genomesSet:!1,extensionsSet:!1,datatypesMapper:null,datatypesMapperReady:!0}},created:function(){var t=this;this.model=new o.a.Model({label:"Load Data",percentage:0,status:"",onunload:function(){},onclick:function(){}}),this.model.on("change",(function(e){for(var n=e.changed,i=0,a=Object.entries(n);i<a.length;i++){var r=nt(a[i],2),o=r[0],s=r[1];t.eventHub.$emit("upload:".concat(o),s)}})),s.a.getUploadDatatypes(this.datatypesDisableAuto,this.auto).then((function(e){t.extensionsSet=!0,t.listExtensions=e})).catch((function(t){console.log("Error in UploadModalContent, unable to load datatypes",t)})),s.a.getUploadGenomes(this.defaultGenome).then((function(e){t.genomesSet=!0,t.listGenomes=e})).catch((function(t){console.log("Error in uploadModalContent, unable to load genomes",t)})),null!==this.formats?(this.datatypesMapperReady=!1,Object(l.a)().then((function(e){t.datatypesMapper=e,t.datatypesMapperReady=!0}))):this.datatypesMapperReady=!0},beforeDestroy:function(){this.model.get("onunload")()},computed:{historyAvailable:function(){return Boolean(this.currentHistoryId)},ready:function(){return this.genomesSet&&this.extensionsSet&&this.historyAvailable&&this.datatypesMapperReady},unrestricted:function(){return null===this.formats&&this.multiple},effectiveExtensions:function(){var t=this;if(null===this.formats||!this.datatypesMapperReady)return this.listExtensions;var e=[];return this.listExtensions.forEach((function(n){n&&"auto"==n.id?e.push(n):t.datatypesMapper.isSubTypeOfAny(n.id,t.formats)&&e.push(n)})),e},formatRestricted:function(){return null!==this.formats},showComposite:function(){return!this.formatRestricted||this.effectiveExtensions.some((function(t){return!!t.composite_files}))},showRegular:function(){return!this.formatRestricted||this.effectiveExtensions.some((function(t){return!t.composite_files}))},showCollection:function(){return!!this.unrestricted},showRules:function(){return!!this.unrestricted||this.multiple}},mounted:function(){this.id=String(this._uid)},methods:{currentFtp:function(){return this.currentUserId&&this.ftpUploadSite},toData:function(t,e){var n={payload:{tool_id:"upload1",history_id:e||this.currentHistoryId,inputs:{}},files:[],error_message:null};if(t&&t.length>0){var i={file_count:t.length,dbkey:t[0].get("genome","?"),file_type:t[0].get("extension")||"auto"};for(var a in t){var r=t[a];if(r.set("status","running"),!(r.get("file_size")>0)){if(r.get("optional"))continue;n.error_message="Upload content incomplete.",r.set("status","error"),r.set("info",n.error_message);break}var o="files_".concat(a,"|");i["".concat(o,"type")]="upload_dataset","New File"!=r.get("file_name")&&(i["".concat(o,"NAME")]=r.get("file_name")),i["".concat(o,"space_to_tab")]=r.get("space_to_tab")?"Yes":null,i["".concat(o,"to_posix_lines")]=r.get("to_posix_lines")?"Yes":null,i["".concat(o,"dbkey")]=r.get("genome",null),i["".concat(o,"file_type")]=r.get("extension",null);var s=void 0,l=void 0;switch(r.get("file_mode")){case"new":i["".concat(o,"url_paste")]=r.get("url_paste");break;case"ftp":l="ftp_files",(s=r.get("file_path")).indexOf("://")>=0&&(l="url_paste"),i["".concat(o).concat(l)]=s;break;case"local":n.files.push({name:"".concat(o,"file_data"),file:r.get("file_data")})}}n.payload.inputs=JSON.stringify(i)}return n}}},st=Object(T.a)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ready?n("b-tabs",[t.showRegular?n("b-tab",{attrs:{title:"Regular",id:"regular","button-id":"tab-title-link-regular"}},[n("default",t._g({attrs:{app:this,"lazy-load-max":50,multiple:t.multiple,"has-callback":t.hasCallback,selectable:t.selectable}},t.$listeners))],1):t._e(),t._v(" "),t.showComposite?n("b-tab",{attrs:{title:"Composite",id:"composite","button-id":"tab-title-link-composite"}},[n("composite",t._g({attrs:{app:this,"has-callback":t.hasCallback,selectable:t.selectable}},t.$listeners))],1):t._e(),t._v(" "),t.showCollection?n("b-tab",{attrs:{title:"Collection",id:"collection","button-id":"tab-title-link-collection"}},[n("collection",t._g({attrs:{app:this,"has-callback":t.hasCallback,selectable:t.selectable}},t.$listeners))],1):t._e(),t._v(" "),t.showRules?n("b-tab",{attrs:{title:"Rule-based",id:"rule-based","button-id":"tab-title-link-rule-based"}},[n("rules-input",t._g({attrs:{app:this,"has-callback":t.hasCallback,selectable:t.selectable}},t.$listeners))],1):t._e()],1):n("div",[n("loading-span",{attrs:{message:"Loading required information from Galaxy server."}})],1)}),[],!1,null,null,null).exports;function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dt={components:{CurrentUser:i.a,UserHistories:a.a,UploadModalContent:st},props:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(n),!0).forEach((function(e){ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({title:{type:String,default:"Download from web or upload from disk"},modalStatic:{type:Boolean,default:!0}},et),data:function(){return{modalShow:!1}},methods:{show:function(){this.modalShow=!0},hide:function(){this.modalShow=!1},dismiss:function(t){void 0!==t&&this.$root.$emit("uploadResult",t),this.hide()}},mounted:function(){this.show(),this.$root.$on("openUpload",this.show)}},ut=Object(T.a)(dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CurrentUser",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.user;return[i?n("UserHistories",{attrs:{user:i},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.currentHistoryId;return[n("b-modal",{attrs:{static:t.modalStatic,"header-class":"no-separator","modal-class":"ui-modal","dialog-class":"upload-dialog","body-class":"upload-dialog-body","no-enforce-focus":"","hide-footer":""},scopedSlots:t._u([{key:"modal-header",fn:function(){return[n("h4",{staticClass:"title",attrs:{tabindex:"0"}},[t._v(t._s(t._f("localize")(t.title)))])]},proxy:!0}],null,!0),model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[t._v(" "),a?n("UploadModalContent",t._b({attrs:{"current-user-id":i.id,"current-history-id":a},on:{dismiss:t.dismiss}},"UploadModalContent",Object.assign({},t.$props,t.$attrs),!1)):t._e()],1)]}}],null,!0)}):t._e()]}}])})}),[],!1,null,null,null).exports,ht=n(62);var ft=n(36);function pt(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function mt(){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(p.a)(),n=Object(ht.b)(),i={multiple:!0,uploadPath:e.config.nginx_upload_path||"".concat(n,"api/tools"),chunkUploadSize:e.config.chunk_upload_size,fileSourcesConfigured:e.config.file_sources_configured,ftpUploadSite:e.config.ftp_upload_site,defaultGenome:e.config.default_genome,defaultExtension:e.config.default_extension,selectable:!1};return Object.assign({},i,t)}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e=t.callback,n=pt(t,["callback"]);e&&(n.hasCallback=!0);var i=Object(ft.a)(ut),a=document.createElement("div");document.body.appendChild(a);var r=i(n,a);return e&&r.$once("uploadResult",e),r}var _t=null;var gt=n(640);q.c.add(G.J);var vt={components:{FontAwesomeIcon:B.a},directives:{"v-b-tooltip":gt.a},props:{title:{type:String,default:"Download from URL or upload files from disk"}},data:function(){return{status:"",percentage:0}},methods:{showUploadDialog:function(t){var e;_t||(_t=mt(e)),_t.$emit("openUpload",_t)},setStatus:function(t){this.status=t},setPercentage:function(t){this.percentage=Math.round(t)}},created:function(){this.eventHub.$on("upload:status",this.setStatus),this.eventHub.$on("upload:percentage",this.setPercentage)},beforeDestroy:function(){this.eventHub.$off("upload:status",this.setStatus),this.eventHub.$off("upload:percentage",this.setPercentage)}},yt=Object(T.a)(vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"upload-button",attrs:{id:"tool-panel-upload-button","aria-label":t._f("localize")(t.title),title:t._f("localize")(t.title),size:"sm"},on:{click:t.showUploadDialog}},[n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar progress-bar-notransition",class:"progress-bar-"+t.status,style:{width:t.percentage+"%"}})]),t._v(" "),n("span",{staticClass:"position-relative"},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"upload"}}),t._v(" "),n("b",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("Upload Data")])],1)])}),[],!1,null,null,null).exports},function(t,e,n){"use strict";var i=n(8),a=n(15),r=n(73);i.default.use(a.a);var o={name:"Tool",props:{tool:{type:Object,required:!0},operationTitle:{type:String,default:""},operationIcon:{type:String,default:""},hideName:{type:Boolean,default:!1},toolKey:{type:String,default:""}},computed:{targetClass:function(){return this.toolKey?"tool-menu-item-".concat(this.tool[this.toolKey]):null}},methods:{onClick:function(t){Object(r.a)("".concat(this.tool.name," selected from panel")),this.$emit("onClick",this.tool,t)},onOperation:function(t){Object(r.a)("".concat(this.tool.name," operation selected from panel")),this.$emit("onOperation",this.tool,t)}}},s=(n(543),n(5)),l={name:"ToolSection",components:{Tool:Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolTitle"},[t.tool.disabled?n("a",{staticClass:"name text-muted"},[t.hideName?t._e():n("span",[t._v(t._s(t.tool.name))]),t._v(" "),n("span",{staticClass:"description"},[t._v(t._s(t.tool.description))])]):n("a",{class:t.targetClass,attrs:{href:t.tool.link,target:t.tool.target},on:{click:t.onClick}},[t.tool.logo?n("img",{staticClass:"logo",attrs:{src:t.tool.logo}}):t._e(),t._v(" "),n("span",{staticClass:"labels"},t._l(t.tool.labels,(function(e,i){return n("span",{key:i,class:["badge","badge-primary","badge-"+e]},[t._v("\n                "+t._s(e)+"\n            ")])})),0),t._v(" "),t.hideName?t._e():n("span",{staticClass:"name font-weight-bold"},[t._v(t._s(t.tool.name))]),t._v(" "),n("span",{staticClass:"description"},[t._v(t._s(t.tool.description))]),t._v(" "),n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["operation","float-right",t.operationIcon],attrs:{title:t.operationTitle},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onOperation(e)}}})])])}),[],!1,null,"370041ce",null).exports},props:{category:{type:Object,required:!0},queryFilter:{type:String,default:""},disableFilter:{type:Boolean},hideName:{type:Boolean},operationTitle:{type:String,default:""},operationIcon:{type:String,default:""},toolKey:{type:String,default:""},sectionName:{type:String,default:"default"},expanded:{type:Boolean,default:!1}},data:function(){return{opened:this.expanded||this.checkFilter()}},watch:{queryFilter:function(){this.opened=this.checkFilter()},opened:function(t,e){if(t!==e){var n=t?"opened":"closed";Object(r.a)("".concat(this.name," tools menu ").concat(n))}}},computed:{name:function(){return this.category.title||this.category.name},isSection:function(){return void 0!==this.category.elems},hasElements:function(){return this.category.elems&&this.category.elems.length>0}},methods:{checkFilter:function(){return!this.disableFilter&&!!this.queryFilter},onClick:function(t,e){this.$emit("onClick",t,e)},onOperation:function(t,e){this.$emit("onOperation",t,e)},toggleMenu:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened;this.opened=t}},created:function(){var t=this;this.eventHub.$on("openToolSection",(function(e){var n;t.isSection&&e==(null===(n=t.category)||void 0===n?void 0:n.id)&&t.toggleMenu(!0)}))}},c=(n(544),Object(s.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isSection&&t.hasElements?n("div",{staticClass:"tool-panel-section"},[n("div",{class:["toolSectionTitle","tool-menu-section-"+t.sectionName]},[n("a",{attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(e){return t.toggleMenu()}}},[n("span",{staticClass:"name"},[t._v("\n                "+t._s(this.name)+"\n            ")])])]),t._v(" "),n("transition",{attrs:{name:"slide"}},[t.opened?n("div",[t._l(t.category.elems.entries(),(function(e){var i=e[0],a=e[1];return[a.text?n("div",{key:i,staticClass:"tool-panel-label"},[t._v("\n                    "+t._s(a.text)+"\n                ")]):n("tool",{key:i,staticClass:"ml-2",attrs:{tool:a,"tool-key":t.toolKey,"hide-name":t.hideName,"operation-title":t.operationTitle,"operation-icon":t.operationIcon},on:{onOperation:t.onOperation,onClick:t.onClick}})]}))],2):t._e()])],1):n("div",[t.category.text?n("div",{staticClass:"tool-panel-label"},[t._v("\n        "+t._s(t.category.text)+"\n    ")]):n("tool",{attrs:{tool:t.category,"hide-name":t.hideName,"operation-title":t.operationTitle,"operation-icon":t.operationIcon},on:{onOperation:t.onOperation,onClick:t.onClick}})],1)}),[],!1,null,"7241228d",null));e.a=c.exports},function(t,e,n){"use strict";var i=160,a=800,r={name:"SidePanel",props:["currentPanel","currentPanelProperties","side"],data:function(){return{show:!0,width:288}},computed:{styles:function(){var t={};return t[this.side]=this.show?"0":"-".concat(this.width,"px"),t.width=this.width+"px",t}},methods:{dragHandler:function(t){var e=this,n="left"===this.side,r=t.pageX,o=this.width;function s(t){var s=t.pageX-r,l=n?o+s:o-s;l=Math.min(a,Math.max(i,l)),e.resize(l)}document.getElementById("dd-helper").style.display="block",document.getElementById("dd-helper").addEventListener("mousemove",s),document.getElementById("dd-helper").addEventListener("mouseup",(function t(){document.getElementById("dd-helper").style.display="none",document.getElementById("dd-helper").removeEventListener("mousemove",s),document.getElementById("dd-helper").removeEventListener("mouseup",t)}))},resize:function(t){this.width=t,document.getElementById("center").style[this.side]=t+"px"},toggle:function(){this.show=!this.show,this.show?(document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]=this.width+"px",setTimeout((function(){document.getElementById("center").style.transition=""}),250)):(document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]="0",setTimeout((function(){document.getElementById("center").style.transition=""}),250))},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.show=!1,document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]="0",setTimeout((function(){document.getElementById("center").style.transition=""}),t)}}},o=(n(546),n(5)),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"unified-panel-outer-wrap",style:t.styles,attrs:{id:t.side}},[t._t("panel",[n(t.currentPanel,t._b({tag:"component"},"component",t.currentPanelProperties,!1))]),t._v(" "),n("div",{staticClass:"unified-panel-footer"},[n("div",{staticClass:"panel-collapse",class:{left:"left"===t.side,right:"right"===t.side,hidden:!t.show},on:{click:t.toggle}}),t._v(" "),n("div",{staticClass:"drag",on:{mousedown:t.dragHandler}})])],2)}),[],!1,null,"d6274ba6",null);e.a=s.exports},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return f}));var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datatypes=e.datatypes,this.datatypesMapping=e.datatypes_mapping}var e,n,a;return e=t,(n=[{key:"isSubType",value:function(t,e){var n=this.datatypesMapping;return t=n.ext_to_class_name[t],e=n.ext_to_class_name[e],n.class_to_classes[t]&&e in n.class_to_classes[t]}},{key:"isSubTypeOfAny",value:function(t,e){var n=this;return e.some((function(e){return n.isSubType(t,e)}))}}])&&i(e.prototype,n),a&&i(e,a),t}(),r=n(7),o=n.n(r),s=n(21),l=n(3);function c(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function d(){return u.apply(this,arguments)}function u(){var t;return t=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("".concat(Object(l.getAppRoot)(),"api/datatypes/types_and_mapping"));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),Object(s.b)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),(u=function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){c(r,i,a,o,s,"next",t)}function s(t){c(r,i,a,o,s,"throw",t)}o(void 0)}))}).apply(this,arguments)}function h(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function f(){return p.apply(this,arguments)}function p(){var t;return t=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:return e=t.sent,t.abrupt("return",new a(e));case 4:case"end":return t.stop()}}),t)})),(p=function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){h(r,i,a,o,s,"next",t)}function s(t){h(r,i,a,o,s,"throw",t)}o(void 0)}))}).apply(this,arguments)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return p}));var i=n(9),a=n.n(i);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t);try{this.loadProps(e)}catch(t){throw console.log("unable to instantate model",e),t}}return h(t,[{key:"loadProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,t)}}]),t}(),p=function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t);var e=s(n);function n(){return d(this,n),e.apply(this,arguments)}return h(n,[{key:"updateDate",get:function(){return a.a.utc(this.update_time)}},{key:"createDate",get:function(){return a.a.utc(this.create_time)}}]),n}(t)}},,,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(6),c=160,d=800,u=s.a.View.extend({initialize:function(t){this.view=t.view,this.hidden=!1,this.saved_size=null,this.hiddenByTool=!1},$center:function(){return this.$el.siblings("#center")},$toggleButton:function(){return this.$(".unified-panel-footer > .panel-collapse")},render:function(){var t=this,e=this.view,n=this.view.model.attributes||{};if("left"===this.id&&this.view&&this.view.isVueWrapper){var i=document.createElement("div");this.$el.replaceWith(i),this.view.mountVueComponent(i)}else this.$el.html(this._templatePanel(this.id)),r.default.each(n.buttons,(function(e){t.$(".panel-header-buttons").append(e.$el)})),this.$el.addClass(n.cls),this.$(".panel-header-text").html(r.default.escape(n.title)),this.$(".unified-panel-body").append(e.$el),e.render()},_templatePanel:function(){return[this._templateHeader(),this._templateBody(),this._templateFooter()].join("")},_templateHeader:function(t){return'<div class="unified-panel-header" unselectable="on">\n                    <div class="unified-panel-header-inner">\n                        <div class="panel-header-buttons"/>\n                        <div class="panel-header-text"/>\n                    </div>\n                </div>\n                <div class="unified-panel-controls"/>'},_templateBody:function(t){return'<div class="unified-panel-body"/>'},_templateFooter:function(t){return['<div class="unified-panel-footer">','<div class="panel-collapse ',r.default.escape(this.id),'"/>','<div class="drag"/>',"</div>"].join("")},events:{"mousedown .unified-panel-footer > .drag":"_mousedownDragHandler","click .unified-panel-footer > .panel-collapse":"toggle"},_mousedownDragHandler:function(t){var e=this,n="left"===this.id,i=t.pageX,r=e.$el.width();function o(t){var a=t.pageX-i,o=n?r+a:r-a;o=Math.min(d,Math.max(c,o)),e.resize(o)}a()("#dd-helper").show().on("mousemove",o).one("mouseup",(function(t){a()(this).hide().off("mousemove",o)}))},resize:function(t){return this.$el.css("width",t),this.$center().css(this.id,t),this},show:function(){var t=this;if(this.hidden&&!this.motionQueue){this.motionQueue=2;var e={},n=this.id;e[n]=0,this.$el.css(n,-this.saved_size).css("width",this.saved_size).animate(e,"fast",(function(){return t.motionQueue--})),e[n]=this.saved_size,this.$center().animate(e,"fast",(function(){return t.motionQueue--})),this.hidden=!1,this.$toggleButton().removeClass("hidden")}return this},hide:function(){var t=this;if(!this.hidden&&!this.motionQueue){this.motionQueue=2;var e={},n=this.id;this.saved_size=this.$el.width(),e[n]=-this.saved_size,this.resize(0),this.$el.animate(e,"fast",(function(){return t.motionQueue--})),e[n]=0,this.$center().animate(e,"fast",(function(){return t.motionQueue--})),this.hidden=!0,this.$toggleButton().addClass("hidden")}return this},toggle:function(t){return this.hidden?this.show():this.hide(),this.hiddenByTool=!1,this},handle_minwidth_hint:function(t){return this.$center().width()-(this.hidden?this.saved_size:0)<t?this.hidden||(this.toggle(),this.hiddenByTool=!0):this.hiddenByTool&&(this.toggle(),this.hiddenByTool=!1),self},force_panel:function(t){return"show"==t?this.show():"hide"==t?this.hide():self},toString:function(){return"SidePanel(".concat(this.id,")")}}),h=u.extend({id:"left"}),f=u.extend({id:"right"}),p=s.a.View.extend({initialize:function(t){this.setElement(a()(this.template())),this.$frame=this.$(".center-frame"),this.$panel=this.$(".center-panel"),this.$frame.on("load",this._iframeChangeHandler.bind(this))},_iframeChangeHandler:function(t){var e=t.currentTarget,n=e.contentWindow&&e.contentWindow.location,i=Object(l.a)();try{n&&n.host&&(a()(e).show(),this.$panel.empty().hide(),i.trigger("center-frame:load",{fullpath:n.pathname+n.search+n.hash,pathname:n.pathname,search:n.search,hash:n.hash}))}catch(e){console.warn("_iframeChangeHandler error",t,n,i)}},display:function(t,e){var n,i=Object(l.a)(),a=this.$frame[0].contentWindow||{};try{n=a.onbeforeunload&&a.onbeforeunload()}catch(t){a={},console.warn("Iframe unload exception.  This can happen when external content is displayed in the page iframe and causes a CORS violation -- likely harmless.")}if(!n||confirm(n)){a.onbeforeunload=void 0,this.$frame.attr("src","about:blank").hide(),this.$panel.empty().scrollTop(0).append(t.$el||t).show();var r=e?"addClass":"removeClass";this.$panel[r]("p-0"),i.trigger("center-panel:load",t)}},template:function(){return'<div class="center-container"><iframe id="galaxy_main" name="galaxy_main" frameborder="0" class="center-frame" title="galaxy main frame"/><div class="center-panel" /></div>'},toString:function(){return"CenterPanel"}});e.a={SidePanel:u,LeftPanel:h,RightPanel:f,CenterPanel:p}},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,"a",(function(){return a}));var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=e,this.navigation=[]}var e,n,a;return e=t,(n=[{key:"getUrl",value:function(t){if(t)this.navigation.push(t);else{this.navigation.pop();var e=this.navigation.length;t=e>0?this.navigation[e-1]:this.root}return t}},{key:"atRoot",value:function(){return 0==this.navigation.length}}])&&i(e.prototype,n),a&&i(e,a),t}()},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(1),o=n(4),s=n.n(o),l=n(11),c=s.a.Collection.extend({initialize:function(t,e){s.a.Collection.prototype.initialize.call(this,t,e),this.setOrder(e.order||this.order,{silent:!0})},_setUpListeners:function(){return this.on({"changed-order":this.sort})},fetch:function(t){return t=this._buildFetchOptions(t),this.trigger("fetch:started"),s.a.Collection.prototype.fetch.call(this,t)},_buildFetchOptions:function(t){(t=r.default.clone(t)||{}).traditional=!0,t.data=t.data||this._buildFetchData(t);var e=this._buildFetchFilters(t);return r.default.isEmpty(e)||r.default.extend(t.data,this._fetchFiltersToAjaxData(e)),t},_buildFetchData:function(t){var e={};return this.order&&(e.order=this.order),r.default.defaults(r.default.pick(t,this._fetchParams),e)},_fetchParams:["order","limit","offset","view","keys"],_buildFetchFilters:function(t){return r.default.clone(t.filters||{})},_fetchFiltersToAjaxData:function(t){var e={q:[],qv:[]};return r.default.each(t,(function(t,n){void 0!==t&&""!==t&&(!0===t&&(t="True"),!1===t&&(t="False"),null===t&&(t="None"),e.q.push(n),e.qv.push(t))})),e},reset:function(t,e){return this.allFetched=!1,s.a.Collection.prototype.reset.call(this,t,e)},order:null,comparators:{update_time:l.a.buildComparator("update_time",{ascending:!1}),"update_time-asc":l.a.buildComparator("update_time",{ascending:!0}),create_time:l.a.buildComparator("create_time",{ascending:!1}),"create_time-asc":l.a.buildComparator("create_time",{ascending:!0})},setOrder:function(t,e){e=e||{};var n=this.comparators[t];if(r.default.isUndefined(n))throw new Error("unknown order: ".concat(t));if(n!==this.comparator)return this.order=t,this.comparator=n,e.silent||this.trigger("changed-order",e),this}}),d=c.extend({limitPerPage:500,initialize:function(t,e){c.prototype.initialize.call(this,t,e),this.currentPage=e.currentPage||0},getTotalItemCount:function(){return this.length},shouldPaginate:function(){return this.getTotalItemCount()>=this.limitPerPage},getLastPage:function(){return Math.floor(this.getTotalItemCount()/this.limitPerPage)},getPageCount:function(){return this.getLastPage()+1},getPageLimitOffset:function(t){return t=this.constrainPageNum(t),{limit:this.limitPerPage,offset:t*this.limitPerPage}},constrainPageNum:function(t){return Math.max(0,Math.min(t,this.getLastPage()))},fetchPage:function(t,e){var n=this;return t=n.constrainPageNum(t),n.currentPage=t,e=r.default.defaults(e||{},n.getPageLimitOffset(t)),n.trigger("fetching-more"),n.fetch(e).always((function(){n.trigger("fetching-more-done")}))},fetchCurrentPage:function(t){return this.fetchPage(this.currentPage,t)},fetchPrevPage:function(t){return this.fetchPage(this.currentPage-1,t)},fetchNextPage:function(t){return this.fetchPage(this.currentPage+1,t)}}),u=c.extend({limitOnFirstFetch:null,limitPerFetch:100,initialize:function(t,e){c.prototype.initialize.call(this,t,e),this.limitOnFirstFetch=e.limitOnFirstFetch||this.limitOnFirstFetch,this.limitPerFetch=e.limitPerFetch||this.limitPerFetch,this.allFetched=!1,this.lastFetched=e.lastFetched||0},_buildFetchOptions:function(t){return t.remove=t.remove||!1,c.prototype._buildFetchOptions.call(this,t)},fetchFirst:function(t){return t=t?r.default.clone(t):{},this.allFetched=!1,this.lastFetched=0,this.fetchMore(r.default.defaults(t,{reset:!0,limit:this.limitOnFirstFetch}))},fetchMore:function(t){t=r.default.clone(t||{});var e=this;if(!t.reset&&e.allFetched)return a.a.when();t.reset?t.offset=0:void 0===t.offset&&(t.offset=e.lastFetched);var n=t.limit=t.limit||e.limitPerFetch||null;return e.trigger("fetching-more"),e.fetch(t).always((function(){e.trigger("fetching-more-done")})).done((function(t){var i=r.default.isArray(t)?t.length:0;e.lastFetched+=i,(!n||i<n)&&(e.allFetched=!0,e.trigger("all-fetched",this))}))},fetchAll:function(t){t=t||{};var e=this;return(t=r.default.pick(t,"silent")).filters={},e.fetch(t).done((function(){e.allFetched=!0,e.trigger("all-fetched",e)}))}});e.a={ControlledFetchCollection:c,PaginatedCollection:d,InfinitelyScrollingCollection:u}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(3),o=1e3;try{o=localStorage.getItem("collectionFuzzyCountDefault")||o}catch(t){console.debug(t)}var s={defaults:{history_id:null,history_content_type:null,hid:null,visible:!0},idAttribute:"type_id",hidden:function(){return!this.get("visible")},isVisible:function(t,e){var n=!0;return t||!this.get("deleted")&&!this.get("purged")||(n=!1),e||this.get("visible")||(n=!1),n},urlRoot:"".concat(Object(r.getAppRoot)(),"api/histories/"),url:function(){var t=this.get("history_content_type"),e=this.get("history_id"),n=this.get("id"),i="".concat(this.urlRoot).concat(e,"/contents/").concat(t,"s/").concat(n);return"dataset_collection"==t&&(i="".concat(i,"?view=element-reference&fuzzy_count=").concat(o)),i},hide:function(t){return this.get("visible")?this.save({visible:!1},t):a.a.when()},unhide:function(t){return this.get("visible")?a.a.when():this.save({visible:!0},t)},toString:function(){return[this.get("type_id"),this.get("hid"),this.get("name")].join(":")}};e.a={HistoryContentMixin:s}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(1),l=n(63),c=n(153),d=n(11),u=n(2),h=n.n(u),f=(n(229),o.a.View.extend(d.a.LoggableMixin).extend({_logNamespace:"list",viewClass:l.c.ListItemView,collectionClass:o.a.Collection,tagName:"div",className:"list-panel",fxSpeed:"fast",emptyMsg:h()("This list is empty"),noneFoundMsg:h()("No matching items found"),searchPlaceholder:h()("search"),initialize:function(t,e){(t=t||{}).logger&&(this.logger=t.logger),this.log("".concat(this,".initialize:"),t),this.fxSpeed=s.default.has(t,"fxSpeed")?t.fxSpeed:this.fxSpeed,this.filters=[],this.searchFor=t.searchFor||"",this.selecting=void 0===t.selecting||t.selecting,this.selected=t.selected||[],this.lastSelected=null,this.dragItems=t.dragItems||!1,this.viewClass=t.viewClass||this.viewClass,this.views=[],this.collection=t.collection||this._createDefaultCollection(),this.filters=t.filters||[],this.$scrollContainer=t.$scrollContainer||this.$scrollContainer,this.title=t.title||"",this.subtitle=t.subtitle||"",this._setUpListeners()},_setUpListeners:function(){return this.off(),this.on({error:function(t,e,n,i,a){console.error(t,e,n,i,a)},loading:function(){this._showLoadingIndicator("loading...",40)},"loading-done":function(){this._hideLoadingIndicator(40)}}),this.once("rendered",(function(){this.trigger("rendered:initial",this)})),this._setUpCollectionListeners(),this._setUpViewListeners(),this},_createDefaultCollection:function(){return new this.collectionClass([])},_setUpCollectionListeners:function(){return this.log("".concat(this,"._setUpCollectionListeners"),this.collection),this.stopListening(this.collection),this.listenTo(this.collection,{error:function(t,e,n,i,a){this.trigger("error",t,e,n,i,a)},update:function(t,e){var n=e.changes;return e.renderAll||n.added.length+n.removed.length>1?this.renderItems():1===n.added.length?this.addItemView(s.default.first(n.added),t,e):1===n.removed.length?this.removeItemView(s.default.first(n.removed),t,e):void 0}}),this},_setUpViewListeners:function(){this.log("".concat(this,"._setUpViewListeners")),this.on({"view:selected":function(t,e){if(e&&e.shiftKey&&this.lastSelected){var n=this.viewFromModelId(this.lastSelected);n&&this.selectRange(t,n)}else e&&e.altKey&&!this.selecting&&this.showSelectors();this.selected.push(t.model.id),this.lastSelected=t.model.id},"view:de-selected":function(t,e){this.selected=s.default.without(this.selected,t.model.id)}})},render:function(t){this.log("".concat(this,".render"),t);var e=this._buildNewRender();return this._setUpBehaviors(e),this._queueNewRender(e,t),this},_buildNewRender:function(){this.debug("".concat(this,"(ListPanel)._buildNewRender"));var t=a()(this.templates.el({},this));return this._renderControls(t),this._renderTitle(t),this._renderSubtitle(t),this._renderSearch(t),this.renderItems(t),t},_renderControls:function(t){this.debug("".concat(this,"(ListPanel)._renderControls"));var e=a()(this.templates.controls({},this));return t.find(".controls").replaceWith(e),e},_renderTitle:function(t){},_renderSubtitle:function(t){},_queueNewRender:function(t,e){e=void 0===e?this.fxSpeed:e;var n=this;n.log("_queueNewRender:",t,e),a()(n).queue("fx",[function(t){n.$el.fadeOut(e,t)},function(e){n._swapNewRender(t),e()},function(t){n.$el.fadeIn(e,t)},function(t){n.trigger("rendered",n),t()}])},_swapNewRender:function(t){return this.$el.empty().attr("class",this.className).append(t.children()),this.selecting&&this.showSelectors(0),this},_setUpBehaviors:function(t){return t=t||this.$el,this.$controls(t).find("[title]").tooltip(),this._renderMultiselectActionMenu(t),this},_renderMultiselectActionMenu:function(t){var e=(t=t||this.$el).find(".list-action-menu"),n=this.multiselectActions();if(!n.length)return e.empty();var i=a()('<div class="list-action-menu btn-group">\n                    <button class="list-action-menu-btn btn btn-secondary dropdown-toggle" data-toggle="dropdown">\n                        '.concat(h()("For all selected"),'...\n                    </button>\n                    <div class="dropdown-menu float-right" role="menu"/>\n                </div>')),r=n.map((function(t){var e='<a class="dropdown-item" href="javascript:void(0);">'.concat(t.html,"</a>");return a()(e).click((function(e){return e.preventDefault(),t.func(e)}))}));return i.find(".dropdown-menu").append(r),e.replaceWith(i),i},multiselectActions:function(){return[]},$scrollContainer:function(t){return(t||this.$el).parent().parent()},$controls:function(t){return(t||this.$el).find("> .controls")},$list:function(t){return(t||this.$el).find("> .list-items")},$messages:function(t){return(t||this.$el).find("> .controls .messages")},$emptyMessage:function(t){return(t||this.$el).find("> .empty-message")},renderItems:function(t){t=t||this.$el;var e=this;e.log("".concat(this,".renderItems"),t);var n=e.$list(t);e.freeViews();var i=e._filterCollection();return e.views=i.map((function(t){return e._createItemView(t)})),n.empty(),e.views.length&&e._attachItems(t),e._renderEmptyMessage(t).toggle(!e.views.length),e.trigger("views:ready",e.views),e.views},_filterCollection:function(){return this.collection.filter(s.default.bind(this._filterItem,this))},_filterItem:function(t){return s.default.every(this.filters.map((function(e){return e.call(t)})))&&(!this.searchFor||t.matchesAll(this.searchFor))},_createItemView:function(t){var e=new(this._getItemViewClass(t))(s.default.extend(this._getItemViewOptions(t),{model:t}));return this._setUpItemViewListeners(e),e},_destroyItemView:function(t){this.stopListening(t),this.views=s.default.without(this.views,t)},_destroyItemViews:function(t){var e=this;return e.views.forEach((function(t){e.stopListening(t)})),e.views=[],e},freeViews:function(){return this._destroyItemViews()},_getItemViewClass:function(t){return this.viewClass},_getItemViewOptions:function(t){return{fxSpeed:this.fxSpeed,expanded:!1,selectable:this.selecting,selected:s.default.contains(this.selected,t.id),draggable:this.dragItems}},_setUpItemViewListeners:function(t){var e=this;return this.listenTo(t,"all",(function(){var t=Array.prototype.slice.call(arguments,0);t[0]="view:".concat(t[0]),e.trigger.apply(e,t)})),this.listenTo(t,"draggable:dragstart",(function(t,e){var n={},i=this.getSelectedModels();n=i.length?i.toJSON():[e.model.toJSON()],t.dataTransfer.setData("text",JSON.stringify(n))}),this),e},_attachItems:function(t){var e=this;return this.$list(t).append(this.views.map((function(t){return e._renderItemView$el(t)}))),this},_renderItemView$el:function(t){return t.render(0).$el},_renderEmptyMessage:function(t){this.debug("_renderEmptyMessage",t,this.searchFor);var e=this.searchFor?this.noneFoundMsg:this.emptyMsg;return this.$emptyMessage(t).text(e)},expandAll:function(){s.default.each(this.views,(function(t){t.expand()}))},collapseAll:function(){s.default.each(this.views,(function(t){t.collapse()}))},addItemView:function(t,e,n){var i=this,r=i._filterCollection().indexOf(t);if(-1!==r){var o=i._createItemView(t);return a()(o).queue("fx",[function(t){i.$emptyMessage().is(":visible")?i.$emptyMessage().fadeOut(i.fxSpeed,t):t()},function(t){i._attachView(o,r),t()}]),o}},_attachView:function(t,e,n){n=!!s.default.isUndefined(n)||n,e=e||0;var i=this;return i.views.splice(e,0,t),i._insertIntoListAt(e,i._renderItemView$el(t).hide()),i.trigger("view:attached",t),n?t.$el.slideDown(i.fxSpeed,(function(){i.trigger("view:attached:rendered")})):(t.$el.show(),i.trigger("view:attached:rendered")),t},_insertIntoListAt:function(t,e){var n=this.$list();return 0===t?n.prepend(e):n.children().eq(t-1).after(e),e},removeItemView:function(t,e,n){var i=this,r=s.default.find(i.views,(function(e){return e.model===t}));if(r)return i.views=s.default.without(i.views,r),i.trigger("view:removed",r),a()({}).queue("fx",[function(t){r.$el.fadeOut(i.fxSpeed,t)},function(t){r.remove(),i.trigger("view:removed:rendered"),i.views.length?t():i._renderEmptyMessage().fadeIn(i.fxSpeed,t)}]),r},viewFromModelId:function(t){return s.default.find(this.views,(function(e){return e.model.id===t}))},viewFromModel:function(t){return t?this.viewFromModelId(t.id):void 0},viewsWhereModel:function(t){return this.views.filter((function(e){return s.default.isMatch(e.model.attributes,t)}))},viewRange:function(t,e){if(t===e)return t?[t]:[];var n=this.views.indexOf(t),i=this.views.indexOf(e);return-1===n||-1===i?n===i?[]:-1===n?[e]:[t]:n<i?this.views.slice(n,i+1):this.views.slice(i,n+1)},_renderSearch:function(t){return t.find(".controls .search-input").searchInput({placeholder:this.searchPlaceholder,initialVal:this.searchFor,onfirstsearch:s.default.bind(this._firstSearch,this),onsearch:s.default.bind(this.searchItems,this),onclear:s.default.bind(this.clearSearch,this),advsearchlink:!0}),t},_firstSearch:function(t){return this.log("onFirstSearch",t),this.searchItems(t)},searchItems:function(t,e){if(this.log("searchItems",t,this.searchFor,e),!e&&this.searchFor===t)return this;this.searchFor=t,this.renderItems(),this.trigger("search:searching",t,this);var n=this.$("> .controls .search-query");return n.val()!==t&&n.val(t),this},clearSearch:function(t){return this.searchFor="",this.trigger("search:clear",this),this.$("> .controls .search-query").val(""),this.renderItems(),this},THROTTLE_SELECTOR_FX_AT:20,showSelectors:function(t){t=void 0!==t?t:this.fxSpeed,this.selecting=!0,this.$(".list-actions").slideDown(t),t=this.views.length>=this.THROTTLE_SELECTOR_FX_AT?0:t,s.default.each(this.views,(function(e){e.showSelector(t)}))},hideSelectors:function(t){t=void 0!==t?t:this.fxSpeed,this.selecting=!1,this.$(".list-actions").slideUp(t),t=this.views.length>=this.THROTTLE_SELECTOR_FX_AT?0:t,s.default.each(this.views,(function(e){e.hideSelector(t)})),this.selected=[],this.lastSelected=null},toggleSelectors:function(){this.selecting?this.hideSelectors():this.showSelectors()},selectAll:function(t){s.default.each(this.views,(function(e){e.select(t)}))},deselectAll:function(t){this.lastSelected=null,s.default.each(this.views,(function(e){e.deselect(t)}))},selectRange:function(t,e){var n=this.viewRange(t,e);return s.default.each(n,(function(t){t.select()})),n},getSelectedViews:function(){return s.default.filter(this.views,(function(t){return t.selected}))},getSelectedModels:function(){return new this.collection.constructor(s.default.map(this.getSelectedViews(),(function(t){return t.model})))},_showLoadingIndicator:function(t,e,n){this.debug("_showLoadingIndicator",this.indicator,t,e,n),e=void 0!==e?e:this.fxSpeed,this.indicator||(this.indicator=new c.a.LoadingIndicator(this.$el),this.debug("\t created",this.indicator)),this.$el.is(":visible")?(this.$el.fadeOut(e),this.indicator.show(t,e,n)):this.indicator.show(0,n)},_hideLoadingIndicator:function(t,e){this.debug("_hideLoadingIndicator",this.indicator,t,e),t=void 0!==t?t:this.fxSpeed,this.indicator&&this.indicator.hide(t,e)},scrollPosition:function(){return this.$scrollContainer().scrollTop()},scrollTo:function(t,e){return e=e||0,this.$scrollContainer().animate({scrollTop:t},e),this},scrollToTop:function(t){return this.scrollTo(0,t)},scrollToItem:function(t,e){return this},scrollToId:function(t,e){return this.scrollToItem(this.viewFromModelId(t),e)},events:{"click .select-all":"selectAll","click .deselect-all":"deselectAll"},toString:function(){return"ListPanel(".concat(this.collection,")")}}));f.prototype.templates={el:d.a.wrapTemplate(["<div>",'<div class="controls"></div>','<div class="list-items"></div>','<div class="empty-message infomessagesmall"></div>',"</div>"]),controls:d.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- view.title %></div>',"</div>",'<div class="subtitle"><%- view.subtitle %></div>','<div class="actions"></div>','<div class="messages"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',h()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',h()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>","</div>"])};var p,m=f.extend({modelCollectionKey:"contents",initialize:function(t){f.prototype.initialize.call(this,t),this.selecting=void 0!==t.selecting&&t.selecting,this.setModel(this.model,t)},setModel:function(t,e){if(e=e||{},this.debug("".concat(this,".setModel:"),t,e),this.freeModel(),this.freeViews(),t){var n=this.model?this.model.get("id"):null;this.model=t,this.logger&&(this.model.logger=this.logger),this._setUpModelListeners(),this.stopListening(this.collection),this.collection=this.model[this.modelCollectionKey]||e.collection||this._createDefaultCollection(),this._setUpCollectionListeners(),n&&t.get("id")!==n&&this.trigger("new-model",this)}return this},freeModel:function(){return this.model&&this.stopListening(this.model),this},_setUpModelListeners:function(){return this.log("".concat(this,"._setUpModelListeners"),this.model),this.listenTo(this.model,"error",(function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("error"),this.trigger.apply(this,t)}),this),this.logger&&this.listenTo(this.model,"all",(function(t){this.info("".concat(this,"(model)"),t,arguments)})),this},_renderControls:function(t){this.debug("".concat(this,"(ModelListPanel)._renderControls"));var e=this.model?this.model.toJSON():{},n=a()(this.templates.controls(e,this));return t.find(".controls").replaceWith(n),n},toString:function(){return"ModelListPanel(".concat(this.model,")")}});m.prototype.templates=(p=d.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- model.name %></div>',"</div>",'<div class="subtitle"><%- view.subtitle %></div>','<div class="actions"></div>','<div class="messages"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',h()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',h()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>","</div>"]),s.default.extend(s.default.clone(f.prototype.templates),{controls:p})),e.a={ListPanel:f,ModelListPanel:m}},function(t,e,n){"use strict";var i,a=n(1),r=n(96),o=n(11),s=n(2),l=n.n(s),c=r.b.DatasetListItemView,d=c.extend({className:"".concat(c.prototype.className," history-content"),initialize:function(t,e){c.prototype.initialize.call(this,t,e)},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"HDAListItemView(".concat(t,")")}});d.prototype.templates=(i=a.default.extend({},c.prototype.templates.warnings,{hidden:o.a.wrapTemplate(["<% if( !dataset.visible ){ %>",'<div class="hidden-msg warningmessagesmall">',l()("This dataset has been hidden"),"</div>","<% } %>"],"dataset")}),a.default.extend({},c.prototype.templates,{titleBar:function(t){return'\n        <div class="title-bar clear" tabindex="0">\n            <span class="state-icon"></span>\n            <div class="title">\n                <span class="hid">'.concat(t.hid,'</span>\n                <span class="name">').concat(a.default.escape(t.name),'</span>\n            </div>\n            </br>\n            <div class="nametags"></div>\n        </div>\n    ')},warnings:i})),e.a={HDAListItemView:d}},function(t,e,n){"use strict";var i=n(1),a=n(4),r=n.n(a),o=n(11),s=n(2),l=n.n(s),c=(n(150),r.a.View.extend(o.a.LoggableMixin).extend(o.a.HiddenUntilActivatedViewMixin).extend({tagName:"div",className:"annotation-display",initialize:function(t){t=t||{},this.tooltipConfig=t.tooltipConfig||{placement:"bottom"},this.listenTo(this.model,"change:annotation",(function(){this.render()})),this.hiddenUntilActivated(t.$activator,t)},render:function(){var t=this;return this.$el.html(this._template()),this.$annotation().make_text_editable({use_textarea:!0,on_finish:function(e){t.$annotation().text(e),t.model.save({annotation:e},{silent:!0}).fail((function(){t.$annotation().text(t.model.previous("annotation"))}))}}),this},_template:function(){var t=this.model.get("annotation");return['<label class="prompt">',l()("Annotation"),"</label>",'<div class="annotation">',i.default.escape(t),"</div>"].join("")},$annotation:function(){return this.$el.find(".annotation")},remove:function(){this.$annotation.off(),this.stopListening(this.model),r.a.View.prototype.remove.call(this)},toString:function(){return["AnnotationEditor(","".concat(this.model),")"].join("")}}));e.a={AnnotationEditor:c}},function(t,e,n){"use strict";var i=n(2),a=n.n(i),r=n(1),o=n(0),s=n.n(o),l=n(4),c=n.n(l),d=n(6),u=n(10),h=n(139),f=n(19),p=c.a.View.extend({initialize:function(t){this.list={},this.options=u.b.merge(t,{title:a()("Repeat"),empty_text:"Not available.",max:null,min:null}),this.button_new=new f.a.Button({icon:"fa-plus",title:"Insert ".concat(this.options.title),tooltip:"Add new ".concat(this.options.title," block"),cls:"btn btn-secondary float-none form-repeat-add",onclick:function(){t.onnew&&t.onnew()}}),this.setElement(s()("<div/>").append(this.$list=s()("<div/>")).append(s()("<div/>").append(this.button_new.$el)))},size:function(){return r.default.size(this.list)},add:function(t){var e=Object(d.a)();if(t.id&&!this.list[t.id]){var n=new f.a.Button({icon:"fa-trash-o",tooltip:a()("Delete this repeat block"),cls:"ui-button-icon-plain form-repeat-delete",onclick:function(){t.ondel&&t.ondel()}}),i=new h.a.View({id:t.id,title:a()("placeholder"),cls:t.cls||"ui-portlet-section",operations:{button_delete:n}});i.append(t.$el),i.$el.addClass("section-row").hide(),this.list[t.id]=i,this.$list.append(i.$el.fadeIn("fast")),this.options.max>0&&this.size()>=this.options.max&&this.button_new.disable(),this._refresh()}else e.emit.debug("form-repeat::add()","Duplicate or invalid repeat block id.")},del:function(t){var e=Object(d.a)();this.list[t]?(this.$list.find("#".concat(t)).remove(),delete this.list[t],this.button_new.enable(),this._refresh()):e.emit.debug("form-repeat::del()","Invalid repeat block id.")},delAll:function(){for(var t in this.list)this.del(t)},hideOptions:function(){this.button_new.$el.hide(),r.default.each(this.list,(function(t){t.hideOperation("button_delete")})),r.default.isEmpty(this.list)&&this.$el.append(s()("<div/>").addClass("form-text text-muted").html(this.options.empty_text))},_refresh:function(){var t=0;for(var e in this.list){var n=this.list[e];n.title("".concat(++t,": ").concat(this.options.title)),n[this.size()>this.options.min?"showOperation":"hideOperation"]("button_delete")}}});e.a={View:p}},function(t,e,n){"use strict";var i={computed:{explicitMetaAttributes:function(){var t=this;return this.items.filter((function(e){return-1==t.implicitMicrodataProperties.indexOf(e.attribute)}))},items:function(){var t=[];for(var e in this.thing)"class"!=e&&t.push({attribute:e,value:this.thing[e]});return t},email:function(){var t=this.thing.email;return t&&0==t.indexOf("mailto:")&&(t=t.slice("mailto:".length)),t},url:function(){return this.thing.url}}},a=n(26),r=n(20),o=n(17),s=n(487);r.c.add(s.a,o.K,o.l);var l={mixins:[i],components:{FontAwesomeIcon:a.a},props:{person:{type:Object},hoverPlacement:{type:String,default:"left"}},data:function(){return{implicitMicrodataProperties:["name","givenName","email","familyName","url","identifier"],thing:this.person}},computed:{name:function(){var t=this.person.name,e=this.person.familyName,n=this.person.givenName;if(null==t&&(e||n)){var i=this.person.honorificPrefix,a=this.person.honorificSuffix;t=n&&e?n+" "+e:n||e,i&&(t=i+" "+t),a&&(t=t+" "+a)}return t},orcidLink:function(){var t=this.person.identifier;return t&&t.indexOf("orcid.org/")>=0?t:null}}},c=n(5),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{itemprop:"creator",itemscope:"",itemtype:"https://schema.org/Person"}},[n("font-awesome-icon",{ref:"button",attrs:{icon:"user"}}),t._v(" "),n("b-popover",{attrs:{triggers:"click blur",placement:t.hoverPlacement,target:this.$refs.button||"works-lazily",title:"Person"}},[n("b-table",{attrs:{striped:"",items:t.items}})],1),t._v(" "),t.name?n("span",[t.person.name?n("meta",{attrs:{itemprop:"name",content:t.person.name}}):t._e(),t._v(" "),t.person.givenName?n("meta",{attrs:{itemprop:"givenName",content:t.person.givenName}}):t._e(),t._v(" "),t.person.familyName?n("meta",{attrs:{itemprop:"familyName",content:t.person.familyName}}):t._e(),t._v("\n        "+t._s(t.name)+"\n        "),t.email?n("span",[t._v("\n            ("),n("span",{attrs:{itemprop:"email",content:t.person.email}},[t._v(t._s(t.email))]),t._v(")\n        ")]):t._e()]):n("span",{attrs:{itemprop:"email",content:t.person.email}},[t._v("\n        "+t._s(t.email)+"\n    ")]),t._v(" "),t.orcidLink?n("a",{attrs:{href:t.orcidLink,target:"_blank"}},[n("link",{attrs:{itemprop:"identifier",href:t.orcidLink}}),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"View orcid.org profile",icon:["fab","orcid"]}})],1):t._e(),t._v(" "),t.url?n("a",{attrs:{href:t.url,target:"_blank"}},[n("link",{attrs:{itemprop:"url",href:t.url}}),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"URL",icon:"external-link-alt"}})],1):t._e(),t._v(" "),t._l(t.explicitMetaAttributes,(function(t){return n("meta",{key:t.attribute,attrs:{itemprop:t.attribute,content:t.value}})})),t._v(" "),t._t("buttons")],2)}),[],!1,null,null,null).exports;r.c.add(o.l,o.e);var u={mixins:[i],components:{FontAwesomeIcon:a.a},props:{organization:{type:Object},hoverPlacement:{type:String,default:"left"}},data:function(){return{implicitMicrodataProperties:["name","email","url","identifier"],thing:this.organization}},computed:{name:function(){return this.organization.name}}},h={components:{OrganizationViewer:Object(c.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{itemprop:"creator",itemscope:"",itemtype:"https://schema.org/Organization"}},[n("font-awesome-icon",{ref:"button",attrs:{icon:"building"}}),t._v(" "),n("b-popover",{attrs:{triggers:"click blur",placement:t.hoverPlacement,target:this.$refs.button||"works-lazily",title:"Organization"}},[n("b-table",{attrs:{striped:"",items:t.items}})],1),t._v(" "),t.name?n("span",[n("span",{attrs:{itemprop:"name"}},[t._v(t._s(t.name))]),t._v(" "),t.email?n("span",[t._v("\n            ("),n("span",{attrs:{itemprop:"email",content:t.organization.email}},[t._v(t._s(t.email))]),t._v(")\n        ")]):t._e()]):t.email?n("span",{attrs:{itemprop:"email",content:t.organization.email}},[t._v("\n        "+t._s(t.email)+"\n    ")]):t._e(),t._v(" "),t.url?n("a",{attrs:{href:t.url,target:"_blank"}},[n("link",{attrs:{itemprop:"url",href:t.url}}),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Organization URL",icon:"external-link-alt"}})],1):t._e(),t._v(" "),t._l(t.explicitMetaAttributes,(function(t){return n("meta",{key:t.attribute,attrs:{itemprop:t.attribute,content:t.value}})})),t._v(" "),t._t("buttons")],2)}),[],!1,null,null,null).exports,PersonViewer:d},props:{creator:{type:Object}}},f=Object(c.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"creative-work-creator"},["Organization"==t.creator.class?n("OrganizationViewer",{attrs:{organization:t.creator},scopedSlots:t._u([{key:"buttons",fn:function(){return[t._t("buttons")]},proxy:!0}],null,!0)}):n("PersonViewer",{attrs:{person:t.creator},scopedSlots:t._u([{key:"buttons",fn:function(){return[t._t("buttons")]},proxy:!0}],null,!0)})],1)}),[],!1,null,null,null);e.a=f.exports},function(t,e,n){"use strict";var i,a=n(1),r=n(24),o=n(90),s=n(118),l=n(2),c=n.n(l),d=n(99),u=n(233),h=n(239),f={props:{collection:{type:Object,required:!0},jobStatesSummary:{required:!0}},components:{ProgressBar:h.a},mixins:[u.a],computed:{loadingNote:function(){return"Loading job data for ".concat(this.collectionTypeDescription)},generatingNote:function(){return"".concat(this.jobsStr," generating a ").concat(this.collectionTypeDescription)},jobSourceType:function(){return this.collection.get("job_source_type")},collectionTypeDescription:function(){return s.a.collectionTypeDescription(this.collection)},simpleDescription:function(){return s.a.collectionDescription(this.collection)},errorDescription:function(){var t=this.jobCount,e=this.jobStatesSummary.numInError();return"a ".concat(this.collectionTypeDescription," with ").concat(e," / ").concat(t," jobs in error")}}},p=n(5),m=Object(p.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return!t.jobSourceType||"Job"==t.jobSourceType||t.isTerminal?n("div",[t._v("\n    "+t._s(t.simpleDescription)+"\n")]):t.jobStatesSummary&&t.jobStatesSummary.hasDetails()?t.isNew?n("div",[n("progress-bar",{attrs:{note:"Creating jobs",loading:!0,"info-progress":1}})],1):t.isErrored?n("div",[t._v("\n    "+t._s(t.errorDescription)+"\n")]):n("div",[n("progress-bar",{attrs:{note:t.generatingNote,"ok-count":t.okCount,"error-count":t.errorCount,"running-count":t.runningCount,"new-count":t.newCount}})],1):n("div",[n("progress-bar",{attrs:{note:t.loadingNote,loading:!0,"info-progress":1}})],1)}),[],!1,null,null,null).exports,_=n(36),g=Object(_.a)(m),v=o.a.DCListItemView,y=v.extend({className:"".concat(v.prototype.className," history-content"),render:function(){var t=v.prototype.render.apply(this,arguments);return this._mountNametags("initialize"),t},_setUpListeners:function(){var t=this;v.prototype._setUpListeners.call(this);var e=function(e,n){t.render(0),t._mountNametags("listener")};this.model.jobStatesSummary&&this.listenTo(this.model.jobStatesSummary,"change",e),this.listenTo(this.model,{"change:tags change:visible change:state":e})},_mountNametags:function(t){var e=this.$el.find(".nametags")[0];if(e){var n=this.model.attributes,i=n.id,a=n.model_class,r=n.tags,o="".concat(a,"-").concat(i);Object(d.b)({storeKey:o,tags:r},e)}},_getFoldoutPanelClass:function(){return s.a.CollectionView},_swapNewRender:function(t){var e;v.prototype._swapNewRender.call(this,t);var n=this.model.jobStatesSummary;e=n?n.new()?"loading":n.errored()?"error":n.terminal()?"ok":n.running()?"running":"queued":this.model.get("job_source_id")?"loading":this.model.get("populated_state")?r.a.OK:r.a.RUNNING,this.$el.addClass("state-".concat(e));var i=this.model,a=this.$el.find(".state-description")[0];return g({jobStatesSummary:n,collection:i},a),this.$el},toString:function(){var t=this.model?"".concat(this.model):"(no model)";return"HDCAListItemView(".concat(t,")")}});y.prototype.templates=(i=a.default.extend({},v.prototype.templates.warnings,{hidden:function(t){!t.visible&&'<div class="hidden-msg warningmessagesmall">'.concat(c()("This collection has been hidden"),"</div>")}}),a.default.extend({},v.prototype.templates,{warnings:i,titleBar:function(t){return'\n        <div class="title-bar clear" tabindex="0">\n            <span class="state-icon"></span>\n            <div class="title">\n                <span class="hid">'.concat(t.hid,'</span>\n                <span class="name">').concat(a.default.escape(t.name),'</span>\n            </div>\n            <div class="state-description">\n            </div>\n            <div class="nametags">\x3c!-- Nametags mount here (hdca-li) --\x3e</div>\n        </div>\n    ')}}));e.a={HDCAListItemView:y}},function(t,e,n){"use strict";var i=n(7),a=n.n(i),r=n(103),o=n(6),s=n(21),l={mixins:[r.a],props:{history:{type:String,required:!0}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,hasValue:!1}},created:function(){this.load()},methods:{formatRows:function(){},clicked:function(t){this.modalShow=!1,this.callback(t),this.$emit("onOk",t)},onCancel:function(){this.modalShow=!1,this.$emit("onCancel")},load:function(){var t=this;this.filter=null,this.optionsShow=!1;var e=Object(o.a)(),n="".concat(e.root,"api/histories/").concat(this.history,"/contents?type=dataset_collection");a.a.get(n).then((function(e){t.items=e.data.map((function(t){return{id:t.id,label:t.name,time:t.created_time,isLeaf:!0}})),t.formatRows(),t.optionsShow=!0})).catch((function(e){t.errorMessage=Object(s.a)(e)}))}}},c=n(5),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("selection-dialog",{attrs:{"error-message":t.errorMessage,"options-show":t.optionsShow,"modal-show":t.modalShow,"hide-modal":t.onCancel},scopedSlots:t._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[t.optionsShow?n("data-dialog-table",{attrs:{items:t.items,multiple:!1,filter:t.filter,"leaf-icon":"fa fa-folder"},on:{clicked:t.clicked,load:t.load}}):t._e()]},proxy:!0}])})}),[],!1,null,null,null);e.a=d.exports},function(t,e,n){"use strict";var i=n(7),a=n.n(i),r=n(21),o=n(3),s=n(6);function l(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var c,d,u={props:{id:{type:String,required:!0}},data:function(){return{decoded_id:null}},created:function(){this.decodeId(this.id)},computed:{isAdmin:function(){var t,e=Object(s.a)()||window.parent.Galaxy;return(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.isAdmin())||!1}},methods:{decodeId:(c=regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isAdmin){t.next=12;break}return n="".concat(Object(o.getAppRoot)(),"api/configuration/decode/").concat(e),t.prev=2,t.next=5,a.a.get(n);case 5:i=t.sent,this.decoded_id=i.data.decoded_id,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),Object(r.b)(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})),d=function(){var t=this,e=arguments;return new Promise((function(n,i){var a=c.apply(t,e);function r(t){l(a,n,i,r,o,"next",t)}function o(t){l(a,n,i,r,o,"throw",t)}r(void 0)}))},function(t){return d.apply(this,arguments)})}},h=n(5),f=Object(h.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return this.decoded_id?e("span",[this._v("("+this._s(this.decoded_id)+")")]):this._e()}),[],!1,null,null,null);e.a=f.exports},function(t,e,n){"use strict";var i=n(3),a=n(7),r=n.n(a),o=n(29),s=n(26),l=n(20),c=n(17);l.c.add(c.l);var d={components:{LoadingSpan:o.a,FontAwesomeIcon:s.a},props:{licenseId:{type:String},inputLicenseInfo:{type:Object,required:!1},title:{type:String,default:null}},data:function(){return{license:this.inputLicenseInfo}},created:function(){null==this.license&&this.fetchLicense()},methods:{fetchLicense:function(){var t=this;this.license=null;var e="".concat(Object(i.getAppRoot)(),"api/licenses/").concat(this.licenseId);r.a.get(e).then((function(t){return t.data})).then((function(e){t.license=e}))}},watch:{licenseId:function(t,e){t!=e&&this.fetchLicense()}}},u=n(5),h=Object(u.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return null==t.license?n("loading-span",{attrs:{message:"Loading license information"}}):t.license.name?n("div",{staticClass:"text-muted"},[n("link",{attrs:{itemprop:"license",href:t.license.licenseId}}),t._v(" "),t.title?n("span",[t._v("\n        "+t._s(t.title)+"\n    ")]):t._e(),t._v("\n    "+t._s(t.license.name)+"\n    "),n("a",{attrs:{target:"_blank",href:t.license.url}},[n("font-awesome-icon",{attrs:{icon:"external-link-alt"}})],1),t._v(" "),t._t("buttons")],2):n("div",[t._v("\n    Unknown License ("),n("i",[t._v(t._s(t.license.url))]),t._v(")\n    "),t._t("buttons")],2)}),[],!1,null,null,null);e.a=h.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(72),a=n(241),r=n.n(a);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=/(\w+=\w+)|(\w+="(\w|\s)+")/g,d=/[^\w]/g,u=/'|"/g,h=/\s+/g,f=new Set(["name","history_content_type","file_ext","extension","misc_info","state","hid","tag"]),p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.filterText="",this.showDeleted=!1,this.showHidden=!1,Object.assign(this,e)}var e,n,i;return e=t,(n=[{key:"clone",value:function(){return new t(this)}},{key:"export",value:function(){return{filterText:this.filterText,showDeleted:this.showDeleted,showHidden:this.showHidden}}},{key:"parseTextFilter",value:function(){var t=this.filterText,e=new Map;if(!t.length)return e;var n=t.match(c);return null===n&&t.length&&(n=["name=".concat(t)]),n.reduce((function(t,e){var n=o(e.split("="),2),i=n[0],a=n[1],r=i.replace(d,"");if(f.has(r)){var s=a.replace(u,"").replace(h," ");t.set(r,s)}return t}),e)}},{key:"report",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"params",e=this.showDeleted,n=this.showHidden,i=this.filterText,a=e?"showDeleted":"",r=n?"showHidden":"";console.groupCollapsed(t,"(".concat(a," ").concat(r)),console.log("showDeleted",e),console.log("showHidden",n),console.log("filterText",i),console.groupEnd()}},{key:"pageSize",get:function(){return t.pageSize}}])&&l(e.prototype,n),i&&l(e,i),t}();p.pageSize=i.a.caching.pageSize,p.equals=function(t,e){return r()(t.export(),e.export())}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c}));function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var r={components:{WrapChildren:{props:{tag:{type:String,required:!1,default:"ul"},childTag:{type:String,required:!1,default:"li"}},render:function(t){var e=this,n=(this.$slots.default||[]).map((function(n){return t(e.childTag,[n])}));return t(this.tag,n)}},Intersect:{props:{threshold:{type:[Array,Number],required:!1,default:function(){return[.5]}},root:{type:HTMLElement,required:!1,default:function(){return null}},rootMargin:{type:String,required:!1,default:function(){return"0px 0px 0px 0px"}}},methods:{handler:function(t){var e=this;t.forEach((function(t){var n=t.isIntersecting,i=t.target,a=e.elemToKey.get(i),r=n?"enter":"leave";e.$emit(r,a,t)}))},getCurrentVnodes:function(){var t=[];try{t=this.$slots.default[0].componentOptions.children.filter((function(t){return t.tag}))}catch(t){throw console.warn("Nothing in slots?",t),t}return t},registerObservers:function(t){var e=this;t.forEach((function(t){var n=t.key,i=t.elm;e.observer.observe(i),e.elemToKey.set(i,n)}))},cleanupObservers:function(t){var e=this,n=t.reduce((function(t,e){return t.add(e.elm)}),new Set);Array.from(this.elemToKey.entries()).forEach((function(t){var a=i(t,2),r=a[0],o=a[1];n.has(r)||(e.observer.unobserve(r),e.$emit("destroy",o),e.elemToKey.delete(r))}))}},mounted:function(){this.elemToKey=new Map;var t=this.threshold,e=this.root,n=this.rootMargin;this.observer=new IntersectionObserver(this.handler,{threshold:t,root:e,rootMargin:n});var i=this.getCurrentVnodes();this.registerObservers(i)},updated:function(){var t=this.getCurrentVnodes();this.cleanupObservers(t),this.registerObservers(t)},beforeDestroy:function(){this.observer.disconnect()},render:function(){return this.$slots.default}}},props:{startingHeight:{type:Number,required:!1,default:50}},data:function(){return{height:this.startingHeight,overflowKeys:new Set}},computed:{overflow:function(){var t=this;return this.getVnodes().filter((function(e){return t.overflowKeys.has(e.key)})).map((function(e){return t.getMenuDataFromNode(e)}))},requiresFixedHeight:function(){return{height:"".concat(this.height,"px")}}},methods:{onShowItem:function(t,e){this.setHeight(e),this.removeFromOverflow(t)},onHideItem:function(t){this.addToOverflow(t)},onItemDestroy:function(t){this.removeFromOverflow(t)},setHeight:function(t){if(t){var e=t.boundingClientRect.height;this.height=Math.max(this.height,e)}},addToOverflow:function(t){if(!this.overflowKeys.has(t)){var e=new Set(this.overflowKeys);e.add(t),this.overflowKeys=e}},removeFromOverflow:function(t){if(this.overflowKeys.has(t)){var e=new Set(this.overflowKeys);e.delete(t),this.overflowKeys=e}},getVnodes:function(){return(this.$slots.default||[]).filter((function(t){return t.tag}))},getMenuDataFromNode:function(t){var e=t.componentOptions||{};return{attrs:Object.assign({},t.data&&t.data.attrs||{},e.propsData||{}),on:Object.assign({},t.data&&t.data.on||{},e.listeners||{}),key:t.key}}}},o=(n(826),n(5)),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"priority-menu"},[n("Intersect",{on:{enter:t.onShowItem,leave:t.onHideItem,destroy:t.onItemDestroy}},[n("WrapChildren",{staticClass:"primary",style:t.requiresFixedHeight},[t._t("default")],2)],1),t._v(" "),t._t("overflow",[t.overflow.length?n("div",{staticClass:"overflow"},[n("b-dropdown",{attrs:{"no-caret":"",right:"",variant:"link",size:"sm",boundary:"window","toggle-class":"p-1"},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("i",{staticClass:"fas fa-ellipsis-v"}),t._v(" "),n("span",{staticClass:"sr-only"},[t._v("...")])]},proxy:!0}],null,!1,1504307886)},[t._v(" "),t._l(t.overflow,(function(e){return n("b-dropdown-item",t._g(t._b({key:e.key},"b-dropdown-item",e.attrs,!1),e.on),[t._v("\n                    "+t._s(t._f("localize")(e.attrs.title))+"\n                ")])}))],2)],1):t._e()],{overflow:t.overflow})],2)}),[],!1,null,null,null).exports,l={props:{icon:{type:String,required:!1,default:""},title:{type:String,required:!0}}},c=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",t._g(t._b({staticClass:"p-1",attrs:{title:t._f("localize")(t.title),variant:"link",size:"sm"}},"b-button",t.$attrs,!1),t.$listeners),[t.icon?n("i",{class:t.icon}):t._e(),t._v(" "),n("span",{staticClass:"sr-only"},[t._v(t._s(t._f("localize")(t.title)))])])}),[],!1,null,null,null).exports},,,function(t,e,n){"use strict";var i=n(2),a=n.n(i),r=n(1),o=n(0),s=n.n(o),l=n(4),c=n.n(l),d=n(3),u=(n(476),window.Tour);s.a.fn.tooltip.Constructor.Default.whiteList.button=["data-role"];var h=Object(d.getAppRoot)(),f={storage:window.sessionStorage,onEnd:function(){window.sessionStorage.removeItem("activeGalaxyTour")},delay:150,orphan:!0},p=function(t){return r.default.each(t.steps,(function(t){t.preclick&&(t.onShow=function(){r.default.each(t.preclick,(function(t){s()(t).click()}))}),t.postclick&&(t.onHide=function(){r.default.each(t.postclick,(function(t){s()(t).click()}))}),t.textinsert&&(t.onShown=function(){s()(t.element).val(t.textinsert).trigger("change")}),t.path&&(console.warn("This Galaxy Tour is attempting to use path navigation.  This is known to be unstable and can possibly get the Galaxy client 'stuck' in a tour, and at this time is not allowed."),delete t.path)})),t},m=c.a.Model.extend({urlRoot:"".concat(h,"api/tours")}),_=c.a.Collection.extend({url:"".concat(h,"api/tours"),model:m}),g=c.a.View.extend({title:a()("Tours"),initialize:function(){var t=this;this.setElement("<div/>"),this.model=new _,this.model.fetch({success:function(){t.render()},error:function(){console.error("Failed to fetch tours.")}})},render:function(){var t=r.default.template('\n    <h2>Galaxy Tours</h2>\n    <p>This page presents a list of interactive tours available on this Galaxy server.\n    Select any tour to get started (and remember, you can click \'End Tour\' at any time).</p>\n\n<div class="row mb-3">\n    <div class="col-12 btn-group" role="group" aria-label="Tag selector">\n        <% _.each(tourtagorder, function(tag) { %>\n        <button class="btn btn-primary tag-selector-button" tag-selector-button="<%- tag.key %>">\n            <%- tag.name %>\n        </button>\n        <% }); %>\n    </div>\n</div>\n\n<div class="row mb-3">\n    <div class="col-12">\n    <h4>Tours</h4>\n    <ul class="list-group">\n    <% _.each(tours, function(tour) { %>\n        <li class="list-group-item" tags="<%- tour.attributes.tags_lc %>">\n            <a href="/tours/<%- tour.id %>" class="tourItem" data-tour.id=<%- tour.id %>>\n                <%- tour.attributes.name || tour.id %>\n            </a>\n             - <%- tour.attributes.description || "No description given." %>\n             <% _.each(tour.attributes.tags, function(tag) { %>\n                <span class="badge badge-primary">\n                    <%- tag.charAt(0).toUpperCase() + tag.slice(1) %>\n                </span>\n             <% }); %>\n        </li>\n    <% }); %>\n    </ul>\n    </div>\n</div>'),e={};r.default.each(this.model.models,(function(t){t.attributes.tags_lc=[],null===t.attributes.tags?(void 0===e.Untagged&&(e.Untagged={name:"Untagged",tours:[]}),e.Untagged.tours.push(t)):r.default.each(t.attributes.tags,(function(n){var i=n.charAt(0).toUpperCase()+n.slice(1);void 0===e[i]&&(e[i]={name:i,tours:[]}),t.attributes.tags_lc.push(n.toLowerCase()),e[i].tours.push(t)}))}));var n=[];Object.keys(e).forEach((function(t,e){n.push({name:t,key:t.toLowerCase()})})),this.$el.html(t({tours:this.model.models,tourtags:e,tourtagorder:n})).on("click",".tourItem",(function(t){t.preventDefault(),y(s()(this).data("tour.id"))})).on("click",".tag-selector-button",(function(t){var e=s()(t.target),n=[];e.toggleClass("btn-primary"),e.toggleClass("btn-secondary"),s()(".tag-selector-button.btn-primary").each((function(){n.push(s()(this).attr("tag-selector-button"))})),s()("li.list-group-item").each((function(){if(s()(this).attr("tags")){var t=s()(this).attr("tags").split(",").filter((function(t){return n.indexOf(t.toLowerCase())>-1}));s()(this).css("display",t.length>0?"block":"none")}}))}))}});function v(t){var e=p(t);window.sessionStorage.setItem("activeGalaxyTour",JSON.stringify(t));var n=new u(r.default.extend({steps:e.steps},f));return n.init(),n.goTo(0),n.restart(),n}function y(t){var e="".concat(h,"api/tours/").concat(t);s.a.getJSON(e,(function(t){v(t)}))}e.a={ToursView:g,giveTourWithData:v,giveTourById:y,activeGalaxyTourRunner:function(){var t=JSON.parse(window.sessionStorage.getItem("activeGalaxyTour"));if(t&&(t=p(t))&&t.steps&&window&&window.self===window.top){var e=new u(r.default.extend({steps:t.steps},f));e.init(),e.restart()}}}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var i=new(n(8).default),a={created:function(){this.eventHub=i}},r={install:function(t){t.mixin(a)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n(263),a=n(454);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(d,t);var e,n,i,r=c(d);function d(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),r.apply(this,arguments)}return e=d,(n=[{key:"loadProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.contents_url)throw new Error("missing contents_url",t);s(u(d.prototype),"loadProps",this).call(this,t)}},{key:"totalElements",get:function(){return"element_count"in this?this.element_count:"paired"==this.collection_type?2:void 0}},{key:"collectionCountDescription",get:function(){var t=this.totalElements;return 1==t?"with 1 item":"with ".concat(t," items")}},{key:"collectionType",get:function(){if(this.collection_type)switch(this.collection_type){case"list":return"list";case"paired":return"dataset pair";case"list:paired":return"list of pairs";default:return"nested list"}return null}},{key:"state",get:function(){return this.jobSummary.state||this.populated_state}},{key:"jobSummary",get:function(){return new a.a(this)}}])&&o(e.prototype,n),i&&o(e,i),d}(i.a);h.equals=function(t,e){return JSON.stringify(t)==JSON.stringify(e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return r}));var i=function(){return sessionStorage.getItem("useBetaHistory")},a=function(){sessionStorage.removeItem("useBetaHistory"),location.reload()},r=function(){sessionStorage.setItem("useBetaHistory",1),location.reload(!1)}},,function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));n(241),n(2146),n(747),n(2163),n(2151),n(2162);var i=n(1041),a=(n(616),n(617),n(764),n(2145),n(251));n(275),n(2140),n(489),n(749),n(2150),n(2149);n(78),n(2131),new Map;var r=function(){return Object(i.a)(Object(a.a)((function(t){var e=t.action,n=t.initialMatches,i=void 0===n?[]:n,a=t.doc,r=void 0===a?null:a,s=null;switch(e){case o.INITIAL:i.length&&(s=i[0]);break;case o.REMOVE:s=null;break;case o.UPDATE:case o.ADD:r&&(s=r)}return s})))},o={INITIAL:"INITIAL",ADD:"ADD",UPDATE:"UPDATE",REMOVE:"REMOVE",IGNORE:"IGNORE"}},,,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return h}));var i=n(7),a=n.n(i),r=n(6),o=n(2),s=n.n(o),l="root/login?is_logout_redirect=true";function c(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Object(r.a)(),n=e.session_csrf_token,i="".concat(e.root,"user/logout?session_csrf_token=").concat(n,"&logout_all=").concat(t);a.a.get(i).then((function(t){if(e.user&&e.user.clearSessionStorage(),e.config.enable_oidc){var n=localStorage.getItem("galaxy-provider");return n?(localStorage.removeItem("galaxy-provider"),a.a.get("".concat(e.root,"authnz/logout?provider=").concat(n))):a.a.get("".concat(e.root,"authnz/logout"))}return t})).then((function(t){var n;(null===(n=t.data)||void 0===n?void 0:n.redirect_uri)?window.top.location.href=t.data.redirect_uri:window.top.location.href="".concat(e.root).concat(l)}))}function d(){return c(!0)}function u(){var t,e=Object(r.a)();null===(t=e.user)||void 0===t||t.clearSessionStorage(),window.top.location.href="".concat(e.root).concat(l)}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(r.a)(),n=e.config,i=n.version_minor,a=n.version_major,o=t.release_doc_base_url,l="dev"==i?"https://docs.galaxyproject.org/en/latest/releases/index.html":"".concat(o).concat(a,"/releases/").concat(a,"_announce_user.html"),d=[];d.push({id:"analysis",title:s()("Analyze Data"),url:"",tooltip:s()("Analysis home view")}),d.push({id:"workflow",title:s()("Workflow"),tooltip:s()("Chain tools into workflows"),disabled:!e.user.id,url:"workflows/list",target:"__use_router__"}),e.config.visualizations_visible&&d.push({id:"visualization",title:s()("Visualize"),url:"javascript:void(0)",tooltip:s()("Visualize datasets"),disabled:!e.user.id,menu:[{title:s()("Create Visualization"),url:"visualizations",target:"__use_router__"},{title:s()("Interactive Environments"),url:"visualization/gie_list",target:"galaxy_main"}]}),d.push({id:"shared",title:s()("Shared Data"),url:"javascript:void(0)",tooltip:s()("Access published resources"),menu:[{title:s()("Data Libraries"),url:"library/list"},{title:s()("Histories"),url:"histories/list_published",target:"__use_router__"},{title:s()("Workflows"),url:"workflows/list_published",target:"__use_router__"},{title:s()("Visualizations"),url:"visualizations/list_published",target:"__use_router__"},{title:s()("Pages"),url:"pages/list_published",target:"__use_router__"}]}),e.user.get("is_admin")&&d.push({id:"admin",title:s()("Admin"),url:"admin",tooltip:s()("Administer this Galaxy"),cls:"admin-only"});var u={id:"help",title:s()("Help"),url:"javascript:void(0)",tooltip:s()("Support, contact, and community"),menu:[{title:s()("Support"),url:t.support_url,target:"_blank"},{title:s()("Search"),url:t.search_url,target:"_blank"},{title:s()("Mailing Lists"),url:t.mailing_lists,target:"_blank"},{title:s()("Videos"),url:t.screencasts_url,target:"_blank"},{title:s()("Wiki"),url:t.wiki_url,target:"_blank"},{title:s()("How to Cite Galaxy"),url:t.citation_url,target:"_blank"},{title:s()("Interactive Tours"),url:"tours"},{title:s()("Galaxy Version: "+e.config.version_major),url:l,target:"_blank"}]};t.terms_url&&u.menu.push({title:s()("Terms and Conditions"),url:t.terms_url,target:"_blank"}),t.helpsite_url&&u.menu.unshift({title:s()("Galaxy Help"),url:t.helpsite_url,target:"_blank"}),d.push(u);var h={};return e.user.id?(h={id:"user",title:s()("User"),cls:"loggedin-only",url:"javascript:void(0)",tooltip:s()("Account and saved data"),menu:[{title:"".concat(s()("Logged in as")," ").concat(e.user.get("email")),disabled:!0},{title:s()("Preferences"),url:"user",target:"__use_router__"},{title:s()("Custom Builds"),url:"custom_builds",target:"__use_router__"},{title:s()("Logout"),divider:!0,onclick:c},{title:s()("Datasets"),url:"datasets/list",target:"__use_router__"},{title:s()("Histories"),url:"histories/list",target:"__use_router__"},{title:s()("Histories shared with me"),url:"histories/list_shared",target:"__use_router__"},{title:s()("Pages"),url:"pages/list",target:"__use_router__"},{title:s()("Workflow Invocations"),url:"workflows/invocations",target:"__use_router__"}]},e.config.visualizations_visible&&h.menu.push({title:s()("Visualizations"),url:"visualizations/list",target:"__use_router__"}),e.config.interactivetools_enable&&(h.menu[h.menu.length-1].divider=!0,h.menu.push({title:s()("Active InteractiveTools"),url:"interactivetool_entry_points/list",target:"__use_router__"}))):h=t.allow_user_creation?{id:"user",title:s()("Login or Register"),cls:"loggedout-only",url:"login",tooltip:s()("Log in or register a new account")}:{id:"user",title:s()("Login"),cls:"loggedout-only",tooltip:s()("Login"),url:"login",noscratchbook:!0},d.push(h),d}},,,,,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=a.a,o=window._l||function(t){return t};function s(t,e){var n=27,i=13,s=r(t),l=!0;function c(t){r(this).parent().children("input").val("").trigger("searchInput.clear").blur(),e.onclear()}function d(t,n){if(!n)return c();r(this).trigger("search.search",n),"function"==typeof e.onfirstsearch&&l?(l=!1,e.onfirstsearch(n)):e.onsearch(n)}if("string"===a.a.type(e))return"toggle-loading"===e&&(s.find(".search-loading").toggle(),s.find(".search-clear").toggle()),s;"object"===a.a.type(e)&&(e=a.a.extend(!0,{},{initialVal:"",name:"search",placeholder:"search",classes:"",onclear:function(){},onfirstsearch:null,onsearch:function(t){},minSearchLen:0,escWillClear:!0,advsearchlink:!1,oninit:function(){}},e));var u=[r(['<span class="search-clear fa fa-times-circle" ','title="',o("clear search (esc)"),'"></span>'].join("")).tooltip({placement:"bottom"}).click((function(t){c.call(this,t)})),r(['<span class="search-loading fa fa-spinner fa-spin" ','title="',o("loading..."),'"></span>'].join("")).hide().tooltip({placement:"bottom"})];e.advsearchlink&&u.push(r(['<a tabindex="0" ','class="search-advanced fa fa-question-circle" ','data-toggle="advSearchPopover" ','data-trigger="focus" ','data-placement="bottom" ','data-content="',o("<p>You can use advanced searches here using keywords and syntax like <em>name=mydataset</em> or <em>state=error</em>."),"<br/>",o("Supported keywords are <em>name, format, database, annotation, description, info, tag, hid, and state</em>."),"<br/>",o("To learn more visit "),"<a href='https://galaxyproject.org/tutorials/histories/#advanced-searching' target='_blank'>",o("the Hub"),'.</a></p>" title="',o("Search tips"),'"></a>'].join("")).tooltip({placement:"top",trigger:"hover"}).click((function(){r(this).popover({trigger:"focus",html:!0,container:"body"}).popover("show")})));var h=r('<div class "search-button-panel"></div>');return r(h).prepend(u),s.addClass("search-input").prepend([r(['<input type="text" name="',e.name,'" placeholder="',e.placeholder,'" ','class="search-query ',e.classes,'" ',"/>"].join("")).focus((function(t){r(this).select()})).keyup((function(t){if(t.preventDefault(),t.stopPropagation(),t.which===n&&e.escWillClear)c.call(this,t);else{var a=r(this).val();(t.which===i||e.minSearchLen&&a.length>=e.minSearchLen)&&d.call(this,t,a)}})).val(e.initialVal),r(h)])}a.a.fn.extend({searchInput:function(t){return this.each((function(){return s(this,t)}))}})},,function(t,e,n){"use strict";var i=n(34),a=n(152);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={computed:o(o({},Object(i.c)("betaHistory",["currentHistoryId","currentHistory","histories"])),{},{currentHistoryModel:function(){return null!==this.currentHistory?new a.a(this.currentHistory):null},historyModels:function(){return this.histories.map((function(t){return new a.a(t)}))}}),methods:o({},Object(i.b)("betaHistory",["loadHistoryById","createNewHistory","updateHistory","deleteHistory","setCurrentHistoryId","setHistory","loadUserHistories","secureHistory"])),watch:{currentHistoryId:{immediate:!0,handler:function(t,e){t&&t!==e&&this.loadHistoryById(t)}}},created:function(){this.loadUserHistories()},render:function(){var t,e=this;return this.$scopedSlots.default({histories:this.historyModels,currentHistory:this.currentHistoryModel,currentHistoryId:(null===(t=this.currentHistoryModel)||void 0===t?void 0:t.id)||null,handlers:{setHistory:this.setHistory,setCurrentHistory:function(t){return e.setCurrentHistoryId(t.id)},createNewHistory:this.createNewHistory,updateHistory:this.updateHistory,updateCurrentHistory:function(){return e.updateHistory(e.currentHistory)},deleteHistory:function(t){return e.deleteHistory({history:t})},deleteCurrentHistory:function(){return e.deleteHistory({history:e.currentHistory})},purgeHistory:function(t){return e.deleteHistory({history:t,purge:!0})},purgeCurrentHistory:function(){return e.deleteHistory({history:e.currentHistory,purge:!0})},secureHistory:this.secureHistory}})}};e.a=l},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(7),a=n.n(i),r=n(21),o=n(3);function s(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){s(r,i,a,o,l,"next",t)}function l(t){s(r,i,a,o,l,"throw",t)}o(void 0)}))}}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=e.root||Object(o.getAppRoot)()}var e,n,i,s,d;return e=t,(n=[{key:"getFileSources",value:(d=l(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(this.root,"api/remote_files/plugins"),t.prev=1,t.next=4,a.a.get(e);case 4:return n=t.sent,i=n.data,t.abrupt("return",i);case 9:t.prev=9,t.t0=t.catch(1),Object(r.b)(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return d.apply(this,arguments)})},{key:"list",value:(s=l(regeneratorRuntime.mark((function t(e){var n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(this.root,"api/remote_files?target=").concat(e),t.prev=1,t.next=4,a.a.get(n);case 4:return i=t.sent,o=i.data,t.abrupt("return",o);case 9:t.prev=9,t.t0=t.catch(1),Object(r.b)(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(t){return s.apply(this,arguments)})}])&&c(e.prototype,n),i&&c(e,i),t}()},function(t,e,n){"use strict";function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}e.a={computed:{isNew:function(){return!this.jobStatesSummary||this.jobStatesSummary.new()},isErrored:function(){return this.jobStatesSummary&&this.jobStatesSummary.errored()},isTerminal:function(){return this.jobStatesSummary&&this.jobStatesSummary.terminal()},jobCount:function(){return this.jobStatesSummary?this.jobStatesSummary.jobCount():null},jobsStr:function(){var t=this.jobCount;return t&&t>1?"".concat(t," jobs"):"a job"},runningCount:function(){return this.countStates(["running"])},okCount:function(){return this.countStates(["ok"])},errorCount:function(){return this.countStates(["error"])},newCount:function(){return this.jobCount-this.okCount-this.runningCount-this.errorCount}},methods:{countStates:function(t){var e=0;if(this.jobStatesSummary&&this.jobStatesSummary.hasDetails()){var n,a=i(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;e+=this.jobStatesSummary.states()[r]||0}}catch(t){a.e(t)}finally{a.f()}}return e}}}},function(t,e,n){"use strict";var i=n(2),a=n.n(i),r=n(8),o=n(102);function s(t,e){(e=e||{}).title=a()("Create a collection from a list of datasets");var i=Object(o.a)(e),s=i.promise,l=i.showEl;return Promise.all([n.e(0),n.e(1),n.e(2)]).then(n.bind(null,591)).then((function(n){var i=r.default.extend(n.default),a=document.createElement("div");return l(a),new i({propsData:{initialElements:t,creationFn:e.creationFn,oncancel:e.oncancel,oncreate:e.oncreate,defaultHideSourceItems:e.defaultHideSourceItems}}).$mount(a),s}))}e.a={listCollectionCreatorModal:s,createListCollection:function(t,e){var n;return s(t.toJSON(),{defaultHideSourceItems:e,creationFn:function(e,i,a){return e=e.map((function(t){return{id:t.id,name:t.name,src:"dataset"===t.history_content_type?"hda":"hdca"}})),n=!a,t.createHDCA(e,"list",i,a,n)}})}}},function(t,e,n){"use strict";var i=n(2),a=n.n(i),r=n(8),o=n(102);function s(t,e){(e=e||{}).title=a()("Create a collection from a pair of datasets");var i=Object(o.a)(e),s=i.promise,l=i.showEl;return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,592)).then((function(n){var i=r.default.extend(n.default),a=document.createElement("div");return l(a),new i({propsData:{initialElements:t,creationFn:e.creationFn,oncancel:e.oncancel,oncreate:e.oncreate,defaultHideSourceItems:e.defaultHideSourceItems}}).$mount(a),s}))}e.a={pairCollectionCreatorModal:s,createPairCollection:function(t,e){var n;return s(t.toJSON(),{defaultHideSourceItems:e,creationFn:function(e,i,a){return e=[{name:"forward",src:"hda",id:e[0].id},{name:"reverse",src:"hda",id:e[1].id}],n=!a,t.createHDCA(e,"paired",i,a,n)}})}}},function(t,e,n){"use strict";var i=n(2),a=n.n(i),r=n(8),o=n(102);function s(t,e){(e=e||{}).title=a()("Create a collection of paired datasets");var i=Object(o.a)(e),s=i.promise,l=i.showEl;return Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,766)).then((function(n){var i=r.default.extend(n.default),a=document.createElement("div");return l(a),new i({propsData:{initialElements:t,creationFn:e.creationFn,oncancel:e.oncancel,oncreate:e.oncreate,defaultHideSourceItems:e.defaultHideSourceItems}}).$mount(a),s}))}e.a={pairedListCollectionCreatorModal:s,createPairedListCollection:function(t,e){var n;return s(t.toJSON(),{defaultHideSourceItems:e,creationFn:function(e,i,a){return e=e.map((function(t){return{collection_type:"paired",src:"new_collection",name:t.name,element_identifiers:[{name:"forward",id:t.forward.id,src:t.forward.src||"hda"},{name:"reverse",id:t.reverse.id,src:t.reverse.src||"hda"}]}})),n=!a,t.createHDCA(e,"list:paired",i,a,n)}})}}},function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(3),o=n(6),s=n(2),l=n.n(s),c=n(73),d=n(165),u=n(19),h=n(57),f=n(109),p=n(26),m=n(20),_=n(17),g=n(265),v=n(267),y=n(205),b={components:{CreatorViewer:n(201).a},props:{title:{type:String,default:""},creators:{type:Array}}},w=n(5),k=Object(w.a)(b,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("\n    "+this._s(this.title)+"\n    "),this._l(this.creators,(function(t,n){return e("div",{key:n},[e("CreatorViewer",{attrs:{creator:t}})],1)}))],2)}),[],!1,null,null,null).exports,x=n(155);m.c.add(_.y,_.h,_.a,_.b);var S={components:{Citation:v.a,License:y.a,Creators:k,FontAwesomeIcon:p.a},props:{id:{type:String},hasCitations:{type:Boolean,default:!0},xrefs:{type:Array},license:{type:String},creators:{type:Array},requirements:{type:Array}},computed:{hasRequirements:function(){return this.requirements&&this.requirements.length>0},hasReferences:function(){return this.xrefs&&this.xrefs.length>0},hasCreators:function(){return this.creators&&this.creators.length>0},hasLicense:function(){return!!this.license},hasContent:function(){return this.hasRequirements||this.hasReferences||this.hasCreators||this.hasCitations||this.hasLicense}},data:function(){return{citations:[]}},created:function(){var t=this;this.hasCitations&&Object(g.a)("tools",this.id).then((function(e){t.citations=e})).catch((function(t){console.error(t)}))},methods:{copyBibtex:function(){var t="";this.citations.forEach((function(e){var n=e.cite.format("bibtex",{});t+=n})),Object(x.a)(t,"Citations copied to your clipboard as BibTeX")}}},M=Object(w.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasContent?n("b-card",{staticClass:"tool-footer"},[t.hasCitations?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[t._v("Citations:")]),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{cursor:"pointer"},attrs:{title:"Copy all citations as BibTeX",icon:"copy"},on:{click:t.copyBibtex}}),t._v(" "),t._l(t.citations,(function(t,e){return n("Citation",{key:e,staticClass:"formatted-reference",attrs:{citation:t,"output-format":"bibliography",prefix:"-"}})}))],2):t._e(),t._v(" "),t.hasRequirements?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[t._v("Requirements:\n            "),n("a",{attrs:{href:"https://galaxyproject.org/tools/requirements/",target:"_blank"}},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Learn more about Galaxy Requirements",icon:"question"}})],1)]),t._v(" "),t._l(t.requirements,(function(e,i){return n("div",{key:i},[t._v("\n            - "+t._s(e.name)+"\n            "),e.version?n("span",[t._v(" (Version "+t._s(e.version)+") ")]):t._e()])}))],2):t._e(),t._v(" "),t.hasLicense?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[t._v("License:")]),t._v(" "),n("License",{attrs:{licenseId:t.license}})],1):t._e(),t._v(" "),t.hasReferences?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[t._v("References:")]),t._v(" "),t._l(t.xrefs,(function(e,i){return n("div",{key:i},[t._v("\n            - "+t._s(e.reftype)+":\n            "),"bio.tools"==e.reftype?[t._v("\n                "+t._s(e.value)+"\n                ("),n("a",{attrs:{href:"https://bio.tools/"+e.value,target:"_blank"}},[t._v("\n                    bio.tools\n                    "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Visit bio.tools reference",icon:"external-link-alt"}})],1),t._v(") ("),n("a",{attrs:{href:"https://openebench.bsc.es/tool/"+e.value,target:"_blank"}},[t._v("OpenEBench\n                    "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Visit OpenEBench reference",icon:"external-link-alt"}})],1),t._v(")\n            ")]:[t._v("\n                "+t._s(e.value)+"\n            ")]],2)}))],2):t._e(),t._v(" "),t.hasCreators?n("div",{staticClass:"mb-1"},[n("span",{staticClass:"font-weight-bold"},[t._v("Creators:")]),t._v(" "),n("Creators",{attrs:{creators:t.creators}})],1):t._e()]):t._e()}),[],!1,null,null,null).exports,C=n(8),T=n(7),j=n.n(T);e.a=h.a.extend({initialize:function(t){var e=Object(o.a)(),n=this;this.deferred=new d.a,h.a.prototype.initialize.call(this,t),this._update(),this.model.get("listen_to_history")&&e.currHistoryPanel&&this.listenTo(e.currHistoryPanel.collection,"change",(function(){n.model.get("onchange")()})),this.$el.on("remove",(function(){n._destroy()}))},_update:function(){var t=this,e=this.model.get("buildmodel");e?(this.deferred.reset(),this.deferred.execute((function(n){e(n,t),n.then((function(){t._render()}))}))):this._render()},_destroy:function(){var t=this;this.$el.off().hide(),this.deferred.execute((function(){h.a.prototype.remove.call(t),Object(o.a)().emit.debug("tool-form-base::_destroy()","Destroy view.")}))},_render:function(){var t=this,e=this.model.attributes;e.setupToolMicrodata&&(this.$el.attr("itemscope","itemscope"),this.$el.attr("itemtype","https://schema.org/CreativeWork")),this.model.set({title:e.fixed_title||'<b itemprop="name">'.concat(e.name,'</b> <span itemprop="description">').concat(e.description,"</span> (Galaxy Version ").concat(e.version,")"),operations:!e.hide_operations&&this._operations(),onchange:function(){t.deferred.reset(),t.deferred.execute((function(e){t.model.get("postchange")(e,t)}))}}),this.render(),this.model.get("collapsible")||this.$el.append(a()("<div/>").addClass("mt-2").append(this._footer())),e.tool_errors&&this.message.update({status:"danger",message:e.tool_errors,persistent:!0}),this.show_message&&this.message.update({status:"success",message:"Now you are using '".concat(e.name,"' version ").concat(e.version,", id '").concat(e.id,"'."),persistent:!1}),this.show_message=!0},_operations:function(){var t=this,e=this.model.attributes,n=Object(o.a)(),i=n.user.getFavorites().tools.indexOf(e.id)>=0,a=new u.a.Button({icon:"fa-star-o",title:e.narrow?null:"Favorite",tooltip:"Add to favorites",visible:!n.user.isAnonymous()&&!i,onclick:function(){j.a.put("".concat(n.root,"api/users/").concat(n.user.id,"/favorites/tools"),{object_id:e.id}).then((function(t){a.hide(),s.show(),n.user.updateFavorites("tools",t.data),Object(c.a)("added to favorites")}))}}),s=new u.a.Button({icon:"fa-star",title:e.narrow?null:"Added",tooltip:"Remove from favorites",visible:!n.user.isAnonymous()&&i,onclick:function(){j.a.delete("".concat(n.root,"api/users/").concat(n.user.id,"/favorites/tools/").concat(encodeURIComponent(e.id))).then((function(t){s.hide(),a.show(),n.user.updateFavorites("tools",t.data),Object(c.a)("removed from favorites")}))}}),d=new u.a.ButtonMenu({icon:"fa-cubes",cls:"btn btn-secondary float-right tool-versions",title:e.narrow?null:"Versions",tooltip:"Select another tool version"});if(!e.sustain_version&&e.versions&&e.versions.length>1)for(var h in e.versions.reverse()){var p=e.versions[h];p!=e.version&&d.addMenu({title:"Switch to ".concat(p),version:p,icon:"fa-cube",onclick:function(){t.model.set("id",e.id.replace(e.version,this.version)),t.model.set("version",this.version),t.model.get("onchange")(),t._update()}})}else d.$el.hide();var m=new u.a.ButtonMenu({id:"options",icon:"fa-caret-down",title:e.narrow?null:"Options",tooltip:"View available options"});return m.addMenu({icon:"fa-chain",title:l()("Copy link"),onclick:function(){Object(x.a)("".concat(window.location.origin+Object(r.getAppRoot)(),"root?tool_id=").concat(e.id),"Link was copied to your clipboard")}}),n.user&&n.user.get("is_admin")&&m.addMenu({icon:"fa-download",title:l()("Download"),onclick:function(){window.location.href="".concat(Object(r.getAppRoot)(),"api/tools/").concat(e.id,"/download")}}),e.sharable_url&&m.addMenu({icon:"fa-external-link",title:l()("See in Tool Shed"),onclick:function(){window.open(e.sharable_url)}}),f.a.load({type:"tool-menu",callback:function(t){t.each((function(t){var n=t.toJSON();n.activate&&n.config.function&&m.addMenu({icon:n.config.icon,title:n.config.title,onclick:function(){new Function("options",n.config.function)(e)}})}))}}),{menu:m,versions:d,favorite:a,remove_favorite:s}},_footer:function(){var t=this.model.attributes,e=a()("<div/>").append(this._templateHelp(t)),n=C.default.extend(M),i=document.createElement("div");return e.append(i),new n({propsData:{id:t.id,hasCitations:t.citations,xrefs:t.xrefs,license:t.license,creators:t.creator,requirements:t.requirements}}).$mount(i),e},_templateHelp:function(t){var e=a()("<div/>").addClass("form-help form-text mt-4").append(t.help);return e.find("a").attr("target","_blank"),e.find("img").each((function(){var t=a()(this).attr("src");-1!==t.indexOf("admin_toolshed")&&a()(this).attr("src",Object(r.getAppRoot)()+t)})),e}})},function(t,e,n){"use strict";var i={components:{StatelessTags:n(133).a},props:{index:{type:Number},tags:{type:Array}},methods:{onInput:function(t){this.$emit("input",t,this.index)}}},a=n(5),r=Object(a.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("StatelessTags",{attrs:{value:this.tags},on:{input:this.onInput}})}),[],!1,null,null,null);e.a=r.exports},function(t,e,n){"use strict";var i={props:{total:{type:Number,default:1},note:{type:String,default:null},loading:{type:Boolean,default:!1},okCount:{type:Number,default:0},runningCount:{type:Number,default:0},newCount:{type:Number,default:0},errorCount:{type:Number,default:0}}},a=(n(539),n(5)),r=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-1 progressContainer"},[t.note?n("small",{staticClass:"progressNote"},[t._v("\n        "+t._s(t.note)),t.loading?n("span",[t._v("."),n("span",{staticClass:"blinking"},[t._v("..")])]):t._e()]):t._e(),t._v(" "),n("b-progress",{attrs:{max:t.total}},[n("b-progress-bar",{attrs:{variant:"success",value:t.okCount}}),t._v(" "),n("b-progress-bar",{attrs:{variant:"danger",value:t.errorCount}}),t._v(" "),n("b-progress-bar",{attrs:{variant:"warning",value:t.runningCount}}),t._v(" "),n("b-progress-bar",{attrs:{variant:"warning",value:t.newCount}})],1)],1)}),[],!1,null,"0f277a9c",null);e.a=r.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(6),a=n(42),r=n(2),o=n.n(r),s={methods:{redirect:function(t){console.log("legacyNavigation: go",t),Object(a.c)(Object(a.b)(t))},iframeAdd:function(t){var e=t.path,n=t.title,r=void 0===n?"Galaxy":n,s=t.tryIframe,l=void 0===s||s,c=Object(i.a)();return c.frame&&c.frame.active?(c.frame.add({url:Object(a.b)(e),title:o()(r)}),!0):!!l&&this.iframeRedirect(e)},iframeRedirect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"galaxy_main";try{var n=window.frames[e];if(!n)throw new Error("Requested frame ".concat(e," doesn't exist"));return n.location=Object(a.b)(t),!0}catch(t){var i;throw(i=console).warn.apply(i,["Failed iframe redirect",t].concat(Array.prototype.slice.call(arguments))),t}},backboneRoute:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];try{var o;(o=Object(i.a)().router).push.apply(o,[Object(a.b)(t)].concat(n))}catch(t){var s;throw(s=console).warn.apply(s,["Failed galaxy route change",t].concat(Array.prototype.slice.call(arguments))),t}},useGalaxy:function(t){return t(Object(i.a)())},prependPath:a.b}}},,,,,,function(t,e,n){"use strict";function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){return e?(e=l(e),t.map((function(t){var n=[];return t.elems&&t.elems.forEach((function(t){(!t.text&&e.includes(t.id)||t.tool_shed_repository&&e.includes(t.tool_shed_repository.name))&&n.push(t)})),n.sort((function(t,n){return e.indexOf(t.id)-e.indexOf(n.id)})),a(a({},t),{},{elems:n})})).filter((function(t){var n=t.elems&&t.elems.length>0,i=!t.text&&e.includes(t.id);return n||i})).sort((function(t,n){return 0==t.elems.length||0==n.elems.length?0:e.indexOf(t.elems[0].id)-e.indexOf(n.elems[0].id)}))):t}function s(t,e){if(t=t.filter((function(t){return"Expression Tools"!==t.name})),e){e=l(e);var n=[];return e.length<1?n:(t.map((function(t){t.elems?t.elems.forEach((function(t){(!t.text&&e.includes(t.id)||t.tool_shed_repository&&e.includes(t.tool_shed_repository.name))&&n.push(t)})):!t.text&&e.includes(t.id)&&n.push(t)})),n.sort((function(t,n){return e.indexOf(t.id)-e.indexOf(n.id)})))}return t}function l(t){var e=[];return t.forEach((function(t){e.push(t),t.includes("/repos/")&&e.push(t.split("/repos/")[1].split("/")[2])})),e}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}))},,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return r}));var i=n(134),a=n(36),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.querySelectorAll(".job-metrics");Array.prototype.forEach.call(e,(function(e,n){var r=e.getAttribute("job_id"),o=e.getAttribute("aws_estimate"),s=e.getAttribute("dataset_id"),l=e.getAttribute("dataset_type")||"hda";t.jobId=r,t.datasetId=s,t.datasetType=l,t.aws_estimate=o,Object(a.a)(i.a)(t,e)}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i.a})),n.d(e,"b",(function(){return r}));var i=n(115),a=n(36),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.querySelectorAll(".job-parameters");Array.prototype.forEach.call(e,(function(e,n){var r=e.getAttribute("job_id"),o=e.getAttribute("dataset_id"),s=e.getAttribute("param")||void 0,l=e.getAttribute("dataset_type")||"hda";t.jobId=r,t.datasetId=o,t.param=s,t.datasetType=l,Object(a.a)(i.a)(t,e)}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(170);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=d(t);if(e){var a=d(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u={accessible:!1,update_time:0},h="dataset",f="dataset_collection",p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(c,t);var e,n,i,a=l(c);function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return e=c,(n=[{key:"loadProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},u,t);o(d(c.prototype),"loadProps",this).call(this,e)}},{key:"title",get:function(){var t=this.name,e=this.element_identifier,n=this.visible,i=this.purged,a=e||t,r=[];return 0!=n||e||r.push("Hidden"),i&&r.push("Purged"),r.length&&(a+=" (".concat(r.join(", "),")")),a}},{key:"deleted",get:function(){return this.isDeleted},set:function(t){this.isDeleted=t}},{key:"isDataset",get:function(){return this.history_content_type==h}},{key:"isCollection",get:function(){return this.history_content_type==f}},{key:"hda_id",get:function(){return this.isDataset?this.id:null}},{key:"hdca_id",get:function(){return this.isCollection?this.id:null}},{key:"nameTags",get:function(){return(this.tags||[]).filter((function(t){return t.includes("name:")}))}}])&&r(e.prototype,n),i&&r(e,i),c}(Object(i.b)(i.a))},function(t,e,n){"use strict";var i=n(34);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a={computed:r({},Object(i.c)("user",["currentUser"])),methods:r({},Object(i.b)("user",["loadUser"])),created:function(){this.loadUser()},render:function(){return this.$scopedSlots.default({user:this.currentUser})}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n(7),a=n.n(i),r=n(21),o=n(3),s=n(486),l=n.n(s);function c(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function h(t,e){return f.apply(this,arguments)}function f(){var t;return t=regeneratorRuntime.mark((function t(e,n){var i,s,d,u,h,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.a.get("".concat(Object(o.getAppRoot)(),"api/").concat(e,"/").concat(n,"/citations"));case 3:i=t.sent,s=i.data,d=[],u=c(s);try{for(u.s();!(h=u.n()).done;){f=h.value;try{p=new l.a(f.content),d.push({raw:f.content,cite:p})}catch(t){console.warn("Error parsing bibtex: ".concat(t))}}}catch(t){u.e(t)}finally{u.f()}return t.abrupt("return",d);case 11:t.prev=11,t.t0=t.catch(0),Object(r.b)(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})),(f=function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){u(r,i,a,o,s,"next",t)}function s(t){u(r,i,a,o,s,"throw",t)}o(void 0)}))}).apply(this,arguments)}},function(t,e,n){"use strict";var i=n(8),a=n(15),r=n(101),o=n(6),s=n(227),l=n.n(s),c=n(26),d=n(20),u=n(17),h=n(29),f=n(3),p=n(50);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={props:{history_dataset_id:{type:String,required:!0},path:{type:String,default:null}},created:function(){var t=this;this.path?this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((function(){var e=t.$store.getters.pathDestination(t.history_dataset_id,t.path);t.imageUrl=e.fileLink})):this.imageUrl="".concat(Object(f.getAppRoot)(),"dataset/display?dataset_id=").concat(this.history_dataset_id)},data:function(){return{imageUrl:void 0}},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(p.b)(["fetchPathDestination"]))},v=n(5),y=Object(v.a)(g,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.imageUrl?e("div",{staticClass:"w-50 p-2 float-left"},[e("b-card",{attrs:{nobody:"","body-class":"p-1"}},[e("b-img",{attrs:{src:this.imageUrl,fluid:""}})],1)],1):e("div",[e("b",[this._v("Image is not found")])])])}),[],!1,null,null,null).exports;i.default.use(a.a);var b={components:{DatasetAsImage:y},props:{args:{type:Object,default:null}},computed:{imageUrl:function(){return"".concat(Object(f.getAppRoot)(),"dataset/display?dataset_id=").concat(this.args.history_dataset_id)}}},w=Object(v.a)(b,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("DatasetAsImage",{attrs:{path:this.args.path,history_dataset_id:this.args.history_dataset_id}})],1)}),[],!1,null,null,null).exports,k=n(7),x=n.n(k);function S(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var M={components:{LoadingSpan:h.a},props:{args:{type:Object,required:!0},datasets:{type:Object,required:!0},embedded:{type:Boolean,default:!1}},data:function(){return{itemContent:null,loading:!0}},created:function(){var t=this;this.getContent().then((function(e){t.itemContent=e,t.loading=!1}))},computed:{datasetName:function(){var t=this.datasets[this.args.history_dataset_id];return t&&t.name},downloadUrl:function(){return"".concat(Object(f.getAppRoot)(),"dataset/display?dataset_id=").concat(this.args.history_dataset_id)},importUrl:function(){return"".concat(Object(f.getAppRoot)(),"dataset/imp?dataset_id=").concat(this.args.history_dataset_id)},itemUrl:function(){return"".concat(Object(f.getAppRoot)(),"api/datasets/").concat(this.args.history_dataset_id,"/get_content_as_text")}},methods:{getContent:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get(e.itemUrl);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","Failed to retrieve content. ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){S(r,i,a,o,s,"next",t)}function s(t){S(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}},C=(n(551),Object(v.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-50 p-2 float-left"},[n("b-card",{attrs:{"body-class":"p-0"}},[t.embedded?t._e():n("b-card-header",[n("span",{staticClass:"float-right"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:t.downloadUrl,variant:"link",size:"sm",role:"button",title:"Download Dataset",type:"button"}},[n("span",{staticClass:"fa fa-download"})]),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:t.importUrl,role:"button",variant:"link",title:"Import Dataset",type:"button"}},[n("span",{staticClass:"fa fa-file-import"})])],1),t._v(" "),n("span",[n("span",[t._v("Dataset:")]),t._v(" "),n("span",{staticClass:"font-weight-light"},[t._v(t._s(t.datasetName))])])]),t._v(" "),n("b-card-body",[t.loading?n("LoadingSpan",{attrs:{message:"Loading Dataset"}}):n("div",{staticClass:"embedded-dataset content-height"},[t.itemContent.item_data?n("pre",[t._v("                    "),n("code",{staticClass:"text-normalwrap"},[t._v(t._s(t.itemContent.item_data))]),t._v("\n                ")]):n("div",[t._v("\n                    No content found.\n                ")]),t._v(" "),t.itemContent.truncated?n("b-link",{attrs:{href:t.itemContent.item_url}},[t._v("\n                    Show More...\n                ")]):t._e()],1)],1)],1)],1)}),[],!1,null,"329585ac",null).exports),T=n(162);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L={props:{history_dataset_id:{type:String,required:!0},path:{type:String},label:{type:String}},created:function(){var t=this;this.services=new T.a({root:Object(f.getAppRoot)()}),this.pathDestination={},this.path&&"undefined"!==this.path?this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((function(){t.pathDestination=t.$store.getters.pathDestination(t.history_dataset_id,t.path)})):this.services.getCompositeDatasetInfo(this.history_dataset_id).then((function(e){t.pathDestination={fileLink:"".concat(e.download_url,"?to_ext=").concat(e.file_ext)}}))},data:function(){return{pathDestination:void 0}},computed:{linkLabel:function(){return this.pathDestination.isDirectory?"Path: ".concat(this.path," is a directory!"):this.pathDestination.fileLink?void 0!==this.label&&"undefined"!==this.label?this.label:"".concat(this.pathDestination.datasetRootDir&&this.path?"DATASET: ".concat(this.pathDestination.datasetRootDir," FILEPATH: ").concat(this.path):"".concat(this.history_dataset_id)," "):"Path: ".concat(this.path," was not found!")}},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(p.b)(["fetchPathDestination"]))},D={components:{DatasetLink:Object(v.a)(L,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("a",{attrs:{href:this.pathDestination.fileLink,title:"test",target:"_blank"}},[this._v(this._s(this.linkLabel))])])}),[],!1,null,null,null).exports},props:{args:{type:Object,default:null}}},A=Object(v.a)(D,(function(){var t=this.$createElement;return(this._self._c||t)("DatasetLink",{staticClass:"dataset-link",attrs:{history_dataset_id:this.args.history_dataset_id,path:this.args.path,label:this.args.label}})}),[],!1,null,null,null).exports;function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Y={props:{history_dataset_id:{type:String,required:!0},path:{type:String}},created:function(){var t=this;this.fetchPathDestination({history_dataset_id:this.history_dataset_id,path:this.path}).then((function(){var e=t.$store.getters.pathDestination(t.history_dataset_id,t.path);e?e.fileLink?t.errorMessage="is not a directory!":e.isDirectory?t.directoryContent=t.removeParentDirectory(e.datasetContent,e.filepath):void 0===t.path||"undefined"===t.path?t.directoryContent=e.datasetContent:t.errorMessage="is not found!":t.errorMessage="Dataset is not composite!"}))},data:function(){return{directoryContent:!1,fields:[{key:"path",sortable:!0},{key:"class",label:"Type",sortable:!0}],errorMessage:void 0}},methods:I(I({},Object(p.b)(["fetchPathDestination"])),{},{removeParentDirectory:function(t,e){return t.filter((function(t){if(t.path.startsWith("".concat(e,"/")))return t.path=t.path.replace("".concat(e,"/"),""),t}))}})},R={components:{DatasetIndex:Object(v.a)(Y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.directoryContent&&!t.errorMessage?n("b-table",{attrs:{"thead-class":"hidden_header",striped:"",hover:"",fields:t.fields,items:t.directoryContent}}):t._e(),t._v(" "),t.errorMessage?n("div",[t.path?n("b",[t._v(t._s(t.path))]):t._e(),t._v(" "+t._s(t.errorMessage)+"\n    ")]):t._e()],1)}),[],!1,null,null,null).exports},props:{args:{type:Object,default:null}}},H=Object(v.a)(R,(function(){var t=this.$createElement;return(this._self._c||t)("DatasetIndex",{staticClass:"dataset-index",attrs:{history_dataset_id:this.args.history_dataset_id,path:this.args.path}})}),[],!1,null,null,null).exports,N={name:"CollectionNode",props:{node:{type:Object,default:null},skipHead:{type:Boolean,default:!1}},computed:{name:function(){return this.node&&(this.node.name||this.node.element_identifier||"n/a")},miscInfo:function(){return this.node&&this.node.object&&this.node.object.misc_info},peek:function(){return this.node&&this.node.object&&this.node.object.peek},url:function(){return this.node&&this.node.object&&this.node.object.url},error:function(){return this.node&&this.node.object&&"error"===this.node.object.status}}};function $(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var F={components:{CollectionTree:Object(v.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.skipHead?t._e():n("span",{staticClass:"label"},[n("b",[t._v(t._s(t.name))])]),t._v(" "),t.error?n("b-alert",{attrs:{variant:"danger",show:""}},[t._v("Error: "+t._s(t.error))]):t._e(),t._v(" "),t.miscInfo?n("pre",[n("code",{domProps:{innerHTML:t._s(t.miscInfo)}})]):t._e(),t._v(" "),t.peek?n("pre",[n("code",{domProps:{innerHTML:t._s(t.peek)}})]):t._e(),t._v(" "),t.node&&t.node.elements&&t.node.elements.length?n("div",{class:{"ml-3":!t.skipHead}},t._l(t.node.elements,(function(t){return n("CollectionNode",{key:t.id,attrs:{node:t}})})),1):t._e()],1)}),[],!1,null,null,null).exports,LoadingSpan:h.a},props:{args:{type:Object,default:null},collections:{type:Object,default:null}},data:function(){return{itemContent:null,loading:!0}},created:function(){var t=this;this.getContent().then((function(e){t.itemContent=e,t.loading=!1}))},computed:{collectionName:function(){var t=this.collections[this.args.history_dataset_collection_id];return t&&t.name},itemUrl:function(){var t=this.args.history_dataset_collection_id;return this.collections[t].url}},methods:{getContent:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get(e.itemUrl);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","Failed to retrieve content. ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){$(r,i,a,o,s,"next",t)}function s(t){$(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}},W=(n(552),Object(v.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-50 p-2 float-left"},[n("b-card",{attrs:{"body-class":"p-0"}},[n("b-card-header",[n("span",[n("span",[t._v("Dataset Collection:")]),t._v(" "),n("span",{staticClass:"font-weight-light"},[t._v(t._s(t.collectionName))])])]),t._v(" "),n("b-card-body",[t.loading?n("LoadingSpan",{attrs:{message:"Loading Collection"}}):n("div",{staticClass:"content-height"},[n("CollectionTree",{attrs:{node:t.itemContent,"skip-head":!0}})],1)],1)],1)],1)}),[],!1,null,"e4c66b72",null).exports),z={history_dataset_name:"name",history_dataset_info:"info",history_dataset_peek:"peek",history_dataset_type:"ext"},U={props:{args:{type:Object,required:!0},datasets:{type:Object,default:null},name:{type:String,default:null}},computed:{getClass:function(){return"dataset-".concat(z[this.name])},content:function(){var t=this.datasets[this.args.history_dataset_id];return t&&t[z[this.name]]}}},V=Object(v.a)(U,(function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",{staticClass:"text-normalwrap"},[this._v(this._s(this.content))])])}),[],!1,null,null,null).exports,B={props:{args:{type:Object,required:!0},invocations:{type:Object,required:!0}},computed:{content:function(){var t=this.invocations[this.args.invocation_id];return t&&t.create_time}}},q=Object(v.a)(B,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"invocation-time",attrs:{invocation_id:this.args.invocation_id}},[e("pre",[e("code",[this._v(this._s(this.content))])])])}),[],!1,null,null,null).exports,G={components:{JobMetrics:n(134).a},props:{args:{type:Object,default:null}}},J=Object(v.a)(G,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-50 p-2 float-left"},[e("b-card",{attrs:{nobody:""}},[e("JobMetrics",{staticClass:"job-metrics",attrs:{"job-id":this.args.job_id}})],1)],1)}),[],!1,null,null,null).exports,K={components:{JobParameters:n(115).a},props:{args:{type:Object,default:null}}},X=Object(v.a)(K,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-50 p-2 float-left"},[e("b-card",{attrs:{nobody:""}},[e("JobParameters",{staticClass:"job-parameters",attrs:{"job-id":this.args.job_id,param:this.args.param,"include-title":!1}})],1)],1)}),[],!1,null,null,null).exports,Q={props:{args:{type:Object,required:!0},name:{type:String,required:!0},jobs:{type:Object,default:null}},computed:{jobContent:function(){var t=this.jobs[this.args.job_id];return t&&t[this.name]}}},Z=(n(553),Object(v.a)(Q,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-50 p-2 float-left"},[e("b-card",{staticClass:"content-height",attrs:{nobody:""}},[e("div",{class:this.name,attrs:{job_id:this.args.job_id}},[e("pre",[e("code",{staticClass:"text-normalwrap"},[this._v(this._s(this.jobContent))])])])])],1)}),[],!1,null,"336208e4",null).exports),tt={name:"WorkflowInput",props:{input:{type:Object,default:null},skipHead:{type:Boolean,default:!1}}},et=Object(v.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.skipHead?t._e():n("span",[t.input.title?n("span",{staticClass:"font-weight-light"},[t._v(t._s(t.input.title)+":")]):t._e(),t._v(" "),t.input.label?n("span",{staticClass:"font-weight-light"},[t._v(t._s(t.input.label))]):t._e(),t._v(" "),t.input.value?n("span",{staticClass:"font-weight-light font-italic"},[t._v("= "+t._s(t.input.value))]):t._e()]),t._v(" "),t.input&&t.input.inputs&&t.input.inputs.length?n("div",{class:{"ml-3":!t.skipHead}},t._l(t.input.inputs,(function(t){return n("WorkflowInput",{key:t.id,attrs:{input:t}})})),1):t._e()])}),[],!1,null,null,null).exports;function nt(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var it={components:{LoadingSpan:h.a,WorkflowTree:et},props:{args:{type:Object,required:!0},workflows:{type:Object,required:!0},embedded:{type:Boolean,default:!1}},data:function(){return{itemContent:null,loading:!0}},created:function(){var t=this;this.getContent().then((function(e){t.itemContent=e,t.loading=!1}))},computed:{workflowName:function(){var t=this.workflows[this.args.workflow_id];return t&&t.name},downloadUrl:function(){return"".concat(Object(f.getAppRoot)(),"api/workflows/").concat(this.args.workflow_id,"/download?format=json-download")},itemUrl:function(){return"".concat(Object(f.getAppRoot)(),"api/workflows/").concat(this.args.workflow_id,"/download?style=preview")}},methods:{getContent:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get(e.itemUrl);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","Failed to retrieve content. ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){nt(r,i,a,o,s,"next",t)}function s(t){nt(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}},at=(n(554),Object(v.a)(it,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-50 p-2 float-left"},[n("b-card",{attrs:{"body-class":"p-0"}},[t.embedded?t._e():n("b-card-header",[n("span",{staticClass:"float-right"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"py-0 px-1",attrs:{href:t.downloadUrl,variant:"link",size:"sm",role:"button",title:"Download Workflow",type:"button"}},[n("span",{staticClass:"fa fa-download"})])],1),t._v(" "),n("span",[n("span",[t._v("Workflow:")]),t._v(" "),n("span",{staticClass:"font-weight-light"},[t._v(t._s(t.workflowName))])])]),t._v(" "),n("b-card-body",[t.loading?n("LoadingSpan",{attrs:{message:"Loading Workflow"}}):n("div",{staticClass:"content-height"},t._l(t.itemContent.steps,(function(e){return n("div",{key:e.order_index,staticClass:"mb-2"},[n("div",[t._v("Step "+t._s(e.order_index+1)+": "+t._s(e.label))]),t._v(" "),n("WorkflowTree",{attrs:{input:e,"skip-head":!0}})],1)})),0)],1)],1)],1)}),[],!1,null,"344b09b5",null).exports);function rt(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}i.default.use(a.a);var ot={components:{LoadingSpan:h.a},props:{args:{type:Object,default:null}},data:function(){return{visualizationUrl:null,error:null,loading:!0}},created:function(){this.getVisualization()},methods:{getVisualization:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x.a.get("".concat(Object(f.getAppRoot)(),"api/plugins/").concat(e.args.visualization_id)).then((function(t){var n=t.data,i=Object.entries(e.args).map((function(t){return t.map(encodeURIComponent).join("=")})).join("&");e.visualizationUrl="".concat(n.href,"?dataset_id=").concat(e.args.history_dataset_id,"&").concat(i),e.loading=!1})).catch((function(t){e.error="Failed to load Visualization '".concat(e.args.visualization_id,"'."),e.loading=!1}));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){rt(r,i,a,o,s,"next",t)}function s(t){rt(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}},st=Object(v.a)(ot,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-50 p-2 float-left"},[e("b-card",{attrs:{"body-class":"embed-responsive embed-responsive-4by3"}},[this.loading?e("LoadingSpan",{staticClass:"m-2",attrs:{message:"Loading Visualization"}}):this.error?e("div",{staticClass:"m-2"},[this._v(this._s(this.error))]):e("iframe",{staticClass:"embed-responsive-item",attrs:{src:this.visualizationUrl}})],1)],1)}),[],!1,null,null,null).exports;function lt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||dt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||dt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(t,e){if(t){if("string"==typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(t,e):void 0}}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ht="\\s*[\\w\\|]+\\s*=\\s*(?:[\\w_\\-]+|\\\"[^\\\"]+\\\"|\\'[^\\']+\\')\\s*",ft="\\s*(\\w+)\\s*\\(\\s*(?:(".concat(ht,")(,").concat(ht,")*)?\\s*\\)\\s*"),pt=new RegExp(ft,"m"),mt=l()();i.default.use(a.a),d.c.add(u.j);var _t={store:r.a,components:{HistoryDatasetDetails:V,HistoryDatasetAsImage:w,HistoryDatasetCollectionDisplay:W,HistoryDatasetDisplay:C,HistoryDatasetIndex:H,HistoryDatasetLink:A,JobMetrics:J,JobParameters:X,LoadingSpan:h.a,ToolStd:Z,WorkflowDisplay:at,Visualization:st,InvocationTime:q,FontAwesomeIcon:c.a},props:{markdownConfig:{type:Object,default:null},readOnly:{type:Boolean,default:!1},exportLink:{type:String,default:null}},data:function(){return{markdownObjects:[],markdownErrors:[],historyDatasets:{},historyDatasetCollections:{},workflows:{},jobs:{},invocations:{},loading:!0}},computed:{getVersion:function(){return this.markdownConfig.generate_version||"Unknown Galaxy Version"},getTime:function(){var t=this.markdownConfig.generate_time;return t?new Date(t).toLocaleString("default",{day:"numeric",month:"long",year:"numeric",minute:"numeric",hour:"numeric"}):"unavailable"},effectiveExportLink:function(){return Object(o.a)().config.enable_beta_markdown_export?this.exportLink:null}},watch:{markdownConfig:function(t){var e=t.markdown;this.markdownErrors=t.errors||[],this.markdownObjects=this.splitMarkdown(e),this.historyDatasets=t.history_datasets||{},this.historyDatasetCollections=t.history_dataset_collections||{},this.workflows=t.workflows||{},this.jobs=t.jobs||{},this.invocations=t.invocations||{},this.loading=!1}},methods:{splitMarkdown:function(t){for(var e=[],n=t;n.length>0;){var i=n.indexOf("```galaxy");if(-1==i){e.push({name:"default",content:mt.render(n)});break}var a=n.substr(i+1).indexOf("```");if(-1!=a){if(i>0){var r=n.substr(0,i).trim();r&&e.push({name:"default",content:mt.render(r)})}var o=a+4,s=n.substr(i,o),l=null;try{l=this.getArgs(s),e.push(l)}catch(t){this.markdownErrors.push({error:"Found an unresolved tag.",line:s})}n=n.substr(i+o)}else n=n.substr(i+1)}return e},getArgs:function(t){for(var e={},n=pt.exec(t)[1],i=ct(t.matchAll(new RegExp(ht,"g"))),a=0;a<i.length;a++)if(void 0!==i[a]){var r=i[a].toString().replace(/,/g,"").trim();if(r){var o=lt(r.split("="),2),s=o[0],l=o[1];e[s.trim()]=l.replace(/['"]+/g,"").trim()}}return{name:n,args:e,content:t}}}},gt=(n(555),Object(v.a)(_t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"markdown-wrapper"},[t.loading?n("LoadingSpan"):n("div",[t.effectiveExportLink?n("a",{staticClass:"markdown-export position-absolute p-3",attrs:{href:t.exportLink}},[n("i",{staticClass:"fa fa-3x fa-download"})]):t._e(),t._v(" "),n("div",[t.readOnly?t._e():n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"float-right",attrs:{title:"Edit Markdown",variant:"link",role:"button"},on:{click:function(e){return t.$emit("onEdit")}}},[n("font-awesome-icon",{attrs:{icon:"edit"}})],1),t._v(" "),n("h3",{staticClass:"float-right align-middle mr-1 mt-2"},[t._v("Galaxy "+t._s(t.markdownConfig.model_class))]),t._v(" "),n("span",{staticClass:"float-left font-weight-light mb-3"},[n("small",[t._v("Title: "+t._s(t.markdownConfig.title||t.markdownConfig.model_class))]),n("br"),t._v(" "),n("small",[t._v("Username: "+t._s(t.markdownConfig.username))])])],1),t._v(" "),n("b-badge",{staticClass:"w-100 rounded mb-3",attrs:{variant:"info"}},[n("div",{staticClass:"float-left m-1"},[t._v("Created with Galaxy "+t._s(t.getVersion)+" on "+t._s(t.getTime))]),t._v(" "),n("div",{staticClass:"float-right m-1"},[t._v("Identifier "+t._s(t.markdownConfig.id))])]),t._v(" "),n("div",[t.markdownErrors.length>0?n("b-alert",{attrs:{variant:"warning",show:""}},t._l(t.markdownErrors,(function(e,i){return n("div",{key:i,staticClass:"mb-1"},[n("h5",[t._v(t._s(e.error||"Error"))]),t._v("\n                    "+t._s(e.line)+"\n                ")])})),0):t._e()],1),t._v(" "),t._l(t.markdownObjects,(function(e,i){return n("div",{key:i},["default"==e.name?n("p",{staticClass:"text-justify m-2",domProps:{innerHTML:t._s(e.content)}}):"generate_galaxy_version"==e.name?n("div",{staticClass:"galaxy-version"},[n("pre",[n("code",[t._v(t._s(t.getVersion))])])]):"generate_time"==e.name?n("div",{staticClass:"galaxy-time"},[n("pre",[n("code",[t._v(t._s(t.getTime))])])]):"history_dataset_as_image"==e.name?n("HistoryDatasetAsImage",{attrs:{args:e.args}}):"history_dataset_link"==e.name?n("HistoryDatasetLink",{attrs:{args:e.args}}):"history_dataset_index"==e.name?n("HistoryDatasetIndex",{attrs:{args:e.args}}):"invocation_time"==e.name?n("InvocationTime",{attrs:{args:e.args,invocations:t.invocations}}):"job_metrics"==e.name?n("JobMetrics",{attrs:{args:e.args}}):"job_parameters"==e.name?n("JobParameters",{attrs:{args:e.args}}):"workflow_display"==e.name?n("WorkflowDisplay",{attrs:{args:e.args,workflows:t.workflows}}):"visualization"==e.name?n("Visualization",{attrs:{args:e.args}}):"history_dataset_collection_display"==e.name?n("HistoryDatasetCollectionDisplay",{attrs:{args:e.args,collections:t.historyDatasetCollections}}):["tool_stdout","tool_stderr"].includes(e.name)?n("ToolStd",{attrs:{args:e.args,name:e.name,jobs:t.jobs}}):["history_dataset_embedded","history_dataset_display"].includes(e.name)?n("HistoryDatasetDisplay",{attrs:{args:e.args,datasets:t.historyDatasets,embedded:"history_dataset_embedded"==e.name}}):["history_dataset_name","history_dataset_info","history_dataset_peek","history_dataset_type"].includes(e.name)?n("HistoryDatasetDetails",{attrs:{name:e.name,args:e.args,datasets:t.historyDatasets}}):t._e()],1)}))],2)],1)}),[],!1,null,"56c5ebb7",null));e.a=gt.exports},function(t,e,n){"use strict";var i=n(26),a=n(20),r=n(17);a.c.add(r.l);var o={components:{FontAwesomeIcon:i.a},props:{citation:{type:Object},outputFormat:{type:String},prefix:{type:String}},computed:{link:function(){var t=this.citation.cite;return t.data&&t.data[0]&&t.data[0].URL},citationHtml:function(){return this.citation.cite.format(this.outputFormat,{format:"html",template:"apa",lang:"en-US"})}}},s=(n(542),n(5)),l=Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n    "+t._s(t.prefix)+"\n    "),n("span",{domProps:{innerHTML:t._s(t.citationHtml)}}),t._v(" "),t.link?n("a",{attrs:{href:t.link,target:"_blank"}},[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"View Citation",icon:"external-link-alt"}})],1):t._e()])}),[],!1,null,null,null);e.a=l.exports},function(t,e,n){"use strict";var i=n(7),a=n.n(i),r=n(3),o=n(6),s={name:"ToolSearch",components:{DelayedInput:n(269).a},props:{query:{type:String,default:""},placeholder:{type:String,default:"search tools"}},data:function(){return{favorites:["#favs","#favorites","#favourites"],minQueryLength:3,loading:!1}},computed:{favoritesResults:function(){return Object(o.a)().user.getFavorites().tools}},methods:{checkQuery:function(t){var e=this;this.$emit("onQuery",t),t&&t.length>=this.minQueryLength?this.favorites.includes(t)?this.$emit("onResults",this.favoritesResults):(this.loading=!0,a.a.get("".concat(Object(r.getAppRoot)(),"api/tools"),{params:{q:t}}).then((function(t){e.loading=!1,e.$emit("onResults",t.data)})).catch((function(t){e.loading=!1,e.$emit("onError",t)}))):this.$emit("onResults",null)}}},l=n(5),c=Object(l.a)(s,(function(){var t=this.$createElement;return(this._self._c||t)("delayed-input",{attrs:{query:this.query,loading:this.loading,placeholder:this.placeholder},on:{onChange:this.checkQuery}})}),[],!1,null,null,null);e.a=c.exports},function(t,e,n){"use strict";var i=n(26),a=n(20),r=n(17);a.c.add(r.D),a.c.add(r.G);var o={components:{FontAwesomeIcon:i.a},props:{query:{type:String},loading:{type:Boolean},placeholder:{type:String,default:"Enter your search term here."},delay:{type:Number,default:1e3}},data:function(){return{queryInput:null,queryTimer:null,queryCurrent:null}},watch:{query:function(t){this.setQuery(t)}},methods:{clearTimer:function(){this.queryTimer&&clearTimeout(this.queryTimer)},delayQuery:function(t){var e=this;this.clearTimer(),t?this.queryTimer=setTimeout((function(){e.setQuery(t)}),this.delay):this.setQuery(t)},setQuery:function(t){this.clearTimer(),this.queryCurrent===this.queryInput&&this.queryCurrent===t||(this.queryCurrent=this.queryInput=t,this.$emit("onChange",this.queryCurrent))}}},s=n(5),l=Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-input"},[n("b-input",{staticClass:"search-query",attrs:{placeholder:t.placeholder},on:{input:t.delayQuery,change:t.setQuery,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.setQuery()}},model:{value:t.queryInput,callback:function(e){t.queryInput=e},expression:"queryInput"}}),t._v(" "),t.loading?n("font-awesome-icon",{staticClass:"search-clear",attrs:{icon:"spinner",spin:""}}):n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"search-clear",attrs:{title:"clear search (esc)",icon:"times-circle"},on:{click:function(e){return t.setQuery()}}})],1)}),[],!1,null,null,null);e.a=l.exports},function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(156),d=n(11),u=n(10),h={defaults:{model_class:"DatasetCollectionElement",element_identifier:null,element_index:null,element_type:null},_mergeObject:function(t){var e=t.object,n=this.elementId;return e&&(n=t.object.id,delete t.object.id),i.default.extend(t,t.object,{element_id:n}),delete t.object,t},constructor:function(t,e){t=this._mergeObject(t),this.idAttribute="element_id",s.a.Model.apply(this,arguments)},parse:function(t,e){var n=t;return n=this._mergeObject(n)}},f=s.a.Model.extend(d.a.LoggableMixin).extend(h).extend({_logNamespace:"collections"}),p=s.a.Collection.extend(d.a.LoggableMixin).extend({_logNamespace:"collections",model:f,toString:function(){return["DatasetCollectionElementCollection(",this.length,")"].join("")}}),m=c.a.DatasetAssociation.extend(d.a.mixin(h,{url:function(){if(!this.has("history_id"))return console.warn("no endpoint for non-hdas within a collection yet"),"".concat(Object(l.getAppRoot)(),"api/datasets");var t=this._getDatasetId();return"".concat(Object(l.getAppRoot)(),"api/histories/").concat(this.get("history_id"),"/contents/").concat(t)},_getDatasetId:function(){return this.get("element_id")},defaults:i.default.extend({},c.a.DatasetAssociation.prototype.defaults,h.defaults),_downloadQueryParameters:function(){var t=this.get("file_ext")||"data",e=this.get("element_identifier"),n=this.get("parent_hdca_id");return"?to_ext=".concat(t,"&hdca_id=").concat(n,"&element_identifier=").concat(e)},constructor:function(t,e){this.debug("\t DatasetDCE.constructor:",t,e),h.constructor.call(this,t,e)},hasDetails:function(){return this.elements&&this.elements.length},toString:function(){var t=this.get("element_identifier");return"DatasetDCE(".concat(t,")")}})),_=p.extend({model:m,toString:function(){return["DatasetDCECollection(",this.length,")"].join("")}}),g=s.a.Model.extend(d.a.LoggableMixin).extend(d.a.SearchableModelMixin).extend({_logNamespace:"collections",defaults:{collection_type:null,deleted:!1},collectionClass:function(){return this.attributes.collection_type.indexOf(":")>0?y:_},initialize:function(t,e){this.debug("".concat(this,"(DatasetCollection).initialize:"),t,e,this),this.elements=this._createElementsModel(),this.on("change:elements",(function(){this.log("change:elements"),this.elements=this._createElementsModel()}))},_createElementsModel:function(){var t=this.collectionClass();this.debug("".concat(this,"._createElementsModel"),t,this.get("elements"),this.elements);var e=this.get("elements")||[];this.unset("elements",{silent:!0});var n=this.get("parent_hdca_id")||this.get("id");return i.default.each(e,(function(t,e){i.default.extend(t,{parent_hdca_id:n})})),this.elements=new t(e),this.elements},toJSON:function(){var t=s.a.Model.prototype.toJSON.call(this);return this.elements&&(t.elements=this.elements.toJSON()),t},inReadyState:function(){var t=this.get("populated");return this.isDeletedOrPurged()||t},hasDetails:function(){return 0!==this.elements.length},getVisibleContents:function(t){return this.elements},parse:function(t,e){var n=s.a.Model.prototype.parse.call(this,t,e);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},delete:function(t,e,n){return t=t||!1,e=e||!1,this.get("deleted")?r.a.when():(n=u.b.merge(n,{method:"delete"}),this.save({deleted:!0,recursive:t,purge:e},n))},undelete:function(t){return this.get("deleted")?this.save({deleted:!1},t):r.a.when()},isDeletedOrPurged:function(){return this.get("deleted")||this.get("purged")},searchAttributes:["name","tags"],toString:function(){var t=[this.get("id"),this.get("name")||this.get("element_identifier")];return"DatasetCollection(".concat(t.join(","),")")}}),v=g.extend(d.a.mixin(h,{constructor:function(t,e){this.debug("\t NestedDCDCE.constructor:",t,e),h.constructor.call(this,t,e)},toString:function(){return["NestedDCDCE(",this.object?"".concat(this.object):this.get("element_identifier"),")"].join("")}})),y=p.extend({model:v,toString:function(){return["NestedDCDCECollection(",this.length,")"].join("")}}),b={DatasetCollection:g},w=n(196).a.HistoryContentMixin,k=b.DatasetCollection,x=k.extend(w).extend({defaults:i.default.extend(i.default.clone(k.prototype.defaults),{history_content_type:"dataset_collection",model_class:"HistoryDatasetCollectionAssociation"}),save:function(t,e){return this.isNew()&&((e=e||{}).url="".concat(this.urlRoot+this.get("history_id"),"/contents"),(t=t||{}).type="dataset_collection"),k.prototype.save.call(this,t,e)},toString:function(){return"History".concat(k.prototype.toString.call(this))}});e.a={HistoryDatasetCollection:x}},function(t,e,n){"use strict";var i={components:{DebouncedInput:n(424).a},props:{value:{type:String,required:!0},tagName:{type:String,required:!1,default:"h2"},placeholder:{type:String,required:!1,default:""},stateValidator:{type:Function,required:!1,default:function(t,e){return t===e?null:t.length>0}},debounceDelay:{type:Number,required:!1,default:1e3}},data:function(){return{editing:!1}},computed:{displayValue:function(){return this.localValue||this.placeholder},localValue:{get:function(){return this.value},set:function(t,e){t!==e&&(this.$emit("input",t),this.$refs.clickToEditInput.blur())}}},methods:{toggleEdit:function(t){this.editing=void 0!==t?t:!this.editing}}},a=(n(824),n(5)),r=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"clickToEdit",class:{empty:!t.value.length}},[t.editing?t._e():n(t.tagName,{tag:"component",staticClass:"m-0",on:{click:function(e){return t.toggleEdit(!0)}}},[n("span",{staticClass:"editable"}),t._v(" "),n("span",[t._v(t._s(t.displayValue))]),t._v(" "),t._t("tooltip",null,{editing:t.editing,localValue:t.localValue})],2),t._v(" "),t.editing?n(t.tagName,{tag:"component"},[t._t("default",[n("debounced-input",{attrs:{delay:t.debounceDelay},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.value,a=e.input;return[n("b-form-input",{ref:"clickToEditInput",attrs:{value:i,autofocus:!0,placeholder:t.placeholder,state:t.stateValidator(i,t.localValue)},on:{input:a,blur:function(e){return t.toggleEdit(!1)}}})]}}],null,!1,1866262230),model:{value:t.localValue,callback:function(e){t.localValue=e},expression:"localValue"}})],{toggleEdit:t.toggleEdit,editing:t.editing,placeholder:t.placeholder,stateValidator:t.stateValidator})],2):t._e()],1)}),[],!1,null,"1a82b022",null);e.a=r.exports},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var i=n(564),a=n.n(i),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",t._g(t._b({directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"state-button",attrs:{title:t._f("localize")(t.theTitle),size:"sm",variant:"link"}},"b-button",t.$attrs,!1),t.$listeners),[n("i",{class:t.icon}),t._v(" "),n("span",{staticClass:"sr-only"},[t._v(t._s(t._f("localize")(t.theTitle)))])])},staticRenderFns:[],props:{state:{type:String,required:!0},icon:{type:String,required:!0},title:{type:String,required:!1,default:""}},inject:["STATES"],computed:{theTitle:function(){return this.title||a()(this.state)}}},o={components:{StateBtn:r},props:{state:{type:String,required:!0}},inject:["STATES"],methods:{inState:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.includes(this.state)}}},s=o,l=(n(808),n(5));Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.inState(t.STATES.RUNNING)?n("StateBtn",t._g({attrs:{state:t.state,icon:"upload-symbol upload-icon fa fa-spinner fa-spin"}},t.$listeners)):t.inState(t.STATES.QUEUED,t.STATES.NEW)?n("StateBtn",t._g({attrs:{state:t.state,icon:"fas fa-clock"}},t.$listeners)):t.inState(t.STATES.PAUSED)?n("StateBtn",t._g({attrs:{state:t.state,icon:"fas fa-pause"}},t.$listeners)):t.inState(t.STATES.ERROR)?n("StateBtn",t._g({attrs:{state:t.state,icon:"fas fa-exclamation-triangle"}},t.$listeners)):t.inState(t.STATES.MIXED)?n("StateBtn",t._g({attrs:{state:t.state,icon:"fas fa-exclamation-circle"}},t.$listeners)):n("span",{staticClass:"sr-only"},[t._v("\n    "+t._s(t._f("localize")(t.state))+"\n")])}),[],!1,null,null,null).exports},,,,,,,,,,function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(t){return/^nm$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},a={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},r=function(t){return function(e,n,r,o){var s=i(e),l=a[t][i(e)];return 2===s&&(l=l[n?0:1]),l.replace(/%d/i,e)}},o=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];t.defineLocale("ar",{months:o,monthsShort:o,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(t){return t.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},n={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},i=function(t){return function(i,a,r,o){var s=e(i),l=n[t][e(i)];return 2===s&&(l=l[a?0:1]),l.replace(/%d/i,i)}},a=["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];t.defineLocale("ar-dz",{months:a,monthsShort:a,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:0,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},a=function(t){return function(e,a,r,o){var s=n(e),l=i[t][n(e)];return 2===s&&(l=l[a?0:1]),l.replace(/%d/i,e)}},r=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];t.defineLocale("ar-ly",{months:r,monthsShort:r,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:a("s"),ss:a("s"),m:a("m"),mm:a("m"),h:a("h"),hh:a("h"),d:a("d"),dd:a("d"),M:a("M"),MM:a("M"),y:a("y"),yy:a("y")},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};t.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(t){return t.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};t.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(t){return/^(gündüz|axşam)$/.test(t)},meridiem:function(t,e,n){return t<4?"gecə":t<12?"səhər":t<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(t){if(0===t)return t+"-ıncı";var n=t%10;return t+(e[n]||e[t%100-n]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n){var i,a;return"m"===n?e?"хвіліна":"хвіліну":"h"===n?e?"гадзіна":"гадзіну":t+" "+(i=+t,a={ss:e?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:e?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:e?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[n].split("_"),i%10==1&&i%100!=11?a[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?a[1]:a[2])}t.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:e,mm:e,h:e,hh:e,d:"дзень",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(t){return/^(дня|вечара)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночы":t<12?"раніцы":t<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t%10!=2&&t%10!=3||t%100==12||t%100==13?t+"-ы":t+"-і";case"D":return t+"-га";default:return t}},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"яну_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Миналата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[Миналия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-ев":0===n?t+"-ен":n>10&&n<20?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};t.defineLocale("bn",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(t){return t.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(t,e){return 12===t&&(t=0),"রাত"===e&&t>=4||"দুপুর"===e&&t<5||"বিকাল"===e?t+12:t},meridiem:function(t,e,n){return t<4?"রাত":t<10?"সকাল":t<17?"দুপুর":t<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};t.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་1_ཟླ་2_ཟླ་3_ཟླ་4_ཟླ་5_ཟླ་6_ཟླ་7_ཟླ་8_ཟླ་9_ཟླ་10_ཟླ་11_ཟླ་12".split("_"),monthsShortRegex:/^(ཟླ་\d{1,2})/,monthsParseExact:!0,weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི_ཟླ_མིག_ལྷག_ཕུར_སངས_སྤེན".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(t){return t.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(t,e){return 12===t&&(t=0),"མཚན་མོ"===e&&t>=4||"ཉིན་གུང"===e&&t<5||"དགོང་དག"===e?t+12:t},meridiem:function(t,e,n){return t<4?"མཚན་མོ":t<10?"ཞོགས་ཀས":t<17?"ཉིན་གུང":t<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n){return t+" "+function(t,e){return 2===e?function(t){var e={m:"v",b:"v",d:"z"};return void 0===e[t.charAt(0)]?t:e[t.charAt(0)]+t.substring(1)}(t):t}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],t)}var n=[/^gen/i,/^c[ʼ\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],i=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,a=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];t.defineLocale("br",{months:"Genver_Cʼhwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Cʼhwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercʼher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:a,fullWeekdaysParse:[/^sul/i,/^lun/i,/^meurzh/i,/^merc[ʼ\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],shortWeekdaysParse:[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],minWeekdaysParse:a,monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,monthsShortStrictRegex:/^(gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warcʼhoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Decʼh da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s ʼzo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:e,h:"un eur",hh:"%d eur",d:"un devezh",dd:e,M:"ur miz",MM:e,y:"ur bloaz",yy:function(t){switch(function t(e){return e>9?t(e%10):e}(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(añ|vet)/,ordinal:function(t){return t+(1===t?"añ":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(t){return"g.m."===t},meridiem:function(t,e,n){return t<12?"a.m.":"g.m."}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n){var i=t+" ";switch(n){case"ss":return i+=1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi";case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}t.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(t,e){var n=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"è";return"w"!==e&&"W"!==e||(n="a"),t+n},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),i=[/^led/i,/^úno/i,/^bře/i,/^dub/i,/^kvě/i,/^(čvn|červen$|června)/i,/^(čvc|červenec|července)/i,/^srp/i,/^zář/i,/^říj/i,/^lis/i,/^pro/i],a=/^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;function r(t){return t>1&&t<5&&1!=~~(t/10)}function o(t,e,n,i){var a=t+" ";switch(n){case"s":return e||i?"pár sekund":"pár sekundami";case"ss":return e||i?a+(r(t)?"sekundy":"sekund"):a+"sekundami";case"m":return e?"minuta":i?"minutu":"minutou";case"mm":return e||i?a+(r(t)?"minuty":"minut"):a+"minutami";case"h":return e?"hodina":i?"hodinu":"hodinou";case"hh":return e||i?a+(r(t)?"hodiny":"hodin"):a+"hodinami";case"d":return e||i?"den":"dnem";case"dd":return e||i?a+(r(t)?"dny":"dní"):a+"dny";case"M":return e||i?"měsíc":"měsícem";case"MM":return e||i?a+(r(t)?"měsíce":"měsíců"):a+"měsíci";case"y":return e||i?"rok":"rokem";case"yy":return e||i?a+(r(t)?"roky":"let"):a+"lety"}}t.defineLocale("cs",{months:e,monthsShort:n,monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:o,ss:o,m:o,mm:o,h:o,hh:o,d:o,dd:o,M:o,MM:o,y:o,yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(t){return t+(/сехет$/i.exec(t)?"рен":/ҫул$/i.exec(t)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(t){var e="";return t>20?e=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(e=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][t]),t+e},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?a[n][0]:a[n][1]}t.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?a[n][0]:a[n][1]}t.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?a[n][0]:a[n][1]}t.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];t.defineLocale("dv",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(t){return"މފ"===t},meridiem:function(t,e,n){return t<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(t,e){return t?"string"==typeof e&&/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(t,e,n){return t>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(t){return"μ"===(t+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(t,e){var n,i=this._calendarEl[t],a=e&&e.hours();return n=i,("undefined"!=typeof Function&&n instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(i=i.apply(e)),i.replace("{}",a%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:0,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_aŭg_sept_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(t){return"p"===t.charAt(0).toLowerCase()},meridiem:function(t,e,n){return t>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4},invalidDate:"Fecha invalida"})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[t+"sekundi",t+"sekundit"],m:["ühe minuti","üks minut"],mm:[t+" minuti",t+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[t+" tunni",t+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[t+" kuu",t+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[t+" aasta",t+" aastat"]};return e?a[n][2]?a[n][2]:a[n][1]:i?a[n][0]:a[n][1]}t.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d päeva",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};t.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(t){return/بعد از ظهر/.test(t)},meridiem:function(t,e,n){return t<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"%d ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(t){return t.replace(/[۰-۹]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",e[7],e[8],e[9]];function i(t,i,a,r){var o="";switch(a){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"ss":return r?"sekunnin":"sekuntia";case"m":return r?"minuutin":"minuutti";case"mm":o=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":o=r?"tunnin":"tuntia";break;case"d":return r?"päivän":"päivä";case"dd":o=r?"päivän":"päivää";break;case"M":return r?"kuukauden":"kuukausi";case"MM":o=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":o=r?"vuoden":"vuotta"}return o=function(t,i){return t<10?i?n[t]:e[t]:t}(t,r)+" "+o}t.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaður",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(t,e){switch(e){case"D":return t+(1===t?"er":"");default:case"M":case"Q":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:case"M":case"Q":case"D":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:case"M":case"Q":case"D":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");t.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ga",{months:["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Meitheamh","Iúil","Lúnasa","Meán Fómhair","Deireadh Fómhair","Samhain","Nollaig"],monthsShort:["Ean","Feabh","Márt","Aib","Beal","Meith","Iúil","Lún","M.F.","D.F.","Samh","Noll"],monthsParseExact:!0,weekdays:["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Sathairn"],weekdaysShort:["Domh","Luan","Máirt","Céad","Déar","Aoine","Sath"],weekdaysMin:["Do","Lu","Má","Cé","Dé","A","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amárach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inné ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s ó shin",s:"cúpla soicind",ss:"%d soicind",m:"nóiméad",mm:"%d nóiméad",h:"uair an chloig",hh:"%d uair an chloig",d:"lá",dd:"%d lá",M:"mí",MM:"%d míonna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],monthsShort:["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],monthsParseExact:!0,weekdays:["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["Dò","Lu","Mà","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return 0===t.indexOf("un")?"n"+t:"en "+t},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a={s:["थोडया सॅकंडांनी","थोडे सॅकंड"],ss:[t+" सॅकंडांनी",t+" सॅकंड"],m:["एका मिणटान","एक मिनूट"],mm:[t+" मिणटांनी",t+" मिणटां"],h:["एका वरान","एक वर"],hh:[t+" वरांनी",t+" वरां"],d:["एका दिसान","एक दीस"],dd:[t+" दिसांनी",t+" दीस"],M:["एका म्हयन्यान","एक म्हयनो"],MM:[t+" म्हयन्यानी",t+" म्हयने"],y:["एका वर्सान","एक वर्स"],yy:[t+" वर्सांनी",t+" वर्सां"]};return i?a[n][0]:a[n][1]}t.defineLocale("gom-deva",{months:{standalone:"जानेवारी_फेब्रुवारी_मार्च_एप्रील_मे_जून_जुलय_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),format:"जानेवारीच्या_फेब्रुवारीच्या_मार्चाच्या_एप्रीलाच्या_मेयाच्या_जूनाच्या_जुलयाच्या_ऑगस्टाच्या_सप्टेंबराच्या_ऑक्टोबराच्या_नोव्हेंबराच्या_डिसेंबराच्या".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"जाने._फेब्रु._मार्च_एप्री._मे_जून_जुल._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"आयतार_सोमार_मंगळार_बुधवार_बिरेस्तार_सुक्रार_शेनवार".split("_"),weekdaysShort:"आयत._सोम._मंगळ._बुध._ब्रेस्त._सुक्र._शेन.".split("_"),weekdaysMin:"आ_सो_मं_बु_ब्रे_सु_शे".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [वाजतां]",LTS:"A h:mm:ss [वाजतां]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [वाजतां]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [वाजतां]",llll:"ddd, D MMM YYYY, A h:mm [वाजतां]"},calendar:{sameDay:"[आयज] LT",nextDay:"[फाल्यां] LT",nextWeek:"[फुडलो] dddd[,] LT",lastDay:"[काल] LT",lastWeek:"[फाटलो] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s आदीं",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}(वेर)/,ordinal:function(t,e){switch(e){case"D":return t+"वेर";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return t}},week:{dow:1,doy:4},meridiemParse:/राती|सकाळीं|दनपारां|सांजे/,meridiemHour:function(t,e){return 12===t&&(t=0),"राती"===e?t<4?t:t+12:"सकाळीं"===e?t:"दनपारां"===e?t>12?t:t+12:"सांजे"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"राती":t<12?"सकाळीं":t<16?"दनपारां":t<20?"सांजे":"राती"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a={s:["thoddea sekondamni","thodde sekond"],ss:[t+" sekondamni",t+" sekond"],m:["eka mintan","ek minut"],mm:[t+" mintamni",t+" mintam"],h:["eka voran","ek vor"],hh:[t+" voramni",t+" voram"],d:["eka disan","ek dis"],dd:[t+" disamni",t+" dis"],M:["eka mhoinean","ek mhoino"],MM:[t+" mhoineamni",t+" mhoine"],y:["eka vorsan","ek voros"],yy:[t+" vorsamni",t+" vorsam"]};return i?a[n][0]:a[n][1]}t.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(t,e){switch(e){case"D":return t+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return t}},week:{dow:1,doy:4},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(t,e){return 12===t&&(t=0),"rati"===e?t<4?t:t+12:"sokallim"===e?t:"donparam"===e?t>12?t:t+12:"sanje"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"rati":t<12?"sokallim":t<16?"donparam":t<20?"sanje":"rati"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},n={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};t.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પેહલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(t){return t.replace(/[૧૨૩૪૫૬૭૮૯૦]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/રાત|બપોર|સવાર|સાંજ/,meridiemHour:function(t,e){return 12===t&&(t=0),"રાત"===e?t<4?t:t+12:"સવાર"===e?t:"બપોર"===e?t>=10?t:t+12:"સાંજ"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"રાત":t<10?"સવાર":t<17?"બપોર":t<20?"સાંજ":"રાત"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(t){return 2===t?"שעתיים":t+" שעות"},d:"יום",dd:function(t){return 2===t?"יומיים":t+" ימים"},M:"חודש",MM:function(t){return 2===t?"חודשיים":t+" חודשים"},y:"שנה",yy:function(t){return 2===t?"שנתיים":t%10==0&&10!==t?t+" שנה":t+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(t){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(t)},meridiem:function(t,e,n){return t<5?"לפנות בוקר":t<10?"בבוקר":t<12?n?'לפנה"צ':"לפני הצהריים":t<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};t.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(t,e){return 12===t&&(t=0),"रात"===e?t<4?t:t+12:"सुबह"===e?t:"दोपहर"===e?t>=10?t:t+12:"शाम"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"रात":t<10?"सुबह":t<17?"दोपहर":t<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n){var i=t+" ";switch(n){case"ss":return i+=1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi";case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}t.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prošlu] [nedjelju] [u] LT";case 3:return"[prošlu] [srijedu] [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(t,e,n,i){var a=t;switch(n){case"s":return i||e?"néhány másodperc":"néhány másodperce";case"ss":return a+(i||e)?" másodperc":" másodperce";case"m":return"egy"+(i||e?" perc":" perce");case"mm":return a+(i||e?" perc":" perce");case"h":return"egy"+(i||e?" óra":" órája");case"hh":return a+(i||e?" óra":" órája");case"d":return"egy"+(i||e?" nap":" napja");case"dd":return a+(i||e?" nap":" napja");case"M":return"egy"+(i||e?" hónap":" hónapja");case"MM":return a+(i||e?" hónap":" hónapja");case"y":return"egy"+(i||e?" év":" éve");case"yy":return a+(i||e?" év":" éve")}return""}function i(t){return(t?"":"[múlt] ")+"["+e[this.day()]+"] LT[-kor]"}t.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(t){return"u"===t.charAt(1).toLowerCase()},meridiem:function(t,e,n){return t<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(t){return/^(ցերեկվա|երեկոյան)$/.test(t)},meridiem:function(t){return t<4?"գիշերվա":t<12?"առավոտվա":t<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-ին":t+"-րդ";default:return t}},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"siang"===e?t>=11?t:t+12:"sore"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"siang":t<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t){return t%100==11||t%10!=1}function n(t,n,i,a){var r=t+" ";switch(i){case"s":return n||a?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return e(t)?r+(n||a?"sekúndur":"sekúndum"):r+"sekúnda";case"m":return n?"mínúta":"mínútu";case"mm":return e(t)?r+(n||a?"mínútur":"mínútum"):n?r+"mínúta":r+"mínútu";case"hh":return e(t)?r+(n||a?"klukkustundir":"klukkustundum"):r+"klukkustund";case"d":return n?"dagur":a?"dag":"degi";case"dd":return e(t)?n?r+"dagar":r+(a?"daga":"dögum"):n?r+"dagur":r+(a?"dag":"degi");case"M":return n?"mánuður":a?"mánuð":"mánuði";case"MM":return e(t)?n?r+"mánuðir":r+(a?"mánuði":"mánuðum"):n?r+"mánuður":r+(a?"mánuð":"mánuði");case"y":return n||a?"ár":"ári";case"yy":return e(t)?r+(n||a?"ár":"árum"):r+(n||a?"ár":"ári")}}t.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"令和",narrow:"㋿",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"平成",narrow:"㍻",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"昭和",narrow:"㍼",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"大正",narrow:"㍽",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"明治",narrow:"㍾",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"西暦",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"紀元前",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(t,e){return"元"===e[1]?1:parseInt(e[1]||t,10)},months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(t){return"午後"===t},meridiem:function(t,e,n){return t<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(t){return t.week()!==this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(t){return this.week()!==t.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(t,e){switch(e){case"y":return 1===t?"元年":t+"年";case"d":case"D":case"DDD":return t+"日";default:return t}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(t,e){return 12===t&&(t=0),"enjing"===e?t:"siyang"===e?t>=11?t:t+12:"sonten"===e||"ndalu"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"enjing":t<15?"siyang":t<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ka",{months:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(t){return t.replace(/(წამ|წუთ|საათ|წელ|დღ|თვ)(ი|ე)/,(function(t,e,n){return"ი"===n?e+"ში":e+n+"ში"}))},past:function(t){return/(წამი|წუთი|საათი|დღე|თვე)/.test(t)?t.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(t)?t.replace(/წელი$/,"წლის წინ"):t},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(t){return 0===t?t:1===t?t+"-ლი":t<20||t<=100&&t%20==0||t%100==0?"მე-"+t:t+"-ე"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};t.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"១",2:"២",3:"៣",4:"៤",5:"៥",6:"៦",7:"៧",8:"៨",9:"៩",0:"០"},n={"១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9","០":"0"};t.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysMin:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ព្រឹក|ល្ងាច/,isPM:function(t){return"ល្ងាច"===t},meridiem:function(t,e,n){return t<12?"ព្រឹក":"ល្ងាច"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},dayOfMonthOrdinalParse:/ទី\d{1,2}/,ordinal:"ទី%d",preparse:function(t){return t.replace(/[១២៣៤៥៦៧៨៩០]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},n={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};t.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(t){return t.replace(/[೧೨೩೪೫೬೭೮೯೦]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,meridiemHour:function(t,e){return 12===t&&(t=0),"ರಾತ್ರಿ"===e?t<4?t:t+12:"ಬೆಳಿಗ್ಗೆ"===e?t:"ಮಧ್ಯಾಹ್ನ"===e?t>=10?t:t+12:"ಸಂಜೆ"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"ರಾತ್ರಿ":t<10?"ಬೆಳಿಗ್ಗೆ":t<17?"ಮಧ್ಯಾಹ್ನ":t<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(ನೇ)/,ordinal:function(t){return t+"ನೇ"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"일";case"M":return t+"월";case"w":case"W":return t+"주";default:return t}},meridiemParse:/오전|오후/,isPM:function(t){return"오후"===t},meridiem:function(t,e,n){return t<12?"오전":"오후"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=["کانونی دووەم","شوبات","ئازار","نیسان","ئایار","حوزەیران","تەمموز","ئاب","ئەیلوول","تشرینی یەكەم","تشرینی دووەم","كانونی یەکەم"];t.defineLocale("ku",{months:i,monthsShort:i,weekdays:"یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌".split("_"),weekdaysShort:"یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌".split("_"),weekdaysMin:"ی_د_س_چ_پ_ه_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ئێواره‌|به‌یانی/,isPM:function(t){return/ئێواره‌/.test(t)},meridiem:function(t,e,n){return t<12?"به‌یانی":"ئێواره‌"},calendar:{sameDay:"[ئه‌مرۆ كاتژمێر] LT",nextDay:"[به‌یانی كاتژمێر] LT",nextWeek:"dddd [كاتژمێر] LT",lastDay:"[دوێنێ كاتژمێر] LT",lastWeek:"dddd [كاتژمێر] LT",sameElse:"L"},relativeTime:{future:"له‌ %s",past:"%s",s:"چه‌ند چركه‌یه‌ك",ss:"چركه‌ %d",m:"یه‌ك خوله‌ك",mm:"%d خوله‌ك",h:"یه‌ك كاتژمێر",hh:"%d كاتژمێر",d:"یه‌ك ڕۆژ",dd:"%d ڕۆژ",M:"یه‌ك مانگ",MM:"%d مانگ",y:"یه‌ك ساڵ",yy:"%d ساڵ"},preparse:function(t){return t.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};t.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кечээ саат] LT",lastWeek:"[Өткөн аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return e?a[n][0]:a[n][1]}function n(t){if(t=parseInt(t,10),isNaN(t))return!1;if(t<0)return!0;if(t<10)return 4<=t&&t<=7;if(t<100){var e=t%10;return n(0===e?t/10:e)}if(t<1e4){for(;t>=10;)t/=10;return n(t)}return n(t/=1e3)}t.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(t){return n(t.substr(0,t.indexOf(" ")))?"a "+t:"an "+t},past:function(t){return n(t.substr(0,t.indexOf(" ")))?"viru "+t:"virun "+t},s:"e puer Sekonnen",ss:"%d Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:"%d Deeg",M:e,MM:"%d Méint",y:e,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(t){return"ຕອນແລງ"===t},meridiem:function(t,e,n){return t<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(ທີ່)\d{1,2}/,ordinal:function(t){return"ທີ່"+t}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(t,e,n,i){return e?a(n)[0]:i?a(n)[1]:a(n)[2]}function i(t){return t%10==0||t>10&&t<20}function a(t){return e[t].split("_")}function r(t,e,r,o){var s=t+" ";return 1===t?s+n(0,e,r[0],o):e?s+(i(t)?a(r)[1]:a(r)[0]):o?s+a(r)[1]:s+(i(t)?a(r)[1]:a(r)[2])}t.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:function(t,e,n,i){return e?"kelios sekundės":i?"kelių sekundžių":"kelias sekundes"},ss:r,m:n,mm:r,h:n,hh:r,d:n,dd:r,M:n,MM:r,y:n,yy:r},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(t,e,n){return n?e%10==1&&e%100!=11?t[2]:t[3]:e%10==1&&e%100!=11?t[0]:t[1]}function i(t,i,a){return t+" "+n(e[a],t,i)}function a(t,i,a){return n(e[a],t,i)}t.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:function(t,e){return e?"dažas sekundes":"dažām sekundēm"},ss:i,m:a,mm:i,h:a,hh:i,d:a,dd:i,M:a,MM:i,y:a,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var a=e.words[i];return 1===i.length?n?a[0]:a[1]:t+" "+e.correctGrammaticalCase(t,a)}};t.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mjesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"за %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"една минута",mm:"%d минути",h:"еден час",hh:"%d часа",d:"еден ден",dd:"%d дена",M:"еден месец",MM:"%d месеци",y:"една година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-ев":0===n?t+"-ен":n>10&&n<20?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(t,e){return 12===t&&(t=0),"രാത്രി"===e&&t>=4||"ഉച്ച കഴിഞ്ഞ്"===e||"വൈകുന്നേരം"===e?t+12:t},meridiem:function(t,e,n){return t<4?"രാത്രി":t<12?"രാവിലെ":t<17?"ഉച്ച കഴിഞ്ഞ്":t<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){switch(n){case"s":return e?"хэдхэн секунд":"хэдхэн секундын";case"ss":return t+(e?" секунд":" секундын");case"m":case"mm":return t+(e?" минут":" минутын");case"h":case"hh":return t+(e?" цаг":" цагийн");case"d":case"dd":return t+(e?" өдөр":" өдрийн");case"M":case"MM":return t+(e?" сар":" сарын");case"y":case"yy":return t+(e?" жил":" жилийн");default:return t}}t.defineLocale("mn",{months:"Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар".split("_"),monthsShort:"1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар".split("_"),monthsParseExact:!0,weekdays:"Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба".split("_"),weekdaysShort:"Ням_Дав_Мяг_Лха_Пүр_Баа_Бям".split("_"),weekdaysMin:"Ня_Да_Мя_Лх_Пү_Ба_Бя".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY оны MMMMын D",LLL:"YYYY оны MMMMын D HH:mm",LLLL:"dddd, YYYY оны MMMMын D HH:mm"},meridiemParse:/ҮӨ|ҮХ/i,isPM:function(t){return"ҮХ"===t},meridiem:function(t,e,n){return t<12?"ҮӨ":"ҮХ"},calendar:{sameDay:"[Өнөөдөр] LT",nextDay:"[Маргааш] LT",nextWeek:"[Ирэх] dddd LT",lastDay:"[Өчигдөр] LT",lastWeek:"[Өнгөрсөн] dddd LT",sameElse:"L"},relativeTime:{future:"%s дараа",past:"%s өмнө",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2} өдөр/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+" өдөр";default:return t}}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function i(t,e,n,i){var a="";if(e)switch(n){case"s":a="काही सेकंद";break;case"ss":a="%d सेकंद";break;case"m":a="एक मिनिट";break;case"mm":a="%d मिनिटे";break;case"h":a="एक तास";break;case"hh":a="%d तास";break;case"d":a="एक दिवस";break;case"dd":a="%d दिवस";break;case"M":a="एक महिना";break;case"MM":a="%d महिने";break;case"y":a="एक वर्ष";break;case"yy":a="%d वर्षे"}else switch(n){case"s":a="काही सेकंदां";break;case"ss":a="%d सेकंदां";break;case"m":a="एका मिनिटा";break;case"mm":a="%d मिनिटां";break;case"h":a="एका तासा";break;case"hh":a="%d तासां";break;case"d":a="एका दिवसा";break;case"dd":a="%d दिवसां";break;case"M":a="एका महिन्या";break;case"MM":a="%d महिन्यां";break;case"y":a="एका वर्षा";break;case"yy":a="%d वर्षां"}return a.replace(/%d/i,t)}t.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/पहाटे|सकाळी|दुपारी|सायंकाळी|रात्री/,meridiemHour:function(t,e){return 12===t&&(t=0),"पहाटे"===e||"सकाळी"===e?t:"दुपारी"===e||"सायंकाळी"===e||"रात्री"===e?t>=12?t:t+12:void 0},meridiem:function(t,e,n){return t>=0&&t<6?"पहाटे":t<12?"सकाळी":t<17?"दुपारी":t<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};t.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(t){return t.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};t.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(t,e){return 12===t&&(t=0),"राति"===e?t<4?t:t+12:"बिहान"===e?t:"दिउँसो"===e?t>=10?t:t+12:"साँझ"===e?t+12:void 0},meridiem:function(t,e,n){return t<3?"राति":t<12?"बिहान":t<16?"दिउँसो":t<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],a=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],a=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._må._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_må_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("oc-lnc",{months:{standalone:"genièr_febrièr_març_abril_mai_junh_julhet_agost_setembre_octòbre_novembre_decembre".split("_"),format:"de genièr_de febrièr_de març_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octòbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimècres_dijòus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[uèi a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ièr a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(t,e){var n=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"è";return"w"!==e&&"W"!==e||(n="a"),t+n},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};t.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"[ਅਗਲਾ] dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(t){return t.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(t,e){return 12===t&&(t=0),"ਰਾਤ"===e?t<4?t:t+12:"ਸਵੇਰ"===e?t:"ਦੁਪਹਿਰ"===e?t>=10?t:t+12:"ਸ਼ਾਮ"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"ਰਾਤ":t<10?"ਸਵੇਰ":t<17?"ਦੁਪਹਿਰ":t<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");function i(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function a(t,e,n){var a=t+" ";switch(n){case"ss":return a+(i(t)?"sekundy":"sekund");case"m":return e?"minuta":"minutę";case"mm":return a+(i(t)?"minuty":"minut");case"h":return e?"godzina":"godzinę";case"hh":return a+(i(t)?"godziny":"godzin");case"MM":return a+(i(t)?"miesiące":"miesięcy");case"yy":return a+(i(t)?"lata":"lat")}}t.defineLocale("pl",{months:function(t,i){return t?""===i?"("+n[t.month()]+"|"+e[t.month()]+")":/D MMMM/.test(i)?n[t.month()]:e[t.month()]:e},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:a,m:a,mm:a,h:a,hh:a,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:a,y:"rok",yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"do_2ª_3ª_4ª_5ª_6ª_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº"})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n){var i=" ";return(t%100>=20||t>=100&&t%100==0)&&(i=" de "),t+i+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}t.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:e,m:"un minut",mm:e,h:"o oră",hh:e,d:"o zi",dd:e,M:"o lună",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n){var i,a;return"m"===n?e?"минута":"минуту":t+" "+(i=+t,a={ss:e?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:e?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),i%10==1&&i%100!=11?a[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?a[1]:a[2])}var n=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];t.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:e,m:e,mm:e,h:"час",hh:e,d:"день",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночи":t<12?"утра":t<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],n=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];t.defineLocale("sd",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(t){return"شام"===t},meridiem:function(t,e,n){return t<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} වැනි/,ordinal:function(t){return t+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(t){return"ප.ව."===t||"පස් වරු"===t},meridiem:function(t,e,n){return t>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function i(t){return t>1&&t<5}function a(t,e,n,a){var r=t+" ";switch(n){case"s":return e||a?"pár sekúnd":"pár sekundami";case"ss":return e||a?r+(i(t)?"sekundy":"sekúnd"):r+"sekundami";case"m":return e?"minúta":a?"minútu":"minútou";case"mm":return e||a?r+(i(t)?"minúty":"minút"):r+"minútami";case"h":return e?"hodina":a?"hodinu":"hodinou";case"hh":return e||a?r+(i(t)?"hodiny":"hodín"):r+"hodinami";case"d":return e||a?"deň":"dňom";case"dd":return e||a?r+(i(t)?"dni":"dní"):r+"dňami";case"M":return e||a?"mesiac":"mesiacom";case"MM":return e||a?r+(i(t)?"mesiace":"mesiacov"):r+"mesiacmi";case"y":return e||a?"rok":"rokom";case"yy":return e||a?r+(i(t)?"roky":"rokov"):r+"rokmi"}}t.defineLocale("sk",{months:e,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a=t+" ";switch(n){case"s":return e||i?"nekaj sekund":"nekaj sekundami";case"ss":return a+=1===t?e?"sekundo":"sekundi":2===t?e||i?"sekundi":"sekundah":t<5?e||i?"sekunde":"sekundah":"sekund";case"m":return e?"ena minuta":"eno minuto";case"mm":return a+=1===t?e?"minuta":"minuto":2===t?e||i?"minuti":"minutama":t<5?e||i?"minute":"minutami":e||i?"minut":"minutami";case"h":return e?"ena ura":"eno uro";case"hh":return a+=1===t?e?"ura":"uro":2===t?e||i?"uri":"urama":t<5?e||i?"ure":"urami":e||i?"ur":"urami";case"d":return e||i?"en dan":"enim dnem";case"dd":return a+=1===t?e||i?"dan":"dnem":2===t?e||i?"dni":"dnevoma":e||i?"dni":"dnevi";case"M":return e||i?"en mesec":"enim mesecem";case"MM":return a+=1===t?e||i?"mesec":"mesecem":2===t?e||i?"meseca":"mesecema":t<5?e||i?"mesece":"meseci":e||i?"mesecev":"meseci";case"y":return e||i?"eno leto":"enim letom";case"yy":return a+=1===t?e||i?"leto":"letom":2===t?e||i?"leti":"letoma":t<5?e||i?"leta":"leti":e||i?"let":"leti"}}t.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(t){return"M"===t.charAt(0)},meridiem:function(t,e,n){return t<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var a=e.words[i];return 1===i.length?n?a[0]:a[1]:t+" "+e.correctGrammaticalCase(t,a)}};t.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={words:{ss:["секунда","секунде","секунди"],m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var a=e.words[i];return 1===i.length?n?a[0]:a[1]:t+" "+e.correctGrammaticalCase(t,a)}};t.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"дан",dd:e.translate,M:"месец",MM:e.translate,y:"годину",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(t,e,n){return t<11?"ekuseni":t<15?"emini":t<19?"entsambama":"ebusuku"},meridiemHour:function(t,e){return 12===t&&(t=0),"ekuseni"===e?t:"emini"===e?t>=11?t:t+12:"entsambama"===e||"ebusuku"===e?0===t?0:t+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?":e":1===e?":a":2===e?":a":":e")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};t.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}வது/,ordinal:function(t){return t+"வது"},preparse:function(t){return t.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(t,e,n){return t<2?" யாமம்":t<6?" வைகறை":t<10?" காலை":t<14?" நண்பகல்":t<18?" எற்பாடு":t<22?" மாலை":" யாமம்"},meridiemHour:function(t,e){return 12===t&&(t=0),"யாமம்"===e?t<2?t:t+12:"வைகறை"===e||"காலை"===e?t:"நண்பகல்"===e&&t>=10?t:t+12},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(t,e){return 12===t&&(t=0),"రాత్రి"===e?t<4?t:t+12:"ఉదయం"===e?t:"మధ్యాహ్నం"===e?t>=10?t:t+12:"సాయంత్రం"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"రాత్రి":t<10?"ఉదయం":t<17?"మధ్యాహ్నం":t<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={0:"-ум",1:"-ум",2:"-юм",3:"-юм",4:"-ум",5:"-ум",6:"-ум",7:"-ум",8:"-ум",9:"-ум",10:"-ум",12:"-ум",13:"-ум",20:"-ум",30:"-юм",40:"-ум",50:"-ум",60:"-ум",70:"-ум",80:"-ум",90:"-ум",100:"-ум"};t.defineLocale("tg",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе".split("_"),weekdaysShort:"яшб_дшб_сшб_чшб_пшб_ҷум_шнб".split("_"),weekdaysMin:"яш_дш_сш_чш_пш_ҷм_шб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Имрӯз соати] LT",nextDay:"[Пагоҳ соати] LT",lastDay:"[Дирӯз соати] LT",nextWeek:"dddd[и] [ҳафтаи оянда соати] LT",lastWeek:"dddd[и] [ҳафтаи гузашта соати] LT",sameElse:"L"},relativeTime:{future:"баъди %s",past:"%s пеш",s:"якчанд сония",m:"як дақиқа",mm:"%d дақиқа",h:"як соат",hh:"%d соат",d:"як рӯз",dd:"%d рӯз",M:"як моҳ",MM:"%d моҳ",y:"як сол",yy:"%d сол"},meridiemParse:/шаб|субҳ|рӯз|бегоҳ/,meridiemHour:function(t,e){return 12===t&&(t=0),"шаб"===e?t<4?t:t+12:"субҳ"===e?t:"рӯз"===e?t>=11?t:t+12:"бегоҳ"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"шаб":t<11?"субҳ":t<16?"рӯз":t<19?"бегоҳ":"шаб"},dayOfMonthOrdinalParse:/\d{1,2}-(ум|юм)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(t){return"หลังเที่ยง"===t},meridiem:function(t,e,n){return t<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(t,n,i,a){var r=function(t){var n=Math.floor(t%1e3/100),i=Math.floor(t%100/10),a=t%10,r="";return n>0&&(r+=e[n]+"vatlh"),i>0&&(r+=(""!==r?" ":"")+e[i]+"maH"),a>0&&(r+=(""!==r?" ":"")+e[a]),""===r?"pagh":r}(t);switch(i){case"ss":return r+" lup";case"mm":return r+" tup";case"hh":return r+" rep";case"dd":return r+" jaj";case"MM":return r+" jar";case"yy":return r+" DIS"}}t.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(t){var e=t;return e=-1!==t.indexOf("jaj")?e.slice(0,-3)+"leS":-1!==t.indexOf("jar")?e.slice(0,-3)+"waQ":-1!==t.indexOf("DIS")?e.slice(0,-3)+"nem":e+" pIq"},past:function(t){var e=t;return e=-1!==t.indexOf("jaj")?e.slice(0,-3)+"Hu’":-1!==t.indexOf("jar")?e.slice(0,-3)+"wen":-1!==t.indexOf("DIS")?e.slice(0,-3)+"ben":e+" ret"},s:"puS lup",ss:n,m:"wa’ tup",mm:n,h:"wa’ rep",hh:n,d:"wa’ jaj",dd:n,M:"wa’ jar",MM:n,y:"wa’ DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};t.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),meridiem:function(t,e,n){return t<12?n?"öö":"ÖÖ":n?"ös":"ÖS"},meridiemParse:/öö|ÖÖ|ös|ÖS/,isPM:function(t){return"ös"===t||"ÖS"===t},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(t,n){switch(n){case"d":case"D":case"Do":case"DD":return t;default:if(0===t)return t+"'ıncı";var i=t%10;return t+(e[i]||e[t%100-i]||e[t>=100?100:null])}},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n,i){var a={s:["viensas secunds","'iensas secunds"],ss:[t+" secunds",t+" secunds"],m:["'n míut","'iens míut"],mm:[t+" míuts",t+" míuts"],h:["'n þora","'iensa þora"],hh:[t+" þoras",t+" þoras"],d:["'n ziua","'iensa ziua"],dd:[t+" ziuas",t+" ziuas"],M:["'n mes","'iens mes"],MM:[t+" mesen",t+" mesen"],y:["'n ar","'iens ar"],yy:[t+" ars",t+" ars"]};return i?a[n][0]:e?a[n][0]:a[n][1]}t.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(t){return"d'o"===t.toLowerCase()},meridiem:function(t,e,n){return t>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js language configuration
t.defineLocale("ug-cn",{months:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),monthsShort:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),weekdays:"يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە".split("_"),weekdaysShort:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),weekdaysMin:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-يىلىM-ئاينىڭD-كۈنى",LLL:"YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm",LLLL:"dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm"},meridiemParse:/يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,meridiemHour:function(t,e){return 12===t&&(t=0),"يېرىم كېچە"===e||"سەھەر"===e||"چۈشتىن بۇرۇن"===e?t:"چۈشتىن كېيىن"===e||"كەچ"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?"يېرىم كېچە":i<900?"سەھەر":i<1130?"چۈشتىن بۇرۇن":i<1230?"چۈش":i<1800?"چۈشتىن كېيىن":"كەچ"},calendar:{sameDay:"[بۈگۈن سائەت] LT",nextDay:"[ئەتە سائەت] LT",nextWeek:"[كېلەركى] dddd [سائەت] LT",lastDay:"[تۆنۈگۈن] LT",lastWeek:"[ئالدىنقى] dddd [سائەت] LT",sameElse:"L"},relativeTime:{future:"%s كېيىن",past:"%s بۇرۇن",s:"نەچچە سېكونت",ss:"%d سېكونت",m:"بىر مىنۇت",mm:"%d مىنۇت",h:"بىر سائەت",hh:"%d سائەت",d:"بىر كۈن",dd:"%d كۈن",M:"بىر ئاي",MM:"%d ئاي",y:"بىر يىل",yy:"%d يىل"},dayOfMonthOrdinalParse:/\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"-كۈنى";case"w":case"W":return t+"-ھەپتە";default:return t}},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
function e(t,e,n){var i,a;return"m"===n?e?"хвилина":"хвилину":"h"===n?e?"година":"годину":t+" "+(i=+t,a={ss:e?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:e?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:e?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[n].split("_"),i%10==1&&i%100!=11?a[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?a[1]:a[2])}function n(t){return function(){return t+"о"+(11===this.hours()?"б":"")+"] LT"}}t.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:function(t,e){var n={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return!0===t?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):t?n[/(\[[ВвУу]\]) ?dddd/.test(e)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(e)?"genitive":"nominative"][t.day()]:n.nominative},weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:n("[Сьогодні "),nextDay:n("[Завтра "),lastDay:n("[Вчора "),nextWeek:n("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[Минулої] dddd [").call(this);case 1:case 2:case 4:return n("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:e,m:e,mm:e,h:"годину",hh:e,d:"день",dd:e,M:"місяць",MM:e,y:"рік",yy:e},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(t){return/^(дня|вечора)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночі":t<12?"ранку":t<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-й";case"D":return t+"-го";default:return t}},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
var e=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],n=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];t.defineLocale("ur",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(t){return"شام"===t},meridiem:function(t,e,n){return t<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(t){return/^ch$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần trước lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/ọjọ́\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(t){return t.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(t){return this.week()!==t.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1200?"上午":1200===i?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("zh-mo",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"D/M/YYYY",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(9))},function(t,e,n){!function(t){"use strict";
//! moment.js locale configuration
t.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(9))},function(t,e,n){(function(t){var e;(e=t).fn.farbtastic=function(t){return e.farbtastic(this,t),this},e.farbtastic=function(t,n){return(t=e(t)[0]).farbtastic||(t.farbtastic=new e._farbtastic(t,n))},e._farbtastic=function(t,n){var i=this;i.linkTo=function(t){return"object"==typeof i.callback&&e(i.callback).unbind("keyup",i.updateValue),i.color=null,"function"==typeof t?i.callback=t:"object"!=typeof t&&"string"!=typeof t||(i.callback=e(t),i.callback.bind("keyup",i.updateValue),i.callback[0].value&&i.setColor(i.callback[0].value)),this},i.updateValue=function(t){this.value&&this.value!=i.color&&i.setColor(this.value)},i.setColor=function(t){var e=i.unpack(t);return i.color!=t&&e&&(i.color=t,i.rgb=e,i.hsl=i.RGBToHSL(i.rgb),i.updateDisplay()),this},i.setHSL=function(t){return i.hsl=t,i.rgb=i.HSLToRGB(t),i.color=i.pack(i.rgb),i.updateDisplay(),this},i.initWidget=function(){var a={width:n.width,height:n.width};e(t).html('<div class="farbtastic" style="position: relative"><div class="farbtastic-solid"></div><canvas class="farbtastic-mask"></canvas><canvas class="farbtastic-overlay"></canvas></div>').find("*").attr(a).css(a).end().find("div>*").css("position","absolute"),e.browser.msie,i.radius=(n.width-n.wheelWidth)/2-1,i.square=Math.floor(.7*(i.radius-n.wheelWidth/2))-1,i.mid=Math.floor(n.width/2),i.markerSize=.3*n.wheelWidth,i.solidFill=e(".farbtastic-solid",t).css({width:2*i.square-1,height:2*i.square-1,left:i.mid-i.square,top:i.mid-i.square}),i.cnvMask=e(".farbtastic-mask",t),i.ctxMask=i.cnvMask[0].getContext("2d"),i.cnvOverlay=e(".farbtastic-overlay",t),i.ctxOverlay=i.cnvOverlay[0].getContext("2d"),i.ctxMask.translate(i.mid,i.mid),i.ctxOverlay.translate(i.mid,i.mid),i.drawCircle(),i.drawMask()},i.drawCircle=function(){new Date;var t,a,r=i.radius,o=n.wheelWidth,s=8/r/24*Math.PI,l=i.ctxMask,c=0;l.save(),l.lineWidth=o/r,l.scale(r,r);for(var d=0;d<=24;++d){var u=d/24,h=u*Math.PI*2,f=Math.sin(c),p=-Math.cos(c);if(x2=Math.sin(h),y2=-Math.cos(h),am=(c+h)/2,tan=1/Math.cos((h-c)/2),xm=Math.sin(am)*tan,ym=-Math.cos(am)*tan,color2=i.pack(i.HSLToRGB([u,1,.5])),d>0)if(e.browser.msie){var m=(1+Math.min(Math.abs(Math.tan(c)),Math.abs(Math.tan(Math.PI/2-c))))/24;t=i.pack(i.HSLToRGB([a-.15*m,1,.5])),color2=i.pack(i.HSLToRGB([u+.15*m,1,.5])),(v=l.createLinearGradient(f,p,x2,y2)).addColorStop(0,t),v.addColorStop(1,color2),l.fillStyle=v;var _=(r+o/2)/r,g=(r-o/2)/r;l.beginPath(),l.moveTo(f*_,p*_),l.quadraticCurveTo(xm*_,ym*_,x2*_,y2*_),l.lineTo(x2*g,y2*g),l.quadraticCurveTo(xm*g,ym*g,f*g,p*g),l.fill()}else{var v;(v=l.createLinearGradient(f,p,x2,y2)).addColorStop(0,t),v.addColorStop(1,color2),l.strokeStyle=v,l.beginPath(),l.moveTo(f,p),l.quadraticCurveTo(xm,ym,x2,y2),l.stroke()}c=h-s,t=color2,a=u}l.restore()},i.drawMask=function(){new Date;var t=2*i.square,n=i.square;function a(t,e,n){for(var i=1/t,a=1/e,r=0;r<=e;++r)for(var o=1-r*a,s=0;s<=t;++s){var l=1-s*i,c=1-2*Math.min(o*l,(1-o)*l);n(s,r,c>0?.5*(2*o-1+c)/c:0,c)}}if(i.ctxMask.getImageData){var r=Math.floor(t/2),o=document.createElement("canvas");o.width=o.height=r+1;var s=o.getContext("2d"),l=s.getImageData(0,0,r+1,r+1),c=0;a(r,r,(function(t,e,n,i){l.data[c++]=l.data[c++]=l.data[c++]=255*n,l.data[c++]=255*i})),s.putImageData(l,0,0),i.ctxMask.drawImage(o,0,0,r+1,r+1,-n,-n,2*n,2*n)}else if(e.browser.msie){var d,u,h=Math.floor(t/6);a(h,6,(function(t,a,r,o){if(0==t&&(d=u,u=[]),r=Math.round(255*r),o=Math.round(255*o),a>0){var s=d[t][0],l=d[t][1],c=i.packDX(s,l),f=i.packDX(r,o),p=Math.round(i.mid+(.333*(a-1)-1)*n),m=Math.round(i.mid+(.333*a-1)*n);e("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(StartColorStr="+c+", EndColorStr="+f+", GradientType=0)",top:p,height:m-p,left:i.mid+(6*t-n-1),width:6-(t==h?Math.round(3):0)}).appendTo(i.cnvMask)}u.push([r,o])}))}else a(r=Math.floor(t/2),r,(function(t,e,a,r){a=Math.round(255*a),i.ctxMask.fillStyle="rgba("+a+", "+a+", "+a+", "+r+")",i.ctxMask.fillRect(2*t-n-1,2*e-n-1,2,2)}))},i.drawMarkers=function(){var t=n.width,e=Math.ceil(i.markerSize/4),a=i.markerSize-e+1,r=6.28*i.hsl[0],o=Math.sin(r)*i.radius,s=-Math.cos(r)*i.radius,l=2*i.square*(.5-i.hsl[1]),c=2*i.square*(.5-i.hsl[2]),d=i.invert?"#fff":"#000",u=i.invert?"#000":"#fff",h=[{x:o,y:s,r:a,c:"#000",lw:e+1},{x:o,y:s,r:i.markerSize,c:"#fff",lw:e},{x:l,y:c,r:a,c:u,lw:e+1},{x:l,y:c,r:i.markerSize,c:d,lw:e}];i.ctxOverlay.clearRect(-i.mid,-i.mid,t,t);for(var f=0;f<h.length;f++){var p=h[f];i.ctxOverlay.lineWidth=p.lw,i.ctxOverlay.strokeStyle=p.c,i.ctxOverlay.beginPath(),i.ctxOverlay.arc(p.x,p.y,p.r,0,2*Math.PI,!0),i.ctxOverlay.stroke()}},i.updateDisplay=function(){i.invert=.3*i.rgb[0]+.59*i.rgb[1]+.11*i.rgb[2]<=.6,i.solidFill.css("backgroundColor",i.pack(i.HSLToRGB([i.hsl[0],1,.5]))),i.drawMarkers(),"object"==typeof i.callback?(e(i.callback).css({backgroundColor:i.color,color:i.invert?"#fff":"#000"}),e(i.callback).each((function(){"string"==typeof this.value&&this.value!=i.color&&(this.value=i.color)})).change()):"function"==typeof i.callback&&i.callback.call(i,i.color)},i.widgetCoords=function(t){return{x:t.pageX-i.offset.left-i.mid,y:t.pageY-i.offset.top-i.mid}},i.mousedown=function(n){e._farbtastic.dragging||(e(document).bind("mousemove",i.mousemove).bind("mouseup",i.mouseup),e._farbtastic.dragging=!0),i.offset=e(t).offset();var a=i.widgetCoords(n);return i.circleDrag=Math.max(Math.abs(a.x),Math.abs(a.y))>i.square+2,i.mousemove(n),!1},i.mousemove=function(t){var e=i.widgetCoords(t);if(i.circleDrag){var n=Math.atan2(e.x,-e.y)/6.28;i.setHSL([(n+1)%1,i.hsl[1],i.hsl[2]])}else{var a=Math.max(0,Math.min(1,-e.x/i.square/2+.5)),r=Math.max(0,Math.min(1,-e.y/i.square/2+.5));i.setHSL([i.hsl[0],a,r])}return!1},i.mouseup=function(){e(document).unbind("mousemove",i.mousemove),e(document).unbind("mouseup",i.mouseup),e._farbtastic.dragging=!1},i.dec2hex=function(t){return(t<16?"0":"")+t.toString(16)},i.packDX=function(t,e){return"#"+i.dec2hex(e)+i.dec2hex(t)+i.dec2hex(t)+i.dec2hex(t)},i.pack=function(t){var e=Math.round(255*t[0]),n=Math.round(255*t[1]),a=Math.round(255*t[2]);return"#"+i.dec2hex(e)+i.dec2hex(n)+i.dec2hex(a)},i.unpack=function(t){if(7==t.length){function e(e){return parseInt(t.substring(e,e+2),16)/255}return[e(1),e(3),e(5)]}if(4==t.length){function e(e){return parseInt(t.substring(e,e+1),16)/15}return[e(1),e(2),e(3)]}},i.HSLToRGB=function(t){var e,n,i=t[0],a=t[1],r=t[2];return e=2*r-(n=r<=.5?r*(a+1):r+a-r*a),[this.hueToRGB(e,n,i+.33333),this.hueToRGB(e,n,i),this.hueToRGB(e,n,i-.33333)]},i.hueToRGB=function(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(.66666-n)*6:t},i.RGBToHSL=function(t){var e=t[0],n=t[1],i=t[2],a=Math.min(e,n,i),r=Math.max(e,n,i),o=r-a,s=0,l=0,c=(a+r)/2;return c>0&&c<1&&(l=o/(c<.5?2*c:2-2*c)),o>0&&(r==e&&r!=n&&(s+=(n-i)/o),r==n&&r!=i&&(s+=2+(i-e)/o),r==i&&r!=e&&(s+=4+(e-n)/o),s/=6),[s,l,c]},n.callback||(n={callback:n}),n=e.extend({width:300,wheelWidth:(n.width||300)/10,callback:null},n),i.initWidget(),e("canvas.farbtastic-overlay",t).mousedown(i.mousedown),n.callback&&i.linkTo(n.callback),i.color||i.setColor("#808080")}}).call(this,n(0))},,,,function(t,e,n){"use strict";var i=n(0),a=n.n(i);e.a={props:["options","value","placeholder","containerClass","enabled"],render:function(){var t=this.$createElement;return(this._self._c||t)("select",[this._t("default")],2)},staticRenderFns:[],mounted:function(){var t=this,e=this.enabled;void 0===e&&(e=!0);var n={data:this.options,placeholder:this.placeholder,allowClear:!!this.placeholder,enable:e,dropdownAutoWidth:!0};this.containerClass&&(n.containerCssClass=this.containerClass),a()(this.$el).select2(n).val(this.value).trigger("change").on("change",(function(e){t.$emit("input",e.val)}))},watch:{value:function(t){a()(this.$el).val(t)},options:function(t){a()(this.$el).empty().select2({data:t})},enabled:function(t){a()(this.$el).select2("enable",t)}},destroyed:function(){a()(this.$el).off().select2("destroy")}}},function(t,e,n){(function(i){var a,r;a=[n(528),n(529),n(530)],void 0===(r=function(t,e){"use strict";function n(){}function a(t){t&&(this.id=t)}function r(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}var o=t.Range,s=t.union,l=t.intersection,c=e.inflateBuffer,d=e.arrayCopy,u=2291137574,h=654086024,f=2273964779,p=3958540679,m=256,_=65536,g=16777216,v=4294967296,y=new RegExp("^[0-9]+,[0-9]+,[0-9]+");function b(t,e,n){Math.pow(10,6);return i.ajax({type:"GET",dataType:"native",url:t,timeout:5e3,beforeSend:function(t){t.setRequestHeader("Range","bytes="+e+"-"+(e+(n-1)))},xhrFields:{responseType:"arraybuffer"}})}function w(t,e){return t[e]+t[e+1]*m+t[e+2]*_+t[e+3]*g+t[e+4]*v}function k(){}function x(t,e,n,i){this.bwg=t,this.cirTreeOffset=e,this.cirTreeLength=n,this.isSummary=i}function S(t,e,n,i,a){this.bbi=t,this.type=e,this.fieldCount=n,this.offset=i,this.field=a}return k.prototype.readChromTree=function(){var t=this;this.chromsToIDs={},this.idsToChroms={},this.maxID=0;var e=this.unzoomedDataOffset;return e=e+4-(e-this.chromTreeOffset&3),i.when(b(this.url,this.chromTreeOffset,e-this.chromTreeOffset)).then((function(e){var n=new Uint8Array(e),i=new Int16Array(e),a=new Int32Array(e),r=(a[0],a[1],a[2]),o=(a[3],w(n,16),function(e){var a=n[e],s=i[e/2+1];e+=4;for(var l=0;l<s;++l)if(0===a){var c=w(n,e+=r);e+=8,c-=t.chromTreeOffset,o(c)}else{for(var d="",u=0;u<r;++u){var h=n[e++];0!==h&&(d+=String.fromCharCode(h))}var f=n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e+0];n[e+7],n[e+6],n[e+5],n[e+4];e+=8,t.chromsToIDs[d]=f,0===d.indexOf("chr")&&(t.chromsToIDs[d.substr(3)]=f),t.idsToChroms[f]=d,t.maxID=Math.max(t.maxID,f)}});o(32)}))},x.prototype.readWigData=function(t,e,n){var i=this.bwg.chromsToIDs[t];return void 0===i?[]:this.readWigDataById(i,e,n)},x.prototype.readWigDataById=function(t,e,n){var a=this,r=i.Deferred();if(!this.cirHeader)return i.when(b(a.bwg.url,this.cirTreeOffset,48)).then((function(o){a.cirHeader=o;var s=new Int32Array(a.cirHeader);a.cirBlockSize=s[1],i.when(a.readWigDataById(t,e,n)).then((function(t){r.resolve(t)}))})),r;var l=[],c=0,d=(Date.now(),function(i,a,r,o){return(t<0||i==t)&&a<=n&&r>=e}),u=function(t,e){if(a.bwg.instrument&&console.log("level="+e+"; offset="+t+"; time="+(0|Date.now())),c+=t.length,1==t.length&&t[0]-a.cirTreeOffset==48&&a.cachedCirRoot)return f(a.cachedCirRoot,0,e),void(0===--c&&i.when(a.fetchFeatures(d,l)).then((function(t){r.resolve(t)})));for(var n,u=4+32*a.cirBlockSize,p=0;p<t.length;++p){var m=new o(t[p],t[p]+u);n=n?s(n,m):m}for(var _=n.ranges(),g=0;g<_.length;++g){var v=_[g];h(t,v,e)}},h=function(t,e,n,o){e.max(),e.min();i.when(b(a.bwg.url,e.min(),e.max()-e.min())).then((function(o){for(var s=0;s<t.length;++s)e.contains(t[s])&&(f(o,t[s]-e.min(),n),t[s]-a.cirTreeOffset==48&&t[s]-e.min()==0&&(a.cachedCirRoot=o),0===--c&&i.when(a.fetchFeatures(d,l)).then((function(t){r.resolve(t)})))}))},f=function(i,a,r){var o=new Uint8Array(i),s=new Int16Array(i),c=new Int32Array(i),d=o[a],h=s[a/2+1];if(a+=4,0!==d)for(var f=0;f<h;++f){var p=c[k=a/4],m=c[k+1],_=c[k+2],g=c[k+3],v=w(o,a+16),y=w(o,a+24);(t<0||p<t||p==t&&m<=n)&&(t<0||_>t||_==t&&g>=e)&&l.push({offset:v,size:y}),a+=32}else{var b=[];for(f=0;f<h;++f){var k;p=c[k=a/4],m=c[k+1],_=c[k+2],g=c[k+3],v=w(o,a+16);(t<0||p<t||p==t&&m<=n)&&(t<0||_>t||_==t&&g>=e)&&b.push(v),a+=24}b.length>0&&u(b,r+1)}};return u([a.cirTreeOffset+48],1),r},x.prototype.fetchFeatures=function(t,e){var a=this,r=i.Deferred();if(e.sort((function(t,e){return(0|t.offset)-(0|e.offset)})),0===e.length)return[];var o=[],s=function(t,e,i,r){r||(r={});var s=new n;for(var l in s._chromId=t,s.segment=a.bwg.idsToChroms[t],s.min=e,s.max=i,s.type=a.bwg.type,r)s[l]=r[l];o.push(s)},l=function(){if(0===e.length){Date.now();return r.resolve(o)}var n=e[0];if(n.data)a.parseFeatures(n.data,s,t),e.splice(0,1),l();else{for(var u=n.offset,h=n.size,f=1;f<e.length&&e[f].offset==u+h;)h+=e[f].size,++f;i.when(b(a.bwg.url,u,h)).then((function(t){for(var n=0,i=0;n<h;){var r,o=e[i];if(a.bwg.uncompressBufSize>0)r=c(t,n+2,o.size-2);else{var s=new Uint8Array(o.size);d(new Uint8Array(t,n,o.size),0,s,0,o.size),r=s.buffer}o.data=r,n+=o.size,++i}l()}))}};return l(),r},x.prototype.parseFeatures=function(t,e,n){var r=new Uint8Array(t);if(this.isSummary)for(var c=new Int16Array(t),d=new Int32Array(t),u=new Float32Array(t),h=t.byteLength/32,f=0;f<h;++f){var p=d[8*f],m=d[8*f+1],_=d[8*f+2],g=d[8*f+3],v=(u[8*f+4],u[8*f+5]),b=u[8*f+6];u[8*f+7];if(n(p,m+1,_)){var w={type:"bigwig",score:b/g,maxScore:v};"bigbed"==this.bwg.type&&(w.type="density"),e(p,m+1,_,w)}}else if("bigwig"==this.bwg.type){c=new Int16Array(t),d=new Int32Array(t),u=new Float32Array(t),p=d[0];var k=d[1],x=(d[2],d[3]),S=d[4],M=r[20];h=c[11];if(3==M)for(f=0;f<h;++f){var C=u[f+6],T=k+f*x+1,j=k+f*x+S;n(p,T,j)&&e(p,T,j,{score:C})}else if(2==M)for(f=0;f<h;++f){_=(m=d[2*f+6]+1)+S-1,C=u[2*f+7];n(p,m,_)&&e(p,m,_,{score:C})}else if(1==M)for(f=0;f<h;++f){m=d[3*f+6]+1,_=d[3*f+7],C=u[3*f+8];m>_&&(m=_),n(p,m,_)&&e(p,m,_,{score:C})}else console.log("Currently not handling bwgType="+M)}else{if("bigbed"!=this.bwg.type)throw Error("Don't know what to do with "+this.bwg.type);for(var O=0,L=this.bwg.definedFieldCount,D=this.bwg.schema;O<r.length;){p=r[O+3]<<24|r[O+2]<<16|r[O+1]<<8|r[O+0],m=r[O+7]<<24|r[O+6]<<16|r[O+5]<<8|r[O+4],_=r[O+11]<<24|r[O+10]<<16|r[O+9]<<8|r[O+8];O+=12;for(var A="";;){var E=r[O++];if(0==E)break;A+=String.fromCharCode(E)}var I,P={};if((I=A.length>0?A.split("\t"):[]).length>0&&L>3&&(P.label=I[0]),I.length>1&&L>4){C=parseInt(I[1]);isNaN(C)||(P.score=C)}if(I.length>2&&L>5&&(P.orientation=I[2]),I.length>5&&L>8){var Y=I[5];y.test(Y)&&(P.itemRgb="rgb("+Y+")")}if(I.length>L-3&&D)for(var R=L-3;R<I.length;++R)P[D.fields[R+3].name]=I[R];if(n(p,m+1,_,I))if(L<12)e(p,m+1,_,P);else{var H=0|I[3],N=0|I[4],$=0|I[6],F=I[7].split(","),W=I[8].split(",");if(P.exonFrames){var z=P.exonFrames.split(",");P.exonFrames=void 0}P.type="transcript";var U=new a;for(var V in P)U[V]=P[V];if(U.id=I[0],U.segment=this.bwg.idsToChroms[p],U.min=m+1,U.max=_,U.notes=[],P.groups=[U],I.length>9){var B=P.geneName||I[9],q=B;I.length>10&&(q=I[10]),P.geneName2&&(q=P.geneName2);var G=i.extend({},U);G.id=B,G.label=q,G.type="gene",P.groups.push(G)}for(var J=[],K=0;K<$;++K){var X=(0|W[K])+m,Q=X+(0|F[K]),Z=new o(X,Q);J.push(Z)}for(var tt=s(J),et=tt.ranges(),nt=0;nt<et.length;++nt){e(p,(ct=et[nt]).min()+1,ct.max(),P)}if(N>H){var it="+"==P.orientation?new o(H,N+3):new o(H-3,N),at=l(tt,it);if(at){P.type="translation";for(var rt=at.ranges(),ot=0,st=0;rt[0].min()>et[st].max();)st++;for(nt=0;nt<rt.length;++nt){var lt=nt;"-"==P.orientation&&(lt=rt.length-nt-1);var ct=rt[lt];if(P.readframe=ot,z){var dt=parseInt(z[lt+st]);"number"==typeof dt&&dt>=0&&dt<=2&&(P.readframe=dt,P.readframeExplicit=!0)}ot=(ot+(ct.max()-ct.min()))%3,e(p,ct.min()+1,ct.max(),P)}}}}}}},x.prototype.getFirstAdjacent=function(t,e,n,i){var a=this.bwg.chromsToIDs[t];if(void 0===a)return i([]);this.getFirstAdjacentById(a,e,n,i)},x.prototype.getFirstAdjacentById=function(t,e,n,i){var a=this;if(this.cirHeader){var r=null,l=-1,c=-1,d=0,u=(Date.now(),function(t,e){d+=t.length;for(var n,i=4+32*a.cirBlockSize,r=0;r<t.length;++r){var l=new o(t[r],t[r]+i);n=n?s(n,l):l}for(var c=n.ranges(),u=0;u<c.length;++u){var f=c[u];h(t,f,e)}}),h=function(o,s,l,c){s.max(),s.min();a.bwg.data.slice(s.min(),s.max()-s.min()).fetch((function(c){for(var u=0;u<o.length;++u)if(s.contains(o[u])&&(f(c,o[u]-s.min(),l),0==--d)){if(!r)return n>0&&(0!=t||e>0)?a.getFirstAdjacentById(0,0,n,i):n<0&&(t!=a.bwg.maxID||e<1e9)?a.getFirstAdjacentById(a.bwg.maxID,1e9,n,i):i([]);a.fetchFeatures((function(i,a,r,o){return n<0&&(i<t||r<e)||n>0&&(i>t||a>e)}),[r],(function(t){for(var e=null,a=-1,r=-1,o=0;o<t.length;++o){var s=t[o],l=s._chromId,c=s.min,d=s.max;(null==e||n<0&&(l>a||d>r)||n>0&&(l<a||c<r))&&(e=s,r=n<0?d:c,a=l)}return i(null!=e?[e]:[])}))}}))},f=function(i,o,s){var d=new Uint8Array(i),h=new Int16Array(i),f=new Int32Array(i),p=d[o],m=h[o/2+1];if(o+=4,0!=p)for(var _=0;_<m;++_){var g=f[C=o/4],v=f[C+1],y=f[C+2],b=f[C+3],k=w(d,o+16),x=w(d,o+24);(n<0&&(g<t||g==t&&v<=e)||n>0&&(y>t||y==t&&b>=e))&&(/_random/.exec(a.bwg.idsToChroms[g])||(null==r||n<0&&(y>l||y==l&&b>c)||n>0&&(g<l||g==l&&v<c))&&(r={offset:k,size:x},c=n<0?b:v,l=n<0?y:g)),o+=32}else{var S=-1,M=-1;for(_=0;_<m;++_){var C;g=f[C=o/4],v=f[C+1],y=f[C+2],b=f[C+3],k=f[C+4]<<32|f[C+5];(n<0&&(g<t||g==t&&v<=e)&&y>=t||n>0&&(y>t||y==t&&b>=e)&&g<=t)&&(S<0||b>M)&&(S=k,M=n<0?b:v,n<0?y:g),o+=24}S>=0&&u([S],s+1)}};u([a.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch((function(r){a.cirHeader=r;var o=new Int32Array(a.cirHeader);a.cirBlockSize=o[1],a.getFirstAdjacentById(t,e,n,i)}))},k.prototype.readWigData=function(t,e,n){var i,a=n-e;if(a<=25e3||0===this.zoomLevels.length)i=this.getUnzoomedView();else for(var r=0;r<this.zoomLevels.length;r++)if(a/this.zoomLevels[r].reduction<25e3){i=this.getZoomedView(r);break}return i.readWigData(t,e,n)},k.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var t=4e3;this.zoomLevels[0]&&(t=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset),this.unzoomedView=new x(this,this.unzoomedIndexOffset,t,!1)}return this.unzoomedView},k.prototype.getZoomedView=function(t){var e=this.zoomLevels[t];return e.view||(e.view=new x(this,e.indexOffset,4e3,!0)),e.view},k.prototype._tsFetch=function(t,e,n,i,a){var r=this;if(!(t>=this.zoomLevels.length-1))return(t<0?this.getUnzoomedView():this.getZoomedView(t)).readWigDataById(e,n,i,a);if(this.topLevelReductionCache){for(var o=[],s=this.topLevelReductionCache,l=0;l<s.length;++l)s[l]._chromId==e&&o.push(s[l]);return a(o)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3e8,(function(o){return r.topLevelReductionCache=o,r._tsFetch(t,e,n,i,a)}))},k.prototype.thresholdSearch=function(t,e,n,i,a){n=n<0?-1:1;for(var r=this,o=this.chromsToIDs[t],s=[{chrOrd:0,chr:o,zoom:r.zoomLevels.length-4,min:0,max:3e8,fromRef:!0}],l=1;l<=this.maxID+1;++l){var c=(o+n*l)%(this.maxID+1);c<0&&(c+=this.maxID+1),s.push({chrOrd:l,chr:c,zoom:r.zoomLevels.length-1,min:0,max:3e8})}!function t(){if(0==s.length)return a(null);s.sort((function(t,e){var i=t.zoom-e.zoom;return 0!=i?i:0!=(i=t.chrOrd-e.chrOrd)?i:t.min-e.min*n}));var o=s.splice(0,1)[0];r._tsFetch(o.zoom,o.chr,o.min,o.max,(function(r){var l=n>0?0:3e8;o.fromRef&&(l=e);for(var c=0;c<r.length;++c){var d,u=r[c];if(d=null!=u.maxScore?u.maxScore:u.score,n>0){if(d>i)if(o.zoom<0){if(u.min>l)return a(u)}else u.max>l&&s.push({chr:o.chr,chrOrd:o.chrOrd,zoom:o.zoom-2,min:u.min,max:u.max,fromRef:o.fromRef})}else if(d>i)if(o.zoom<0){if(u.max<l)return a(u)}else u.min<l&&s.push({chr:o.chr,chrOrd:o.chrOrd,zoom:o.zoom-2,min:u.min,max:u.max,fromRef:o.fromRef})}t()}))}()},k.prototype.getAutoSQL=function(t){if(!this.asOffset)return t(null);i.when(b(this.url,this.asOffset,2048)).then((function(e){for(var n=new Uint8Array(e),i="",a=0;a<n.length&&0!=n[a];++a)i+=String.fromCharCode(n[a]);var r=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,o=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/.exec(i);if(o){var s={declType:o[1],name:o[2],comment:o[4],fields:[]};i=i.substring(o[0]);for(var l=r.exec(i);null!=l;l=r.exec(i))s.fields.push({type:l[1],name:l[2],comment:l[4]});return t(s)}}))},k.prototype.getExtraIndices=function(t){var e=this;if(this.version<4||0==this.extHeaderOffset||"bigbed"!=this.type)return t(null);this.data.slice(this.extHeaderOffset,64).fetch((function(n){if(!n)return t(null,"Couldn't fetch extension header");var i=new Uint8Array(n),a=new Int16Array(n),r=(new Int32Array(n),a[0],a[1]),o=w(i,4);if(0==r)return t(null);e.data.slice(o,20*r).fetch((function(n){if(!n)return t(null,"Couldn't fetch index info");for(var i=new Uint8Array(n),a=new Int16Array(n),o=(new Int32Array(n),[]),s=0;s<r;++s){var l=a[10*s],c=a[10*s+1],d=w(i,20*s+4),u=a[10*s+8],h=new S(e,l,c,d,u);o.push(h)}t(o)}))}))},S.prototype.lookup=function(t,e){var n=this;this.bbi.data.slice(this.offset,32).fetch((function(i){var a=new Uint8Array(i),o=(new Int16Array(i),new Int32Array(i)),s=(o[0],o[1]),l=o[2],c=o[3];w(a,16);!function i(a){n.bbi.data.slice(a,4+s*(l+c)).fetch((function(a){var o=new Uint8Array(a),s=new Uint16Array(a),d=(new Uint32Array(a),o[0]),u=s[1],h=4;if(0!=d){for(_=0;_<u;++_){for(g="",v=0;v<l;++v){0!=(y=o[h++])&&(g+=String.fromCharCode(y))}if(g==t){var f=w(o,h),p=r(o,h+8);return n.bbi.getUnzoomedView().fetchFeatures((function(e,i,a,r){if(r&&r.length>n.field-3)return r[n.field-3]==t}),[{offset:f,size:p}],e)}h+=c}return e([])}for(var m=null,_=0;_<u;++_){for(var g="",v=0;v<l;++v){var y;0!=(y=o[h++])&&(g+=String.fromCharCode(y))}var b=w(o,h);if(h+=8,t.localeCompare(g)<0&&m)return void i(m);m=b}i(m)}))}(n.offset+32)}))},{makeBwg:function(t){var e=i.Deferred(),n=new k;return n.url=t,i.when(b(n.url,0,512)).then((function(t){if(!t)return e.resolve(null,"Couldn't fetch file");var a=t,r=new Uint8Array(a),o=new Int16Array(a),s=new Int32Array(a),l=r[0]+m*r[1]+_*r[2]+g*r[3];if(l==u)n.type="bigwig";else{if(l!=f)return l==h||l==p?e.resolve(null,"Currently don't support big-endian BBI files"):e.resolve(null,"Not a supported format, magic=0x"+l.toString(16));n.type="bigbed"}n.version=o[2],n.numZoomLevels=o[3],n.chromTreeOffset=w(r,8),n.unzoomedDataOffset=w(r,16),n.unzoomedIndexOffset=w(r,24),n.fieldCount=o[16],n.definedFieldCount=o[17],n.asOffset=w(r,36),n.totalSummaryOffset=w(r,44),n.uncompressBufSize=s[13],n.extHeaderOffset=w(r,56),n.zoomLevels=[];for(var c=0;c<n.numZoomLevels;++c){var d=s[6*c+16],v=w(r,24*c+72),y=w(r,24*c+80);n.zoomLevels.push({reduction:d,dataOffset:v,indexOffset:y})}i.when(n.readChromTree()).then((function(){n.getAutoSQL((function(t){return n.schema=t,e.resolve(n)}))}))})),e}}}.apply(e,a))||(t.exports=r)}).call(this,n(0))},function(t,e,n){"use strict";(function(t,n,i){e.a=t.Model.extend({defaults:{url_base:"",async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},can_async_op:function(t){return-1!==n.indexOf(this.attributes.async_ops,t)},add_filter:function(t,e,n){if(n){var i,a=this.attributes.filters[t];if(null==a)i=e;else if("string"==typeof a)if("All"==a||a==e)i=e;else{var r=[];r[0]=a,r[1]=e,i=r}else-1===(i=a).indexOf(e)&&i.push(e);this.attributes.filters[t]=i}else this.attributes.filters[t]=e},remove_filter:function(t,e){var i=this.attributes.filters[t];if(null==i)return!1;if("string"==typeof i)this.attributes.filters[t]="";else{var a=n.indexOf(i,e);-1!==a&&(i[a]="")}},get_url_data:function(){var t={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(t.operation=this.attributes.operation),this.attributes.item_ids&&(t.id=this.attributes.item_ids);return n.each(n.pairs(this.attributes.filters),(function(e){t["f-".concat(e[0])]=e[1]})),t},get_url:function(t){return"".concat(this.get("url_base"),"?").concat(i.param(this.get_url_data()),"&").concat(i.param(t))}})}).call(this,n(4),n(1),n(0))},function(t){t.exports=JSON.parse('[{"name":"t2.nano","mem":0.5,"price":0.0067,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.nano","mem":0.5,"price":0.006,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.micro","mem":1,"price":0.0134,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.micro","mem":1,"price":0.012,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.small","mem":2,"price":0.0268,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.small","mem":2,"price":0.024,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m3.medium","mem":3.75,"price":0.079,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"t2.medium","mem":4,"price":0.0536,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Family"},{"name":"t3.medium","mem":4,"price":0.048,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m3.large","mem":7.5,"price":0.158,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"t2.large","mem":8,"price":0.1072,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Family"},{"name":"t3.large","mem":8,"price":0.096,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m5.large","mem":8,"price":0.115,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5d.large","mem":8,"price":0.136,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.large","mem":8,"price":0.12,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m3.xlarge","mem":15,"price":0.315,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"m5.xlarge","mem":16,"price":0.23,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.xlarge","mem":16,"price":0.24,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"t3.xlarge","mem":16,"price":0.192,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.xlarge","mem":16,"price":0.2144,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Family"},{"name":"m5d.xlarge","mem":16,"price":0.272,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Platinum 8175"},{"name":"m3.2xlarge","mem":30,"price":0.632,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"m5d.2xlarge","mem":32,"price":0.544,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.2xlarge","mem":32,"price":0.46,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.2xlarge","mem":32,"price":0.48,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"t3.2xlarge","mem":32,"price":0.384,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.2xlarge","mem":32,"price":0.4288,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Family"},{"name":"m5d.4xlarge","mem":64,"price":1.088,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.4xlarge","mem":64,"price":0.96,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m5.4xlarge","mem":64,"price":0.92,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.10xlarge","mem":160,"price":2.4,"priceunit":"Hrs","vcpus":40,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m5d.12xlarge","mem":192,"price":3.264,"priceunit":"Hrs","vcpus":48,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.12xlarge","mem":192,"price":2.76,"priceunit":"Hrs","vcpus":48,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.16xlarge","mem":256,"price":3.84,"priceunit":"Hrs","vcpus":64,"cpu":"Intel Xeon E5-2686 v4 (Broadwell)"},{"name":"m5d.metal","mem":384,"price":6.528,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.metal","mem":384,"price":5.52,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5d.24xlarge","mem":384,"price":6.528,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.24xlarge","mem":384,"price":5.52,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"}]')},function(t,e,n){"use strict";var i=n(616),a=n(617),r=n(275),o=n(1056);e.a={props:{value:{required:!0},delay:{type:Number,required:!1,default:500}},data:function(){return{previousEmit:null,incomingValue:null}},methods:{sendUpdate:function(t){t!==this.previousEmit&&(this.$emit("input",t),this.previousEmit=t)}},beforeMount:function(){var t=this,e=this.watch$("incomingValue").pipe(Object(i.a)(this.delay),Object(a.a)(),Object(r.a)((function(e){return null!==e&&e!==t.value})),Object(o.a)((function(){return t.sendUpdate(t.incomingValue)})));this.$subscribeTo(e,(function(e){return t.sendUpdate(e)}))},render:function(){var t=this;return this.$scopedSlots.default({value:this.value,input:function(e){t.incomingValue=e&&e.target?e.target.value:e}})}}},,,,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(3),l=n(57),c=n(19),d=o.a.View.extend({initialize:function(t){this.model=new o.a.Model(t),this.url=this.model.get("url"),this.redirect=this.model.get("redirect"),t&&t.active_tab&&(this.active_tab=t.active_tab),this.setElement("<div/>"),this.render()},render:function(){var t=this;a.a.ajax({url:Object(s.getAppRoot)()+this.url,type:"GET"}).done((function(e){var n=a.a.extend({},t.model.attributes,e),i=new l.a({title:n.title,title_id:n.title_id,message:n.message,status:n.status||"warning",icon:n.icon,initial_errors:!0,errors:n.errors,inputs:n.inputs,buttons:{cancel:n.cancel_redirect&&new c.a.Button({tooltip:n.cancel_tooltip,title:n.cancel_title||"Cancel",icon:n.cancel_icon||"fa-times",onclick:function(){window.location="".concat(Object(s.getAppRoot)()).concat(n.cancel_redirect)}}),submit:new c.a.Button({tooltip:n.submit_tooltip,title:n.submit_title||"Save",icon:n.submit_icon||"fa-save",cls:"btn btn-primary",onclick:function(){t._submit(i)}})}});t.$el.empty().append(i.$el)})).fail((function(e){t.$el.empty().append(new c.a.Message({message:"Failed to load resource ".concat(t.url,"."),status:"danger",persistent:!0}).$el)}))},_submit:function(t){var e=this;a.a.ajax({url:Object(s.getAppRoot)()+e.url,data:JSON.stringify(t.data.create()),type:"PUT",contentType:"application/json"}).done((function(n){var i={};n.id?i.id=n.id:i={message:n.message,status:"success",persistent:!1},e.redirect?window.location="".concat(Object(s.getAppRoot)()).concat(e.redirect,"?").concat(a.a.param(i)):(t.data.matchModel(n,(function(e,n){t.field_list[n].value(e.value)})),e._showMessage(t,n.message))})).fail((function(n){e._showMessage(t,{message:n.responseJSON.err_msg,status:"danger",persistent:!1})}))},_showMessage:function(t,e){t.$el.parents().filter((function(){return-1!=["auto","scroll"].indexOf(a()(this).css("overflow"))})).first().animate({scrollTop:0},500),t.message.update(e)}});e.a={View:d}},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(105);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return l(t,arguments,u(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d(i,t)})(t)}function l(t,e,n){return(l=c()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&d(a,n.prototype),a}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=[i.a.NEW,i.a.QUEUED,i.a.RUNNING],f=[i.a.ERROR,i.a.DELETED],p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(m,t);var e,n,a,s,l,p=(e=m,n=c(),function(){var t,i=u(e);if(n){var a=u(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return o(this,t)});function m(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m);var n=e.job_state_summary,i=void 0===n?{}:n,a=e.populated_state,r=void 0===a?null:a;return(t=p.call(this,Object.entries(i))).populated_state=r,t}return a=m,(s=[{key:"hasJobs",value:function(t){return!!this.has(t)&&this.get(t)>0}},{key:"anyHasJobs",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.some((function(e){return t.hasJobs(e)}))}},{key:"state",get:function(){return this.jobCount?this.isErrored?i.a.ERROR:this.isNew?i.a.NEW:this.isRunning?i.a.RUNNING:this.isTerminal?i.a.OK:i.a.QUEUED:null}},{key:"isNew",get:function(){return!this.populated_state||this.populated_state==i.a.NEW}},{key:"isErrored",get:function(){return this.anyHasJobs.apply(this,f)}},{key:"isRunning",get:function(){return this.hasJobs(i.a.RUNNING)}},{key:"isTerminal",get:function(){return!this.isNew&&!this.anyHasJobs.apply(this,h)}},{key:"jobCount",get:function(){return this.get("all_jobs")}},{key:"errorCount",get:function(){return this.get(i.a.ERROR)}},{key:"runningCount",get:function(){return this.get(i.a.ERRUNNINGROR)}}])&&r(a.prototype,s),l&&r(a,l),m}(s(Map))},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(62),a=n(7),r=n.n(a),o=function(t){return Object(i.c)()+t};var s=n(8),l=n(15);s.default.use(l.a);var c={props:{parameters:{type:Array,required:!0}}},d=n(5),u=Object(d.a)(c,(function(){var t=this.$createElement;return(this._self._c||t)("b-table",{attrs:{small:"","caption-top":"",fields:["label","parameter_value"],items:this.parameters}})}),[],!1,null,null,null).exports,h=n(111),f=n(43),p=n(53),m=n(216),_=n(462),g=n(461),v=n(45);function y(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){y(r,i,a,o,s,"next",t)}function s(t){y(r,i,a,o,s,"throw",t)}o(void 0)}))}}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S={components:{DatasetUI:g.a},props:{item:{type:Object,required:!0},element_identifier:{type:String,required:!1,default:""}},computed:{dataset:function(){var t=k(k({},this.item),{},{element_identifier:this.element_identifier});return new v.c(t)}},data:function(){return{expanded:!1}},methods:{expand:function(t){this.expanded=!this.expanded},onDelete:function(){var t=arguments,e=this;return b(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},n.next=3,Object(f.e)(e.dataset,i);case 3:return a=n.sent,n.next=6,Object(p.b)(a);case 6:case"end":return n.stop()}}),n)})))()},onUnhide:function(){var t=this;return b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onUpdate({visible:!0});case 2:case"end":return e.stop()}}),e)})))()},onUndelete:function(){var t=this;return b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onUpdate({deleted:!1});case 2:case"end":return e.stop()}}),e)})))()},onUpdate:function(){var t=arguments,e=this;return b(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},n.next=3,Object(f.o)(e.dataset,i);case 3:return a=n.sent,n.next=6,Object(p.b)(a);case 6:case"end":return n.stop()}}),n)})))()}}},M=Object(d.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.dataset?n("DatasetUI",t._g(t._b({attrs:{expanded:t.expanded,dataset:t.dataset,"show-tags":!0},on:{"update:expanded":t.expand,delete:t.onDelete,undelete:t.onUndelete,unhide:t.onUnhide,update:t.onUpdate}},"DatasetUI",t.$attrs,!1),t.$listeners)):t._e()}),[],!1,null,null,null).exports,C=n(29),T={components:{DatasetProvider:h.c,DatasetCollectionUIWrapper:A,DatasetUIWrapper:M,LoadingSpan:C.a},props:{collectionContents:{type:Array,required:!0}}},j=Object(d.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.collectionContents,(function(e){return n("div",{key:e.id,staticStyle:{"margin-left":"2em"},attrs:{index:1}},["hda"===e.element_type?n("DatasetProvider",{attrs:{id:e.object.id},scopedSlots:t._u([{key:"default",fn:function(t){var i=t.item,a=t.loading;return[n("div",[a?n("loading-span",{attrs:{message:"Loading datasets"}}):n("DatasetUIWrapper",{attrs:{item:i,element_identifier:e.element_identifier}})],1)]}}],null,!0)}):t._e(),t._v(" "),"dataset_collection"===e.element_type?n("DatasetCollectionUIWrapper",{attrs:{item:e,element_count:t.collectionContents.length+1}}):t._e()],1)})),0)}),[],!1,null,null,null).exports;function O(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function L(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){O(r,i,a,o,s,"next",t)}function s(t){O(r,i,a,o,s,"throw",t)}o(void 0)}))}}var D={components:{DatasetCollectionContentProvider:h.a,DatasetCollectionContents:j,DscUI:_.a},props:{item:{type:Object,required:!0},element_count:{type:Number,required:!1}},data:function(){return{expand:!1}},computed:{datasetCollection:function(){var t=this.item;return"DatasetCollectionElement"===t.model_class&&((t=this.item.object).name=this.item.element_identifier,t.contents_url=this.item.contents_url||t.contents_url,t.element_count=this.element_count,t.populated_state="ok"),new m.a(t)}},methods:{toggleExpand:function(){this.expand=!this.expand},onDelete:function(t){var e=arguments;return L(regeneratorRuntime.mark((function n(){var i,a,r,o,s,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{},a=i.recursive,r=void 0!==a&&a,o=i.purge,s=void 0!==o&&o,n.next=4,Object(f.f)(t,r,s);case 4:if(!(l=n.sent).deleted){n.next=9;break}return c=Object.assign(t,{isDeleted:l.deleted}),n.next=9,Object(p.b)(c);case 9:case"end":return n.stop()}}),n)})))()},onUndelete:function(t){return L(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.o)(t,{deleted:!1});case 2:if(!1!==(n=e.sent).deleted){e.next=7;break}return i=Object.assign(t,{isDeleted:n.deleted}),e.next=7,Object(p.b)(i);case 7:case"end":return e.stop()}}),e)})))()},onHide:function(t){return L(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.o)(t,{visible:!1});case 2:if(!1!==(n=e.sent).visible){e.next=7;break}return i=Object.assign(t,{isVisible:n.visible}),e.next=7,Object(p.b)(i);case 7:case"end":return e.stop()}}),e)})))()},onUnhide:function(t){return L(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.o)(t,{visible:!0});case 2:if(!(n=e.sent).visible){e.next=7;break}return i=Object.assign(t,{isVisible:n.visible}),e.next=7,Object(p.b)(i);case 7:case"end":return e.stop()}}),e)})))()}}},A=Object(d.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.datasetCollection?n("DscUI",t._g(t._b({attrs:{dsc:t.datasetCollection,"show-tags":!0},on:{"update:expanded":t.toggleExpand,hide:function(e){return t.onHide(t.datasetCollection)},unhide:function(e){return t.onUnhide(t.datasetCollection)},delete:function(e){return t.onDelete(t.datasetCollection,e)},undelete:function(e){return t.onUndelete(t.datasetCollection)}}},"DscUI",t.$attrs,!1),t.$listeners)):t._e(),t._v(" "),t.expand?n("DatasetCollectionContentProvider",{attrs:{id:t.datasetCollection.contents_url},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item;return[e.loading?n("b-spinner",[t._v("Loading Dataset Collection...")]):n("DatasetCollectionContents",{attrs:{collectionContents:i}})]}}],null,!1,279328702)}):t._e()],1)}),[],!1,null,null,null).exports,E={components:{DatasetProvider:h.c,DatasetCollectionProvider:h.b,DatasetUIWrapper:M,DatasetCollectionUIWrapper:A,LoadingSpan:C.a},props:{data_item:{required:!0}},computed:{renderComponent:function(){return{hda:"DatasetUIWrapper",hdca:"DatasetCollectionUIWrapper"}[this.data_item.src]},providerComponent:function(){return{hda:"DatasetProvider",hdca:"DatasetCollectionProvider"}[this.data_item.src]}},provide:{STATES:v.g}},I=Object(d.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.providerComponent,{tag:"component",attrs:{id:t.data_item.id},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item,a=e.loading;return[n("div",[a?n("loading-span",{attrs:{message:"Loading dataset"}}):t._e(),t._v(" "),i?n(t.renderComponent,{tag:"component",attrs:{item:i}}):t._e()],1)]}}])})}),[],!1,null,null,null).exports,P=n(50),Y=n(34),R=n(132),H=n(115),N=n(100);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}s.default.use(l.a);var z={components:{UtcDate:N.a,JobProvider:h.e,JobParameters:H.a,JobInformation:R.a},props:{jobs:{type:Array,required:!0}},methods:{jobsProvider:function(t,e){return this.$watch("jobs",(function(){var t=this,n=this.jobs.map((function(e){return F(F({},e),{},{_showDetails:!!t.toggledItems[e.id]})}));e(n)}),{immediate:!0}),null},toggleDetails:function(t){t._showDetails=!t._showDetails,this.toggledItems[t.id]=t._showDetails}},data:function(){return{fields:[{key:"state",sortable:!0},{key:"update_time",label:"Updated",sortable:!0},{key:"create_time",label:"Created",sortable:!0}],toggledItems:{}}}},U=Object(d.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.jobs?n("b-card",[n("b-table",{attrs:{small:"","caption-top":"",items:t.jobsProvider,fields:t.fields,"primary-key":"id"},on:{"row-clicked":t.toggleDetails},scopedSlots:t._u([{key:"row-details",fn:function(e){return[n("job-provider",{attrs:{id:e.item.id},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item,a=e.loading;return[n("div",a?[n("b-spinner",{attrs:{label:"Loading Job..."}})]:[i?n("job-information",{attrs:{job_id:i.id}}):t._e(),t._v(" "),n("p"),t._v(" "),i?n("job-parameters",{attrs:{jobId:i.id,includeTitle:!1}}):t._e()],1)]}}],null,!0)})]}},{key:"cell(create_time)",fn:function(t){return[n("UtcDate",{attrs:{date:t.value,mode:"elapsed"}})]}},{key:"cell(update_time)",fn:function(t){return[n("UtcDate",{attrs:{date:t.value,mode:"elapsed"}})]}}],null,!1,1324942426)})],1):t._e()}),[],!1,null,null,null).exports;function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var G={components:{LoadingSpan:C.a,JobStep:U,ParameterStep:u,InvocationStepProvider:h.d,WorkflowInvocationDataContents:I,WorkflowInvocationState:function(){return Promise.resolve().then(n.bind(null,460))}},props:{invocation:Object,orderedSteps:Array,workflowStep:Object,workflow:Object},data:function(){return{expanded:!1,polling:null}},created:function(){this.fetchTool(),this.fetchSubworkflow()},computed:B(B({},Object(Y.c)(["getToolForId","getToolNameById","getWorkflowByInstanceId","getInvocationStepById"])),{},{isReady:function(){return this.invocationSteps.length>0},invocationSteps:function(){return this.orderedSteps},invocationStepId:function(){var t;return null===(t=this.step)||void 0===t?void 0:t.id},workflowStepType:function(){return this.workflowStep.type},step:function(){return this.invocationSteps[this.workflowStep.id]},isDataStep:function(){return["data_input","data_collection_input"].includes(this.workflowStepType)},stepIcon:function(){switch(this.workflowStepType){case"data_input":return"fa-file";case"data_collection_input":return"fa-folder-o";case"parameter_input":return"fa-pencil";case"subworkflow":return"fa-tasks";default:return"fa-wrench"}},stepLabel:function(){return this.labelForWorkflowStep(this.workflowStep.id)}}),methods:B(B(B({},Object(P.b)(["fetchToolForId","fetchWorkflowForInstanceId"])),Object(Y.b)(["fetchInvocationStepById"])),{},{fetchTool:function(){this.workflowStep.tool_id&&!this.getToolForId(this.workflowStep.tool_id)&&this.fetchToolForId(this.workflowStep.tool_id)},fetchSubworkflow:function(){this.workflowStep.workflow_id&&this.fetchWorkflowForInstanceId(this.workflowStep.workflow_id)},toggleStep:function(){this.expanded=!this.expanded},labelForWorkflowStep:function(t){var e=this.invocationSteps[t],n=this.workflow.steps[t],i=t+1;if(e&&e.workflow_step_label)return"Step ".concat(i,": ").concat(e.workflow_step_label);var a=n.type;switch(a){case"tool":return"Step ".concat(i,": ").concat(this.getToolNameById(n.tool_id));case"subworkflow":var r=this.getWorkflowByInstanceId(n.workflow_id),o=r?r.name:"Subworkflow";return"Step ".concat(i,": ").concat(o);case"parameter_input":return"Step ".concat(i,": Parameter input");case"data_input":return"Step ".concat(i,": Data input");case"data_collection_input":return"Step ".concat(i,": Data collection input");default:return"Step ".concat(i,": Unknown step type '").concat(a,"'")}}})},J=Object(d.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[n("div",{staticClass:"ui-portlet-section",staticStyle:{width:"100%"}},[n("div",{staticClass:"portlet-header portlet-title portlet-operations",on:{click:t.toggleStep}},[n("i",{class:"portlet-title-icon fa mr-1 "+t.stepIcon}),t._v(" "),n("span",{staticClass:"portlet-title-text"},[n("u",[t._v(t._s(t.stepLabel))])])]),t._v(" "),t.expanded?n("div",{staticClass:"portlet-content"},[t.isReady&&void 0!==t.invocationStepId?n("InvocationStepProvider",{attrs:{id:t.invocationStepId},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item,a=e.loading;return[n("div",{staticStyle:{"min-width":"1"}},[a?n("loading-span",{attrs:{message:"Loading invocation step details"}}):n("div",[Object.values(i.outputs).length>0?n("details",[n("summary",[n("b",[t._v("Output Datasets")])]),t._v(" "),t._l(i.outputs,(function(e,i){return n("div",{key:e.id},[n("b",[t._v(t._s(i))]),t._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:e}})],1)}))],2):t._e(),t._v(" "),Object.values(i.output_collections).length>0?n("details",[n("summary",[n("b",[t._v("Output Dataset Collections")])]),t._v(" "),t._l(i.output_collections,(function(e,i){return n("div",{key:e.id},[n("b",[t._v(t._s(i))]),t._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:e}})],1)}))],2):t._e(),t._v(" "),n("div",{staticClass:"portlet-body",staticStyle:{width:"100%","overflow-x":"auto"}},["tool"==t.workflowStepType?n("details",[n("summary",[n("b",[t._v("Jobs")])]),t._v(" "),n("job-step",{attrs:{jobs:i.jobs}})],1):"parameter_input"==t.workflowStepType?n("parameter-step",{attrs:{parameters:[t.invocation.input_step_parameters[i.workflow_step_label]]}}):t.isDataStep&&t.invocation.inputs[t.workflowStep.id]?n("workflow-invocation-data-contents",{attrs:{data_item:t.invocation.inputs[t.workflowStep.id]}}):"subworkflow"==t.workflowStepType?n("div",[i.subworkflow_invocation_id?n("workflow-invocation-state",{attrs:{invocationId:i.subworkflow_invocation_id}}):n("div",[t._v("\n                                    Workflow invocation for this step is not yet scheduled.\n                                    "),n("p"),t._v("\n                                    This step consumes outputs from these steps:\n                                    "),t.workflowStep?n("ul",t._l(Object.values(t.workflowStep.input_steps),(function(e){return n("li",{key:e.source_step},[t._v("\n                                            "+t._s(t.labelForWorkflowStep(e.source_step))+"\n                                        ")])})),0):t._e()])],1):t._e()],1)])],1)]}}],null,!1,2155155332)}):n("loading-span",{attrs:{message:"This invocation has not been scheduled yet, step information is unavailable"}})],1):t._e()])])}),[],!1,null,null,null).exports,K=n(116);function X(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nt={components:{WorkflowInvocationDataContents:I,WorkflowInvocationStep:J,ParameterStep:u},props:{invocation:{required:!0},invocationAndJobTerminal:{required:!0,type:Boolean}},created:function(){this.fetchWorkflowForInstanceId(this.invocation.workflow_id),this.monitorHistory()},computed:tt(tt({},Object(Y.c)(["getWorkflowByInstanceId"])),{},{orderedSteps:function(){return X(this.invocation.steps).sort((function(t,e){return t.order_index-e.order_index}))},workflow:function(){return this.getWorkflowByInstanceId(this.invocation.workflow_id)}}),methods:tt(tt({},Object(P.b)(["fetchWorkflowForInstanceId"])),{},{dataInputStepLabel:function(t,e){var n=this.orderedSteps[t],i=n&&n.workflow_step_label;return i||("hda"===e.src||"ldda"===e.src?i="Input dataset":"hdca"===e.src&&(i="Input dataset collection")),i},monitorHistory:function(){var t=this;if(!this.invocationAndJobTerminal){var e=Object(K.d)((function(){return 1==t.invocationAndJobTerminal}),this.invocation.history_id);this.listenTo(e,{error:function(t){return console.error("An error occured while monitoring history for datasets",t)},complete:function(){return console.log("Invocation finished, stopping history dataset monitor")}})}}})},it=Object(d.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.invocation?n("div",[Object.keys(t.invocation.input_step_parameters).length?n("div",[n("details",{staticClass:"invocation-parameters-details"},[t._m(0),t._v(" "),n("parameter-step",{attrs:{parameters:Object.values(t.invocation.input_step_parameters)}})],1)]):t._e(),t._v(" "),Object.keys(t.invocation.inputs).length?n("div",[n("details",{staticClass:"invocation-inputs-details"},[t._m(1),t._v(" "),t._l(t.invocation.inputs,(function(e,i){return n("div",{key:e.id,attrs:{"data-label":t.dataInputStepLabel(i,e)}},[n("b",[t._v(t._s(t.dataInputStepLabel(i,e)))]),t._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:e}})],1)}))],2)]):t._e(),t._v(" "),Object.keys(t.invocation.outputs).length?n("div",[n("details",{staticClass:"invocation-outputs-details"},[t._m(2),t._v(" "),t._l(t.invocation.outputs,(function(e,i){return n("div",{key:e.id},[n("b",[t._v(t._s(i)+":")]),t._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:e}})],1)}))],2)]):t._e(),t._v(" "),Object.keys(t.invocation.output_collections).length?n("div",[n("details",{staticClass:"invocation-output-collections-details"},[t._m(3),t._v(" "),t._l(t.invocation.output_collections,(function(e,i){return n("div",{key:e.id},[n("b",[t._v(t._s(i)+":")]),t._v(" "),n("workflow-invocation-data-contents",{attrs:{data_item:e}})],1)}))],2)]):t._e(),t._v(" "),t.workflow?n("div",[t.workflow?n("details",{staticClass:"invocation-steps-details"},[t._m(4),t._v(" "),t._l(Object.values(t.workflow.steps),(function(e){return n("workflow-invocation-step",{key:e.id,attrs:{invocation:t.invocation,orderedSteps:t.orderedSteps,workflow:t.workflow,workflowStep:e}})}))],2):t._e()]):t._e()]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("summary",[e("b",[this._v("Parameters")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("summary",[e("b",[this._v("Inputs")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("summary",[e("b",[this._v("Outputs")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("summary",[e("b",[this._v("Output Collections")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("summary",[e("b",[this._v("Steps")])])}],!1,null,null,null).exports,at=n(142),rt=n(233),ot=n(239);function st(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht=function(t){return Object(i.c)()+t},ft={components:{ProgressBar:ot.a,WorkflowInvocationDetails:it},mixins:[rt.a],props:{invocationId:{type:String,required:!0},index:{type:Number,optional:!0}},data:function(){return{stepStatesInterval:null,jobStatesInterval:null}},created:function(){this.pollStepStatesUntilTerminal(),this.pollJobStatesUntilTerminal()},computed:dt(dt({},Object(Y.c)(["getInvocationById","getInvocationJobsSummaryById"])),{},{indexStr:function(){return null==this.index?"":"".concat(this.index+1)},invocation:function(){return this.getInvocationById(this.invocationId)},invocationState:function(){var t;return(null===(t=this.invocation)||void 0===t?void 0:t.state)||"new"},createdTime:function(){var t;return(null===(t=this.invocation)||void 0===t?void 0:t.create_time)||null},stepCount:function(){var t;return null===(t=this.invocation)||void 0===t?void 0:t.steps.length},stepStates:function(){var t={};if(!this.invocation)return{};var e,n=st(this.invocation.steps);try{for(n.s();!(e=n.n()).done;){var i=e.value;t[i.state]?t[i.state]+=1:t[i.state]=1}}catch(t){n.e(t)}finally{n.f()}return t},invocationAndJobTerminal:function(){return this.invocationSchedulingTerminal&&this.jobStatesTerminal},invocationLink:function(){return ht("workflows/invocations/report?id=".concat(this.invocationId))},bcoJSON:function(){return ht("api/invocations/".concat(this.invocationId,"/biocompute/download"))},invocationPdfLink:function(){return ht("api/invocations/".concat(this.invocationId,"/report.pdf"))},invocationSchedulingTerminal:function(){return"scheduled"==this.invocationState||"cancelled"==this.invocationState||"failed"==this.invocationState},jobStatesTerminal:function(){var t;return!(!this.invocationSchedulingTerminal||0!==(null===(t=this.JobStatesSummary)||void 0===t?void 0:t.jobCount))||this.jobStatesSummary&&this.jobStatesSummary.terminal()},stepStatesStr:function(){return"".concat(this.stepStates.scheduled||0," of ").concat(this.stepCount," steps successfully scheduled.")},jobStatesStr:function(){var t,e="".concat((null===(t=this.jobStatesSummary)||void 0===t?void 0:t.numTerminal())||0," of ").concat(this.jobCount," jobs complete");return this.invocationSchedulingTerminal||(e+=" (total number of jobs will change until all steps fully scheduled)"),"".concat(e,".")},jobStatesSummary:function(){var t=this.getInvocationJobsSummaryById(this.invocationId);return t?new at.a.JobStatesSummary(t):null}}),methods:dt(dt({},Object(Y.b)(["fetchInvocationForId","fetchInvocationJobsSummaryForId"])),{},{pollStepStatesUntilTerminal:function(){var t=this;this.invocation&&this.invocationSchedulingTerminal||this.fetchInvocationForId(this.invocationId).then((function(e){t.stepStatesInterval=setTimeout(t.pollStepStatesUntilTerminal,3e3)}))},pollJobStatesUntilTerminal:function(){var t=this;this.jobStatesTerminal||this.fetchInvocationJobsSummaryForId(this.invocationId).then((function(e){t.jobStatesInterval=setTimeout(t.pollJobStatesUntilTerminal,3e3)}))},onError:function(t){console.error(t)},onCancel:function(){this.$emit("invocation-cancelled")},cancelWorkflowScheduling:function(){var t,e;(t=this.invocationId,e=o("api/invocations/".concat(t)),r.a.delete(e)).then(this.onCancel).catch(this.onError)}}),beforeDestroy:function(){clearTimeout(this.jobStatesInterval),clearTimeout(this.stepStatesInterval)}},pt=Object(d.a)(ft,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-3"},[t.invocationAndJobTerminal?n("div",[n("span",[n("a",{staticClass:"invocation-report-link",attrs:{href:t.invocationLink}},[n("b",[t._v("View Report "+t._s(t.indexStr))])]),t._v(" "),n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"fa fa-print ml-1 invocation-pdf-link",attrs:{href:t.invocationPdfLink,title:"Download PDF"}})])]):n("div",[n("span",{staticClass:"fa fa-spinner fa-spin"}),t._v(" "),n("span",[t._v("Invocation "+t._s(t.indexStr)+"...")]),t._v(" "),t.invocationSchedulingTerminal?t._e():n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times cancel-workflow-scheduling",attrs:{title:"Cancel scheduling of workflow invocation"},on:{click:t.cancelWorkflowScheduling}})]),t._v(" "),t.stepCount?"cancelled"==t.invocationState?n("progress-bar",{attrs:{note:"Invocation scheduling cancelled - expected jobs and outputs may not be generated.","error-count":1}}):"failed"==t.invocationState?n("progress-bar",{attrs:{note:"Invocation scheduling failed - Galaxy administrator may have additional details in logs.","error-count":1}}):n("progress-bar",{attrs:{note:t.stepStatesStr,total:t.stepCount,"ok-count":t.stepStates.scheduled,loading:!t.invocationSchedulingTerminal}}):n("progress-bar",{attrs:{note:"Loading step state summary...",loading:!0}}),t._v(" "),n("progress-bar",{attrs:{note:t.jobStatesStr,total:t.jobCount,"ok-count":t.okCount,"running-count":t.runningCount,"new-count":t.newCount,"error-count":t.errorCount,loading:!t.invocationAndJobTerminal}}),t._v(" "),t.invocationAndJobTerminal?n("span",[n("a",{staticClass:"bco-json",attrs:{href:t.bcoJSON}},[n("b",[t._v("Download BioCompute Object")])])]):t._e(),t._v(" "),t.invocation?n("workflow-invocation-details",{attrs:{invocation:t.invocation,invocationAndJobTerminal:t.invocationAndJobTerminal}}):t._e()],1)}),[],!1,null,null,null);e.default=pt.exports},function(t,e,n){"use strict";var i=n(45),a=n(271),r=n(569),o=n(99),s=n(274),l=n(566),c=n(613),d=n(5),u={inject:["STATES"],components:{Discarded:Object(d.a)({},(function(t,e){var n=e._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("The job creating this dataset was cancelled before completion.")])])}),[],!0,null,null,null).exports,Empty:Object(d.a)({},(function(t,e){var n=e._c;return e.props.dataset?n("div",[n("span",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("No data")]),e._v(": "),n("i",[e._v(e._s(e.props.dataset.misc_blurb))])]):e._e()}),[],!0,null,null,null).exports,Error:Object(d.a)({},(function(t,e){var n=e._c;return e.props.dataset?n("div",[!e.props.dataset.purged&&e.props.dataset.misc_info?n("div",[n("span",[e._v(e._s(e.props.dataset.misc_info))])]):e._e(),e._v(" "),n("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"help-text"},[e._v("An error occurred with this props.dataset")]),e._v(" "),e.props.dataset.misc_info?n("div",{staticClass:"job-error-text"},[n("span",[e._v(e._s(e.props.dataset.misc_info))])]):e._e()]):e._e()}),[],!0,null,null,null).exports,New:Object(d.a)({},(function(t,e){var n=e._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("This is a new dataset and not all of its data are available yet.")])])}),[],!0,null,null,null).exports,NotViewable:Object(d.a)({},(function(t,e){var n=e._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("You do not have permission to view this dataset.")])])}),[],!0,null,null,null).exports,Ok:Object(d.a)({},(function(t,e){var n=e._c;return e.props.dataset?n("div",[e.props.dataset.misc_blurb?n("div",{staticClass:"blurb"},[n("span",{staticClass:"value"},[e._v(e._s(e.props.dataset.misc_blurb))])]):e._e(),e._v(" "),e.props.dataset.file_ext?n("div",{staticClass:"datatype"},[n("label",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"prompt"},[e._v("format")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.props.dataset.file_ext))])]):e._e(),e._v(" "),e.props.dataset.metadata_dbkey?n("div",{staticClass:"dbkey"},[n("label",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"prompt"},[e._v("database")]),e._v(" "),n("span",{staticClass:"value"},[e._v(e._s(e.props.dataset.metadata_dbkey))])]):e._e(),e._v(" "),e.props.dataset.misc_info?n("div",[n("span",[e._v(e._s(e.props.dataset.misc_info))])]):e._e()]):e._e()}),[],!0,null,null,null).exports,Paused:Object(d.a)({},(function(t,e){var n=e._c;return e.dataset?n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v('This job is paused. Use the "Resume Paused Jobs" in the history menu to resume.')]),e._v(" "),e.dataset.misc_info?n("div",[n("span",[e._v(e._s(e.props.dataset.misc_info))])]):e._e()]):e._e()}),[],!0,null,null,null).exports,Queued:Object(d.a)({},(function(t,e){var n=e._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("This job is waiting to run.")])])}),[],!0,null,null,null).exports,Running:Object(d.a)({},(function(t,e){var n=e._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("This job is currently running.")])])}),[],!0,null,null,null).exports,SettingMetadata:Object(d.a)({},(function(t,e){var n=e._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("Metadata is being auto-detected.")])])}),[],!0,null,null,null).exports,Upload:Object(d.a)({},(function(t,e){var n=e._c;return n("div",[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[e._v("This dataset is currently uploading.")])])}),[],!0,null,null,null).exports},props:{dataset:{type:Object,required:!0}},computed:{summaryComponent:function(){var t=this.dataset.state;return t==this.STATES.FAILED_METADATA&&(t=this.STATES.OK),Object(c.capitalize)(Object(c.camelize)(t))}}},h=Object(d.a)(u,(function(){var t=this.$createElement;return(this._self._c||t)(this.summaryComponent,{tag:"component",staticClass:"summary",attrs:{dataset:this.dataset}})}),[],!1,null,null,null).exports,f=n(570),p={mixins:[n(240).a],components:{ClickToEdit:a.a,Annotation:r.a,StatusIcon:s.b,StateBtn:s.a,DatasetMenu:l.a,DatasetSummary:h,ContentTags:f.a,Nametag:o.a},props:{dataset:{type:i.c,required:!0},expanded:{type:Boolean,required:!0},selected:{type:Boolean,required:!1,default:!1},showSelection:{type:Boolean,required:!1,default:!1}},data:function(){return{showTags:!1}},computed:{collapsed:function(){return!this.expanded},typeId:function(){return this.dataset.type_id},ok:function(){return"ok"==this.dataset.state}},methods:{onStatusClick:function(t){switch(this.dataset.state){case i.g.ERROR:this.backboneRoute("datasets/error",{dataset_id:this.dataset.id});break;default:console.log("unhandled status icon click",this.dataset.state)}}}},m=Object(d.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dataset",class:{expanded:t.expanded,collapsed:t.collapsed,selected:t.selected},attrs:{"data-state":t.dataset.state},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-left",void 0,e.key,void 0)?null:e.target!==e.currentTarget?null:(e.stopPropagation(),t.$emit("update:expanded",!1))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-right",void 0,e.key,void 0)?null:e.target!==e.currentTarget?null:(e.stopPropagation(),t.$emit("update:expanded",!0))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:e.target!==e.currentTarget?null:(e.stopPropagation(),e.preventDefault(),t.$emit("update:selected",!t.selected))}]}},[n("nav",{staticClass:"content-top-menu d-flex align-items-center justify-content-between",on:{click:function(e){return e.stopPropagation(),t.$emit("update:expanded",!t.expanded)}}},[n("div",{staticClass:"d-flex mr-1 align-items-center",on:{click:function(t){t.stopPropagation()}}},[t.showSelection?n("b-check",{attrs:{checked:t.selected},on:{change:function(e){return t.$emit("update:selected",e)}}}):t._e(),t._v(" "),t.ok?t._e():n("StatusIcon",{staticClass:"status-icon px-1",attrs:{state:t.dataset.state},on:{click:function(e){return e.stopPropagation(),t.onStatusClick(e)}}}),t._v(" "),t.dataset.visible?t._e():n("StateBtn",{staticClass:"px-1",attrs:{state:"hidden",title:"Unhide",icon:"fa fa-eye-slash"},on:{click:function(e){return e.stopPropagation(),t.$emit("unhide")}}}),t._v(" "),t.dataset.isDeleted&&!t.dataset.purged?n("StateBtn",{staticClass:"px-1",attrs:{state:"deleted",title:"Undelete",icon:"fas fa-trash-restore"},on:{click:function(e){return e.stopPropagation(),t.$emit("undelete")}}}):t._e()],1),t._v(" "),n("h5",{staticClass:"flex-grow-1 overflow-hidden mr-auto text-nowrap text-truncate"},[n("span",{staticClass:"hid"},[t._v(t._s(t.dataset.hid))]),t._v(" "),t.collapsed||!t.dataset.canEditName?n("span",{staticClass:"name"},[t._v(t._s(t.dataset.title))]):t._e()]),t._v(" "),t._t("menu",[n("DatasetMenu",t._g({staticClass:"content-item-menu",attrs:{dataset:t.dataset,expanded:t.expanded,"show-tags":t.showTags},on:{"update:showTags":function(e){t.showTags=e},"update:show-tags":function(e){t.showTags=e}}},t.$listeners))])],2),t._v(" "),t.collapsed&&t.dataset.nameTags.length?n("div",{staticClass:"nametags p-1"},t._l(t.dataset.nameTags,(function(t){return n("Nametag",{key:t,attrs:{tag:t}})})),1):t._e(),t._v(" "),t.expanded?n("header",{staticClass:"p-2"},[t.dataset.canEditName?n("ClickToEdit",{attrs:{"tag-name":"h4",value:t.dataset.name,"display-label":t.dataset.title,"tooltip-title":t._f("localize")("Edit dataset name..."),"tooltip-placement":"left"},on:{input:function(e){return t.$emit("update:dataset",{name:e})}}}):t._e(),t._v(" "),n("Annotation",{staticClass:"mt-1",attrs:{value:t.dataset.annotation},on:{input:function(e){return t.$emit("update:dataset",{annotation:e})}}}),t._v(" "),t.showTags?n("ContentTags",{staticClass:"mt-2",attrs:{content:t.dataset}}):t.dataset.nameTags.length?n("div",{staticClass:"nametags mt-2"},t._l(t.dataset.nameTags,(function(t){return n("Nametag",{key:t,attrs:{tag:t}})})),1):t._e(),t._v(" "),n("div",{staticClass:"details"},[n("DatasetSummary",{attrs:{dataset:t.dataset}}),t._v(" "),t.dataset.displayLinks.length?n("div",{staticClass:"display-applications"},t._l(t.dataset.displayLinks,(function(e){return n("div",{key:e.label,staticClass:"display-application"},[n("span",{staticClass:"display-application-location"},[t._v("\n                        "+t._s(e.label)+"\n                    ")]),t._v(" "),n("span",{staticClass:"display-application-links"},t._l(e.links,(function(e){return n("a",{key:e.href,attrs:{href:e.href,target:e.target}},[t._v("\n                            "+t._s(e.text)+"\n                        ")])})),0)])})),0):t._e(),t._v(" "),t.dataset.peek?n("pre",{staticClass:"dataset-peek p-1",domProps:{innerHTML:t._s(t.dataset.peek)}}):t._e()],1)],1):t._e()])}),[],!1,null,null,null);e.a=m.exports},function(t,e,n){"use strict";var i=n(216),a=n(274),r=n(565),o=n(567),s=n(99),l={components:{StatusIcon:a.b,StateBtn:a.a,JobStateProgress:r.a,DscMenu:o.a,Nametag:s.a},props:{dsc:{type:i.a,required:!0},selected:{type:Boolean,required:!1,default:!1},showSelection:{type:Boolean,required:!1,default:!1}},methods:{onStatusClick:function(){var t;(t=console).log.apply(t,["onStatusClick"].concat(Array.prototype.slice.call(arguments)))}}},c=(n(823),n(5)),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dataset dataset-collection collapsed",class:{selected:t.selected},attrs:{"data-state":t.dsc.state},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-right",void 0,e.key,void 0)?null:e.target!==e.currentTarget?null:(e.stopPropagation(),t.$emit("viewCollection"))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:e.target!==e.currentTarget?null:(e.stopPropagation(),e.preventDefault(),t.$emit("update:selected",!t.selected))}],click:function(e){return e.stopPropagation(),t.$emit("viewCollection")}}},[n("nav",{staticClass:"d-flex content-top-menu align-items-center justify-content-between"},[n("div",{staticClass:"d-flex mr-1 align-items-center",on:{click:function(t){t.stopPropagation()}}},[t.showSelection?n("b-check",{attrs:{checked:t.selected},on:{change:function(e){return t.$emit("update:selected",e)}}}):t._e(),t._v(" "),"ok"!=t.dsc.state?n("StatusIcon",{staticClass:"status-icon px-1",attrs:{state:t.dsc.state},on:{click:function(e){return e.stopPropagation(),t.onStatusClick(e)}}}):t._e(),t._v(" "),t.dsc.visible?t._e():n("StateBtn",{staticClass:"px-1",attrs:{state:"hidden",title:"Unhide",icon:"fa fa-eye-slash"},on:{click:function(e){return e.stopPropagation(),t.$emit("unhide")}}}),t._v(" "),n("StateBtn",{staticClass:"px-1",attrs:{state:"ok",title:"Collection",icon:"fas fa-folder"},on:{click:function(e){return e.stopPropagation(),t.$emit("viewCollection")}}})],1),t._v(" "),n("h5",{staticClass:"flex-grow-1 overflow-hidden mr-auto text-nowrap text-truncate"},[n("span",{staticClass:"hid"},[t._v(t._s(t.dsc.hid))]),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(t.dsc.name))]),t._v(" "),n("span",{staticClass:"description"},[t._v("\n                ("+t._s(t._f("localize")(t.dsc.collectionType))+" "+t._s(t._f("localize")(t.dsc.collectionCountDescription))+")\n            ")])]),t._v(" "),t._t("menu",[t.dsc.deleted?t._e():n("DscMenu",t._g({staticClass:"content-item-menu"},t.$listeners))]),t._v(" "),t.dsc.deleted?n("StateBtn",{staticClass:"px-1",attrs:{state:"deleted",title:"Undelete",icon:"fas fa-trash-restore"},on:{click:function(e){return e.stopPropagation(),t.$emit("undelete")}}}):t._e()],2),t._v(" "),t.dsc.nameTags.length?n("div",{staticClass:"nametags p-1"},t._l(t.dsc.nameTags,(function(t){return n("Nametag",{key:t,attrs:{tag:t}})})),1):t._e(),t._v(" "),t.dsc.jobSummary?n("JobStateProgress",{staticClass:"m-2",attrs:{summary:t.dsc.jobSummary}}):t._e()],1)}),[],!1,null,"78960c9a",null);e.a=d.exports},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),l=n(3),c=n(6),d=n(148),u=n(173),h=n(74),f=n(10),p=s.a.View.extend({el:"body",className:"full-content",_panelids:["left","right"],initialize:function(t){var e=this;this.config=i.default.defaults(t.config||{},{message_box_visible:!1,message_box_content:"",message_box_class:"info",show_inactivity_warning:!1,inactivity_box_content:"",hide_panels:!1,hide_masthead:!1});var n=Object(c.a)();n.modal=this.modal=new h.a.View,n.router=this.router=t.Router&&new t.Router(this,t);var a=new d.a;this.center=new u.a.CenterPanel,n.display=this.display=function(t,n){t.title?(f.b.setWindowTitle(t.title),t.allow_title_display=!1):(f.b.setWindowTitle(),t.allow_title_display=!0),t.active_tab&&e.masthead.highlight(t.active_tab),e.center.display(t,n)},this.$el.attr("scroll","no"),this.$el.html(this._template()),this.$masthead=this.$("#masthead"),this.$center=this.$("#center"),this.$messagebox=this.$("#messagebox"),this.$inactivebox=this.$("#inactivebox"),this.config.hide_masthead?(this.$masthead.remove(),this.$center.css("top",0)):this.masthead=Object(d.b)(this.$masthead[0],this.config,a),this.$center.append(this.center.$el),this.$el.append(a.frame.$el),this.$el.append(this.modal.$el),this.panels={},this.config.hide_panels||i.default.each(this._panelids,(function(n){var i=n.charAt(0).toUpperCase()+n.slice(1),a=t[i];if(a){var r=new a(e,t),o=e.$("#".concat(n));e[r.toString()]=r,e.panels[n]=new u.a.SidePanel({id:n,el:o,view:r}),e.config.hide_masthead&&o.css("top",0)}})),this.render(),this.router&&s.a.history.start({root:Object(l.getAppRoot)(),pushState:!0})},render:function(){return r()(".select2-hidden-accessible").remove(),this.config.hide_masthead||(this.renderMessageBox(),this.renderInactivityBox()),this.renderPanels(),this},renderMessageBox:function(){if(this.config.message_box_visible){var t=this.config.message_box_content||"",e=this.config.message_box_class||"info";this.$messagebox.attr("class","alert alert-".concat(e," rounded-0 m-0 p-2")).append(r()("<div/>").attr("class","fa fa-fw mr-1 fa-exclamation")).append(t).toggle(!!t).show()}else this.$messagebox.hide();return this},renderInactivityBox:function(){if(this.config.show_inactivity_warning){var t=this.config.inactivity_box_content||"",e=r()("<a/>").attr("class","ml-1").attr("href","".concat(Object(l.getAppRoot)(),"user/resend_verification")).text("Resend verification");this.$inactivebox.append(r()("<div/>").attr("class","fa fa-fw mr-1 fa-exclamation-triangle")).append(t).append(e).toggle(!!t).show()}else this.$inactivebox.hide();return this},renderPanels:function(){var t=this;return i.default.each(this._panelids,(function(e){var n=t.panels[e];n?n.render():(t.$center.css(e,0),t.$("#".concat(e)).hide())})),this},_template:function(){return['<div id="everything">\n                <div id="background"/>\n                <div id="masthead"/>\n                <small id="messagebox"/>\n                <small id="inactivebox" class="alert rounded-0 m-0 p-2 alert-warning" />\n                <div id="columns">\n                    <div id="left" class="unified-panel"/>\n                    <div id="center" />\n                    <div id="right" class="unified-panel" />\n                </div>\n            </div>\n            <div id="dd-helper" />'].join("")},toString:function(){return"PageLayoutView"}});e.a={View:p}},,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(660);var i=n(1);!function(){window.console=window.console||{log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},assert:function(){}},console.debug("Polyfills are running"),Object.assign=Object.assign||i.default.extend;for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window["".concat(e[n],"RequestAnimationFrame")],window.cancelRequestAnimationFrame=window["".concat(e[n],"CancelRequestAnimationFrame")];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),a=Math.max(0,16-(i-t)),r=window.setTimeout((function(){e(i+a)}),a);return t=i+a,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){window.clearTimeout(t)});var a=[{name:"canvas",compatible:function(){return window.CanvasRenderingContext2D}},{name:"sessionStorage",compatible:function(){try{return window.sessionStorage.length>=0}catch(t){console.debug(t)}return!1}}].filter((function(t){return!t.compatible()})).map((function(t){return t.name}));if(a.length){var r=document.querySelectorAll('link[rel="index"]').item(0);r&&(window.location="".concat(r.href,"static/incompatible-browser.html")),console.log("incompatible browser:\n".concat(a.join("\n")))}}()},,,,,,,,,,,,,function(t,e,n){var i=n(561),a=n(258);void 0===a.bundleEntries&&(a.bundleEntries=i),t.exports=i},function(t,e,n){var i=n(71);n(513),n(514),n(515),n(516),n(673),n(517),n(518),n(519),n(520),n(521),n(674),n(522),n(523),n(675),n(676),t.exports=i},function(t,e,n){
/**
 * @fileOverview jquery-autocomplete, the jQuery Autocompleter
 * @author <a href="mailto:dylan@dyve.net">Dylan Verheul</a>
 * @version 2.4.4
 * @requires jQuery 1.6+
 * @license MIT | GPL | Apache 2.0, see LICENSE.txt
 * @see https://github.com/dyve/jquery-autocomplete
 */
!function(t){"use strict";t.fn.autocomplete_verheul=function(e){var n;arguments.length>1?(n=e,(e=arguments[1]).url=n):"string"==typeof e&&(e={url:n=e});var i=t.extend({},t.fn.autocomplete_verheul.defaults,e);return this.each((function(){var e=t(this);e.data("autocompleter",new t.Autocompleter(e,t.meta?t.extend({},i,e.data()):i))}))},t.fn.autocomplete_verheul.defaults={inputClass:"acInput",loadingClass:"acLoading",resultsClass:"acResults",selectClass:"acSelect",queryParamName:"q",extraParams:{},remoteDataType:!1,lineSeparator:"\n",cellSeparator:"|",minChars:2,maxItemsToShow:10,delay:400,useCache:!0,maxCacheLength:10,matchSubset:!0,matchCase:!1,matchInside:!0,mustMatch:!1,selectFirst:!1,selectOnly:!1,showResult:null,preventDefaultReturn:1,preventDefaultTab:0,autoFill:!1,filterResults:!0,filter:!0,sortResults:!0,sortFunction:null,onItemSelect:null,onNoMatch:null,onFinish:null,matchStringConverter:null,beforeUseConverter:null,autoWidth:"min-width",useDelimiter:!1,delimiterChar:",",delimiterKeyCode:188,processData:null,onError:null,enabled:!0};var e=function(e){var n,i,a=typeof e;return"string"===a?(n=e,i={}):t.isArray(e)?(n=e[0],i=e.slice(1)):"object"===a&&(n=e.value,i=e.data),"object"!=typeof i&&(i={}),{value:n=String(n),data:i}},n=function(t,e,n){var i=parseInt(t,10);return n=n||{},(isNaN(i)||n.min&&i<n.min)&&(i=e),i},i=function(e,n){var i=[];return t.each(n,(function(t,e){i.push(function(t,e){return[t,encodeURIComponent(e)].join("=")}(t,e))})),i.length&&(e+=-1===e.indexOf("?")?"?":"&",e+=i.join("&")),e};t.Autocompleter=function(e,i){if(!e||!(e instanceof t)||1!==e.length||"INPUT"!==e.get(0).tagName.toUpperCase()&&"TEXTAREA"!==e.get(0).tagName.toUpperCase())throw new Error("Invalid parameter for jquery.Autocompleter, jQuery object with one element with INPUT or TEXTAREA tag expected.");var a=this;this.options=i,this.cacheData_={},this.cacheLength_=0,this.selectClass_="jquery-autocomplete-selected-item",this.keyTimeout_=null,this.finishTimeout_=null,this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1,this.finishOnBlur_=!0,this.options.minChars=n(this.options.minChars,t.fn.autocomplete_verheul.defaults.minChars,{min:0}),this.options.maxItemsToShow=n(this.options.maxItemsToShow,t.fn.autocomplete_verheul.defaults.maxItemsToShow,{min:0}),this.options.maxCacheLength=n(this.options.maxCacheLength,t.fn.autocomplete_verheul.defaults.maxCacheLength,{min:1}),this.options.delay=n(this.options.delay,t.fn.autocomplete_verheul.defaults.delay,{min:0}),2!=this.options.preventDefaultReturn&&(this.options.preventDefaultReturn=this.options.preventDefaultReturn?1:0),2!=this.options.preventDefaultTab&&(this.options.preventDefaultTab=this.options.preventDefaultTab?1:0),this.dom={},this.dom.$elem=e,this.dom.$elem.attr("autocomplete","off").addClass(this.options.inputClass),this.dom.$results=t("<div></div>").hide().addClass(this.options.resultsClass).css({position:"absolute"}),t("body").append(this.dom.$results),e.keydown((function(t){switch(a.lastKeyPressed_=t.keyCode,a.lastKeyPressed_){case a.options.delimiterKeyCode:a.options.useDelimiter&&a.active_&&a.selectCurrent();break;case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 38:return t.preventDefault(),a.active_?a.focusPrev():a.activate(),!1;case 40:return t.preventDefault(),a.active_?a.focusNext():a.activate(),!1;case 9:if(a.active_&&(a.selectCurrent(),a.options.preventDefaultTab))return t.preventDefault(),!1;if(2===a.options.preventDefaultTab)return t.preventDefault(),!1;break;case 13:if(a.active_&&(a.selectCurrent(),a.options.preventDefaultReturn))return t.preventDefault(),!1;if(2===a.options.preventDefaultReturn)return t.preventDefault(),!1;break;case 27:if(a.active_)return t.preventDefault(),a.deactivate(!0),!1;break;default:a.activate()}})),e.on("paste",(function(){a.activate()}));var r=function(){a.deactivate(!0)};e.blur((function(){a.finishOnBlur_&&(a.finishTimeout_=setTimeout(r,200))})),e.parents("form").on("submit",r)},t.Autocompleter.prototype.position=function(){var e=this.dom.$elem.offset(),n=this.dom.$results.outerHeight(),i=t(window).outerHeight(),a=e.top+this.dom.$elem.outerHeight(),r=a+n,o={top:a,left:e.left};if(r>i){var s=e.top-n;s>=0&&(o.top=s)}this.dom.$results.css(o)},t.Autocompleter.prototype.cacheRead=function(t){var e,n,i,a,r;if(this.options.useCache)for(e=(t=String(t)).length,n=this.options.matchSubset?1:e;n<=e;){for(a=this.options.matchInside?e-n:0,r=0;r<=a;){if(i=t.substr(0,n),void 0!==this.cacheData_[i])return this.cacheData_[i];r++}n++}return!1},t.Autocompleter.prototype.cacheWrite=function(t,e){return!!this.options.useCache&&(this.cacheLength_>=this.options.maxCacheLength&&this.cacheFlush(),t=String(t),void 0!==this.cacheData_[t]&&this.cacheLength_++,this.cacheData_[t]=e,this.cacheData_[t])},t.Autocompleter.prototype.cacheFlush=function(){this.cacheData_={},this.cacheLength_=0},t.Autocompleter.prototype.callHook=function(e,n){var i=this.options[e];return!(!i||!t.isFunction(i))&&i(n,this)},t.Autocompleter.prototype.activate=function(){if(this.options.enabled){var t=this;this.keyTimeout_&&clearTimeout(this.keyTimeout_),this.keyTimeout_=setTimeout((function(){t.activateNow()}),this.options.delay)}},t.Autocompleter.prototype.activateNow=function(){var t=this.beforeUseConverter(this.dom.$elem.val());t!==this.lastProcessedValue_&&t!==this.lastSelectedValue_&&this.fetchData(t)},t.Autocompleter.prototype.fetchData=function(t){var e=this,n=function(t,n){e.options.processData&&(t=e.options.processData(t)),e.showResults(e.filterResults(t,n),n)};this.lastProcessedValue_=t,t.length<this.options.minChars?n([],t):this.options.data?n(this.options.data,t):this.fetchRemoteData(t,(function(e){n(e,t)}))},t.Autocompleter.prototype.fetchRemoteData=function(e,n){var i=this.cacheRead(e);if(i)n(i);else{var a=this,r="json"===a.options.remoteDataType?"json":"text",o=function(t){var i=!1;!1!==t&&(i=a.parseRemoteData(t),a.cacheWrite(e,i)),a.dom.$elem.removeClass(a.options.loadingClass),n(i)};this.dom.$elem.addClass(this.options.loadingClass),t.ajax({url:this.makeUrl(e),success:o,error:function(e,n,i){t.isFunction(a.options.onError)?a.options.onError(e,n,i):o(!1)},dataType:r})}},t.Autocompleter.prototype.setExtraParam=function(e,n){var i=t.trim(String(e));return i&&(this.options.extraParams||(this.options.extraParams={}),this.options.extraParams[i]!==n&&(this.options.extraParams[i]=n,this.cacheFlush())),this},t.Autocompleter.prototype.makeUrl=function(e){var n=this.options.url,a=t.extend({},this.options.extraParams);return!1===this.options.queryParamName?n+=encodeURIComponent(e):a[this.options.queryParamName]=e,i(n,a)},t.Autocompleter.prototype.parseRemoteData=function(e){var n,i=e;if("json"===this.options.remoteDataType){switch(n=typeof e){case"object":i=e;break;case"string":i=t.parseJSON(e);break;default:throw new Error("Unexpected remote data type: "+n)}return i}return function(t,e,n){var i,a,r,o,s,l,c=[];for(l=String(t).replace("\r\n","\n").split(e),i=0;i<l.length;i++){for(o=l[i].split(n),r=[],a=0;a<o.length;a++)r.push(decodeURIComponent(o[a]));s=r.shift(),c.push({value:s,data:r})}return c}(i,this.options.lineSeparator,this.options.cellSeparator)},t.Autocompleter.prototype.defaultFilter=function(t,e){if(!t.value)return!1;if(this.options.filterResults){var n=this.matchStringConverter(e),i=this.matchStringConverter(t.value);this.options.matchCase||(n=n.toLowerCase(),i=i.toLowerCase());var a=i.indexOf(n);return this.options.matchInside?a>-1:0===a}return!0},t.Autocompleter.prototype.filterResult=function(e,n){return!1===this.options.filter||(t.isFunction(this.options.filter)?this.options.filter(e,n):this.defaultFilter(e,n))},t.Autocompleter.prototype.filterResults=function(t,n){var i,a,r=[];for(i=0;i<t.length;i++)a=e(t[i]),this.filterResult(a,n)&&r.push(a);return this.options.sortResults&&(r=this.sortResults(r,n)),this.options.maxItemsToShow>0&&this.options.maxItemsToShow<r.length&&(r.length=this.options.maxItemsToShow),r},t.Autocompleter.prototype.sortResults=function(e,n){var i=this,a=this.options.sortFunction;return t.isFunction(a)||(a=function(t,e,n){return function(t,e,n){return t=String(t.value),e=String(e.value),n||(t=t.toLowerCase(),e=e.toLowerCase()),t>e?1:t<e?-1:0}(t,e,i.options.matchCase)}),e.sort((function(t,e){return a(t,e,n,i.options)})),e},t.Autocompleter.prototype.matchStringConverter=function(e,n,i){var a=this.options.matchStringConverter;return t.isFunction(a)&&(e=a(e,n,i)),e},t.Autocompleter.prototype.beforeUseConverter=function(e){e=this.getValue(e);var n=this.options.beforeUseConverter;return t.isFunction(n)&&(e=n(e)),e},t.Autocompleter.prototype.enableFinishOnBlur=function(){this.finishOnBlur_=!0},t.Autocompleter.prototype.disableFinishOnBlur=function(){this.finishOnBlur_=!1},t.Autocompleter.prototype.createItemFromResult=function(e){var n=this,i=t("<li/>");return i.html(this.showResult(e.value,e.data)),i.data({value:e.value,data:e.data}).click((function(){n.selectItem(i)})).mousedown(n.disableFinishOnBlur).mouseup(n.enableFinishOnBlur),i},t.Autocompleter.prototype.getItems=function(){return t(">ul>li",this.dom.$results)},t.Autocompleter.prototype.showResults=function(e,n){var i,a,r,o,s=e.length,l=this,c=t("<ul></ul>"),d=!1,u=!1;if(s){for(i=0;i<s;i++)a=e[i],r=this.createItemFromResult(a),c.append(r),!1===d&&(d=String(a.value),u=r,r.addClass(this.options.firstItemClass)),i===s-1&&r.addClass(this.options.lastItemClass);this.dom.$results.html(c).show(),this.position(),this.options.autoWidth&&(o=this.dom.$elem.outerWidth()-this.dom.$results.outerWidth()+this.dom.$results.width(),this.dom.$results.css(this.options.autoWidth,o)),this.getItems().hover((function(){l.focusItem(this)}),(function(){})),(this.autoFill(d,n)||this.options.selectFirst||this.options.selectOnly&&1===s)&&this.focusItem(u),this.active_=!0}else this.hideResults(),this.active_=!1},t.Autocompleter.prototype.showResult=function(e,n){return t.isFunction(this.options.showResult)?this.options.showResult(e,n):t("<p></p>").text(e).html()},t.Autocompleter.prototype.autoFill=function(t,e){var n,i,a,r;if(this.options.autoFill&&8!==this.lastKeyPressed_&&(n=String(t).toLowerCase(),i=String(e).toLowerCase(),a=t.length,r=e.length,n.substr(0,r)===i)){var o=this.getDelimiterOffsets(),s=o.start?" ":"";this.setValue(s+t);var l=r+o.start+s.length,c=a+o.start+s.length;return this.selectRange(l,c),!0}return!1},t.Autocompleter.prototype.focusNext=function(){this.focusMove(1)},t.Autocompleter.prototype.focusPrev=function(){this.focusMove(-1)},t.Autocompleter.prototype.focusMove=function(e){var i=this.getItems();if(e=n(e,0))for(var a=0;a<i.length;a++)if(t(i[a]).hasClass(this.selectClass_))return void this.focusItem(a+e);this.focusItem(0)},t.Autocompleter.prototype.focusItem=function(e){var n,i=this.getItems();i.length&&(i.removeClass(this.selectClass_).removeClass(this.options.selectClass),"number"==typeof e?(e<0?e=0:e>=i.length&&(e=i.length-1),n=t(i[e])):n=t(e),n&&n.addClass(this.selectClass_).addClass(this.options.selectClass))},t.Autocompleter.prototype.selectCurrent=function(){var e=t("li."+this.selectClass_,this.dom.$results);1===e.length?this.selectItem(e):this.deactivate(!1)},t.Autocompleter.prototype.selectItem=function(t){var e=t.data("value"),n=t.data("data"),i=this.displayValue(e,n),a=this.beforeUseConverter(i);this.lastProcessedValue_=a,this.lastSelectedValue_=a;var r=this.getDelimiterOffsets(),o=this.options.delimiterChar,s=this.dom.$elem,l=0;this.options.useDelimiter&&(s.val().substring(r.start-1,r.start)==o&&" "!=o&&(i=" "+i),s.val().substring(r.end,r.end+1)!=o&&this.lastKeyPressed_!=this.options.delimiterKeyCode?i+=o:l=1),this.setValue(i),this.setCaret(r.start+i.length+l),this.callHook("onItemSelect",{value:e,data:n}),this.deactivate(!0),s.focus()},t.Autocompleter.prototype.displayValue=function(e,n){return t.isFunction(this.options.displayValue)?this.options.displayValue(e,n):e},t.Autocompleter.prototype.hideResults=function(){this.dom.$results.hide()},t.Autocompleter.prototype.deactivate=function(t){this.finishTimeout_&&clearTimeout(this.finishTimeout_),this.keyTimeout_&&clearTimeout(this.keyTimeout_),t&&(this.lastProcessedValue_!==this.lastSelectedValue_&&(this.options.mustMatch&&this.setValue(""),this.callHook("onNoMatch")),this.active_&&this.callHook("onFinish"),this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1),this.hideResults()},t.Autocompleter.prototype.selectRange=function(t,e){var n=this.dom.$elem.get(0);if(n.setSelectionRange)n.focus(),n.setSelectionRange(t,e);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select()}},t.Autocompleter.prototype.setCaret=function(t){this.selectRange(t,t)},t.Autocompleter.prototype.getCaret=function(){var t,e,n,i,a,r,o=this.dom.$elem,s=o[0];return s.createTextRange?(e=document.selection,"textarea"!=s.tagName.toLowerCase()?(t=o.val(),(n=e.createRange().duplicate()).moveEnd("character",t.length),i=""===n.text?t.length:t.lastIndexOf(n.text),(n=e.createRange().duplicate()).moveStart("character",-t.length),a=n.text.length):((r=(n=e.createRange()).duplicate()).moveToElementText(s),r.setEndPoint("EndToEnd",n),a=(i=r.text.length-n.text.length)+n.text.length)):(i=o[0].selectionStart,a=o[0].selectionEnd),{start:i,end:a}},t.Autocompleter.prototype.setValue=function(t){if(this.options.useDelimiter){var e=this.dom.$elem.val(),n=this.getDelimiterOffsets();t=e.substring(0,n.start)+t+e.substring(n.end)}this.dom.$elem.val(t)},t.Autocompleter.prototype.getValue=function(t){if(this.options.useDelimiter){var e=this.getDelimiterOffsets();return t.substring(e.start,e.end).trim()}return t},t.Autocompleter.prototype.getDelimiterOffsets=function(){var t=this.dom.$elem.val();if(this.options.useDelimiter){var e=t.substring(0,this.getCaret().start).lastIndexOf(this.options.delimiterChar)+1,n=t.substring(this.getCaret().start).indexOf(this.options.delimiterChar);-1==n&&(n=t.length),n+=this.getCaret().start}else e=0,n=t.length;return{start:e,end:n}}}(n(71))},function(t,e,n){!function(t){t.fn._hover=t.fn.hover,t.fn.hover=function(t,e,n){return n&&this.bind("hoverstart",t),e&&this.bind("hoverend",n||e),t?this.bind("hover",n?e:t):this.trigger("hover")};var e=t.event.special.hover={delay:100,speed:100,setup:function(i){i=t.extend({speed:e.speed,delay:e.delay,hovered:0},i||{}),t.event.add(this,"mouseenter mouseleave",n,i)},teardown:function(){t.event.remove(this,"mouseenter mouseleave",n)}};function n(e){var i=e.data||e;switch(e.type){case"mouseenter":i.dist2=0,i.event=e,e.type="hoverstart",!1!==t.event.dispatch.call(this,e)&&(i.elem=this,t.event.add(this,"mousemove",n,i),i.timer=setTimeout(a,i.delay));break;case"mousemove":i.dist2+=Math.pow(e.pageX-i.event.pageX,2)+Math.pow(e.pageY-i.event.pageY,2),i.event=e;break;case"mouseleave":clearTimeout(i.timer),i.hovered?(e.type="hoverend",t.event.dispatch.call(this,e),i.hovered--):t.event.remove(i.elem,"mousemove",n);break;default:i.dist2<=Math.pow(i.speed*(i.delay/1e3),2)?(t.event.remove(i.elem,"mousemove",n),i.event.type="hover",!1!==t.event.dispatch.call(i.elem,i.event)&&i.hovered++):i.timer=setTimeout(a,i.delay),i.dist2=0}function a(){n(i)}}}(n(71))},function(t,e,n){!function(t){t.fn.drag=function(e,n,i){var a="string"==typeof e?e:"",r=t.isFunction(e)?e:t.isFunction(n)?n:null;return 0!==a.indexOf("drag")&&(a="drag"+a),i=(e==r?n:i)||{},r?this.bind(a,i,r):this.trigger(a)};var e=t.event,n=e.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var n=t.data(this,i.datakey),a=e.data||{};n.related+=1,t.each(i.defaults,(function(t,e){void 0!==a[t]&&(n[t]=a[t])}))},remove:function(){t.data(this,i.datakey).related-=1},setup:function(){if(!t.data(this,i.datakey)){var n=t.extend({related:0},i.defaults);t.data(this,i.datakey,n),e.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(t.data(this,i.datakey)||{}).related||(t.removeData(this,i.datakey),e.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(a){if(!i.touched){var r,o=a.data;if(!(0!=a.which&&o.which>0&&a.which!=o.which)&&!t(a.target).is(o.not)&&(!o.handle||t(a.target).closest(o.handle,a.currentTarget).length)&&(i.touched="touchstart"==a.type?this:null,o.propagates=1,o.mousedown=this,o.interactions=[i.interaction(this,o)],o.target=a.target,o.pageX=a.pageX,o.pageY=a.pageY,o.dragging=null,r=i.hijack(a,"draginit",o),o.propagates))return(r=i.flatten(r))&&r.length&&(o.interactions=[],t.each(r,(function(){o.interactions.push(i.interaction(this,o))}))),o.propagates=o.interactions.length,!1!==o.drop&&n.drop&&n.drop.handler(a,o),i.textselect(!1),i.touched?e.add(i.touched,"touchmove touchend",i.handler,o):e.add(document,"mousemove mouseup",i.handler,o),!(!i.touched||o.live)&&void 0}},interaction:function(e,n){var a=t(e)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new i.callback,droppable:[],offset:a}},handler:function(a){var r=a.data;switch(a.type){case!r.dragging&&"touchmove":a.preventDefault();case!r.dragging&&"mousemove":if(Math.pow(a.pageX-r.pageX,2)+Math.pow(a.pageY-r.pageY,2)<Math.pow(r.distance,2))break;a.target=r.target,i.hijack(a,"dragstart",r),r.propagates&&(r.dragging=!0);case"touchmove":a.preventDefault();case"mousemove":if(r.dragging){if(i.hijack(a,"drag",r),r.propagates){!1!==r.drop&&n.drop&&n.drop.handler(a,r);break}a.type="mouseup"}case"touchend":case"mouseup":default:i.touched?e.remove(i.touched,"touchmove touchend",i.handler):e.remove(document,"mousemove mouseup",i.handler),r.dragging?(!1!==r.drop&&n.drop&&n.drop.handler(a,r),i.hijack(a,"dragend",r)):i.hijack(a,"dragclickonly",r),i.textselect(!0),!1===r.click&&r.dragging&&t.data(r.mousedown,"suppress.click",(new Date).getTime()+5),r.dragging=i.touched=!1}},hijack:function(n,a,r,o,s){if(r){var l,c,d,u={event:n.originalEvent,type:n.type},h=a.indexOf("drop")?"drag":"drop",f=o||0,p=isNaN(o)?r.interactions.length:o;n.type=a,n.originalEvent=null,r.results=[];do{if(c=r.interactions[f]){if("dragend"!==a&&c.cancelled)continue;d=i.properties(n,r,c),c.results=[],t(s||c[h]||r.droppable).each((function(o,s){if(d.target=s,n.isPropagationStopped=function(){return!1},!1===(l=s?e.dispatch.call(s,n,d):null)?("drag"==h&&(c.cancelled=!0,r.propagates-=1),"drop"==a&&(c[h][o]=null)):"dropinit"==a&&c.droppable.push(i.element(l)||s),"dragstart"==a&&(c.proxy=t(i.element(l)||c.drag)[0]),c.results.push(l),delete n.result,"dropinit"!==a)return l})),r.results[f]=i.flatten(c.results),"dropinit"==a&&(c.droppable=i.flatten(c.droppable)),"dragstart"!=a||c.cancelled||d.update()}}while(++f<p);return n.type=u.type,n.originalEvent=u.event,i.flatten(r.results)}},properties:function(t,e,n){var a=n.callback;return a.drag=n.drag,a.proxy=n.proxy||n.drag,a.startX=e.pageX,a.startY=e.pageY,a.deltaX=t.pageX-e.pageX,a.deltaY=t.pageY-e.pageY,a.originalX=n.offset.left,a.originalY=n.offset.top,a.offsetX=a.originalX+a.deltaX,a.offsetY=a.originalY+a.deltaY,a.drop=i.flatten((n.drop||[]).slice()),a.available=i.flatten((n.droppable||[]).slice()),a},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(e){return t.map(e,(function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?i.flatten(e):e}))},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&t.each(this.available,(function(t){n.drop.locate(this,t)}))}};var a=e.dispatch;e.dispatch=function(e){if(!(t.data(this,"suppress."+e.type)-(new Date).getTime()>0))return a.apply(this,arguments);t.removeData(this,"suppress."+e.type)};var r=e.fixHooks.touchstart=e.fixHooks.touchmove=e.fixHooks.touchend=e.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&t.each(r.props,(function(t,n){e[n]=i[n]}))}return e}};n.draginit=n.dragstart=n.dragend=i}(n(71))},function(t,e,n){!function(t){t.fn.drop=function(e,n,i){var a="string"==typeof e?e:"",r=t.isFunction(e)?e:t.isFunction(n)?n:null;return 0!==a.indexOf("drop")&&(a="drop"+a),i=(e==r?n:i)||{},r?this.bind(a,i,r):this.trigger(a)},t.drop=function(e){e=e||{},n.multi=!0===e.multi?1/0:!1===e.multi?1:isNaN(e.multi)?n.multi:e.multi,n.delay=e.delay||n.delay,n.tolerance=t.isFunction(e.tolerance)?e.tolerance:null===e.tolerance?null:n.tolerance,n.mode=e.mode||n.mode||"intersect"};var e=t.event.special,n=t.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(e){t.data(this,n.datakey).related+=1},remove:function(){t.data(this,n.datakey).related-=1},setup:function(){if(!t.data(this,n.datakey)){t.data(this,n.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),n.targets.push(this)}},teardown:function(){if(!(t.data(this,n.datakey)||{}).related){t.removeData(this,n.datakey);var e=this;n.targets=t.grep(n.targets,(function(t){return t!==e}))}},handler:function(i,a){var r;if(a)switch(i.type){case"mousedown":case"touchstart":r=t(n.targets),"string"==typeof a.drop&&(r=r.filter(a.drop)),r.each((function(){var e=t.data(this,n.datakey);e.active=[],e.anyactive=0,e.winner=0})),a.droppable=r,e.drag.hijack(i,"dropinit",a);break;case"mousemove":case"touchmove":n.event=i,n.timer||n.tolerate(a);break;case"mouseup":case"touchend":n.timer=clearTimeout(n.timer),a.propagates&&(e.drag.hijack(i,"drop",a),e.drag.hijack(i,"dropend",a))}},locate:function(e,i){var a=t.data(e,n.datakey),r=t(e),o=r.offset()||{},s=r.outerHeight(),l=r.outerWidth(),c={elem:e,width:l,height:s,top:o.top,left:o.left,right:o.left+l,bottom:o.top+s};return a&&(a.location=c,a.index=i,a.elem=e),c},contains:function(t,e){return(e[0]||e.left)>=t.left&&(e[0]||e.right)<=t.right&&(e[1]||e.top)>=t.top&&(e[1]||e.bottom)<=t.bottom},modes:{intersect:function(t,e,n){return this.contains(n,[t.pageX,t.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(t,e,n){return Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top))*Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left))},fit:function(t,e,n){return this.contains(n,e)?1:0},middle:function(t,e,n){return this.contains(n,[e.left+.5*e.width,e.top+.5*e.height])?1:0}},sort:function(t,e){return e.winner-t.winner||t.index-e.index},tolerate:function(i){var a,r,o,s,l,c,d,u,h=0,f=i.interactions.length,p=[n.event.pageX,n.event.pageY],m=n.tolerance||n.modes[n.mode];do{if(u=i.interactions[h]){if(!u)return;u.drop=[],l=[],c=u.droppable.length,m&&(o=n.locate(u.proxy)),a=0;do{if(d=u.droppable[a]){if(!(r=(s=t.data(d,n.datakey)).location))continue;s.winner=m?m.call(n,n.event,o,r):n.contains(r,p)?1:0,l.push(s)}}while(++a<c);l.sort(n.sort),a=0;do{(s=l[a])&&(s.winner&&u.drop.length<n.multi?(s.active[h]||s.anyactive||(!1!==e.drag.hijack(n.event,"dropstart",i,h,s.elem)[0]?(s.active[h]=1,s.anyactive+=1):s.winner=0),s.winner&&u.drop.push(s.elem)):s.active[h]&&1==s.anyactive&&(e.drag.hijack(n.event,"dropend",i,h,s.elem),s.active[h]=0,s.anyactive-=1))}while(++a<c)}}while(++h<f);n.last&&p[0]==n.last.pageX&&p[1]==n.last.pageY?delete n.timer:n.timer=setTimeout((function(){n.tolerate(i)}),n.delay),n.last=n.event}};e.dropinit=e.dropstart=e.dropend=n}(n(71))},function(t,e,n){var i=n(71);
/*!
 * jQuery Form Plugin
 * version: 3.45.0-2013.10.17
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */!function(t){"use strict";var e={};e.fileapi=void 0!==t("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var n=!!t.fn.prop;function i(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(n))}function a(e){var n=e.target,i=t(n);if(!i.is("[type=submit],[type=image]")){var a=i.closest("[type=submit]");if(0===a.length)return;n=a[0]}var r=this;if(r.clk=n,"image"==n.type)if(void 0!==e.offsetX)r.clk_x=e.offsetX,r.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=i.offset();r.clk_x=e.pageX-o.left,r.clk_y=e.pageY-o.top}else r.clk_x=e.pageX-n.offsetLeft,r.clk_y=e.pageY-n.offsetTop;setTimeout((function(){r.clk=r.clk_x=r.clk_y=null}),100)}function r(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}t.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(i){if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var a,o,s,l=this;"function"==typeof i?i={success:i}:void 0===i&&(i={}),a=i.type||this.attr2("method"),(s=(s="string"==typeof(o=i.url||this.attr2("action"))?t.trim(o):"")||window.location.href||"")&&(s=(s.match(/^([^#]+)/)||[])[1]),i=t.extend(!0,{url:s,success:t.ajaxSettings.success,type:a||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var c={};if(this.trigger("form-pre-serialize",[this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&!1===i.beforeSerialize(this,i))return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=i.traditional;void 0===d&&(d=t.ajaxSettings.traditional);var u,h=[],f=this.formToArray(i.semantic,h);if(i.data&&(i.extraData=i.data,u=t.param(i.data,d)),i.beforeSubmit&&!1===i.beforeSubmit(f,this,i))return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=t.param(f,d);u&&(p=p?p+"&"+u:u),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+p,i.data=null):i.data=p;var m=[];if(i.resetForm&&m.push((function(){l.resetForm()})),i.clearForm&&m.push((function(){l.clearForm(i.includeHidden)})),!i.dataType&&i.target){var _=i.success||function(){};m.push((function(e){var n=i.replaceTarget?"replaceWith":"html";t(i.target)[n](e).each(_,arguments)}))}else i.success&&m.push(i.success);if(i.success=function(t,e,n){for(var a=i.context||this,r=0,o=m.length;r<o;r++)m[r].apply(a,[t,e,n||l,l])},i.error){var g=i.error;i.error=function(t,e,n){var a=i.context||this;g.apply(a,[t,e,n,l])}}if(i.complete){var v=i.complete;i.complete=function(t,e){var n=i.context||this;v.apply(n,[t,e,l])}}var y=t("input[type=file]:enabled",this).filter((function(){return""!==t(this).val()})).length>0,b="multipart/form-data",w=l.attr("enctype")==b||l.attr("encoding")==b,k=e.fileapi&&e.formdata;r("fileAPI :"+k);var x,S=(y||w)&&!k;!1!==i.iframe&&(i.iframe||S)?i.closeKeepAlive?t.get(i.closeKeepAlive,(function(){x=C(f)})):x=C(f):x=(y||w)&&k?function(e){for(var n=new FormData,r=0;r<e.length;r++)n.append(e[r].name,e[r].value);if(i.extraData){var o=function(e){var n,a,r=t.param(e,i.traditional).split("&"),o=r.length,s=[];for(n=0;n<o;n++)r[n]=r[n].replace(/\+/g," "),a=r[n].split("="),s.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return s}(i.extraData);for(r=0;r<o.length;r++)o[r]&&n.append(o[r][0],o[r][1])}i.data=null;var s=t.extend(!0,{},t.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:a||"POST"});i.uploadProgress&&(s.xhr=function(){var e=t.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",(function(t){var e=0,n=t.loaded||t.position,a=t.total;t.lengthComputable&&(e=Math.ceil(n/a*100)),i.uploadProgress(t,n,a,e)}),!1),e});s.data=null;var l=s.beforeSend;return s.beforeSend=function(t,e){i.formData?e.data=i.formData:e.data=n,l&&l.call(this,t,e)},t.ajax(s)}(f):t.ajax(i),l.removeData("jqxhr").data("jqxhr",x);for(var M=0;M<h.length;M++)h[M]=null;return this.trigger("form-submit-notify",[this,i]),this;function C(e){var o,s,c,d,u,f,p,m,_,g,v,y,b=l[0],w=t.Deferred();if(w.abort=function(t){m.abort(t)},e)for(s=0;s<h.length;s++)o=t(h[s]),n?o.prop("disabled",!1):o.removeAttr("disabled");if((c=t.extend(!0,{},t.ajaxSettings,i)).context=c.context||c,u="jqFormIO"+(new Date).getTime(),c.iframeTarget?(g=(f=t(c.iframeTarget)).attr2("name"))?u=g:f.attr2("name",u):(f=t('<iframe name="'+u+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";r("aborting upload... "+n),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(t){}f.attr("src",c.iframeSrc),m.error=n,c.error&&c.error.call(c.context,m,n,e),d&&t.event.trigger("ajaxError",[m,c,n]),c.complete&&c.complete.call(c.context,m,n)}},(d=c.global)&&0==t.active++&&t.event.trigger("ajaxStart"),d&&t.event.trigger("ajaxSend",[m,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,m,c))return c.global&&t.active--,w.reject(),w;if(m.aborted)return w.reject(),w;(_=b.clk)&&(g=_.name)&&!_.disabled&&(c.extraData=c.extraData||{},c.extraData[g]=_.value,"image"==_.type&&(c.extraData[g+".x"]=b.clk_x,c.extraData[g+".y"]=b.clk_y));var k=1,x=2;function S(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){r("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(n){r("cannot get iframe.contentDocument: "+n),e=t.document}return e}var M=t("meta[name=csrf-token]").attr("content"),C=t("meta[name=csrf-param]").attr("content");function T(){var e=l.attr2("target"),n=l.attr2("action");b.setAttribute("target",u),a&&!/post/i.test(a)||b.setAttribute("method","POST"),n!=c.url&&b.setAttribute("action",c.url),c.skipEncodingOverride||a&&!/post/i.test(a)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(y=setTimeout((function(){v=!0,A(k)}),c.timeout));var i=[];try{if(c.extraData)for(var o in c.extraData)c.extraData.hasOwnProperty(o)&&(t.isPlainObject(c.extraData[o])&&c.extraData[o].hasOwnProperty("name")&&c.extraData[o].hasOwnProperty("value")?i.push(t('<input type="hidden" name="'+c.extraData[o].name+'">').val(c.extraData[o].value).appendTo(b)[0]):i.push(t('<input type="hidden" name="'+o+'">').val(c.extraData[o]).appendTo(b)[0]));c.iframeTarget||f.appendTo("body"),p.attachEvent?p.attachEvent("onload",A):p.addEventListener("load",A,!1),setTimeout((function t(){try{var e=S(p).readyState;r("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(t){r("Server abort: ",t," (",t.name,")"),A(x),y&&clearTimeout(y),y=void 0}}),15);try{b.submit()}catch(t){document.createElement("form").submit.apply(b)}}finally{b.setAttribute("action",n),e?b.setAttribute("target",e):l.removeAttr("target"),t(i).remove()}}C&&M&&(c.extraData=c.extraData||{},c.extraData[C]=M),c.forceSync?T():setTimeout(T,10);var j,O,L,D=50;function A(e){if(!m.aborted&&!L){if((O=S(p))||(r("cannot access response document"),e=x),e===k&&m)return m.abort("timeout"),void w.reject(m,"timeout");if(e==x&&m)return m.abort("server abort"),void w.reject(m,"error","server abort");if(O&&O.location.href!=c.iframeSrc||v){p.detachEvent?p.detachEvent("onload",A):p.removeEventListener("load",A,!1);var n,i="success";try{if(v)throw"timeout";var a="xml"==c.dataType||O.XMLDocument||t.isXMLDoc(O);if(r("isXml="+a),!a&&window.opera&&(null===O.body||!O.body.innerHTML)&&--D)return r("requeing onLoad callback, DOM not available"),void setTimeout(A,250);var o=O.body?O.body:O.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=O.XMLDocument?O.XMLDocument:O,a&&(c.dataType="xml"),m.getResponseHeader=function(t){return{"content-type":c.dataType}[t.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var s=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(s);if(l||c.textarea){var u=O.getElementsByTagName("textarea")[0];if(u)m.responseText=u.value,m.status=Number(u.getAttribute("status"))||m.status,m.statusText=u.getAttribute("statusText")||m.statusText;else if(l){var h=O.getElementsByTagName("pre")[0],_=O.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:_&&(m.responseText=_.textContent?_.textContent:_.innerText)}}else"xml"==s&&!m.responseXML&&m.responseText&&(m.responseXML=E(m.responseText));try{j=P(m,s,c)}catch(t){i="parsererror",m.error=n=t||i}}catch(t){r("error caught: ",t),i="error",m.error=n=t||i}m.aborted&&(r("upload aborted"),i=null),m.status&&(i=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===i?(c.success&&c.success.call(c.context,j,"success",m),w.resolve(m.responseText,"success",m),d&&t.event.trigger("ajaxSuccess",[m,c])):i&&(void 0===n&&(n=m.statusText),c.error&&c.error.call(c.context,m,i,n),w.reject(m,"error",n),d&&t.event.trigger("ajaxError",[m,c,n])),d&&t.event.trigger("ajaxComplete",[m,c]),d&&!--t.active&&t.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,m,i),L=!0,c.timeout&&clearTimeout(y),setTimeout((function(){c.iframeTarget?f.attr("src",c.iframeSrc):f.remove(),m.responseXML=null}),100)}}}var E=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},I=t.parseJSON||function(t){return window.eval("("+t+")")},P=function(e,n,i){var a=e.getResponseHeader("content-type")||"",r="xml"===n||!n&&a.indexOf("xml")>=0,o=r?e.responseXML:e.responseText;return r&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(o=i.dataFilter(o,n)),"string"==typeof o&&("json"===n||!n&&a.indexOf("json")>=0?o=I(o):("script"===n||!n&&a.indexOf("javascript")>=0)&&t.globalEval(o)),o};return w}},t.fn.ajaxForm=function(e){if((e=e||{}).delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!t.isReady&&n.s?(r("DOM not ready, queuing ajaxForm"),t((function(){t(n.s,n.c).ajaxForm(e)})),this):(r("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,e,i).on("click.form-plugin",this.selector,e,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,i).bind("click.form-plugin",e,a)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(n,i){var a=[];if(0===this.length)return a;var r,o,s,l,c,d,u,h=this[0],f=n?h.getElementsByTagName("*"):h.elements;if(!f)return a;for(r=0,d=f.length;r<d;r++)if((s=(c=f[r]).name)&&!c.disabled)if(n&&h.clk&&"image"==c.type)h.clk==c&&(a.push({name:s,value:t(c).val(),type:c.type}),a.push({name:s+".x",value:h.clk_x},{name:s+".y",value:h.clk_y}));else if((l=t.fieldValue(c,!0))&&l.constructor==Array)for(i&&i.push(c),o=0,u=l.length;o<u;o++)a.push({name:s,value:l[o]});else if(e.fileapi&&"file"==c.type){i&&i.push(c);var p=c.files;if(p.length)for(o=0;o<p.length;o++)a.push({name:s,value:p[o],type:c.type});else a.push({name:s,value:"",type:c.type})}else null!=l&&(i&&i.push(c),a.push({name:s,value:l,type:c.type,required:c.required}));if(!n&&h.clk){var m=t(h.clk),_=m[0];(s=_.name)&&!_.disabled&&"image"==_.type&&(a.push({name:s,value:m.val()}),a.push({name:s+".x",value:h.clk_x},{name:s+".y",value:h.clk_y}))}return a},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each((function(){var i=this.name;if(i){var a=t.fieldValue(this,e);if(a&&a.constructor==Array)for(var r=0,o=a.length;r<o;r++)n.push({name:i,value:a[r]});else null!=a&&n.push({name:this.name,value:a})}})),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,a=this.length;i<a;i++){var r=this[i],o=t.fieldValue(r,e);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?t.merge(n,o):n.push(o))}return n},t.fieldValue=function(e,n){var i=e.name,a=e.type,r=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==r&&-1==e.selectedIndex))return null;if("select"==r){var o=e.selectedIndex;if(o<0)return null;for(var s=[],l=e.options,c="select-one"==a,d=c?o+1:l.length,u=c?o:0;u<d;u++){var h=l[u];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return f;s.push(f)}}return s}return t(e).val()},t.fn.clearForm=function(e){return this.each((function(){t("input,select,textarea",this).clearFields(e)}))},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,a=this.tagName.toLowerCase();n.test(i)||"textarea"==a?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==a?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(i)||"string"==typeof e&&t(this).is(e))&&(this.value="")}))},t.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each((function(){this.disabled=!t}))},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}}))},t.fn.ajaxSubmit.debug=!1}(void 0!==i?i:window.Zepto)},function(t,e,n){var i=n(71);window.jQuery&&function(t){if(!t.support.opacity&&!t.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}t.fn.rating=function(e){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var n=arguments;return this.each((function(){t.fn.rating.apply(t(this),n)}))}return t.fn.rating[arguments[0]].apply(this,t.makeArray(arguments).slice(1)||[]),this}e=t.extend({},t.fn.rating.options,e||{});return t.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each((function(){var n,i=t(this),a=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),r=t(this.form||document.body),o=r.data("rating");o&&o.call==t.fn.rating.calls||(o={count:0,call:t.fn.rating.calls});var s=o[a]||r.data("rating"+a);s&&(n=s.data("rating")),s&&n?n.count++:((n=t.extend({},e||{},(t.metadata?i.metadata():t.meta?i.data():null)||{},{count:0,stars:[],inputs:[]})).serial=o.count++,s=t('<span class="star-rating-control"/>'),i.before(s),s.addClass("rating-to-be-drawn"),(i.attr("disabled")||i.hasClass("disabled"))&&(n.readOnly=!0),i.hasClass("required")&&(n.required=!0),s.append(n.cancel=t('<div class="rating-cancel"><a title="'+n.cancel+'">'+n.cancelValue+"</a></div>").on("mouseover",(function(){t(this).rating("drain"),t(this).addClass("star-rating-hover")})).on("mouseout",(function(){t(this).rating("draw"),t(this).removeClass("star-rating-hover")})).on("click",(function(){t(this).rating("select")})).data("rating",n)));var l=t('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+n.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(s.append(l),this.id&&l.attr("id",this.id),this.className&&l.addClass(this.className),n.half&&(n.split=2),"number"==typeof n.split&&n.split>0){var c=(t.fn.width?l.width():0)||n.starWidth,d=n.count%n.split,u=Math.floor(c/n.split);l.width(u).find("a").css({"margin-left":"-"+d*u+"px"})}n.readOnly?l.addClass("star-rating-readonly"):l.addClass("star-rating-live").on("mouseover",(function(){t(this).rating("fill"),t(this).rating("focus")})).on("mouseout",(function(){t(this).rating("draw"),t(this).rating("blur")})).on("click",(function(){t(this).rating("select")})),this.checked&&(n.current=l),"A"==this.nodeName&&t(this).hasClass("selected")&&(n.current=l),i.hide(),i.on("change.rating",(function(e){if(e.selfTriggered)return!1;t(this).rating("select")})),l.data("rating.input",i.data("rating.star",l)),n.stars[n.stars.length]=l[0],n.inputs[n.inputs.length]=i[0],n.rater=o[a]=s,n.context=r,i.data("rating",n),s.data("rating",n),l.data("rating",n),r.data("rating",o),r.data("rating"+a,s)})),t(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},t.extend(t.fn.rating,{calls:0,focus:function(){var e=this.data("rating");if(!e)return this;if(!e.focus)return this;var n=t(this).data("rating.input")||t("INPUT"==this.tagName?this:null);e.focus&&e.focus.apply(n[0],[n.val(),t("a",n.data("rating.star"))[0]])},blur:function(){var e=this.data("rating");if(!e)return this;if(!e.blur)return this;var n=t(this).data("rating.input")||t("INPUT"==this.tagName?this:null);e.blur&&e.blur.apply(n[0],[n.val(),t("a",n.data("rating.star"))[0]])},fill:function(){var t=this.data("rating");if(!t)return this;t.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+t.serial).addClass("star-rating-hover"))},drain:function(){var t=this.data("rating");if(!t)return this;t.readOnly||t.rater.children().filter(".rater-"+t.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var e=this.data("rating");if(!e)return this;this.rating("drain");var n=t(e.current),i=n.length?n.prevAll().addBack().filter(".rater-"+e.serial):null;i&&i.addClass("star-rating-on"),e.cancel[e.readOnly||e.required?"hide":"show"](),this.siblings()[e.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(e,n){var i=this.data("rating");if(!i)return this;if(!i.readOnly){if(i.current=null,void 0!==e||this.length>1){if("number"==typeof e)return t(i.stars[e]).rating("select",void 0,n);if("string"==typeof e)return t.each(i.stars,(function(){t(this).data("rating.input").val()==e&&t(this).rating("select",void 0,n)})),this}else i.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+i.serial)?this:null;this.data("rating",i),this.rating("draw");var a=t(i.current?i.current.data("rating.input"):null),r=t(i.inputs).filter(":checked");return t(i.inputs).not(a).prop("checked",!1),a.prop("checked",!0),t(a.length?a:r).trigger({type:"change",selfTriggered:!0}),(n||null==n)&&i.callback&&i.callback.apply(a[0],[a.val(),t("a",i.current)[0]]),this}},readOnly:function(e,n){var i=this.data("rating");if(!i)return this;i.readOnly=!(!e&&null!=e),n?t(i.inputs).attr("disabled","disabled"):t(i.inputs).removeAttr("disabled"),this.data("rating",i),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),t.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},t((function(){t("input[type=radio].star").rating()}))}(i)},function(t,e,n){var i,a=n(71);void 0===(i=a).fn.each2&&i.extend(i.fn,{each2:function(t){for(var e=i([0]),n=-1,a=this.length;++n<a&&(e.context=e[0]=this[n])&&!1!==t.call(e[0],n,e););return this}}),function(t,e){"use strict";if(window.Select2===e){var n,i,a,r,o,s,l,c,d={x:0,y:0},u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case u.SHIFT:case u.CTRL:case u.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return(t=t.which?t.which:t)>=112&&t<=123}},h="<div class='select2-measure-scrollbar'></div>",f={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};s=t(document),c=1,r=function(){return c++},n=A(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var i,a;this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+r()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=t("body"),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(L(n.containerCss,this.opts.element)),this.container.addClass(L(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",k),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(L(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",k),this.results=i=this.container.find(".select2-results"),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",k),this.results.on("mousemove",(function(n){var i=d;i!==e&&i.x===n.pageX&&i.y===n.pageY||t(n.target).trigger("mousemove-filtered",n)})),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind((function(t){this._touchEvent=!0,this.highlightUnderEvent(t)}))),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(t,e){var n=w(t,(function(t){e.trigger("scroll-debounced",t)}));e.on("scroll",(function(t){_(t.target,e.get())>=0&&n(t)}))}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",(function(t){t.stopPropagation()})),t(this.dropdown).on("change",".select2-input",(function(t){t.stopPropagation()})),t.fn.mousewheel&&i.mousewheel((function(t,e,n,a){var r=i.scrollTop();a>0&&r-a<=0?(i.scrollTop(0),k(t)):a<0&&i.get(0).scrollHeight-i.scrollTop()+a<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),k(t))})),b(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",(function(){a.addClass("select2-focused")})),a.on("blur",(function(){a.removeClass("select2-focused")})),this.dropdown.on("mouseup",".select2-results",this.bind((function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(t){t.stopPropagation()})),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var o=n.element.prop("disabled");o===e&&(o=!1),this.enable(!o);var s=n.element.prop("readonly");s===e&&(s=!1),this.readonly(s),l=l||function(){var e=t(h);e.appendTo("body");var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,n=t.data("select2"),i=this;this.close(),t.length&&t[0].detachEvent&&t.each((function(){this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==e&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),D.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:g(t.attr("locked"),"locked")||g(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var i,a,o,s,l=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=a=n.element),a&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(n=t.extend({},{populateResults:function(i,a,o){var s,c=this.opts.id,d=this.liveRegion;(s=function(i,a,u){var h,f,p,m,_,g,v,y,b,w,k=[];for(h=0,f=(i=n.sortResults(i,a,o)).length;h<f;h+=1)m=!(_=!0===(p=i[h]).disabled)&&c(p)!==e,g=p.children&&p.children.length>0,(v=t("<li></li>")).addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(m?"select2-result-selectable":"select2-result-unselectable"),_&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(p)),v.attr("role","presentation"),(y=t(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+r()),y.attr("role","option"),(w=n.formatResult(p,y,o,l.opts.escapeMarkup))!==e&&(y.html(w),v.append(y)),g&&((b=t("<ul></ul>")).addClass("select2-result-sub"),s(p.children,b,u+1),v.append(b)),v.data("select2-data",p),k.push(v[0]);a.append(k),d.text(n.formatMatches(i.length))})(a,i,0)}},t.fn.select2.defaults,n)).id&&(o=n.id,n.id=function(t){return t[o]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(a?(n.query=this.bind((function(t){var n,a,r,o={results:[],more:!1},s=t.term;r=function(e,n){var i;e.is("option")?t.matcher(s,e.text(),e)&&n.push(l.optionToData(e)):e.is("optgroup")&&(i=l.optionToData(e),e.children().each2((function(t,e){r(e,i.children)})),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==e&&n.length>0&&(a=this.getPlaceholderOption())&&(n=n.not(a)),n.each2((function(t,e){r(e,o.results)})),t.callback(o)})),n.id=function(t){return t.id}):"query"in n||("ajax"in n?((s=n.element.data("ajax-url"))&&s.length>0&&(n.ajax.url=s),n.query=C.call(n.element,n.ajax)):"data"in n?n.query=T(n.data):"tags"in n&&(n.query=j(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),n.initSelection===e&&(n.initSelection=function(e,i){var a=[];t(v(e.val(),n.separator)).each((function(){var e={id:this,text:this},i=n.tags;t.isFunction(i)&&(i=i()),t(i).each((function(){if(g(this.id,e.id))return e=this,!1})),a.push(e)})),i(a)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,a=this;i.on("change.select2",this.bind((function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var t=i.prop("disabled");t===e&&(t=!1),this.enable(!t);var n=i.prop("readonly");n===e&&(n=!1),this.readonly(n),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(L(this.opts.containerCssClass,this.opts.element)),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(L(this.opts.dropdownCssClass,this.opts.element))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",a._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(e){t.each(e,a._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,n,i,a,r,o=this.dropdown,s=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),h=t(window),f=h.width(),p=h.height(),m=h.scrollLeft()+f,_=h.scrollTop()+p,g=s.top+c,v=s.left,y=g+u<=_,b=s.top-u>=h.scrollTop(),w=o.outerWidth(!1),k=v+w<=m;o.hasClass("select2-drop-above")?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(o.hide(),s=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),m=h.scrollLeft()+f,_=h.scrollTop()+p,g=s.top+c,k=(v=s.left)+(w=o.outerWidth(!1))<=m,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=t(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),(w=o.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:l.width))>d?d=w:w=d,u=o.outerHeight(!1),k=v+w<=m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(g-=(e=this.body.offset()).top,v-=e.left),k||(v=s.left+this.container.outerWidth(!1)-w),a={left:v,width:d},n?(a.top=s.top-u,a.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(a.top=g,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=t.extend(a,L(this.opts.dropdownCss,this.opts.element)),o.css(a)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),s.on("mousemove.select2Event",(function(t){d.x=t.pageX,d.y=t.pageY})),!0)},opening:function(){var e,n=this.containerEventName,i="scroll."+n,a="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(e=t("#select2-drop-mask")).length&&((e=t(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",(function(n){p(e);var i,a=t("#select2-drop");a.length>0&&((i=a.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),n.preventDefault(),n.stopPropagation())}))),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each((function(){t(this).on(a+" "+i+" "+r,(function(t){o.opened()&&o.positionDropdown()}))}))},close:function(){if(this.opened()){var e=this.containerEventName,n="scroll."+e,i="resize."+e,a="orientationchange."+e;this.container.parents().add(window).each((function(){t(this).off(n).off(i).off(a)})),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),s.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return L(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,n,i,a,r,o,s,l,c=this.results;(n=this.highlight())<0||(0!=n?(e=this.findHighlightableChoices().find(".select2-result-label"),a=(l=((i=t(e[n])).offset()||{}).top||0)+i.outerHeight(!0),n===e.length-1&&(s=c.find("li.select2-more-results")).length>0&&(a=s.offset().top+s.outerHeight(!0)),a>(r=c.offset().top+c.outerHeight(!0))&&c.scrollTop(c.scrollTop()+(a-r)),(o=l-c.offset().top)<0&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+o)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var a=t(n[i+=e]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var n,i,a=this.findHighlightableChoices();if(0===arguments.length)return _(a.filter(".select2-highlighted")[0],a.get());e>=a.length&&(e=a.length-1),e<0&&(e=0),this.removeHighlight(),(n=t(a[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,e=t.find("li.select2-more-results"),n=this.resultsPage+1,i=this,a=this.search.val(),r=this.context;0!==e.length&&e.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(e.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:n,context:r,matcher:this.opts.matcher,callback:this.bind((function(o){i.opened()&&(i.opts.populateResults.call(this,t,o.results,{term:a,page:n,context:r}),i.postprocessResults(o,!1,!1),!0===o.more?(e.detach().appendTo(t).text(L(i.opts.formatLoadMore,i.opts.element,n+1)),window.setTimeout((function(){i.loadMoreIfNeeded()}),10)):e.remove(),i.positionDropdown(),i.resultsPage=n,i.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))}))}))},tokenize:function(){},updateResults:function(n){var i,a,r,o=this.search,s=this.results,l=this.opts,c=this,d=o.val(),u=t.data(this.container,"select2-last-term");if((!0===n||!u||!g(d,u))&&(t.data(this.container,"select2-last-term",d),!0===n||!1!==this.showSearchInput&&this.opened())){r=++this.queryCount;var h=this.getMaximumSelectionSize();if(!(h>=1&&(i=this.data(),t.isArray(i)&&i.length>=h&&O(l.formatSelectionTooBig,"formatSelectionTooBig"))))return o.val().length<l.minimumInputLength?(O(l.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+L(l.formatInputTooShort,l.element,o.val(),l.minimumInputLength)+"</li>"):p(""),void(n&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&o.val().length>l.maximumInputLength?O(l.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+L(l.formatInputTooLong,l.element,o.val(),l.maximumInputLength)+"</li>"):p(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&p("<li class='select2-searching'>"+L(l.formatSearching,l.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),(a=this.tokenize())!=e&&null!=a&&o.val(a),this.resultsPage=1,l.query({element:l.element,term:o.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(i){var a;r==this.queryCount&&(this.opened()?i.hasError!==e&&O(l.formatAjaxError,"formatAjaxError")?p("<li class='select2-ajax-error'>"+L(l.formatAjaxError,l.element,i.jqXHR,i.textStatus,i.errorThrown)+"</li>"):(this.context=i.context===e?null:i.context,this.opts.createSearchChoice&&""!==o.val()&&(a=this.opts.createSearchChoice.call(c,o.val(),i.results))!==e&&null!==a&&c.id(a)!==e&&null!==c.id(a)&&0===t(i.results).filter((function(){return g(c.id(this),c.id(a))})).length&&this.opts.createSearchChoicePosition(i.results,a),0===i.results.length&&O(l.formatNoMatches,"formatNoMatches")?p("<li class='select2-no-results'>"+L(l.formatNoMatches,l.element,o.val())+"</li>"):(s.empty(),c.opts.populateResults.call(this,s,i.results,{term:o.val(),page:this.resultsPage,context:null}),!0===i.more&&O(l.formatLoadMore,"formatLoadMore")&&(s.append("<li class='select2-more-results'>"+l.escapeMarkup(L(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){c.loadMoreIfNeeded()}),10)),this.postprocessResults(i,n),f(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))}))})));p("<li class='select2-selection-limit'>"+L(l.formatSelectionTooBig,l.element,h)+"</li>")}function f(){o.removeClass("select2-active"),c.positionDropdown(),s.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(s.text()):c.liveRegion.text(c.opts.formatMatches(s.find(".select2-result-selectable").length))}function p(t){s.html(t),f()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var t;(t=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var e,n=t[0],i=t.val().length;t.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((e=n.createTextRange()).collapse(!1),e.select()))}),0)},selectHighlighted:function(t){if(this._touchMoved)this.clearTouchMoved();else{var e=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(e),this.onSelect(n,t)):t&&t.noFocus&&this.close()}},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,i,a,r,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==e)for(r=0,o=(i=n.split(";")).length;r<o;r+=1)if(null!==(a=i[r].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&a.length>=1)return a[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),i=A(n,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,a;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((i=n.createTextRange()).collapse(!1),i.select()):n.setSelectionRange&&(a=this.search.val().length,n.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),D.call(this,"selection","focusser")},initContainer:function(){var e,n,i=this.container,a=this.dropdown,o=r();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),n=t("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode)if(t.which!==u.PAGE_UP&&t.which!==u.PAGE_DOWN)switch(t.which){case u.UP:case u.DOWN:return this.moveHighlight(t.which===u.UP?-1:1),void k(t);case u.ENTER:return this.selectHighlighted(),void k(t);case u.TAB:return void this.selectHighlighted({noFocus:!0});case u.ESC:return this.cancel(t),void k(t)}else k(t)}))),this.search.on("blur",this.bind((function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&t.which!==u.TAB&&!u.isControl(t)&&!u.isFunctionKey(t)&&t.which!==u.ESC){if(!1!==this.opts.openOnEnter||t.which!==u.ENTER){if(t.which==u.DOWN||t.which==u.UP||t.which==u.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void k(t)}return t.which==u.DELETE||t.which==u.BACKSPACE?(this.opts.allowClear&&this.clear(),void k(t)):void 0}k(t)}}))),b(this.focusser),this.focusser.on("keyup-change input",this.bind((function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}}))),e.on("mousedown touchstart","abbr",this.bind((function(t){var e;this.isInterfaceEnabled()&&(this.clear(),(e=t).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection.focus())}))),e.on("mousedown touchstart",this.bind((function(n){p(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),k(n)}))),a.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),e.on("focus",this.bind((function(t){k(t)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var n=this.selection.data("select2-data");if(n){var i=t.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var a=this.getPlaceholderOption();this.opts.element.val(a?a.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(n,t.search.val()))}))}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==e&&((t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val())},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find("option").filter((function(){return this.selected&&!this.disabled}));e(n.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var a=n.val(),r=null;e.query({matcher:function(t,n,i){var o=g(a,e.id(i));return o&&(r=i),o},callback:t.isFunction(i)?function(){i(r)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,n,i){var a=0,r=this;if(this.findHighlightableChoices().each2((function(t,e){if(g(r.id(e.data("select2-data")),r.opts.element.val()))return a=t,!1})),!1!==i&&(!0===n&&a>=0?this.highlight(a):this.highlight(0)),!0===n){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(function e(n){var i=0;return t.each(n,(function(t,n){n.children?i+=e(n.children):i++})),i}(e.results)>=o)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var n,i,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),a.empty(),null!==t&&(n=this.opts.formatSelection(t,a,this.opts.escapeMarkup)),n!==e&&a.append(n),(i=this.opts.formatSelectionCssClass(t,a))!==e&&a.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,n=!1,i=null,a=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(t).find("option").filter((function(){return this.selected})).each2((function(t,e){return i=a.optionToData(e),!1})),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:r});else{if(!t&&0!==t)return void this.clear(n);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,(function(t){a.opts.element.val(t?a.id(t):""),a.updateSelection(t),a.setPlaceholder(),n&&a.triggerChange({added:t,removed:r})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var n,i=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==e&&(n=null),n;arguments.length>1&&(i=arguments[1]),t?(n=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:n})):this.clear(i)}}),a=A(n,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(t,e){i.push(n.optionToData(e))})),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var a=v(n.val(),e.separator),r=[];e.query({matcher:function(n,i,o){var s=t.grep(a,(function(t){return g(t,e.id(o))})).length;return s&&r.push(o),s},callback:t.isFunction(i)?function(){for(var t=[],n=0;n<a.length;n++)for(var o=a[n],s=0;s<r.length;s++){var l=r[s];if(g(o,e.id(l))){t.push(l),r.splice(s,1);break}}i(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),D.call(this,"searchContainer","selection")},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(e){i.search[0].focus(),i.selectChoice(t(this))})),this.search.attr("id","s2id_autogen"+r()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(n){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),a=i.prev(".select2-search-choice:not(.select2-locked)"),r=i.next(".select2-search-choice:not(.select2-locked)"),o=function(e){var n=0,i=0;if("selectionStart"in(e=t(e)[0]))n=e.selectionStart,i=e.selectionEnd-n;else if("selection"in document){e.focus();var a=document.selection.createRange();i=document.selection.createRange().text.length,a.moveStart("character",-e.value.length),n=a.text.length-i}return{offset:n,length:i}}(this.search);if(i.length&&(n.which==u.LEFT||n.which==u.RIGHT||n.which==u.BACKSPACE||n.which==u.DELETE||n.which==u.ENTER)){var s=i;return n.which==u.LEFT&&a.length?s=a:n.which==u.RIGHT?s=r.length?r:null:n.which===u.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),s=a.length?a:r):n.which==u.DELETE?this.unselect(i.first())&&(this.search.width(10),s=r.length?r:null):n.which==u.ENTER&&(s=null),this.selectChoice(s),k(n),void(s&&s.length||this.open())}if((n.which===u.BACKSPACE&&1==this.keydowns||n.which==u.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void k(n);if(this.selectChoice(null),this.opened())switch(n.which){case u.UP:case u.DOWN:return this.moveHighlight(n.which===u.UP?-1:1),void k(n);case u.ENTER:return this.selectHighlighted(),void k(n);case u.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case u.ESC:return this.cancel(n),void k(n)}if(n.which!==u.TAB&&!u.isControl(n)&&!u.isFunctionKey(n)&&n.which!==u.BACKSPACE&&n.which!==u.ESC){if(n.which===u.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==u.PAGE_UP&&n.which!==u.PAGE_DOWN||k(n),n.which===u.ENTER&&k(n)}}}))),this.search.on("keyup",this.bind((function(t){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())}))}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var n=[],i=[],a=this;t(e).each((function(){_(a.id(this),n)<0&&(n.push(a.id(this)),i.push(this))})),e=i,this.selection.find(".select2-search-choice").remove(),t(e).each((function(){a.addSelectedChoice(this)})),a.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,n){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.moveHighlight(1),!this.select&&this.opts.closeOnSelect||this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.clearSearch(),this.updateResults(),this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,a,r=!n.locked,o=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?o:s,c=this.id(n),d=this.getVal();(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=e&&l.find("div").replaceWith("<div>"+i+"</div>"),(a=this.opts.formatSelectionCssClass(n,l.find("div")))!=e&&l.addClass(a),r&&l.find(".select2-search-choice-close").on("mousedown",k).on("click dblclick",this.bind((function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),k(e),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(e){var n,i,a=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(n=e.data("select2-data")){var r=t.Event("select2-removing");if(r.val=this.id(n),r.choice=n,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(i=_(this.id(n),a))>=0;)a.splice(i,1),this.setVal(a),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(t,e,n){var i=this.getVal(),a=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),o=this;a.each2((function(t,e){_(o.id(e.data("select2-data")),i)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))})),r.each2((function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&o.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&O(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+L(o.opts.formatNoMatches,o.opts.element,o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-y(this.search)},resizeSearch:function(){var e,n,i,a,r=y(this.search);e=function(e){if(!o){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);(o=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),t("body").append(o)}return o.text(e.val()),o.width()}(this.search)+10,n=this.search.offset().left,(a=(i=this.selection.width())-(n-this.selection.offset().left)-r)<e&&(a=i-r),a<40&&(a=i-r),a<=0&&(a=e),this.search.width(Math.floor(a))},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:v(t=this.opts.element.val(),this.opts.separator)},setVal:function(e){var n;this.select?this.select.val(e):(n=[],t(e).each((function(){_(this,n)<0&&n.push(this)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(t,e){e=e.slice(0),t=t.slice(0);for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)g(this.opts.id(e[n]),this.opts.id(t[i]))&&(e.splice(n,1),n>0&&n--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(n,i){var a,r=this;if(0===arguments.length)return this.getVal();if((a=this.data()).length||(a=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:a}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(a,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(e){var n=t.map(e,r.id);r.setVal(n),r.updateSelection(e),r.clearSearch(),i&&r.triggerChange(r.buildChangeDetails(a,r.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){e.push(n.opts.id(t(this).data("select2-data")))})),this.setVal(e),this.triggerChange()},data:function(e,n){var i,a,r=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return t(this).data("select2-data")})).get();a=this.data(),e||(e=[]),i=t.map(e,(function(t){return r.opts.id(t)})),this.setVal(i),this.updateSelection(e),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(a,this.data()))}}),t.fn.select2=function(){var n,i,a,r,o,s=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],d=["val","data"],u={search:"externalSearch"};return this.each((function(){if(0===s.length||"object"==typeof s[0])(n=0===s.length?{}:t.extend({},s[0])).element=t(this),"select"===n.element.get(0).tagName.toLowerCase()?o=n.element.prop("multiple"):(o=n.multiple||!1,"tags"in n&&(n.multiple=o=!0)),(i=o?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof s[0])throw"Invalid arguments to select2 plugin: "+s;if(_(s[0],l)<0)throw"Unknown method: "+s[0];if(r=e,(i=t(this).data("select2"))===e)return;if("container"===(a=s[0])?r=i.container:"dropdown"===a?r=i.dropdown:(u[a]&&(a=u[a]),r=i[a].apply(i,s.slice(1))),_(s[0],c)>=0||_(s[0],d)>=0&&1==s.length)return!1}})),r===e?this:r},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var a=[];return S(t.text,n.term,a,i),a.join("")},formatSelection:function(t,n,i){return t?i(t.text):e},sortResults:function(t,e,n){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,n){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},matcher:function(t,e){return m(""+e).toUpperCase().indexOf(m(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(t,n,i,a){var r,o,s,l,c,d=t,u=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return e;for(;;){for(o=-1,s=0,l=a.tokenSeparators.length;s<l&&(c=a.tokenSeparators[s],!((o=t.indexOf(c))>=0));s++);if(o<0)break;if(r=t.substring(0,o),t=t.substring(o+c.length),r.length>0&&(r=a.createSearchChoice.call(this,r,n))!==e&&null!==r&&a.id(r)!==e&&null!==a.id(r)){for(u=!1,s=0,l=n.length;s<l;s++)if(g(a.id(r),a.id(n[s]))){u=!0;break}u||i(r)}}return d!==t?t:void 0},escapeMarkup:M,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,n){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(t.opts.minimumResultsForSearch<0)}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,n){return"Loading failed"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results…"},formatSearching:function(){return"Searching…"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:C,local:T,tags:j},util:{debounce:w,markMatch:S,escapeMarkup:M,stripDiacritics:m},class:{abstract:n,single:i,multi:a}}}function p(e){var n=t(document.createTextNode(""));e.before(n),n.before(e),n.remove()}function m(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return f[t]||t}))}function _(t,e){for(var n=0,i=e.length;n<i;n+=1)if(g(t,e[n]))return n;return-1}function g(t,n){return t===n||t!==e&&n!==e&&(null!==t&&null!==n&&(t.constructor===String?t+""==n+"":n.constructor===String&&n+""==t+""))}function v(e,n){var i,a,r;if(null===e||e.length<1)return[];for(a=0,r=(i=e.split(n)).length;a<r;a+=1)i[a]=t.trim(i[a]);return i}function y(t){return t.outerWidth(!1)-t.width()}function b(n){var i="keyup-change-value";n.on("keydown",(function(){t.data(n,i)===e&&t.data(n,i,n.val())})),n.on("keyup",(function(){var a=t.data(n,i);a!==e&&n.val()!==a&&(t.removeData(n,i),n.trigger("keyup-change"))}))}function w(t,n,i){var a;return i=i||e,function(){var e=arguments;window.clearTimeout(a),a=window.setTimeout((function(){n.apply(i,e)}),t)}}function k(t){t.preventDefault(),t.stopPropagation()}function x(e,n,i){var a,r,o=[];(a=t.trim(e.attr("class")))&&t((a=""+a).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&o.push(this)})),(a=t.trim(n.attr("class")))&&t((a=""+a).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(r=i(this))&&o.push(r)})),e.attr("class",o.join(" "))}function S(t,e,n,i){var a=m(t.toUpperCase()).indexOf(m(e.toUpperCase())),r=e.length;a<0?n.push(i(t)):(n.push(i(t.substring(0,a))),n.push("<span class='select2-match'>"),n.push(i(t.substring(a,a+r))),n.push("</span>"),n.push(i(t.substring(a+r,t.length))))}function M(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))}function C(n){var i,a=null,r=n.quietMillis||100,o=n.url,s=this;return function(l){window.clearTimeout(i),i=window.setTimeout((function(){var i=n.data,r=o,c=n.transport||t.fn.select2.ajaxDefaults.transport,d={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||e,dataType:n.dataType||"json"},u=t.extend({},t.fn.select2.ajaxDefaults.params,d);i=i?i.call(s,l.term,l.page,l.context):null,r="function"==typeof r?r.call(s,l.term,l.page,l.context):r,a&&"function"==typeof a.abort&&a.abort(),n.params&&(t.isFunction(n.params)?t.extend(u,n.params.call(s)):t.extend(u,n.params)),t.extend(u,{url:r,dataType:n.dataType,data:i,success:function(t){var e=n.results(t,l.page,l);l.callback(e)},error:function(t,e,n){var i={hasError:!0,jqXHR:t,textStatus:e,errorThrown:n};l.callback(i)}}),a=c.call(s,u)}),r)}}function T(e){var n,i,a=e,r=function(t){return""+t.text};t.isArray(a)&&(a={results:i=a}),!1===t.isFunction(a)&&(i=a,a=function(){return i});var o=a();return o.text&&(r=o.text,t.isFunction(r)||(n=o.text,r=function(t){return t[n]})),function(e){var n,i=e.term,o={results:[]};""!==i?(n=function(a,o){var s,l;if((a=a[0]).children){for(l in s={},a)a.hasOwnProperty(l)&&(s[l]=a[l]);s.children=[],t(a.children).each2((function(t,e){n(e,s.children)})),(s.children.length||e.matcher(i,r(s),a))&&o.push(s)}else e.matcher(i,r(a),a)&&o.push(a)},t(a().results).each2((function(t,e){n(e,o.results)})),e.callback(o)):e.callback(a())}}function j(n){var i=t.isFunction(n);return function(a){var r=a.term,o={results:[]},s=i?n(a):n;t.isArray(s)&&(t(s).each((function(){var t=this.text!==e,n=t?this.text:this;(""===r||a.matcher(r,n))&&o.results.push(t?this:{id:this,text:this})})),a.callback(o))}}function O(e,n){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(n+" must be a string, function, or falsy value")}function L(e,n){if(t.isFunction(e)){var i=Array.prototype.slice.call(arguments,2);return e.apply(n,i)}return e}function D(){var e=this;t.each(arguments,(function(t,n){e[n].remove(),e[n]=null}))}function A(e,n){var i=function(){};return(i.prototype=new e).constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}}(a)},function(t,e,n){var i,a,r,o,s,l=n(71);
/*! jQuery UI - v1.9.1 - 2012-10-29
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */!function(t,e){function n(e,n){var a,r,o,s=e.nodeName.toLowerCase();return"area"===s?(r=(a=e.parentNode).name,!(!e.href||!r||"map"!==a.nodeName.toLowerCase())&&(!!(o=t("img[usemap=#"+r+"]")[0])&&i(o))):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s&&e.href||n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter((function(){return"hidden"===t.css(this,"visibility")})).length}var a=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,n){return"number"==typeof e?this.each((function(){var i=this;setTimeout((function(){t(i).focus(),n&&n.call(i)}),e)})):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,a,r=t(this[0]);r.length&&r[0]!==document;){if(("absolute"===(i=r.css("position"))||"relative"===i||"fixed"===i)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++a)}))},removeUniqueId:function(){return this.each((function(){r.test(this.id)&&t(this).removeAttr("id")}))}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],(function(n,i){function a(e,n,i,a){return t.each(r,(function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(n-=parseFloat(t.css(e,"margin"+this))||0)})),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?s["inner"+i].call(this):this.each((function(){t(this).css(o,a(this,n)+"px")}))},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?s["outer"+i].call(this,e):this.each((function(){t(this).css(o,a(this,e,!0,n)+"px")}))}})),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(n){return!!t.data(n,e)}})):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(e,!a)}}),t((function(){var e=document.body,n=e.appendChild(n=document.createElement("div"));n.offsetHeight,t.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===n.offsetHeight,t.support.selectstart="onselectstart"in n,e.removeChild(n).style.display="none"})),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];t.ui.ie=!!e.length,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(t){t.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var a,r=t.ui[e].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(t,e,n){var i,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)t.options[a[i][0]]&&a[i][1].apply(t.element,n)}},contains:t.contains,hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return e[i]>0||(e[i]=1,a=e[i]>0,e[i]=0,a)},isOverAxis:function(t,e,n){return t>e&&t<e+n},isOver:function(e,n,i,a,r,o){return t.ui.isOverAxis(e,i,r)&&t.ui.isOverAxis(n,a,o)}}))}(l),i=l,r=0,o=Array.prototype.slice,s=i.cleanData,i.cleanData=function(t){for(var e,n=0;null!=(e=t[n]);n++)try{i(e).triggerHandler("remove")}catch(t){}s(t)},i.widget=function(t,e,n){var a,r,o,s,l=t.split(".")[0];t=t.split(".")[1],a=l+"-"+t,n||(n=e,e=i.Widget),i.expr[":"][a.toLowerCase()]=function(t){return!!i.data(t,a)},i[l]=i[l]||{},r=i[l][t],o=i[l][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},i.extend(o,r,{version:n.version,_proto:i.extend({},n),_childConstructors:[]}),(s=new e).options=i.widget.extend({},s.options),i.each(n,(function(t,a){i.isFunction(a)&&(n[t]=function(){var n=function(){return e.prototype[t].apply(this,arguments)},i=function(n){return e.prototype[t].apply(this,n)};return function(){var t,e=this._super,r=this._superApply;return this._super=n,this._superApply=i,t=a.apply(this,arguments),this._super=e,this._superApply=r,t}}())})),o.prototype=i.widget.extend(s,{widgetEventPrefix:s.widgetEventPrefix||t},n,{constructor:o,namespace:l,widgetName:t,widgetBaseClass:a,widgetFullName:a}),r?(i.each(r._childConstructors,(function(t,e){var n=e.prototype;i.widget(n.namespace+"."+n.widgetName,o,e._proto)})),delete r._childConstructors):e._childConstructors.push(o),i.widget.bridge(t,o)},i.widget.extend=function(t){for(var e,n,r=o.call(arguments,1),s=0,l=r.length;s<l;s++)for(e in r[s])n=r[s][e],r[s].hasOwnProperty(e)&&n!==a&&(i.isPlainObject(n)?t[e]=i.isPlainObject(t[e])?i.widget.extend({},t[e],n):i.widget.extend({},n):t[e]=n);return t},i.widget.bridge=function(t,e){var n=e.prototype.widgetFullName;i.fn[t]=function(r){var s="string"==typeof r,l=o.call(arguments,1),c=this;return r=!s&&l.length?i.widget.extend.apply(null,[r].concat(l)):r,s?this.each((function(){var e,o=i.data(this,n);return o?i.isFunction(o[r])&&"_"!==r.charAt(0)?(e=o[r].apply(o,l))!==o&&e!==a?(c=e&&e.jquery?c.pushStack(e.get()):e,!1):void 0:i.error("no such method '"+r+"' for "+t+" widget instance"):i.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")})):this.each((function(){var t=i.data(this,n);t?t.option(r||{})._init():new e(r,this)})),c}},i.Widget=function(){},i.Widget._childConstructors=[],i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=i(e||this.defaultElement||this)[0],this.element=i(e),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=i.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=i(),this.hoverable=i(),this.focusable=i(),e!==this&&(i.data(e,this.widgetName,this),i.data(e,this.widgetFullName,this),this._on(this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=i(e.style?e.ownerDocument:e.document||e),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:i.noop,_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(i.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:i.noop,widget:function(){return this.element},option:function(t,e){var n,r,o,s=t;if(0===arguments.length)return i.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(r=s[t]=i.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)r[n[o]]=r[n[o]]||{},r=r[n[o]];if(t=n.pop(),e===a)return r[t]===a?null:r[t];r[t]=e}else{if(e===a)return this.options[t]===a?null:this.options[t];s[t]=e}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,e){var n,a=this;e?(t=n=i(t),this.bindings=this.bindings.add(t)):(e=t,t=this.element,n=this.widget()),i.each(e,(function(e,r){function o(){if(!0!==a.options.disabled&&!i(this).hasClass("ui-state-disabled"))return("string"==typeof r?a[r]:r).apply(a,arguments)}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||i.guid++);var s=e.match(/^(\w+)\s*(.*)$/),l=s[1]+a.eventNamespace,c=s[2];c?n.delegate(c,l,o):t.bind(l,o)}))},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var n=this;return setTimeout((function(){return("string"==typeof t?n[t]:t).apply(n,arguments)}),e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){i(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){i(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){i(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){i(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,n){var a,r,o=this.options[t];if(n=n||{},(e=i.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(a in r)a in e||(e[a]=r[a]);return this.element.trigger(e,n),!(i.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},i.each({show:"fadeIn",hide:"fadeOut"},(function(t,e){i.Widget.prototype["_"+t]=function(n,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?!0===a||"number"==typeof a?e:a.effect||e:t;"number"==typeof(a=a||{})&&(a={duration:a}),o=!i.isEmptyObject(a),a.complete=r,a.delay&&n.delay(a.delay),o&&i.effects&&(i.effects.effect[s]||!1!==i.uiBackCompat&&i.effects[s])?n[t](a):s!==t&&n[s]?n[s](a.duration,a.easing,r):n.queue((function(e){i(this)[t](),r&&r.call(n[0]),e()}))}})),!1!==i.uiBackCompat&&(i.Widget.prototype._getCreateOptions=function(){return i.metadata&&i.metadata.get(this.element[0])[this.widgetName]}),function(t,e){var n=!1;t(document).mouseup((function(t){n=!1})),t.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).bind("click."+this.widgetName,(function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,a=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(a&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0))}},_mouseMove:function(e){return!t.ui.ie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(t){return this.mouseDelayMet},_mouseStart:function(t){},_mouseDrag:function(t){},_mouseStop:function(t){},_mouseCapture:function(t){return!0}})}(l),function(t,e){function n(t,e,n){return[parseInt(t[0],10)*(f.test(t[0])?e/100:1),parseInt(t[1],10)*(f.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}t.ui=t.ui||{};var a,r=Math.max,o=Math.abs,s=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,f=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var n,i,r=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];return t("body").append(r),n=o.offsetWidth,r.css("overflow","scroll"),n===(i=o.offsetWidth)&&(i=r[0].clientWidth),r.remove(),a=n-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),a="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,r="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return p.apply(this,arguments);e=t.extend({},e);var a,l,f,m,_,g=t(e.of),v=t.position.getWithinInfo(e.within),y=t.position.getScrollInfo(v),b=g[0],w=(e.collision||"flip").split(" "),k={};return 9===b.nodeType?(l=g.width(),f=g.height(),m={top:0,left:0}):t.isWindow(b)?(l=g.width(),f=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):b.preventDefault?(e.at="left top",l=f=0,m={top:b.pageY,left:b.pageX}):(l=g.outerWidth(),f=g.outerHeight(),m=g.offset()),_=t.extend({},m),t.each(["my","at"],(function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):d.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=d.test(i[1])?i[1]:"center",t=u.exec(i[0]),n=u.exec(i[1]),k[this]=[t?t[0]:0,n?n[0]:0],e[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===e.at[0]?_.left+=l:"center"===e.at[0]&&(_.left+=l/2),"bottom"===e.at[1]?_.top+=f:"center"===e.at[1]&&(_.top+=f/2),a=n(k.at,l,f),_.left+=a[0],_.top+=a[1],this.each((function(){var c,d,u=t(this),h=u.outerWidth(),p=u.outerHeight(),b=i(this,"marginLeft"),x=i(this,"marginTop"),S=h+b+i(this,"marginRight")+y.width,M=p+x+i(this,"marginBottom")+y.height,C=t.extend({},_),T=n(k.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?C.left-=h:"center"===e.my[0]&&(C.left-=h/2),"bottom"===e.my[1]?C.top-=p:"center"===e.my[1]&&(C.top-=p/2),C.left+=T[0],C.top+=T[1],t.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),c={marginLeft:b,marginTop:x},t.each(["left","top"],(function(n,i){t.ui.position[w[n]]&&t.ui.position[w[n]][i](C,{targetWidth:l,targetHeight:f,elemWidth:h,elemHeight:p,collisionPosition:c,collisionWidth:S,collisionHeight:M,offset:[a[0]+T[0],a[1]+T[1]],my:e.my,at:e.at,within:v,elem:u})})),t.fn.bgiframe&&u.bgiframe(),e.using&&(d=function(t){var n=m.left-C.left,i=n+l-h,a=m.top-C.top,s=a+f-p,c={target:{element:g,left:m.left,top:m.top,width:l,height:f},element:{element:u,left:C.left,top:C.top,width:h,height:p},horizontal:i<0?"left":n>0?"right":"center",vertical:s<0?"top":a>0?"bottom":"middle"};l<h&&o(n+i)<l&&(c.horizontal="center"),f<p&&o(a+s)<f&&(c.vertical="middle"),r(o(n),o(i))>r(o(a),o(s))?c.important="horizontal":c.important="vertical",e.using.call(this,t,c)}),u.offset(t.extend(C,{using:d}))}))},t.ui.position={fit:{left:function(t,e){var n,i=e.within,a=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=t.left-e.collisionPosition.marginLeft,l=a-s,c=s+e.collisionWidth-o-a;e.collisionWidth>o?l>0&&c<=0?(n=t.left+l+e.collisionWidth-o-a,t.left+=l-n):t.left=c>0&&l<=0?a:l>c?a+o-e.collisionWidth:a:l>0?t.left+=l:c>0?t.left-=c:t.left=r(t.left-s,t.left)},top:function(t,e){var n,i=e.within,a=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,s=t.top-e.collisionPosition.marginTop,l=a-s,c=s+e.collisionHeight-o-a;e.collisionHeight>o?l>0&&c<=0?(n=t.top+l+e.collisionHeight-o-a,t.top+=l-n):t.top=c>0&&l<=0?a:l>c?a+o-e.collisionHeight:a:l>0?t.top+=l:c>0?t.top-=c:t.top=r(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,a=e.within,r=a.offset.left+a.scrollLeft,s=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,c=t.left-e.collisionPosition.marginLeft,d=c-l,u=c+e.collisionWidth-s-l,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];d<0?((n=t.left+h+f+p+e.collisionWidth-s-r)<0||n<o(d))&&(t.left+=h+f+p):u>0&&((i=t.left-e.collisionPosition.marginLeft+h+f+p-l)>0||o(i)<u)&&(t.left+=h+f+p)},top:function(t,e){var n,i,a=e.within,r=a.offset.top+a.scrollTop,s=a.height,l=a.isWindow?a.scrollTop:a.offset.top,c=t.top-e.collisionPosition.marginTop,d=c-l,u=c+e.collisionHeight-s-l,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];d<0?(i=t.top+h+f+p+e.collisionHeight-s-r,t.top+h+f+p>d&&(i<0||i<o(d))&&(t.top+=h+f+p)):u>0&&(n=t.top-e.collisionPosition.marginTop+h+f+p-l,t.top+h+f+p>u&&(n>0||o(n)<u)&&(t.top+=h+f+p))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,a,r,o=document.getElementsByTagName("body")[0],s=document.createElement("div");for(r in e=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)e.style[r]=i[r];e.appendChild(s),(n=o||document.documentElement).insertBefore(e,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",a=t(s).offset().left,t.support.offsetFractions=a>10&&a<11,e.innerHTML="",n.removeChild(e)}(),!1!==t.uiBackCompat&&function(t){var n=t.fn.position;t.fn.position=function(i){if(!i||!i.offset)return n.call(this,i);var a=i.offset.split(" "),r=i.at.split(" ");return 1===a.length&&(a[1]=a[0]),/^\d/.test(a[0])&&(a[0]="+"+a[0]),/^\d/.test(a[1])&&(a[1]="+"+a[1]),1===r.length&&(/left|center|right/.test(r[0])?r[1]="center":(r[1]=r[0],r[0]="center")),n.call(this,t.extend(i,{at:r[0]+a[0]+" "+r[1]+a[1],offset:e}))}}(l)}(l),function(t,e){var n=0;t.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return e=!0,i=!0,void(n=!0);e=!1,i=!1,n=!1;var r=t.ui.keyCode;switch(a.keyCode){case r.PAGE_UP:e=!0,this._move("previousPage",a);break;case r.PAGE_DOWN:e=!0,this._move("nextPage",a);break;case r.UP:e=!0,this._keyEvent("previous",a);break;case r.DOWN:e=!0,this._keyEvent("next",a);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(e=!0,a.preventDefault(),this.menu.select(a));break;case r.TAB:this.menu.active&&this.menu.select(a);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:n=!0,this._searchTimeout(a)}},keypress:function(i){if(e)return e=!1,void i.preventDefault();if(!n){var a=t.ui.keyCode;switch(i.keyCode){case a.PAGE_UP:this._move("previousPage",i);break;case a.PAGE_DOWN:this._move("nextPage",i);break;case a.UP:this._keyEvent("previous",i);break;case a.DOWN:this._keyEvent("next",i)}}},input:function(t){if(i)return i=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:t(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay((function(){var e=this;this.document.one("mousedown",(function(i){i.target!==e.element[0]&&i.target!==n&&!t.contains(n,i.target)&&e.close()}))}))},menufocus:function(e,n){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",e,{item:i})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item")||e.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),t.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this.document.find(e||"body")[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,a){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){a(t)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,e=++n;return function(i){e===n&&t.__response(i),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)}))},_suggest:function(e){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,e),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,(function(t,n){i._renderItemData(e,n)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").append(t("<a>").text(n.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,(function(t){return i.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(l),function(t,e){var n,i,a,r,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this).find(":ui-button");setTimeout((function(){e.button("refresh")}),1)},c=function(e){var n=e.name,i=e.form,a=t([]);return n&&(a=i?t(i).find("[name='"+n+"']"):t("[name='"+n+"']",e.ownerDocument).filter((function(){return!this.form}))),a};t.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,s=this.options,d="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(d?"":" ui-state-active"),h="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){s.disabled||(t(this).addClass("ui-state-hover"),this===n&&t(this).addClass("ui-state-active"))})).bind("mouseleave"+this.eventNamespace,(function(){s.disabled||t(this).removeClass(u)})).bind("click"+this.eventNamespace,(function(t){s.disabled&&(t.preventDefault(),t.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){e.buttonElement.addClass(h)})).bind("blur"+this.eventNamespace,(function(){e.buttonElement.removeClass(h)})),d&&(this.element.bind("change"+this.eventNamespace,(function(){r||e.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(t){s.disabled||(r=!1,i=t.pageX,a=t.pageY)})).bind("mouseup"+this.eventNamespace,(function(t){s.disabled||i===t.pageX&&a===t.pageY||(r=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||r)return!1;t(this).toggleClass("ui-state-active"),e.buttonElement.attr("aria-pressed",e.element[0].checked)})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||r)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var n=e.element[0];c(n).not(n).map((function(){return t(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(s.disabled)return!1;t(this).addClass("ui-state-active"),n=this,e.document.one("mouseup",(function(){n=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(s.disabled)return!1;t(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(e){if(s.disabled)return!1;(e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace,(function(){t(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()}))),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){this._super(t,e),"disabled"!==t?this._resetButton():e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var e=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?c(this.element[0]).each((function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(s),n=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),i=this.options.icons,a=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(a?"s":i.primary?"-primary":"-secondary")),i.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(n)))):r.push("ui-button-text-only"),e.addClass(r.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return t(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return t(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(l),function(t,e){var n=!1;t.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy((function(t){this.options.disabled&&t.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!n&&i.not(".ui-state-disabled").length&&(n=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var n=t(e.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,n)},blur:function(e){this._delay((function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,a,r,o,s,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,a=this.previousFilter||"",r=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),r===a?o=!0:r=a+r,s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(t(this).children("a").text())})),(i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(r=String.fromCharCode(e.keyCode),s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(t(this).children("a").text())}))),i.length?(this.focus(e,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n=this.options.icons.submenu,i=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});(e=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each((function(){var e=t(this);/[^\-—–\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")})),e.children(".ui-state-disabled").attr("aria-disabled","true"),i.each((function(){var e=t(this),i=e.prev("a"),a=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(a),e.attr("aria-labelledby",i.attr("id"))})),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=e.children(".ui-menu")).length&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,a,r,o,s;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,a=e.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=e.height(),a<0?this.activeMenu.scrollTop(r+a):a+s>o&&this.activeMenu.scrollTop(r+a-o+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i}),this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(n,i)},nextPage:function(e){var n,i,a;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=t(this)).offset().top-i-a<0})),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var n,i,a;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=t(this)).offset().top-i+a>0})),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)}})}(l),function(t,e){t.widget("ui.slider",t.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var e,n,i=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),i.range&&(!0===i.range&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),n=i.values&&i.values.length||1,e=a.length;e<n;e++)r.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=a.add(t(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(t){t.preventDefault()})).mouseenter((function(){i.disabled||t(this).addClass("ui-state-hover")})).mouseleave((function(){t(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))})).blur((function(){t(this).removeClass("ui-state-focus")})),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e)})),this._on(this.handles,{keydown:function(e){var n,i,a,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),!1===this._start(e,r)))return}switch(a=this.options.step,n=i=this.options.values&&this.options.values.length?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:i=this._valueMin();break;case t.ui.keyCode.END:i=this._valueMax();break;case t.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-a)}this._slide(e,r,i)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,a,r,o,s,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),a=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var n=Math.abs(i-c.values(e));a>n&&(a=n,r=t(this),o=e)})),!0===d.range&&this.values(1)===d.min&&(o+=1,r=t(this.handles[o])),!1!==this._start(e,o)&&(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),s=r.offset(),l=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-s.left-r.width()/2,top:e.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,a,r;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/e)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),a=this._valueMax()-this._valueMin(),r=this._valueMin()+i*a,this._trimAlignValue(r)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,a,r;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&n>i||1===e&&n<i)&&(n=i),n!==this.values(e)&&((a=this.values())[e]=n,r=this._trigger("slide",t,{handle:this.handles[e],value:n,values:a}),i=this.values(e?0:1),!1!==r&&this.values(e,n,!0))):n!==this.value()&&(!1!==(r=this._trigger("slide",t,{handle:this.handles[e],value:n}))&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,a,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,a=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(a[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,n){var i,a=0;switch(t.isArray(this.options.values)&&(a=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<a;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,a,r,o=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,d={};this.options.values&&this.options.values.length?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[c?"animate":"css"](d,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n})):(i=this.value(),a=this._valueMin(),r=this._valueMax(),n=r!==a?(i-a)/(r-a)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](d,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))}})}(l)},function(t,e,n){var i,a=n(71);(i=a).fn.farbtastic=function(t){return i.farbtastic(this,t),this},i.farbtastic=function(t,e){return(t=i(t)[0]).farbtastic||(t.farbtastic=new i._farbtastic(t,e))},i._farbtastic=function(t,e){var n=this;n.linkTo=function(t){return"object"==typeof n.callback&&i(n.callback).unbind("keyup",n.updateValue),n.color=null,"function"==typeof t?n.callback=t:"object"!=typeof t&&"string"!=typeof t||(n.callback=i(t),n.callback.bind("keyup",n.updateValue),n.callback[0].value&&n.setColor(n.callback[0].value)),this},n.updateValue=function(t){this.value&&this.value!=n.color&&n.setColor(this.value)},n.setColor=function(t){var e=n.unpack(t);return n.color!=t&&e&&(n.color=t,n.rgb=e,n.hsl=n.RGBToHSL(n.rgb),n.updateDisplay()),this},n.setHSL=function(t){return n.hsl=t,n.rgb=n.HSLToRGB(t),n.color=n.pack(n.rgb),n.updateDisplay(),this},n.initWidget=function(){var a={width:e.width,height:e.width};i(t).html('<div class="farbtastic" style="position: relative"><div class="farbtastic-solid"></div><canvas class="farbtastic-mask"></canvas><canvas class="farbtastic-overlay"></canvas></div>').find("*").attr(a).css(a).end().find("div>*").css("position","absolute"),i.browser.msie,n.radius=(e.width-e.wheelWidth)/2-1,n.square=Math.floor(.7*(n.radius-e.wheelWidth/2))-1,n.mid=Math.floor(e.width/2),n.markerSize=.3*e.wheelWidth,n.solidFill=i(".farbtastic-solid",t).css({width:2*n.square-1,height:2*n.square-1,left:n.mid-n.square,top:n.mid-n.square}),n.cnvMask=i(".farbtastic-mask",t),n.ctxMask=n.cnvMask[0].getContext("2d"),n.cnvOverlay=i(".farbtastic-overlay",t),n.ctxOverlay=n.cnvOverlay[0].getContext("2d"),n.ctxMask.translate(n.mid,n.mid),n.ctxOverlay.translate(n.mid,n.mid),n.drawCircle(),n.drawMask()},n.drawCircle=function(){new Date;var t,a,r=n.radius,o=e.wheelWidth,s=8/r/24*Math.PI,l=n.ctxMask,c=0;l.save(),l.lineWidth=o/r,l.scale(r,r);for(var d=0;d<=24;++d){var u=d/24,h=u*Math.PI*2,f=Math.sin(c),p=-Math.cos(c);if(x2=Math.sin(h),y2=-Math.cos(h),am=(c+h)/2,tan=1/Math.cos((h-c)/2),xm=Math.sin(am)*tan,ym=-Math.cos(am)*tan,color2=n.pack(n.HSLToRGB([u,1,.5])),d>0)if(i.browser.msie){var m=(1+Math.min(Math.abs(Math.tan(c)),Math.abs(Math.tan(Math.PI/2-c))))/24;t=n.pack(n.HSLToRGB([a-.15*m,1,.5])),color2=n.pack(n.HSLToRGB([u+.15*m,1,.5])),(v=l.createLinearGradient(f,p,x2,y2)).addColorStop(0,t),v.addColorStop(1,color2),l.fillStyle=v;var _=(r+o/2)/r,g=(r-o/2)/r;l.beginPath(),l.moveTo(f*_,p*_),l.quadraticCurveTo(xm*_,ym*_,x2*_,y2*_),l.lineTo(x2*g,y2*g),l.quadraticCurveTo(xm*g,ym*g,f*g,p*g),l.fill()}else{var v;(v=l.createLinearGradient(f,p,x2,y2)).addColorStop(0,t),v.addColorStop(1,color2),l.strokeStyle=v,l.beginPath(),l.moveTo(f,p),l.quadraticCurveTo(xm,ym,x2,y2),l.stroke()}c=h-s,t=color2,a=u}l.restore()},n.drawMask=function(){new Date;var t=2*n.square,e=n.square;function a(t,e,n){for(var i=1/t,a=1/e,r=0;r<=e;++r)for(var o=1-r*a,s=0;s<=t;++s){var l=1-s*i,c=1-2*Math.min(o*l,(1-o)*l);n(s,r,c>0?.5*(2*o-1+c)/c:0,c)}}if(n.ctxMask.getImageData){var r=Math.floor(t/2),o=document.createElement("canvas");o.width=o.height=r+1;var s=o.getContext("2d"),l=s.getImageData(0,0,r+1,r+1),c=0;a(r,r,(function(t,e,n,i){l.data[c++]=l.data[c++]=l.data[c++]=255*n,l.data[c++]=255*i})),s.putImageData(l,0,0),n.ctxMask.drawImage(o,0,0,r+1,r+1,-e,-e,2*e,2*e)}else if(i.browser.msie){var d,u,h=Math.floor(t/6);a(h,6,(function(t,a,r,o){if(0==t&&(d=u,u=[]),r=Math.round(255*r),o=Math.round(255*o),a>0){var s=d[t][0],l=d[t][1],c=n.packDX(s,l),f=n.packDX(r,o),p=Math.round(n.mid+(.333*(a-1)-1)*e),m=Math.round(n.mid+(.333*a-1)*e);i("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(StartColorStr="+c+", EndColorStr="+f+", GradientType=0)",top:p,height:m-p,left:n.mid+(6*t-e-1),width:6-(t==h?Math.round(3):0)}).appendTo(n.cnvMask)}u.push([r,o])}))}else a(r=Math.floor(t/2),r,(function(t,i,a,r){a=Math.round(255*a),n.ctxMask.fillStyle="rgba("+a+", "+a+", "+a+", "+r+")",n.ctxMask.fillRect(2*t-e-1,2*i-e-1,2,2)}))},n.drawMarkers=function(){var t=e.width,i=Math.ceil(n.markerSize/4),a=n.markerSize-i+1,r=6.28*n.hsl[0],o=Math.sin(r)*n.radius,s=-Math.cos(r)*n.radius,l=2*n.square*(.5-n.hsl[1]),c=2*n.square*(.5-n.hsl[2]),d=n.invert?"#fff":"#000",u=n.invert?"#000":"#fff",h=[{x:o,y:s,r:a,c:"#000",lw:i+1},{x:o,y:s,r:n.markerSize,c:"#fff",lw:i},{x:l,y:c,r:a,c:u,lw:i+1},{x:l,y:c,r:n.markerSize,c:d,lw:i}];n.ctxOverlay.clearRect(-n.mid,-n.mid,t,t);for(var f=0;f<h.length;f++){var p=h[f];n.ctxOverlay.lineWidth=p.lw,n.ctxOverlay.strokeStyle=p.c,n.ctxOverlay.beginPath(),n.ctxOverlay.arc(p.x,p.y,p.r,0,2*Math.PI,!0),n.ctxOverlay.stroke()}},n.updateDisplay=function(){n.invert=.3*n.rgb[0]+.59*n.rgb[1]+.11*n.rgb[2]<=.6,n.solidFill.css("backgroundColor",n.pack(n.HSLToRGB([n.hsl[0],1,.5]))),n.drawMarkers(),"object"==typeof n.callback?(i(n.callback).css({backgroundColor:n.color,color:n.invert?"#fff":"#000"}),i(n.callback).each((function(){"string"==typeof this.value&&this.value!=n.color&&(this.value=n.color)})).change()):"function"==typeof n.callback&&n.callback.call(n,n.color)},n.widgetCoords=function(t){return{x:t.pageX-n.offset.left-n.mid,y:t.pageY-n.offset.top-n.mid}},n.mousedown=function(e){i._farbtastic.dragging||(i(document).bind("mousemove",n.mousemove).bind("mouseup",n.mouseup),i._farbtastic.dragging=!0),n.offset=i(t).offset();var a=n.widgetCoords(e);return n.circleDrag=Math.max(Math.abs(a.x),Math.abs(a.y))>n.square+2,n.mousemove(e),!1},n.mousemove=function(t){var e=n.widgetCoords(t);if(n.circleDrag){var i=Math.atan2(e.x,-e.y)/6.28;n.setHSL([(i+1)%1,n.hsl[1],n.hsl[2]])}else{var a=Math.max(0,Math.min(1,-e.x/n.square/2+.5)),r=Math.max(0,Math.min(1,-e.y/n.square/2+.5));n.setHSL([n.hsl[0],a,r])}return!1},n.mouseup=function(){i(document).unbind("mousemove",n.mousemove),i(document).unbind("mouseup",n.mouseup),i._farbtastic.dragging=!1},n.dec2hex=function(t){return(t<16?"0":"")+t.toString(16)},n.packDX=function(t,e){return"#"+n.dec2hex(e)+n.dec2hex(t)+n.dec2hex(t)+n.dec2hex(t)},n.pack=function(t){var e=Math.round(255*t[0]),i=Math.round(255*t[1]),a=Math.round(255*t[2]);return"#"+n.dec2hex(e)+n.dec2hex(i)+n.dec2hex(a)},n.unpack=function(t){if(7==t.length){function e(e){return parseInt(t.substring(e,e+2),16)/255}return[e(1),e(3),e(5)]}if(4==t.length){function e(e){return parseInt(t.substring(e,e+1),16)/15}return[e(1),e(2),e(3)]}},n.HSLToRGB=function(t){var e,n,i=t[0],a=t[1],r=t[2];return e=2*r-(n=r<=.5?r*(a+1):r+a-r*a),[this.hueToRGB(e,n,i+.33333),this.hueToRGB(e,n,i),this.hueToRGB(e,n,i-.33333)]},n.hueToRGB=function(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(.66666-n)*6:t},n.RGBToHSL=function(t){var e=t[0],n=t[1],i=t[2],a=Math.min(e,n,i),r=Math.max(e,n,i),o=r-a,s=0,l=0,c=(a+r)/2;return c>0&&c<1&&(l=o/(c<.5?2*c:2-2*c)),o>0&&(r==e&&r!=n&&(s+=(n-i)/o),r==n&&r!=i&&(s+=2+(i-e)/o),r==i&&r!=e&&(s+=4+(e-n)/o),s/=6),[s,l,c]},e.callback||(e={callback:e}),e=i.extend({width:300,wheelWidth:(e.width||300)/10,callback:null},e),n.initWidget(),i("canvas.farbtastic-overlay",t).mousedown(n.mousedown),e.callback&&n.linkTo(e.callback),n.color||n.setColor("#808080")}},function(module,exports,__webpack_require__){var jQuery=__webpack_require__(71),_canLog=!0;
/*! ****************************************************************************
	jquery.dynatree.js
	Dynamic tree view control, with support for lazy loading of branches.

	Copyright (c) 2006-2014, Martin Wendt (http://wwWendt.de)
	Dual licensed under the MIT or GPL Version 2 licenses.
	http://code.google.com/p/dynatree/wiki/LicenseInfo

	A current version and some documentation is available at
		http://dynatree.googlecode.com/

	@version: 1.2.8
	@date:    2015-07-04T16:44

	@depends: jquery.js
	@depends: jquery.ui.core.js
	@depends: jquery.cookie.js
*******************************************************************************/function _log(t,e){if(_canLog){var n=Array.prototype.slice.apply(arguments,[1]),i=new Date,a=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();n[0]=a+" - "+n[0];try{switch(t){case"info":window.console.info.apply(window.console,n);break;case"warn":window.console.warn.apply(window.console,n);break;default:window.console.log.apply(window.console,n)}}catch(t){window.console?-2146827850===t.number&&window.console.log(n.join(", ")):_canLog=!1}}}function logMsg(t){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}var getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(t){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(t)}function noop(){}function offsetString(t){return 0===t?"":t>0?"+"+t:""+t}function _checkBrowser(){var t,e;return e={},(t=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(navigator.userAgent)).browser&&(e[t.browser]=!0,e.version=t.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0),e}function versionCompare(t,e){var n,i,a,r=(""+t).split("."),o=(""+e).split("."),s=Math.min(r.length,o.length);for(a=0;a<s;a++)if(n=parseInt(r[a],10),i=parseInt(o[a],10),isNaN(n)&&(n=r[a]),isNaN(i)&&(i=o[a]),n!=i)return n>i?1:n<i?-1:NaN;return r.length===o.length?0:r.length<o.length?-1:1}var BROWSER=_checkBrowser(),jquerySupports={positionMyOfs:versionCompare($.ui.version,"1.9")>=0},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(t,e,n){this.parent=t,this.tree=e,"string"==typeof n&&(n={title:n}),null==n.key?n.key="_"+e._nodeCount++:n.key=""+n.key,this.data=$.extend({},$.ui.dynatree.nodedatadefaults,n),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(t,e){var n,i=$.extend({},this.data);if(i.activate=this.tree.activeNode===this,i.focus=this.tree.focusNode===this,i.expand=this.bExpanded,i.select=this.bSelected,e&&e(i),t&&this.childList){i.children=[];for(var a=0,r=this.childList.length;a<r;a++)(n=this.childList[a]).isStatusNode()||i.children.push(n.toDict(!0,e))}else delete i.children;return i},fromDict:function(t){var e=t.children;if(void 0===e)return this.data=$.extend(this.data,t),void this.render();(t=$.extend({},t)).children=void 0,this.data=$.extend(this.data,t),this.removeChildren(),this.addChild(e)},_getInnerHtml:function(){var t=this.tree,e=t.options,n=t.cache,i=this.getLevel(),a=this.data,r="";i<e.minExpandLevel?i>1&&(r+=n.tagConnector):!1!==this.hasChildren()?r+=n.tagExpander:r+=n.tagConnector,e.checkbox&&!0!==a.hideCheckbox&&!a.isStatusNode&&(r+=n.tagCheckbox),a.icon?r+="<img src='"+("/"===a.icon.charAt(0)?a.icon:e.imagePath+a.icon)+"' alt='' />":!1===a.icon||(a.iconClass?r+="<span class=' "+a.iconClass+"'></span>":r+=n.tagNodeIcon);var o="";if(e.onCustomRender&&(o=e.onCustomRender.call(t,this)||""),!o){var s=a.tooltip?' title="'+a.tooltip.replace(/\"/g,"&quot;")+'"':"",l=a.href||"#";o=e.noLink||a.noLink?'<span style="display:inline-block;" class="'+e.classNames.title+'"'+s+">"+a.title+"</span>":'<a href="'+l+'" class="'+e.classNames.title+'"'+s+">"+a.title+"</a>"}return r+=o},_fixOrder:function(){var t=this.childList;if(t&&this.ul)for(var e=this.ul.firstChild,n=0,i=t.length-1;n<i;n++){var a=t[n],r=e.dtnode;a!==r?(this.tree.logDebug("_fixOrder: mismatch at index "+n+": "+a+" != "+r),this.ul.insertBefore(a.li,r.li)):e=e.nextSibling}},render:function(t,e){var n=this.tree,i=this.parent,a=this.data,r=n.options,o=r.classNames,s=this.isLastSibling(),l=!1;if(i||this.ul){if(i){this.li||(l=!0,this.li=document.createElement("li"),this.li.dtnode=this,a.key&&r.generateIds&&(this.li.id=r.idPrefix+a.key),this.span=document.createElement("span"),this.span.className=o.title,this.li.appendChild(this.span),i.ul||(i.ul=document.createElement("ul"),i.ul.style.display="none",i.li.appendChild(i.ul)),i.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var c=[];c.push(o.node),a.isFolder&&c.push(o.folder),this.bExpanded&&c.push(o.expanded),!1!==this.hasChildren()&&c.push(o.hasChildren),a.isLazy&&null===this.childList&&c.push(o.lazy),s&&c.push(o.lastsib),this.bSelected&&c.push(o.selected),this.hasSubSel&&c.push(o.partsel),n.activeNode===this&&c.push(o.active),a.addClass&&c.push(a.addClass),c.push(o.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(a.isLazy&&null===this.childList?"d":"")+(s?"l":"")),c.push(o.combinedIconPrefix+(this.bExpanded?"e":"c")+(a.isFolder?"f":"")),this.span.className=c.join(" "),this.li.className=s?o.lastsib:"",l&&r.onCreate&&r.onCreate.call(n,this,this.span),r.onRender&&r.onRender.call(n,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),r.minExpandLevel>1?this.ul.className=o.container+" "+o.noConnector:this.ul.className=o.container;if((this.bExpanded||!0===e)&&this.childList){for(var d=0,u=this.childList.length;d<u;d++)this.childList[d].render(!1,e);this._fixOrder()}if(this.ul){var h="none"===this.ul.style.display,f=!!this.bExpanded;if(t&&r.fx&&h===f){var p=r.fx.duration||200;$(this.ul).animate(r.fx,p)}else this.ul.style.display=this.bExpanded||!i?"":"none"}},getKeyPath:function(t){var e=[],n=this.tree.options.keyPathSeparator;return this.visitParents((function(t){t.parent&&e.unshift(t.data.key)}),!t),n+e.join(n)},getParent:function(){return this.parent},getChildren:function(){if(void 0!==this.hasChildren())return this.childList},hasChildren:function(){if(this.data.isLazy){if(null===this.childList||void 0===this.childList)return;if(0===this.childList.length)return!1;if(1===this.childList.length&&this.childList[0].isStatusNode())return;return!0}return!!this.childList},isFirstSibling:function(){var t=this.parent;return!t||t.childList[0]===this},isLastSibling:function(){var t=this.parent;return!t||t.childList[t.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var t=this.parent.childList,e=1,n=t.length;e<n;e++)if(t[e]===this)return t[e-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var t=this.parent.childList,e=0,n=t.length-1;e<n;e++)if(t[e]===this)return t[e+1];return null},isStatusNode:function(){return!0===this.data.isStatusNode},isChildOf:function(t){return this.parent&&this.parent===t},isDescendantOf:function(t){if(!t)return!1;for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},countChildren:function(){var t=this.childList;if(!t)return 0;for(var e=t.length,n=0,i=e;n<i;n++){e+=t[n].countChildren()}return e},sortChildren:function(t,e){var n=this.childList;if(n){if(t=t||function(t,e){var n=t.data.title.toLowerCase(),i=e.data.title.toLowerCase();return n===i?0:n>i?1:-1},n.sort(t),e)for(var i=0,a=n.length;i<a;i++)n[i].childList&&n[i].sortChildren(t,"$norender$");"$norender$"!==e&&this.render()}},_setStatusNode:function(t){var e=this.childList?this.childList[0]:null;if(t)e?(t.isStatusNode=!0,t.key="_statusNode",e.data=t,e.render()):(t.isStatusNode=!0,t.key="_statusNode",e=this.addChild(t));else if(e&&e.isStatusNode()){try{this.ul&&(this.ul.removeChild(e.li),e.li=null)}catch(t){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(t,e){var n=e&&e.tooltip?e.tooltip:null,i=e&&e.info?" ("+e.info+")":"";switch(t){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+i,tooltip:n,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+i,tooltip:n,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+t+"'."}},_parentList:function(t,e){for(var n=[],i=e?this:this.parent;i;)(t||i.parent)&&n.unshift(i),i=i.parent;return n},getLevel:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},_getTypeForOuterNodeEvent:function(t){var e=this.tree.options.classNames,n=t.target;if(n.className.indexOf(e.node)<0)return null;for(var i=t.pageX-n.offsetLeft,a=t.pageY-n.offsetTop,r=0,o=n.childNodes.length;r<o;r++){var s=n.childNodes[r],l=s.offsetLeft-n.offsetLeft,c=s.offsetTop-n.offsetTop,d=s.clientWidth,u=s.clientHeight;if(i>=l&&i<=l+d&&a>=c&&a<=c+u){if(s.className==e.title)return"title";if(s.className==e.expander)return"expander";if(s.className==e.checkbox||s.className==e.radio)return"checkbox";if(s.className==e.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(t){var e=t&&t.target?t.target.className:"",n=this.tree.options.classNames;return e.indexOf(n.title)>=0?"title":e.indexOf(n.expander)>=0?"expander":e.indexOf(n.checkbox)>=0||e.indexOf(n.radio)>=0?"checkbox":e.indexOf(n.nodeIcon)>=0?"icon":e.indexOf(n.empty)>=0||e.indexOf(n.vline)>=0||e.indexOf(n.connector)>=0?"prefix":e.indexOf(n.node)>=0?this._getTypeForOuterNodeEvent(t):null},isVisible:function(){for(var t=this._parentList(!0,!1),e=0,n=t.length;e<n;e++)if(!t[e].bExpanded)return!1;return!0},makeVisible:function(){for(var t=this._parentList(!0,!1),e=0,n=t.length;e<n;e++)t[e]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(t){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(t,e){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",t,e,this);var n=this.tree.options;if(!this.data.isStatusNode)if(t){if(e&&n.onQueryActivate&&!1===n.onQueryActivate.call(this.tree,t,this))return;if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}n.activeVisible&&this.makeVisible(),this.tree.activeNode=this,n.persist&&$.cookie(n.cookieId+"-active",this.data.key,n.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(n.classNames.active),e&&n.onActivate&&n.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(n.onQueryActivate&&!1===n.onQueryActivate.call(this.tree,!1,this))return;$(this.span).removeClass(n.classNames.active),n.persist&&$.cookie(n.cookieId+"-active","",n.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,e&&n.onDeactivate&&n.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var t=!0,e=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:t=!1,e=!0;break;case 3:t=e=!0}null===this.parent&&(e=!1),e&&(this.toggleExpand(),this.focus()),t&&this.activate()},_setSubSel:function(t){t?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var t;if(!this.hasChildren())return t=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),t;var e,n,i=this.childList,a=!0,r=!0;for(e=0,n=i.length;e<n;e++){var o=i[e]._updatePartSelectionState();!1!==o&&(r=!1),!0!==o&&(a=!1)}return t=!!a||!r&&void 0,this._setSubSel(void 0===t),this.bSelected=!0===t,t},_fixSelectionState:function(){var t,e,n;if(this.bSelected)for(this.visit((function(t){t.parent._setSubSel(!0),t.data.unselectable||t._select(!0,!1,!1)})),t=this.parent;t;){t._setSubSel(!0);var i=!0;for(e=0,n=t.childList.length;e<n;e++){var a=t.childList[e];if(!a.bSelected&&!a.data.isStatusNode&&!a.data.unselectable){i=!1;break}}i&&t._select(!0,!1,!1),t=t.parent}else for(this._setSubSel(!1),this.visit((function(t){t._setSubSel(!1),t._select(!1,!1,!1)})),t=this.parent;t;){t._select(!1,!1,!1);var r=!1;for(e=0,n=t.childList.length;e<n;e++)if(t.childList[e].bSelected||t.childList[e].hasSubSel){r=!0;break}t._setSubSel(r),t=t.parent}},_select:function(t,e,n){var i=this.tree.options;this.data.isStatusNode||this.bSelected!==t&&(e&&i.onQuerySelect&&!1===i.onQuerySelect.call(this.tree,t,this)||(1==i.selectMode&&t&&this.tree.visit((function(t){if(t.bSelected)return t._select(!1,!1,!1),!1})),this.bSelected=t,t?(i.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(i.classNames.selected),n&&3===i.selectMode&&this._fixSelectionState(),e&&i.onSelect&&i.onSelect.call(this.tree,!0,this)):(i.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(i.classNames.selected),n&&3===i.selectMode&&this._fixSelectionState(),e&&i.onSelect&&i.onSelect.call(this.tree,!1,this))))},select:function(t){return this.data.unselectable?this.bSelected:this._select(!1!==t,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var t=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===t.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(t){this.tree.logWarning("_loadContent: failed - %o",t),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+t})}},_expand:function(t,e){if(this.bExpanded!==t){this.tree.logDebug("dtnode._expand(%o) - %o",t,this);var n=this.tree.options;if(!t&&this.getLevel()<n.minExpandLevel)this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",t,this);else if(!n.onQueryExpand||!1!==n.onQueryExpand.call(this.tree,t,this)){this.bExpanded=t,n.persist&&(t?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var i=!(this.data.isLazy&&null===this.childList||this._isLoading||e);if(this.render(i),this.bExpanded&&this.parent&&n.autoCollapse)for(var a=this._parentList(!1,!0),r=0,o=a.length;r<o;r++)a[r].collapseSiblings();n.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),t&&this.data.isLazy&&null===this.childList&&!this._isLoading?this._loadContent():n.onExpand&&n.onExpand.call(this.tree,t,this)}}else this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",t,this)},isExpanded:function(){return this.bExpanded},expand:function(t){t=!1!==t,(this.childList||this.data.isLazy||!t)&&(null!==this.parent||t)&&this._expand(t)},scheduleAction:function(t,e){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var n=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout((function(){n.tree.logDebug("setTimeout: trigger expand"),n.expand(!0)}),e);break;case"activate":this.tree.timer=setTimeout((function(){n.tree.logDebug("setTimeout: trigger activate"),n.activate()}),e);break;default:throw"Invalid mode "+t}this.tree.logDebug("setTimeout(%s, %s): %s",t,e,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var t=this.parent.childList,e=0,n=t.length;e<n;e++)t[e]!==this&&t[e].bExpanded&&t[e]._expand(!1)},_onClick:function(t){var e=this.getEventTargetType(t);if("expander"===e)this.toggleExpand(),this.focus();else if("checkbox"===e)this.toggleSelect(),this.focus();else{this._userActivate();var n=this.span.getElementsByTagName("a");if(!n[0])return!0;BROWSER.msie&&parseInt(BROWSER.version,10)<9||n[0].focus()}t.preventDefault()},_onDblClick:function(t){},_onKeydown:function(t){var e,n=!0;switch(t.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(e=this.getPrevSibling();e&&e.bExpanded&&e.childList;)e=e.childList[e.childList.length-1];!e&&this.parent&&this.parent.parent&&(e=this.parent),e&&e.focus();break;case 40:if(this.bExpanded&&this.childList)e=this.childList[0];else for(var i=this._parentList(!1,!0),a=i.length-1;a>=0&&!(e=i[a].getNextSibling());a--);e&&e.focus();break;default:n=!1}n&&t.preventDefault()},_onKeypress:function(t){},_onFocus:function(t){var e=this.tree.options;"blur"==t.type||"focusout"==t.type?(e.onBlur&&e.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(e.classNames.focused),this.tree.tnFocused=null,e.persist&&$.cookie(e.cookieId+"-focus","",e.cookie)):"focus"!=t.type&&"focusin"!=t.type||(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(e.classNames.focused)),this.tree.tnFocused=this,e.onFocus&&e.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(e.classNames.focused),e.persist&&$.cookie(e.cookieId+"-focus",this.data.key,e.cookie))},visit:function(t,e){var n=!0;if(!0===e&&(!1===(n=t(this))||"skip"===n))return n;if(this.childList)for(var i=0,a=this.childList.length;i<a&&!1!==(n=this.childList[i].visit(t,!0));i++);return n},visitParents:function(t,e){if(e&&!1===t(this))return!1;for(var n=this.parent;n;){if(!1===t(n))return!1;n=n.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(t){var e=this.childList;if(1===e.length){if(t!==e[0])throw"removeChild: invalid child";return this.removeChildren()}t===this.tree.activeNode&&t.deactivate(),this.tree.options.persist&&(t.bSelected&&this.tree.persistence.clearSelect(t.data.key),t.bExpanded&&this.tree.persistence.clearExpand(t.data.key)),t.removeChildren(!0),this.ul&&t.li&&this.ul.removeChild(t.li);for(var n=0,i=e.length;n<i;n++)if(e[n]===t){this.childList.splice(n,1);break}},removeChildren:function(t,e){this.tree.logDebug("%s.removeChildren(%o)",this,t);var n=this.tree,i=this.childList;if(i){for(var a=0,r=i.length;a<r;a++){var o=i[a];o!==n.activeNode||e||o.deactivate(),this.tree.options.persist&&!e&&(o.bSelected&&this.tree.persistence.clearSelect(o.data.key),o.bExpanded&&this.tree.persistence.clearExpand(o.data.key)),o.removeChildren(!0,e),this.ul&&o.li&&$("li",$(this.ul)).remove()}this.childList=null}t||(this._isLoading=!1,this.render())},setTitle:function(t){this.fromDict({title:t})},reload:function(t){throw"Use reloadChildren() instead"},reloadChildren:function(t){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(t){var e=this,n="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(n,(function(i,a,r){if(e.tree.$tree.unbind(n),e.tree.logDebug("loaded %o, %o, %o",i,a,r),a!==e)throw"got invalid load event";t.call(e.tree,a,r)}))}this.removeChildren(),this._loadContent()},_loadKeyPath:function(t,e){var n=this.tree;if(n.logDebug("%s._loadKeyPath(%s)",this,t),""===t)throw"Key path must not be empty";var i=t.split(n.options.keyPathSeparator);if(""===i[0])throw"Key path must be relative (don't start with '/')";var a=i.shift();if(this.childList)for(var r=0,o=this.childList.length;r<o;r++){var s=this.childList[r];if(s.data.key===a){if(0===i.length)e.call(n,s,"ok");else if(!s.data.isLazy||null!==s.childList&&void 0!==s.childList)e.call(n,s,"loaded"),s._loadKeyPath(i.join(n.options.keyPathSeparator),e);else{n.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,t,s);var l=this;s.reloadChildren((function(a,r){r?(n.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",a,t,a),e.call(n,s,"loaded"),a._loadKeyPath(i.join(n.options.keyPathSeparator),e)):(n.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",l,t),e.call(n,s,"error"))}))}return}}e.call(n,void 0,"notfound",a,0===i.length),n.logWarning("Node not found: "+a)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(t,e){var n=this.tree,i=n.options,a=n.persistence;if(t.parent=this,null===this.childList?this.childList=[]:e||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(i.classNames.lastsib),e){var r=$.inArray(e,this.childList);if(r<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(r,0,t)}else this.childList.push(t);var o=n.isInitializing();if(i.persist&&a.cookiesFound&&o?(a.activeKey===t.data.key&&(n.activeNode=t),a.focusedKey===t.data.key&&(n.focusNode=t),t.bExpanded=$.inArray(t.data.key,a.expandedKeyList)>=0,t.bSelected=$.inArray(t.data.key,a.selectedKeyList)>=0):(t.data.activate&&(n.activeNode=t,i.persist&&(a.activeKey=t.data.key)),t.data.focus&&(n.focusNode=t,i.persist&&(a.focusedKey=t.data.key)),t.bExpanded=!0===t.data.expand,t.bExpanded&&i.persist&&a.addExpand(t.data.key),t.bSelected=!0===t.data.select,t.bSelected&&i.persist&&a.addSelect(t.data.key)),i.minExpandLevel>=t.getLevel()&&(this.bExpanded=!0),t.bSelected&&3==i.selectMode)for(var s=this;s;)s.hasSubSel||s._setSubSel(!0),s=s.parent;return n.bEnableUpdate&&this.render(),t},addChild:function(t,e){if("string"==typeof t)throw"Invalid data type for "+t;if(t&&0!==t.length){if(t instanceof DynaTreeNode)return this._addChildNode(t,e);t.length||(t=[t]);for(var n=this.tree.enableUpdate(!1),i=null,a=0,r=t.length;a<r;a++){var o=t[a],s=this._addChildNode(new DynaTreeNode(this,this.tree,o),e);i||(i=s),o.children&&s.addChild(o.children,null)}return this.tree.enableUpdate(n),i}},append:function(t){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(t,null)},appendAjax:function(t){var e=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),t.debugLazyDelay){var n=t.debugLazyDelay;return t.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+n),void setTimeout((function(){e.appendAjax(t)}),n)}var i=t.success,a=t.error,r="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,o=$.extend({},this.tree.options.ajaxDefaults,t,{success:function(t,n,a){var o=e.tree.phase,s=e.tree.options;e.tree.phase="init",s.postProcess?t=s.postProcess.call(this,t,this.dataType):t&&t.hasOwnProperty("d")&&(t="string"==typeof t.d?$.parseJSON(t.d):t.d),$.isArray(t)&&0===t.length||e.addChild(t,null),e.tree.phase="postInit",i&&i.call(s,e,t,n),e.tree.logDebug("trigger "+r),e.tree.$tree.trigger(r,[e,!0]),e.tree.phase=o,e.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(t)&&0===t.length&&(e.childList=[],e.render())},error:function(t,n,i){e.tree.logWarning("appendAjax failed:",n,":\n",t,"\n",i),a&&a.call(o,e,t,n,i),e.tree.$tree.trigger(r,[e,!1]),e.setLazyNodeStatus(DTNodeStatus_Error,{info:n,tooltip:""+i})}});$.ajax(o)},move:function(t,e){var n;if(this!==t){if(!this.parent)throw"Cannot move system root";void 0!==e&&"over"!=e||(e="child");var i=this.parent,a="child"===e?t:t.parent;if(a.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if((n=$.inArray(this,this.parent.childList))<0)throw"Internal error";this.parent.childList.splice(n,1)}if(this.parent.ul&&this.li&&this.parent.ul.removeChild(this.li),this.parent=a,a.hasChildren())switch(e){case"child":a.childList.push(this);break;case"before":if((n=$.inArray(t,a.childList))<0)throw"Internal error";a.childList.splice(n,0,this);break;case"after":if((n=$.inArray(t,a.childList))<0)throw"Internal error";a.childList.splice(n+1,0,this);break;default:throw"Invalid mode "+e}else a.childList=[this];if(a.ul||(a.ul=document.createElement("ul"),a.ul.style.display="none",a.li&&a.li.appendChild(a.ul)),this.li&&a.ul.appendChild(this.li),this.tree!==t.tree)throw this.visit((function(e){e.tree=t.tree}),null,!0),"Not yet implemented.";i.isDescendantOf(a)||i.render(),a.isDescendantOf(i)||a.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(t,e){var n=new DynaTreeStatus(t,e);return n.read(),n.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(t,e){void 0===t&&(t=$.ui.dynatree.prototype.options.cookieId),e=$.extend({},$.ui.dynatree.prototype.options.cookie,e),this.cookieId=t,this.cookieOpts=e,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(t){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var t=$.cookie(this.cookieId+"-active");this.activeKey=t||"",t&&(this.cookiesFound=!0),t=$.cookie(this.cookieId+"-focus"),this.focusedKey=t||"",t&&(this.cookiesFound=!0),t=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=t?t.split(","):[],t&&(this.cookiesFound=!0),t=$.cookie(this.cookieId+"-select"),this.selectedKeyList=t?t.split(","):[],t&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(t){$.inArray(t,this.expandedKeyList)<0&&(this.expandedKeyList.push(t),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(t){var e=$.inArray(t,this.expandedKeyList);e>=0&&(this.expandedKeyList.splice(e,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(t){$.inArray(t,this.selectedKeyList)<0&&(this.selectedKeyList.push(t),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(t){var e=$.inArray(t,this.selectedKeyList);e>=0&&(this.selectedKeyList.splice(e,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return!0===this.cookiesFound},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();function _initDragAndDrop(t){var e=t.options.dnd||null;e&&(e.onDragStart||e.onDrop)&&_registerDnd(),e&&e.onDragStart&&t.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!0===e.revert&&function(t){if(logMsg("draggable.revert(), dropped=",t),"boolean"==typeof t)return!t;var e=$.ui.ddmanager&&$.ui.ddmanager.current&&$.ui.ddmanager.current.helper;return e&&e.hasClass("dynatree-drop-reject")},scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(t){var e=$.ui.dynatree.getNode(t.target);return e?e.tree._onDragEvent("helper",e,null,t,null,null):"<div></div>"},start:function(t,e){return!!e.helper.data("dtSourceNode")}}),e&&e.onDrop&&t.$tree.droppable({addClasses:!1,tolerance:"pointer",greedy:!1})}DynaTree.version="@@Version",DynaTree.prototype={initialize:function(t){this.phase="init",this.$widget=t,this.options=t.options,this.$tree=t.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(t){this.$widget;var e=this.options,n=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==e.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),e.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),e.minExpandLevel=1),e.classNames!==$.ui.dynatree.prototype.options.classNames&&(e.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,e.classNames)),e.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(e.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,e.ajaxDefaults)),e.dnd!==$.ui.dynatree.prototype.options.dnd&&(e.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,e.dnd)),e.imagePath||$("script").each((function(){if(this.src.search(/.*dynatree[^\/]*\.js$/i)>=0)return this.src.indexOf("/")>=0?e.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":e.imagePath="skin/",n.logDebug("Guessing imagePath from '%s': '%s'",this.src,e.imagePath),!1})),this.persistence=new DynaTreeStatus(e.cookieId,e.cookie),e.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+e.classNames.empty+"'></span>",tagVline:"<span class='"+e.classNames.vline+"'></span>",tagExpander:"<span class='"+e.classNames.expander+"'></span>",tagConnector:"<span class='"+e.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+e.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+e.classNames.checkbox+"'></span>",lastentry:void 0},(e.children||e.initAjax&&e.initAjax.url||e.initId)&&$(this.divTree).empty();var i=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var a=this.tnRoot,r=e.persist&&this.persistence.isReloading(),o=!1,s=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),e.children?a.addChild(e.children):e.initAjax&&e.initAjax.url?(o=!0,a.data.isLazy=!0,this._reloadAjax(t)):e.initId?this._createFromTag(a,$("#"+e.initId)):(this._createFromTag(a,i),i.remove()),this._checkConsistency(),o||3!=e.selectMode||a._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(s),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",e.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),o||(e.onPostInit&&e.onPostInit.call(this,r,!1),t&&t.call(this,"ok")),this.phase="idle"},_reloadAjax:function(t){var e=this.options;if(!e.initAjax||!e.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var n=this.persistence,i=$.extend({},e.initAjax);i.addActiveKey&&(i.data.activeKey=n.activeKey),i.addFocusedKey&&(i.data.focusedKey=n.focusedKey),i.addExpandedKeyList&&(i.data.expandedKeyList=n.expandedKeyList.join(",")),i.addSelectedKeyList&&(i.data.selectedKeyList=n.selectedKeyList.join(",")),i.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),i.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var a=n.isReloading();i.success=function(n,i,r){3==e.selectMode&&n.tree.tnRoot._updatePartSelectionState(),e.onPostInit&&e.onPostInit.call(n.tree,a,!1),t&&t.call(n.tree,"ok")},i.error=function(n,i,r,o){e.onPostInit&&e.onPostInit.call(n.tree,a,!0,i,r,o),t&&t.call(n.tree,"error",i,r,o)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(i)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(t){var e=this.tnRoot.toDict(!0);return t?e:e.children},serializeArray:function(t){for(var e=this.getSelectedNodes(t),n=this.$tree.attr("name")||this.$tree.attr("id"),i=[],a=0,r=e.length;a<r;a++)i.push({name:n,value:e[a].data.key});return i},getPersistData:function(){return this.persistence.toDict()},logDebug:function(t){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(t){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(t){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(t){this._load(t)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(t){var e=document.getElementById(this.options.idPrefix+t);if(e)return e.dtnode?e.dtnode:null;var n=null;return this.visit((function(e){if(e.data.key===t)return n=e,!1}),!0),n},getActiveNode:function(){return this.activeNode},reactivate:function(t){var e=this.activeNode;e&&(this.activeNode=null,e.activate(),t&&e.focus())},getSelectedNodes:function(t){var e=[];return this.tnRoot.visit((function(n){if(n.bSelected&&(e.push(n),!0===t))return"skip"})),e},activateKey:function(t){var e=null===t?null:this.getNodeByKey(t);return e?(e.focus(),e.activate(),e):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(t,e){var n=t.split(this.options.keyPathSeparator);return""===n[0]&&n.shift(),n[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),n.shift()),t=n.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(t,e)},selectKey:function(t,e){var n=this.getNodeByKey(t);return n?(n.select(e),n):null},enableUpdate:function(t){return this.bEnableUpdate==t?t:(this.bEnableUpdate=t,t&&this.redraw(),!t)},count:function(){return this.tnRoot.countChildren()},visit:function(t,e){return this.tnRoot.visit(t,e)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each((function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=iPos>=0?$.trim(title.substring(0,iPos)):$.trim(title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=""+$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(t){throw"Error parsing node data: "+t+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)}))},_checkConsistency:function(){},_setDndStatus:function(t,e,n,i,a){var r,o=t?$(t.span):null,s=$(e.span),l=0,c="center";if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===i||"before"===i||"over"===i){switch(i){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),c="top";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),c="bottom";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),s.addClass("dynatree-drop-target"),l=8}r=jquerySupports.positionMyOfs?{my:"left"+offsetString(l)+" center",at:"left "+c,of:s}:{my:"left center",at:"left "+c,of:s,offset:l+" 0"},this.$dndMarker.show().position(r)}else s.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===i?s.addClass("dynatree-drop-after"):s.removeClass("dynatree-drop-after"),"before"===i?s.addClass("dynatree-drop-before"):s.removeClass("dynatree-drop-before"),!0===a?(o&&o.addClass("dynatree-drop-accept"),s.addClass("dynatree-drop-accept"),n.addClass("dynatree-drop-accept")):(o&&o.removeClass("dynatree-drop-accept"),s.removeClass("dynatree-drop-accept"),n.removeClass("dynatree-drop-accept")),!1===a?(o&&o.addClass("dynatree-drop-reject"),s.addClass("dynatree-drop-reject"),n.addClass("dynatree-drop-reject")):(o&&o.removeClass("dynatree-drop-reject"),s.removeClass("dynatree-drop-reject"),n.removeClass("dynatree-drop-reject"))},_onDragEvent:function(t,e,n,i,a,r){var o,s,l,c=this.options.dnd,d=null,u=$(e.span);switch(t){case"helper":var h=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append(u.find(".dynatree-title").clone());$("ul.dynatree-container",e.tree.divTree).append(h),h.data("dtSourceNode",e),d=h;break;case"start":e.isStatusNode()?d=!1:c.onDragStart&&(d=c.onDragStart(e)),!1===d?(this.logDebug("tree.onDragStart() cancelled"),a.helper.trigger("mouseup"),a.helper.hide()):u.addClass("dynatree-drag-source");break;case"enter":d=!!(l=c.onDragEnter?c.onDragEnter(e,n,a,r):null)&&($.isArray(l)?{over:$.inArray("over",l)>=0,before:$.inArray("before",l)>=0,after:$.inArray("after",l)>=0}:{over:!0===l||"over"===l,before:!0===l||"before"===l,after:!0===l||"after"===l}),a.helper.data("enterResponse",d);break;case"over":if(o=null,!1===(s=a.helper.data("enterResponse")));else if("string"==typeof s)o=s;else{var f=u.offset(),p={x:i.pageX-f.left,y:i.pageY-f.top},m={x:p.x/u.width(),y:p.y/u.height()};s.after&&m.y>.75?o="after":!s.over&&s.after&&m.y>.5?o="after":s.before&&m.y<=.25?o="before":!s.over&&s.before&&m.y<=.5?o="before":s.over&&(o="over"),c.preventVoidMoves&&(e===n?o=null:"before"===o&&n&&e===n.getNextSibling()?o=null:"after"===o&&n&&e===n.getPrevSibling()?o=null:"over"===o&&n&&n.parent===e&&n.isLastSibling()&&(o=null)),a.helper.data("hitMode",o)}"over"===o&&c.autoExpandMS&&!1!==e.hasChildren()&&!e.bExpanded&&e.scheduleAction("expand",c.autoExpandMS),o&&c.onDragOver&&("over"!==(d=c.onDragOver(e,n,o,a,r))&&"before"!==d&&"after"!==d||(o=d)),this._setDndStatus(n,e,a.helper,o,!1!==d&&null!==o);break;case"drop":var _=a.helper.hasClass("dynatree-drop-reject");(o=a.helper.data("hitMode"))&&c.onDrop&&!_&&c.onDrop(e,n,o,a,r);break;case"leave":e.scheduleAction("cancel"),a.helper.data("enterResponse",null),a.helper.data("hitMode",null),this._setDndStatus(n,e,a.helper,"out",void 0),c.onDragLeave&&c.onDragLeave(e,n,a,r);break;case"stop":u.removeClass("dynatree-drag-source"),c.onDragStop&&c.onDragStop(e);break;default:throw"Unsupported drag event: "+t}return d},cancelDrag:function(){var t=$.ui.ddmanager.current;t&&t.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){if(versionCompare($.ui.version,"1.8")<0)return this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create();this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){this.options.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var t="click.dynatree dblclick.dynatree";function e(t){t=$.event.fix(t||window.event);var e=$.ui.dynatree.getNode(t.target);return!!e&&e._onFocus(t)}this.options.keyboard&&(t+=" keypress.dynatree keydown.dynatree"),this.element.bind(t,(function(t){var e=$.ui.dynatree.getNode(t.target);if(!e)return!0;var n=e.tree,i=n.options;n.logDebug("event(%s): dtnode: %s",t.type,e);var a=n.phase;n.phase="userEvent";try{switch(t.type){case"click":return(!i.onClick||!1!==i.onClick.call(n,e,t))&&e._onClick(t);case"dblclick":return(!i.onDblClick||!1!==i.onDblClick.call(n,e,t))&&e._onDblClick(t);case"keydown":return(!i.onKeydown||!1!==i.onKeydown.call(n,e,t))&&e._onKeydown(t);case"keypress":return(!i.onKeypress||!1!==i.onKeypress.call(n,e,t))&&e._onKeypress(t)}}catch(i){n.logWarning("bind(%o): dtnode: %o, error: %o",t,e,i)}finally{n.phase=a}}));var n=this.tree.divTree;n.addEventListener?(n.addEventListener("focus",e,!0),n.addEventListener("blur",e,!0)):n.onfocusin=n.onfocusout=e},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),versionCompare($.ui.version,"1.8")<0&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.extend($.ui.dynatree,{version:"1.2.8",buildType:"release",_DynaTreeClass:DynaTree,_DynaTreeNodeClass:DynaTreeNode,getNode:function(t){if(t instanceof DynaTreeNode)return t;for(void 0!==t.selector&&(t=t[0]);t;){if(t.dtnode)return t.dtnode;t=t.parentNode}return null},getPersistData:DynaTreeStatus._getTreePersistData}),$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,revert:!1,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",radio:"dynatree-radio",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:void 0},versionCompare($.ui.version,"1.8")<0&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(t,e){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=e.helper.data("dtSourceNode")||null;if(i)return n.offset.click.top=-2,n.offset.click.left=16,i.tree._onDragEvent("start",i,null,t,e,n)},drag:function(t,e){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=e.helper.data("dtSourceNode")||null,a=e.helper.data("dtTargetNode")||null,r=$.ui.dynatree.getNode(t.target);if(t.target&&!r&&$(t.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0)return;e.helper.data("dtTargetNode",r),a&&a!==r&&a.tree._onDragEvent("leave",a,i,t,e,n),r&&r.tree.options.dnd.onDrop&&(r===a?r.tree._onDragEvent("over",r,i,t,e,n):r.tree._onDragEvent("enter",r,i,t,e,n))},stop:function(t,e){var n=$(this).data("ui-draggable")||$(this).data("draggable"),i=e.helper.data("dtSourceNode")||null,a=e.helper.data("dtTargetNode")||null,r="mouseup"==t.type&&1==t.which;logMsg("draggable-connectToDynatree.stop: targetNode(from event): %s, dtTargetNode: %s",a,e.helper.data("dtTargetNode")),r||logMsg("Drag was cancelled"),a&&(r&&a.tree._onDragEvent("drop",a,i,t,e,n),a.tree._onDragEvent("leave",a,i,t,e,n)),i&&i.tree._onDragEvent("stop",i,null,t,e,n)}}),didRegisterDnd=!0)}}(jQuery)},function(module,exports,__webpack_require__){(function($){var jQuery=__webpack_require__(71);if(!WYMeditor)var WYMeditor={};!function(){if(window.console&&console.firebug)WYMeditor.console=window.console;else{var t=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];WYMeditor.console={};for(var e=0;e<t.length;++e)WYMeditor.console[t[e]]=function(){}}}(),jQuery.extend(WYMeditor,{VERSION:"0.5-rc1",INSTANCES:[],STRINGS:[],SKINS:[],NAME:"name",INDEX:"{Wym_Index}",WYM_INDEX:"wym_index",BASE_PATH:"{Wym_Base_Path}",CSS_PATH:"{Wym_Css_Path}",WYM_PATH:"{Wym_Wym_Path}",SKINS_DEFAULT_PATH:"skins/",SKINS_DEFAULT_CSS:"skin.css",SKINS_DEFAULT_JS:"skin.js",LANG_DEFAULT_PATH:"lang/",IFRAME_BASE_PATH:"{Wym_Iframe_Base_Path}",IFRAME_DEFAULT:"iframe/default/",JQUERY_PATH:"{Wym_Jquery_Path}",DIRECTION:"{Wym_Direction}",LOGO:"{Wym_Logo}",TOOLS:"{Wym_Tools}",TOOLS_ITEMS:"{Wym_Tools_Items}",TOOL_NAME:"{Wym_Tool_Name}",TOOL_TITLE:"{Wym_Tool_Title}",TOOL_CLASS:"{Wym_Tool_Class}",CLASSES:"{Wym_Classes}",CLASSES_ITEMS:"{Wym_Classes_Items}",CLASS_NAME:"{Wym_Class_Name}",CLASS_TITLE:"{Wym_Class_Title}",CONTAINERS:"{Wym_Containers}",CONTAINERS_ITEMS:"{Wym_Containers_Items}",CONTAINER_NAME:"{Wym_Container_Name}",CONTAINER_TITLE:"{Wym_Containers_Title}",CONTAINER_CLASS:"{Wym_Container_Class}",HTML:"{Wym_Html}",IFRAME:"{Wym_Iframe}",STATUS:"{Wym_Status}",DIALOG_TITLE:"{Wym_Dialog_Title}",DIALOG_BODY:"{Wym_Dialog_Body}",STRING:"string",BODY:"body",DIV:"div",P:"p",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",PRE:"pre",BLOCKQUOTE:"blockquote",A:"a",BR:"br",IMG:"img",TABLE:"table",TD:"td",TH:"th",UL:"ul",OL:"ol",LI:"li",CLASS:"class",HREF:"href",SRC:"src",TITLE:"title",ALT:"alt",DIALOG_LINK:"Link",DIALOG_IMAGE:"Image",DIALOG_TABLE:"Table",DIALOG_PASTE:"Paste_From_Word",BOLD:"Bold",ITALIC:"Italic",CREATE_LINK:"CreateLink",INSERT_IMAGE:"InsertImage",INSERT_TABLE:"InsertTable",INSERT_HTML:"InsertHTML",PASTE:"Paste",INDENT:"Indent",OUTDENT:"Outdent",TOGGLE_HTML:"ToggleHtml",FORMAT_BLOCK:"FormatBlock",PREVIEW:"Preview",UNLINK:"Unlink",INSERT_UNORDEREDLIST:"InsertUnorderedList",INSERT_ORDEREDLIST:"InsertOrderedList",MAIN_CONTAINERS:new Array("p","h1","h2","h3","h4","h5","h6","pre","blockquote"),BLOCKS:new Array("address","blockquote","div","dl","fieldset","form","h1","h2","h3","h4","h5","h6","hr","noscript","ol","p","pre","table","ul","dd","dt","li","tbody","td","tfoot","th","thead","tr"),KEY:{BACKSPACE:8,ENTER:13,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,CURSOR:new Array(37,38,39,40),DELETE:46},NODE:{ELEMENT:1,ATTRIBUTE:2,TEXT:3},editor:function(t,e){this._index=WYMeditor.INSTANCES.push(this)-1,this._element=t,this._options=e,this._html=jQuery(t).val(),this._options.html&&(this._html=this._options.html),this._options.basePath=this._options.basePath||this.computeBasePath(),this._options.skinPath=this._options.skinPath||this._options.basePath+WYMeditor.SKINS_DEFAULT_PATH+this._options.skin+"/",this._options.wymPath=this._options.wymPath||this.computeWymPath(),this._options.langPath=this._options.langPath||this._options.basePath+WYMeditor.LANG_DEFAULT_PATH,this._options.iframeBasePath=this._options.iframeBasePath||this._options.basePath+WYMeditor.IFRAME_DEFAULT,this._options.jQueryPath=this._options.jQueryPath||this.computeJqueryPath(),this.init()}}),jQuery.fn.wymeditor=function(t){return t=jQuery.extend({html:"",basePath:!1,skinPath:!1,wymPath:!1,iframeBasePath:!1,jQueryPath:!1,styles:!1,stylesheet:!1,skin:"default",initSkin:!0,loadSkin:!0,lang:"en",direction:"ltr",boxHtml:"<div class='wym_box'><div class='wym_area_top'>"+WYMeditor.TOOLS+"</div><div class='wym_area_left'></div><div class='wym_area_right'>"+WYMeditor.CONTAINERS+WYMeditor.CLASSES+"</div><div class='wym_area_main'>"+WYMeditor.HTML+WYMeditor.IFRAME+WYMeditor.STATUS+"</div><div class='wym_area_bottom'>"+WYMeditor.LOGO+"</div></div>",logoHtml:"<a class='wym_wymeditor_link' href='http://www.wymeditor.org/'>WYMeditor</a>",iframeHtml:"<div class='wym_iframe wym_section'><iframe src='/page/get_editor_iframe' onload='this.contentWindow.parent.WYMeditor.INSTANCES["+WYMeditor.INDEX+"].initIframe(this)'></iframe></div>",editorStyles:[],toolsHtml:"<div class='wym_tools wym_section'><h2>{Tools}</h2><ul>"+WYMeditor.TOOLS_ITEMS+"</ul></div>",toolsItemHtml:"<li class='"+WYMeditor.TOOL_CLASS+"'><a href='#' name='"+WYMeditor.TOOL_NAME+"' title='"+WYMeditor.TOOL_TITLE+"'>"+WYMeditor.TOOL_TITLE+"</a></li>",toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:"Superscript",css:"wym_tools_superscript"},{name:"Subscript",title:"Subscript",css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image"},{name:"InsertTable",title:"Table",css:"wym_tools_table"},{name:"Paste",title:"Paste_From_Word",css:"wym_tools_paste"},{name:"ToggleHtml",title:"HTML",css:"wym_tools_html"},{name:"Preview",title:"Preview",css:"wym_tools_preview"}],containersHtml:"<div class='wym_containers wym_section'><h2>{Containers}</h2><ul>"+WYMeditor.CONTAINERS_ITEMS+"</ul></div>",containersItemHtml:"<li class='"+WYMeditor.CONTAINER_CLASS+"'><a href='#' name='"+WYMeditor.CONTAINER_NAME+"'>"+WYMeditor.CONTAINER_TITLE+"</a></li>",containersItems:[{name:"P",title:"Paragraph",css:"wym_containers_p"},{name:"H1",title:"Heading_1",css:"wym_containers_h1"},{name:"H2",title:"Heading_2",css:"wym_containers_h2"},{name:"H3",title:"Heading_3",css:"wym_containers_h3"},{name:"H4",title:"Heading_4",css:"wym_containers_h4"},{name:"H5",title:"Heading_5",css:"wym_containers_h5"},{name:"H6",title:"Heading_6",css:"wym_containers_h6"},{name:"PRE",title:"Preformatted",css:"wym_containers_pre"},{name:"BLOCKQUOTE",title:"Blockquote",css:"wym_containers_blockquote"},{name:"TH",title:"Table_Header",css:"wym_containers_th"}],classesHtml:"<div class='wym_classes wym_section'><h2>{Classes}</h2><ul>"+WYMeditor.CLASSES_ITEMS+"</ul></div>",classesItemHtml:"<li><a href='#' name='"+WYMeditor.CLASS_NAME+"'>"+WYMeditor.CLASS_TITLE+"</a></li>",classesItems:[],statusHtml:"<div class='wym_status wym_section'><h2>{Status}</h2></div>",htmlHtml:"<div class='wym_html wym_section'><h2>{Source_Code}</h2><textarea class='wym_html_val'></textarea></div>",boxSelector:".wym_box",toolsSelector:".wym_tools",toolsListSelector:" ul",containersSelector:".wym_containers",classesSelector:".wym_classes",htmlSelector:".wym_html",iframeSelector:".wym_iframe iframe",iframeBodySelector:".wym_iframe",statusSelector:".wym_status",toolSelector:".wym_tools a",containerSelector:".wym_containers a",classSelector:".wym_classes a",htmlValSelector:".wym_html_val",hrefSelector:".wym_href",srcSelector:".wym_src",titleSelector:".wym_title",altSelector:".wym_alt",textSelector:".wym_text",rowsSelector:".wym_rows",colsSelector:".wym_cols",captionSelector:".wym_caption",summarySelector:".wym_summary",submitSelector:".wym_submit",cancelSelector:".wym_cancel",previewSelector:"",dialogTypeSelector:".wym_dialog_type",dialogLinkSelector:".wym_dialog_link",dialogImageSelector:".wym_dialog_image",dialogTableSelector:".wym_dialog_table",dialogPasteSelector:".wym_dialog_paste",dialogPreviewSelector:".wym_dialog_preview",updateSelector:".wymupdate",updateEvent:"click",dialogFeatures:"menubar=no,titlebar=no,toolbar=no,resizable=no,width=560,height=300,top=0,left=0",dialogFeaturesPreview:"menubar=no,titlebar=no,toolbar=no,resizable=no,scrollbars=yes,width=560,height=300,top=0,left=0",dialogHtml:"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'><html dir='"+WYMeditor.DIRECTION+"'><head><link rel='stylesheet' type='text/css' media='screen' href='"+WYMeditor.CSS_PATH+"' /><title>"+WYMeditor.DIALOG_TITLE+"</title><script type='text/javascript' src='"+WYMeditor.JQUERY_PATH+"'><\/script><script type='text/javascript' src='"+WYMeditor.WYM_PATH+"'><\/script></head>"+WYMeditor.DIALOG_BODY+"</html>",dialogLinkHtml:"<body class='wym_dialog wym_dialog_link' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'><form><fieldset><input type='hidden' class='wym_dialog_type' value='"+WYMeditor.DIALOG_LINK+"' /><legend>{Link}</legend><div class='row'><label>{URL}</label><input type='text' class='wym_href' value='' size='40' /></div><div class='row'><label>{Title}</label><input type='text' class='wym_title' value='' size='40' /></div><div class='row row-indent'><input class='wym_submit' type='button' value='{Submit}' /><input class='wym_cancel' type='button'value='{Cancel}' /></div></fieldset></form></body>",dialogImageHtml:"<body class='wym_dialog wym_dialog_image' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'><form><fieldset><input type='hidden' class='wym_dialog_type' value='"+WYMeditor.DIALOG_IMAGE+"' /><legend>{Image}</legend><div class='row'><label>{URL}</label><input type='text' class='wym_src' value='' size='40' /></div><div class='row'><label>{Alternative_Text}</label><input type='text' class='wym_alt' value='' size='40' /></div><div class='row'><label>{Title}</label><input type='text' class='wym_title' value='' size='40' /></div><div class='row row-indent'><input class='wym_submit' type='button' value='{Submit}' /><input class='wym_cancel' type='button'value='{Cancel}' /></div></fieldset></form></body>",dialogTableHtml:"<body class='wym_dialog wym_dialog_table' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'><form><fieldset><input type='hidden' class='wym_dialog_type' value='"+WYMeditor.DIALOG_TABLE+"' /><legend>{Table}</legend><div class='row'><label>{Caption}</label><input type='text' class='wym_caption' value='' size='40' /></div><div class='row'><label>{Summary}</label><input type='text' class='wym_summary' value='' size='40' /></div><div class='row'><label>{Number_Of_Rows}</label><input type='text' class='wym_rows' value='3' size='3' /></div><div class='row'><label>{Number_Of_Cols}</label><input type='text' class='wym_cols' value='2' size='3' /></div><div class='row row-indent'><input class='wym_submit' type='button' value='{Submit}' /><input class='wym_cancel' type='button'value='{Cancel}' /></div></fieldset></form></body>",dialogPasteHtml:"<body class='wym_dialog wym_dialog_paste' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'><form><input type='hidden' class='wym_dialog_type' value='"+WYMeditor.DIALOG_PASTE+"' /><fieldset><legend>{Paste_From_Word}</legend><div class='row'><textarea class='wym_text' rows='10' cols='50'></textarea></div><div class='row'><input class='wym_submit' type='button' value='{Submit}' /><input class='wym_cancel' type='button'value='{Cancel}' /></div></fieldset></form></body>",dialogPreviewHtml:"<body class='wym_dialog wym_dialog_preview' onload='WYMeditor.INIT_DIALOG("+WYMeditor.INDEX+")'></body>",dialogStyles:[],stringDelimiterLeft:"{",stringDelimiterRight:"}",preInit:null,preBind:null,postInit:null,preInitDialog:null,postInitDialog:null},t),this.each((function(){new WYMeditor.editor(jQuery(this),t)}))},jQuery.extend({wymeditors:function(t){return WYMeditor.INSTANCES[t]}}),WYMeditor.editor.prototype.init=function(){if(jQuery.browser.msie)var WymClass=new WYMeditor.WymClassExplorer(this);else if(jQuery.browser.mozilla)var WymClass=new WYMeditor.WymClassMozilla(this);else if(jQuery.browser.opera)var WymClass=new WYMeditor.WymClassOpera(this);else if(jQuery.browser.safari||jQuery.browser.chrome)var WymClass=new WYMeditor.WymClassSafari(this);if(WymClass){jQuery.isFunction(this._options.preInit)&&this._options.preInit(this);var SaxListener=new WYMeditor.XhtmlSaxListener;for(var prop in jQuery.extend(SaxListener,WymClass),this.parser=new WYMeditor.XhtmlParser(SaxListener),(this._options.styles||this._options.stylesheet)&&this.configureEditorUsingRawCss(),this.helper=new WYMeditor.XmlHelper,WymClass)this[prop]=WymClass[prop];this._box=jQuery(this._element).hide().after(this._options.boxHtml).next().addClass("wym_box_"+this._index),jQuery.isFunction(jQuery.fn.data)&&(jQuery.data(this._box.get(0),WYMeditor.WYM_INDEX,this._index),jQuery.data(this._element.get(0),WYMeditor.WYM_INDEX,this._index));var h=WYMeditor.Helper,iframeHtml=this._options.iframeHtml;iframeHtml=h.replaceAll(iframeHtml,WYMeditor.INDEX,this._index),iframeHtml=h.replaceAll(iframeHtml,WYMeditor.IFRAME_BASE_PATH,this._options.iframeBasePath);var boxHtml=jQuery(this._box).html();boxHtml=h.replaceAll(boxHtml,WYMeditor.LOGO,this._options.logoHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS,this._options.toolsHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS,this._options.containersHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES,this._options.classesHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.HTML,this._options.htmlHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.IFRAME,iframeHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.STATUS,this._options.statusHtml);for(var aTools=eval(this._options.toolsItems),sTools="",i=0;i<aTools.length;i++){var oTool=aTools[i];if(oTool.name&&oTool.title)var sTool=this._options.toolsItemHtml;var sTool=h.replaceAll(sTool,WYMeditor.TOOL_NAME,oTool.name);sTool=h.replaceAll(sTool,WYMeditor.TOOL_TITLE,this._options.stringDelimiterLeft+oTool.title+this._options.stringDelimiterRight),sTool=h.replaceAll(sTool,WYMeditor.TOOL_CLASS,oTool.css),sTools+=sTool}boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS_ITEMS,sTools);for(var aClasses=eval(this._options.classesItems),sClasses="",i=0;i<aClasses.length;i++){var oClass=aClasses[i];if(oClass.name&&oClass.title)var sClass=this._options.classesItemHtml;sClass=h.replaceAll(sClass,WYMeditor.CLASS_NAME,oClass.name),sClass=h.replaceAll(sClass,WYMeditor.CLASS_TITLE,oClass.title),sClasses+=sClass}boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES_ITEMS,sClasses);for(var aContainers=eval(this._options.containersItems),sContainers="",i=0;i<aContainers.length;i++){var oContainer=aContainers[i];if(oContainer.name&&oContainer.title)var sContainer=this._options.containersItemHtml;sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_NAME,oContainer.name),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_TITLE,this._options.stringDelimiterLeft+oContainer.title+this._options.stringDelimiterRight),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_CLASS,oContainer.css),sContainers+=sContainer}boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS_ITEMS,sContainers),boxHtml=this.replaceStrings(boxHtml),jQuery(this._box).html(boxHtml),jQuery(this._box).find(this._options.htmlSelector).hide(),this.loadSkin()}},WYMeditor.editor.prototype.bindEvents=function(){var wym=this;jQuery(this._box).find(this._options.toolSelector).click((function(){return wym._iframe.contentWindow.focus(),wym.exec(jQuery(this).attr(WYMeditor.NAME)),!1})),jQuery(this._box).find(this._options.containerSelector).click((function(){return wym.container(jQuery(this).attr(WYMeditor.NAME)),!1})),jQuery(this._box).find(this._options.htmlValSelector).keyup((function(){jQuery(wym._doc.body).html(jQuery(this).val())})).focus((function(){jQuery(this).toggleClass("hasfocus")})).blur((function(){jQuery(this).toggleClass("hasfocus")})),jQuery(this._box).find(this._options.classSelector).click((function(){var aClasses=eval(wym._options.classesItems),sName=jQuery(this).attr(WYMeditor.NAME),oClass=WYMeditor.Helper.findByName(aClasses,sName);if(oClass){var jqexpr=oClass.expr;wym.toggleClass(sName,jqexpr)}return wym._iframe.contentWindow.focus(),!1})),jQuery(this._options.updateSelector).bind(this._options.updateEvent,(function(){wym.update()}))},WYMeditor.editor.prototype.ready=function(){return null!=this._doc},WYMeditor.editor.prototype.box=function(){return this._box},WYMeditor.editor.prototype.html=function(t){if("string"!=typeof t)return jQuery(this._doc.body).html();jQuery(this._doc.body).html(t)},WYMeditor.editor.prototype.xhtml=function(){return this.parser.parse(this.html())},WYMeditor.editor.prototype.exec=function(t){switch(t){case WYMeditor.CREATE_LINK:(this.container()||this._selected_image)&&this.dialog(WYMeditor.DIALOG_LINK);break;case WYMeditor.INSERT_IMAGE:this.dialog(WYMeditor.DIALOG_IMAGE);break;case WYMeditor.INSERT_TABLE:this.dialog(WYMeditor.DIALOG_TABLE);break;case WYMeditor.PASTE:this.dialog(WYMeditor.DIALOG_PASTE);break;case WYMeditor.TOGGLE_HTML:this.update(),this.toggleHtml(),jQuery(this._box).find(this._options.htmlSelector).is(":visible")||this.listen();break;case WYMeditor.PREVIEW:this.dialog(WYMeditor.PREVIEW,this._options.dialogFeaturesPreview);break;default:this._exec(t)}},WYMeditor.editor.prototype.container=function(t){if(!t)return this.selected();var e=null;if(t.toLowerCase()==WYMeditor.TH){switch((e=this.container()).tagName.toLowerCase()){case WYMeditor.TD:case WYMeditor.TH:break;default:var n=new Array(WYMeditor.TD,WYMeditor.TH);e=this.findUp(this.container(),n)}null!=e&&(t=e.tagName.toLowerCase()==WYMeditor.TD?WYMeditor.TH:WYMeditor.TD,this.switchTo(e,t),this.update())}else{n=new Array(WYMeditor.P,WYMeditor.H1,WYMeditor.H2,WYMeditor.H3,WYMeditor.H4,WYMeditor.H5,WYMeditor.H6,WYMeditor.PRE,WYMeditor.BLOCKQUOTE);if(e=this.findUp(this.container(),n)){var i=null;if(t.toLowerCase()==WYMeditor.BLOCKQUOTE){var a=this.findUp(this.container(),WYMeditor.BLOCKQUOTE);if(null==a)i=this._doc.createElement(t),e.parentNode.insertBefore(i,e),i.appendChild(e),this.setFocusToNode(i.firstChild);else{var r=a.childNodes,o=r.length,s=null;o>0&&(s=r.item(0));for(var l=0;l<o;l++)a.parentNode.insertBefore(r.item(0),a);a.parentNode.removeChild(a),s&&this.setFocusToNode(s)}}else this.switchTo(e,t);this.update()}}},WYMeditor.editor.prototype.toggleClass=function(t,e){var n=this._selected_image?this._selected_image:jQuery(this.selected());n=jQuery(n).parentsOrSelf(e),jQuery(n).toggleClass(t),jQuery(n).attr(WYMeditor.CLASS)||jQuery(n).removeAttr(this._class)},WYMeditor.editor.prototype.findUp=function(t,e){if(t){var n=t.tagName.toLowerCase();if(typeof e==WYMeditor.STRING)for(;n!=e&&n!=WYMeditor.BODY;)n=(t=t.parentNode).tagName.toLowerCase();else for(var i=!1;!i&&n!=WYMeditor.BODY;){for(var a=0;a<e.length;a++)if(n==e[a]){i=!0;break}i||(n=(t=t.parentNode).tagName.toLowerCase())}return n!=WYMeditor.BODY?t:null}return null},WYMeditor.editor.prototype.switchTo=function(t,e){var n=this._doc.createElement(e),i=jQuery(t).html();t.parentNode.replaceChild(n,t),jQuery(n).html(i),this.setFocusToNode(n)},WYMeditor.editor.prototype.replaceStrings=function(sVal){if(!WYMeditor.STRINGS[this._options.lang])try{eval(jQuery.ajax({url:this._options.langPath+this._options.lang+".js",async:!1}).responseText)}catch(t){return WYMeditor.console.error("WYMeditor: error while parsing language file."),sVal}for(var key in WYMeditor.STRINGS[this._options.lang])sVal=WYMeditor.Helper.replaceAll(sVal,this._options.stringDelimiterLeft+key+this._options.stringDelimiterRight,WYMeditor.STRINGS[this._options.lang][key]);return sVal},WYMeditor.editor.prototype.encloseString=function(t){return this._options.stringDelimiterLeft+t+this._options.stringDelimiterRight},WYMeditor.editor.prototype.status=function(t){jQuery(this._box).find(this._options.statusSelector).html(t)},WYMeditor.editor.prototype.update=function(){var t=this.xhtml();jQuery(this._element).val(t),jQuery(this._box).find(this._options.htmlValSelector).not(".hasfocus").val(t)},WYMeditor.editor.prototype.dialog=function(t,e,n){var i=e||this._wym._options.dialogFeatures,a=window.open("","dialog",i);if(a){var r="";switch(t){case WYMeditor.DIALOG_LINK:r=this._options.dialogLinkHtml;break;case WYMeditor.DIALOG_IMAGE:r=this._options.dialogImageHtml;break;case WYMeditor.DIALOG_TABLE:r=this._options.dialogTableHtml;break;case WYMeditor.DIALOG_PASTE:r=this._options.dialogPasteHtml;break;case WYMeditor.PREVIEW:r=this._options.dialogPreviewHtml;break;default:r=n}var o=WYMeditor.Helper,s=this._options.dialogHtml;s=o.replaceAll(s,WYMeditor.BASE_PATH,this._options.basePath),s=o.replaceAll(s,WYMeditor.DIRECTION,this._options.direction),s=o.replaceAll(s,WYMeditor.CSS_PATH,this._options.skinPath+WYMeditor.SKINS_DEFAULT_CSS),s=o.replaceAll(s,WYMeditor.WYM_PATH,this._options.wymPath),s=o.replaceAll(s,WYMeditor.JQUERY_PATH,this._options.jQueryPath),s=o.replaceAll(s,WYMeditor.DIALOG_TITLE,this.encloseString(t)),s=o.replaceAll(s,WYMeditor.DIALOG_BODY,r),s=o.replaceAll(s,WYMeditor.INDEX,this._index),s=this.replaceStrings(s);var l=a.document;l.write(s),l.close()}},WYMeditor.editor.prototype.toggleHtml=function(){jQuery(this._box).find(this._options.htmlSelector).toggle()},WYMeditor.editor.prototype.uniqueStamp=function(){return"wym-"+(new Date).getTime()},WYMeditor.editor.prototype.paste=function(t){var e,n=this.selected(),i=t.split(this._newLine+this._newLine),a=new RegExp(this._newLine,"g");if(n&&n.tagName.toLowerCase()!=WYMeditor.BODY)for(x=i.length-1;x>=0;x--)e=(e=i[x]).replace(a,"<br />"),jQuery(n).after("<p>"+e+"</p>");else for(x=0;x<i.length;x++)e=(e=i[x]).replace(a,"<br />"),jQuery(this._doc.body).append("<p>"+e+"</p>")},WYMeditor.editor.prototype.insert=function(t){null!=this._iframe.contentWindow.getSelection().focusNode?this._exec(WYMeditor.INSERT_HTML,t):this.paste(t)},WYMeditor.editor.prototype.wrap=function(t,e){null!=this._iframe.contentWindow.getSelection().focusNode&&this._exec(WYMeditor.INSERT_HTML,t+this._iframe.contentWindow.getSelection().toString()+e)},WYMeditor.editor.prototype.unwrap=function(){null!=this._iframe.contentWindow.getSelection().focusNode&&this._exec(WYMeditor.INSERT_HTML,this._iframe.contentWindow.getSelection().toString())},WYMeditor.editor.prototype.addCssRules=function(t,e){var n=t.styleSheets[0];if(n)for(var i=0;i<e.length;i++){var a=e[i];a.name&&a.css&&this.addCssRule(n,a)}},WYMeditor.editor.prototype.computeBasePath=function(){return jQuery(jQuery.grep(jQuery("script"),(function(t){return t.src&&t.src.match(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/)}))).attr("src").replace(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/,"")},WYMeditor.editor.prototype.computeWymPath=function(){return jQuery(jQuery.grep(jQuery("script"),(function(t){return t.src&&t.src.match(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/)}))).attr("src")},WYMeditor.editor.prototype.computeJqueryPath=function(){return jQuery(jQuery.grep(jQuery("script"),(function(t){return t.src&&t.src.match(/jquery(-(.*)){0,1}(\.pack|\.min|\.packed)?\.js(\?.*)?$/)}))).attr("src")},WYMeditor.editor.prototype.computeCssPath=function(){return jQuery(jQuery.grep(jQuery("link"),(function(t){return t.href&&t.href.match(/wymeditor\/skins\/(.*)screen\.css(\?.*)?$/)}))).attr("href")},WYMeditor.editor.prototype.configureEditorUsingRawCss=function(){var t=new WYMeditor.WymCssParser;this._options.stylesheet?t.parse(jQuery.ajax({url:this._options.stylesheet,async:!1}).responseText):t.parse(this._options.styles,!1),0==this._options.classesItems.length&&(this._options.classesItems=t.css_settings.classesItems),0==this._options.editorStyles.length&&(this._options.editorStyles=t.css_settings.editorStyles),0==this._options.dialogStyles.length&&(this._options.dialogStyles=t.css_settings.dialogStyles)},WYMeditor.editor.prototype.listen=function(){jQuery(this._doc.body).bind("mousedown",this.mousedown);for(var t=this._doc.body.getElementsByTagName("img"),e=0;e<t.length;e++)jQuery(t[e]).bind("mousedown",this.mousedown)},WYMeditor.editor.prototype.mousedown=function(t){WYMeditor.INSTANCES[this.ownerDocument.title]._selected_image=this.tagName.toLowerCase()==WYMeditor.IMG?this:null,t.stopPropagation()},WYMeditor.loadCss=function(t){var e=document.createElement("link");e.rel="stylesheet",e.href=t,jQuery("head").get(0).appendChild(e)},WYMeditor.editor.prototype.loadSkin=function(){if(this._options.loadSkin&&!WYMeditor.SKINS[this._options.skin]){var found=!1,rExp=new RegExp(this._options.skin+"/"+WYMeditor.SKINS_DEFAULT_CSS+"$");jQuery("link").each((function(){this.href.match(rExp)&&(found=!0)})),found||WYMeditor.loadCss(this._options.skinPath+WYMeditor.SKINS_DEFAULT_CSS)}jQuery(this._box).addClass("wym_skin_"+this._options.skin),this._options.initSkin&&!WYMeditor.SKINS[this._options.skin]&&eval(jQuery.ajax({url:this._options.skinPath+WYMeditor.SKINS_DEFAULT_JS,async:!1}).responseText),WYMeditor.SKINS[this._options.skin]&&WYMeditor.SKINS[this._options.skin].init&&WYMeditor.SKINS[this._options.skin].init(this)},WYMeditor.INIT_DIALOG=function(index){var wym=window.opener.WYMeditor.INSTANCES[index],doc=window.document,selected=wym.selected(),dialogType=jQuery(wym._options.dialogTypeSelector).val(),sStamp=wym.uniqueStamp();switch(dialogType){case WYMeditor.DIALOG_LINK:selected&&selected.tagName&&selected.tagName.toLowerCase!=WYMeditor.A&&(selected=jQuery(selected).parentsOrSelf(WYMeditor.A)),!selected&&wym._selected_image&&(selected=jQuery(wym._selected_image).parentsOrSelf(WYMeditor.A))}jQuery.isFunction(wym._options.preInitDialog)&&wym._options.preInitDialog(wym,window);var styles=doc.styleSheets[0],aCss=eval(wym._options.dialogStyles);wym.addCssRules(doc,aCss),selected&&(jQuery(wym._options.hrefSelector).val(jQuery(selected).attr(WYMeditor.HREF)),jQuery(wym._options.srcSelector).val(jQuery(selected).attr(WYMeditor.SRC)),jQuery(wym._options.titleSelector).val(jQuery(selected).attr(WYMeditor.TITLE)),jQuery(wym._options.altSelector).val(jQuery(selected).attr(WYMeditor.ALT))),wym._selected_image&&(jQuery(wym._options.dialogImageSelector+" "+wym._options.srcSelector).val(jQuery(wym._selected_image).attr(WYMeditor.SRC)),jQuery(wym._options.dialogImageSelector+" "+wym._options.titleSelector).val(jQuery(wym._selected_image).attr(WYMeditor.TITLE)),jQuery(wym._options.dialogImageSelector+" "+wym._options.altSelector).val(jQuery(wym._selected_image).attr(WYMeditor.ALT))),jQuery(wym._options.dialogLinkSelector+" "+wym._options.submitSelector).click((function(){var t=jQuery(wym._options.hrefSelector).val();t.length>0&&(wym._exec(WYMeditor.CREATE_LINK,sStamp),jQuery("a[href="+sStamp+"]",wym._doc.body).attr(WYMeditor.HREF,t).attr(WYMeditor.TITLE,jQuery(wym._options.titleSelector).val())),window.close()})),jQuery(wym._options.dialogImageSelector+" "+wym._options.submitSelector).click((function(){var t=jQuery(wym._options.srcSelector).val();t.length>0&&(wym._exec(WYMeditor.INSERT_IMAGE,sStamp),jQuery("img[src$="+sStamp+"]",wym._doc.body).attr(WYMeditor.SRC,t).attr(WYMeditor.TITLE,jQuery(wym._options.titleSelector).val()).attr(WYMeditor.ALT,jQuery(wym._options.altSelector).val())),window.close()})),jQuery(wym._options.dialogTableSelector+" "+wym._options.submitSelector).click((function(){var t=jQuery(wym._options.rowsSelector).val(),e=jQuery(wym._options.colsSelector).val();if(t>0&&e>0){var n=wym._doc.createElement(WYMeditor.TABLE),i=null,a=jQuery(wym._options.captionSelector).val();for(n.createCaption().innerHTML=a,x=0;x<t;x++)for(i=n.insertRow(x),y=0;y<e;y++)i.insertCell(y);jQuery(n).attr("summary",jQuery(wym._options.summarySelector).val());var r=jQuery(wym.findUp(wym.container(),WYMeditor.MAIN_CONTAINERS)).get(0);r&&r.parentNode?jQuery(r).after(n):jQuery(wym._doc.body).append(n)}window.close()})),jQuery(wym._options.dialogPasteSelector+" "+wym._options.submitSelector).click((function(){var t=jQuery(wym._options.textSelector).val();wym.paste(t),window.close()})),jQuery(wym._options.dialogPreviewSelector+" "+wym._options.previewSelector).html(wym.xhtml()),jQuery(wym._options.cancelSelector).mousedown((function(){window.close()})),jQuery.isFunction(wym._options.postInitDialog)&&wym._options.postInitDialog(wym,window)},WYMeditor.XmlHelper=function(){return this._entitiesDiv=document.createElement("div"),this},WYMeditor.XmlHelper.prototype.tag=function(t,e,n){return n=n||!1,"<"+t+((e=e||!1)?this.tagOptions(e):"")+(n?">":" />")},WYMeditor.XmlHelper.prototype.contentTag=function(t,e,n){return"<"+t+((n=n||!1)?this.tagOptions(n):"")+">"+e+"</"+t+">"},WYMeditor.XmlHelper.prototype.cdataSection=function(t){return"<![CDATA["+t+"]]>"},WYMeditor.XmlHelper.prototype.escapeOnce=function(t){return this._fixDoubleEscape(this.escapeEntities(t))},WYMeditor.XmlHelper.prototype._fixDoubleEscape=function(t){return t.replace(/&amp;([a-z]+|(#\d+));/gi,"&$1;")},WYMeditor.XmlHelper.prototype.tagOptions=function(t){for(var e in this._formated_options="",t){var n=t[e];"function"!=typeof n&&n.length>0&&(parseInt(e)==e&&"object"==typeof n&&(e=n.shift(),n=n.pop()),""!=e&&""!=n&&(this._formated_options+=" "+e+'="'+this.escapeOnce(n)+'"'))}return this._formated_options},WYMeditor.XmlHelper.prototype.escapeEntities=function(t,e){this._entitiesDiv.innerHTML=t,this._entitiesDiv.textContent=t;var n=this._entitiesDiv.innerHTML;return void 0===e&&(0!=e&&(n=n.replace('"',"&quot;")),1==e&&(n=n.replace('"',"&#039;"))),n},WYMeditor.XmlHelper.prototype.parseAttributes=function(t){var e=[],n=t.split(/((=\s*")(")("))|((=\s*\')(\')(\'))|((=\s*[^>\s]*))/g);if(n.toString()!=t)for(var i in n){var a=n[i];if("function"!=typeof a&&0!=a.length){var r=new RegExp("(\\w+)\\s*"+a);if(match=t.match(r)){var o=a.replace(/^[\s=]+/,""),s=o.charAt(0);""!=(s='"'==s?'"':"'"==s?"'":"")&&(o='"'==s?o.replace(/^"|"+$/g,""):o.replace(/^'|'+$/g,"")),t=t.replace(match[0],""),e.push([match[1],o])}}}return e},WYMeditor.XhtmlValidator={_attributes:{core:{except:["base","head","html","meta","param","script","style","title"],attributes:["class","id","style","title","accesskey","tabindex"]},language:{except:["base","br","hr","iframe","param","script"],attributes:{dir:["ltr","rtl"],0:"lang",1:"xml:lang"}},keyboard:{attributes:{accesskey:/^(\w){1}$/,tabindex:/^(\d)+$/}}},_events:{window:{only:["body"],attributes:["onload","onunload"]},form:{only:["form","input","textarea","select","a","label","button"],attributes:["onchange","onsubmit","onreset","onselect","onblur","onfocus"]},keyboard:{except:["base","bdo","br","frame","frameset","head","html","iframe","meta","param","script","style","title"],attributes:["onkeydown","onkeypress","onkeyup"]},mouse:{except:["base","bdo","br","head","html","meta","param","script","style","title"],attributes:["onclick","ondblclick","onmousedown","onmousemove","onmouseover","onmouseout","onmouseup"]}},_tags:{a:{attributes:{0:"charset",1:"coords",2:"href",3:"hreflang",4:"name",rel:/^(alternate|designates|stylesheet|start|next|prev|contents|index|glossary|copyright|chapter|section|subsection|appendix|help|bookmark| |shortcut|icon)+$/,rev:/^(alternate|designates|stylesheet|start|next|prev|contents|index|glossary|copyright|chapter|section|subsection|appendix|help|bookmark| |shortcut|icon)+$/,shape:/^(rect|rectangle|circ|circle|poly|polygon)$/,5:"type"}},0:"abbr",1:"acronym",2:"address",area:{attributes:{0:"alt",1:"coords",2:"href",nohref:/^(true|false)$/,shape:/^(rect|rectangle|circ|circle|poly|polygon)$/},required:["alt"]},3:"b",base:{attributes:["href"],required:["href"]},bdo:{attributes:{dir:/^(ltr|rtl)$/},required:["dir"]},4:"big",blockquote:{attributes:["cite"]},5:"body",6:"br",button:{attributes:{disabled:/^(disabled)$/,type:/^(button|reset|submit)$/,0:"value"},inside:"form"},7:"caption",8:"cite",9:"code",col:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"},inside:"colgroup"},colgroup:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"}},10:"dd",del:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},11:"div",12:"dfn",13:"dl",14:"dt",15:"em",fieldset:{inside:"form"},form:{attributes:{0:"action",1:"accept",2:"accept-charset",3:"enctype",method:/^(get|post)$/},required:["action"]},head:{attributes:["profile"]},16:"h1",17:"h2",18:"h3",19:"h4",20:"h5",21:"h6",22:"hr",html:{attributes:["xmlns"]},23:"i",img:{attributes:["alt","src","height","ismap","longdesc","usemap","width"],required:["alt","src"]},input:{attributes:{0:"accept",1:"alt",checked:/^(checked)$/,disabled:/^(disabled)$/,maxlength:/^(\d)+$/,2:"name",readonly:/^(readonly)$/,size:/^(\d)+$/,3:"src",type:/^(button|checkbox|file|hidden|image|password|radio|reset|submit|text)$/,4:"value"},inside:"form"},ins:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},24:"kbd",label:{attributes:["for"],inside:"form"},25:"legend",26:"li",link:{attributes:{0:"charset",1:"href",2:"hreflang",media:/^(all|braille|print|projection|screen|speech|,|;| )+$/i,rel:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,rev:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,3:"type"},inside:"head"},map:{attributes:["id","name"],required:["id"]},meta:{attributes:{0:"content","http-equiv":/^(content\-type|expires|refresh|set\-cookie)$/i,1:"name",2:"scheme"},required:["content"]},27:"noscript",object:{attributes:["archive","classid","codebase","codetype","data","declare","height","name","standby","type","usemap","width"]},28:"ol",optgroup:{attributes:{0:"label",disabled:/^(disabled)$/},required:["label"]},option:{attributes:{0:"label",disabled:/^(disabled)$/,selected:/^(selected)$/,1:"value"},inside:"select"},29:"p",param:{attributes:{0:"type",valuetype:/^(data|ref|object)$/,1:"valuetype",2:"value"},required:["name"]},30:"pre",q:{attributes:["cite"]},31:"samp",script:{attributes:{type:/^(text\/ecmascript|text\/javascript|text\/jscript|text\/vbscript|text\/vbs|text\/xml)$/,0:"charset",defer:/^(defer)$/,1:"src"},required:["type"]},select:{attributes:{disabled:/^(disabled)$/,multiple:/^(multiple)$/,0:"name",1:"size"},inside:"form"},32:"small",33:"span",34:"strong",style:{attributes:{0:"type",media:/^(screen|tty|tv|projection|handheld|print|braille|aural|all)$/},required:["type"]},35:"sub",36:"sup",table:{attributes:{0:"border",1:"cellpadding",2:"cellspacing",frame:/^(void|above|below|hsides|lhs|rhs|vsides|box|border)$/,rules:/^(none|groups|rows|cols|all)$/,3:"summary",4:"width"}},tbody:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},td:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},textarea:{attributes:["cols","rows","disabled","name","readonly"],required:["cols","rows"],inside:"form"},tfoot:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom)$/,2:"baseline"}},th:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},thead:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},37:"title",tr:{attributes:{align:/^(right|left|center|justify|char)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},38:"tt",39:"ul",40:"var"},skiped_attributes:[],skiped_attribute_values:[],getValidTagAttributes:function(t,e){var n={},i=this.getPossibleTagAttributes(t);for(var a in e){var r=e[a],o=WYMeditor.Helper;o.contains(this.skiped_attributes,a)||o.contains(this.skiped_attribute_values,r)||"function"!=typeof r&&o.contains(i,a)&&(this.doesAttributeNeedsValidation(t,a)?this.validateAttribute(t,a,r)&&(n[a]=r):n[a]=r)}return n},getUniqueAttributesAndEventsForTag:function(t){var e=[];if(this._tags[t]&&this._tags[t].attributes)for(k in this._tags[t].attributes)e.push(parseInt(k)==k?this._tags[t].attributes[k]:k);return e},getDefaultAttributesAndEventsForTags:function(){var t=[];for(var e in this._events)t.push(this._events[e]);for(var e in this._attributes)t.push(this._attributes[e]);return t},isValidTag:function(t){if(this._tags[t])return!0;for(var e in this._tags)if(this._tags[e]==t)return!0;return!1},getDefaultAttributesAndEventsForTag:function(t){var e=[];if(this.isValidTag(t)){var n=this.getDefaultAttributesAndEventsForTags();for(var i in n){var a=n[i];if("object"==typeof a){var r=WYMeditor.Helper;if(a.except&&r.contains(a.except,t)||a.only&&!r.contains(a.only,t))continue;var o=a.attributes?a.attributes:a.events;for(var s in o)e.push("string"!=typeof o[s]?s:o[s])}}}return e},doesAttributeNeedsValidation:function(t,e){return this._tags[t]&&(this._tags[t].attributes&&this._tags[t].attributes[e]||this._tags[t].required&&WYMeditor.Helper.contains(this._tags[t].required,e))},validateAttribute:function(t,e,n){return!(this._tags[t]&&this._tags[t].attributes&&this._tags[t].attributes[e]&&n.length>0&&!n.match(this._tags[t].attributes[e])||this._tags[t]&&this._tags[t].required&&WYMeditor.Helper.contains(this._tags[t].required,e)&&0==n.length)&&void 0!==this._tags[t]},getPossibleTagAttributes:function(t){return this._possible_tag_attributes||(this._possible_tag_attributes={}),this._possible_tag_attributes[t]||(this._possible_tag_attributes[t]=this.getUniqueAttributesAndEventsForTag(t).concat(this.getDefaultAttributesAndEventsForTag(t))),this._possible_tag_attributes[t]}},WYMeditor.ParallelRegex=function(t){return this._case=t,this._patterns=[],this._labels=[],this._regex=null,this},WYMeditor.ParallelRegex.prototype.addPattern=function(t,e){e=e||!0;var n=this._patterns.length;this._patterns[n]=t,this._labels[n]=e,this._regex=null},WYMeditor.ParallelRegex.prototype.match=function(t){if(0==this._patterns.length)return[!1,""];var e=t.match(this._getCompoundedRegex());if(!e)return[!1,""];for(var n=e[0],i=1;i<e.length;i++)if(e[i])return[this._labels[i-1],n];return[!0,e[0]]},WYMeditor.ParallelRegex.prototype._getCompoundedRegex=function(){if(null==this._regex){for(var t=0,e=this._patterns.length;t<e;t++)this._patterns[t]="("+this._untokenizeRegex(this._tokenizeRegex(this._patterns[t]).replace(/([\/\(\)])/g,"\\$1"))+")";this._regex=new RegExp(this._patterns.join("|"),this._getPerlMatchingFlags())}return this._regex},WYMeditor.ParallelRegex.prototype._tokenizeRegex=function(t){return t.replace(/\(\?(i|m|s|x|U)\)/,"~~~~~~Tk1$1~~~~~~").replace(/\(\?(\-[i|m|s|x|U])\)/,"~~~~~~Tk2$1~~~~~~").replace(/\(\?\=(.*)\)/,"~~~~~~Tk3$1~~~~~~").replace(/\(\?\!(.*)\)/,"~~~~~~Tk4$1~~~~~~").replace(/\(\?\<\=(.*)\)/,"~~~~~~Tk5$1~~~~~~").replace(/\(\?\<\!(.*)\)/,"~~~~~~Tk6$1~~~~~~").replace(/\(\?\:(.*)\)/,"~~~~~~Tk7$1~~~~~~")},WYMeditor.ParallelRegex.prototype._untokenizeRegex=function(t){return t.replace(/~~~~~~Tk1(.{1})~~~~~~/,"(?$1)").replace(/~~~~~~Tk2(.{2})~~~~~~/,"(?$1)").replace(/~~~~~~Tk3(.*)~~~~~~/,"(?=$1)").replace(/~~~~~~Tk4(.*)~~~~~~/,"(?!$1)").replace(/~~~~~~Tk5(.*)~~~~~~/,"(?<=$1)").replace(/~~~~~~Tk6(.*)~~~~~~/,"(?<!$1)").replace(/~~~~~~Tk7(.*)~~~~~~/,"(?:$1)")},WYMeditor.ParallelRegex.prototype._getPerlMatchingFlags=function(){return this._case?"m":"mi"},WYMeditor.StateStack=function(t){return this._stack=[t],this},WYMeditor.StateStack.prototype.getCurrent=function(){return this._stack[this._stack.length-1]},WYMeditor.StateStack.prototype.enter=function(t){this._stack.push(t)},WYMeditor.StateStack.prototype.leave=function(){return 1!=this._stack.length&&(this._stack.pop(),!0)},WYMeditor.LEXER_ENTER=1,WYMeditor.LEXER_MATCHED=2,WYMeditor.LEXER_UNMATCHED=3,WYMeditor.LEXER_EXIT=4,WYMeditor.LEXER_SPECIAL=5,WYMeditor.Lexer=function(t,e,n){return e=e||"accept",this._case=n||!1,this._regexes={},this._parser=t,this._mode=new WYMeditor.StateStack(e),this._mode_handlers={},this._mode_handlers[e]=e,this},WYMeditor.Lexer.prototype.addPattern=function(t,e){e=e||"accept";void 0===this._regexes[e]&&(this._regexes[e]=new WYMeditor.ParallelRegex(this._case)),this._regexes[e].addPattern(t),void 0===this._mode_handlers[e]&&(this._mode_handlers[e]=e)},WYMeditor.Lexer.prototype.addEntryPattern=function(t,e,n){void 0===this._regexes[e]&&(this._regexes[e]=new WYMeditor.ParallelRegex(this._case)),this._regexes[e].addPattern(t,n),void 0===this._mode_handlers[n]&&(this._mode_handlers[n]=n)},WYMeditor.Lexer.prototype.addExitPattern=function(t,e){void 0===this._regexes[e]&&(this._regexes[e]=new WYMeditor.ParallelRegex(this._case)),this._regexes[e].addPattern(t,"__exit"),void 0===this._mode_handlers[e]&&(this._mode_handlers[e]=e)},WYMeditor.Lexer.prototype.addSpecialPattern=function(t,e,n){void 0===this._regexes[e]&&(this._regexes[e]=new WYMeditor.ParallelRegex(this._case)),this._regexes[e].addPattern(t,"_"+n),void 0===this._mode_handlers[n]&&(this._mode_handlers[n]=n)},WYMeditor.Lexer.prototype.mapHandler=function(t,e){this._mode_handlers[t]=e},WYMeditor.Lexer.prototype.parse=function(t){if(void 0===this._parser)return!1;for(var e,n=t.length;"object"==typeof(e=this._reduce(t));){t=e[0];var i=e[1],a=e[2],r=e[3];if(!this._dispatchTokens(i,a,r))return!1;if(""==t)return!0;if(t.length==n)return!1;n=t.length}return!!e&&this._invokeParser(t,WYMeditor.LEXER_UNMATCHED)},WYMeditor.Lexer.prototype._dispatchTokens=function(t,e,n){return n=n||!1,!!this._invokeParser(t,WYMeditor.LEXER_UNMATCHED)&&("boolean"==typeof n?this._invokeParser(e,WYMeditor.LEXER_MATCHED):this._isModeEnd(n)?!!this._invokeParser(e,WYMeditor.LEXER_EXIT)&&this._mode.leave():this._isSpecialMode(n)?(this._mode.enter(this._decodeSpecial(n)),!!this._invokeParser(e,WYMeditor.LEXER_SPECIAL)&&this._mode.leave()):(this._mode.enter(n),this._invokeParser(e,WYMeditor.LEXER_ENTER)))},WYMeditor.Lexer.prototype._isModeEnd=function(t){return"__exit"===t},WYMeditor.Lexer.prototype._isSpecialMode=function(t){return"_"==t.substring(0,1)},WYMeditor.Lexer.prototype._decodeSpecial=function(t){return t.substring(1)},WYMeditor.Lexer.prototype._invokeParser=function(content,is_match){if(!/ +/.test(content)&&(""===content||0==content))return!0;var current=this._mode.getCurrent(),handler=this._mode_handlers[current],result;return eval("result = this._parser."+handler+"(content, is_match);"),result},WYMeditor.Lexer.prototype._reduce=function(t){var e=this._regexes[this._mode.getCurrent()].match(t),n=e[1],i=e[0];if(i){var a=t.indexOf(n),r=t.substr(0,a);return[t=t.substring(a+n.length),r,n,i]}return!0},WYMeditor.XhtmlLexer=function(t){return jQuery.extend(this,new WYMeditor.Lexer(t,"Text")),this.mapHandler("Text","Text"),this.addTokens(),this.init(),this},WYMeditor.XhtmlLexer.prototype.init=function(){},WYMeditor.XhtmlLexer.prototype.addTokens=function(){this.addCommentTokens("Text"),this.addScriptTokens("Text"),this.addCssTokens("Text"),this.addTagTokens("Text")},WYMeditor.XhtmlLexer.prototype.addCommentTokens=function(t){this.addEntryPattern("\x3c!--",t,"Comment"),this.addExitPattern("--\x3e","Comment")},WYMeditor.XhtmlLexer.prototype.addScriptTokens=function(t){this.addEntryPattern("<script",t,"Script"),this.addExitPattern("<\/script>","Script")},WYMeditor.XhtmlLexer.prototype.addCssTokens=function(t){this.addEntryPattern("<style",t,"Css"),this.addExitPattern("</style>","Css")},WYMeditor.XhtmlLexer.prototype.addTagTokens=function(t){this.addSpecialPattern("<\\s*[a-z0-9:-]+\\s*>",t,"OpeningTag"),this.addEntryPattern("<[a-z0-9:-]+[\\/ \\>]+",t,"OpeningTag"),this.addInTagDeclarationTokens("OpeningTag"),this.addSpecialPattern("</\\s*[a-z0-9:-]+\\s*>",t,"ClosingTag")},WYMeditor.XhtmlLexer.prototype.addInTagDeclarationTokens=function(t){this.addSpecialPattern("\\s+",t,"Ignore"),this.addAttributeTokens(t),this.addExitPattern("/>",t),this.addExitPattern(">",t)},WYMeditor.XhtmlLexer.prototype.addAttributeTokens=function(t){this.addSpecialPattern("\\s*[a-z-_0-9]*:?[a-z-_0-9]+\\s*(?==)\\s*",t,"TagAttributes"),this.addEntryPattern('=\\s*"',t,"DoubleQuotedAttribute"),this.addPattern('\\\\"',"DoubleQuotedAttribute"),this.addExitPattern('"',"DoubleQuotedAttribute"),this.addEntryPattern("=\\s*'",t,"SingleQuotedAttribute"),this.addPattern("\\\\'","SingleQuotedAttribute"),this.addExitPattern("'","SingleQuotedAttribute"),this.addSpecialPattern("=\\s*[^>\\s]*",t,"UnquotedAttribute")},WYMeditor.XhtmlParser=function(t,e){e=e||"Text";return this._Lexer=new WYMeditor.XhtmlLexer(this),this._Listener=t,this._mode=e,this._matches=[],this._last_match="",this._current_match="",this},WYMeditor.XhtmlParser.prototype.parse=function(t){return this._Lexer.parse(this.beforeParsing(t)),this.afterParsing(this._Listener.getResult())},WYMeditor.XhtmlParser.prototype.beforeParsing=function(t){return(t.match(/class="MsoNormal"/)||t.match(/ns = "urn:schemas-microsoft-com/))&&this._Listener.avoidStylingTagsAndAttributes(),this._Listener.beforeParsing(t)},WYMeditor.XhtmlParser.prototype.afterParsing=function(t){return this._Listener._avoiding_tags_implicitly&&this._Listener.allowStylingTagsAndAttributes(),this._Listener.afterParsing(t)},WYMeditor.XhtmlParser.prototype.Ignore=function(t,e){return!0},WYMeditor.XhtmlParser.prototype.Text=function(t){return this._Listener.addContent(t),!0},WYMeditor.XhtmlParser.prototype.Comment=function(t,e){return this._addNonTagBlock(t,e,"addComment")},WYMeditor.XhtmlParser.prototype.Script=function(t,e){return this._addNonTagBlock(t,e,"addScript")},WYMeditor.XhtmlParser.prototype.Css=function(t,e){return this._addNonTagBlock(t,e,"addCss")},WYMeditor.XhtmlParser.prototype._addNonTagBlock=function(t,e,n){switch(e){case WYMeditor.LEXER_ENTER:this._non_tag=t;break;case WYMeditor.LEXER_UNMATCHED:this._non_tag+=t;break;case WYMeditor.LEXER_EXIT:switch(n){case"addComment":this._Listener.addComment(this._non_tag+t);break;case"addScript":this._Listener.addScript(this._non_tag+t);break;case"addCss":this._Listener.addCss(this._non_tag+t)}}return!0},WYMeditor.XhtmlParser.prototype.OpeningTag=function(t,e){switch(e){case WYMeditor.LEXER_ENTER:this._tag=this.normalizeTag(t),this._tag_attributes={};break;case WYMeditor.LEXER_SPECIAL:this._callOpenTagListener(this.normalizeTag(t));break;case WYMeditor.LEXER_EXIT:this._callOpenTagListener(this._tag,this._tag_attributes)}return!0},WYMeditor.XhtmlParser.prototype.ClosingTag=function(t,e){return this._callCloseTagListener(this.normalizeTag(t)),!0},WYMeditor.XhtmlParser.prototype._callOpenTagListener=function(t,e){e=e||{};this.autoCloseUnclosedBeforeNewOpening(t),this._Listener.isBlockTag(t)?(this._Listener._tag_stack.push(t),this._Listener.fixNestingBeforeOpeningBlockTag(t,e),this._Listener.openBlockTag(t,e),this._increaseOpenTagCounter(t)):this._Listener.isInlineTag(t)?this._Listener.inlineTag(t,e):(this._Listener.openUnknownTag(t,e),this._increaseOpenTagCounter(t)),this._Listener.last_tag=t,this._Listener.last_tag_opened=!0,this._Listener.last_tag_attributes=e},WYMeditor.XhtmlParser.prototype._callCloseTagListener=function(t){if(this._decreaseOpenTagCounter(t))if(this.autoCloseUnclosedBeforeTagClosing(t),this._Listener.isBlockTag(t)){var e=this._Listener._tag_stack.pop();if(0==e)return;e!=t&&(t=e),this._Listener.closeBlockTag(t)}else this._Listener.closeUnknownTag(t);else this._Listener.closeUnopenedTag(t);this._Listener.last_tag=t,this._Listener.last_tag_opened=!1},WYMeditor.XhtmlParser.prototype._increaseOpenTagCounter=function(t){this._Listener._open_tags[t]=this._Listener._open_tags[t]||0,this._Listener._open_tags[t]++},WYMeditor.XhtmlParser.prototype._decreaseOpenTagCounter=function(t){return!!this._Listener._open_tags[t]&&(this._Listener._open_tags[t]--,0==this._Listener._open_tags[t]&&(this._Listener._open_tags[t]=void 0),!0)},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeNewOpening=function(t){this._autoCloseUnclosed(t,!1)},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeTagClosing=function(t){this._autoCloseUnclosed(t,!0)},WYMeditor.XhtmlParser.prototype._autoCloseUnclosed=function(t,e){e=e||!1;if(this._Listener._open_tags)for(var n in this._Listener._open_tags){this._Listener._open_tags[n]>0&&this._Listener.shouldCloseTagAutomatically(n,t,e)&&this._callCloseTagListener(n,!0)}},WYMeditor.XhtmlParser.prototype.getTagReplacements=function(){return this._Listener.getTagReplacements()},WYMeditor.XhtmlParser.prototype.normalizeTag=function(t){t=t.replace(/^([\s<\/>]*)|([\s<\/>]*)$/gm,"").toLowerCase();var e=this._Listener.getTagReplacements();return e[t]?e[t]:t},WYMeditor.XhtmlParser.prototype.TagAttributes=function(t,e){return WYMeditor.LEXER_SPECIAL==e&&(this._current_attribute=t),!0},WYMeditor.XhtmlParser.prototype.DoubleQuotedAttribute=function(t,e){return WYMeditor.LEXER_UNMATCHED==e&&(this._tag_attributes[this._current_attribute]=t),!0},WYMeditor.XhtmlParser.prototype.SingleQuotedAttribute=function(t,e){return WYMeditor.LEXER_UNMATCHED==e&&(this._tag_attributes[this._current_attribute]=t),!0},WYMeditor.XhtmlParser.prototype.UnquotedAttribute=function(t,e){return this._tag_attributes[this._current_attribute]=t.replace(/^=/,""),!0},WYMeditor.XhtmlSaxListener=function(){return this.output="",this.helper=new WYMeditor.XmlHelper,this._open_tags={},this.validator=WYMeditor.XhtmlValidator,this._tag_stack=[],this.avoided_tags=[],this.entities={"&nbsp;":"&#160;","&iexcl;":"&#161;","&cent;":"&#162;","&pound;":"&#163;","&curren;":"&#164;","&yen;":"&#165;","&brvbar;":"&#166;","&sect;":"&#167;","&uml;":"&#168;","&copy;":"&#169;","&ordf;":"&#170;","&laquo;":"&#171;","&not;":"&#172;","&shy;":"&#173;","&reg;":"&#174;","&macr;":"&#175;","&deg;":"&#176;","&plusmn;":"&#177;","&sup2;":"&#178;","&sup3;":"&#179;","&acute;":"&#180;","&micro;":"&#181;","&para;":"&#182;","&middot;":"&#183;","&cedil;":"&#184;","&sup1;":"&#185;","&ordm;":"&#186;","&raquo;":"&#187;","&frac14;":"&#188;","&frac12;":"&#189;","&frac34;":"&#190;","&iquest;":"&#191;","&Agrave;":"&#192;","&Aacute;":"&#193;","&Acirc;":"&#194;","&Atilde;":"&#195;","&Auml;":"&#196;","&Aring;":"&#197;","&AElig;":"&#198;","&Ccedil;":"&#199;","&Egrave;":"&#200;","&Eacute;":"&#201;","&Ecirc;":"&#202;","&Euml;":"&#203;","&Igrave;":"&#204;","&Iacute;":"&#205;","&Icirc;":"&#206;","&Iuml;":"&#207;","&ETH;":"&#208;","&Ntilde;":"&#209;","&Ograve;":"&#210;","&Oacute;":"&#211;","&Ocirc;":"&#212;","&Otilde;":"&#213;","&Ouml;":"&#214;","&times;":"&#215;","&Oslash;":"&#216;","&Ugrave;":"&#217;","&Uacute;":"&#218;","&Ucirc;":"&#219;","&Uuml;":"&#220;","&Yacute;":"&#221;","&THORN;":"&#222;","&szlig;":"&#223;","&agrave;":"&#224;","&aacute;":"&#225;","&acirc;":"&#226;","&atilde;":"&#227;","&auml;":"&#228;","&aring;":"&#229;","&aelig;":"&#230;","&ccedil;":"&#231;","&egrave;":"&#232;","&eacute;":"&#233;","&ecirc;":"&#234;","&euml;":"&#235;","&igrave;":"&#236;","&iacute;":"&#237;","&icirc;":"&#238;","&iuml;":"&#239;","&eth;":"&#240;","&ntilde;":"&#241;","&ograve;":"&#242;","&oacute;":"&#243;","&ocirc;":"&#244;","&otilde;":"&#245;","&ouml;":"&#246;","&divide;":"&#247;","&oslash;":"&#248;","&ugrave;":"&#249;","&uacute;":"&#250;","&ucirc;":"&#251;","&uuml;":"&#252;","&yacute;":"&#253;","&thorn;":"&#254;","&yuml;":"&#255;","&OElig;":"&#338;","&oelig;":"&#339;","&Scaron;":"&#352;","&scaron;":"&#353;","&Yuml;":"&#376;","&fnof;":"&#402;","&circ;":"&#710;","&tilde;":"&#732;","&Alpha;":"&#913;","&Beta;":"&#914;","&Gamma;":"&#915;","&Delta;":"&#916;","&Epsilon;":"&#917;","&Zeta;":"&#918;","&Eta;":"&#919;","&Theta;":"&#920;","&Iota;":"&#921;","&Kappa;":"&#922;","&Lambda;":"&#923;","&Mu;":"&#924;","&Nu;":"&#925;","&Xi;":"&#926;","&Omicron;":"&#927;","&Pi;":"&#928;","&Rho;":"&#929;","&Sigma;":"&#931;","&Tau;":"&#932;","&Upsilon;":"&#933;","&Phi;":"&#934;","&Chi;":"&#935;","&Psi;":"&#936;","&Omega;":"&#937;","&alpha;":"&#945;","&beta;":"&#946;","&gamma;":"&#947;","&delta;":"&#948;","&epsilon;":"&#949;","&zeta;":"&#950;","&eta;":"&#951;","&theta;":"&#952;","&iota;":"&#953;","&kappa;":"&#954;","&lambda;":"&#955;","&mu;":"&#956;","&nu;":"&#957;","&xi;":"&#958;","&omicron;":"&#959;","&pi;":"&#960;","&rho;":"&#961;","&sigmaf;":"&#962;","&sigma;":"&#963;","&tau;":"&#964;","&upsilon;":"&#965;","&phi;":"&#966;","&chi;":"&#967;","&psi;":"&#968;","&omega;":"&#969;","&thetasym;":"&#977;","&upsih;":"&#978;","&piv;":"&#982;","&ensp;":"&#8194;","&emsp;":"&#8195;","&thinsp;":"&#8201;","&zwnj;":"&#8204;","&zwj;":"&#8205;","&lrm;":"&#8206;","&rlm;":"&#8207;","&ndash;":"&#8211;","&mdash;":"&#8212;","&lsquo;":"&#8216;","&rsquo;":"&#8217;","&sbquo;":"&#8218;","&ldquo;":"&#8220;","&rdquo;":"&#8221;","&bdquo;":"&#8222;","&dagger;":"&#8224;","&Dagger;":"&#8225;","&bull;":"&#8226;","&hellip;":"&#8230;","&permil;":"&#8240;","&prime;":"&#8242;","&Prime;":"&#8243;","&lsaquo;":"&#8249;","&rsaquo;":"&#8250;","&oline;":"&#8254;","&frasl;":"&#8260;","&euro;":"&#8364;","&image;":"&#8465;","&weierp;":"&#8472;","&real;":"&#8476;","&trade;":"&#8482;","&alefsym;":"&#8501;","&larr;":"&#8592;","&uarr;":"&#8593;","&rarr;":"&#8594;","&darr;":"&#8595;","&harr;":"&#8596;","&crarr;":"&#8629;","&lArr;":"&#8656;","&uArr;":"&#8657;","&rArr;":"&#8658;","&dArr;":"&#8659;","&hArr;":"&#8660;","&forall;":"&#8704;","&part;":"&#8706;","&exist;":"&#8707;","&empty;":"&#8709;","&nabla;":"&#8711;","&isin;":"&#8712;","&notin;":"&#8713;","&ni;":"&#8715;","&prod;":"&#8719;","&sum;":"&#8721;","&minus;":"&#8722;","&lowast;":"&#8727;","&radic;":"&#8730;","&prop;":"&#8733;","&infin;":"&#8734;","&ang;":"&#8736;","&and;":"&#8743;","&or;":"&#8744;","&cap;":"&#8745;","&cup;":"&#8746;","&int;":"&#8747;","&there4;":"&#8756;","&sim;":"&#8764;","&cong;":"&#8773;","&asymp;":"&#8776;","&ne;":"&#8800;","&equiv;":"&#8801;","&le;":"&#8804;","&ge;":"&#8805;","&sub;":"&#8834;","&sup;":"&#8835;","&nsub;":"&#8836;","&sube;":"&#8838;","&supe;":"&#8839;","&oplus;":"&#8853;","&otimes;":"&#8855;","&perp;":"&#8869;","&sdot;":"&#8901;","&lceil;":"&#8968;","&rceil;":"&#8969;","&lfloor;":"&#8970;","&rfloor;":"&#8971;","&lang;":"&#9001;","&rang;":"&#9002;","&loz;":"&#9674;","&spades;":"&#9824;","&clubs;":"&#9827;","&hearts;":"&#9829;","&diams;":"&#9830;"},this.block_tags=["a","abbr","acronym","address","area","b","base","bdo","big","blockquote","body","button","caption","cite","code","col","colgroup","dd","del","div","dfn","dl","dt","em","fieldset","form","head","h1","h2","h3","h4","h5","h6","html","i","ins","kbd","label","legend","li","map","noscript","object","ol","optgroup","option","p","param","pre","q","samp","script","select","small","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","tt","ul","var","extends"],this.inline_tags=["br","hr","img","input"],this},WYMeditor.XhtmlSaxListener.prototype.shouldCloseTagAutomatically=function(t,e,n){n=n||!1;return!("td"!=t||!(n&&"tr"==e||!n&&"td"==e))||!("option"!=t||!(n&&"select"==e||!n&&"option"==e))},WYMeditor.XhtmlSaxListener.prototype.beforeParsing=function(t){return this.output="",t},WYMeditor.XhtmlSaxListener.prototype.afterParsing=function(t){return t=this.replaceNamedEntities(t),t=this.joinRepeatedEntities(t),t=this.removeEmptyTags(t),t=this.removeBrInPre(t)},WYMeditor.XhtmlSaxListener.prototype.replaceNamedEntities=function(t){for(var e in this.entities)t=t.replace(new RegExp(e,"g"),this.entities[e]);return t},WYMeditor.XhtmlSaxListener.prototype.joinRepeatedEntities=function(t){var e="em|strong|sub|sup|acronym|pre|del|address";return t.replace(new RegExp("</("+e+")><\\1>",""),"").replace(new RegExp("(s*<("+e+")>s*){2}(.*)(s*</\\2>s*){2}",""),"<$2>$3<$2>")},WYMeditor.XhtmlSaxListener.prototype.removeEmptyTags=function(t){return t.replace(new RegExp("<("+this.block_tags.join("|").replace(/\|td/,"").replace(/\|p/,"").replace(/\|th/,"")+")>(<br />|&#160;|&nbsp;|\\s)*</\\1>","g"),"")},WYMeditor.XhtmlSaxListener.prototype.removeBrInPre=function(t){var e=t.match(new RegExp("<pre[^>]*>(.*?)</pre>","gmi"));if(e)for(var n=0;n<e.length;n++)t=t.replace(e[n],e[n].replace(new RegExp("<br />","g"),String.fromCharCode(13,10)));return t},WYMeditor.XhtmlSaxListener.prototype.getResult=function(){return this.output},WYMeditor.XhtmlSaxListener.prototype.getTagReplacements=function(){return{b:"strong",i:"em"}},WYMeditor.XhtmlSaxListener.prototype.addContent=function(t){this.output+=t},WYMeditor.XhtmlSaxListener.prototype.addComment=function(t){this.remove_comments&&(this.output+=t)},WYMeditor.XhtmlSaxListener.prototype.addScript=function(t){this.remove_scripts||(this.output+=t)},WYMeditor.XhtmlSaxListener.prototype.addCss=function(t){this.remove_embeded_styles||(this.output+=t)},WYMeditor.XhtmlSaxListener.prototype.openBlockTag=function(t,e){this.output+=this.helper.tag(t,this.validator.getValidTagAttributes(t,e),!0)},WYMeditor.XhtmlSaxListener.prototype.inlineTag=function(t,e){this.output+=this.helper.tag(t,this.validator.getValidTagAttributes(t,e))},WYMeditor.XhtmlSaxListener.prototype.openUnknownTag=function(t,e){},WYMeditor.XhtmlSaxListener.prototype.closeBlockTag=function(t){this.output=this.output.replace(/<br \/>$/,"")+this._getClosingTagContent("before",t)+"</"+t+">"+this._getClosingTagContent("after",t)},WYMeditor.XhtmlSaxListener.prototype.closeUnknownTag=function(t){},WYMeditor.XhtmlSaxListener.prototype.closeUnopenedTag=function(t){this.output+="</"+t+">"},WYMeditor.XhtmlSaxListener.prototype.avoidStylingTagsAndAttributes=function(){this.avoided_tags=["div","span"],this.validator.skiped_attributes=["style"],this.validator.skiped_attribute_values=["MsoNormal","main1"],this._avoiding_tags_implicitly=!0},WYMeditor.XhtmlSaxListener.prototype.allowStylingTagsAndAttributes=function(){this.avoided_tags=[],this.validator.skiped_attributes=[],this.validator.skiped_attribute_values=[],this._avoiding_tags_implicitly=!1},WYMeditor.XhtmlSaxListener.prototype.isBlockTag=function(t){return!WYMeditor.Helper.contains(this.avoided_tags,t)&&WYMeditor.Helper.contains(this.block_tags,t)},WYMeditor.XhtmlSaxListener.prototype.isInlineTag=function(t){return!WYMeditor.Helper.contains(this.avoided_tags,t)&&WYMeditor.Helper.contains(this.inline_tags,t)},WYMeditor.XhtmlSaxListener.prototype.insertContentAfterClosingTag=function(t,e){this._insertContentWhenClosingTag("after",t,e)},WYMeditor.XhtmlSaxListener.prototype.insertContentBeforeClosingTag=function(t,e){this._insertContentWhenClosingTag("before",t,e)},WYMeditor.XhtmlSaxListener.prototype.fixNestingBeforeOpeningBlockTag=function(t,e){"li"==t||"ul"!=t&&"ol"!=t||!this.last_tag||this.last_tag_opened||"li"!=this.last_tag||(this.output=this.output.replace(/<\/li>$/,""),this.insertContentAfterClosingTag(t,"</li>"))},WYMeditor.XhtmlSaxListener.prototype._insertContentWhenClosingTag=function(t,e,n){this["_insert_"+t+"_closing"]||(this["_insert_"+t+"_closing"]=[]),this["_insert_"+t+"_closing"][e]||(this["_insert_"+t+"_closing"][e]=[]),this["_insert_"+t+"_closing"][e].push(n)},WYMeditor.XhtmlSaxListener.prototype._getClosingTagContent=function(t,e){return this["_insert_"+t+"_closing"]&&this["_insert_"+t+"_closing"][e]&&this["_insert_"+t+"_closing"][e].length>0?this["_insert_"+t+"_closing"][e].pop():""},WYMeditor.WymCssLexer=function(t,e){e=void 0===e||e;return jQuery.extend(this,new WYMeditor.Lexer(t,e?"Ignore":"WymCss")),this.mapHandler("WymCss","Ignore"),1==e&&(this.addEntryPattern("/\\*[<\\s]*WYMeditor[>\\s]*\\*/","Ignore","WymCss"),this.addExitPattern("/\\*[</\\s]*WYMeditor[>\\s]*\\*/","WymCss")),this.addSpecialPattern("[\\sa-z1-6]*\\.[a-z-_0-9]+","WymCss","WymCssStyleDeclaration"),this.addEntryPattern("/\\*","WymCss","WymCssComment"),this.addExitPattern("\\*/","WymCssComment"),this.addEntryPattern("{","WymCss","WymCssStyle"),this.addExitPattern("}","WymCssStyle"),this.addEntryPattern("/\\*","WymCssStyle","WymCssFeedbackStyle"),this.addExitPattern("\\*/","WymCssFeedbackStyle"),this},WYMeditor.WymCssParser=function(){return this._in_style=!1,this._has_title=!1,this.only_wym_blocks=!0,this.css_settings={classesItems:[],editorStyles:[],dialogStyles:[]},this},WYMeditor.WymCssParser.prototype.parse=function(t,e){e=void 0===e?this.only_wym_blocks:e;this._Lexer=new WYMeditor.WymCssLexer(this,e),this._Lexer.parse(t)},WYMeditor.WymCssParser.prototype.Ignore=function(t,e){return!0},WYMeditor.WymCssParser.prototype.WymCssComment=function(t,e){return!t.match(/end[a-z0-9\s]*wym[a-z0-9\s]*/im)&&(e==WYMeditor.LEXER_UNMATCHED&&(this._in_style?this._current_item[this._current_element]&&(this._current_item[this._current_element].expressions?this._current_item[this._current_element].expressions.push(t):this._current_item[this._current_element].expressions=[t]):(this._has_title=!0,this._current_item={title:WYMeditor.Helper.trim(t)}),this._in_style=!0),!0)},WYMeditor.WymCssParser.prototype.WymCssStyle=function(t,e){return e==WYMeditor.LEXER_UNMATCHED?""!=(t=WYMeditor.Helper.trim(t))&&(this._current_item[this._current_element].style=t):e==WYMeditor.LEXER_EXIT&&(this._in_style=!1,this._has_title=!1,this.addStyleSetting(this._current_item)),!0},WYMeditor.WymCssParser.prototype.WymCssFeedbackStyle=function(t,e){return e==WYMeditor.LEXER_UNMATCHED&&(this._current_item[this._current_element].feedback_style=t.replace(/^([\s\/\*]*)|([\s\/\*]*)$/gm,"")),!0},WYMeditor.WymCssParser.prototype.WymCssStyleDeclaration=function(t){var e="";if((t=t.replace(/^([\s\.]*)|([\s\.*]*)$/gm,"")).indexOf(".")>0){var n=t.split(".");this._current_element=n[1];e=n[0]}else this._current_element=t;return this._has_title||(this._current_item={title:(e?e.toUpperCase()+": ":"")+this._current_element},this._has_title=!0),this._current_item[this._current_element]||(this._current_item[this._current_element]={name:this._current_element}),e&&(this._current_item[this._current_element].tags?this._current_item[this._current_element].tags.push(e):this._current_item[this._current_element].tags=[e]),!0},WYMeditor.WymCssParser.prototype.addStyleSetting=function(t){for(var e in t){var n=t[e];"object"==typeof n&&"title"!=e&&(this.css_settings.classesItems.push({name:WYMeditor.Helper.trim(n.name),title:t.title,expr:WYMeditor.Helper.trim((n.expressions||n.tags).join(", "))}),n.feedback_style&&this.css_settings.editorStyles.push({name:"."+WYMeditor.Helper.trim(n.name),css:n.feedback_style}),n.style&&this.css_settings.dialogStyles.push({name:"."+WYMeditor.Helper.trim(n.name),css:n.style}))}},jQuery.fn.isPhantomNode=function(){return 3==this[0].nodeType&&!/[^\t\n\r ]/.test(this[0].data)},WYMeditor.isPhantomNode=function(t){return 3==t.nodeType&&!/[^\t\n\r ]/.test(t.data)},WYMeditor.isPhantomString=function(t){return!/[^\t\n\r ]/.test(t)},jQuery.fn.parentsOrSelf=function(t){var e=this;return 3==e[0].nodeType&&(e=e.parents().slice(0,1)),1==e.filter(t).size()?e:e.parents(t).slice(0,1)},WYMeditor.Helper={replaceAll:function(t,e,n){var i=new RegExp(e,"g");return t.replace(i,n)},insertAt:function(t,e,n){return t.substr(0,n)+e+t.substring(n)},trim:function(t){return t.replace(/^(\s*)|(\s*)$/gm,"")},contains:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},indexOf:function(t,e){for(var n=-1,i=0;i<t.length;i++)if(t[i]==e){n=i;break}return n},findByName:function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.name==e)return i}return null}},WYMeditor.WymClassExplorer=function(t){this._wym=t,this._class="className",this._newLine="\r\n"},WYMeditor.WymClassExplorer.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentWindow.document;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),jQuery(this._doc.body).html(this._wym._html);var wym=this;this._doc.body.onfocus=function(){wym._doc.designMode="on",wym._doc=iframe.contentWindow.document},this._doc.onbeforedeactivate=function(){wym.saveCaret()},this._doc.onkeyup=function(){wym.saveCaret(),wym.keyup()},this._doc.onclick=function(){wym.saveCaret()},this._doc.body.onbeforepaste=function(){wym._iframe.contentWindow.event.returnValue=!1},this._doc.body.onpaste=function(){wym._iframe.contentWindow.event.returnValue=!1,wym.paste(window.clipboardData.getData("Text"))},this._initialized&&(jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()),this._initialized=!0,this._doc.designMode="on";try{this._doc=iframe.contentWindow.document}catch(t){}},WYMeditor.WymClassExplorer.prototype._exec=function(t,e){switch(t){case WYMeditor.INDENT:case WYMeditor.OUTDENT:var n=this.findUp(this.container(),WYMeditor.LI);if(n){var i=n.parentNode.parentNode;(n.parentNode.childNodes.length>1||i.tagName.toLowerCase()==WYMeditor.OL||i.tagName.toLowerCase()==WYMeditor.UL)&&this._doc.execCommand(t)}break;default:e?this._doc.execCommand(t,!1,e):this._doc.execCommand(t)}this.listen()},WYMeditor.WymClassExplorer.prototype.selected=function(){var t=this._iframe.contentWindow.document.caretPos;if(null!=t&&null!=t.parentElement)return t.parentElement()},WYMeditor.WymClassExplorer.prototype.saveCaret=function(){this._doc.caretPos=this._doc.selection.createRange()},WYMeditor.WymClassExplorer.prototype.addCssRule=function(t,e){t.addRule(e.name,e.css)},WYMeditor.WymClassExplorer.prototype.insert=function(t){var e=this._doc.selection.createRange();if(jQuery(e.parentElement()).parents(this._options.iframeBodySelector).is("*"))try{e.pasteHTML(t)}catch(t){}else this.paste(t)},WYMeditor.WymClassExplorer.prototype.wrap=function(t,e){var n=this._doc.selection.createRange();if(jQuery(n.parentElement()).parents(this._options.iframeBodySelector).is("*"))try{n.pasteHTML(t+n.text+e)}catch(t){}},WYMeditor.WymClassExplorer.prototype.unwrap=function(){var t=this._doc.selection.createRange();if(jQuery(t.parentElement()).parents(this._options.iframeBodySelector).is("*"))try{var e=t.text;this._exec("Cut"),t.pasteHTML(e)}catch(t){}},WYMeditor.WymClassExplorer.prototype.keyup=function(){this._selected_image=null},WYMeditor.WymClassExplorer.prototype.setFocusToNode=function(t){var e=this._doc.selection.createRange();e.moveToElementText(t),e.collapse(!1),e.move("character",-1),e.select(),t.focus()},WYMeditor.WymClassMozilla=function(t){this._wym=t,this._class="class",this._newLine="\n"},WYMeditor.WymClassMozilla.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentDocument;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this.html(this._wym._html),this.enableDesignMode(),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery(this._doc).bind("focus",this.enableDesignMode),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassMozilla.prototype.html=function(t){if("string"!=typeof t)return jQuery(this._doc.body).html();try{this._doc.designMode="off"}catch(t){}t=t.replace(/<em(\b[^>]*)>/gi,"<i$1>").replace(/<\/em>/gi,"</i>").replace(/<strong(\b[^>]*)>/gi,"<b$1>").replace(/<\/strong>/gi,"</b>"),jQuery(this._doc.body).html(t),this.enableDesignMode()},WYMeditor.WymClassMozilla.prototype._exec=function(t,e){if(!this.selected())return!1;switch(t){case WYMeditor.INDENT:case WYMeditor.OUTDENT:var n=this.selected(),i=this._iframe.contentWindow.getSelection().anchorNode;if("#text"==i.nodeName&&(i=i.parentNode),n=this.findUp(n,WYMeditor.BLOCKS),i=this.findUp(i,WYMeditor.BLOCKS),n&&n==i&&n.tagName.toLowerCase()==WYMeditor.LI){var a=n.parentNode.parentNode;(n.parentNode.childNodes.length>1||a.tagName.toLowerCase()==WYMeditor.OL||a.tagName.toLowerCase()==WYMeditor.UL)&&this._doc.execCommand(t,"",null)}break;default:e?this._doc.execCommand(t,"",e):this._doc.execCommand(t,"",null)}this.selected().tagName.toLowerCase()==WYMeditor.BODY&&this._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P),this.listen()},WYMeditor.WymClassMozilla.prototype.selected=function(){var t=this._iframe.contentWindow.getSelection().focusNode;return t?"#text"==t.nodeName?t.parentNode:t:null},WYMeditor.WymClassMozilla.prototype.addCssRule=function(t,e){t.insertRule(e.name+" {"+e.css+"}",t.cssRules.length)},WYMeditor.WymClassMozilla.prototype.keydown=function(t){var e=WYMeditor.INSTANCES[this.title],n=null;if(t.keyCode===WYMeditor.KEY.ENTER&&(n=e.selected())){var i=$(n),a=(i.parent(),i.parents(".embedded-item"));if(a.size()){var r=$("<p/>");return i.hasClass("title")?a.before(r):i.hasClass("content")&&a.after(r),e.setFocusToNode(r.get(0)),!1}}if(t.ctrlKey){if(66==t.keyCode)return e._exec(WYMeditor.BOLD),!1;if(73==t.keyCode)return e._exec(WYMeditor.ITALIC),!1}else 13==t.keyCode&&(t.shiftKey||(n=e.selected())&&n.tagName.toLowerCase()==WYMeditor.PRE&&(t.preventDefault(),e.insert("<p></p>")))},WYMeditor.WymClassMozilla.prototype.keyup=function(t){var e=WYMeditor.INSTANCES[this.title];e._selected_image=null;var n=null;if(13!=t.keyCode||t.shiftKey){if(8!=t.keyCode&&17!=t.keyCode&&46!=t.keyCode&&224!=t.keyCode&&!t.metaKey&&!t.ctrlKey){var i=(n=e.selected()).tagName.toLowerCase();"strong"!=i&&"b"!=i&&"em"!=i&&"i"!=i&&"sub"!=i&&"sup"!=i&&"a"!=i||(i=n.parentNode.tagName.toLowerCase()),i==WYMeditor.BODY&&e._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)}}else jQuery(e._doc.body).children(WYMeditor.BR).remove()},WYMeditor.WymClassMozilla.prototype.enableDesignMode=function(){if("off"==this.designMode)try{this.designMode="on",this.execCommand("styleWithCSS","",!1)}catch(t){}},WYMeditor.WymClassMozilla.prototype.setFocusToNode=function(t){var e=document.createRange();e.selectNode(t);var n=this._iframe.contentWindow.getSelection();n.addRange(e),n.collapse(t,t.childNodes.length),this._iframe.contentWindow.focus()},WYMeditor.WymClassMozilla.prototype.openBlockTag=function(t,e){e=this.validator.getValidTagAttributes(t,e);if("span"==t&&e.style){var n=this.getTagForStyle(e.style);if(!n)return;this._tag_stack.pop();t=n;this._tag_stack.push(n),e.style=""}this.output+=this.helper.tag(t,e,!0)},WYMeditor.WymClassMozilla.prototype.getTagForStyle=function(t){return/bold/.test(t)?"strong":/italic/.test(t)?"em":/sub/.test(t)?"sub":!!/sub/.test(t)&&"super"},WYMeditor.WymClassOpera=function(t){this._wym=t,this._class="class",this._newLine="\r\n"},WYMeditor.WymClassOpera.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentWindow.document;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this._doc.designMode="on",this.html(this._wym._html),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassOpera.prototype._exec=function(t,e){e?this._doc.execCommand(t,!1,e):this._doc.execCommand(t),this.listen()},WYMeditor.WymClassOpera.prototype.selected=function(){var t=this._iframe.contentWindow.getSelection().focusNode;return t?"#text"==t.nodeName?t.parentNode:t:null},WYMeditor.WymClassOpera.prototype.addCssRule=function(t,e){t.insertRule(e.name+" {"+e.css+"}",t.cssRules.length)},WYMeditor.WymClassOpera.prototype.keydown=function(t){var e=WYMeditor.INSTANCES[this.title],n=e._iframe.contentWindow.getSelection();startNode=n.getRangeAt(0).startContainer,jQuery(startNode).parentsOrSelf(WYMeditor.MAIN_CONTAINERS.join(","))[0]||jQuery(startNode).parentsOrSelf("li")||t.keyCode==WYMeditor.KEY.ENTER||t.keyCode==WYMeditor.KEY.LEFT||t.keyCode==WYMeditor.KEY.UP||t.keyCode==WYMeditor.KEY.RIGHT||t.keyCode==WYMeditor.KEY.DOWN||t.keyCode==WYMeditor.KEY.BACKSPACE||t.keyCode==WYMeditor.KEY.DELETE||e._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)},WYMeditor.WymClassOpera.prototype.keyup=function(t){WYMeditor.INSTANCES[this.title]._selected_image=null},WYMeditor.WymClassOpera.prototype.setFocusToNode=function(t){},WYMeditor.WymClassSafari=function(t){this._wym=t,this._class="class",this._newLine="\n"},WYMeditor.WymClassSafari.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentDocument;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this._doc.designMode="on",this.html(this._wym._html),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassSafari.prototype._exec=function(t,e){if(!this.selected())return!1;switch(t){case WYMeditor.INDENT:case WYMeditor.OUTDENT:var n=this.selected(),i=this._iframe.contentWindow.getSelection().anchorNode;if("#text"==i.nodeName&&(i=i.parentNode),n=this.findUp(n,WYMeditor.BLOCKS),i=this.findUp(i,WYMeditor.BLOCKS),n&&n==i&&n.tagName.toLowerCase()==WYMeditor.LI){var a=n.parentNode.parentNode;(n.parentNode.childNodes.length>1||a.tagName.toLowerCase()==WYMeditor.OL||a.tagName.toLowerCase()==WYMeditor.UL)&&this._doc.execCommand(t,"",null)}break;case WYMeditor.INSERT_ORDEREDLIST:case WYMeditor.INSERT_UNORDEREDLIST:this._doc.execCommand(t,"",null);n=this.selected();(r=this.findUp(n,WYMeditor.MAIN_CONTAINERS))&&jQuery(r).replaceWith(jQuery(r).html());break;default:e?this._doc.execCommand(t,"",e):this._doc.execCommand(t,"",null)}var r;(r=this.selected())&&r.tagName.toLowerCase()==WYMeditor.BODY&&this._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P),this.listen()},WYMeditor.WymClassSafari.prototype.selected=function(){var t=this._iframe.contentWindow.getSelection().focusNode;return t?"#text"==t.nodeName?t.parentNode:t:null},WYMeditor.WymClassSafari.prototype.addCssRule=function(t,e){t.insertRule(e.name+" {"+e.css+"}",t.cssRules.length)},WYMeditor.WymClassSafari.prototype.keydown=function(t){var e=WYMeditor.INSTANCES[this.title];if(t.keyCode===WYMeditor.KEY.ENTER){var n=e.selected();if(n){var i=$(n),a=(i.parent(),i.parents(".embedded-item"));if(a.size()){var r=$("<p/>");return i.hasClass("title")?a.before(r):i.hasClass("content")&&a.after(r),e.setFocusToNode(r.get(0)),!1}}}if(t.ctrlKey){if(66==t.keyCode)return e._exec(WYMeditor.BOLD),!1;if(73==t.keyCode)return e._exec(WYMeditor.ITALIC),!1}},WYMeditor.WymClassSafari.prototype.keyup=function(t){var e=WYMeditor.INSTANCES[this.title];e._selected_image=null;var n=null;if(13!=t.keyCode||t.shiftKey||(jQuery(e._doc.body).children(WYMeditor.BR).remove(),(n=e.selected())&&n.tagName.toLowerCase()==WYMeditor.PRE&&e._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)),13==t.keyCode&&t.shiftKey&&e._exec("InsertLineBreak"),8!=t.keyCode&&17!=t.keyCode&&46!=t.keyCode&&224!=t.keyCode&&!t.metaKey&&!t.ctrlKey){var i=(n=e.selected()).tagName.toLowerCase();"strong"!=i&&"b"!=i&&"em"!=i&&"i"!=i&&"sub"!=i&&"sup"!=i&&"a"!=i&&"span"!=i||(i=n.parentNode.tagName.toLowerCase()),i!=WYMeditor.BODY&&i!=WYMeditor.DIV||e._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)}},WYMeditor.WymClassSafari.prototype.setFocusToNode=function(t){var e=this._iframe.contentDocument.createRange();e.selectNode(t);var n=this._iframe.contentWindow.getSelection();n.addRange(e),n.collapse(t,t.childNodes.length),this._iframe.contentWindow.focus()},WYMeditor.WymClassSafari.prototype.openBlockTag=function(t,e){e=this.validator.getValidTagAttributes(t,e);if("span"==t&&e.style){var n=this.getTagForStyle(e.style);if(!n)return;this._tag_stack.pop();t=n;this._tag_stack.push(n),e.style="","string"==typeof e.class&&(e.class=e.class.replace(/apple-style-span/gi,""))}this.output+=this.helper.tag(t,e,!0)},WYMeditor.WymClassSafari.prototype.getTagForStyle=function(t){return/bold/.test(t)?"strong":/italic/.test(t)?"em":/sub/.test(t)?"sub":!!/super/.test(t)&&"sup"},window.WYMeditor=WYMeditor}).call(this,__webpack_require__(0))},function(t,e){var n={__root:{"Analyze Data":!1,Workflow:!1,"Shared Data":!1,"Data Libraries":!1,Histories:!1,Workflows:!1,Visualizations:!1,Pages:!1,Visualization:!1,"New Track Browser":!1,"Saved Visualizations":!1,"Interactive Environments":!1,Admin:!1,Help:!1,Support:!1,Search:!1,"Mailing Lists":!1,Videos:!1,Wiki:!1,"How to Cite Galaxy":!1,"Interactive Tours":!1,User:!1,Login:!1,Register:!1,"Login or Register":!1,"Logged in as":!1,Preferences:!1,"Custom Builds":!1,Logout:!1,"Saved Histories":!1,"Saved Datasets":!1,"Saved Pages":!1,"Account and saved data":!1,"Account registration or login":!1,"Support, contact, and community":!1,"Administer this Galaxy":!1,"Visualize datasets":!1,"Access published resources":!1,"Chain tools into workflows":!1,"Analysis home view":!1,"History Lists":!1,"Histories Shared with Me":!1,"Current History":!1,"Create New":!1,"Copy History":!1,"Share or Publish":!1,"Show Structure":!1,"Extract Workflow":!1,"Delete Permanently":!1,"Dataset Actions":!1,"Copy Datasets":!1,"Dataset Security":!1,"Resume Paused Jobs":!1,"Collapse Expanded Datasets":!1,"Unhide Hidden Datasets":!1,"Delete Hidden Datasets":!1,"Purge Deleted Datasets":!1,Downloads:!1,"Export Tool Citations":!1,"Export History to File":!1,"Other Actions":!1,"Import from File":!1,Webhooks:!1,"This history is empty":!1,"No matching datasets found":!1,"An error occurred while getting updates from the server":!1,"Please contact a Galaxy administrator if the problem persists":!1,"search datasets":!1,"You are currently viewing a deleted history!":!1,"You are over your disk quota":!1,"Tool execution is on hold until your disk usage drops below your allocated quota":!1,All:!1,None:!1,"For all selected":!1,"Edit history tags":!1,"Edit history Annotation":!1,"Click to rename history":!1,"Operations on multiple datasets":!1,"Hide datasets":!1,"Unhide datasets":!1,"Delete datasets":!1,"Undelete datasets":!1,"Permanently delete datasets":!1,"This will permanently remove the data in your datasets. Are you sure?":!1,Dataset:!1,Annotation:!1,"This history is empty. Click 'Get Data' on the left tool menu to start":!1,"You must be logged in to create histories":!1,"Unable to purge dataset":!1,"Cannot display datasets removed from disk":!1,"This dataset must finish uploading before it can be viewed":!1,"This dataset is not yet viewable":!1,"View data":!1,Download:!1,"Download dataset":!1,"Additional files":!1,"View details":!1,"This is a new dataset and not all of its data are available yet":!1,"You do not have permission to view this dataset":!1,"The job creating this dataset was cancelled before completion":!1,"This job is waiting to run":!1,"This dataset is currently uploading":!1,"Metadata is being auto-detected":!1,"This job is currently running":!1,'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':!1,"An error occurred with this dataset":!1,"No data":!1,"An error occurred setting the metadata for this dataset":!1,"There was an error getting the data for this dataset":!1,"This dataset has been deleted and removed from disk":!1,"This dataset has been deleted":!1,"This dataset has been hidden":!1,format:!1,database:!1,"Edit attributes":!1,"Cannot edit attributes of datasets removed from disk":!1,"Undelete dataset to edit attributes":!1,"This dataset must finish uploading before it can be edited":!1,"This dataset is not yet editable":!1,Delete:!1,"Dataset is already deleted":!1,"View or report this error":!1,"Run this job again":!1,Visualize:!1,"Visualize in":!1,"Undelete it":!1,"Permanently remove it from disk":!1,"Unhide it":!1,"You may be able to":!1,"set it manually or retry auto-detection":!1,"Edit dataset tags":!1,"Edit dataset annotation":!1,"Tool Help":!1,"Reset passwords":!1,"Search Tool Shed":!1,"Monitor installing repositories":!1,"Manage installed tools":!1,"Reset metadata":!1,"Download local tool":!1,"Tool lineage":!1,"Reload a tool's configuration":!1,"Review tool migration stages":!1,"View Tool Error Logs":!1,"Manage Allowlist":!1,"Manage Tool Dependencies":!1,Users:!1,Groups:!1,"API keys":!1,"Impersonate a user":!1,Data:!1,Quotas:!1,Roles:!1,"Local data":!1,"Form Definitions":!1,"Enable/Disable Scratchbook":!1,"Show/Hide Scratchbook":!1,Tags:!1,"Edit annotation":!1,Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":!1,"Your email address":!1,Report:!1,"Error Report":!1,"Dataset details":!1,"Save permissions.":!1,"Change the datatype to a new type.":!1,"Convert the datatype to a new format.":!1,"Save attributes of the dataset.":!1,"Change data type":!1,"Edit dataset attributes":!1,"Save permissions":!1,"Manage dataset permissions":!1,"Change datatype":!1,"Convert datatype":!1,"Convert to new format":!1,Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":!1,"Location Details":!1,"Deleting selected items":!1,"Please select folders or files":!1,"Please enter paths to import":!1,"Adding datasets from your history":!1,"Create New Folder":!1,"Create New Library":!1,Tours:!1,"Click here to sign out of all sessions.":!1,"Add or remove custom builds using history datasets.":!1,"Associate OpenIDs with your account.":!1,"Customize your Toolbox by displaying or omitting sets of Tools.":!1,"Access your current API key or create a new one.":!1,"Allows you to change your login credentials.":!1,"User Preferences":!1,"Sign out":!1,"Manage custom builds":!1,"Manage OpenIDs":!1,"Manage Toolbox filters":!1,"Manage API key":!1,"Set dataset permissions for new histories":!1,"Change password":!1,"Manage information":!1,"Configured Tool Sheds":!1,"Repository Queue":!1,"Repository Status":!1,"Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:!1,"Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":!1,Execute:!1,"Tool request failed":!1,"Copy and insert individual steps":!1,Warning:!1,"An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":!1,Collection:!1,Composite:!1,Regular:!1,"Upload configuration":!1,"FTP files":!1,Reset:!1,Pause:!1,Start:!1,"Choose FTP file":!1,"Choose local file":!1,Build:!1,"Choose FTP files":!1,"Choose local files":!1,Select:!1,"Create a collection of paired datasets":!1,"View all histories":!1,"History options":!1,"Refresh history":!1,"View error logs":!1,"View migration stages":!1,"View lineage":!1,"Manage dependencies":!1,"Manage allowlist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:!1,"Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":!1,"Delete custom build.":!1,"Provide the data source.":!1,"Next in History":!1,"Previous in History":!1,"Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":!1,"tool tooltip":!1},__ja:{"Analyze Data":"データ解析",Workflow:"ワークフロー","Shared Data":"共有データ","Data Libraries":"データライブラリ",Histories:"ヒストリー",Workflows:"ワークフロー",Visualizations:"可視化",Pages:"ページ",Visualization:"可視化","New Track Browser":"新しい Track Browser","Saved Visualizations":"保存された可視化","Interactive Environments":"インタラクティブ環境",Admin:"管理者",Help:"ヘルプ",Support:"サポート",Search:"検索","Mailing Lists":"メーリングリスト",Videos:"動画","How to Cite Galaxy":"Galaxy を引用する方法","Interactive Tours":"インタラクティブツアー",User:"ユーザー",Login:"ログイン",Register:"登録","Login or Register":"ログイン/登録",Preferences:"設定","Custom Builds":"カスタムビルド",Logout:"ログアウト","Saved Histories":"保存されたヒストリ","Saved Datasets":"保存されたデータセット","Saved Pages":"保存されたページ","Account and saved data":"アカウントと保存されたデータ","Account registration or login":"アカウントの登録またはログイン","Support, contact, and community":"サポート、コンタクト、コミュニティ","Administer this Galaxy":"この Galaxy の管理者","Visualize datasets":"データセットの可視化","Access published resources":"パブリッシュされたリソースへアクセス","Chain tools into workflows":"ツールとワークフローの連携","Analysis home view":"解析ホーム","History Lists":"ヒストリーリスト","Histories Shared with Me":"私と共有されているヒストリー","Current History":"現在のヒストリー","Create New":"新しく作成","Copy History":"ヒストリーをコピーする","Share or Publish":"共有またはパブリッシュ","Show Structure":"構造を見る","Extract Workflow":"ワークフローを抽出","Delete Permanently":"永久に削除","Dataset Actions":"データセットの操作","Copy Datasets":"データセットをコピー","Dataset Security":"データセットのセキュリティ","Resume Paused Jobs":"一時停止したジョブの再開","Collapse Expanded Datasets":"展開されたデータセットを畳む","Unhide Hidden Datasets":"隠されたデータセットを表示する","Delete Hidden Datasets":"隠されたデータセットを削除する","Purge Deleted Datasets":"削除されたデータセットを永久に削除",Downloads:"ダウンロード","Export Tool Citations":"ツールの引用をエクスポート","Export History to File":"ヒストリーをファイルへエクスポート","Other Actions":"その他のアクション","Import from File":"ファイルからの読み込み",Webhooks:"Webhooks","This history is empty":"ヒストリーは空です","No matching datasets found":"一致するデータセットが見つかりませんでした","Search datasets":"データセットを検索する","You are currently viewing a deleted history!":"消去したヒストリーをみています。","You are over your disk quota":"あなたはディスククォータを超えている",All:"一式",None:"なし","For all selected":"各項目を","Edit history tags":"ヒストリーのタグを編集","Edit history annotation":"ヒストリーのアノテーションを編集","Click to rename history":"ヒストリーの名前を変更するにはクリック","Operations on multiple datasets":"複数のデータセットに対する操作","Permanently delete datasets":"永久にデータセットを削除","This will permanently remove the data in your datasets. Are you sure?":"これは永久にあなたのデータセット内のデータを削除します。本当に？",Dataset:"データセット","This history is empty. Click 'Get Data' on the left tool menu to start":"ヒストリーは空です。解析をはじめるには、左パネルの 'データ取得' をクリック","You must be logged in to create histories":"ヒストリーを作成するためにはログインする必要があります","View data":"データを表示",Download:"ダウンロード","Download dataset":"データセットをダウンロード","View details":"細部を表示","This job is waiting to run":"ジョブは実行待ちです","This job is currently running":"ジョブは実行中です","An error occurred with this dataset":"このジョブの実行中に発生したエラー","No data":"データ無し","This dataset has been deleted and removed from disk":"このデータセットは、永続的にディスクから削除されました","This dataset has been deleted":"このデータセットは削除されました","This dataset has been hidden":"このデータセットは、非表示にされた",format:"フォーマット",database:"データベース","Edit attributes":"変数を編集する",Delete:"削除する","View or report this error":"このエラーを届け出る","Run this job again":"もう一度このジョブを実行する",Visualize:"可視化する","Undelete it":"復元する","Permanently remove it from disk":"永久にディスクから削除","Unhide it":"非表示解除する","Search Tool Shed":"Tool Shed で探す","Search Tool Shed (Beta)":"Tool Shed (Beta) で探す","Monitor installing repositories":"インストールレポジトリのモニタ","Manage installed tools":"インストールしたツールの管理","Reset metadata":"メタデータのリセット","Download local tool":"ローカルツールのダウンロード","Tool lineage":"ツール系統","Reload a tool's configuration":"ツールのコンフィグのリロード","Review tool migration stages":"ツール移行ステージのレビュー","View Tool Error Logs":"ツールのエラーログ","Manage Allowlist":"表示ホワイトリストの管理","Manage Tool Dependencies":"ツール依存関係の管理",Users:"ユーザー",Groups:"グループ","API keys":"API キー","Impersonate a user":"ユーザー偽装",Data:"データ",Quotas:"クォータ",Roles:"ロール","Local data":"ローカルデータ","Form definitions":"フォーム定義",Administration:"管理",Server:"サーバー","Tools and Tool Shed":"ツールと Tool Shed","User Management":"ユーザ管理","Form Definitions":"フォーム定義","Your workflows":"あなたのワークフロー"},__fr:{"Analyze Data":"Analyse de données",Workflow:"Workflow","Shared Data":"Données partagées","Data Libraries":"Bibliothèque de données",Histories:!1,Workflows:!1,Visualizations:"Visualisations",Pages:"Pages",Visualization:!1,"New Track Browser":"Nouveau Navigateur de Tracks/Pistes","Saved Visualizations":"Visualisations sauvegardées","Interactive Environments":"Environnements interactifs",Admin:"Admin",Help:"Aide",Support:"Assistance",Search:!1,"Mailing Lists":"Liste de diffusion",Videos:"Vidéos",Wiki:"Documentations","How to Cite Galaxy":"Comment citer Galaxy","Interactive Tours":"Guides interactifs",User:"Utilisateur",Login:"Authentification",Register:"Enregistrement","Login or Register":"Authentification et Enregistrement","Logged in as":"Authentifié en tant que",Preferences:"Préférences","Custom Builds":"Mes génomes Builds de référence",Logout:"Déconnexion","Saved Histories":"Historiques sauvegardés","Saved Datasets":"Jeux de données sauvegardés","Saved Pages":"Pages sauvegardées","Account and saved data":"Compte et données sauvegardées","Account registration or login":"Enregistrement ou authentification","Support, contact, and community":"Support,contact et communauté","Administer this Galaxy":"Outils Admin","Visualize datasets":"Visualiser les jeux de données","Access published resources":"Accéder aux données partagées","Chain tools into workflows":"Relier outils dans un workflow","Analysis home view":"Accueil analyse de données","History Lists":"Tableaux des historiques","Histories Shared with Me":"Historiques partagés avec moi","Current History":"Cet Historique","Create New":"Créer un nouveau","Copy History":"Copier l'Historique","Share or Publish":"Partager et publier","Show Structure":"Montrer la structure","Extract Workflow":"Extraire un Workflow","Delete Permanently":"Supprimer définitivement","Dataset Actions":"Actions sur les jeux de données","Copy Datasets":"Copier des jeux de données","Dataset Security":"Permissions/Sécurité","Resume Paused Jobs":"Reprendre les processus en pause","Collapse Expanded Datasets":"Réduire les données étendues","Unhide Hidden Datasets":"Afficher les données cachées","Delete Hidden Datasets":"Supprimer les données cachées","Purge Deleted Datasets":"Purger les données supprimées",Downloads:"Télécharger","Export Tool Citations":"Exporter les citations des outils","Export History to File":"Exporter l'Historique dans un fichier","Other Actions":"Autres actions","Import from File":"Importer depuis un fichier",Webhooks:"Webhooks","This history is empty":"Cet historique est vide","No matching datasets found":"Aucunes données correspondantes n'ont été trouvées","An error occurred while getting updates from the server":"Une erreur s'est produite lors de la réception des données depuis le serveur","Please contact a Galaxy administrator if the problem persists":"Veuillez contacter un administrateur de l'instance Galaxy si ce problème persiste","search datasets":"Rechercher des données","You are currently viewing a deleted history!":"Vous consultez actuellement un historique supprimé!","You are over your disk quota":"Vous avez dépassé votre quota d'espace disque","Tool execution is on hold until your disk usage drops below your allocated quota":"L'exécution de l'outil est en attente tant que votre utilisation d'espace disque dépasse le quota attribué",All:"Tout",None:"Aucun","For all selected":"Pour toute la sélection","Edit history tags":"Editer les mots-clés de l'historique","Edit history Annotation":"Editer l'annotation de l'historique","Click to rename history":"Cliquer pour renommer l'historique","Operations on multiple datasets":"Opérer sur plusieurs jeux de données en même temps","Hide datasets":"Cacher les jeux de données","Unhide datasets":"Afficher les jeux de données cachés","Delete datasets":"Supprimer les jeux de données","Undelete datasets":"Restaurer les jeux de données supprimés","Permanently delete datasets":"Supprimer définitivement les jeux de données","This will permanently remove the data in your datasets. Are you sure?":"Cela supprimera de manière permanente les données de votre historique. Êtes-vous certain?",Dataset:"Jeu de données",Annotation:"Annotation","This history is empty. Click 'Get Data' on the left tool menu to start":"Cet historique est vide. Cliquer sur 'Get Data' au niveau du menu d'outils à gauche pour démarrer","You must be logged in to create histories":"Vous devez être connecté pour créer un historique","load your own data":"Charger vos propres données","get data from an external source":"Charger des données depuis une source externe","Include Deleted Datasets":"Inclure les jeux de données supprimés","Include Hidden Datasets":"Inclure les jeux de données cachés","Unable to purge dataset":"Impossible de purger le jeu de données","Cannot display datasets removed from disk":"Impossible de visualiser les jeux de données supprimés du disque","This dataset must finish uploading before it can be viewed":"Le jeu de données doit être totalement téléversé avant de pouvoir être visualiser","This dataset is not yet viewable":"Ce jeu de données n'est pas visualisable","View data":"Voir les données",Download:!1,"Download dataset":"Télécharger le jeu de données","Additional files":"Fichiers additionnels","View details":"Voir les détails","This is a new dataset and not all of its data are available yet":"Il s'agit d'un nouveau jeu de données et seule une partie des données est accessible pour le moment","You do not have permission to view this dataset":"Vous n'avez pas la permission de voir ce jeu de données","The job creating this dataset was cancelled before completion":"Le processus à l'origine de ce jeu de données a été annulé prématurément","This job is waiting to run":"Ce calcul est en attente de traitement","This dataset is currently uploading":"Ce jeu de données est en cours de téléversement","Metadata is being auto-detected":"Les métadonnées sont auto-détectées","This job is currently running":"Le traitement est en cours",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'Ce traitement est en pause. Utilisez le "Relancer les traitements en pause" dans le menu d\'historique pour le relancer',"An error occurred with this dataset":"Une erreur est survenue avec ce jeu de données","No data":"Aucune donnée","An error occurred setting the metadata for this dataset":"Une erreur est survenue pendant la récupération des métadonnées de ce jeu de données","There was an error getting the data for this dataset":"Il est survenu une erreur durant la récupération du contenu de ce jeu de données","This dataset has been deleted and removed from disk":"Ce jeu de données a été supprimé et effacé du disque","This dataset has been deleted":"Ce jeu de données a été supprimé","This dataset has been hidden":"Ce jeu de données a été caché",format:"format",database:"génome de référence","Edit attributes":"Editer les attributs","Cannot edit attributes of datasets removed from disk":"Impossible d'éditer les attributs de jeux de données effacés du disque","Undelete dataset to edit attributes":"Restaurer le jeu de données pour en éditer les attributs","This dataset must finish uploading before it can be edited":"Ce jeu de données doit être entièrement téléversé avant toute modification","This dataset is not yet editable":"Ce jeu de données n'est pas encore éditable",Delete:"Supprimer","Dataset is already deleted":"Le jeu de données est déjà supprimé","View or report this error":"Voir ou remonter cette erreur","Run this job again":"Exécuter ce traitement à nouveau",Visualize:!1,"Visualize in":"Visualiser via","Undelete it":"Restaurer","Permanently remove it from disk":"Supprimer définitivement du disque","Unhide it":"Rendre visible","You may be able to":"Vous devriez être en mesure de","set it manually or retry auto-detection":"Traitez le manuellement ou retenter la détection automatique","Edit dataset tags":"Editer les mots-clés du jeu de données","Edit dataset annotation":"Editer les annotations du jeu de données","Tool Help":"Aide outil","Reset passwords":"Réinitialiser les mots de passe","Search Tool Shed":"Chercher via un Tool Shed","Monitor installing repositories":"Contrôler les dépôts installés","Manage installed tools":"Gérer les outils installés","Reset metadata":"Réinitialiser les métadonnées","Download local tool":"Télécharger un outil en local","Tool lineage":"Affiliation des outils","Reload a tool's configuration":"Recharger une configuration d'outils","Review tool migration stages":"Vérifier les étapes de migration d'outils","View Tool Error Logs":"Voir les logs d'erreur d'outils","Manage Allowlist":"Gérer la liste autorisée d'outils graphiques","Manage Tool Dependencies":"Gérer les dépendances d'outils",Users:!1,Groups:!1,"API keys":"Clé d'API","Impersonate a user":"Prendre la place d'un utilisateur",Data:!1,Quotas:!1,Roles:!1,"Local data":"Données locales","Form Definitions":"Définitions de formulaires","Enable/Disable Scratchbook":"Activer/Désactiver la visu Scratchbook","Show/Hide Scratchbook":"Montrer/cacher la visu Scratchbook",Tags:"Mots-clés","Edit annotation":"Editer les annotations",Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":"N'importe quel commentaire que vous pouvez fournir concernant ce que vous faisiez lorsque le bug est apparu","Your email address":"Votre adresse e-mail",Report:!1,"Error Report":"Rapport d'erreur","Dataset details":"Détails du jeu de données","Save permissions.":"Sauvegarder les permissions","Change the datatype to a new type.":"Changer en un nouveau format de données","Convert the datatype to a new format.":"Convertir le format de données","Save attributes of the dataset.":"Sauvegarder les attributs du jeu de données","Change data type":"Changer le format de données","Edit dataset attributes":"Modifier les attributs du jeu de données","Save permissions":"Sauvegarder les permissions","Manage dataset permissions":"Gérer les permissions sur les jeux de données","Change datatype":"Changer le format de données","Convert datatype":"Convertir le format de données","Convert to new format":"Convertir en un nouveau format de données",Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":"Importer dans l'historique","Location Details":"Détails de localisation","Deleting selected items":"Suppression des objets sélectionnés","Please select folders or files":"S'il vous plaît sélectionnez des dossiers ou fichiers","Please enter paths to import":"S'il vous plaît entrer des chemins/URLs à importer","Adding datasets from your history":"Ajouts de jeux de données à partir de votre historique","Create New Folder":"Créer un nouveau dossier","Create New Library":"Créer une nouvelle bibliothèque",Tours:!1,"Click here to sign out of all sessions.":!1,"Add or remove custom builds using history datasets.":!1,"Associate OpenIDs with your account.":!1,"Customize your Toolbox by displaying or omitting sets of Tools.":!1,"Access your current API key or create a new one.":!1,"Enable or disable the communication feature to chat with other users.":!1,"Allows you to change your login credentials.":!1,"User Preferences":!1,"Sign out":!1,"Manage custom builds":!1,"Manage OpenIDs":!1,"Manage Toolbox filters":!1,"Manage API key":!1,"Set dataset permissions for new histories":!1,"Change communication settings":!1,"Change password":!1,"Manage information":!1,"Configured Tool Sheds":!1,"Repository Queue":!1,"Repository Status":!1,"Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:!1,"Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":!1,Execute:!1,"Tool request failed":!1,"Copy and insert individual steps":!1,Warning:!1,"An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":!1,Collection:!1,Composite:!1,Regular:!1,"Upload configuration":!1,"FTP files":!1,Reset:!1,Pause:!1,Start:!1,"Choose FTP file":!1,"Choose local file":!1,Build:!1,"Choose FTP files":!1,"Choose local files":!1,Select:!1,"Create a collection of paired datasets":!1,"View all histories":!1,"History options":!1,"Refresh history":!1,"View error logs":!1,"View migration stages":!1,"View lineage":!1,"Manage dependencies":!1,"Manage allowlist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:!1,"Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":!1,"Delete custom build.":!1,"Provide the data source.":!1,"Next in History":!1,"Previous in History":!1,"Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":!1,"tool tooltip":!1},__zh:{"Analyze Data":"数据分析",Workflow:"工作流程","Shared Data":"数据共享","Data Libraries":"数据库","Published Histories":"历史","Published Workflows":"流程","Published Visualizations":"可视化","Published Pages":"页面",Visualization:"可视化","New Track Browser":"创建 Track Browser","Saved Visualizations":"已保存的可视化","Create Visualization":"创建可视化","Interactive Environments":"交互式环境",Admin:"管理员",Help:"帮助",Support:"支持",Search:"搜索","Mailing Lists":"邮件列表",Videos:"视频",Wiki:!1,"How to Cite Galaxy":"引用","Interactive Tours":"使用引导",User:"账号管理",Login:"登陆",Register:"注册","Login or Register":"注册登陆","Logged in as":"您已登陆为",Preferences:"用户偏好性","Custom Builds":"自定义构建集",Logout:"退出","Saved Histories":"保存的历史","Saved Datasets":"保存的数据集","Saved Pages":"保存的页面",Datasets:"我的数据集",Histories:"我的历史","Histories shared with me":"分享给我的历史",Pages:"我的页面",Visualizations:"我的可视化","Account and saved data":"账号及数据保存","Account registration or login":"注册或登录","Support, contact, and community":"社区支持与联系","Administer this Galaxy":"管理您的 Galaxy","Visualize datasets":"数据集可视化","Access published resources":"访问已发布的资源","Chain tools into workflows":"将工具链接到流程中","Analysis home view":"数据分析主页",History:"历史","History Actions":"历史记录操作","History Lists":"历史记录列表","Histories Shared with Me":"分享给您历史","Current History":"当前历史记录","Create New":"创建新的历史",Copy:"复制历史","Share or Publish":"分享或发布历史","Show Structure":"展示结构","Extract Workflow":"提取为工作流","Set Permissions":"设置权限","Make Private":"私有化数据",Delete:"删除","Delete Permanently":"永久删除","Dataset Actions":"数据集操作","Copy Datasets":"复制数据集","Dataset Security":"数据集安全","Resume Paused Jobs":"恢复已暂停的任务","Collapse Expanded Datasets":"折叠已展开的数据集","Unhide Hidden Datasets":"取消隐藏的数据集","Delete Hidden Datasets":"删除隐藏的数据集","Purge Deleted Datasets":"清除已删除的数据集",Downloads:"下载","Export Tool Citations":"导出工具引用的文献","Export History to File":"导出历史到文件","Other Actions":"其他操作","Import from File":"从文件导入",Webhooks:!1,"This history is empty":"您的历史记录为空","No matching datasets found":"未找到匹配的数据集","An error occurred while getting updates from the server":"服务器更新时出现错误","Please contact a Galaxy administrator if the problem persists":"如果问题仍然存在，请联系 Galaxy 管理员","An error was encountered while <% where %>":"当执行以下操作时: <% where %>, 出现错误","search datasets":"搜索数据集","You are currently viewing a deleted history!":"您正在查看已删除的历史记录！","You are over your disk quota":"您已超出了系统分配的磁盘配额","Tool execution is on hold until your disk usage drops below your allocated quota":"工具暂停执行，直到您的磁盘使用量低于您所分配的配额",All:"全选",None:"反选","For all selected":"为每个选定","Edit history tags":"编辑历史标签","Edit history Annotation":"编辑历史备注","Click to rename history":"点击以重命名历史","Operations on multiple datasets":"编辑多个数据集","Hide datasets":"隐藏数据集","Unhide datasets":"显示数据集","Delete datasets":"删除数据集","Undelete datasets":"取消删除数据集","Permanently delete datasets":"永久删除数据集","This will permanently remove the data in your datasets. Are you sure?":"本次操作将从您的数据集中用久移除数据。请再次确定？",Dataset:"数据集",Annotation:"备注","This history is empty. Click 'Get Data' on the left tool menu to start":"您的历史记录为空，请单击左边窗格中‘获取数据’","You must be logged in to create histories":"您必须登录后才能创建历史","You can <% loadYourOwn %> or <% externalSource %>":"您可以 <% loadYourOwn %> 或者 <% externalSource %>","You can ":"您可以 "," or ":" 或者 ","load your own data":"上传您的个人数据","get data from an external source":"从其他来源上传数据.","Include Deleted Datasets":"包括删除数据集","Include Hidden Datasets":"包括隐藏数据集","Unable to purge dataset":"无法清除数据集","Cannot display datasets removed from disk":"无法显示已从磁盘中移除的数据集","This dataset must finish uploading before it can be viewed":"此数据集必须先完成上传, 才能查看","This dataset is not yet viewable":"此数据集暂时不可见","View data":"查看数据",Download:"下载","Download dataset":"下载数据集","Additional files":"其他文件","View details":"查看详情","This is a new dataset and not all of its data are available yet":"这是一个新的数据集，并不是所有与它关联的数据都可用","You do not have permission to view this dataset":"您无权查看此数据集","The job creating this dataset was cancelled before completion":"创建此数据集的任务在完成之前已被取消","This job is waiting to run":"您的任务正在等待运行","This dataset is currently uploading":"领的数据集正在上传中","Metadata is being auto-detected":"元数据正在被自动检测中","This job is currently running":"您的任务正在运行中",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'此任务已暂停。您可以使用历史菜单中的 "恢复已暂停的任务" 来恢复',"An error occurred with this dataset":"此数据集发生错误","No data":"没有数据","An error occurred setting the metadata for this dataset":"设置此数据集的元数据时发生错误","There was an error getting the data for this dataset":"获取此数据集的数据时出现错误","This dataset has been deleted and removed from disk":"此数据集已被删除且已经从系统磁盘中被清空","This dataset has been deleted":"此数据集已被删除","This dataset has been hidden":"此数据集已被隐藏",format:"格式",database:"数据库","Edit attributes":"编辑属性","Cannot edit attributes of datasets removed from disk":"无法编辑已从磁盘中移除的数据集的属性","Undelete dataset to edit attributes":"取消删除数据集以编辑属性","This dataset must finish uploading before it can be edited":"该数据集必须先上传完成, 才能编辑","This dataset is not yet editable":"该数据集不可编辑","Dataset is already deleted":"数据集已被删除","View or report this error":"查看或报告当前错误","Run this job again":"重新运行当前任务",Visualize:"可视化","Visualize in":"的可视化","Undelete it":"取消删除","Permanently remove it from disk":"从磁盘中永久移除","Unhide it":"取消隐藏","You may be able to":"您可以","set it manually or retry auto-detection":"手动设置或重新执行自动检测","Edit dataset tags":"编辑数据集标签","Edit dataset annotation":"编辑数据集备注","Tool Help":"工具帮助","Reset passwords":!1,"Search Tool Shed":!1,"Monitor installing repositories":!1,"Manage installed tools":!1,"Reset metadata":!1,"Download local tool":!1,"Tool lineage":!1,"Reload a tool's configuration":!1,"Review tool migration stages":!1,"View Tool Error Logs":!1,"Manage Display Whitelist":!1,"Manage Tool Dependencies":!1,Users:!1,Groups:!1,"API keys":!1,"Impersonate a user":!1,Data:!1,Quotas:!1,Roles:!1,"Local data":!1,"Form Definitions":!1,"Enable/Disable Scratchbook":"启用/禁用 Scratchbook","Show/Hide Scratchbook":"显示/隐藏 Scratchbook",Tags:"标签","Edit annotation":"编辑备注",Subscript:"下标",Superscript:"上标",Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":"您可以提供的关于 bug 发生时您正在做什么的任何信息。","Your email address":"您的邮箱地址",Report:"报告","Error Report":"错误报告","Dataset details":"数据集详情","Save permissions.":"保存权限","Change the datatype to a new type.":"将数据类型更改为新类型。","Convert the datatype to a new format.":"将数据类型更改为新的格式。","Save attributes of the dataset.":"保存数据集属性。","Change data type":"更改数据类型","Edit dataset attributes":"编辑数据集属性","Save permissions":"保存权限","Manage dataset permissions":"管理数据集权限","Change datatype":"更改数据类型","Convert datatype":"转换数据类型","Convert to new format":"转换成新格式",Save:"b保存",Permissions:"权限",Datatypes:"数据类型",Convert:"转换",Attributes:"属性","Import into History":"导入到历史记录中","Location Details":"位置的细节","Deleting selected items":"删除选择的条目","Please select folders or files":"请选择目录或者文件","Please enter paths to import":"请填写路径进行导入","Adding datasets from your history":"从您的历史记录中添加数据集","Create New Folder":"创建新的目录","Create New Library":"创建新的库",Tours:"引导","Click here to sign out of all sessions.":"点击这里退出所有会话。","Add or remove custom builds using history datasets.":"从历史的数据集中添加或者移除自定义的构建集。","Associate OpenIDs with your account.":"把 OpenIDs 和您的账号进行关联。","Customize your Toolbox by displaying or omitting sets of Tools.":"通过显示或删除工具来自定义您的工具箱。","Access your current API key or create a new one.":"访问您当前的 API密钥或创建一个新的密钥。","Enable or disable the communication feature to chat with other users.":"启用或禁用与其他用户聊天的通信功能。","Allows you to change your login credentials.":"允许您更改您的登录凭证。","User Preferences":"用户偏好性","Sign out":"退出","Manage custom builds":"管理您自定义的构建集","Manage OpenIDs":"管理 OpenIDs","Manage Toolbox filters":"管理工具箱过滤器","Manage API key":"管理您的 API 密钥","Set dataset permissions for new histories":"为新的历史设置数据集权限","Change communication settings":"修改通信设置","Change password":"更改密码","Manage information":"管理您的信息","Configured Galaxy Tool Sheds":"配置 Galaxy Tool Sheds","Repository Installation Queue":"存储库安装队列","Repository Status":"存储卡状态","Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:"分享","Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":"任务提交失败",Execute:"执行","Tool request failed":"工具请求失败","Email notification":"邮件提醒","Send an email notification when the job completes.":"任务完成后发送电子邮件通知。",Workflows:"流程","Copy and insert individual steps":!1,Warning:"警告","An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,"Browse GenomeSpace":!1,Browse:!1,Error:"错误",Close:"关闭","Download from web or upload from disk":"从网页获取或者从本地磁盘上传数据",Collection:"集合数据",Composite:"复合数据",Regular:"常规数据","Upload configuration":"上传配置","FTP files":"FTP 文件",Reset:"重置",Pause:"暂停",Start:"开始","Choose FTP file":"选择 FTP 文件","Choose local file":"选择本地磁盘文件",Build:"构建集","Choose FTP files":"选择 FTP 文件","Choose local files":"选择本地磁盘文件","Paste/Fetch data":"粘贴数据或链接",Select:"选择","Create a collection of paired datasets":"创建一个配对数据的集合","View all histories":"查看所有的历史记录","History options":"历史记录选项","Refresh history":"刷新历史记录","View error logs":!1,"View migration stages":!1,"View lineage":!1,"Manage dependencies":!1,"Manage whitelist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:"库","Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":"创建新的构建集","Delete custom build.":"删除自定义的构建集。","Provide the data source.":"提供数据源。","Next in History":"下一个历史记录","Previous in History":"上一个历史记录","Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":"从 URL 或者本地磁盘上传文件","tool tooltip":!1,ja:!0,fr:!0,zh:!0},init:function(t){t||(t="undefined"!=typeof window&&window._i18n&&window._i18n.locale?window._i18n.locale:"undefined"!=typeof document&&document.documentElement.lang?document.documentElement.lang:"undefined"!=typeof navigator&&(navigator.languages||navigator.language||navigator.userLanguage)?((t=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||"root").toLowerCase():"root");var e=this["__"+t]||this.__root;if(e)for(var n in e)this[n]=e[n];for(var n in this.__root)void 0===this[n]&&(this[n]=this.__root[n])}};n.init(),t.exports=n},function(t,e,n){"use strict";var i=n(175);n.n(i).a},function(t,e,n){var i={"./af":284,"./af.js":284,"./ar":285,"./ar-dz":286,"./ar-dz.js":286,"./ar-kw":287,"./ar-kw.js":287,"./ar-ly":288,"./ar-ly.js":288,"./ar-ma":289,"./ar-ma.js":289,"./ar-sa":290,"./ar-sa.js":290,"./ar-tn":291,"./ar-tn.js":291,"./ar.js":285,"./az":292,"./az.js":292,"./be":293,"./be.js":293,"./bg":294,"./bg.js":294,"./bm":295,"./bm.js":295,"./bn":296,"./bn.js":296,"./bo":297,"./bo.js":297,"./br":298,"./br.js":298,"./bs":299,"./bs.js":299,"./ca":300,"./ca.js":300,"./cs":301,"./cs.js":301,"./cv":302,"./cv.js":302,"./cy":303,"./cy.js":303,"./da":304,"./da.js":304,"./de":305,"./de-at":306,"./de-at.js":306,"./de-ch":307,"./de-ch.js":307,"./de.js":305,"./dv":308,"./dv.js":308,"./el":309,"./el.js":309,"./en-au":310,"./en-au.js":310,"./en-ca":311,"./en-ca.js":311,"./en-gb":312,"./en-gb.js":312,"./en-ie":313,"./en-ie.js":313,"./en-il":314,"./en-il.js":314,"./en-in":315,"./en-in.js":315,"./en-nz":316,"./en-nz.js":316,"./en-sg":317,"./en-sg.js":317,"./eo":318,"./eo.js":318,"./es":319,"./es-do":320,"./es-do.js":320,"./es-us":321,"./es-us.js":321,"./es.js":319,"./et":322,"./et.js":322,"./eu":323,"./eu.js":323,"./fa":324,"./fa.js":324,"./fi":325,"./fi.js":325,"./fil":326,"./fil.js":326,"./fo":327,"./fo.js":327,"./fr":328,"./fr-ca":329,"./fr-ca.js":329,"./fr-ch":330,"./fr-ch.js":330,"./fr.js":328,"./fy":331,"./fy.js":331,"./ga":332,"./ga.js":332,"./gd":333,"./gd.js":333,"./gl":334,"./gl.js":334,"./gom-deva":335,"./gom-deva.js":335,"./gom-latn":336,"./gom-latn.js":336,"./gu":337,"./gu.js":337,"./he":338,"./he.js":338,"./hi":339,"./hi.js":339,"./hr":340,"./hr.js":340,"./hu":341,"./hu.js":341,"./hy-am":342,"./hy-am.js":342,"./id":343,"./id.js":343,"./is":344,"./is.js":344,"./it":345,"./it-ch":346,"./it-ch.js":346,"./it.js":345,"./ja":347,"./ja.js":347,"./jv":348,"./jv.js":348,"./ka":349,"./ka.js":349,"./kk":350,"./kk.js":350,"./km":351,"./km.js":351,"./kn":352,"./kn.js":352,"./ko":353,"./ko.js":353,"./ku":354,"./ku.js":354,"./ky":355,"./ky.js":355,"./lb":356,"./lb.js":356,"./lo":357,"./lo.js":357,"./lt":358,"./lt.js":358,"./lv":359,"./lv.js":359,"./me":360,"./me.js":360,"./mi":361,"./mi.js":361,"./mk":362,"./mk.js":362,"./ml":363,"./ml.js":363,"./mn":364,"./mn.js":364,"./mr":365,"./mr.js":365,"./ms":366,"./ms-my":367,"./ms-my.js":367,"./ms.js":366,"./mt":368,"./mt.js":368,"./my":369,"./my.js":369,"./nb":370,"./nb.js":370,"./ne":371,"./ne.js":371,"./nl":372,"./nl-be":373,"./nl-be.js":373,"./nl.js":372,"./nn":374,"./nn.js":374,"./oc-lnc":375,"./oc-lnc.js":375,"./pa-in":376,"./pa-in.js":376,"./pl":377,"./pl.js":377,"./pt":378,"./pt-br":379,"./pt-br.js":379,"./pt.js":378,"./ro":380,"./ro.js":380,"./ru":381,"./ru.js":381,"./sd":382,"./sd.js":382,"./se":383,"./se.js":383,"./si":384,"./si.js":384,"./sk":385,"./sk.js":385,"./sl":386,"./sl.js":386,"./sq":387,"./sq.js":387,"./sr":388,"./sr-cyrl":389,"./sr-cyrl.js":389,"./sr.js":388,"./ss":390,"./ss.js":390,"./sv":391,"./sv.js":391,"./sw":392,"./sw.js":392,"./ta":393,"./ta.js":393,"./te":394,"./te.js":394,"./tet":395,"./tet.js":395,"./tg":396,"./tg.js":396,"./th":397,"./th.js":397,"./tl-ph":398,"./tl-ph.js":398,"./tlh":399,"./tlh.js":399,"./tr":400,"./tr.js":400,"./tzl":401,"./tzl.js":401,"./tzm":402,"./tzm-latn":403,"./tzm-latn.js":403,"./tzm.js":402,"./ug-cn":404,"./ug-cn.js":404,"./uk":405,"./uk.js":405,"./ur":406,"./ur.js":406,"./uz":407,"./uz-latn":408,"./uz-latn.js":408,"./uz.js":407,"./vi":409,"./vi.js":409,"./x-pseudo":410,"./x-pseudo.js":410,"./yo":411,"./yo.js":411,"./zh-cn":412,"./zh-cn.js":412,"./zh-hk":413,"./zh-hk.js":413,"./zh-mo":414,"./zh-mo.js":414,"./zh-tw":415,"./zh-tw.js":415};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id=526},function(t,e,n){},function(t,e,n){var i;void 0===(i=function(){"use strict";function t(t,e){if("number"!=typeof t||"number"!=typeof e)throw"Bad range "+t+","+e;this._min=t,this._max=e}function e(t){var e=t.sort(n),i=[],a=e.shift();e.forEach((function(t){t._min<=a._max?t._max>a._max&&(a._max=t._max):(i.push(a),a=t)})),i.push(a),this._ranges=i}function n(t,e){return t._min<e._min?-1:t._min>e._min?1:t._max<e._max?-1:e._max>t._max?1:0}return t.prototype.min=function(){return this._min},t.prototype.max=function(){return this._max},t.prototype.contains=function(t){return t>=this._min&&t<=this._max},t.prototype.isContiguous=function(){return!0},t.prototype.ranges=function(){return[this]},t.prototype._pushRanges=function(t){t.push(this)},t.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"},e.prototype.min=function(){return this._ranges[0].min()},e.prototype.max=function(){return this._ranges[this._ranges.length-1].max()},e.prototype.lower_bound=function(t){var e=this.ranges();if(t>this.max())return e.length;if(t<this.min())return 0;for(var n=0,i=e.length-1;n<=i;){var a=Math.floor((n+i)/2);if(t>e[a]._max)n=a+1;else{if(!(t<e[a]._min))return a;i=a-1}}return n},e.prototype.contains=function(t){var e=this.lower_bound(t);return!!(e<this._ranges.length&&this._ranges[e].contains(t))},e.prototype.insertRange=function(t){var e=this.lower_bound(t._min);if(e!==this._ranges.length){var n=this.ranges();if(t._max<n[e]._min)this._ranges.splice(e,0,t);else{n[e]._min<t._min&&(t._min=n[e]._min);for(var i=e+1;i<n.length&&n[i]._min<=t._max;)i++;n[--i]._max>t._max&&(t._max=n[i]._max),this._ranges.splice(e,i-e+1,t)}}else this._ranges.push(t)},e.prototype.isContiguous=function(){return this._ranges.length>1},e.prototype.ranges=function(){return this._ranges},e.prototype._pushRanges=function(t){for(var e=0;e<this._ranges.length;++e)t.push(this._ranges[e])},e.prototype.toString=function(){for(var t="",e=0;e<this._ranges.length;++e)e>0&&(t+=","),t+=this._ranges[e].toString();return t},{Range:t,union:function(t,n){return t instanceof e||(t instanceof Array||(t=[t]),t=new e(t)),n&&t.insertRange(n),t},intersection:function(n,i){for(var a=n.ranges(),r=i.ranges(),o=a.length,s=r.length,l=0,c=0,d=[];l<o&&c<s;){n=a[l],i=r[c];var u=Math.max(n.min(),i.min()),h=Math.min(n.max(),i.max());h>=u&&d.push(new t(u,h)),n.max()>i.max()?++c:++l}return 0==d.length?null:1==d.length?d[0]:new e(d)},coverage:function(t){for(var e=0,n=t.ranges(),i=0;i<n.length;++i){var a=n[i];e+=a.max()-a.min()+1}return e},rangeOver:function(t,e){return t.min()<e.min()?-1:t.min()>e.min()?1:t.max()<e.max()?-1:e.max()>t.max()?1:0},_rangeOrder:n}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){var t=15,e=1440,n=0,i=0,a=1,r=-5,o=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],s=0,l=9,c=5,d=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],u=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],m=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function _(){}function g(){this.was=[0]}_.prototype.inflateInit=function(e,n){return e||(e=t),n&&(n=!1),this.istate=new g,this.istate.inflateInit(this,n?-e:e)},_.prototype.inflate=function(t){return null==this.istate?-2:this.istate.inflate(this,t)},_.prototype.inflateEnd=function(){if(null==this.istate)return-2;var t=istate.inflateEnd(this);return this.istate=null,t},_.prototype.inflateSync=function(){return istate.inflateSync(this)},_.prototype.inflateSetDictionary=function(t,e){return istate.inflateSetDictionary(this,t,e)},g.prototype.inflateReset=function(t){return null==t||null==t.istate?-2:(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=0!=t.istate.nowrap?7:0,t.istate.blocks.reset(t,null),i)},g.prototype.inflateEnd=function(t){return null!=this.blocks&&this.blocks.free(t),this.blocks=null,i},g.prototype.inflateInit=function(t,e){return t.msg=null,this.blocks=null,nowrap=0,e<0&&(e=-e,nowrap=1),e<8||e>15?(this.inflateEnd(t),-2):(this.wbits=e,t.istate.blocks=new b(t,0!=t.istate.nowrap?null:this,1<<e),this.inflateReset(t),i)},g.prototype.inflate=function(t,e){var n,o;if(null==t||null==t.istate||null==t.next_in)return-2;for(e=4==e?r:i,n=r;;)switch(t.istate.mode){case 0:if(0==t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,8!=(15&(t.istate.method=t.next_in[t.next_in_index++]))){t.istate.mode=13,t.msg="unknown compression method",t.istate.marker=5;break}if(8+(t.istate.method>>4)>t.istate.wbits){t.istate.mode=13,t.msg="invalid window size",t.istate.marker=5;break}t.istate.mode=1;case 1:if(0==t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,o=255&t.next_in[t.next_in_index++],((t.istate.method<<8)+o)%31!=0){t.istate.mode=13,t.msg="incorrect header check",t.istate.marker=5;break}if(0==(32&o)){t.istate.mode=7;break}t.istate.mode=2;case 2:if(0==t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need=(255&t.next_in[t.next_in_index++])<<24&4278190080,t.istate.mode=3;case 3:if(0==t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.next_in[t.next_in_index++])<<16&16711680,t.istate.mode=4;case 4:if(0==t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.next_in[t.next_in_index++])<<8&65280,t.istate.mode=5;case 5:return 0==t.avail_in?n:(n=e,t.avail_in--,t.total_in++,t.istate.need+=255&t.next_in[t.next_in_index++],t.adler=t.istate.need,t.istate.mode=6,2);case 6:return t.istate.mode=13,t.msg="need dictionary",t.istate.marker=0,-2;case 7:if(-3==(n=t.istate.blocks.proc(t,n))){t.istate.mode=13,t.istate.marker=0;break}if(n==i&&(n=e),n!=a)return n;if(n=e,t.istate.blocks.reset(t,t.istate.was),0!=t.istate.nowrap){t.istate.mode=12;break}t.istate.mode=8;case 8:if(0==t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need=(255&t.next_in[t.next_in_index++])<<24&4278190080,t.istate.mode=9;case 9:if(0==t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.next_in[t.next_in_index++])<<16&16711680,t.istate.mode=10;case 10:if(0==t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.next_in[t.next_in_index++])<<8&65280,t.istate.mode=11;case 11:if(0==t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,t.istate.need+=255&t.next_in[t.next_in_index++],t.istate.was[0]!=t.istate.need){t.istate.mode=13,t.msg="incorrect data check",t.istate.marker=5;break}t.istate.mode=12;case 12:return a;case 13:return-3;default:return-2}},g.prototype.inflateSetDictionary=function(t,e,n){var a=0,r=n;return null==t||null==t.istate||6!=t.istate.mode?-2:t._adler.adler32(1,e,0,n)!=t.adler?-3:(t.adler=t._adler.adler32(0,null,0,0),r>=1<<t.istate.wbits&&(a=n-(r=(1<<t.istate.wbits)-1)),t.istate.blocks.set_dictionary(e,a,r),t.istate.mode=7,i)};var v=[0,0,255,255];g.prototype.inflateSync=function(t){var e,n,a,o,s;if(null==t||null==t.istate)return-2;if(13!=t.istate.mode&&(t.istate.mode=13,t.istate.marker=0),0==(e=t.avail_in))return r;for(n=t.next_in_index,a=t.istate.marker;0!=e&&a<4;)t.next_in[n]==v[a]?a++:a=0!=t.next_in[n]?0:4-a,n++,e--;return t.total_in+=n-t.next_in_index,t.next_in_index=n,t.avail_in=e,t.istate.marker=a,4!=a?-3:(o=t.total_in,s=t.total_out,this.inflateReset(t),t.total_in=o,t.total_out=s,t.istate.mode=7,i)},g.prototype.inflateSyncPoint=function(t){return null==t||null==t.istate||null==t.istate.blocks?-2:t.istate.blocks.sync_point()};var y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function b(t,n,i){this.hufts=new Int32Array(3*e),this.window=new Uint8Array(i),this.end=i,this.checkfn=n,this.mode=s,this.reset(t,null),this.left=0,this.table=0,this.index=0,this.blens=null,this.bb=new Int32Array(1),this.tb=new Int32Array(1),this.codes=new w,this.last=0,this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.check=0,this.inftree=new k}b.prototype.reset=function(t,e){e&&(e[0]=this.check),6==this.mode&&this.codes.free(t),this.mode=s,this.bitk=0,this.bitb=0,this.read=this.write=0,this.checkfn&&(t.adler=this.check=t._adler.adler32(0,null,0,0))},b.prototype.proc=function(t,e){var n,r,l,c,d,u,h;for(c=t.next_in_index,d=t.avail_in,r=this.bitb,l=this.bitk,h=(u=this.write)<this.read?this.read-u-1:this.end-u;;)switch(this.mode){case s:for(;l<3;){if(0==d)return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);e=i,d--,r|=(255&t.next_in[c++])<<l,l+=8}switch(n=7&r,this.last=1&n,n>>>1){case 0:r>>>=3,r>>>=n=7&(l-=3),l-=n,this.mode=1;break;case 1:x(_=new Int32Array(1),g=new Int32Array(1),v=[],b=[],t),this.codes.init(_[0],g[0],v[0],0,b[0],0,t),r>>>=3,l-=3,this.mode=6;break;case 2:r>>>=3,l-=3,this.mode=3;break;case 3:return r>>>=3,l-=3,this.mode=13,t.msg="invalid block type",e=-3,this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e)}break;case 1:for(;l<32;){if(0==d)return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);e=i,d--,r|=(255&t.next_in[c++])<<l,l+=8}if((~r>>>16&65535)!=(65535&r))return this.mode=13,t.msg="invalid stored block lengths",e=-3,this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);this.left=65535&r,r=l=0,this.mode=0!=this.left?2:0!=this.last?7:s;break;case 2:if(0==d)return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,write=u,this.inflate_flush(t,e);if(0==h&&(u==end&&0!=read&&(h=(u=0)<this.read?this.read-u-1:this.end-u),0==h&&(this.write=u,e=this.inflate_flush(t,e),h=(u=this.write)<this.read?this.read-u-1:this.end-u,u==this.end&&0!=this.read&&(h=(u=0)<this.read?this.read-u-1:this.end-u),0==h)))return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);if(e=i,(n=this.left)>d&&(n=d),n>h&&(n=h),M(t.next_in,c,this.window,u,n),c+=n,d-=n,u+=n,h-=n,0!=(this.left-=n))break;this.mode=0!=this.last?7:s;break;case 3:for(;l<14;){if(0==d)return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);e=i,d--,r|=(255&t.next_in[c++])<<l,l+=8}if(this.table=n=16383&r,(31&n)>29||(n>>5&31)>29)return this.mode=9,t.msg="too many length or distance symbols",e=-3,this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);if(n=258+(31&n)+(n>>5&31),null==this.blens||this.blens.length<n)this.blens=new Int32Array(n);else for(var f=0;f<n;f++)this.blens[f]=0;r>>>=14,l-=14,this.index=0,mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;l<3;){if(0==d)return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);e=i,d--,r|=(255&t.next_in[c++])<<l,l+=8}this.blens[y[this.index++]]=7&r,r>>>=3,l-=3}for(;this.index<19;)this.blens[y[this.index++]]=0;if(this.bb[0]=7,(n=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,t))!=i)return-3==(e=n)&&(this.blens=null,this.mode=9),this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,write=u,this.inflate_flush(t,e);this.index=0,this.mode=5;case 5:for(;n=this.table,this.index<258+(31&n)+(n>>5&31);){var p,m;for(n=this.bb[0];l<n;){if(0==d)return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);e=i,d--,r|=(255&t.next_in[c++])<<l,l+=8}if(n=this.hufts[3*(this.tb[0]+(r&o[n]))+1],(m=this.hufts[3*(this.tb[0]+(r&o[n]))+2])<16)r>>>=n,l-=n,this.blens[this.index++]=m;else{for(f=18==m?7:m-14,p=18==m?11:3;l<n+f;){if(0==d)return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);e=i,d--,r|=(255&t.next_in[c++])<<l,l+=8}if(l-=n,p+=(r>>>=n)&o[f],r>>>=f,l-=f,(f=this.index)+p>258+(31&(n=this.table))+(n>>5&31)||16==m&&f<1)return this.blens=null,this.mode=9,t.msg="invalid bit length repeat",e=-3,this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);m=16==m?this.blens[f-1]:0;do{this.blens[f++]=m}while(0!=--p);this.index=f}}this.tb[0]=-1;var _=new Int32Array(1),g=new Int32Array(1),v=new Int32Array(1),b=new Int32Array(1);if(_[0]=9,g[0]=6,n=this.table,(n=this.inftree.inflate_trees_dynamic(257+(31&n),1+(n>>5&31),this.blens,_,g,v,b,this.hufts,t))!=i)return-3==n&&(this.blens=null,this.mode=13),e=n,this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);this.codes.init(_[0],g[0],this.hufts,v[0],this.hufts,b[0],t),this.mode=6;case 6:if(this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,(e=this.codes.proc(this,t,e))!=a)return this.inflate_flush(t,e);if(e=i,this.codes.free(t),c=t.next_in_index,d=t.avail_in,r=this.bitb,l=this.bitk,h=(u=this.write)<this.read?this.read-u-1:this.end-u,0==this.last){this.mode=s;break}this.mode=7;case 7:if(this.write=u,e=this.inflate_flush(t,e),h=(u=this.write)<this.read?this.read-u-1:this.end-u,this.read!=this.write)return this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);mode=12;case 8:return e=a,this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);case 9:return e=-3,this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e);default:return e=-2,this.bitb=r,this.bitk=l,t.avail_in=d,t.total_in+=c-t.next_in_index,t.next_in_index=c,this.write=u,this.inflate_flush(t,e)}},b.prototype.free=function(t){this.reset(t,null),this.window=null,this.hufts=null},b.prototype.set_dictionary=function(t,e,n){M(t,e,window,0,n),this.read=this.write=n},b.prototype.sync_point=function(){return 1==this.mode},b.prototype.inflate_flush=function(t,e){var n,a,o;return a=t.next_out_index,(n=((o=this.read)<=this.write?this.write:this.end)-o)>t.avail_out&&(n=t.avail_out),0!=n&&e==r&&(e=i),t.avail_out-=n,t.total_out+=n,null!=this.checkfn&&(t.adler=this.check=t._adler.adler32(this.check,this.window,o,n)),M(this.window,o,t.next_out,a,n),a+=n,(o+=n)==this.end&&(o=0,this.write==this.end&&(this.write=0),(n=this.write-o)>t.avail_out&&(n=t.avail_out),0!=n&&e==r&&(e=i),t.avail_out-=n,t.total_out+=n,null!=this.checkfn&&(t.adler=this.check=t._adler.adler32(this.check,this.window,o,n)),M(this.window,o,t.next_out,a,n),a+=n,o+=n),t.next_out_index=a,this.read=o,e};function w(){}function k(){}function x(t,e,n,a,r){return t[0]=l,e[0]=c,n[0]=d,a[0]=u,i}w.prototype.init=function(t,e,n,i,a,r,o){this.mode=0,this.lbits=t,this.dbits=e,this.ltree=n,this.ltree_index=i,this.dtree=a,this.dtree_index=r,this.tree=null},w.prototype.proc=function(t,e,n){var r,s,l,c,d,u,h,f=0,p=0,m=0;for(m=e.next_in_index,c=e.avail_in,f=t.bitb,p=t.bitk,u=(d=t.write)<t.read?t.read-d-1:t.end-d;;)switch(this.mode){case 0:if(u>=258&&c>=10&&(t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,n=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,t,e),m=e.next_in_index,c=e.avail_in,f=t.bitb,p=t.bitk,u=(d=t.write)<t.read?t.read-d-1:t.end-d,n!=i)){this.mode=n==a?7:9;break}this.need=this.lbits,this.tree=this.ltree,this.tree_index=this.ltree_index,this.mode=1;case 1:for(r=this.need;p<r;){if(0==c)return t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);n=i,c--,f|=(255&e.next_in[m++])<<p,p+=8}if(s=3*(this.tree_index+(f&o[r])),f>>>=this.tree[s+1],p-=this.tree[s+1],0==(l=this.tree[s])){this.lit=this.tree[s+2],this.mode=6;break}if(0!=(16&l)){this.get=15&l,this.len=this.tree[s+2],this.mode=2;break}if(0==(64&l)){this.need=l,this.tree_index=s/3+this.tree[s+2];break}if(0!=(32&l)){this.mode=7;break}return this.mode=9,e.msg="invalid literal/length code",n=-3,t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);case 2:for(r=this.get;p<r;){if(0==c)return t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);n=i,c--,f|=(255&e.next_in[m++])<<p,p+=8}this.len+=f&o[r],f>>=r,p-=r,this.need=this.dbits,this.tree=this.dtree,this.tree_index=this.dtree_index,this.mode=3;case 3:for(r=this.need;p<r;){if(0==c)return t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);n=i,c--,f|=(255&e.next_in[m++])<<p,p+=8}if(s=3*(this.tree_index+(f&o[r])),f>>=this.tree[s+1],p-=this.tree[s+1],0!=(16&(l=this.tree[s]))){this.get=15&l,this.dist=this.tree[s+2],this.mode=4;break}if(0==(64&l)){this.need=l,this.tree_index=s/3+this.tree[s+2];break}return this.mode=9,e.msg="invalid distance code",n=-3,t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);case 4:for(r=this.get;p<r;){if(0==c)return t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);n=i,c--,f|=(255&e.next_in[m++])<<p,p+=8}this.dist+=f&o[r],f>>=r,p-=r,this.mode=5;case 5:for(h=d-this.dist;h<0;)h+=t.end;for(;0!=this.len;){if(0==u&&(d==t.end&&0!=t.read&&(u=(d=0)<t.read?t.read-d-1:t.end-d),0==u&&(t.write=d,n=t.inflate_flush(e,n),u=(d=t.write)<t.read?t.read-d-1:t.end-d,d==t.end&&0!=t.read&&(u=(d=0)<t.read?t.read-d-1:t.end-d),0==u)))return t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);t.window[d++]=t.window[h++],u--,h==t.end&&(h=0),this.len--}this.mode=0;break;case 6:if(0==u&&(d==t.end&&0!=t.read&&(u=(d=0)<t.read?t.read-d-1:t.end-d),0==u&&(t.write=d,n=t.inflate_flush(e,n),u=(d=t.write)<t.read?t.read-d-1:t.end-d,d==t.end&&0!=t.read&&(u=(d=0)<t.read?t.read-d-1:t.end-d),0==u)))return t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);n=i,t.window[d++]=this.lit,u--,this.mode=0;break;case 7:if(p>7&&(p-=8,c++,m--),t.write=d,n=t.inflate_flush(e,n),u=(d=t.write)<t.read?t.read-d-1:t.end-d,t.read!=t.write)return t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);this.mode=8;case 8:return n=a,t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);case 9:return n=-3,t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n);default:return n=-2,t.bitb=f,t.bitk=p,e.avail_in=c,e.total_in+=m-e.next_in_index,e.next_in_index=m,t.write=d,t.inflate_flush(e,n)}},w.prototype.free=function(t){},w.prototype.inflate_fast=function(t,e,n,r,s,l,c,d){var u,h,f,p,m,_,g,v,y,b,w,k,x,S,C,T;g=d.next_in_index,v=d.avail_in,m=c.bitb,_=c.bitk,b=(y=c.write)<c.read?c.read-y-1:c.end-y,w=o[t],k=o[e];do{for(;_<20;)v--,m|=(255&d.next_in[g++])<<_,_+=8;if(0!=(p=(h=n)[T=3*((f=r)+(u=m&w))]))for(;;){if(m>>=h[T+1],_-=h[T+1],0!=(16&p)){for(p&=15,x=h[T+2]+(m&o[p]),m>>=p,_-=p;_<15;)v--,m|=(255&d.next_in[g++])<<_,_+=8;for(p=(h=s)[T=3*((f=l)+(u=m&k))];;){if(m>>=h[T+1],_-=h[T+1],0!=(16&p)){for(p&=15;_<p;)v--,m|=(255&d.next_in[g++])<<_,_+=8;if(S=h[T+2]+(m&o[p]),m>>=p,_-=p,b-=x,y>=S)C=y-S,c.window[y++]=c.window[C++],c.window[y++]=c.window[C++],x-=2;else{C=y-S;do{C+=c.end}while(C<0);if(x>(p=c.end-C)){if(x-=p,y-C>0&&p>y-C)do{c.window[y++]=c.window[C++]}while(0!=--p);else M(c.window,C,c.window,y,p),y+=p,C+=p,p=0;C=0}}do{c.window[y++]=c.window[C++]}while(0!=--x);break}if(0!=(64&p))return d.msg="invalid distance code",v+=x=_>>3<(x=d.avail_in-v)?_>>3:x,g-=x,_-=x<<3,c.bitb=m,c.bitk=_,d.avail_in=v,d.total_in+=g-d.next_in_index,d.next_in_index=g,c.write=y,-3;u+=h[T+2],p=h[T=3*(f+(u+=m&o[p]))]}break}if(0!=(64&p))return 0!=(32&p)?(v+=x=_>>3<(x=d.avail_in-v)?_>>3:x,g-=x,_-=x<<3,c.bitb=m,c.bitk=_,d.avail_in=v,d.total_in+=g-d.next_in_index,d.next_in_index=g,c.write=y,a):(d.msg="invalid literal/length code",v+=x=_>>3<(x=d.avail_in-v)?_>>3:x,g-=x,_-=x<<3,c.bitb=m,c.bitk=_,d.avail_in=v,d.total_in+=g-d.next_in_index,d.next_in_index=g,c.write=y,-3);if(u+=h[T+2],0==(p=h[T=3*(f+(u+=m&o[p]))])){m>>=h[T+1],_-=h[T+1],c.window[y++]=h[T+2],b--;break}}else m>>=h[T+1],_-=h[T+1],c.window[y++]=h[T+2],b--}while(b>=258&&v>=10);return v+=x=_>>3<(x=d.avail_in-v)?_>>3:x,g-=x,_-=x<<3,c.bitb=m,c.bitk=_,d.avail_in=v,d.total_in+=g-d.next_in_index,d.next_in_index=g,c.write=y,i},k.prototype.huft_build=function(t,n,a,o,s,l,c,d,u,h,f){var p,m,_,g,v,y,b,w,k,x,S,C,T,j,O;x=0,v=a;do{this.c[t[n+x]]++,x++,v--}while(0!=v);if(this.c[0]==a)return c[0]=-1,d[0]=0,i;for(w=d[0],y=1;y<=15&&0==this.c[y];y++);for(b=y,w<y&&(w=y),v=15;0!=v&&0==this.c[v];v--);for(_=v,w>v&&(w=v),d[0]=w,j=1<<y;y<v;y++,j<<=1)if((j-=this.c[y])<0)return-3;if((j-=this.c[v])<0)return-3;for(this.c[v]+=j,this.x[1]=y=0,x=1,T=2;0!=--v;)this.x[T]=y+=this.c[x],T++,x++;v=0,x=0;do{0!=(y=t[n+x])&&(this.v[this.x[y]++]=v),x++}while(++v<a);for(a=this.x[_],this.x[0]=v=0,x=0,g=-1,C=-w,this.u[0]=0,S=0,O=0;b<=_;b++)for(p=this.c[b];0!=p--;){for(;b>C+w;){if(g++,O=(O=_-(C+=w))>w?w:O,(m=1<<(y=b-C))>p+1&&(m-=p+1,T=b,y<O))for(;++y<O&&!((m<<=1)<=this.c[++T]);)m-=this.c[T];if(O=1<<y,this.hn[0]+O>e)return-3;this.u[g]=S=this.hn[0],this.hn[0]+=O,0!=g?(this.x[g]=v,this.r[0]=y,this.r[1]=w,y=v>>>C-w,this.r[2]=S-this.u[g-1]-y,M(this.r,0,u,3*(this.u[g-1]+y),3)):c[0]=S}for(this.r[1]=b-C,x>=a?this.r[0]=192:f[x]<o?(this.r[0]=this.v[x]<256?0:96,this.r[2]=this.v[x++]):(this.r[0]=l[this.v[x]-o]+16+64,this.r[2]=s[this.v[x++]-o]),m=1<<b-C,y=v>>>C;y<O;y+=m)M(this.r,0,u,3*(S+y),3);for(y=1<<b-1;0!=(v&y);y>>>=1)v^=y;for(v^=y,k=(1<<C)-1;(v&k)!=this.x[g];)g--,k=(1<<(C-=w))-1}return 0!=j&&1!=_?r:i},k.prototype.inflate_trees_bits=function(t,e,n,i,a){var o;return this.initWorkArea(19),this.hn[0]=0,-3==(o=this.huft_build(t,0,19,19,null,null,n,e,i,this.hn,this.v))?a.msg="oversubscribed dynamic bit lengths tree":o!=r&&0!=e[0]||(a.msg="incomplete dynamic bit lengths tree",o=-3),o},k.prototype.inflate_trees_dynamic=function(t,e,n,a,o,s,l,c,d){var u;return this.initWorkArea(288),this.hn[0]=0,(u=this.huft_build(n,0,t,257,h,f,s,a,c,this.hn,this.v))!=i||0==a[0]?(-3==u?d.msg="oversubscribed literal/length tree":-4!=u&&(d.msg="incomplete literal/length tree",u=-3),u):(this.initWorkArea(288),(u=this.huft_build(n,t,e,0,p,m,l,o,c,this.hn,this.v))!=i||0==o[0]&&t>257?(-3==u?d.msg="oversubscribed distance tree":u==r?(d.msg="incomplete distance tree",u=-3):-4!=u&&(d.msg="empty distance tree with lengths",u=-3),u):i)},k.prototype.initWorkArea=function(t){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(t),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16)),this.v.length<t&&(this.v=new Int32Array(t));for(var e=0;e<t;e++)this.v[e]=0;for(e=0;e<16;e++)this.c[e]=0;for(e=0;e<3;e++)this.r[e]=0;M(this.c,0,this.u,0,15),M(this.c,0,this.x,0,16)};var S="function"==typeof new Uint8Array(1).subarray;function M(t,e,n,i,a){if(0!=a){if(!t)throw"Undef src";if(!n)throw"Undef dest";0==e&&a==t.length?C(t,n,i):S?C(t.subarray(e,e+a),n,i):1==t.BYTES_PER_ELEMENT&&a>100?C(new Uint8Array(t.buffer,t.byteOffset+e,a),n,i):function(t,e,n,i,a){for(var r=0;r<a;++r)n[i+r]=t[e+r]}(t,e,n,i,a)}}function C(t,e,n){e.set(t,n)}return{inflateBuffer:function(e,o,s,l){e=o?s?new Uint8Array(e,o,s):new Uint8Array(e,o,e.byteLength-o):new Uint8Array(e);var c=new _;c.inflateInit(t,!0),c.next_in=e,c.next_in_index=0,c.avail_in=e.length;for(var d=[],u=0;;){var h=new Uint8Array(32e3);c.next_out=h,c.next_out_index=0,c.avail_out=h.length;var f=c.inflate(n);if(f!=i&&f!=a&&f!=r)throw c.msg;if(0!=c.avail_out){var p=new Uint8Array(h.length-c.avail_out);M(h,0,p,0,h.length-c.avail_out),h=p}if(d.push(h),u+=h.length,f==a||f==r)break}if(l&&(l[0]=(o||0)+c.next_in_index),1==d.length)return d[0].buffer;for(var m=new Uint8Array(u),g=0,v=0;v<d.length;++v){var y=d[v];M(y,0,m,g,y.length),g+=y.length}return m.buffer},arrayCopy:M}}.apply(e,[]))||(t.exports=i)},function(t,e,n){(function(i){var a,r,o;r=[n(0)],void 0===(o="function"==typeof(a=function(t){var e=t.ajaxSettings;e.responseFields.native="responseNative",e.converters["* native"]=!0;var n={},a=0,r={0:200,1223:204},o={},s=i.ajaxSettings.xhr();window.ActiveXObject&&t(window).on("unload",(function(){for(var t in o)o[t]()})),n.cors=!!s&&"withCredentials"in s,n.ajax=s=!!s,t.ajaxTransport("native",(function(t){var e;if(n.cors||s&&!t.crossDomain)return{send:function(n,i){var s,l=t.xhr(),c=++a,d={};if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)l[s]=t.xhrFields[s];for(s in t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)l.setRequestHeader(s,n[s]);e=function(t){return function(){e&&(delete o[c],e=l.onload=l.onerror=null,"abort"===t?l.abort():"error"===t?i(l.status,l.statusText):(l.response&&(d.native=l.response),i(r[l.status]||l.status,l.statusText,d,l.getAllResponseHeaders())))}},l.onload=e(),l.onerror=e("error"),e=o[c]=e("abort");try{l.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),t.getNative=function(e,n){return t.ajax({dataType:"native",url:e,xhrFields:{responseType:"arraybuffer"},success:n})}})?a.apply(e,r):a)||(t.exports=o)}).call(this,n(0))},function(t,e,n){(function(t){!function(t){t.fn.drag=function(e,n,i){var a="string"==typeof e?e:"",r=t.isFunction(e)?e:t.isFunction(n)?n:null;return 0!==a.indexOf("drag")&&(a="drag"+a),i=(e==r?n:i)||{},r?this.bind(a,i,r):this.trigger(a)};var e=t.event,n=e.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var n=t.data(this,i.datakey),a=e.data||{};n.related+=1,t.each(i.defaults,(function(t,e){void 0!==a[t]&&(n[t]=a[t])}))},remove:function(){t.data(this,i.datakey).related-=1},setup:function(){if(!t.data(this,i.datakey)){var n=t.extend({related:0},i.defaults);t.data(this,i.datakey,n),e.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(t.data(this,i.datakey)||{}).related||(t.removeData(this,i.datakey),e.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(a){if(!i.touched){var r,o=a.data;if(!(0!=a.which&&o.which>0&&a.which!=o.which)&&!t(a.target).is(o.not)&&(!o.handle||t(a.target).closest(o.handle,a.currentTarget).length)&&(i.touched="touchstart"==a.type?this:null,o.propagates=1,o.mousedown=this,o.interactions=[i.interaction(this,o)],o.target=a.target,o.pageX=a.pageX,o.pageY=a.pageY,o.dragging=null,r=i.hijack(a,"draginit",o),o.propagates))return(r=i.flatten(r))&&r.length&&(o.interactions=[],t.each(r,(function(){o.interactions.push(i.interaction(this,o))}))),o.propagates=o.interactions.length,!1!==o.drop&&n.drop&&n.drop.handler(a,o),i.textselect(!1),i.touched?e.add(i.touched,"touchmove touchend",i.handler,o):e.add(document,"mousemove mouseup",i.handler,o),!(!i.touched||o.live)&&void 0}},interaction:function(e,n){var a=t(e)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new i.callback,droppable:[],offset:a}},handler:function(a){var r=a.data;switch(a.type){case!r.dragging&&"touchmove":a.preventDefault();case!r.dragging&&"mousemove":if(Math.pow(a.pageX-r.pageX,2)+Math.pow(a.pageY-r.pageY,2)<Math.pow(r.distance,2))break;a.target=r.target,i.hijack(a,"dragstart",r),r.propagates&&(r.dragging=!0);case"touchmove":a.preventDefault();case"mousemove":if(r.dragging){if(i.hijack(a,"drag",r),r.propagates){!1!==r.drop&&n.drop&&n.drop.handler(a,r);break}a.type="mouseup"}case"touchend":case"mouseup":default:i.touched?e.remove(i.touched,"touchmove touchend",i.handler):e.remove(document,"mousemove mouseup",i.handler),r.dragging?(!1!==r.drop&&n.drop&&n.drop.handler(a,r),i.hijack(a,"dragend",r)):i.hijack(a,"dragclickonly",r),i.textselect(!0),!1===r.click&&r.dragging&&t.data(r.mousedown,"suppress.click",(new Date).getTime()+5),r.dragging=i.touched=!1}},hijack:function(n,a,r,o,s){if(r){var l,c,d,u={event:n.originalEvent,type:n.type},h=a.indexOf("drop")?"drag":"drop",f=o||0,p=isNaN(o)?r.interactions.length:o;n.type=a,n.originalEvent=null,r.results=[];do{if(c=r.interactions[f]){if("dragend"!==a&&c.cancelled)continue;d=i.properties(n,r,c),c.results=[],t(s||c[h]||r.droppable).each((function(o,s){if(d.target=s,n.isPropagationStopped=function(){return!1},!1===(l=s?e.dispatch.call(s,n,d):null)?("drag"==h&&(c.cancelled=!0,r.propagates-=1),"drop"==a&&(c[h][o]=null)):"dropinit"==a&&c.droppable.push(i.element(l)||s),"dragstart"==a&&(c.proxy=t(i.element(l)||c.drag)[0]),c.results.push(l),delete n.result,"dropinit"!==a)return l})),r.results[f]=i.flatten(c.results),"dropinit"==a&&(c.droppable=i.flatten(c.droppable)),"dragstart"!=a||c.cancelled||d.update()}}while(++f<p);return n.type=u.type,n.originalEvent=u.event,i.flatten(r.results)}},properties:function(t,e,n){var a=n.callback;return a.drag=n.drag,a.proxy=n.proxy||n.drag,a.startX=e.pageX,a.startY=e.pageY,a.deltaX=t.pageX-e.pageX,a.deltaY=t.pageY-e.pageY,a.originalX=n.offset.left,a.originalY=n.offset.top,a.offsetX=a.originalX+a.deltaX,a.offsetY=a.originalY+a.deltaY,a.drop=i.flatten((n.drop||[]).slice()),a.available=i.flatten((n.droppable||[]).slice()),a},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(e){return t.map(e,(function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?i.flatten(e):e}))},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&t.each(this.available,(function(t){n.drop.locate(this,t)}))}};var a=e.dispatch;e.dispatch=function(e){if(!(t.data(this,"suppress."+e.type)-(new Date).getTime()>0))return a.apply(this,arguments);t.removeData(this,"suppress."+e.type)};var r=e.fixHooks.touchstart=e.fixHooks.touchmove=e.fixHooks.touchend=e.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&t.each(r.props,(function(t,n){e[n]=i[n]}))}return e}};n.draginit=n.dragstart=n.dragend=i}(t)}).call(this,n(0))},function(t,e,n){(function(t){!function(t){t.fn._hover=t.fn.hover,t.fn.hover=function(t,e,n){return n&&this.bind("hoverstart",t),e&&this.bind("hoverend",n||e),t?this.bind("hover",n?e:t):this.trigger("hover")};var e=t.event.special.hover={delay:100,speed:100,setup:function(i){i=t.extend({speed:e.speed,delay:e.delay,hovered:0},i||{}),t.event.add(this,"mouseenter mouseleave",n,i)},teardown:function(){t.event.remove(this,"mouseenter mouseleave",n)}};function n(e){var i=e.data||e;switch(e.type){case"mouseenter":i.dist2=0,i.event=e,e.type="hoverstart",!1!==t.event.dispatch.call(this,e)&&(i.elem=this,t.event.add(this,"mousemove",n,i),i.timer=setTimeout(a,i.delay));break;case"mousemove":i.dist2+=Math.pow(e.pageX-i.event.pageX,2)+Math.pow(e.pageY-i.event.pageY,2),i.event=e;break;case"mouseleave":clearTimeout(i.timer),i.hovered?(e.type="hoverend",t.event.dispatch.call(this,e),i.hovered--):t.event.remove(i.elem,"mousemove",n);break;default:i.dist2<=Math.pow(i.speed*(i.delay/1e3),2)?(t.event.remove(i.elem,"mousemove",n),i.event.type="hover",!1!==t.event.dispatch.call(i.elem,i.event)&&i.hovered++):i.timer=setTimeout(a,i.delay),i.dist2=0}function a(){n(i)}}}(t)}).call(this,n(0))},function(t,e,n){(function(t){var e,n,i,a,r;
/*! jQuery UI - v1.9.1 - 2012-10-29
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
!function(t,e){function n(e,n){var a,r,o,s=e.nodeName.toLowerCase();return"area"===s?(r=(a=e.parentNode).name,!(!e.href||!r||"map"!==a.nodeName.toLowerCase())&&(!!(o=t("img[usemap=#"+r+"]")[0])&&i(o))):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s&&e.href||n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter((function(){return"hidden"===t.css(this,"visibility")})).length}var a=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,n){return"number"==typeof e?this.each((function(){var i=this;setTimeout((function(){t(i).focus(),n&&n.call(i)}),e)})):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,a,r=t(this[0]);r.length&&r[0]!==document;){if(("absolute"===(i=r.css("position"))||"relative"===i||"fixed"===i)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++a)}))},removeUniqueId:function(){return this.each((function(){r.test(this.id)&&t(this).removeAttr("id")}))}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],(function(n,i){function a(e,n,i,a){return t.each(r,(function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(n-=parseFloat(t.css(e,"margin"+this))||0)})),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?s["inner"+i].call(this):this.each((function(){t(this).css(o,a(this,n)+"px")}))},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?s["outer"+i].call(this,e):this.each((function(){t(this).css(o,a(this,e,!0,n)+"px")}))}})),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(n){return!!t.data(n,e)}})):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(e,!a)}}),t((function(){var e=document.body,n=e.appendChild(n=document.createElement("div"));n.offsetHeight,t.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===n.offsetHeight,t.support.selectstart="onselectstart"in n,e.removeChild(n).style.display="none"})),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];t.ui.ie=!!e.length,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(t){t.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var a,r=t.ui[e].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(t,e,n){var i,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)t.options[a[i][0]]&&a[i][1].apply(t.element,n)}},contains:t.contains,hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return e[i]>0||(e[i]=1,a=e[i]>0,e[i]=0,a)},isOverAxis:function(t,e,n){return t>e&&t<e+n},isOver:function(e,n,i,a,r,o){return t.ui.isOverAxis(e,i,r)&&t.ui.isOverAxis(n,a,o)}}))}(t),e=t,i=0,a=Array.prototype.slice,r=e.cleanData,e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(t){}r(t)},e.widget=function(t,n,i){var a,r,o,s,l=t.split(".")[0];t=t.split(".")[1],a=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[l]=e[l]||{},r=e[l][t],o=e[l][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(s=new n).options=e.widget.extend({},s.options),e.each(i,(function(t,a){e.isFunction(a)&&(i[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=i,t=a.apply(this,arguments),this._super=n,this._superApply=r,t}}())})),o.prototype=e.widget.extend(s,{widgetEventPrefix:s.widgetEventPrefix||t},i,{constructor:o,namespace:l,widgetName:t,widgetBaseClass:a,widgetFullName:a}),r?(e.each(r._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)})),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(t){for(var i,r,o=a.call(arguments,1),s=0,l=o.length;s<l;s++)for(i in o[s])r=o[s][i],o[s].hasOwnProperty(i)&&r!==n&&(e.isPlainObject(r)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):t[i]=r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName;e.fn[t]=function(o){var s="string"==typeof o,l=a.call(arguments,1),c=this;return o=!s&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,s?this.each((function(){var i,a=e.data(this,r);return a?e.isFunction(a[o])&&"_"!==o.charAt(0)?(i=a[o].apply(a,l))!==a&&i!==n?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")})):this.each((function(){var t=e.data(this,r);t?t.option(o||{})._init():new i(o,this)})),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),e.data(n,this.widgetFullName,this),this._on(this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var a,r,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},a=t.split("."),t=a.shift(),a.length){for(r=s[t]=e.widget.extend({},this.options[t]),o=0;o<a.length-1;o++)r[a[o]]=r[a[o]]||{},r=r[a[o]];if(t=a.pop(),i===n)return r[t]===n?null:r[t];r[t]=i}else{if(i===n)return this.options[t]===n?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var i,a=this;n?(t=i=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,i=this.widget()),e.each(n,(function(n,r){function o(){if(!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof r?a[r]:r).apply(a,arguments)}"string"!=typeof r&&(o.guid=r.guid=r.guid||o.guid||e.guid++);var s=n.match(/^(\w+)\s*(.*)$/),l=s[1]+a.eventNamespace,c=s[2];c?i.delegate(c,l,o):t.bind(l,o)}))},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var n=this;return setTimeout((function(){return("string"==typeof t?n[t]:t).apply(n,arguments)}),e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var a,r,o=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,a,r){"string"==typeof a&&(a={effect:a});var o,s=a?!0===a||"number"==typeof a?n:a.effect||n:t;"number"==typeof(a=a||{})&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),o&&e.effects&&(e.effects.effect[s]||!1!==e.uiBackCompat&&e.effects[s])?i[t](a):s!==t&&i[s]?i[s](a.duration,a.easing,r):i.queue((function(n){e(this)[t](),r&&r.call(i[0]),n()}))}})),!1!==e.uiBackCompat&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]}),function(t,e){var n=!1;t(document).mouseup((function(t){n=!1})),t.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).bind("click."+this.widgetName,(function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,a=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(a&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0))}},_mouseMove:function(e){return!t.ui.ie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(t){return this.mouseDelayMet},_mouseStart:function(t){},_mouseDrag:function(t){},_mouseStop:function(t){},_mouseCapture:function(t){return!0}})}(t),function(e,n){function i(t,e,n){return[parseInt(t[0],10)*(f.test(t[0])?e/100:1),parseInt(t[1],10)*(f.test(t[1])?n/100:1)]}function a(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var r,o=Math.max,s=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(r!==n)return r;var t,i,a=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=a.children()[0];return e("body").append(a),t=o.offsetWidth,a.css("overflow","scroll"),t===(i=o.offsetWidth)&&(i=a[0].clientWidth),a.remove(),r=t-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),a="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,r="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var n,r,f,m,_,g=e(t.of),v=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo(v),b=g[0],w=(t.collision||"flip").split(" "),k={};return 9===b.nodeType?(r=g.width(),f=g.height(),m={top:0,left:0}):e.isWindow(b)?(r=g.width(),f=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):b.preventDefault?(t.at="left top",r=f=0,m={top:b.pageY,left:b.pageX}):(r=g.outerWidth(),f=g.outerHeight(),m=g.offset()),_=e.extend({},m),e.each(["my","at"],(function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):d.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=d.test(i[1])?i[1]:"center",e=u.exec(i[0]),n=u.exec(i[1]),k[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]})),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?_.left+=r:"center"===t.at[0]&&(_.left+=r/2),"bottom"===t.at[1]?_.top+=f:"center"===t.at[1]&&(_.top+=f/2),n=i(k.at,r,f),_.left+=n[0],_.top+=n[1],this.each((function(){var c,d,u=e(this),h=u.outerWidth(),p=u.outerHeight(),b=a(this,"marginLeft"),x=a(this,"marginTop"),S=h+b+a(this,"marginRight")+y.width,M=p+x+a(this,"marginBottom")+y.height,C=e.extend({},_),T=i(k.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?C.left-=h:"center"===t.my[0]&&(C.left-=h/2),"bottom"===t.my[1]?C.top-=p:"center"===t.my[1]&&(C.top-=p/2),C.left+=T[0],C.top+=T[1],e.support.offsetFractions||(C.left=l(C.left),C.top=l(C.top)),c={marginLeft:b,marginTop:x},e.each(["left","top"],(function(i,a){e.ui.position[w[i]]&&e.ui.position[w[i]][a](C,{targetWidth:r,targetHeight:f,elemWidth:h,elemHeight:p,collisionPosition:c,collisionWidth:S,collisionHeight:M,offset:[n[0]+T[0],n[1]+T[1]],my:t.my,at:t.at,within:v,elem:u})})),e.fn.bgiframe&&u.bgiframe(),t.using&&(d=function(e){var n=m.left-C.left,i=n+r-h,a=m.top-C.top,l=a+f-p,c={target:{element:g,left:m.left,top:m.top,width:r,height:f},element:{element:u,left:C.left,top:C.top,width:h,height:p},horizontal:i<0?"left":n>0?"right":"center",vertical:l<0?"top":a>0?"bottom":"middle"};r<h&&s(n+i)<r&&(c.horizontal="center"),f<p&&s(a+l)<f&&(c.vertical="middle"),o(s(n),s(i))>o(s(a),s(l))?c.important="horizontal":c.important="vertical",t.using.call(this,e,c)}),u.offset(e.extend(C,{using:d}))}))},e.ui.position={fit:{left:function(t,e){var n,i=e.within,a=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,s=t.left-e.collisionPosition.marginLeft,l=a-s,c=s+e.collisionWidth-r-a;e.collisionWidth>r?l>0&&c<=0?(n=t.left+l+e.collisionWidth-r-a,t.left+=l-n):t.left=c>0&&l<=0?a:l>c?a+r-e.collisionWidth:a:l>0?t.left+=l:c>0?t.left-=c:t.left=o(t.left-s,t.left)},top:function(t,e){var n,i=e.within,a=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,l=a-s,c=s+e.collisionHeight-r-a;e.collisionHeight>r?l>0&&c<=0?(n=t.top+l+e.collisionHeight-r-a,t.top+=l-n):t.top=c>0&&l<=0?a:l>c?a+r-e.collisionHeight:a:l>0?t.top+=l:c>0?t.top-=c:t.top=o(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,a=e.within,r=a.offset.left+a.scrollLeft,o=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,c=t.left-e.collisionPosition.marginLeft,d=c-l,u=c+e.collisionWidth-o-l,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];d<0?((n=t.left+h+f+p+e.collisionWidth-o-r)<0||n<s(d))&&(t.left+=h+f+p):u>0&&((i=t.left-e.collisionPosition.marginLeft+h+f+p-l)>0||s(i)<u)&&(t.left+=h+f+p)},top:function(t,e){var n,i,a=e.within,r=a.offset.top+a.scrollTop,o=a.height,l=a.isWindow?a.scrollTop:a.offset.top,c=t.top-e.collisionPosition.marginTop,d=c-l,u=c+e.collisionHeight-o-l,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];d<0?(i=t.top+h+f+p+e.collisionHeight-o-r,t.top+h+f+p>d&&(i<0||i<s(d))&&(t.top+=h+f+p)):u>0&&(n=t.top-e.collisionPosition.marginTop+h+f+p-l,t.top+h+f+p>u&&(n>0||s(n)<u)&&(t.top+=h+f+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,a,r,o=document.getElementsByTagName("body")[0],s=document.createElement("div");for(r in t=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[r]=i[r];t.appendChild(s),(n=o||document.documentElement).insertBefore(t,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",a=e(s).offset().left,e.support.offsetFractions=a>10&&a<11,t.innerHTML="",n.removeChild(t)}(),!1!==e.uiBackCompat&&function(t){var e=t.fn.position;t.fn.position=function(i){if(!i||!i.offset)return e.call(this,i);var a=i.offset.split(" "),r=i.at.split(" ");return 1===a.length&&(a[1]=a[0]),/^\d/.test(a[0])&&(a[0]="+"+a[0]),/^\d/.test(a[1])&&(a[1]="+"+a[1]),1===r.length&&(/left|center|right/.test(r[0])?r[1]="center":(r[1]=r[0],r[0]="center")),e.call(this,t.extend(i,{at:r[0]+a[0]+" "+r[1]+a[1],offset:n}))}}(t)}(t),function(t,e){var n=0;t.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return e=!0,i=!0,void(n=!0);e=!1,i=!1,n=!1;var r=t.ui.keyCode;switch(a.keyCode){case r.PAGE_UP:e=!0,this._move("previousPage",a);break;case r.PAGE_DOWN:e=!0,this._move("nextPage",a);break;case r.UP:e=!0,this._keyEvent("previous",a);break;case r.DOWN:e=!0,this._keyEvent("next",a);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(e=!0,a.preventDefault(),this.menu.select(a));break;case r.TAB:this.menu.active&&this.menu.select(a);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:n=!0,this._searchTimeout(a)}},keypress:function(i){if(e)return e=!1,void i.preventDefault();if(!n){var a=t.ui.keyCode;switch(i.keyCode){case a.PAGE_UP:this._move("previousPage",i);break;case a.PAGE_DOWN:this._move("nextPage",i);break;case a.UP:this._keyEvent("previous",i);break;case a.DOWN:this._keyEvent("next",i)}}},input:function(t){if(i)return i=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:t(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay((function(){var e=this;this.document.one("mousedown",(function(i){i.target!==e.element[0]&&i.target!==n&&!t.contains(n,i.target)&&e.close()}))}))},menufocus:function(e,n){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",e,{item:i})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item")||e.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),t.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this.document.find(e||"body")[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var e,n,i=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,i){i(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,a){i.xhr&&i.xhr.abort(),i.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){a(t)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,e=++n;return function(i){e===n&&t.__response(i),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)}))},_suggest:function(e){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,e),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var i=this;t.each(n,(function(t,n){i._renderItemData(e,n)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").append(t("<a>").text(n.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var i=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,(function(t){return i.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(t),function(t,e){var n,i,a,r,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this).find(":ui-button");setTimeout((function(){e.button("refresh")}),1)},c=function(e){var n=e.name,i=e.form,a=t([]);return n&&(a=i?t(i).find("[name='"+n+"']"):t("[name='"+n+"']",e.ownerDocument).filter((function(){return!this.form}))),a};t.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,s=this.options,d="checkbox"===this.type||"radio"===this.type,u="ui-state-hover"+(d?"":" ui-state-active"),h="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){s.disabled||(t(this).addClass("ui-state-hover"),this===n&&t(this).addClass("ui-state-active"))})).bind("mouseleave"+this.eventNamespace,(function(){s.disabled||t(this).removeClass(u)})).bind("click"+this.eventNamespace,(function(t){s.disabled&&(t.preventDefault(),t.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){e.buttonElement.addClass(h)})).bind("blur"+this.eventNamespace,(function(){e.buttonElement.removeClass(h)})),d&&(this.element.bind("change"+this.eventNamespace,(function(){r||e.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(t){s.disabled||(r=!1,i=t.pageX,a=t.pageY)})).bind("mouseup"+this.eventNamespace,(function(t){s.disabled||i===t.pageX&&a===t.pageY||(r=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||r)return!1;t(this).toggleClass("ui-state-active"),e.buttonElement.attr("aria-pressed",e.element[0].checked)})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||r)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var n=e.element[0];c(n).not(n).map((function(){return t(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(s.disabled)return!1;t(this).addClass("ui-state-active"),n=this,e.document.one("mouseup",(function(){n=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(s.disabled)return!1;t(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(e){if(s.disabled)return!1;(e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace,(function(){t(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()}))),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){this._super(t,e),"disabled"!==t?this._resetButton():e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var e=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?c(this.element[0]).each((function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(s),n=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),i=this.options.icons,a=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(a?"s":i.primary?"-primary":"-secondary")),i.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(n)))):r.push("ui-button-text-only"),e.addClass(r.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return t(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return t(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(t),function(t,e){var n=!1;t.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy((function(t){this.options.disabled&&t.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!n&&i.not(".ui-state-disabled").length&&(n=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var n=t(e.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,n)},blur:function(e){this._delay((function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,a,r,o,s,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,a=this.previousFilter||"",r=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),r===a?o=!0:r=a+r,s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(t(this).children("a").text())})),(i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(r=String.fromCharCode(e.keyCode),s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(t(this).children("a").text())}))),i.length?(this.focus(e,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n=this.options.icons.submenu,i=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});(e=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each((function(){var e=t(this);/[^\-—–\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")})),e.children(".ui-state-disabled").attr("aria-disabled","true"),i.each((function(){var e=t(this),i=e.prev("a"),a=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(a),e.attr("aria-labelledby",i.attr("id"))})),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=e.children(".ui-menu")).length&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,a,r,o,s;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,a=e.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=e.height(),a<0?this.activeMenu.scrollTop(r+a):a+s>o&&this.activeMenu.scrollTop(r+a-o+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i}),this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(n,i)},nextPage:function(e){var n,i,a;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(n=t(this)).offset().top-i-a<0})),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var n,i,a;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(n=t(this)).offset().top-i+a>0})),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)}})}(t),function(t,e){t.widget("ui.slider",t.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var e,n,i=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),i.range&&(!0===i.range&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),n=i.values&&i.values.length||1,e=a.length;e<n;e++)r.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=a.add(t(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(t){t.preventDefault()})).mouseenter((function(){i.disabled||t(this).addClass("ui-state-hover")})).mouseleave((function(){t(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))})).blur((function(){t(this).removeClass("ui-state-focus")})),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e)})),this._on(this.handles,{keydown:function(e){var n,i,a,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),!1===this._start(e,r)))return}switch(a=this.options.step,n=i=this.options.values&&this.options.values.length?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:i=this._valueMin();break;case t.ui.keyCode.END:i=this._valueMax();break;case t.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-a)}this._slide(e,r,i)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,a,r,o,s,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),a=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var n=Math.abs(i-c.values(e));a>n&&(a=n,r=t(this),o=e)})),!0===d.range&&this.values(1)===d.min&&(o+=1,r=t(this.handles[o])),!1!==this._start(e,o)&&(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),s=r.offset(),l=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-s.left-r.width()/2,top:e.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,a,r;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/e)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),a=this._valueMax()-this._valueMin(),r=this._valueMin()+i*a,this._trimAlignValue(r)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,a,r;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&n>i||1===e&&n<i)&&(n=i),n!==this.values(e)&&((a=this.values())[e]=n,r=this._trigger("slide",t,{handle:this.handles[e],value:n,values:a}),i=this.values(e?0:1),!1!==r&&this.values(e,n,!0))):n!==this.value()&&(!1!==(r=this._trigger("slide",t,{handle:this.handles[e],value:n}))&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,a,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,a=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(a[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,n){var i,a=0;switch(t.isArray(this.options.values)&&(a=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<a;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,a,r,o=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,d={};this.options.values&&this.options.values.length?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[c?"animate":"css"](d,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[c?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n})):(i=this.value(),a=this._valueMin(),r=this._valueMax(),n=r!==a?(i-a)/(r-a)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](d,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))}})}(t)}).call(this,n(0))},function(t,e,n){(function(t){var e;void 0===(e=t).fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,a=this.length;++i<a&&(n.context=n[0]=this[i])&&!1!==t.call(n[0],i,n););return this}}),function(t,e){"use strict";if(window.Select2===e){var n,i,a,r,o,s,l,c,d={x:0,y:0},u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case u.SHIFT:case u.CTRL:case u.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return(t=t.which?t.which:t)>=112&&t<=123}},h="<div class='select2-measure-scrollbar'></div>",f={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};s=t(document),c=1,r=function(){return c++},n=A(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var i,a;this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+r()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=t("body"),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(L(n.containerCss,this.opts.element)),this.container.addClass(L(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",k),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(L(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",k),this.results=i=this.container.find(".select2-results"),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",k),this.results.on("mousemove",(function(n){var i=d;i!==e&&i.x===n.pageX&&i.y===n.pageY||t(n.target).trigger("mousemove-filtered",n)})),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind((function(t){this._touchEvent=!0,this.highlightUnderEvent(t)}))),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(t,e){var n=w(t,(function(t){e.trigger("scroll-debounced",t)}));e.on("scroll",(function(t){_(t.target,e.get())>=0&&n(t)}))}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",(function(t){t.stopPropagation()})),t(this.dropdown).on("change",".select2-input",(function(t){t.stopPropagation()})),t.fn.mousewheel&&i.mousewheel((function(t,e,n,a){var r=i.scrollTop();a>0&&r-a<=0?(i.scrollTop(0),k(t)):a<0&&i.get(0).scrollHeight-i.scrollTop()+a<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),k(t))})),b(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",(function(){a.addClass("select2-focused")})),a.on("blur",(function(){a.removeClass("select2-focused")})),this.dropdown.on("mouseup",".select2-results",this.bind((function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(t){t.stopPropagation()})),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var o=n.element.prop("disabled");o===e&&(o=!1),this.enable(!o);var s=n.element.prop("readonly");s===e&&(s=!1),this.readonly(s),l=l||function(){var e=t(h);e.appendTo("body");var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,n=t.data("select2"),i=this;this.close(),t.length&&t[0].detachEvent&&t.each((function(){this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==e&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),D.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:g(t.attr("locked"),"locked")||g(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var i,a,o,s,l=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=a=n.element),a&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(n=t.extend({},{populateResults:function(i,a,o){var s,c=this.opts.id,d=this.liveRegion;(s=function(i,a,u){var h,f,p,m,_,g,v,y,b,w,k=[];for(h=0,f=(i=n.sortResults(i,a,o)).length;h<f;h+=1)m=!(_=!0===(p=i[h]).disabled)&&c(p)!==e,g=p.children&&p.children.length>0,(v=t("<li></li>")).addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(m?"select2-result-selectable":"select2-result-unselectable"),_&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(p)),v.attr("role","presentation"),(y=t(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+r()),y.attr("role","option"),(w=n.formatResult(p,y,o,l.opts.escapeMarkup))!==e&&(y.html(w),v.append(y)),g&&((b=t("<ul></ul>")).addClass("select2-result-sub"),s(p.children,b,u+1),v.append(b)),v.data("select2-data",p),k.push(v[0]);a.append(k),d.text(n.formatMatches(i.length))})(a,i,0)}},t.fn.select2.defaults,n)).id&&(o=n.id,n.id=function(t){return t[o]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(a?(n.query=this.bind((function(t){var n,a,r,o={results:[],more:!1},s=t.term;r=function(e,n){var i;e.is("option")?t.matcher(s,e.text(),e)&&n.push(l.optionToData(e)):e.is("optgroup")&&(i=l.optionToData(e),e.children().each2((function(t,e){r(e,i.children)})),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==e&&n.length>0&&(a=this.getPlaceholderOption())&&(n=n.not(a)),n.each2((function(t,e){r(e,o.results)})),t.callback(o)})),n.id=function(t){return t.id}):"query"in n||("ajax"in n?((s=n.element.data("ajax-url"))&&s.length>0&&(n.ajax.url=s),n.query=C.call(n.element,n.ajax)):"data"in n?n.query=T(n.data):"tags"in n&&(n.query=j(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),n.initSelection===e&&(n.initSelection=function(e,i){var a=[];t(v(e.val(),n.separator)).each((function(){var e={id:this,text:this},i=n.tags;t.isFunction(i)&&(i=i()),t(i).each((function(){if(g(this.id,e.id))return e=this,!1})),a.push(e)})),i(a)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,a=this;i.on("change.select2",this.bind((function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var t=i.prop("disabled");t===e&&(t=!1),this.enable(!t);var n=i.prop("readonly");n===e&&(n=!1),this.readonly(n),x(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(L(this.opts.containerCssClass,this.opts.element)),x(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(L(this.opts.dropdownCssClass,this.opts.element))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",a._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(e){t.each(e,a._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,n,i,a,r,o=this.dropdown,s=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),h=t(window),f=h.width(),p=h.height(),m=h.scrollLeft()+f,_=h.scrollTop()+p,g=s.top+c,v=s.left,y=g+u<=_,b=s.top-u>=h.scrollTop(),w=o.outerWidth(!1),k=v+w<=m;o.hasClass("select2-drop-above")?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(o.hide(),s=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=o.outerHeight(!1),m=h.scrollLeft()+f,_=h.scrollTop()+p,g=s.top+c,k=(v=s.left)+(w=o.outerWidth(!1))<=m,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=t(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),(w=o.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:l.width))>d?d=w:w=d,u=o.outerHeight(!1),k=v+w<=m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(g-=(e=this.body.offset()).top,v-=e.left),k||(v=s.left+this.container.outerWidth(!1)-w),a={left:v,width:d},n?(a.top=s.top-u,a.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(a.top=g,a.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),a=t.extend(a,L(this.opts.dropdownCss,this.opts.element)),o.css(a)},shouldOpen:function(){var e;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),s.on("mousemove.select2Event",(function(t){d.x=t.pageX,d.y=t.pageY})),!0)},opening:function(){var e,n=this.containerEventName,i="scroll."+n,a="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(e=t("#select2-drop-mask")).length&&((e=t(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",(function(n){p(e);var i,a=t("#select2-drop");a.length>0&&((i=a.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),n.preventDefault(),n.stopPropagation())}))),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each((function(){t(this).on(a+" "+i+" "+r,(function(t){o.opened()&&o.positionDropdown()}))}))},close:function(){if(this.opened()){var e=this.containerEventName,n="scroll."+e,i="resize."+e,a="orientationchange."+e;this.container.parents().add(window).each((function(){t(this).off(n).off(i).off(a)})),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),s.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return L(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,n,i,a,r,o,s,l,c=this.results;(n=this.highlight())<0||(0!=n?(e=this.findHighlightableChoices().find(".select2-result-label"),a=(l=((i=t(e[n])).offset()||{}).top||0)+i.outerHeight(!0),n===e.length-1&&(s=c.find("li.select2-more-results")).length>0&&(a=s.offset().top+s.outerHeight(!0)),a>(r=c.offset().top+c.outerHeight(!0))&&c.scrollTop(c.scrollTop()+(a-r)),(o=l-c.offset().top)<0&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+o)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var a=t(n[i+=e]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var n,i,a=this.findHighlightableChoices();if(0===arguments.length)return _(a.filter(".select2-highlighted")[0],a.get());e>=a.length&&(e=a.length-1),e<0&&(e=0),this.removeHighlight(),(n=t(a[e])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,e=t.find("li.select2-more-results"),n=this.resultsPage+1,i=this,a=this.search.val(),r=this.context;0!==e.length&&e.offset().top-t.offset().top-t.height()<=this.opts.loadMorePadding&&(e.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:n,context:r,matcher:this.opts.matcher,callback:this.bind((function(o){i.opened()&&(i.opts.populateResults.call(this,t,o.results,{term:a,page:n,context:r}),i.postprocessResults(o,!1,!1),!0===o.more?(e.detach().appendTo(t).text(L(i.opts.formatLoadMore,i.opts.element,n+1)),window.setTimeout((function(){i.loadMoreIfNeeded()}),10)):e.remove(),i.positionDropdown(),i.resultsPage=n,i.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))}))}))},tokenize:function(){},updateResults:function(n){var i,a,r,o=this.search,s=this.results,l=this.opts,c=this,d=o.val(),u=t.data(this.container,"select2-last-term");if((!0===n||!u||!g(d,u))&&(t.data(this.container,"select2-last-term",d),!0===n||!1!==this.showSearchInput&&this.opened())){r=++this.queryCount;var h=this.getMaximumSelectionSize();if(!(h>=1&&(i=this.data(),t.isArray(i)&&i.length>=h&&O(l.formatSelectionTooBig,"formatSelectionTooBig"))))return o.val().length<l.minimumInputLength?(O(l.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+L(l.formatInputTooShort,l.element,o.val(),l.minimumInputLength)+"</li>"):p(""),void(n&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&o.val().length>l.maximumInputLength?O(l.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+L(l.formatInputTooLong,l.element,o.val(),l.maximumInputLength)+"</li>"):p(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&p("<li class='select2-searching'>"+L(l.formatSearching,l.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),(a=this.tokenize())!=e&&null!=a&&o.val(a),this.resultsPage=1,l.query({element:l.element,term:o.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(i){var a;r==this.queryCount&&(this.opened()?i.hasError!==e&&O(l.formatAjaxError,"formatAjaxError")?p("<li class='select2-ajax-error'>"+L(l.formatAjaxError,l.element,i.jqXHR,i.textStatus,i.errorThrown)+"</li>"):(this.context=i.context===e?null:i.context,this.opts.createSearchChoice&&""!==o.val()&&(a=this.opts.createSearchChoice.call(c,o.val(),i.results))!==e&&null!==a&&c.id(a)!==e&&null!==c.id(a)&&0===t(i.results).filter((function(){return g(c.id(this),c.id(a))})).length&&this.opts.createSearchChoicePosition(i.results,a),0===i.results.length&&O(l.formatNoMatches,"formatNoMatches")?p("<li class='select2-no-results'>"+L(l.formatNoMatches,l.element,o.val())+"</li>"):(s.empty(),c.opts.populateResults.call(this,s,i.results,{term:o.val(),page:this.resultsPage,context:null}),!0===i.more&&O(l.formatLoadMore,"formatLoadMore")&&(s.append("<li class='select2-more-results'>"+l.escapeMarkup(L(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){c.loadMoreIfNeeded()}),10)),this.postprocessResults(i,n),f(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))}))})));p("<li class='select2-selection-limit'>"+L(l.formatSelectionTooBig,l.element,h)+"</li>")}function f(){o.removeClass("select2-active"),c.positionDropdown(),s.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(s.text()):c.liveRegion.text(c.opts.formatMatches(s.find(".select2-result-selectable").length))}function p(t){s.html(t),f()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var t;(t=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var e,n=t[0],i=t.val().length;t.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((e=n.createTextRange()).collapse(!1),e.select()))}),0)},selectHighlighted:function(t){if(this._touchMoved)this.clearTouchMoved();else{var e=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(e),this.onSelect(n,t)):t&&t.noFocus&&this.close()}},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,i,a,r,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==e)for(r=0,o=(i=n.split(";")).length;r<o;r+=1)if(null!==(a=i[r].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&a.length>=1)return a[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),i=A(n,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,a;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((i=n.createTextRange()).collapse(!1),i.select()):n.setSelectionRange&&(a=this.search.val().length,n.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),D.call(this,"selection","focusser")},initContainer:function(){var e,n,i=this.container,a=this.dropdown,o=r();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),n=t("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode)if(t.which!==u.PAGE_UP&&t.which!==u.PAGE_DOWN)switch(t.which){case u.UP:case u.DOWN:return this.moveHighlight(t.which===u.UP?-1:1),void k(t);case u.ENTER:return this.selectHighlighted(),void k(t);case u.TAB:return void this.selectHighlighted({noFocus:!0});case u.ESC:return this.cancel(t),void k(t)}else k(t)}))),this.search.on("blur",this.bind((function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(t){if(this.isInterfaceEnabled()&&t.which!==u.TAB&&!u.isControl(t)&&!u.isFunctionKey(t)&&t.which!==u.ESC){if(!1!==this.opts.openOnEnter||t.which!==u.ENTER){if(t.which==u.DOWN||t.which==u.UP||t.which==u.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void k(t)}return t.which==u.DELETE||t.which==u.BACKSPACE?(this.opts.allowClear&&this.clear(),void k(t)):void 0}k(t)}}))),b(this.focusser),this.focusser.on("keyup-change input",this.bind((function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}}))),e.on("mousedown touchstart","abbr",this.bind((function(t){var e;this.isInterfaceEnabled()&&(this.clear(),(e=t).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection.focus())}))),e.on("mousedown touchstart",this.bind((function(n){p(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),k(n)}))),a.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),e.on("focus",this.bind((function(t){k(t)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var n=this.selection.data("select2-data");if(n){var i=t.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var a=this.getPlaceholderOption();this.opts.element.val(a?a.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==e&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(n,t.search.val()))}))}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==e&&((t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val())},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find("option").filter((function(){return this.selected&&!this.disabled}));e(n.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var a=n.val(),r=null;e.query({matcher:function(t,n,i){var o=g(a,e.id(i));return o&&(r=i),o},callback:t.isFunction(i)?function(){i(r)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,n,i){var a=0,r=this;if(this.findHighlightableChoices().each2((function(t,e){if(g(r.id(e.data("select2-data")),r.opts.element.val()))return a=t,!1})),!1!==i&&(!0===n&&a>=0?this.highlight(a):this.highlight(0)),!0===n){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(function e(n){var i=0;return t.each(n,(function(t,n){n.children?i+=e(n.children):i++})),i}(e.results)>=o)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var n,i,a=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),a.empty(),null!==t&&(n=this.opts.formatSelection(t,a,this.opts.escapeMarkup)),n!==e&&a.append(n),(i=this.opts.formatSelectionCssClass(t,a))!==e&&a.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,n=!1,i=null,a=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(t).find("option").filter((function(){return this.selected})).each2((function(t,e){return i=a.optionToData(e),!1})),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:r});else{if(!t&&0!==t)return void this.clear(n);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,(function(t){a.opts.element.val(t?a.id(t):""),a.updateSelection(t),a.setPlaceholder(),n&&a.triggerChange({added:t,removed:r})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var n,i=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==e&&(n=null),n;arguments.length>1&&(i=arguments[1]),t?(n=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:n})):this.clear(i)}}),a=A(n,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(t,e){i.push(n.optionToData(e))})),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var a=v(n.val(),e.separator),r=[];e.query({matcher:function(n,i,o){var s=t.grep(a,(function(t){return g(t,e.id(o))})).length;return s&&r.push(o),s},callback:t.isFunction(i)?function(){for(var t=[],n=0;n<a.length;n++)for(var o=a[n],s=0;s<r.length;s++){var l=r[s];if(g(o,e.id(l))){t.push(l),r.splice(s,1);break}}i(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),D.call(this,"searchContainer","selection")},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(e){i.search[0].focus(),i.selectChoice(t(this))})),this.search.attr("id","s2id_autogen"+r()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(n){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),a=i.prev(".select2-search-choice:not(.select2-locked)"),r=i.next(".select2-search-choice:not(.select2-locked)"),o=function(e){var n=0,i=0;if("selectionStart"in(e=t(e)[0]))n=e.selectionStart,i=e.selectionEnd-n;else if("selection"in document){e.focus();var a=document.selection.createRange();i=document.selection.createRange().text.length,a.moveStart("character",-e.value.length),n=a.text.length-i}return{offset:n,length:i}}(this.search);if(i.length&&(n.which==u.LEFT||n.which==u.RIGHT||n.which==u.BACKSPACE||n.which==u.DELETE||n.which==u.ENTER)){var s=i;return n.which==u.LEFT&&a.length?s=a:n.which==u.RIGHT?s=r.length?r:null:n.which===u.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),s=a.length?a:r):n.which==u.DELETE?this.unselect(i.first())&&(this.search.width(10),s=r.length?r:null):n.which==u.ENTER&&(s=null),this.selectChoice(s),k(n),void(s&&s.length||this.open())}if((n.which===u.BACKSPACE&&1==this.keydowns||n.which==u.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void k(n);if(this.selectChoice(null),this.opened())switch(n.which){case u.UP:case u.DOWN:return this.moveHighlight(n.which===u.UP?-1:1),void k(n);case u.ENTER:return this.selectHighlighted(),void k(n);case u.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case u.ESC:return this.cancel(n),void k(n)}if(n.which!==u.TAB&&!u.isControl(n)&&!u.isFunctionKey(n)&&n.which!==u.BACKSPACE&&n.which!==u.ESC){if(n.which===u.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==u.PAGE_UP&&n.which!==u.PAGE_DOWN||k(n),n.which===u.ENTER&&k(n)}}}))),this.search.on("keyup",this.bind((function(t){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())}))}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var n=[],i=[],a=this;t(e).each((function(){_(a.id(this),n)<0&&(n.push(a.id(this)),i.push(this))})),e=i,this.selection.find(".select2-search-choice").remove(),t(e).each((function(){a.addSelectedChoice(this)})),a.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,n){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.moveHighlight(1),!this.select&&this.opts.closeOnSelect||this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.clearSearch(),this.updateResults(),this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,a,r=!n.locked,o=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?o:s,c=this.id(n),d=this.getVal();(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=e&&l.find("div").replaceWith("<div>"+i+"</div>"),(a=this.opts.formatSelectionCssClass(n,l.find("div")))!=e&&l.addClass(a),r&&l.find(".select2-search-choice-close").on("mousedown",k).on("click dblclick",this.bind((function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),k(e),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(e){var n,i,a=this.getVal();if(0===(e=e.closest(".select2-search-choice")).length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(n=e.data("select2-data")){var r=t.Event("select2-removing");if(r.val=this.id(n),r.choice=n,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(i=_(this.id(n),a))>=0;)a.splice(i,1),this.setVal(a),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(t,e,n){var i=this.getVal(),a=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),o=this;a.each2((function(t,e){_(o.id(e.data("select2-data")),i)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))})),r.each2((function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&o.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&O(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+L(o.opts.formatNoMatches,o.opts.element,o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-y(this.search)},resizeSearch:function(){var e,n,i,a,r=y(this.search);e=function(e){if(!o){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);(o=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),t("body").append(o)}return o.text(e.val()),o.width()}(this.search)+10,n=this.search.offset().left,(a=(i=this.selection.width())-(n-this.selection.offset().left)-r)<e&&(a=i-r),a<40&&(a=i-r),a<=0&&(a=e),this.search.width(Math.floor(a))},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:v(t=this.opts.element.val(),this.opts.separator)},setVal:function(e){var n;this.select?this.select.val(e):(n=[],t(e).each((function(){_(this,n)<0&&n.push(this)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(t,e){e=e.slice(0),t=t.slice(0);for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)g(this.opts.id(e[n]),this.opts.id(t[i]))&&(e.splice(n,1),n>0&&n--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(n,i){var a,r=this;if(0===arguments.length)return this.getVal();if((a=this.data()).length||(a=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:a}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(a,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(e){var n=t.map(e,r.id);r.setVal(n),r.updateSelection(e),r.clearSearch(),i&&r.triggerChange(r.buildChangeDetails(a,r.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){e.push(n.opts.id(t(this).data("select2-data")))})),this.setVal(e),this.triggerChange()},data:function(e,n){var i,a,r=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return t(this).data("select2-data")})).get();a=this.data(),e||(e=[]),i=t.map(e,(function(t){return r.opts.id(t)})),this.setVal(i),this.updateSelection(e),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(a,this.data()))}}),t.fn.select2=function(){var n,i,a,r,o,s=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],d=["val","data"],u={search:"externalSearch"};return this.each((function(){if(0===s.length||"object"==typeof s[0])(n=0===s.length?{}:t.extend({},s[0])).element=t(this),"select"===n.element.get(0).tagName.toLowerCase()?o=n.element.prop("multiple"):(o=n.multiple||!1,"tags"in n&&(n.multiple=o=!0)),(i=o?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof s[0])throw"Invalid arguments to select2 plugin: "+s;if(_(s[0],l)<0)throw"Unknown method: "+s[0];if(r=e,(i=t(this).data("select2"))===e)return;if("container"===(a=s[0])?r=i.container:"dropdown"===a?r=i.dropdown:(u[a]&&(a=u[a]),r=i[a].apply(i,s.slice(1))),_(s[0],c)>=0||_(s[0],d)>=0&&1==s.length)return!1}})),r===e?this:r},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var a=[];return S(t.text,n.term,a,i),a.join("")},formatSelection:function(t,n,i){return t?i(t.text):e},sortResults:function(t,e,n){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,n){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},matcher:function(t,e){return m(""+e).toUpperCase().indexOf(m(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(t,n,i,a){var r,o,s,l,c,d=t,u=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return e;for(;;){for(o=-1,s=0,l=a.tokenSeparators.length;s<l&&(c=a.tokenSeparators[s],!((o=t.indexOf(c))>=0));s++);if(o<0)break;if(r=t.substring(0,o),t=t.substring(o+c.length),r.length>0&&(r=a.createSearchChoice.call(this,r,n))!==e&&null!==r&&a.id(r)!==e&&null!==a.id(r)){for(u=!1,s=0,l=n.length;s<l;s++)if(g(a.id(r),a.id(n[s]))){u=!0;break}u||i(r)}}return d!==t?t:void 0},escapeMarkup:M,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,n){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(t.opts.minimumResultsForSearch<0)}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,n){return"Loading failed"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results…"},formatSearching:function(){return"Searching…"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:C,local:T,tags:j},util:{debounce:w,markMatch:S,escapeMarkup:M,stripDiacritics:m},class:{abstract:n,single:i,multi:a}}}function p(e){var n=t(document.createTextNode(""));e.before(n),n.before(e),n.remove()}function m(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return f[t]||t}))}function _(t,e){for(var n=0,i=e.length;n<i;n+=1)if(g(t,e[n]))return n;return-1}function g(t,n){return t===n||t!==e&&n!==e&&(null!==t&&null!==n&&(t.constructor===String?t+""==n+"":n.constructor===String&&n+""==t+""))}function v(e,n){var i,a,r;if(null===e||e.length<1)return[];for(a=0,r=(i=e.split(n)).length;a<r;a+=1)i[a]=t.trim(i[a]);return i}function y(t){return t.outerWidth(!1)-t.width()}function b(n){var i="keyup-change-value";n.on("keydown",(function(){t.data(n,i)===e&&t.data(n,i,n.val())})),n.on("keyup",(function(){var a=t.data(n,i);a!==e&&n.val()!==a&&(t.removeData(n,i),n.trigger("keyup-change"))}))}function w(t,n,i){var a;return i=i||e,function(){var e=arguments;window.clearTimeout(a),a=window.setTimeout((function(){n.apply(i,e)}),t)}}function k(t){t.preventDefault(),t.stopPropagation()}function x(e,n,i){var a,r,o=[];(a=t.trim(e.attr("class")))&&t((a=""+a).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&o.push(this)})),(a=t.trim(n.attr("class")))&&t((a=""+a).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(r=i(this))&&o.push(r)})),e.attr("class",o.join(" "))}function S(t,e,n,i){var a=m(t.toUpperCase()).indexOf(m(e.toUpperCase())),r=e.length;a<0?n.push(i(t)):(n.push(i(t.substring(0,a))),n.push("<span class='select2-match'>"),n.push(i(t.substring(a,a+r))),n.push("</span>"),n.push(i(t.substring(a+r,t.length))))}function M(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))}function C(n){var i,a=null,r=n.quietMillis||100,o=n.url,s=this;return function(l){window.clearTimeout(i),i=window.setTimeout((function(){var i=n.data,r=o,c=n.transport||t.fn.select2.ajaxDefaults.transport,d={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||e,dataType:n.dataType||"json"},u=t.extend({},t.fn.select2.ajaxDefaults.params,d);i=i?i.call(s,l.term,l.page,l.context):null,r="function"==typeof r?r.call(s,l.term,l.page,l.context):r,a&&"function"==typeof a.abort&&a.abort(),n.params&&(t.isFunction(n.params)?t.extend(u,n.params.call(s)):t.extend(u,n.params)),t.extend(u,{url:r,dataType:n.dataType,data:i,success:function(t){var e=n.results(t,l.page,l);l.callback(e)},error:function(t,e,n){var i={hasError:!0,jqXHR:t,textStatus:e,errorThrown:n};l.callback(i)}}),a=c.call(s,u)}),r)}}function T(e){var n,i,a=e,r=function(t){return""+t.text};t.isArray(a)&&(a={results:i=a}),!1===t.isFunction(a)&&(i=a,a=function(){return i});var o=a();return o.text&&(r=o.text,t.isFunction(r)||(n=o.text,r=function(t){return t[n]})),function(e){var n,i=e.term,o={results:[]};""!==i?(n=function(a,o){var s,l;if((a=a[0]).children){for(l in s={},a)a.hasOwnProperty(l)&&(s[l]=a[l]);s.children=[],t(a.children).each2((function(t,e){n(e,s.children)})),(s.children.length||e.matcher(i,r(s),a))&&o.push(s)}else e.matcher(i,r(a),a)&&o.push(a)},t(a().results).each2((function(t,e){n(e,o.results)})),e.callback(o)):e.callback(a())}}function j(n){var i=t.isFunction(n);return function(a){var r=a.term,o={results:[]},s=i?n(a):n;t.isArray(s)&&(t(s).each((function(){var t=this.text!==e,n=t?this.text:this;(""===r||a.matcher(r,n))&&o.results.push(t?this:{id:this,text:this})})),a.callback(o))}}function O(e,n){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(n+" must be a string, function, or falsy value")}function L(e,n){if(t.isFunction(e)){var i=Array.prototype.slice.call(arguments,2);return e.apply(n,i)}return e}function D(){var e=this;t.each(arguments,(function(t,n){e[n].remove(),e[n]=null}))}function A(e,n){var i=function(){};return(i.prototype=new e).constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}}(t)}).call(this,n(0))},function(t,e,n){(function(t){!function(t){"use strict";var e={};e.fileapi=void 0!==t("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var n=!!t.fn.prop;function i(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(n))}function a(e){var n=e.target,i=t(n);if(!i.is("[type=submit],[type=image]")){var a=i.closest("[type=submit]");if(0===a.length)return;n=a[0]}var r=this;if(r.clk=n,"image"==n.type)if(void 0!==e.offsetX)r.clk_x=e.offsetX,r.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=i.offset();r.clk_x=e.pageX-o.left,r.clk_y=e.pageY-o.top}else r.clk_x=e.pageX-n.offsetLeft,r.clk_y=e.pageY-n.offsetTop;setTimeout((function(){r.clk=r.clk_x=r.clk_y=null}),100)}function r(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}t.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(i){if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var a,o,s,l=this;"function"==typeof i?i={success:i}:void 0===i&&(i={}),a=i.type||this.attr2("method"),(s=(s="string"==typeof(o=i.url||this.attr2("action"))?t.trim(o):"")||window.location.href||"")&&(s=(s.match(/^([^#]+)/)||[])[1]),i=t.extend(!0,{url:s,success:t.ajaxSettings.success,type:a||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var c={};if(this.trigger("form-pre-serialize",[this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&!1===i.beforeSerialize(this,i))return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=i.traditional;void 0===d&&(d=t.ajaxSettings.traditional);var u,h=[],f=this.formToArray(i.semantic,h);if(i.data&&(i.extraData=i.data,u=t.param(i.data,d)),i.beforeSubmit&&!1===i.beforeSubmit(f,this,i))return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,i,c]),c.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=t.param(f,d);u&&(p=p?p+"&"+u:u),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+p,i.data=null):i.data=p;var m=[];if(i.resetForm&&m.push((function(){l.resetForm()})),i.clearForm&&m.push((function(){l.clearForm(i.includeHidden)})),!i.dataType&&i.target){var _=i.success||function(){};m.push((function(e){var n=i.replaceTarget?"replaceWith":"html";t(i.target)[n](e).each(_,arguments)}))}else i.success&&m.push(i.success);if(i.success=function(t,e,n){for(var a=i.context||this,r=0,o=m.length;r<o;r++)m[r].apply(a,[t,e,n||l,l])},i.error){var g=i.error;i.error=function(t,e,n){var a=i.context||this;g.apply(a,[t,e,n,l])}}if(i.complete){var v=i.complete;i.complete=function(t,e){var n=i.context||this;v.apply(n,[t,e,l])}}var y=t("input[type=file]:enabled",this).filter((function(){return""!==t(this).val()})).length>0,b="multipart/form-data",w=l.attr("enctype")==b||l.attr("encoding")==b,k=e.fileapi&&e.formdata;r("fileAPI :"+k);var x,S=(y||w)&&!k;!1!==i.iframe&&(i.iframe||S)?i.closeKeepAlive?t.get(i.closeKeepAlive,(function(){x=C(f)})):x=C(f):x=(y||w)&&k?function(e){for(var n=new FormData,r=0;r<e.length;r++)n.append(e[r].name,e[r].value);if(i.extraData){var o=function(e){var n,a,r=t.param(e,i.traditional).split("&"),o=r.length,s=[];for(n=0;n<o;n++)r[n]=r[n].replace(/\+/g," "),a=r[n].split("="),s.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return s}(i.extraData);for(r=0;r<o.length;r++)o[r]&&n.append(o[r][0],o[r][1])}i.data=null;var s=t.extend(!0,{},t.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:a||"POST"});i.uploadProgress&&(s.xhr=function(){var e=t.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",(function(t){var e=0,n=t.loaded||t.position,a=t.total;t.lengthComputable&&(e=Math.ceil(n/a*100)),i.uploadProgress(t,n,a,e)}),!1),e});s.data=null;var l=s.beforeSend;return s.beforeSend=function(t,e){i.formData?e.data=i.formData:e.data=n,l&&l.call(this,t,e)},t.ajax(s)}(f):t.ajax(i),l.removeData("jqxhr").data("jqxhr",x);for(var M=0;M<h.length;M++)h[M]=null;return this.trigger("form-submit-notify",[this,i]),this;function C(e){var o,s,c,d,u,f,p,m,_,g,v,y,b=l[0],w=t.Deferred();if(w.abort=function(t){m.abort(t)},e)for(s=0;s<h.length;s++)o=t(h[s]),n?o.prop("disabled",!1):o.removeAttr("disabled");if((c=t.extend(!0,{},t.ajaxSettings,i)).context=c.context||c,u="jqFormIO"+(new Date).getTime(),c.iframeTarget?(g=(f=t(c.iframeTarget)).attr2("name"))?u=g:f.attr2("name",u):(f=t('<iframe name="'+u+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";r("aborting upload... "+n),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(t){}f.attr("src",c.iframeSrc),m.error=n,c.error&&c.error.call(c.context,m,n,e),d&&t.event.trigger("ajaxError",[m,c,n]),c.complete&&c.complete.call(c.context,m,n)}},(d=c.global)&&0==t.active++&&t.event.trigger("ajaxStart"),d&&t.event.trigger("ajaxSend",[m,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,m,c))return c.global&&t.active--,w.reject(),w;if(m.aborted)return w.reject(),w;(_=b.clk)&&(g=_.name)&&!_.disabled&&(c.extraData=c.extraData||{},c.extraData[g]=_.value,"image"==_.type&&(c.extraData[g+".x"]=b.clk_x,c.extraData[g+".y"]=b.clk_y));var k=1,x=2;function S(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){r("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(n){r("cannot get iframe.contentDocument: "+n),e=t.document}return e}var M=t("meta[name=csrf-token]").attr("content"),C=t("meta[name=csrf-param]").attr("content");function T(){var e=l.attr2("target"),n=l.attr2("action");b.setAttribute("target",u),a&&!/post/i.test(a)||b.setAttribute("method","POST"),n!=c.url&&b.setAttribute("action",c.url),c.skipEncodingOverride||a&&!/post/i.test(a)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(y=setTimeout((function(){v=!0,A(k)}),c.timeout));var i=[];try{if(c.extraData)for(var o in c.extraData)c.extraData.hasOwnProperty(o)&&(t.isPlainObject(c.extraData[o])&&c.extraData[o].hasOwnProperty("name")&&c.extraData[o].hasOwnProperty("value")?i.push(t('<input type="hidden" name="'+c.extraData[o].name+'">').val(c.extraData[o].value).appendTo(b)[0]):i.push(t('<input type="hidden" name="'+o+'">').val(c.extraData[o]).appendTo(b)[0]));c.iframeTarget||f.appendTo("body"),p.attachEvent?p.attachEvent("onload",A):p.addEventListener("load",A,!1),setTimeout((function t(){try{var e=S(p).readyState;r("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(t){r("Server abort: ",t," (",t.name,")"),A(x),y&&clearTimeout(y),y=void 0}}),15);try{b.submit()}catch(t){document.createElement("form").submit.apply(b)}}finally{b.setAttribute("action",n),e?b.setAttribute("target",e):l.removeAttr("target"),t(i).remove()}}C&&M&&(c.extraData=c.extraData||{},c.extraData[C]=M),c.forceSync?T():setTimeout(T,10);var j,O,L,D=50;function A(e){if(!m.aborted&&!L){if((O=S(p))||(r("cannot access response document"),e=x),e===k&&m)return m.abort("timeout"),void w.reject(m,"timeout");if(e==x&&m)return m.abort("server abort"),void w.reject(m,"error","server abort");if(O&&O.location.href!=c.iframeSrc||v){p.detachEvent?p.detachEvent("onload",A):p.removeEventListener("load",A,!1);var n,i="success";try{if(v)throw"timeout";var a="xml"==c.dataType||O.XMLDocument||t.isXMLDoc(O);if(r("isXml="+a),!a&&window.opera&&(null===O.body||!O.body.innerHTML)&&--D)return r("requeing onLoad callback, DOM not available"),void setTimeout(A,250);var o=O.body?O.body:O.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=O.XMLDocument?O.XMLDocument:O,a&&(c.dataType="xml"),m.getResponseHeader=function(t){return{"content-type":c.dataType}[t.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var s=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(s);if(l||c.textarea){var u=O.getElementsByTagName("textarea")[0];if(u)m.responseText=u.value,m.status=Number(u.getAttribute("status"))||m.status,m.statusText=u.getAttribute("statusText")||m.statusText;else if(l){var h=O.getElementsByTagName("pre")[0],_=O.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:_&&(m.responseText=_.textContent?_.textContent:_.innerText)}}else"xml"==s&&!m.responseXML&&m.responseText&&(m.responseXML=E(m.responseText));try{j=P(m,s,c)}catch(t){i="parsererror",m.error=n=t||i}}catch(t){r("error caught: ",t),i="error",m.error=n=t||i}m.aborted&&(r("upload aborted"),i=null),m.status&&(i=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===i?(c.success&&c.success.call(c.context,j,"success",m),w.resolve(m.responseText,"success",m),d&&t.event.trigger("ajaxSuccess",[m,c])):i&&(void 0===n&&(n=m.statusText),c.error&&c.error.call(c.context,m,i,n),w.reject(m,"error",n),d&&t.event.trigger("ajaxError",[m,c,n])),d&&t.event.trigger("ajaxComplete",[m,c]),d&&!--t.active&&t.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,m,i),L=!0,c.timeout&&clearTimeout(y),setTimeout((function(){c.iframeTarget?f.attr("src",c.iframeSrc):f.remove(),m.responseXML=null}),100)}}}var E=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},I=t.parseJSON||function(t){return window.eval("("+t+")")},P=function(e,n,i){var a=e.getResponseHeader("content-type")||"",r="xml"===n||!n&&a.indexOf("xml")>=0,o=r?e.responseXML:e.responseText;return r&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(o=i.dataFilter(o,n)),"string"==typeof o&&("json"===n||!n&&a.indexOf("json")>=0?o=I(o):("script"===n||!n&&a.indexOf("javascript")>=0)&&t.globalEval(o)),o};return w}},t.fn.ajaxForm=function(e){if((e=e||{}).delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!t.isReady&&n.s?(r("DOM not ready, queuing ajaxForm"),t((function(){t(n.s,n.c).ajaxForm(e)})),this):(r("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,e,i).on("click.form-plugin",this.selector,e,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,i).bind("click.form-plugin",e,a)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(n,i){var a=[];if(0===this.length)return a;var r,o,s,l,c,d,u,h=this[0],f=n?h.getElementsByTagName("*"):h.elements;if(!f)return a;for(r=0,d=f.length;r<d;r++)if((s=(c=f[r]).name)&&!c.disabled)if(n&&h.clk&&"image"==c.type)h.clk==c&&(a.push({name:s,value:t(c).val(),type:c.type}),a.push({name:s+".x",value:h.clk_x},{name:s+".y",value:h.clk_y}));else if((l=t.fieldValue(c,!0))&&l.constructor==Array)for(i&&i.push(c),o=0,u=l.length;o<u;o++)a.push({name:s,value:l[o]});else if(e.fileapi&&"file"==c.type){i&&i.push(c);var p=c.files;if(p.length)for(o=0;o<p.length;o++)a.push({name:s,value:p[o],type:c.type});else a.push({name:s,value:"",type:c.type})}else null!=l&&(i&&i.push(c),a.push({name:s,value:l,type:c.type,required:c.required}));if(!n&&h.clk){var m=t(h.clk),_=m[0];(s=_.name)&&!_.disabled&&"image"==_.type&&(a.push({name:s,value:m.val()}),a.push({name:s+".x",value:h.clk_x},{name:s+".y",value:h.clk_y}))}return a},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each((function(){var i=this.name;if(i){var a=t.fieldValue(this,e);if(a&&a.constructor==Array)for(var r=0,o=a.length;r<o;r++)n.push({name:i,value:a[r]});else null!=a&&n.push({name:this.name,value:a})}})),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,a=this.length;i<a;i++){var r=this[i],o=t.fieldValue(r,e);null==o||o.constructor==Array&&!o.length||(o.constructor==Array?t.merge(n,o):n.push(o))}return n},t.fieldValue=function(e,n){var i=e.name,a=e.type,r=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==r&&-1==e.selectedIndex))return null;if("select"==r){var o=e.selectedIndex;if(o<0)return null;for(var s=[],l=e.options,c="select-one"==a,d=c?o+1:l.length,u=c?o:0;u<d;u++){var h=l[u];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return f;s.push(f)}}return s}return t(e).val()},t.fn.clearForm=function(e){return this.each((function(){t("input,select,textarea",this).clearFields(e)}))},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,a=this.tagName.toLowerCase();n.test(i)||"textarea"==a?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==a?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(i)||"string"==typeof e&&t(this).is(e))&&(this.value="")}))},t.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each((function(){this.disabled=!t}))},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}}))},t.fn.ajaxSubmit.debug=!1}(void 0!==t?t:window.Zepto)}).call(this,n(0))},function(t,e,n){(function(t){window.jQuery&&function(t){if(!t.support.opacity&&!t.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}t.fn.rating=function(e){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var n=arguments;return this.each((function(){t.fn.rating.apply(t(this),n)}))}return t.fn.rating[arguments[0]].apply(this,t.makeArray(arguments).slice(1)||[]),this}e=t.extend({},t.fn.rating.options,e||{});return t.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each((function(){var n,i=t(this),a=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),r=t(this.form||document.body),o=r.data("rating");o&&o.call==t.fn.rating.calls||(o={count:0,call:t.fn.rating.calls});var s=o[a]||r.data("rating"+a);s&&(n=s.data("rating")),s&&n?n.count++:((n=t.extend({},e||{},(t.metadata?i.metadata():t.meta?i.data():null)||{},{count:0,stars:[],inputs:[]})).serial=o.count++,s=t('<span class="star-rating-control"/>'),i.before(s),s.addClass("rating-to-be-drawn"),(i.attr("disabled")||i.hasClass("disabled"))&&(n.readOnly=!0),i.hasClass("required")&&(n.required=!0),s.append(n.cancel=t('<div class="rating-cancel"><a title="'+n.cancel+'">'+n.cancelValue+"</a></div>").on("mouseover",(function(){t(this).rating("drain"),t(this).addClass("star-rating-hover")})).on("mouseout",(function(){t(this).rating("draw"),t(this).removeClass("star-rating-hover")})).on("click",(function(){t(this).rating("select")})).data("rating",n)));var l=t('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+n.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(s.append(l),this.id&&l.attr("id",this.id),this.className&&l.addClass(this.className),n.half&&(n.split=2),"number"==typeof n.split&&n.split>0){var c=(t.fn.width?l.width():0)||n.starWidth,d=n.count%n.split,u=Math.floor(c/n.split);l.width(u).find("a").css({"margin-left":"-"+d*u+"px"})}n.readOnly?l.addClass("star-rating-readonly"):l.addClass("star-rating-live").on("mouseover",(function(){t(this).rating("fill"),t(this).rating("focus")})).on("mouseout",(function(){t(this).rating("draw"),t(this).rating("blur")})).on("click",(function(){t(this).rating("select")})),this.checked&&(n.current=l),"A"==this.nodeName&&t(this).hasClass("selected")&&(n.current=l),i.hide(),i.on("change.rating",(function(e){if(e.selfTriggered)return!1;t(this).rating("select")})),l.data("rating.input",i.data("rating.star",l)),n.stars[n.stars.length]=l[0],n.inputs[n.inputs.length]=i[0],n.rater=o[a]=s,n.context=r,i.data("rating",n),s.data("rating",n),l.data("rating",n),r.data("rating",o),r.data("rating"+a,s)})),t(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},t.extend(t.fn.rating,{calls:0,focus:function(){var e=this.data("rating");if(!e)return this;if(!e.focus)return this;var n=t(this).data("rating.input")||t("INPUT"==this.tagName?this:null);e.focus&&e.focus.apply(n[0],[n.val(),t("a",n.data("rating.star"))[0]])},blur:function(){var e=this.data("rating");if(!e)return this;if(!e.blur)return this;var n=t(this).data("rating.input")||t("INPUT"==this.tagName?this:null);e.blur&&e.blur.apply(n[0],[n.val(),t("a",n.data("rating.star"))[0]])},fill:function(){var t=this.data("rating");if(!t)return this;t.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+t.serial).addClass("star-rating-hover"))},drain:function(){var t=this.data("rating");if(!t)return this;t.readOnly||t.rater.children().filter(".rater-"+t.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var e=this.data("rating");if(!e)return this;this.rating("drain");var n=t(e.current),i=n.length?n.prevAll().addBack().filter(".rater-"+e.serial):null;i&&i.addClass("star-rating-on"),e.cancel[e.readOnly||e.required?"hide":"show"](),this.siblings()[e.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(e,n){var i=this.data("rating");if(!i)return this;if(!i.readOnly){if(i.current=null,void 0!==e||this.length>1){if("number"==typeof e)return t(i.stars[e]).rating("select",void 0,n);if("string"==typeof e)return t.each(i.stars,(function(){t(this).data("rating.input").val()==e&&t(this).rating("select",void 0,n)})),this}else i.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+i.serial)?this:null;this.data("rating",i),this.rating("draw");var a=t(i.current?i.current.data("rating.input"):null),r=t(i.inputs).filter(":checked");return t(i.inputs).not(a).prop("checked",!1),a.prop("checked",!0),t(a.length?a:r).trigger({type:"change",selfTriggered:!0}),(n||null==n)&&i.callback&&i.callback.apply(a[0],[a.val(),t("a",i.current)[0]]),this}},readOnly:function(e,n){var i=this.data("rating");if(!i)return this;i.readOnly=!(!e&&null!=e),n?t(i.inputs).attr("disabled","disabled"):t(i.inputs).removeAttr("disabled"),this.data("rating",i),this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),t.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},t((function(){t("input[type=radio].star").rating()}))}(t)}).call(this,n(0))},function(t,e,n){"use strict";var i=n(176);n.n(i).a},function(t,e,n){"use strict";var i=n(177);n.n(i).a},function(t,e,n){"use strict";var i=n(178);n.n(i).a},function(t,e,n){"use strict";var i=n(179);n.n(i).a},,function(t,e,n){"use strict";var i=n(180);n.n(i).a},function(t,e,n){"use strict";var i=n(181);n.n(i).a},function(t,e,n){"use strict";var i=n(182);n.n(i).a},function(t,e,n){"use strict";var i=n(183);n.n(i).a},function(t,e,n){"use strict";var i=n(184);n.n(i).a},function(t,e,n){"use strict";var i=n(185);n.n(i).a},function(t,e,n){"use strict";var i=n(186);n.n(i).a},function(t,e,n){"use strict";var i=n(187);n.n(i).a},function(t,e,n){"use strict";var i=n(188);n.n(i).a},function(t,e,n){"use strict";var i=n(189);n.n(i).a},function(t,e,n){"use strict";var i=n(190);n.n(i).a},function(t,e,n){"use strict";var i=n(191);n.n(i).a},function(t,e,n){"use strict";var i=n(192);n.n(i).a},function(t,e,n){"use strict";var i=n(193);n.n(i).a},,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"getGalaxyInstance",(function(){return r.a})),n.d(e,"setGalaxyInstance",(function(){return r.b})),n.d(e,"TracksterUI",(function(){return o.a})),n.d(e,"phyloviz",(function(){return I})),n.d(e,"SweepsterVisualization",(function(){return B})),n.d(e,"SweepsterVisualizationView",(function(){return X})),n.d(e,"createTabularDatasetChunkedView",(function(){return j.d})),n.d(e,"History",(function(){return ft.a})),n.d(e,"HistoryContents",(function(){return pt.a})),n.d(e,"history",(function(){return kt.b})),n.d(e,"HistoryViewAnnotated",(function(){return St})),n.d(e,"HistoryCopyDialog",(function(){return gt.a})),n.d(e,"HDAListItemEdit",(function(){return Mt.a})),n.d(e,"HDAModel",(function(){return Ct.a})),n.d(e,"LegacyGridView",(function(){return At})),n.d(e,"create_chart",(function(){return Pt})),n.d(e,"create_histogram",(function(){return Yt})),n.d(e,"ToolshedGroups",(function(){return zt})),n.d(e,"IES",(function(){return Xt})),n.d(e,"Toast",(function(){return Z.a})),n.d(e,"trackster",(function(){return wo})),n.d(e,"circster",(function(){return ko})),n.d(e,"library",(function(){return xo})),n.d(e,"multiHistory",(function(){return So})),n.d(e,"panels",(function(){return Qt.a})),n.d(e,"show_in_overlay",(function(){return O.c})),n.d(e,"hide_modal",(function(){return O.b})),n.d(e,"show_message",(function(){return O.d})),n.d(e,"show_modal",(function(){return O.e})),n.d(e,"Modal",(function(){return O.a})),n.d(e,"make_popupmenu",(function(){return F.b})),n.d(e,"make_popup_menus",(function(){return F.a})),n.d(e,"render_embedded_items",(function(){return Zt})),n.d(e,"async_save_text",(function(){return ee})),n.d(e,"chart",(function(){return Mo})),n.d(e,"chartUtilities",(function(){return Co})),n.d(e,"initMasthead",(function(){return $e})),n.d(e,"panelManagement",(function(){return Fe})),n.d(e,"mountMakoTags",(function(){return We.c})),n.d(e,"mountJobMetrics",(function(){return ze.b})),n.d(e,"mountJobParameters",(function(){return Ue.b})),n.d(e,"mountWorkflowEditor",(function(){return Mr})),n.d(e,"mountPageEditor",(function(){return Ur})),n.d(e,"mountPageDisplay",(function(){return Xr})),n.d(e,"mountDestinationParams",(function(){return ao})),n.d(e,"mountDatasetInformation",(function(){return uo})),n.d(e,"mountDatasetStorage",(function(){return _o})),n.d(e,"mountJobInformation",(function(){return vo})),n.d(e,"store",(function(){return bo.a}));var i=n(0),a=n.n(i),r=(n(677),n(6)),o=n(131),s=n(1),l=n(4),c=n.n(l),d=n(3),u=n(2),h=n.n(u),f=n(13),p=n(32),m=n(10),_=n(80),g=n(66),v=(n(416),c.a.Model.extend({is_visible:function(t,e){var n=t.getBoundingClientRect(),i=a()("svg")[0].getBoundingClientRect();return!(n.right<0||n.left>i.right||n.bottom<0||n.top>i.bottom)}})),y={drawTicks:function(t,e,n,i,a){var r=t.append("g").selectAll("g").data(e).enter().append("g").selectAll("g").data(n).enter().append("g").attr("class","tick").attr("transform",(function(t){return"rotate(".concat(180*t.angle/Math.PI-90,")translate(").concat(t.radius,",0)")})),o=[],s=[],l=function(t){return t.angle>Math.PI?"end":null};return a?(o=[0,0,0,-4],s=[4,0,"",".35em"],l=null):(o=[1,0,4,0],s=[0,4,".35em",""]),r.append("line").attr("x1",o[0]).attr("y1",o[1]).attr("x2",o[2]).attr("y1",o[3]).style("stroke","#000"),r.append("text").attr("x",s[0]).attr("y",s[1]).attr("dx",s[2]).attr("dy",s[3]).attr("text-anchor",l).attr("transform",i).text((function(t){return t.label}))},formatNum:function(t,e){if(void 0===e&&(e=2),null===t)return null;var n=null;if(Math.abs(t)<1)n=t.toPrecision(e);else{var i=Math.round(t.toPrecision(e));(t=Math.abs(t))<1e3?n=i:t<1e6?n="".concat(Math.round((i/1e3).toPrecision(3)).toFixed(0),"K"):t<1e9&&(n="".concat(Math.round((i/1e6).toPrecision(3)).toFixed(0),"M"))}return n}},b=c.a.Model.extend({}),w=c.a.View.extend({className:"circster",initialize:function(t){this.genome=t.genome,this.label_arc_height=50,this.scale=1,this.circular_views=null,this.chords_views=null,this.model.get("drawables").on("add",this.add_track,this),this.model.get("drawables").on("remove",this.remove_track,this);var e=this.model.get("config");e.get("arc_dataset_height").on("change:value",this.update_track_bounds,this),e.get("track_gap").on("change:value",this.update_track_bounds,this)},get_circular_tracks:function(){return this.model.get("drawables").filter((function(t){return"DiagonalHeatmapTrack"!==t.get("track_type")}))},get_chord_tracks:function(){return this.model.get("drawables").filter((function(t){return"DiagonalHeatmapTrack"===t.get("track_type")}))},get_tracks_bounds:function(){var t=this.get_circular_tracks(),e=this.model.get("config").get_value("arc_dataset_height"),n=this.model.get("config").get_value("track_gap"),i=Math.min(this.$el.width(),this.$el.height())-20,a=i/2-t.length*(e+n)+n-this.label_arc_height,r=f.range(a,i/2,e+n);return s.default.map(r,(function(t){return[t,t+e]}))},render:function(){var t=this,e=t.$el.width(),n=t.$el.height(),i=this.get_circular_tracks(),a=this.get_chord_tracks(),r=t.model.get("config").get_value("total_gap"),o=this.get_tracks_bounds(),s=f.select(t.$el[0]).append("svg").attr("width",e).attr("height",n).attr("pointer-events","all").append("svg:g").call(f.behavior.zoom().on("zoom",(function(){var e=f.event.scale;s.attr("transform","translate(".concat(f.event.translate,") scale(").concat(e,")")),t.scale!==e&&(t.zoom_drag_timeout&&clearTimeout(t.zoom_drag_timeout),t.zoom_drag_timeout=setTimeout((function(){}),400))}))).attr("transform","translate(".concat(e/2,",").concat(n/2,")")).append("svg:g").attr("class","tracks");this.circular_views=i.map((function(e,n){var i=new M({el:s.append("g")[0],track:e,radius_bounds:o[n],genome:t.genome,total_gap:r});return i.render(),i})),this.chords_views=a.map((function(e){var n=new C({el:s.append("g")[0],track:e,radius_bounds:o[0],genome:t.genome,total_gap:r});return n.render(),n}));var l=this.circular_views[this.circular_views.length-1].radius_bounds[1],c=[l,l+this.label_arc_height];this.label_track_view=new x({el:s.append("g")[0],track:new b,radius_bounds:c,genome:t.genome,total_gap:r}),this.label_track_view.render()},add_track:function(t){var e=this.model.get("config").get_value("total_gap");if("DiagonalHeatmapTrack"===t.get("track_type")){var n=this.circular_views[0].radius_bounds,i=new C({el:f.select("g.tracks").append("g")[0],track:t,radius_bounds:n,genome:this.genome,total_gap:e});i.render(),this.chords_views.push(i)}else{var a=this.get_tracks_bounds();s.default.each(this.circular_views,(function(t,e){t.update_radius_bounds(a[e])})),s.default.each(this.chords_views,(function(t){t.update_radius_bounds(a[0])}));var r=this.circular_views.length,o=new M({el:f.select("g.tracks").append("g")[0],track:t,radius_bounds:a[r],genome:this.genome,total_gap:e});o.render(),this.circular_views.push(o)}},remove_track:function(t,e,n){var i=this.circular_views[n.index];this.circular_views.splice(n.index,1),i.$el.remove();var a=this.get_tracks_bounds();s.default.each(this.circular_views,(function(t,e){t.update_radius_bounds(a[e])}))},update_track_bounds:function(){var t=this.get_tracks_bounds();s.default.each(this.circular_views,(function(e,n){e.update_radius_bounds(t[n])})),s.default.each(this.chords_views,(function(e){e.update_radius_bounds(t[0])}))}}),k=c.a.View.extend({tagName:"g",initialize:function(t){this.bg_stroke="#ddd",this.loading_bg_fill="#ffc",this.bg_fill="#ddd",this.total_gap=t.total_gap,this.track=t.track,this.radius_bounds=t.radius_bounds,this.genome=t.genome,this.chroms_layout=this._chroms_layout(),this.data_bounds=[],this.scale=1,this.parent_elt=f.select(this.$el[0])},get_fill_color:function(){var t=this.track.get("config").get_value("block_color");return t||(t=this.track.get("config").get_value("color")),t},render:function(){var t=this.parent_elt,e=this.chroms_layout,n=f.svg.arc().innerRadius(this.radius_bounds[0]).outerRadius(this.radius_bounds[1]),i=t.selectAll("g").data(e).enter().append("svg:g").append("path").attr("d",n).attr("class","chrom-background").style("stroke",this.bg_stroke).style("fill",this.loading_bg_fill);i.append("title").text((function(t){return t.data.chrom}));var r=this,o=r.track.get("data_manager"),s=!o||o.data_is_ready();a.a.when(s).then((function(){a.a.when(r._render_data(t)).then((function(){i.style("fill",r.bg_fill),r.render_labels()}))}))},render_labels:function(){},update_radius_bounds:function(t){this.radius_bounds=t;var e=f.svg.arc().innerRadius(this.radius_bounds[0]).outerRadius(this.radius_bounds[1]);this.parent_elt.selectAll("g>path.chrom-background").transition().duration(1e3).attr("d",e),this._transition_chrom_data(),this._transition_labels()},update_scale:function(t){var e=this.scale;if(this.scale=t,!(t<=e)){var n=this,i=new v;return this.parent_elt.selectAll("path.chrom-data").filter((function(t,e){return i.is_visible(this)})).each((function(e,i){var r,o=f.select(this),l=o.attr("chrom"),c=n.genome.get_chrom_region(l);n.track.get("data_manager").can_get_more_detailed_data(c)&&(r=n.track.get("data_manager").get_more_detailed_data(c,"Coverage",0,t),a.a.when(r).then((function(t){o.remove(),n._update_data_bounds();var e=s.default.find(n.chroms_layout,(function(t){return t.data.chrom===l})),i=n.get_fill_color();n._render_chrom_data(n.parent_elt,e,t).style("stroke",i).style("fill",i)})))})),n}},_transition_chrom_data:function(){var t=this.track,e=this.chroms_layout,n=this.parent_elt.selectAll("g>path.chrom-data");if(n[0].length>0){var i=this;a.a.when(t.get("data_manager").get_genome_wide_data(this.genome)).then((function(a){var r=s.default.reject(s.default.map(a,(function(t,n){var a=null,r=i._get_path_function(e[n],t);return r&&(a=r(t.data)),a})),(function(t){return null===t})),o=t.get("config").get_value("color");n.each((function(t,e){f.select(this).transition().duration(1e3).style("stroke",o).style("fill",o).attr("d",r[e])}))}))}},_transition_labels:function(){},_update_data_bounds:function(t){this.data_bounds=t||this.get_data_bounds(this.track.get("data_manager").get_genome_wide_data(this.genome)),this._transition_chrom_data()},_render_data:function(t){var e=this,n=this.chroms_layout,i=this.track,r=a.a.Deferred();return a.a.when(i.get("data_manager").get_genome_wide_data(this.genome)).then((function(a){e.data_bounds=e.get_data_bounds(a),i.get("config").set_value("min_value",e.data_bounds[0],{silent:!0}),i.get("config").set_value("max_value",e.data_bounds[1],{silent:!0});var o=s.default.zip(n,a);s.default.each(o,(function(n){var i=n[0],a=n[1];return e._render_chrom_data(t,i,a)}));var l=e.get_fill_color();e.parent_elt.selectAll("path.chrom-data").style("stroke",l).style("fill",l),r.resolve(t)})),r},_render_chrom_data:function(t,e,n){},_get_path_function:function(t,e){},_chroms_layout:function(){var t=this.genome.get_chroms_info(),e=f.layout.pie().value((function(t){return t.len})).sort(null)(t),n=2*Math.PI*this.total_gap/t.length;return s.default.map(e,(function(t,e){var i=t.endAngle-n;return t.endAngle=i>t.startAngle?i:t.startAngle,t}))}}),x=k.extend({initialize:function(t){k.prototype.initialize.call(this,t),this.innerRadius=this.radius_bounds[0],this.radius_bounds[0]=this.radius_bounds[1],this.bg_stroke="#fff",this.bg_fill="#fff",this.min_arc_len=.05},_render_data:function(t){var e=this,n=t.selectAll("g");n.selectAll("path").attr("id",(function(t){return"label-".concat(t.data.chrom)})),n.append("svg:text").filter((function(t){return t.endAngle-t.startAngle>e.min_arc_len})).attr("text-anchor","middle").append("svg:textPath").attr("class","chrom-label").attr("xlink:href",(function(t){return"#label-".concat(t.data.chrom)})).attr("startOffset","25%").text((function(t){return t.data.chrom}));var i=s.default.filter(this.chroms_layout,(function(t){return t.endAngle-t.startAngle>e.min_arc_len}));this.drawTicks(this.parent_elt,i,(function(t){var n=(t.endAngle-t.startAngle)/t.value,i=f.range(0,t.value,25e6).map((function(i,a){return{radius:e.innerRadius,angle:i*n+t.startAngle,label:0===a?0:a%3?null:e.formatNum(i)}}));return i.length<4&&(i[i.length-1].label=e.formatNum(Math.round((i[i.length-1].angle-t.startAngle)/n))),i}),(function(t){return t.angle>Math.PI?"rotate(180)translate(-16)":null}))}});s.default.extend(x.prototype,y);var S=k.extend({initialize:function(t){k.prototype.initialize.call(this,t);var e=this.track.get("config");e.get("min_value").on("change:value",this._update_min_max,this),e.get("max_value").on("change:value",this._update_min_max,this),e.get("color").on("change:value",this._transition_chrom_data,this)},_update_min_max:function(){var t=this.track.get("config"),e=[t.get_value("min_value"),t.get_value("max_value")];this._update_data_bounds(e),this.parent_elt.selectAll(".min_max").text((function(t,n){return e[n]}))},_quantile:function(t,e){return t.sort(f.ascending),f.quantile(t,e)},_render_chrom_data:function(t,e,n){var i=this._get_path_function(e,n);return i?t.datum(n.data).append("path").attr("class","chrom-data").attr("chrom",e.data.chrom).attr("d",i):null},_get_path_function:function(t,e){if("string"==typeof e||!e.data||0===e.data.length)return null;var n=f.scale.linear().domain(this.data_bounds).range(this.radius_bounds).clamp(!0),i=f.scale.linear().domain([0,e.data.length]).range([t.startAngle,t.endAngle]),a=f.svg.line.radial().interpolate("linear").radius((function(t){return n(t[1])})).angle((function(t,e){return i(e)}));return f.svg.area.radial().interpolate(a.interpolate()).innerRadius(n(0)).outerRadius(a.radius()).angle(a.angle())},render_labels:function(){var t=this,e=this.drawTicks(this.parent_elt,[this.chroms_layout[0]],this._data_bounds_ticks_fn(),(function(){return"rotate(90)"}),!0).classed("min_max",!0);s.default.each(e,(function(e){a()(e).click((function(){new _.a.ConfigSettingCollectionView({collection:t.track.get("config")}).render_in_modal("Configure Track")}))}))},_transition_labels:function(){if(0!==this.data_bounds.length){var t=this,e=s.default.filter(this.chroms_layout,(function(t){return t.endAngle-t.startAngle>.08})),n=s.default.filter(e,(function(t,e){return e%3==0})),i=s.default.flatten(s.default.map(n,(function(e){return t._data_bounds_ticks_fn()(e)})));this.parent_elt.selectAll("g.tick").data(i).transition().attr("transform",(function(t){return"rotate(".concat(180*t.angle/Math.PI-90,")translate(").concat(t.radius,",0)")}))}},_data_bounds_ticks_fn:function(){var t=this;return function(e){return[{radius:t.radius_bounds[0],angle:e.startAngle,label:t.formatNum(t.data_bounds[0])},{radius:t.radius_bounds[1],angle:e.startAngle,label:t.formatNum(t.data_bounds[1])}]}},get_data_bounds:function(t){}});s.default.extend(S.prototype,y);var M=S.extend({get_data_bounds:function(t){var e=s.default.flatten(s.default.map(t,(function(t){return t?s.default.map(t.data,(function(t){return parseInt(t[1],10)||0})):0})));return[s.default.min(e),this._quantile(e,.98)||s.default.max(e)]}}),C=k.extend({render:function(){var t=this;a.a.when(t.track.get("data_manager").data_is_ready()).then((function(){a.a.when(t.track.get("data_manager").get_genome_wide_data(t.genome)).then((function(e){var n=[],i=t.genome.get_chroms_info();s.default.each(e,(function(e,a){var r=i[a].chrom,o=s.default.map(e.data,(function(e){var n=t._get_region_angle(r,e[1]),i=t._get_region_angle(e[3],e[4]);return{source:{startAngle:n,endAngle:n+.01},target:{startAngle:i,endAngle:i+.01}}}));n=n.concat(o)})),t.parent_elt.append("g").attr("class","chord").selectAll("path").data(n).enter().append("path").style("fill",t.get_fill_color()).attr("d",f.svg.chord().radius(t.radius_bounds[0])).style("opacity",1)}))}))},update_radius_bounds:function(t){this.radius_bounds=t,this.parent_elt.selectAll("path").transition().attr("d",f.svg.chord().radius(this.radius_bounds[0]))},_get_region_angle:function(t,e){var n=s.default.find(this.chroms_layout,(function(e){return e.data.chrom===t}));return n.endAngle-(n.endAngle-n.startAngle)*(n.data.len-e)/n.data.len}}),T={GalaxyApp:c.a.View.extend({initialize:function(){m.b.cssLoadFile("static/style/circster.css");var t=new p.a.Genome(window.galaxy_config.app.genome),e=new p.a.GenomeVisualization(window.galaxy_config.app.viz_config);e.get("config").add([{key:"arc_dataset_height",label:"Arc Dataset Height",type:"int",value:25,view:"circster"},{key:"track_gap",label:"Gap Between Tracks",type:"int",value:5,view:"circster"},{key:"total_gap",label:"Gap [0-1]",type:"float",value:.4,view:"circster",hidden:!0}]),new w({el:a()("#center .unified-panel-body"),genome:t,model:e}).render(),a()("#center .unified-panel-header-inner").append("".concat(window.galaxy_config.app.viz_config.title," ").concat(window.galaxy_config.app.viz_config.dbkey));var n=g.a.create_icon_buttons_menu([{icon_class:"plus-button",title:h()("Add tracks"),on_click:function(){p.a.select_datasets({dbkey:e.get("dbkey")},(function(t){e.add_tracks(t)}))}},{icon_class:"gear",title:h()("Settings"),on_click:function(){new _.a.ConfigSettingCollectionView({collection:e.get("config")}).render_in_modal("Configure Visualization")}},{icon_class:"disk--arrow",title:h()("Save"),on_click:function(){var t=Object(r.a)();t.modal.show({title:h()("Saving..."),body:"progress"}),a.a.ajax({url:"".concat(Object(d.getAppRoot)(),"visualization/save"),type:"POST",dataType:"json",data:{id:e.get("vis_id"),title:e.get("title"),dbkey:e.get("dbkey"),type:"trackster",vis_json:JSON.stringify(e)}}).success((function(n){t.modal.hide(),e.set("vis_id",n.vis_id)})).error((function(){t.modal.show({title:h()("Could Not Save"),body:"Could not save visualization. Please try again later.",buttons:{Cancel:function(){t.modal.hide()}}})}))}},{icon_class:"cross-circle",title:h()("Close"),on_click:function(){window.top.location="".concat(Object(d.getAppRoot)(),"visualizations/list")}}],{tooltip_config:{placement:"bottom"}});n.$el.attr("style","float: right"),a()("#center .unified-panel-header-inner").append(n.$el),a()(".menu-button").tooltip({placement:"bottom"})}})},j=n(56),O=n(27),L=c.a.View.extend({className:"UserMenuBase",isAcceptableValue:function(t,e,n){var i,a=t.val(),r=t.attr("displayLabel")||t.attr("id").replace("phyloViz","");return i=a,isNaN(parseFloat(i))||!isFinite(i)?(alert("".concat(r," is not a number!")),!1):a>n?(alert("".concat(r," is too large.")),!1):!(a<e)||(alert("".concat(r," is too small.")),!1)},hasIllegalJsonCharacters:function(t){return-1!==t.val().search(/"|'|\\/)&&(alert("Named fields cannot contain these illegal characters: double quote(\"), single guote('), or back slash(\\). "),!0)}});function D(){var t=this,e=f.layout.hierarchy().sort(null).value(null),n=360,i="Linear",a=18,r=200,o=0,s=.5,l=50;return t.leafHeight=function(e){return void 0===e?a:(a=e,t)},t.layoutMode=function(e){return void 0===e?i:(i=e,t)},t.layoutAngle=function(e){return void 0===e?n:isNaN(e)||e<0||e>360?t:(n=e,t)},t.separation=function(e){return void 0===e?r:(r=e,t)},t.links=function(t){return f.layout.tree().links(t)},t.nodes=function(c,d){"[object Array]"===toString.call(c)&&(c=c[0]);var u=e.call(t,c,d),h=[],f=0,p=0;return window._d=c,window._nodes=u,u.forEach((function(t){f=t.depth>f?t.depth:f,h.push(t)})),h.forEach((function(t){t.children||(p+=1,t.depth=f)})),a="Circular"===i?n/p:a,o=0,function t(e,n,i,a){var c=e.children,d=0,u=e.dist||s;u=u>1?1:u,e.dist=u,e.y0=null!==a?a.y0+u*r:l;c?(c.forEach((function(a){a.parent=e,d+=t(a,n,i,e)})),e.x0=d/c.length):(e.x0=o*i,o+=1);return e.x=e.x0,e.y=e.y0,e.x0}(h[0],f,a,null),h},t}var A=p.a.Visualization.extend({defaults:{layout:"Linear",separation:250,leafHeight:18,type:"phyloviz",title:h()("Title"),scaleFactor:1,translate:[0,0],fontSize:12,selectedNode:null,nodeAttrChangedTime:0},initialize:function(t){this.set("dataset",new j.a({id:t.dataset_id}))},root:{},toggle:function(t){void 0!==t&&(t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null))},toggleAll:function(t){t.children&&0!==t.children.length&&(t.children.forEach(this.toggleAll),this.toggle(t))},getData:function(){return this.root},save:function(){!function t(e){delete e.parent,e._selected&&delete e._selected;e.children&&e.children.forEach(t);e._children&&e._children.forEach(t)}(this.root);var t=a.a.extend(!0,{},this.attributes);return t.selectedNode=null,Object(O.d)("Saving to Galaxy","progress"),a.a.ajax({url:this.url(),type:"POST",dataType:"json",data:{config:JSON.stringify(t),type:"phyloviz"},success:function(t){Object(O.b)()}})}}),E=c.a.View.extend({defaults:{nodeRadius:4.5},stdInit:function(t){this.model.on("change:separation change:leafHeight change:fontSize change:nodeAttrChangedTime",this.updateAndRender,this),this.vis=t.vis,this.i=0,this.maxDepth=-1,this.width=t.width,this.height=t.height},updateAndRender:function(t){t=t||this.model.root,this.renderNodes(t),this.renderLinks(t),this.addTooltips()},renderLinks:function(t){var e=this.vis.selectAll("g.completeLink").data(this.tree.links(this.nodes),(function(t){return t.target.id})),n=function(t){t.pos0="".concat(t.source.y0," ").concat(t.source.x0),t.pos1="".concat(t.source.y0," ").concat(t.target.x0),t.pos2="".concat(t.target.y0," ").concat(t.target.x0)};e.enter().insert("svg:g","g.node").attr("class","completeLink").append("svg:path").attr("class","link").attr("d",(function(t){return n(t),"M ".concat(t.pos0," L ").concat(t.pos1)})),e.transition().duration(500).select("path.link").attr("d",(function(t){return n(t),"M ".concat(t.pos0," L ").concat(t.pos1," L ").concat(t.pos2)})),e.exit().remove()},selectNode:function(t){f.selectAll("g.node").classed("selectedHighlight",(function(e){return t.id===e.id&&(t._selected?(delete t._selected,!1):(t._selected=!0,!0))})),this.model.set("selectedNode",t),a()("#phyloVizSelectedNodeName").val(t.name),a()("#phyloVizSelectedNodeDist").val(t.dist),a()("#phyloVizSelectedNodeAnnotation").val(t.annotation||"")},addTooltips:function(){a()(".tooltip").remove(),a()(".node").attr("data-original-title",(function(){var t=this.__data__,e=t.annotation||"None";return t?"".concat(t.name?"".concat(t.name,"<br/>"):"","Dist: ").concat(t.dist," <br/>Annotation1: ").concat(e).concat(t.bootstrap?"<br/>Confidence level: ".concat(Math.round(100*t.bootstrap)):""):""})).tooltip({placement:"top",trigger:"hover"})}}).extend({initialize:function(t){this.margins=t.margins,this.layoutMode="Linear",this.stdInit(t),this.layout(),this.updateAndRender(this.model.root)},layout:function(){this.tree=(new D).layoutMode("Linear"),this.diagonal=f.svg.diagonal().projection((function(t){return[t.y,t.x]}))},renderNodes:function(t){var e=this,n="".concat(e.model.get("fontSize"),"px");e.tree.separation(e.model.get("separation")).leafHeight(e.model.get("leafHeight"));var i=e.tree.separation(e.model.get("separation")).nodes(e.model.root),a=e.vis.selectAll("g.node").data(i,(function(t){return t.name+t.id||(t.id=++e.i)}));e.nodes=i,e.duration=500;var r=a.enter().append("svg:g").attr("class","node").on("dblclick",(function(){f.event.stopPropagation()})).on("click",(function(t){if(f.event.altKey)e.selectNode(t);else{if(t.children&&0===t.children.length)return;e.model.toggle(t),e.updateAndRender(t)}}));"[object Array]"===toString.call(t)&&(t=t[0]),r.attr("transform",(function(e){return"translate(".concat(t.y0,",").concat(t.x0,")")})),r.append("svg:circle").attr("r",1e-6).style("fill",(function(t){return t._children?"lightsteelblue":"#fff"})),r.append("svg:text").attr("class","nodeLabel").attr("x",(function(t){return t.children||t._children?-10:10})).attr("dy",".35em").attr("text-anchor",(function(t){return t.children||t._children?"end":"start"})).style("fill-opacity",1e-6);var o=a.transition().duration(500);o.attr("transform",(function(t){return"translate(".concat(t.y,",").concat(t.x,")")})),o.select("circle").attr("r",e.defaults.nodeRadius).style("fill",(function(t){return t._children?"lightsteelblue":"#fff"})),o.select("text").style("fill-opacity",1).style("font-size",n).text((function(t){return t.name&&""!==t.name?t.name:t.bootstrap?Math.round(100*t.bootstrap):""}));var s=a.exit().transition().duration(500).remove();s.select("circle").attr("r",1e-6),s.select("text").style("fill-opacity",1e-6),i.forEach((function(t){t.x0=t.x,t.y0=t.y}))}}),I=c.a.View.extend({className:"phyloviz",initialize:function(t){var e=this;e.MIN_SCALE=.05,e.MAX_SCALE=5,e.MAX_DISPLACEMENT=500,e.margins=[10,60,10,80],e.width=a()("#PhyloViz").width(),e.height=a()("#PhyloViz").height(),e.radius=e.width,e.data=t.data,a()(window).resize((function(){e.width=a()("#PhyloViz").width(),e.height=a()("#PhyloViz").height(),e.render()})),e.phyloTree=new A(t.config),e.phyloTree.root=e.data,e.zoomFunc=f.behavior.zoom().scaleExtent([e.MIN_SCALE,e.MAX_SCALE]),e.zoomFunc.translate(e.phyloTree.get("translate")),e.zoomFunc.scale(e.phyloTree.get("scaleFactor")),e.navMenu=new P(e),e.settingsMenu=new Y({phyloTree:e.phyloTree}),e.nodeSelectionView=new R({phyloTree:e.phyloTree}),e.search=new H,setTimeout((function(){e.zoomAndPan()}),1e3)},render:function(){var t=this;a()("#PhyloViz").empty(),t.mainSVG=f.select("#PhyloViz").append("svg:svg").attr("width",t.width).attr("height",t.height).attr("pointer-events","all").call(t.zoomFunc.on("zoom",(function(){t.zoomAndPan()}))),t.boundingRect=t.mainSVG.append("svg:rect").attr("class","boundingRect").attr("width",t.width).attr("height",t.height).attr("stroke","black").attr("fill","white"),t.vis=t.mainSVG.append("svg:g").attr("class","vis"),t.layoutOptions={model:t.phyloTree,width:t.width,height:t.height,vis:t.vis,margins:t.margins},a()("#title").text("Phylogenetic Tree from ".concat(t.phyloTree.get("title"),":")),new E(t.layoutOptions)},zoomAndPan:function(t){var e,n;void 0!==t&&(e=t.zoom,n=t.translate);var i,a=this.zoomFunc.scale(),r=this.zoomFunc.translate(),o="";switch(e){case"reset":a=1,r=[0,0];break;case"+":a*=1.1;break;case"-":a*=.9;break;default:"number"==typeof e?a=e:null!==f.event&&(a=f.event.scale)}if(!(a<this.MIN_SCALE||a>this.MAX_SCALE)){if(this.zoomFunc.scale(a),i="translate(".concat(this.margins[3],",").concat(this.margins[0],") scale(").concat(a,")"),null!==f.event)o="translate(".concat(f.event.translate,")");else{if(void 0!==n){var s=n.split(",")[0],l=n.split(",")[1];isNaN(s)||isNaN(l)||(r=[r[0]+parseFloat(s),r[1]+parseFloat(l)])}this.zoomFunc.translate(r),o="translate(".concat(r,")")}this.phyloTree.set("scaleFactor",a),this.phyloTree.set("translate",r),this.vis.attr("transform",o+i)}},reloadViz:function(){var t=this,e=a()("#phylovizNexSelector :selected").val();a.a.getJSON(t.phyloTree.get("dataset").url(),{tree_index:e,data_type:"raw_data"},(function(e){t.data=e.data,t.config=e,t.render()}))}}),P=c.a.View.extend({initialize:function(t){var e=this;e.phylovizView=t,a()("#panelHeaderRightBtns").empty(),a()("#phyloVizNavBtns").empty(),a()("#phylovizNexSelector").off(),e.initNavBtns(),e.initRightHeaderBtns(),a()("#phylovizNexSelector").off().on("change",(function(){e.phylovizView.reloadViz()}))},initRightHeaderBtns:function(){var t=this,e=g.a.create_icon_buttons_menu([{icon_class:"gear",title:h()("PhyloViz Settings"),on_click:function(){a()("#SettingsMenu").show(),t.settingsMenu.updateUI()}},{icon_class:"disk",title:h()("Save visualization"),on_click:function(){var e=a()("#phylovizNexSelector option:selected").text();e&&t.phylovizView.phyloTree.set("title",e),t.phylovizView.phyloTree.save()}},{icon_class:"chevron-expand",title:"Search / Edit Nodes",on_click:function(){a()("#nodeSelectionView").show()}},{icon_class:"information",title:h()("Phyloviz Help"),on_click:function(){window.open("https://galaxyproject.org/learn/visualization/phylogenetic-tree/")}}],{tooltip_config:{placement:"bottom"}});a()("#panelHeaderRightBtns").append(e.$el)},initNavBtns:function(){var t=this,e=g.a.create_icon_buttons_menu([{icon_class:"zoom-in",title:h()("Zoom in"),on_click:function(){t.phylovizView.zoomAndPan({zoom:"+"})}},{icon_class:"zoom-out",title:h()("Zoom out"),on_click:function(){t.phylovizView.zoomAndPan({zoom:"-"})}},{icon_class:"arrow-circle",title:"Reset Zoom/Pan",on_click:function(){t.phylovizView.zoomAndPan({zoom:"reset"})}}],{tooltip_config:{placement:"bottom"}});a()("#phyloVizNavBtns").append(e.$el)}}),Y=L.extend({className:"Settings",initialize:function(t){var e=this;e.phyloTree=t.phyloTree,e.el=a()("#SettingsMenu"),e.inputs={separation:a()("#phyloVizTreeSeparation"),leafHeight:a()("#phyloVizTreeLeafHeight"),fontSize:a()("#phyloVizTreeFontSize")},a()("#settingsCloseBtn").off().on("click",(function(){e.el.hide()})),a()("#phylovizResetSettingsBtn").off().on("click",(function(){e.resetToDefaults()})),a()("#phylovizApplySettingsBtn").off().on("click",(function(){e.apply()}))},apply:function(){var t=this;t.isAcceptableValue(t.inputs.separation,50,2500)&&t.isAcceptableValue(t.inputs.leafHeight,5,30)&&t.isAcceptableValue(t.inputs.fontSize,5,20)&&a.a.each(t.inputs,(function(e,n){t.phyloTree.set(e,n.val())}))},updateUI:function(){var t=this;a.a.each(t.inputs,(function(e,n){n.val(t.phyloTree.get(e))}))},resetToDefaults:function(){a()(".tooltip").remove();var t=this;a.a.each(t.phyloTree.defaults,(function(e,n){t.phyloTree.set(e,n)})),t.updateUI()},render:function(){}}),R=L.extend({className:"Settings",initialize:function(t){var e=this;e.el=a()("#nodeSelectionView"),e.phyloTree=t.phyloTree,e.UI={enableEdit:a()("#phylovizEditNodesCheck"),saveChanges:a()("#phylovizNodeSaveChanges"),cancelChanges:a()("#phylovizNodeCancelChanges"),name:a()("#phyloVizSelectedNodeName"),dist:a()("#phyloVizSelectedNodeDist"),annotation:a()("#phyloVizSelectedNodeAnnotation")},e.valuesOfConcern={name:null,dist:null,annotation:null},a()("#nodeSelCloseBtn").off().on("click",(function(){e.el.hide()})),e.UI.saveChanges.off().on("click",(function(){e.updateNodes()})),e.UI.cancelChanges.off().on("click",(function(){e.cancelChanges()})),function(t){t.fn.enable=function(e){return t(this).each((function(){e?t(this).removeAttr("disabled"):t(this).attr("disabled","disabled")}))}}(a.a),e.UI.enableEdit.off().on("click",(function(){e.toggleUI()}))},toggleUI:function(){var t=this,e=t.UI.enableEdit.is(":checked");e||t.cancelChanges(),a.a.each(t.valuesOfConcern,(function(n,i){t.UI[n].enable(e)})),e?(t.UI.saveChanges.show(),t.UI.cancelChanges.show()):(t.UI.saveChanges.hide(),t.UI.cancelChanges.hide())},cancelChanges:function(){var t=this,e=t.phyloTree.get("selectedNode");e&&a.a.each(t.valuesOfConcern,(function(n,i){t.UI[n].val(e[n])}))},updateNodes:function(){var t=this,e=t.phyloTree.get("selectedNode");if(e){if(!t.isAcceptableValue(t.UI.dist,0,1)||t.hasIllegalJsonCharacters(t.UI.name)||t.hasIllegalJsonCharacters(t.UI.annotation))return;a.a.each(t.valuesOfConcern,(function(n,i){e[n]=t.UI[n].val()})),t.phyloTree.set("nodeAttrChangedTime",new Date)}else alert("No node selected")}}),H=L.extend({initialize:function(){var t=this;a()("#phyloVizSearchBtn").on("click",(function(){var e=a()("#phyloVizSearchTerm"),n=a()("#phyloVizSearchCondition").val().split("-"),i=n[0],r=n[1];t.hasIllegalJsonCharacters(e),"dist"===i&&t.isAcceptableValue(e,0,1),t.searchTree(i,r,e.val())}))},searchTree:function(t,e,n){f.selectAll("g.node").classed("searchHighlight",(function(i){var a=i[t];if(null!=a)if("dist"===t)switch(e){case"greaterEqual":return a>=+n;case"lesserEqual":return a<=+n;default:return}else if("name"===t||"annotation"===t)return-1!==a.toLowerCase().indexOf(n.toLowerCase())}))}}),N=n(97),$=n(104),F=n(55),W=c.a.Model.extend({defaults:{inputs:null,values:null}}),z=c.a.Model.extend({defaults:{tool:null,tree_data:null},initialize:function(t){var e=this;this.get("tool").get("inputs").each((function(t){t.on("change:min change:max change:num_samples",(function(t){t.get("in_ptree")&&e.set_tree_data()}),e),t.on("change:in_ptree",(function(t){t.get("in_ptree")?e.add_param(t):e.remove_param(t),e.set_tree_data()}),e)})),t.config&&s.default.each(t.config,(function(t){var n=e.get("tool").get("inputs").find((function(e){return e.get("name")===t.name}));e.add_param(n),n.set(t)}))},add_param:function(t){t.get("ptree_index")||(t.set("in_ptree",!0),t.set("ptree_index",this.get_tree_params().length))},remove_param:function(t){t.set("in_ptree",!1),t.set("ptree_index",null),Object(s.default)(this.get_tree_params()).each((function(t,e){t.set("ptree_index",e+1)}))},set_tree_data:function(){var t=s.default.map(this.get_tree_params(),(function(t){return{param:t,samples:t.get_samples()}})),e=0;this.set("tree_data",{name:"Root",id:e++,children:0!==t.length?function t(n,i){var a=n[i],r=a.param,o=a.samples;return n.length-1===i?s.default.map(o,(function(t){return{id:e++,name:t,param:r,value:t}})):s.default.map(o,(function(a){return{id:e++,name:a,param:r,value:a,children:t(n,i+1)}}))}(t,0):null})},get_tree_params:function(){return Object(s.default)(this.get("tool").get("inputs").where({in_ptree:!0})).sortBy((function(t){return t.get("ptree_index")}))},get_num_leaves:function(){return this.get_tree_params().reduce((function(t,e){return t*e.get_samples().length}),1)},get_node_settings:function(t){var e=this.get("tool").get_inputs_dict(),n=t.parent;if(n)for(;0!==n.depth;)e[n.param.get("name")]=n.value,n=n.parent;var i=this,a=function t(e,n){return e.param&&(n[e.param.get("name")]=e.value),e.children?s.default.flatten(s.default.map(e.children,(function(e){return t(e,s.default.clone(n))}))):new W({inputs:i.get("tool").get("inputs"),values:n})}(t,e);return s.default.isArray(a)||(a=[a]),a},get_connected_nodes:function(t){for(var e=[],n=t.parent;n;)e.push(n),n=n.parent;return s.default.flatten([e,function t(e){return e.children?s.default.flatten([e,s.default.map(e.children,(function(e){return t(e)}))]):e}(t)])},get_leaf:function(t){for(var e,n=this.get("tree_data");n.children;)e=n.children,n=s.default.find(e,(function(e){return t[e.param.get("name")]===e.value}));return n},toJSON:function(){return this.get_tree_params().map((function(t){return{name:t.get("name"),min:t.get("min"),max:t.get("max"),num_samples:t.get("num_samples")}}))}}),U=c.a.Model.extend({defaults:{track:null,mode:"Pack",settings:null,regions:null},initialize:function(t){if(this.set("regions",t.regions),t.track){var e=s.default.extend({data_url:"".concat(Object(d.getAppRoot)(),"dummy1"),converted_datasets_state_url:"".concat(Object(d.getAppRoot)(),"dummy2")},t.track);this.set("track",N.a.object_from_template(e,{},null))}},same_settings:function(t){var e=this.get("settings"),n=t.get("settings");for(var i in e)if(!n[i]||e[i]!==n[i])return!1;return!0},toJSON:function(){return{track:this.get("track").to_dict(),settings:this.get("settings"),regions:this.get("regions")}}}),V=c.a.Collection.extend({model:U}),B=p.a.Visualization.extend({defaults:s.default.extend({},p.a.Visualization.prototype.defaults,{dataset:null,tool:null,parameter_tree:null,regions:null,tracks:null,default_mode:"Pack"}),initialize:function(t){this.set("dataset",new j.a(t.dataset)),this.set("tool",new $.a.Tool(t.tool)),this.set("regions",new p.a.GenomeRegionCollection(t.regions)),this.set("tracks",new V(t.tracks));var e=this.get("tool");this.set("tool_with_samplable_inputs",e),e.remove_inputs(["data","hidden_data","conditional","text"]),this.set("parameter_tree",new z({tool:e,config:t.tree_config}))},add_track:function(t){this.get("tracks").add(t)},toJSON:function(){return{id:this.get("id"),title:"Parameter exploration for dataset '".concat(this.get("dataset").get("name"),"'"),type:"sweepster",dataset_id:this.get("dataset").id,tool_id:this.get("tool").id,regions:this.get("regions").toJSON(),tree_config:this.get("parameter_tree").toJSON(),tracks:this.get("tracks").toJSON()}}}),q=c.a.View.extend({tagName:"tr",TILE_LEN:250,initialize:function(t){this.canvas_manager=t.canvas_manager,this.render(),this.model.on("change:track change:mode",this.draw_tiles,this)},render:function(){var t=this.model.get("settings"),e=t.get("values"),n=a()("<td/>").addClass("settings").appendTo(this.$el),i=a()("<div/>").addClass("track-info").hide().appendTo(n);i.append(a()("<div/>").css("font-weight","bold").text("Track Settings")),t.get("inputs").each((function(t){i.append("".concat(t.get("label"),": ").concat(e[t.get("name")],"<br/>"))}));var r=this;a()("<button/>").appendTo(i).text("Run on complete dataset").click((function(){i.toggle(),r.trigger("run_on_dataset",t)}));var o=g.a.create_icon_buttons_menu([{title:h()("Settings"),icon_class:"gear track-settings",on_click:function(){i.toggle()}},{title:h()("Remove"),icon_class:"cross-circle",on_click:function(){r.$el.remove(),a()(".tooltip").remove()}}]);n.prepend(o.$el),this.model.get("regions").each((function(){r.$el.append(a()("<td/>").addClass("tile").html(a()("<img/>").attr("src","".concat(Object(d.getAppRoot)(),"images/loading_large_white_bg.gif"))))})),this.model.get("track")&&this.draw_tiles()},draw_tiles:function(){var t=this,e=this.model.get("track"),n=this.model.get("regions"),i=this.$el.find("td.tile");e&&a.a.when(e.data_manager.data_is_ready()).then((function(r){n.each((function(n,r){var o=n.length()/t.TILE_LEN,s=1/o,l=t.model.get("mode");a.a.when(e.data_manager.get_data(n,l,o,{})).then((function(o){var c=t.canvas_manager.new_canvas();c.width=t.TILE_LEN,c.height=e.get_canvas_height(o,l,s,c.width),e.draw_tile(o,c.getContext("2d"),l,n,s),a()(i[r]).empty().append(c)}))}))}))}}),G=c.a.View.extend({number_input_template:'<div class="form-row-input sweep"><input class="min" type="text" size="6" value="<%= min %>"> - <input class="max" type="text" size="6" value="<%= max %>"> samples: <input class="num_samples" type="text" size="1" value="<%= num_samples %>"></div>',select_input_template:'<div class="form-row-input sweep"><%= options %></div>',initialize:function(t){this.$el=t.tool_row,this.render()},render:function(){var t=this.model,e=this.$el.find(".form-row-input"),n=null;if(e.find(":input").change((function(){t.set("value",a()(this).val())})),t instanceof $.a.IntegerToolParameter)n=a()(s.default.template(this.number_input_template)(this.model.toJSON()));else if(t instanceof $.a.SelectToolParameter){var i=s.default.map(this.$el.find("select option"),(function(t){return a()(t).val()})).join(", ");n=a()(s.default.template(this.select_input_template)({options:i}))}n.insertAfter(e);var r=this,o=g.a.create_icon_buttons_menu([{title:h()("Add parameter to tree"),icon_class:"plus-button",on_click:function(){t.set("in_ptree",!0),e.hide(),n.show(),a()(this).hide(),r.$el.find(".icon-button.toggle").show()}},{title:h()("Remove parameter from tree"),icon_class:"toggle",on_click:function(){t.set("in_ptree",!1),n.hide(),e.show(),a()(this).hide(),r.$el.find(".icon-button.plus-button").show()}}],{});this.$el.prepend(o.$el),t.get("in_ptree")?(e.hide(),r.$el.find(".icon-button.plus-button").hide()):(r.$el.find(".icon-button.toggle").hide(),n.hide()),s.default.each(["min","max","num_samples"],(function(e){n.find(".".concat(e)).change((function(){t.set(e,parseFloat(a()(this).val()))}))}))}}),J=c.a.View.extend({className:"tree-design",initialize:function(t){this.render()},render:function(){var t=new $.a.ToolFormView({model:this.model.get("tool")});t.render(),this.$el.append(t.$el);var e=this.model.get("tool").get("inputs");this.$el.find(".form-row").not(".form-actions").each((function(t){new G({model:e.at(t),tool_row:a()(this)})}))}}),K=c.a.View.extend({className:"tool-parameter-tree",initialize:function(t){this.model.on("change:tree_data",this.render,this)},render:function(){this.$el.children().remove();var t=this.model.get_tree_params();if(t.length){this.width=100*(2+t.length),this.height=15*this.model.get_num_leaves();var e=this,n=f.layout.cluster().size([this.height,this.width-160]),i=f.svg.diagonal().projection((function(t){return[t.y,t.x]})),r=n.nodes(this.model.get("tree_data")),o=s.default.uniq(s.default.pluck(r,"y"));s.default.each(t,(function(t,n){var i=o[n+1],r=a()("#center").position().left;e.$el.append(a()("<div>").addClass("label").text(t.get("label")).css("left",i+r))}));var l=f.select(this.$el[0]).append("svg").attr("width",this.width).attr("height",this.height+30).append("g").attr("transform","translate(40, 20)");l.selectAll("path.link").data(n.links(r)).enter().append("path").attr("class","link").attr("d",i);var c=l.selectAll("g.node").data(r).enter().append("g").attr("class","node").attr("transform",(function(t){return"translate(".concat(t.y,",").concat(t.x,")")})).on("mouseover",(function(t){var n=s.default.pluck(e.model.get_connected_nodes(t),"id");c.filter((function(t){return void 0!==s.default.find(n,(function(e){return e===t.id}))})).style("fill","#f00")})).on("mouseout",(function(){c.style("fill","#000")}));c.append("circle").attr("r",9),c.append("text").attr("dx",(function(t){return t.children?-12:12})).attr("dy",3).attr("text-anchor",(function(t){return t.children?"end":"start"})).text((function(t){return t.name}))}}}),X=c.a.View.extend({className:"Sweepster",helpText:"<div><h4>Getting Started</h4><ol><li>Create a parameter tree by using the icons next to the tool's parameter names to add or remove parameters.<li>Adjust the tree by using parameter inputs to select min, max, and number of samples<li>Run the tool with different settings by clicking on tree nodes</ol></div>",initialize:function(t){this.canvas_manager=new p.a.CanvasManager(this.$el.parents("body")),this.tool_param_tree_view=new K({model:this.model.get("parameter_tree")}),this.track_collection_container=a()("<table/>").addClass("tracks"),this.model.get("parameter_tree").on("change:tree_data",this.handle_node_clicks,this);var e=this;this.model.get("tracks").each((function(t){t.get("track").view=e})),this.config=_.a.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"},{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"}],{})},render:function(){var t=new J({model:this.model.get("parameter_tree")});a()("#left").append(t.$el);var e=this,n=e.model.get("regions"),i=a()("<tr/>").appendTo(this.track_collection_container);n.each((function(t){i.append(a()("<th>").text(t.toString()))})),i.children().first().attr("colspan",2);var r=a()("<div>").addClass("tiles");a()("#right").append(r.append(this.track_collection_container)),e.model.get("tracks").each((function(t){e.add_track(t)}));var o=a()(this.helpText).addClass("help"),l=g.a.create_icon_buttons_menu([{title:h()("Close"),icon_class:"cross-circle",on_click:function(){a()(".tooltip").remove(),o.remove()}}]);o.prepend(l.$el.css("float","right")),a()("#center").append(o),this.tool_param_tree_view.render(),a()("#center").append(this.tool_param_tree_view.$el),this.handle_node_clicks();var c=g.a.create_icon_buttons_menu([{icon_class:"chevron-expand",title:"Set display mode"},{icon_class:"cross-circle",title:h()("Close"),on_click:function(){window.top.location="".concat(Object(d.getAppRoot)(),"visualizations/list")}}],{tooltip_config:{placement:"bottom"}}),u={};s.default.each(["Squish","Pack"],(function(t){u[t]=function(){e.model.set("default_mode",t),e.model.get("tracks").each((function(e){e.set("mode",t)}))}})),Object(F.b)(c.$el.find(".chevron-expand"),u),c.$el.attr("style","float: right"),a()("#right .unified-panel-header-inner").append(c.$el)},get_base_color:function(t){return this.config.get_value("".concat(t.toLowerCase(),"_color"))||this.config.get_value("n_color")},run_tool_on_dataset:function(t){var e=this.model.get("tool"),n=e.get("name"),i=this.model.get("dataset");e.set_input_values(t.get("values")),a.a.when(e.rerun(i)).then((function(t){})),Object(O.e)("Running ".concat(n," on complete dataset"),"".concat(n," is running on dataset '").concat(i.get("name"),"'. Outputs are in the dataset's history."),{Ok:function(){Object(O.b)()}})},add_track:function(t){var e=this,n=this.model.get("parameter_tree");e.model.add_track(t);var i=new q({model:t,canvas_manager:e.canvas_manager});return i.on("run_on_dataset",e.run_tool_on_dataset,e),e.track_collection_container.append(i.$el),i.$el.hover((function(){var i=n.get_leaf(t.get("settings").get("values")),a=s.default.pluck(n.get_connected_nodes(i),"id");f.select(e.tool_param_tree_view.$el[0]).selectAll("g.node").filter((function(t){return void 0!==s.default.find(a,(function(e){return e===t.id}))})).style("fill","#f00")}),(function(){f.select(e.tool_param_tree_view.$el[0]).selectAll("g.node").style("fill","#000")})),t},handle_node_clicks:function(){var t=this,e=this.model.get("parameter_tree"),n=this.model.get("regions");f.select(this.tool_param_tree_view.$el[0]).selectAll("g.node").on("click",(function(i,r){var o=t.model.get("tool"),l=t.model.get("dataset"),c=e.get_node_settings(i),d=a.a.Deferred();c.length>=10?Object(O.e)("Whoa there cowboy!","You clicked on a node to try ".concat(t.model.get("tool").get("name")," with ").concat(c.length," different combinations of settings. You can only run 10 jobs at a time."),{Ok:function(){Object(O.b)(),d.resolve(!1)}}):d.resolve(!0),a.a.when(d).then((function(e){if(e){var i=s.default.map(c,(function(e){var i=new U({settings:e,regions:n,mode:t.model.get("default_mode")});return t.add_track(i),i}));s.default.each(i,(function(e,i){setTimeout((function(){o.set_input_values(e.get("settings").get("values")),a.a.when(o.rerun(l,n)).then((function(n){var i=n.first(),a=i.get("track_config");a.dataset=i,a.tool=null,a.prefs=t.config.to_key_value_dict();var r=N.a.object_from_template(a,t,null);r.init_for_tool_data(),e.set("track",r)}))}),1e4*i)}))}}))}))}}),Q=n(11),Z=n(12),tt=n(59),et=n(117),nt={LibraryRowView:c.a.View.extend({events:{"click .edit_library_btn":"edit_button_clicked","click .cancel_library_btn":"cancel_library_modification","click .save_library_btn":"save_library_modification","click .delete_library_btn":"delete_library","click .undelete_library_btn":"undelete_library"},edit_mode:!1,element_visibility_config:{upload_library_btn:!1,edit_library_btn:!1,permission_library_btn:!1,save_library_btn:!1,cancel_library_btn:!1,delete_library_btn:!1,undelete_library_btn:!1},initialize:function(t){this.render(t)},render:function(t){void 0===t&&(t=Object(r.a)().libraries.libraryListView.collection.get(this.$el.data("id")),console.log(t));this.prepareButtons(t);var e=this.templateRow();return this.setElement(e({library:t,button_config:this.element_visibility_config,edit_mode:this.edit_mode,root_path:Object(d.getAppRoot)()})),this.$el.show(),this},repaint:function(t){this.$el.find('[data-toggle="tooltip"]').tooltip("dispose");var e=this.$el;this.render(),e.replaceWith(this.$el),this.$el.find('[data-toggle="tooltip"]').tooltip({trigger:"hover"}),Object(et.b)("[data-linkify=true]")},prepareButtons:function(t){var e=this.element_visibility_config;!1===this.edit_mode?(e.save_library_btn=!1,e.cancel_library_btn=!1,e.delete_library_btn=!1,!0===t.get("deleted")?(e.undelete_library_btn=!0,e.upload_library_btn=!1,e.edit_library_btn=!1,e.permission_library_btn=!1):!1===t.get("deleted")&&(e.save_library_btn=!1,e.cancel_library_btn=!1,e.undelete_library_btn=!1,!0===t.get("can_user_add")&&(e.upload_library_btn=!0),!0===t.get("can_user_modify")&&(e.edit_library_btn=!0),!0===t.get("can_user_manage")&&(e.permission_library_btn=!0))):!0===this.edit_mode&&(e.upload_library_btn=!1,e.edit_library_btn=!1,e.permission_library_btn=!1,e.save_library_btn=!0,e.cancel_library_btn=!0,e.delete_library_btn=!0,e.undelete_library_btn=!1),this.element_visibility_config=e},edit_button_clicked:function(){this.edit_mode=!0,this.repaint()},cancel_library_modification:function(){this.edit_mode=!1,this.repaint()},save_library_modification:function(){var t=Object(r.a)().libraries.libraryListView.collection.get(this.$el.data("id")),e=!1,n=this.$el.find(".input_library_name").val();if(void 0!==n&&n!==t.get("name")){if(!(n.length>2))return void Z.a.warning("Library name has to be at least 3 characters long.");t.set("name",n),e=!0}var i=this.$el.find(".input_library_description").val();void 0!==i&&i!==t.get("description")&&(t.set("description",i),e=!0);var a=this.$el.find(".input_library_synopsis").val();if(void 0!==a&&a!==t.get("synopsis")&&(t.set("synopsis",a),e=!0),e){var o=this;t.save(null,{patch:!0,success:function(t){o.edit_mode=!1,o.repaint(t),Z.a.success("Changes to library saved.")},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred while attempting to update the library.")}})}else this.edit_mode=!1,this.repaint(t),Z.a.info("Nothing has changed.")},delete_library:function(){var t=Object(r.a)(),e=t.libraries.libraryListView.collection.get(this.$el.data("id")),n=this;e.destroy({success:function(e){e.set("deleted",!0),t.libraries.libraryListView.collection.add(e),n.edit_mode=!1,!1===t.libraries.preferences.get("with_deleted")?(a()(".tooltip").hide(),n.repaint(e),n.$el.remove()):!0===t.libraries.preferences.get("with_deleted")&&n.repaint(e),Z.a.success("Library has been marked deleted.")},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred during deleting the library.")}})},undelete_library:function(){var t=Object(r.a)(),e=t.libraries.libraryListView.collection.get(this.$el.data("id")),n=this;e.url="".concat(e.urlRoot+e.id,"?undelete=true"),e.destroy({success:function(e){e.set("deleted",!1),t.libraries.libraryListView.collection.add(e),n.edit_mode=!1,n.repaint(e),Z.a.success("Library has been undeleted.")},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred while undeleting the library.")}})},templateRow:function(){return s.default.template('<tr class="<% if(library.get("deleted") === true) { print("active") } %>"\n                style="display:none;" data-id="<%- library.get("id") %>">\n                <% if(!edit_mode) { %>\n                    <% if(library.get("deleted")) { %>\n                        <td style="color:grey;"><%- library.get("name") %></td>\n                    <% } else { %>\n                        <td>\n                            <a href="<%- root_path %>library/folders/<%- library.get("root_folder_id") %>"><%- library.get("name") %></a>\n                        </td>\n                    <% } %>\n                    <% if(library.get("description")) { %>\n                        <% if( (library.get("description")).length> 40 ) { %>\n                            <td data-linkify=true data-toggle="tooltip" data-placement="bottom"\n                                title="<%= _.escape(library.get("description")) %>">\n                                <%= _.escape(library.get("description")).substring(0, 40) + "..." %>\n                            </td>\n                        <% } else { %>\n                            <td data-linkify=true><%= _.escape(library.get("description"))%></td>\n                        <% } %>\n                    <% } else { %>\n                        <td></td>\n                    <% } %>\n                    <% if(library.get("synopsis")) { %>\n                        <% if( (library.get("synopsis")).length> 40 ) { %>\n                            <td data-toggle="tooltip" data-placement="bottom"\n                                title="<%= _.escape(library.get("synopsis")) %>">\n                                <%= _.escape(library.get("synopsis")).substring(0, 40) + "..." %>\n                            </td>\n                        <% } else { %>\n                            <td><%= _.escape(library.get("synopsis"))%></td>\n                        <% } %>\n                    <% } else { %>\n                        <td></td>\n                    <% } %>\n                <% } else if(edit_mode){ %>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_name" placeholder="name" ><%- library.get("name") %></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_description" placeholder="description"><%- library.get("description") %></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_synopsis" placeholder="synopsis"><%- library.get("synopsis") %></textarea>\n                    </td>\n                <% } %>\n                <td class="right-center">\n                    <% if( (library.get("public")) && (library.get("deleted") === false) ) { %>\n                        <span data-toggle="tooltip" data-placement="left" title="Unrestricted library"\n                            class="fa fa-globe fa-lg"></span>\n                    <% }%>\n                    <button data-toggle="tooltip" data-placement="left" title="Modify \'<%- library.get("name") %>\'"\n                        class="btn btn-secondary btn-sm edit_library_btn" type="button"\n                        style="<% if(button_config.edit_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-pencil"></span> Edit\n                    </button>\n                    <a data-toggle="tooltip" data-placement="left"\n                        title="Permissions of \'<%- library.get("name") %>\'"\n                        href="#library/<%- library.get("id") %>/permissions">\n                        <button class="btn btn-secondary btn-sm permission_library_btn" type="button"\n                            style="<% if(button_config.permission_library_btn === false) { print("display:none;") } %>">\n                            <span class="fa fa-group"></span> Manage\n                        </button>\n                    </a>\n                    <button data-toggle="tooltip" data-placement="left" title="Save changes"\n                        class="btn btn-secondary btn-sm save_library_btn" type="button"\n                        style="<% if(button_config.save_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-floppy-o"></span> Save\n                    </button>\n                    <button data-toggle="tooltip" data-placement="left" title="Discard changes"\n                        class="btn btn-secondary btn-sm cancel_library_btn" type="button"\n                        style="<% if(button_config.cancel_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-times"></span> Cancel\n                    </button>\n                    <button data-toggle="tooltip" data-placement="left" title="Delete \'<%- library.get("name") %>\'"\n                        class="btn btn-secondary btn-sm delete_library_btn" type="button"\n                        style="<% if(button_config.delete_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-trash-o"></span> Delete\n                    </button>\n                    \x3c!-- For deleted libraries --\x3e\n                    <span data-toggle="tooltip" data-placement="left" title="Marked deleted"\n                        style="color:grey; <% if(button_config.undelete_library_btn === false) { print("display:none;") } %>"\n                        class="fa fa-ban fa-lg">\n                    </span>\n                    <button data-toggle="tooltip" data-placement="left" title="Undelete \'<%- library.get("name") %>\' "\n                        class="btn btn-secondary btn-sm undelete_library_btn" type="button"\n                        style="<% if(button_config.undelete_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-unlock"></span> Undelete\n                    </button>\n                </td>\n            </tr>')}})},it={LibraryListView:c.a.View.extend({el:"#libraries_element",events:{"click .sort-libraries-link":"sort_clicked"},defaults:{page_count:null,show_page:null,all_fetched:!1},initialize:function(t){this.options=s.default.defaults(this.options||{},t,this.defaults);var e=this;this.modal=null,this.collection=new tt.a.Libraries,this.collection.url="".concat(this.collection.urlRoot,"?deleted=false"),this.collection.fetch({success:function(){e.render()},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred.")}})},render:function(t){var e=Object(r.a)();this.options=s.default.extend(this.options,t),this.setElement("#libraries_element");var n=this.templateLibraryList(),i=null,o=null,l=function(t){return!0===t.get("public")};if(a()(".tooltip").hide(),void 0!==t&&(o=void 0!==t.models?t.models:null),null!==this.collection&&null===o)this.sortLibraries(),i=e.libraries.preferences.get("with_deleted")?this.collection.models:this.collection.where({deleted:!1}),e.libraries.preferences.get("without_restricted")&&(i=s.default.filter(i,l));else if(null!==o){if(e.libraries.preferences.get("with_deleted"))i=o;else{i=s.default.filter(o,(function(t){return!1===t.get("deleted")}))}e.libraries.preferences.get("without_restricted")&&(i=s.default.filter(i,l))}else i=[];(null===this.options.show_page||this.options.show_page<1)&&(this.options.show_page=1),this.options.total_libraries_count=i.length;var c=e.libraries.preferences.get("library_page_size")*(this.options.show_page-1);this.options.page_count=Math.ceil(this.options.total_libraries_count/e.libraries.preferences.get("library_page_size")),this.options.total_libraries_count>0&&c<this.options.total_libraries_count?(i=i.slice(c,c+e.libraries.preferences.get("library_page_size")),this.options.libraries_shown=i.length,e.libraries.preferences.get("library_page_size")*this.options.show_page>this.options.total_libraries_count+e.libraries.preferences.get("library_page_size")&&(i=[]),this.$el.html(n({length:1,order:e.libraries.preferences.get("sort_order"),search_term:e.libraries.libraryToolbarView.options.search_term})),e.libraries.libraryToolbarView.renderPaginator(this.options),this.renderRows(i)):(this.$el.html(n({length:0,order:e.libraries.preferences.get("sort_order"),search_term:e.libraries.libraryToolbarView.options.search_term})),e.libraries.libraryToolbarView.renderPaginator(this.options));var d=a()('#center [data-toggle="tooltip"]');d.attr("title")||(d.tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")),Object(et.b)("[data-linkify=true]")},fetchDeleted:function(){if(this.options.all_fetched)this.render();else{var t=this;this.collection.url="".concat(this.collection.urlRoot,"?deleted=true"),this.collection.fetch({remove:!1,success:function(){t.options.all_fetched=!0,t.render()},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred.")}})}},renderRows:function(t){for(var e=0;e<t.length;e++){var n=t[e];this.renderOne({library:n})}},renderOne:function(t){var e=t.library,n=new nt.LibraryRowView(e);this.$el.find("#library_list_body").append(n.el)},sort_clicked:function(){var t=Object(r.a)();"asc"===t.libraries.preferences.get("sort_order")?t.libraries.preferences.set({sort_order:"desc"}):t.libraries.preferences.set({sort_order:"asc"}),this.render()},sortLibraries:function(){var t=Object(r.a)();"name"===t.libraries.preferences.get("sort_by")&&("asc"===t.libraries.preferences.get("sort_order")?this.collection.sortLibraries("name","asc"):"desc"===t.libraries.preferences.get("sort_order")&&this.collection.sortLibraries("name","desc"))},searchLibraries:function(t){if(""!==a.a.trim(t)){var e;e=this.collection.search(t),this.options.searching=!0,this.render({models:e,show_page:1})}else this.options.searching=!1,this.render()},createLibraryInline:function(){var t=this;if(this.$el.find("tr.new-row").length)this.$el.find("tr.new-row textarea")[0].focus();else{var e=this.templateNewRow();this.$el.find("#library_list_body").closest("table").show(),this.$el.find("#library_list_body").prepend(e),this.$el.find("tr.new-row textarea")[0].focus(),this.$el.find("tr.new-row .save_library_btn").click((function(){t.createNewLibrary(t.$el.find("tr.new-row textarea")[0].value,t.$el.find("tr.new-row textarea")[1].value,t.$el.find("tr.new-row textarea")[2].value)})),this.$el.find("tr.new-row .cancel_library_btn").click((function(){t.$el.find("tr.new-row").remove()}))}},createNewLibrary:function(t,e,n){var i=this,o=Object(r.a)(),s={name:t,description:e,synopsis:n};""!==s.name?(new tt.a.Library).save(s,{success:function(t){o.libraries.libraryListView.collection.add(t),i.$el.find("tr.new-row").remove(),o.libraries.libraryListView.render(),a()('tr[data-id="'.concat(t.attributes.id,'"')).addClass("table-success").on("mouseover click",(function(){a()(this).removeClass("table-success")})),Z.a.success("Library created.")},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred.")}}):Z.a.error("Library's name is missing.");return!1},templateNewRow:function(){return s.default.template('<tr class="new-row">\n                    <td>\n                        <textarea name="input_library_name" rows="4" class="form-control input_library_name" placeholder="name" ></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_description" placeholder="description"></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_synopsis" placeholder="synopsis"></textarea>\n                    </td>\n                    <td class="right-center">\n                        <button data-toggle="tooltip" data-placement="left" title="Save changes"\n                            class="btn btn-secondary btn-sm save_library_btn" type="button">\n                            <span class="fa fa-floppy-o"></span> Save\n                        </button>\n                        <button data-toggle="tooltip" data-placement="left" title="Discard changes"\n                            class="btn btn-secondary btn-sm cancel_library_btn" type="button">\n                            <span class="fa fa-times"></span> Cancel\n                        </button>\n                    </td>     \n            </tr>')},templateLibraryList:function(){return s.default.template('<div class="library_container table-responsive">\n                <table class="grid table table-sm"\n                    <% if(length === 0) { %> style="display:none;" <% }%> >\n                    <thead>\n                        <th style="width:30%;">\n                            <a class="sort-libraries-link" title="Click to reverse order" href="javascript:void(0)" role="button">\n                                Name\n                            </a>\n                            <span title="Sorted alphabetically" class="fa fa-sort-alpha-<%- order %>"></span>\n                        </th>\n                        <th style="width:22%;">Description</th>\n                        <th style="width:22%;">Synopsis</th> \n                        <th style="width:26%;"></th>\n                    </thead>\n                    <tbody id="library_list_body">\n                    \x3c!-- library item views will attach here --\x3e\n                   </tbody>\n                </table>\n                    \n                <% if(length === 0) { %>\n                    <% if(search_term.length > 0) { %>\n                        <div>\n                            There are no libraries matching your search. Try different keyword.\n                        </div>\n                    <% } else{ %>\n                        <div>\n                            There are no libraries visible to you here. If you expected some to show up please consult the\n                            <a href="https://galaxyproject.org/data-libraries/#permissions" target="_blank">library security wikipage</a>.\n                        </div>\n                    <% }%>\n                <% }%>\n            </div>')}})},at={LibraryToolbarView:c.a.View.extend({el:"#center",defaults:{search_term:""},events:{"click #create_new_library_btn":"createLibraryInline","click #include_deleted_chk":"includeDeletedChecked","click #exclude_restricted_chk":"excludeRestrictedChecked","keydown .page_size":"changePageSize","blur .page_size":"changePageSize","keyup .library-search-input":"searchLibraries"},initialize:function(t){this.options=s.default.defaults(this.options||{},t,this.defaults),this.render()},render:function(){var t=Object(r.a)(),e=this.templateToolBar(),n=!1,i=!0;t.user&&(n=t.user.isAdmin(),i=t.user.isAnonymous()),this.$el.html(e({admin_user:n,anon_user:i,library_page_size:t.libraries.preferences.get("library_page_size")})),n&&(this.$el.find("#include_deleted_chk")[0].checked=t.libraries.preferences.get("with_deleted"),this.$el.find("#exclude_restricted_chk")[0].checked=t.libraries.preferences.get("without_restricted"))},renderPaginator:function(t){var e=Object(r.a)();this.options=s.default.extend(this.options,t);var n=this.templatePaginator(),i=this.templatePaginatorText();this.$el.find(".library-paginator > .paginator").html(n({show_page:parseInt(this.options.show_page),page_count:parseInt(this.options.page_count),total_libraries_count:this.options.total_libraries_count,libraries_shown:this.options.libraries_shown,library_page_size:e.libraries.preferences.get("library_page_size")})),this.$el.find(".library-paginator > .paginator-text").html(i({show_page:parseInt(this.options.show_page),page_count:parseInt(this.options.page_count),total_libraries_count:this.options.total_libraries_count,libraries_shown:this.options.libraries_shown,library_page_size:e.libraries.preferences.get("library_page_size")}))},createLibraryInline:function(){Object(r.a)().libraries.libraryListView.createLibraryInline()},changePageSize:function(t){if("focusout"===t.type||"keydown"===t.type&&13===t.keyCode){t.preventDefault();var e=Object(r.a)();e.libraries.preferences.set({library_page_size:parseInt(t.target.value)}),e.libraries.libraryListView.render({show_page:1})}},includeDeletedChecked:function(t){var e=Object(r.a)();t.target.checked?(e.libraries.preferences.set({with_deleted:!0}),e.libraries.libraryListView.fetchDeleted()):(e.libraries.preferences.set({with_deleted:!1}),e.libraries.libraryListView.render())},excludeRestrictedChecked:function(t){var e=Object(r.a)();t.target.checked?e.libraries.preferences.set({without_restricted:!0}):e.libraries.preferences.set({without_restricted:!1}),e.libraries.libraryListView.render()},searchLibraries:function(t){var e=Object(r.a)(),n=a()(".library-search-input").val();this.options.search_term=n,e.libraries.libraryListView.searchLibraries(n)},templateToolBar:function(){return s.default.template('<div class="library_style_container">\n                <div class="d-flex align-items-center mb-2 library-toolbar">\n                    <a class="btn btn-secondary mr-1" data-toggle="tooltip" data-placement="top" title="Go to first page" href="#" role="button">\n                        <span class="fa fa-home fa-lg"/>\n                    </a>\n                    <% if(admin_user === true) { %>\n                        <button data-toggle="tooltip" data-placement="top" title="Create new library" id="create_new_library_btn" class="mr-1 btn btn-secondary" type="button">\n                            <span class="fa fa-plus" /> Library\n                        </button>\n                    <% } %>\n                    <div class="d-flex align-items-center mr-1" />\n                        <form class="form-inline mr-1">\n                            <input type="text" id="library-filter" class="form-control library-search-input mr-1" placeholder="Search" size="15">\n                            <% if(admin_user === true) { %>\n                                <div class="form-check mr-1">\n                                    <input class="form-check-input" id="include_deleted_chk" type="checkbox"/>\n                                    <label class="form-check-label" for="include_deleted_chk">include deleted</label>\n                                </div>\n                                <div class="form-check mr-1">\n                                    <input class="form-check-input" id="exclude_restricted_chk" type="checkbox"/>\n                                    <label class="form-check-label" for="exclude_restricted_chk">exclude restricted</label>\n                                </div>\n                            <% } %>\n                        </form>\n                    </div>\n                    <div id="libraries_element" />\n                    <div class="d-flex justify-content-center align-items-center library-paginator mt-2 mb-2">\n                        <ul class="pagination paginator mr-1" />\n                        <input style="width: initial;" min="0" max="999" class="page_size form-control" type="number" value="<%- library_page_size %>" />\n                        <span class="text-muted ml-1 paginator-text" />\n                    </div>\n                </div>\n            </div>')},templatePaginator:function(){return s.default.template('\n                        <% if ( ( show_page - 1 ) > 0 ) { %>\n                            <% if ( ( show_page - 1 ) > page_count ) { %> \x3c!-- we are on higher page than total page count --\x3e\n                               <li class="page-item">\n                                    <a class="page-link" href="#page/1">\n                                        <span class="fa fa-angle-double-left"></span>\n                                    </a>\n                                </li>\n                                <li class="page-item disabled">\n                                    <a class="page-link" href="#page/<% print( show_page ) %>">\n                                        <% print( show_page - 1 ) %>\n                                    </a>\n                                </li>\n                            <% } else { %>\n                                <li class="page-item">\n                                    <a class="page-link" href="#page/1">\n                                        <span class="fa fa-angle-double-left"></span>\n                                    </a>\n                                </li>\n                                <li class="page-item">\n                                    <a class="page-link" href="#page/<% print( show_page - 1 ) %>">\n                                        <% print( show_page - 1 ) %>\n                                    </a>\n                                </li>\n                            <% } %>\n                        <% } else { %> \x3c!-- we are on the first page --\x3e\n                           <li class="page-item disabled">\n                                <a class="page-link" href="#page/1">\n                                    <span class="fa fa-angle-double-left"></span>\n                                </a>\n                            </li>\n                            <li class="page-item disabled">\n                                <a class="page-link" href="#page/<% print( show_page ) %>">\n                                    <% print( show_page - 1 ) %>\n                                </a>\n                            </li>\n                        <% } %>\n                            <li class="page-item active">\n                                <a class="page-link" href="#page/<% print( show_page ) %>">\n                                    <% print( show_page ) %>\n                                </a>\n                            </li>\n                        <% if ( ( show_page ) < page_count ) { %>\n                            <li class="page-item">\n                                <a class="page-link" href="#page/<% print( show_page + 1 ) %>">\n                                    <% print( show_page + 1 ) %>\n                                </a>\n                            </li>\n                            <li class="page-item">\n                                <a class="page-link" href="#page/<% print( page_count ) %>">\n                                    <span class="fa fa-angle-double-right"></span>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="page-item disabled">\n                                <a class="page-link" href="#page/<% print( show_page  ) %>">\n                                    <% print( show_page + 1 ) %>\n                                </a>\n                            </li>\n                            <li class="page-item disabled">\n                                <a class="page-link" href="#page/<% print( page_count ) %>">\n                                    <span class="fa fa-angle-double-right"></span>\n                                </a>\n                            </li>\n                        <% } %>\n                ')},templatePaginatorText:function(){return s.default.template("per page, <%- total_libraries_count %> total")}})},rt=n(49),ot=n(99),st={LibraryDatasetView:c.a.View.extend({el:"#center",model:null,options:{},defaults:{edit_mode:!1},events:{"click .toolbtn_modify_dataset":"enableModification","click .toolbtn_cancel_modifications":"render","click .toolbtn-download-dataset":"downloadDataset","click .toolbtn-import-dataset":"importIntoHistory","click .copy-link-to-clipboard":"copyToClipboard","click .make-private":"makeDatasetPrivate","click .remove-restrictions":"removeDatasetRestrictions","click .toolbtn_save_permissions":"savePermissions","click .toolbtn_save_modifications":"saveModifications","click .toolbtn_detect_datatype":"detectDatatype"},select_genome:null,select_extension:null,list_extensions:[],auto:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically. If your file is not detected properly as one of the known formats, it most likely means that it has some format problems (e.g., different number of columns on different rows). You can still coerce the system to set your data to the format you think it should be. You can also upload compressed files, which will automatically be decompressed."},list_genomes:[],initialize:function(t){this.options=s.default.extend(this.options,t),this.fetchExtAndGenomes(),this.options.id&&this.fetchDataset()},fetchDataset:function(t){var e=Object(r.a)();this.options=s.default.extend(this.options,t),this.model=new tt.a.Item({id:this.options.id});var n=this;this.model.fetch({success:function(){n.options.show_permissions?n.showPermissions():n.options.show_version?n.fetchVersion():n.render()},error:function(t,n){void 0!==n.responseJSON?Z.a.error("".concat(n.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){e.libraries.library_router.back()}}):Z.a.error("An error occurred. Click this to go back.","",{onclick:function(){e.libraries.library_router.back()}})}})},render:function(t){this.options=s.default.extend(this.options,t),a()(".tooltip").remove();var e=this.templateDataset();this.$el.html(e({item:this.model,rootPath:Object(d.getAppRoot)()})),a()(".peek").html(this.model.get("peek")),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),this._mountNametags("initialize")},_mountNametags:function(t){var e=this.$el.find(".nametags")[0];if(e){var n=this.model.get("tags");"string"==typeof n&&this.model.set({tags:n.split(", ")});var i=this.model.attributes,a=i.id,r=i.model_class,o=i.tags,s="".concat(r,"-").concat(a);Object(ot.b)({storeKey:s,tags:o},e)}},fetchVersion:function(t){this.options=s.default.extend(this.options,t);var e=this;this.options.ldda_id?(this.ldda=new tt.a.Ldda({id:this.options.ldda_id}),this.ldda.url="".concat(this.ldda.urlRoot+this.model.id,"/versions/").concat(this.ldda.id),this.ldda.fetch({success:function(){e.renderVersion()},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred.")}})):(this.render(),Z.a.error("Library dataset version requested but no id provided."))},renderVersion:function(){a()(".tooltip").remove();var t=this.templateVersion();this.$el.html(t({item:this.model,ldda:this.ldda,rootPath:Object(d.getAppRoot)()})),a()(".peek").html(this.ldda.get("peek"))},enableModification:function(){a()(".tooltip").remove();var t=this.templateModifyDataset();this.$el.html(t({item:this.model,rootPath:Object(d.getAppRoot)()})),this.renderSelectBoxes({genome_build:this.model.get("genome_build"),file_ext:this.model.get("file_ext")}),a()(".peek").html(this.model.get("peek")),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),this._mountNametags("listener")},downloadDataset:function(){var t="".concat(Object(d.getAppRoot)(),"api/libraries/datasets/download/uncompressed"),e={ld_ids:this.id};this.processDownload(t,e)},processDownload:function(t,e,n){if(t&&e){e="string"==typeof e?e:a.a.param(e);var i="";a.a.each(e.split("&"),(function(){var t=this.split("=");i+='<input type="hidden" name="'.concat(t[0],'" value="').concat(t[1],'" />')})),a()('<form action="'.concat(t,'" method="').concat(n||"post",'">').concat(i,"</form>")).appendTo("body").submit().remove(),Z.a.info("Your download will begin soon.")}},importIntoHistory:function(){this.refreshUserHistoriesList((function(t){var e=Object(r.a)(),n=t.templateBulkImportInModal();t.modal=e.modal,t.modal.show({closing_events:!0,title:h()("Import into History"),body:n({histories:t.histories.models}),buttons:{Import:function(){t.importCurrentIntoHistory()},Close:function(){e.modal.hide()}}})}))},refreshUserHistoriesList:function(t){var e=this;this.histories=new tt.a.GalaxyHistories,this.histories.fetch({success:function(n){0===n.length?Z.a.warning("You have to create history first. Click this to do so.","",{onclick:function(){window.location=Object(d.getAppRoot)()}}):t(e)},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred.")}})},importCurrentIntoHistory:function(){this.modal.disableButton("Import");var t=this.modal.$("input[name=history_name]").val(),e=this;if(""!==t)a.a.post("".concat(Object(d.getAppRoot)(),"api/histories"),{name:t}).done((function(t){e.processImportToHistory(t.id)})).fail((function(t,e,n){Z.a.error("An error occurred.")})).always((function(){e.modal.enableButton("Import")}));else{var n=a()(this.modal.$el).find("select[name=dataset_import_single] option:selected").val();this.processImportToHistory(n),this.modal.enableButton("Import")}},processImportToHistory:function(t){var e=Object(r.a)(),n=new tt.a.HistoryItem;n.url="".concat(n.urlRoot+t,"/contents"),a.a.getJSON("".concat(Object(d.getAppRoot)(),"history/set_as_current?id=").concat(t)),n.save({content:this.id,source:"library"},{success:function(){e.modal.hide(),Z.a.success("Dataset imported. Click this to start analyzing it.","",{onclick:function(){window.location=Object(d.getAppRoot)()}})},error:function(t,e){void 0!==e.responseJSON?Z.a.error("Dataset not imported. ".concat(e.responseJSON.err_msg)):Z.a.error("An error occurred. Dataset not imported. Please try again.")}})},showPermissions:function(t){var e=Object(r.a)(),n=this.templateDatasetPermissions(),i=this;this.options=s.default.extend(this.options,t),a()(".tooltip").remove(),void 0!==this.options.fetched_permissions&&(0===this.options.fetched_permissions.access_dataset_roles.length?this.model.set({is_unrestricted:!0}):this.model.set({is_unrestricted:!1})),this.$el.html(n({item:this.model,is_admin:e.config.is_admin_user,rootPath:Object(d.getAppRoot)()})),a.a.get("".concat(Object(d.getAppRoot)(),"api/libraries/datasets/").concat(i.id,"/permissions?scope=current")).done((function(t){i.prepareSelectBoxes({fetched_permissions:t,is_admin:e.config.is_admin_user})})).fail((function(){Z.a.error("An error occurred while attempting to fetch dataset permissions.")})),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")},_serializeRoles:function(t){for(var e=[],n=0;n<t.length;n++)e.push("".concat(t[n][1],":").concat(t[n][0].replace(":"," ").replace(","," &")));return e},prepareSelectBoxes:function(t){this.options=s.default.extend(this.options,t),this.accessSelectObject=new rt.a.View(this._generate_select_options({selector:"access_perm",initialData:this._serializeRoles(this.options.fetched_permissions.access_dataset_roles)})),this.modifySelectObject=new rt.a.View(this._generate_select_options({selector:"modify_perm",initialData:this._serializeRoles(this.options.fetched_permissions.modify_item_roles)})),this.manageSelectObject=new rt.a.View(this._generate_select_options({selector:"manage_perm",initialData:this._serializeRoles(this.options.fetched_permissions.manage_dataset_roles)}))},_generate_select_options:function(t){var e={minimumInputLength:0,multiple:!0,placeholder:"Click to select a role",formatResult:function(t){return"".concat(t.name," type: ").concat(t.type)},formatSelection:function(t){return t.name},initSelection:function(t,e){var n=[];a()(t.val().split(",")).each((function(){var t=this.split(":");n.push({id:t[0],name:t[1]})})),e(n)},dropdownCssClass:"bigdrop"};return e.container=this.$el.find("#".concat(t.selector)),e.css=t.selector,e.initialData=t.initialData.join(","),e.ajax={url:"".concat(Object(d.getAppRoot)(),"api/libraries/datasets/").concat(this.id,"/permissions?scope=available"),dataType:"json",quietMillis:100,data:function(t,e){return{q:t,page_limit:10,page:e}},results:function(t,e){var n=10*e<t.total;return{results:t.roles,more:n}}},e},detectDatatype:function(t){var e=this.model;e.set("file_ext","auto"),this._submitModification(e)},saveModifications:function(t){var e=!1,n=this.model,i=this.$el.find(".input_dataset_name").val();if(void 0!==i&&i!==n.get("name")){if(!(i.length>0))return void Z.a.warning("Library dataset name has to be at least 1 character long.");n.set("name",i),e=!0}var a=this.$el.find(".input_dataset_misc_info").val();void 0!==a&&a!==n.get("misc_info").trim()&&(n.set("misc_info",a),e=!0);var r=this.$el.find(".input_dataset_message").val();void 0!==r&&r!==n.get("message")&&(n.set("message",r),e=!0);var o=this.select_genome.$el.select2("data").id;void 0!==o&&o!==n.get("genome_build")&&(n.set("genome_build",o),e=!0);var s=this.select_extension.$el.select2("data").id;void 0!==s&&s!==n.get("file_ext")&&(n.set("file_ext",s),e=!0),e?this._submitModification(n):(this.render(),Z.a.info("Nothing has changed."))},_submitModification:function(t){var e=this;t.save(null,{patch:!0,success:function(t){e.render(),Z.a.success("Changes to library dataset saved.")},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred while attempting to update the library dataset.")}})},copyToClipboard:function(t){t.preventDefault();var e=c.a.history.location.href;-1!==e.lastIndexOf("/permissions")&&(e=e.substr(0,e.lastIndexOf("/permissions"))),window.prompt("Copy to clipboard: Ctrl+C, Enter",e)},makeDatasetPrivate:function(){var t=this;a.a.post("".concat(Object(d.getAppRoot)(),"api/libraries/datasets/").concat(t.id,"/permissions?action=make_private")).done((function(e){t.model.set({is_unrestricted:!1}),t.showPermissions({fetched_permissions:e}),Z.a.success("The dataset is now private to you.")})).fail((function(){Z.a.error("An error occurred while attempting to make dataset private.")}))},removeDatasetRestrictions:function(){var t=this;a.a.post("".concat(Object(d.getAppRoot)(),"api/libraries/datasets/").concat(t.id,"/permissions?action=remove_restrictions")).done((function(e){t.model.set({is_unrestricted:!0}),t.showPermissions({fetched_permissions:e}),Z.a.success("Access to this dataset is now unrestricted.")})).fail((function(){Z.a.error("An error occurred while attempting to make dataset unrestricted.")}))},_extractIds:function(t){for(var e=[],n=t.length-1;n>=0;n--)e.push(t[n].id);return e},savePermissions:function(t){var e=this,n=this._extractIds(this.accessSelectObject.$el.select2("data")),i=this._extractIds(this.manageSelectObject.$el.select2("data")),r=this._extractIds(this.modifySelectObject.$el.select2("data"));a.a.post("".concat(Object(d.getAppRoot)(),"api/libraries/datasets/").concat(e.id,"/permissions?action=set_permissions"),{"access_ids[]":n,"manage_ids[]":i,"modify_ids[]":r}).done((function(t){e.showPermissions({fetched_permissions:t}),Z.a.success("Permissions saved.")})).fail((function(){Z.a.error("An error occurred while attempting to set dataset permissions.")}))},fetchExtAndGenomes:function(){var t=this;0==this.list_genomes.length&&m.b.get({url:"".concat(Object(d.getAppRoot)(),"api/datatypes?extension_only=False"),success:function(e){for(var n in e)t.list_extensions.push({id:e[n].extension,text:e[n].extension,description:e[n].description,description_url:e[n].description_url});t.list_extensions.sort((function(t,e){return t.id>e.id?1:t.id<e.id?-1:0})),t.list_extensions.unshift(t.auto)}}),0==this.list_extensions.length&&m.b.get({url:"".concat(Object(d.getAppRoot)(),"api/genomes"),success:function(e){for(var n in e)t.list_genomes.push({id:e[n][1],text:e[n][0]});t.list_genomes.sort((function(t,e){return t.id>e.id?1:t.id<e.id?-1:0}))}})},renderSelectBoxes:function(t){var e="?",n="auto";void 0!==t&&(void 0!==t.genome_build&&(e=t.genome_build),void 0!==t.file_ext&&(n=t.file_ext)),this.select_genome=new rt.a.View({css:"dataset-genome-select",data:this.list_genomes,container:this.$el.find("#dataset_genome_select"),value:e}),this.select_extension=new rt.a.View({css:"dataset-extension-select",data:this.list_extensions,container:this.$el.find("#dataset_extension_select"),value:n})},templateDataset:function(){return s.default.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n                <div class="d-flex mb-2">\n                    <button data-toggle="tooltip" data-placement="top" title="Download dataset"\n                        class="btn btn-secondary toolbtn-download-dataset toolbar-item mr-1" type="button">\n                        <span class="fa fa-download"></span>\n                        &nbsp;Download\n                    </button>\n                    <button data-toggle="tooltip" data-placement="top" title="Import dataset into history"\n                        class="btn btn-secondary toolbtn-import-dataset toolbar-item mr-1" type="button">\n                        <span class="fa fa-book"></span>\n                        &nbsp;to History\n                    </button>\n                    <% if (item.get("can_user_modify")) { %>\n                        <button data-toggle="tooltip" data-placement="top" title="Modify library item"\n                            class="btn btn-secondary toolbtn_modify_dataset toolbar-item mr-1" type="button">\n                            <span class="fa fa-pencil"></span>\n                            &nbsp;Modify\n                        </button>\n                        <button data-toggle="tooltip" data-placement="top"\n                            title="Attempt to detect the format of dataset"\n                            class="btn btn-secondary toolbtn_detect_datatype toolbar-item mr-1" type="button">\n                            <span class="fa fa-undo"></span>\n                            &nbsp;Auto-detect datatype\n                        </button>\n                    <% } %>\n                    <% if (item.get("can_user_manage")) { %>\n                        <a href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>/permissions">\n                            <button data-toggle="tooltip" data-placement="top" title="Manage permissions"\n                                class="btn btn-secondary toolbtn_change_permissions toolbar-item mr-1"\n                                type="button">\n                                <span class="fa fa-group"></span>\n                                &nbsp;Permissions\n                            </button>\n                        </a>\n                    <% } %>\n                </div>\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="#">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="<% rootPath %>folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here"><%- path_item[1] %></span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <% if (item.get("is_unrestricted")) { %>\n                    <div>\n                        This dataset is unrestricted so everybody with the link can access it.\n                        Just share <span class="copy-link-to-clipboard"><a href="javascript:void(0)">this page</a></span>.\n                    </div>\n                <% } %>\n\n                \x3c!-- TABLE START --\x3e\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th class="dataset-first-column" scope="row" id="id_row"\n                                data-id="<%= _.escape(item.get("ldda_id")) %>">\n                                Name\n                            </th>\n                            <td><%= _.escape(item.get("name")) %></td>\n                        </tr>\n                        <% if (item.get("file_ext")) { %>\n                            <tr>\n                                <th scope="row">Data type</th>\n                                <td><%= _.escape(item.get("file_ext")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("genome_build")) { %>\n                            <tr>\n                                <th scope="row">Genome build</th>\n                                <td><%= _.escape(item.get("genome_build")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("file_size")) { %>\n                            <tr>\n                                <th scope="row">Size</th>\n                                <td><%= _.escape(item.get("file_size")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("update_time")) { %>\n                            <tr>\n                                <th scope="row">Date last updated (UTC)</th>\n                                <td><%= _.escape(item.get("update_time")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("date_uploaded")) { %>\n                            <tr>\n                                <th scope="row">Date uploaded (UTC)</th>\n                                <td><%= _.escape(item.get("date_uploaded")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("uploaded_by")) { %>\n                            <tr>\n                                <th scope="row">Uploaded by</th>\n                                <td><%= _.escape(item.get("uploaded_by")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_data_lines")) { %>\n                            <tr>\n                                <th scope="row">Data Lines</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_data_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_comment_lines")) { %>\n                            <tr>\n                                <th scope="row">Comment Lines</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_comment_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_columns")) { %>\n                            <tr>\n                                <th scope="row">Number of Columns</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_columns")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_column_types")) { %>\n                            <tr>\n                                <th scope="row">Column Types</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_column_types")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("message")) { %>\n                            <tr>\n                                <th scope="row">Description</th>\n                                <td scope="row"><%= _.escape(item.get("message")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("misc_blurb")) { %>\n                            <tr>\n                                <th scope="row">Misc. blurb</th>\n                                <td scope="row"><%= _.escape(item.get("misc_blurb")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("misc_info")) { %>\n                            <tr>\n                                <th scope="row">Misc. info</th>\n                                <td scope="row"><%= _.escape(item.get("misc_info")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                        <% if ( item.get("uuid") !== "ok" ) { %>\n                            <tr>\n                                <th scope="row">UUID</th>\n                                <td scope="row"><%= _.escape(item.get("uuid")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if ( item.get("state") !== "ok" ) { %>\n                            <tr>\n                                <th scope="row">State</th>\n                                <td scope="row"><%= _.escape(item.get("state")) %></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <% if (item.get("job_stderr")) { %>\n                        <h4>Job Standard Error</h4>\n                        <pre class="code">\n                            <%= _.escape(item.get("job_stderr")) %>\n                        </pre>\n                    <% } %>\n                    <% if (item.get("job_stdout")) { %>\n                        <h4>Job Standard Output</h4>\n                        <pre class="code">\n                            <%= _.escape(item.get("job_stdout")) %>\n                        </pre>\n                    <% } %>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                    <% if (item.get("has_versions")) { %>\n                        <div>\n                            <h3>Expired versions:</h3>\n                            <ul>\n                                <% _.each(item.get("expired_versions"), function(version) { %>\n                                    <li>\n                                        <a title="See details of this version"\n                                            href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>/versions/<%- version[0] %>">\n                                            <%- version[1] %>\n                                        </a>\n                                    </li>\n                                <% }) %>\n                            <ul>\n                        </div>\n                    <% } %>\n\n                \x3c!-- TABLE END --\x3e\n                </div>\n\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateVersion:function(){return s.default.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n                <div class="d-flex mb-2">\n                    <a href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>">\n                        <button data-toggle="tooltip" data-placement="top" title="Go to latest dataset"\n                            class="btn btn-secondary toolbar-item mr-1" type="button">\n                            <span class="fa fa-caret-left fa-lg"></span>\n                            &nbsp;Latest dataset\n                        </button>\n                    </a>\n                </div>\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="#">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="<% rootPath %>folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here">\n                                    <%- path_item[1] %>\n                                </span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <div class="alert alert-warning">\n                    This is an expired version of the library dataset: <%= _.escape(item.get("name")) %>\n                </div>\n\n                \x3c!-- DATASET START --\x3e\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th scope="row" id="id_row" data-id="<%= _.escape(ldda.id) %>">Name</th>\n                            <td><%= _.escape(ldda.get("name")) %></td>\n                        </tr>\n                        <% if (ldda.get("file_ext")) { %>\n                            <tr>\n                                <th scope="row">Data type</th>\n                                <td><%= _.escape(ldda.get("file_ext")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("genome_build")) { %>\n                            <tr>\n                                <th scope="row">Genome build</th>\n                                <td><%= _.escape(ldda.get("genome_build")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("file_size")) { %>\n                            <tr>\n                                <th scope="row">Size</th>\n                                <td><%= _.escape(ldda.get("file_size")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("update_time")) { %>\n                            <tr>\n                                <th scope="row">Date last updated (UTC)</th>\n                                <td><%= _.escape(ldda.get("update_time")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("date_uploaded")) { %>\n                            <tr>\n                                <th scope="row">Date uploaded (UTC)</th>\n                                <td><%= _.escape(ldda.get("date_uploaded")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("uploaded_by")) { %>\n                            <tr>\n                                <th scope="row">Uploaded by</th>\n                                <td><%= _.escape(ldda.get("uploaded_by")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_data_lines")) { %>\n                            <tr>\n                                <th scope="row">Data Lines</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_data_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_comment_lines")) { %>\n                            <tr>\n                                <th scope="row">Comment Lines</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_comment_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_columns")) { %>\n                            <tr>\n                                <th scope="row">Number of Columns</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_columns")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_column_types")) { %>\n                            <tr>\n                                <th scope="row">Column Types</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_column_types")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("message")) { %>\n                            <tr>\n                                <th scope="row">Message</th>\n                                <td scope="row"><%= _.escape(ldda.get("message")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("misc_blurb")) { %>\n                            <tr>\n                                <th scope="row">Miscellaneous blurb</th>\n                                <td scope="row"><%= _.escape(ldda.get("misc_blurb")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("misc_info")) { %>\n                            <tr>\n                                <th scope="row">Miscellaneous information</th>\n                                <td scope="row"><%= _.escape(ldda.get("misc_info")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                \x3c!-- DATASET END --\x3e\n                </div>\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateModifyDataset:function(){return s.default.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="#">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="<% rootPath %>folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here">\n                                    <%- path_item[1] %>\n                                </span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th class="dataset-first-column" scope="row" id="id_row"\n                                data-id="<%= _.escape(item.get("ldda_id")) %>">\n                                Name\n                            </th>\n                            <td>\n                                <input class="input_dataset_name form-control" type="text"\n                                    placeholder="name" value="<%= _.escape(item.get("name")) %>">\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Data type</th>\n                            <td>\n                                <span id="dataset_extension_select" class="dataset-extension-select" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Genome build</th>\n                            <td>\n                                <span id="dataset_genome_select" class="dataset-genome-select" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Size</th>\n                            <td><%= _.escape(item.get("file_size")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Date last updated (UTC)</th>\n                            <td><%= _.escape(item.get("update_time")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Date uploaded (UTC)</th>\n                            <td><%= _.escape(item.get("date_uploaded")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Uploaded by</th>\n                            <td><%= _.escape(item.get("uploaded_by")) %></td>\n                        </tr>\n                        <tr scope="row">\n                            <th scope="row">Data Lines</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_data_lines")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Comment Lines</th>\n                            <% if (item.get("metadata_comment_lines") === "") { %>\n                                <td scope="row"><%= _.escape(item.get("metadata_comment_lines")) %></td>\n                            <% } else { %>\n                                <td scope="row">unknown</td>\n                            <% } %>\n                        </tr>\n                        <tr>\n                            <th scope="row">Number of Columns</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_columns")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Column Types</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_column_types")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Message</th>\n                            <td scope="row"><input class="input_dataset_message form-control" type="text"\n                                placeholder="message" value="<%= _.escape(item.get("message")) %>"></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Misc. blurb</th>\n                            <td scope="row"><%= _.escape(item.get("misc_blurb")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Misc. information</th>\n                            <td><input class="input_dataset_misc_info form-control" type="text"\n                                placeholder="info" value="<%= _.escape(item.get("misc_info")) %>"></td>\n                        </tr>\n\n                        \x3c!-- TODO: add functionality to modify tags here --\x3e\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                </div>\n                <div class="d-flex">\n                    <button data-toggle="tooltip" data-placement="top" title="Cancel modifications"\n                        class="btn btn-secondary toolbtn_cancel_modifications toolbar-item mr-1" type="button">\n                        <span class="fa fa-times"></span>\n                        &nbsp;Cancel\n                    </button>\n                    <button data-toggle="tooltip" data-placement="top" title="Save modifications"\n                        class="btn btn-secondary toolbtn_save_modifications toolbar-item mr-1" type="button">\n                        <span class="fa fa-floppy-o"></span>\n                        &nbsp;Save\n                    </button>\n                </div>\n\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateDatasetPermissions:function(){return s.default.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n                <div class="d-flex mb-2">\n                    <a href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>">\n                        <button data-toggle="tooltip" data-placement="top" title="Go back to dataset"\n                            class="btn btn-secondary toolbar-item mr-1" type="button">\n                            <span class="fa fa-file-o"></span>\n                            &nbsp;Dataset Details\n                        </button>\n                    </a>\n                </div>\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="#">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="<% rootPath %>folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here">\n                                    <%- path_item[1] %>\n                                </span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n\n                <h1>Dataset: <%= _.escape(item.get("name")) %></h1>\n                <div class="alert alert-warning">\n                    <% if (is_admin) { %>\n                        You are logged in as an <strong>administrator</strong> therefore you can manage any dataset\n                        on this Galaxy instance. Please make sure you understand the consequences.\n                    <% } else { %>\n                        You can assign any number of roles to any of the following permission types. However please\n                        read carefully the implications of such actions.\n                    <% } %>\n                </div>\n                <div class="dataset_table">\n                    <h2>Library-related permissions</h2>\n                    <h4>Roles that can modify the library item</h4>\n                    <div id="modify_perm" class="modify_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can modify name, metadata,\n                        and other information about this library item.\n                    </div>\n                    <hr/>\n                    <h2>Dataset-related permissions</h2>\n                    <div class="alert alert-warning">\n                        Changes made below will affect <strong>every</strong> library item that was created from\n                        this dataset and also every history this dataset is part of.\n                    </div>\n                    <% if (!item.get("is_unrestricted")) { %>\n                        <p>\n                            You can <span class="remove-restrictions">\n                            <a href="javascript:void(0)">remove all access restrictions</a></span> on this dataset.\n                        </p>\n                    <% } else { %>\n                        <p>\n                            You can <span class="make-private">\n                            <a href="javascript:void(0)">make this dataset private</a></span> to you.</p>\n                    <% } %>\n                    <h4>Roles that can access the dataset</h4>\n                    <div id="access_perm" class="access_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User has to have <strong>all these roles</strong> in order to access this dataset.\n                        Users without access permission <strong>cannot</strong> have other permissions on this dataset.\n                        If there are no access roles set on the dataset it is considered <strong>unrestricted</strong>.\n                    </div>\n                    <h4>Roles that can manage permissions on the dataset</h4>\n                    <div id="manage_perm" class="manage_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can manage permissions of this dataset.\n                        If you remove yourself you will lose the ability manage this dataset unless you are an admin.\n                    </div>\n                    <button data-toggle="tooltip" data-placement="top" title="Save modifications made on this page"\n                        class="btn btn-secondary toolbtn_save_permissions type="button">\n                        <span class="fa fa-floppy-o"></span>\n                        &nbsp;Save\n                    </button>\n                </div>\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateBulkImportInModal:function(){return s.default.template('<div>\n                <div class="library-modal-item">\n                    Select history:\n                    <select id="dataset_import_single" name="dataset_import_single"\n                        style="width:50%; margin-bottom: 1em;" autofocus>\n                        <% _.each(histories, function(history) { %>\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library-modal-item">or create new:\n                    <input type="text" name="history_name" value="" placeholder="name of the new history"\n                        style="width:50%;" />\n                </div>\n            </div>')}})},lt={LibraryView:c.a.View.extend({el:"#center",model:null,options:{},events:{"click .toolbtn_save_permissions":"savePermissions"},initialize:function(t){this.options=s.default.extend(this.options,t),this.options.id&&this.fetchLibrary()},fetchLibrary:function(t){this.options=s.default.extend(this.options,t),this.model=new tt.a.Library({id:this.options.id});var e=this;this.model.fetch({success:function(){e.options.show_permissions&&e.showPermissions()},error:function(t,e){var n=Object(r.a)();void 0!==e.responseJSON?Z.a.error("".concat(e.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){n.libraries.library_router.back()}}):Z.a.error("An error occurred. Click this to go back.","",{onclick:function(){n.libraries.library_router.back()}})}})},showPermissions:function(t){this.options=s.default.extend(this.options,t),a()(".tooltip").remove(),void 0!==this.options.fetched_permissions&&(0===this.options.fetched_permissions.access_library_role_list.length?this.model.set({is_unrestricted:!0}):this.model.set({is_unrestricted:!1}));var e=!1,n=Object(r.a)();n.user&&(e=n.user.isAdmin());var i=this.templateLibraryPermissions();this.$el.html(i({library:this.model,is_admin:e}));var o=this;a.a.get("".concat(Object(d.getAppRoot)(),"api/libraries/").concat(o.id,"/permissions?scope=current")).done((function(t){o.prepareSelectBoxes({fetched_permissions:t})})).fail((function(){Z.a.error("An error occurred while attempting to fetch library permissions.")})),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")},_serializeRoles:function(t){for(var e=[],n=0;n<t.length;n++)e.push("".concat(t[n][1],":").concat(t[n][0]));return e},prepareSelectBoxes:function(t){this.options=s.default.extend(this.options,t);var e=this.options.fetched_permissions,n=this._serializeRoles(e.access_library_role_list),i=this._serializeRoles(e.add_library_item_role_list),a=this._serializeRoles(e.manage_library_role_list),r=this._serializeRoles(e.modify_library_role_list);this.accessSelectObject=new rt.a.View(this._createSelectOptions(this,"access_perm",n,!0)),this.addSelectObject=new rt.a.View(this._createSelectOptions(this,"add_perm",i,!1)),this.manageSelectObject=new rt.a.View(this._createSelectOptions(this,"manage_perm",a,!1)),this.modifySelectObject=new rt.a.View(this._createSelectOptions(this,"modify_perm",r,!1))},_createSelectOptions:function(t,e,n,i){return i=!0===i&&i,{minimumInputLength:0,css:e,multiple:!0,placeholder:"Click to select a role",container:t.$el.find("#".concat(e)),ajax:{url:"".concat(Object(d.getAppRoot)(),"api/libraries/").concat(t.id,"/permissions?scope=available&is_library_access=").concat(i),dataType:"json",quietMillis:100,data:function(t,e){return{q:t,page_limit:10,page:e}},results:function(t,e){var n=10*e<t.total;return{results:t.roles,more:n}}},formatResult:function(t){return"".concat(t.name," type: ").concat(t.type)},formatSelection:function(t){return t.name},initSelection:function(t,e){var n=[];a()(t.val().split(",")).each((function(){var t=this.split(":");n.push({id:t[0],name:t[1]})})),e(n)},initialData:n,dropdownCssClass:"bigdrop"}},makeDatasetPrivate:function(){var t=this;a.a.post("".concat(Object(d.getAppRoot)(),"api/libraries/datasets/").concat(t.id,"/permissions?action=make_private")).done((function(e){t.model.set({is_unrestricted:!1}),t.showPermissions({fetched_permissions:e}),Z.a.success("The dataset is now private to you.")})).fail((function(){Z.a.error("An error occurred while attempting to make dataset private.")}))},removeDatasetRestrictions:function(){var t=this;a.a.post("".concat(Object(d.getAppRoot)(),"api/libraries/datasets/").concat(t.id,"/permissions?action=remove_restrictions")).done((function(e){t.model.set({is_unrestricted:!0}),t.showPermissions({fetched_permissions:e}),Z.a.success("Access to this dataset is now unrestricted.")})).fail((function(){Z.a.error("An error occurred while attempting to make dataset unrestricted.")}))},_extractIds:function(t){for(var e=[],n=t.length-1;n>=0;n--)e.push(t[n].id);return e},savePermissions:function(t){var e=this,n=this._extractIds(this.accessSelectObject.$el.select2("data")),i=this._extractIds(this.addSelectObject.$el.select2("data")),r=this._extractIds(this.manageSelectObject.$el.select2("data")),o=this._extractIds(this.modifySelectObject.$el.select2("data"));a.a.post("".concat(Object(d.getAppRoot)(),"api/libraries/").concat(e.id,"/permissions?action=set_permissions"),{"access_ids[]":n,"add_ids[]":i,"manage_ids[]":r,"modify_ids[]":o}).done((function(t){e.showPermissions({fetched_permissions:t}),Z.a.success("Permissions saved.")})).fail((function(){Z.a.error("An error occurred while attempting to set library permissions.")}))},templateLibraryPermissions:function(){return s.default.template('<div class="library_style_container">\n                <div>\n                    <a href="#">\n                        <button data-toggle="tooltip" data-placement="top"\n                            title="Go back to the list of Libraries" class="btn btn-secondary primary-button" type="button">\n                            <span class="fa fa-list"></span>&nbsp;Libraries\n                        </button>\n                    </a>\n                </div>\n                <h1>\n                    Library: <%= _.escape(library.get("name")) %>\n                </h1>\n                <div class="alert alert-warning">\n                    <% if (is_admin) { %>\n                        You are logged in as an <strong>administrator</strong> therefore you can manage any library\n                        on this Galaxy instance. Please make sure you understand the consequences.\n                    <% } else { %>\n                        You can assign any number of roles to any of the following permission types.\n                        However please read carefully the implications of such actions.\n                    <% }%>\n                </div>\n                <div class="dataset_table">\n                    <h2>Library permissions</h2>\n                    <h4>Roles that can access the library</h4>\n                    <div id="access_perm" class="access_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can access this library.\n                        If there are no access roles set on the library it is considered <strong>unrestricted</strong>.\n                    </div>\n                    <h4>Roles that can manage permissions on this library</h4>\n                    <div id="manage_perm" class="manage_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can manage permissions on this library\n                        (includes giving access).\n                    </div>\n                    <h4>Roles that can add items to this library</h4>\n                    <div id="add_perm" class="add_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can add items to this library (folders and datasets).\n                    </div>\n                    <h4>Roles that can modify this library</h4>\n                    <div id="modify_perm" class="modify_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can modify this library (name, synopsis, etc.).\n                    </div>\n                    <button data-toggle="tooltip" data-placement="top"\n                        title="Save modifications made on this page"\n                        class="btn btn-secondary toolbtn_save_permissions primary-button" type="button">\n                        <span class="fa fa-floppy-o"></span>&nbsp;Save\n                    </button>\n                </div>\n            </div>')}})},ct={FolderView:c.a.View.extend({el:"#center",model:null,options:{},events:{"click .toolbtn_save_permissions":"savePermissions"},initialize:function(t){this.options=s.default.extend(this.options,t),this.options.id&&this.fetchFolder()},fetchFolder:function(t){var e=Object(r.a)();this.options=s.default.extend(this.options,t),this.model=new tt.a.FolderAsModel({id:this.options.id});var n=this;this.model.fetch({success:function(){n.options.show_permissions&&n.showPermissions()},error:function(t,n){void 0!==n.responseJSON?Z.a.error("".concat(n.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){e.libraries.library_router.back()}}):Z.a.error("An error occurred. Click this to go back.","",{onclick:function(){e.libraries.library_router.back()}})}})},showPermissions:function(t){var e=Object(r.a)();this.options=s.default.extend(this.options,t),a()(".tooltip").remove();var n=!1;e.user&&(n=e.user.isAdmin());var i=this.templateFolderPermissions();this.$el.html(i({folder:this.model,is_admin:n,root_path:Object(d.getAppRoot)()}));var o=this;a.a.get("".concat(Object(d.getAppRoot)(),"api/folders/").concat(o.id,"/permissions?scope=current")).done((function(t){o.prepareSelectBoxes({fetched_permissions:t})})).fail((function(){Z.a.error("An error occurred while attempting to fetch folder permissions.")})),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")},_serializeRoles:function(t){for(var e=[],n=0;n<t.length;n++)e.push("".concat(t[n][1],":").concat(t[n][0]));return e},prepareSelectBoxes:function(t){this.options=s.default.extend(this.options,t);var e=this.options.fetched_permissions,n=this._serializeRoles(e.add_library_item_role_list),i=this._serializeRoles(e.manage_folder_role_list),a=this._serializeRoles(e.modify_folder_role_list);this.addSelectObject=new rt.a.View(this._createSelectOptions(this,"add_perm",n,!1)),this.manageSelectObject=new rt.a.View(this._createSelectOptions(this,"manage_perm",i,!1)),this.modifySelectObject=new rt.a.View(this._createSelectOptions(this,"modify_perm",a,!1))},_createSelectOptions:function(t,e,n){return{minimumInputLength:0,css:e,multiple:!0,placeholder:"Click to select a role",container:t.$el.find("#".concat(e)),ajax:{url:"".concat(Object(d.getAppRoot)(),"api/folders/").concat(t.id,"/permissions?scope=available"),dataType:"json",quietMillis:100,data:function(t,e){return{q:t,page_limit:10,page:e}},results:function(t,e){var n=10*e<t.total;return{results:t.roles,more:n}}},formatResult:function(t){return"".concat(t.name," type: ").concat(t.type)},formatSelection:function(t){return t.name},initSelection:function(t,e){var n=[];a()(t.val().split(",")).each((function(){var t=this.split(":");n.push({id:t[0],name:t[1]})})),e(n)},initialData:n.join(","),dropdownCssClass:"bigdrop"}},_extractIds:function(t){for(var e=[],n=t.length-1;n>=0;n--)e.push(t[n].id);return e},savePermissions:function(t){var e=this,n=this._extractIds(this.addSelectObject.$el.select2("data")),i=this._extractIds(this.manageSelectObject.$el.select2("data")),r=this._extractIds(this.modifySelectObject.$el.select2("data"));a.a.post("".concat(Object(d.getAppRoot)(),"api/folders/").concat(e.id,"/permissions?action=set_permissions"),{"add_ids[]":n,"manage_ids[]":i,"modify_ids[]":r}).done((function(t){e.showPermissions({fetched_permissions:t}),Z.a.success("Permissions saved.")})).fail((function(){Z.a.error("An error occurred while attempting to set folder permissions.")}))},templateFolderPermissions:function(){return s.default.template('<div class="library_style_container">\n                <div>\n                    <a href="<%- root_path %>library/folders/<%= folder.get("parent_id") %>">\n                        <button data-toggle="tooltip" data-placement="top" title="Go back to the parent folder"\n                            class="btn btn-secondary primary-button" type="button">\n                            <span class="fa fa-caret-left fa-lg"/>\n                            &nbsp;Parent folder\n                        </button>\n                    </a>\n                </div>\n                <h1>\n                    Folder: <%= _.escape(folder.get("name")) %>\n                </h1>\n                <div class="alert alert-warning">\n                    <% if (is_admin) { %>\n                        You are logged in as an <strong>administrator</strong> therefore you can manage any\n                        folder on this Galaxy instance. Please make sure you understand the consequences.\n                    <% } else { %>\n                        You can assign any number of roles to any of the following permission types.\n                        However please read carefully the implications of such actions.\n                    <% }%>\n                </div>\n                <div class="dataset_table">\n                    <h2>Folder permissions</h2>\n                    <h4>\n                        Roles that can manage permissions on this folder\n                    </h4>\n                    <div id="manage_perm" class="manage_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can manage permissions on this folder.\n                    </div>\n                    <h4>\n                        Roles that can add items to this folder\n                    </h4>\n                    <div id="add_perm" class="add_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can add items to this folder (folders and datasets).\n                    </div>\n                    <h4>\n                        Roles that can modify this folder\n                    </h4>\n                    <div id="modify_perm" class="modify_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can modify this folder (name, etc.).\n                    </div>\n                    <button data-toggle="tooltip" data-placement="top" title="Save modifications"\n                        class="btn btn-secondary toolbtn_save_permissions primary-button" type="button">\n                        <span class="fa fa-floppy-o"/>\n                        &nbsp;Save\n                    </button>\n                </div>\n            </div>')}})},dt=c.a.Router.extend({initialize:function(){this.routesHit=0,c.a.history.on("route",(function(){this.routesHit++}),this),this.bind("route",this.trackPageview)},routes:{"":"libraries","page/:show_page":"libraries_page","library/:library_id/permissions":"library_permissions","folders/:folder_id/permissions":"folder_permissions","folders/:folder_id/datasets/:dataset_id":"dataset_detail","folders/:folder_id/datasets/:dataset_id/permissions":"dataset_permissions","folders/:folder_id/datasets/:dataset_id/versions/:ldda_id":"dataset_version"},back:function(){this.routesHit>1?window.history.back():this.navigate("#",{trigger:!0,replace:!0})},trackPageview:function(){var t=c.a.history.getFragment();/^\//.test(t)||""==t||(t="/".concat(t)),"undefined"!=typeof ga&&ga("send","pageview","".concat(Object(d.getAppRoot)(),"library/list").concat(t))}}),ut=Q.a.SessionStorageModel.extend({defaults:{with_deleted:!1,without_restricted:!1,sort_order:"asc",sort_by:"name",library_page_size:20,folder_page_size:15}}),ht={GalaxyApp:c.a.View.extend({libraryToolbarView:null,libraryListView:null,library_router:null,libraryView:null,folderToolbarView:null,folderListView:null,datasetView:null,initialize:function(){var t,e,n,i,a,o,s=Object(r.a)();s.config.ga_code&&(t=window,e=document,n="script",i="ga",t.GoogleAnalyticsObject=i,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,a=e.createElement(n),o=e.getElementsByTagName(n)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o),ga("create",s.config.ga_code,"auto"),ga("send","pageview")),s.libraries=this,this.preferences=new ut({id:"global-lib-prefs"}),this.library_router=new dt,this.library_router.on("route:libraries",(function(){s.libraries.libraryToolbarView&&s.libraries.libraryToolbarView.$el.unbind("click"),s.libraries.libraryToolbarView=new at.LibraryToolbarView,s.libraries.libraryListView=new it.LibraryListView})),this.library_router.on("route:libraries_page",(function(t){null===s.libraries.libraryToolbarView?(s.libraries.libraryToolbarView=new at.LibraryToolbarView,s.libraries.libraryListView=new it.LibraryListView({show_page:t})):s.libraries.libraryListView.render({show_page:t})})),this.library_router.on("route:dataset_detail",(function(t,e){s.libraries.datasetView&&s.libraries.datasetView.$el.unbind("click"),s.libraries.datasetView=new st.LibraryDatasetView({id:e,show_version:!1,show_permissions:!1})})),this.library_router.on("route:dataset_version",(function(t,e,n){s.libraries.datasetView&&s.libraries.datasetView.$el.unbind("click"),s.libraries.datasetView=new st.LibraryDatasetView({id:e,ldda_id:n,show_version:!0})})),this.library_router.on("route:dataset_permissions",(function(t,e){s.libraries.datasetView&&s.libraries.datasetView.$el.unbind("click"),s.libraries.datasetView=new st.LibraryDatasetView({id:e,show_permissions:!0})})),this.library_router.on("route:library_permissions",(function(t){s.libraries.libraryView&&s.libraries.libraryView.$el.unbind("click"),s.libraries.libraryView=new lt.LibraryView({id:t,show_permissions:!0})})),this.library_router.on("route:folder_permissions",(function(t){s.libraries.folderView&&s.libraries.folderView.$el.unbind("click"),s.libraries.folderView=new ct.FolderView({id:t,show_permissions:!0})})),c.a.history.start({pushState:!1})}})},ft=n(87),pt=n(135),mt=n(144),_t=n(142),gt=n(114),vt=n(83),yt=n(110),bt=(n(229),c.a.View.extend(Q.a.LoggableMixin).extend({_logNamespace:"history",tagName:"div",className:"history-column flex-column flex-row-container",id:function(){return this.model?"history-column-".concat(this.model.get("id")):""},initialize:function(t){t=t||{},this.purgeAllowed=!s.default.isUndefined(t.purgeAllowed)&&t.purgeAllowed,this.panel=t.panel||this.createPanel(t),this.setUpListeners()},createPanel:function(t){return new mt.a.HistoryViewEdit(s.default.defaults(t,{model:this.model,purgeAllowed:this.purgeAllowed,dragItems:!0,$scrollContainer:function(){return this.$el}}))},setUpListeners:function(){var t=this;this.once("rendered",(function(){t.trigger("rendered:initial",t)})),this.setUpPanelListeners()},setUpPanelListeners:function(){var t=this;this.listenTo(this.panel,{rendered:function(){t.trigger("rendered",t)},"view:expanded view:rendered":function(t){t.$(".rerun-btn").off()}},this)},inView:function(t,e){var n=this.$el.offset().left;return!(n+this.$el.width()<t)&&n<=e},$panel:function(){return this.$(".history-panel")},render:function(t){t=void 0!==t?t:"fast";var e=this.model?this.model.toJSON():{};return this.$el.html(this.template(e)),this.renderPanel(t),this.panel.$el.css("display","flex"),this.setUpBehaviors(),this},setUpBehaviors:function(){},template:function(t){return t=s.default.extend(t||{},{isCurrentHistory:this.currentHistory}),a()('\n            <div class="panel-controls mb-1">\n                <div class="flex-row flex-column-container no-gutters justify-content-between">\n                    '.concat(this.controlsLeftTemplate({history:t,view:this}),"\n                    ").concat(this.controlsRightTemplate({history:t,view:this}),'\n                </div>\n            </div>\n            <div class="inner flex-row flex-column-container">\n                <div id="history-').concat(t.id,'" class="history-column history-panel flex-column"></div>\n            </div>'))},renderPanel:function(t){return t=void 0!==t?t:"fast",this.panel.setElement(this.$panel()).render(t),this.currentHistory&&this.panel.$list().before(this.panel._renderDropTargetHelp()),this},events:{"click .switch-to":function(){this.model.setAsCurrent()},"click .delete-history":function(){var t=this;this.model._delete().done((function(e){t.render()}))},"click .undelete-history":function(){var t=this;this.model.undelete().done((function(e){t.render()}))},"click .purge-history":function(){var t=this;window.confirm(h()("This will permanently remove the data. Are you sure?"))&&this.model.purge().done((function(e){t.render()}))},"click .copy-history":"copy"},copy:function(){Object(gt.a)(this.model)},controlsLeftTemplate:s.default.template('\n        <div class="text-left col-8">\n            <% if( data.history.isCurrentHistory ){ %>\n                <strong class="current-label">\n                    '.concat(h()("Current History"),"\n                </strong>\n            <% } %>\n        </div>"),{variable:"data"}),controlsRightTemplate:s.default.template('<div class="text-right col-4">\n            <% if( !data.history.purged ){ %>\n                <div class="panel-menu btn-group">\n                    <% if( !data.history.isCurrentHistory ){ %>\n                        <button class="switch-to btn btn-secondary">\n                            '.concat(h()("Switch to"),'\n                        </button>\n                    <% } %>\n                    <button \n                    history-dropdown-btn="<%= data.history.id %>" \n                    type="button"\n                    class="btn btn-secondary dropdown-toggle"\n                    data-toggle="dropdown">\n                        <span class="caret"></span>\n                    </button>\n                    <div history-dropdown-menu="<%= data.history.id %>"  class="dropdown-menu" role="menu">\n                        <% if( !data.history.deleted ){ %>\n                            <a class="dropdown-item copy-history" href="javascript:void(0);">\n                                ').concat(h()("Copy"),'\n                            </a>\n                            <a class="dropdown-item delete-history" href="javascript:void(0);">\n                                ').concat(h()("Delete"),'\n                            </a>\n                        <% } else /* if is deleted */ { %>\n                            <a class="dropdown-item undelete-history" href="javascript:void(0);">\n                                ').concat(h()("Undelete"),'\n                            </a>\n                        <% } %>\n                        <% if( data.view.purgeAllowed ){ %>\n                            <a class="dropdown-item purge-history" href="javascript:void(0);">\n                                ').concat(h()("Purge"),"\n                            </a>\n                        <% } %>\n                    </div>\n                </div>\n            <% } %>\n        </div>"),{variable:"data"}),toString:function(){return"HistoryViewColumn(".concat(this.panel?this.panel:"",")")}})),wt={MultiPanelColumns:c.a.View.extend(Q.a.LoggableMixin).extend({_logNamespace:"history",className:"multi-panel-history",initialize:function(t){t=t||{},this.log("".concat(this,".init"),t),this.$el.addClass(this.className),this.options={columnWidth:312,borderWidth:1,columnGap:8,headerHeight:29,footerHeight:0,controlsHeight:20},this.perPage=t.perPage||10,this.hdaQueue=new yt.a.NamedAjaxQueue([],!1),this.collection=null,this.columnMap={},this.columnOptions=t.columnOptions||{},this.historySearch=null,this.datasetSearch=null,this.setCollection(t.histories),this.setUpListeners()},setUpListeners:function(){var t=this;this.on("end-of-scroll",(function(){t.collection.fetchMore()}))},setCollection:function(t){return this.stopListening(this.collection),this.collection=t||new ft.b,this.setUpCollectionListeners(),this.createColumns(),this.hdaQueue.clear(),this.trigger("new-collection",this),this},addModels:function(t,e,n){var i=this;return n=n||{},(t=s.default.isArray(t)?t:[t]).forEach((function(t){i.addColumn(t,!1)})),this},setUpCollectionListeners:function(){this.listenTo(this.collection,{error:this.errorHandler,add:this.addModels,"all-fetched":this._postFetchAll,"new-current":this.addAsCurrentColumn,"set-as-current":this.setCurrentHistory,"change:deleted change:purged":this.handleDeletedHistory,sort:function(){this.renderColumns(0)}})},_postFetchAll:function(t){if(this.$(".histories-loading-indicator").remove(),!this.historySearch){var e=this.$(".outer-middle");e.scrollLeft(e.scrollLeft()+24)}},setCurrentHistory:function(t){this.log("setCurrentHistory:",t);var e=s.default.findWhere(this.columnMap,{currentHistory:!0});e&&(e.currentHistory=!1,e.$el.height(""));var n=this.columnMap[this.collection.currentHistoryId];return n.currentHistory=!0,this.collection.sort(),this._recalcFirstColumnHeight(),n},handleDeletedHistory:function(t){if(t.get("deleted")||t.get("purged")){this.log("handleDeletedHistory",this.collection.includeDeleted,t);var e=this.columnMap[t.id];if(!e)return;e.model.id===this.collection.currentHistoryId||this.collection.includeDeleted||this.removeColumn(e)}},errorHandler:function(t,e,n){if(!e||0!==e.status||0!==e.readyState){if(this.error(t,e,n),s.default.isString(t)&&s.default.isString(e)){var i=t;return vt.a.errorModal(i,e,n)}return e&&502===e.status?vt.a.badGatewayErrorModal():vt.a.ajaxErrorModal(t,e,n)}},_ajaxErrorHandler:function(){vt.a.ajaxErrorModal.apply(null,s.default.toArray(arguments))},create:function(t){return this.collection.create({current:!0})},createColumns:function(t,e){var n=this;e=e||this.options.columnOptions,this.columnMap={},this.collection.each((function(t,i){n.columnMap[t.id]=n.createColumn(t,e)}))},createColumn:function(t,e){var n=Object(r.a)();e=s.default.extend({},e,{model:t,purgeAllowed:n.config.allow_user_dataset_purge});var i=new bt(e);return t.id===this.collection.currentHistoryId&&(i.currentHistory=!0),this.setUpColumnListeners(i),this.datasetSearch&&(i.panel.searchItems(this.datasetSearch),this.queueHdaFetchDetails(i)),i},addColumn:function(t,e){e=void 0===e||e;var n=this.createColumn(t);return this.columnMap[t.id]=n,e&&this.renderColumns(),n},addAsCurrentColumn:function(t,e,n){var i=this,a=this.addColumn(t,!1);return this.setCurrentHistory(t),a.once("rendered",(function(){i.queueHdaFetch(a)})),a},removeColumn:function(t,e){var n=this;if(e=void 0===e||e,this.log("removeColumn",t),t){var i=this.options.columnWidth+this.options.columnGap;t.$el.fadeOut("fast",(function(){e&&(a()(n).remove(),n.$(".middle").width(n.$(".middle").width()-i),n.checkColumnsInView(),n._recalcFirstColumnHeight()),n.stopListening(t.panel),n.stopListening(t),delete n.columnMap[t.model.id],t.remove()}))}},setUpColumnListeners:function(t){var e=this;this.listenTo(t,{"in-view":this.queueHdaFetch}),this.listenTo(t.panel,{"view:draggable:dragstart":function(t,n,i,a){e._dropData=JSON.parse(t.dataTransfer.getData("text")),e.currentColumnDropTargetOn()},"view:draggable:dragend":function(t,n,i,a){e._dropData=null,e.currentColumnDropTargetOff()},"droptarget:drop":function(t,n,i){var a=e._dropData.filter((function(t){return i.model.contents.isCopyable(t)}));e._dropData=null;var r=new yt.a.NamedAjaxQueue;0!==i.model.contents.currentPage&&r.add({name:"fetch-front-page",fn:function(){return i.model.contents.fetchPage(0)}}),a.reverse().forEach((function(t){r.add({name:"copy-".concat(t.id),fn:function(){return i.model.contents.copy(t)}})})),r.start(),r.done((function(t){i.model.fetch()}))}})},columnMapLength:function(){return Object.keys(this.columnMap).length},sortedFilteredColumns:function(t){return(t=t||this.filters)&&t.length?this.sortedColumns().filter((function(e,n){return e.currentHistory||s.default.every(t.map((function(t){return t.call(e)})))})):this.sortedColumns()},sortedColumns:function(){var t=this;return this.collection.map((function(e,n){return t.columnMap[e.id]}))},render:function(t){return t=void 0!==t?t:this.fxSpeed,this.log("".concat(this,".render")),this.$el.html(this.mainTemplate),this.renderColumns(t),this.setUpBehaviors(),this.trigger("rendered",this),this},renderColumns:function(t){t=s.default.isNumber(t)?t:this.fxSpeed;var e=this.sortedFilteredColumns(),n=this.$(".middle").empty();return this._addColumns(e,t),this.collection.allFetched||n.append(this.loadingIndicatorTemplate),this.trigger("columns-rendered",e,this),(!this.datasetSearch||e.length>1)&&(this.checkColumnsInView(),this._recalcFirstColumnHeight()),e},_addColumns:function(t,e){e=s.default.isNumber(e)?e:this.fxSpeed;var n=this.$(".middle"),i=n.children(".history-column").length;n.width(this._calcMiddleWidth(t.length+i)),t.forEach((function(t,i){t.delegateEvents().render(e).$el.appendTo(n)}))},_calcMiddleWidth:function(t){return t*(this.options.columnWidth+this.options.columnGap)+this.options.columnGap+16},queueHdaFetch:function(t){var e=t.model.contents;if(0===e.length&&t.model.contentsShown()){var n={silent:!0},i=s.default.values(e.storage.allExpanded()).join();i&&(n.details=i),this.hdaQueue.add({name:t.model.id,fn:function(){return e.fetchCurrentPage(n).done((function(){t.panel.renderItems()})).done((function(){_t.a.FETCH_STATE_ON_ADD||e.jobStateSummariesCollection.fetch()}))}}),this.hdaQueue.running||this.hdaQueue.start()}},queueHdaFetchDetails:function(t){var e=t.model.contents;!(0===e.length&&t.model.contentsShown())&&e.haveDetails()||(this.hdaQueue.add({name:t.model.id,fn:function(){return e.progressivelyFetchDetails().done((function(){t.panel._renderEmptyMessage()}))}}),this.hdaQueue.running||this.hdaQueue.start())},renderInfo:function(t){return this.$(".header .header-info").text(t)},events:{"click .done.btn":"close","click .create-new.btn":"create","click #include-deleted":"_clickToggleDeletedHistories","click .order .set-order":"_chooseOrder","click #toggle-deleted":"_clickToggleDeletedDatasets","click #toggle-hidden":"_clickToggleHiddenDatasets"},close:function(t){window.location=Object(d.getAppRoot)()},_clickToggleDeletedHistories:function(t){this.toggleDeletedHistories(a()(t.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleDeletedHistories:function(t){window.location="".concat(Object(d.getAppRoot)(),t?"history/view_multiple?include_deleted_histories=True":"history/view_multiple")},_clickToggleDeletedDatasets:function(t){this.toggleDeletedDatasets(a()(t.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleDeletedDatasets:function(t){t=void 0!==t&&t,this.sortedFilteredColumns().forEach((function(e,n){s.default.delay((function(){e.panel.toggleShowDeleted(t,!1)}),200*n)}))},_clickToggleHiddenDatasets:function(t){this.toggleHiddenDatasets(a()(t.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleHiddenDatasets:function(t){t=void 0!==t&&t,this.sortedFilteredColumns().forEach((function(e,n){s.default.delay((function(){e.panel.toggleShowHidden(t,!1)}),200*n)}))},_chooseOrder:function(t){var e=this,n=this.collection,i=a()(t.currentTarget).data("order");this.$(".current-order").text(this.orderDescriptions[i]),this.toggleOptionsPopover(),n.setOrder(i);var r=n.slice(0,1);n.fetchFirst().done((function(){n.unshift(r,{silent:!0}),e.createColumns(),e.hdaQueue.clear(),e.render()})),this.once("columns-rendered",this._scrollLeft)},_scrollLeft:function(t){t=s.default.isNumber(t)?t:0,this.$(".outer-middle").scrollLeft(t)},setUpBehaviors:function(){var t=this;this._moreOptionsPopover();var e=function(e){var n=t;t.historySearch=e,t.filters=[function(){return this.model.matchesAll(n.historySearch)}],t.renderColumns(0)};this.$("#search-histories").searchInput({name:"search-histories",placeholder:h()("search histories"),onfirstsearch:function(n){t.$("#search-histories").searchInput("toggle-loading"),t.renderInfo(h()("loading all histories for search")),t.collection.fetchAll().done((function(){t.$("#search-histories").searchInput("toggle-loading"),t.renderInfo(""),e(n)}))},onsearch:e,onclear:function(e){t.historySearch=null,t.filters=[],t.renderColumns(0)},advsearchlink:!1}),this.$("#search-datasets").searchInput({name:"search-datasets",placeholder:h()("search all datasets"),onfirstsearch:function(e){t.hdaQueue.clear(),t.$("#search-datasets").searchInput("toggle-loading"),t.datasetSearch=e,t.sortedFilteredColumns().forEach((function(n){n.panel.searchItems(e),t.queueHdaFetchDetails(n)})),t.hdaQueue.progress((function(e){t.renderInfo([h()("searching"),e.curr+1,h()("of"),e.total].join(" "))})),t.hdaQueue.deferred.done((function(){t.renderInfo(""),t.$("#search-datasets").searchInput("toggle-loading")}))},onsearch:function(e){t.datasetSearch=e,t.sortedFilteredColumns().forEach((function(t){t.panel.searchItems(e)}))},onclear:function(e){t.datasetSearch=null,t.sortedFilteredColumns().forEach((function(t){t.panel.clearSearch()}))},advsearchlink:!0}),a()(window).resize((function(){t._recalcFirstColumnHeight()}));var n=s.default.debounce((function(){var e=t._viewport();t.checkColumnsInView(e),t.checkForEndOfScroll(e)}),100);this.$(".middle").parent().scroll(n)},_moreOptionsPopover:function(){return this.$(".open-more-options.btn").popover({container:".header",placement:"bottom",html:!0,content:a()(this.optionsPopoverTemplate(this))})},toggleOptionsPopover:function(t){this.$(".open-more-options.btn").popover("toggle")},_recalcFirstColumnHeight:function(){var t=this.$(".history-column").first(),e=this.$(".middle").height(),n=t.find(".panel-controls").height();t.height(e).find(".inner").height(e-n)},_viewport:function(){var t=this.$(".middle").parent(),e=t.offset().left;return{left:e,right:e+t.width()}},columnsInView:function(t){var e=t||this._viewport();return this.sortedFilteredColumns().filter((function(t){return t.currentHistory||t.inView(e.left,e.right)}))},checkColumnsInView:function(){this.columnsInView().forEach((function(t){t.trigger("in-view",t)}))},checkForEndOfScroll:function(t){t=t||this._viewport();var e=this.$(".middle");e.parent().scrollLeft()+t.right>=e.width()-16&&this.trigger("end-of-scroll")},currentColumnDropTargetOn:function(){var t=this.columnMap[this.collection.currentHistoryId];t&&(t.panel.dataDropped=function(t){},t.panel.dropTargetOn())},currentColumnDropTargetOff:function(){var t=this.columnMap[this.collection.currentHistoryId];t&&(t.panel.dataDropped=mt.a.HistoryViewEdit.prototype.dataDrop,t.panel.dropTarget=!1,t.panel.$(".history-drop-target").remove())},toString:function(){return"MultiPanelColumns(".concat(this.columns?this.columns.length:0,")")},mainTemplate:'\n        <div class="header flex-column-container">\n            <div class="control-column control-column-left flex-column">\n                <div id="search-histories" class="search-control"></div>\n                <div id="search-datasets" class="search-control"></div>\n                <a class="open-more-options btn btn-secondary" tabindex="3">\n                    <span class="fa fa-ellipsis-h"></span>\n                </a>\n            </div>\n            <div class="control-column control-column-center flex-column">\n                <div class="header-info">\n                </div>\n            </div>\n            <div class="control-column control-column-right flex-column">\n                <button class="create-new btn btn-secondary" tabindex="4">\n                    '.concat(h()("Create new"),'\n                </button>\n            </div>\n        </div>\n        <div class="outer-middle flex-row flex-row-container">\n            <div class="middle flex-column-container flex-row"></div>\n        </div>\n        <div class="footer flex-column-container"></div>'),loadingIndicatorTemplate:'\n        <div class="histories-loading-indicator">\n            <span class="fa fa-spin fa-spinner"></span>\n            '.concat(h()("Loading histories")," ...\n        </div>"),orderDescriptions:{update_time:h()("most recent first"),"update_time-asc":h()("least recent first"),name:h()("name, a to z"),"name-dsc":h()("name, z to a"),size:h()("size, large to small"),"size-asc":h()("size, small to large")},optionsPopoverTemplate:s.default.template('<div class="more-options d-flex flex-column">\n            <div class="order btn-group mb-2">\n                <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">\n                    '.concat(h()("Order histories by"),'\n                    <span class="current-order"><%- view.orderDescriptions[ view.collection.order ] %></span>\n                    <span class="caret"/>\n                </button>\n                <div class="dropdown-menu" role="menu">\n                    <% _.each( view.orderDescriptions, function( text, order ){ %>\n                        <a href="javascript:void(0);" class="dropdown-item set-order" data-order="<%- order %>">\n                            <%- text %>\n                        </a>\n                    <% }); %>\n                </div>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="include-deleted" type="checkbox" <%= view.collection.includeDeleted? " checked" : "" %>>\n                    ').concat(h()("Include deleted histories"),'\n                </label>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="toggle-deleted" type="checkbox">\n                    ').concat(h()("Include deleted datasets"),'\n                </label>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="toggle-hidden" type="checkbox">\n                    ').concat(h()("Include hidden datasets"),"\n                </label>\n            </div>\n        </div>"),{variable:"view"})})},kt=n(127),xt=kt.a.HistoryView,St={AnnotatedHistoryView:xt.extend({className:"".concat(xt.prototype.className," annotated-history-panel"),_buildNewRender:function(){var t=xt.prototype._buildNewRender.call(this);return this.renderHistoryAnnotation(t),t},renderHistoryAnnotation:function(t){var e=this.model.get("annotation");e&&t.find("> .controls .subtitle").text(e)},renderItems:function(t){t=t||this.$el,xt.prototype.renderItems.call(this,t);var e=t.find("> .controls");return e.find(".contents-container.headers").remove(),a()('<div class="contents-container headers"/>').append([a()('<div class="history-content header"/>').text(h()("Dataset")),a()('<div class="additional-info header"/>').text(h()("Annotation"))]).appendTo(e),self.views},_renderItemView$el:function(t){return a()('<div class="contents-container"/>').append([t.render(0).$el,a()('<div class="additional-info"/>').text(t.model.get("annotation")||"")])},events:s.default.extend(s.default.clone(xt.prototype.events),{"click .contents-container":function(t){t.stopPropagation(),a()(t.currentTarget).find(".list-item .title-bar").click()},"click .icon-btn":function(t){t.stopPropagation();var e=a()(t.currentTarget);e.length&&"dropdown"===e.attr("data-toggle")&&e.dropdown("toggle")}}),_clickSectionLink:function(t){var e=a()(t.currentTarget).parent().parent().data("section");this.openSection(e)},toString:function(){return"AnnotatedHistoryView(".concat(this.model?this.model.get("name"):"",")")}})},Mt=n(161),Ct=n(108),Tt=n(422),jt=n(120),Ot=n(163),Lt=n(138);a.a.ajaxSettings.traditional=!0;var Dt=a.a,At=c.a.View.extend({grid:null,initialize:function(t){this.grid=new Tt.a,this.dict_format=t.dict_format,this.title=t.title,this.title_id=t.title_id;var e=this;if(window.add_tag_to_grid_filter=function(t,n){var i=t+(void 0!==n&&""!==n?":".concat(n):"");Dt("#advanced-search").is(":visible")||(Dt("#standard-search").slideToggle("fast"),Dt("#advanced-search").slideToggle("fast")),e.add_filter_condition("tags",i)},this.dict_format)if(this.setElement("<div/>"),t.url_base&&!t.items){var n=t.url_data||{};s.default.each(t.filters,(function(t,e){n["f-".concat(e)]=t})),Dt.ajax({url:"".concat(t.url_base,"?").concat(Dt.param(n)),success:function(n){n.embedded=t.embedded,n.filters=t.filters||{},e.init_grid(n)}})}else this.init_grid(t);else this.setElement("#grid-container"),this.init_grid(t);t.use_panels&&Dt("#center").css({padding:"10px",overflow:"auto"})},handle_refresh:function(t){t&&Dt.inArray("history",t)>-1&&window.top.Galaxy&&window.top.Galaxy.currHistoryPanel&&window.top.Galaxy.currHistoryPanel.loadCurrentHistory()},init_grid:function(t){this.grid.set(t);var e=this.grid.attributes;this.allow_title_display&&e.title&&m.b.setWindowTitle(e.title),this.handle_refresh(e.refresh_frames);var n=this.grid.get("url_base");if(n=n.replace(/^.*\/\/[^\/]+/,""),this.grid.set("url_base",n),this.$el.html(jt.a.grid(e)),this.$el.find("#grid-table-header").html(jt.a.header(e)),this.$el.find("#grid-table-body").html(jt.a.body(e)),this.$el.find("#grid-table-footer").html(jt.a.footer(e)),e.message){this.$el.find("#grid-message").html(jt.a.message(e));var i=this;e.use_hide_message&&setTimeout((function(){i.$el.find("#grid-message").html("")}),5e3)}this.init_grid_elements(),this.init_grid_controls(),Object(Lt.a)()},init_grid_controls:function(){var t=this;this.$el.find(".operation-button").each((function(){Dt(this).off(),Dt(this).click((function(){return t.submit_operation(this),!1}))})),this.$el.find("input[type=text]").each((function(){Dt(this).off(),Dt(this).click((function(){Dt(this).select()})).keyup((function(){Dt(this).css("font-style","normal")}))})),this.$el.find(".sort-link").each((function(){Dt(this).off(),Dt(this).click((function(){return t.set_sort_condition(Dt(this).attr("sort_key")),!1}))})),this.$el.find(".text-filter-form").each((function(){Dt(this).off(),Dt(this).submit((function(){var e=Dt(this).attr("column_key"),n=Dt("#input-".concat(e,"-filter")),i=n.val();return n.val(""),t.add_filter_condition(e,i),!1}))})),this.$el.find(".text-filter-val > a").each((function(){Dt(this).off(),Dt(this).click((function(){return Dt(this).parent().remove(),t.remove_filter_condition(Dt(this).attr("filter_key"),Dt(this).attr("filter_val")),!1}))})),this.$el.find(".categorical-filter > a").each((function(){Dt(this).off(),Dt(this).click((function(){return t.set_categorical_filter(Dt(this).attr("filter_key"),Dt(this).attr("filter_val")),!1}))})),this.$el.find(".advanced-search-toggle").each((function(){Dt(this).off(),Dt(this).click((function(){return t.$el.find("#standard-search").slideToggle("fast"),t.$el.find("#advanced-search").slideToggle("fast"),!1}))})),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",(function(){t.check_all_items()}))},init_grid_elements:function(){this.$el.find(".grid").each((function(){var t=Dt(this).find("input.grid-row-select-checkbox"),e=Dt(this).find("span.grid-selected-count"),n=function(){e.text(Dt(t).filter(":checked").length)};Dt(t).each((function(){Dt(this).change(n)})),n()})),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var t=this.grid.attributes,e=this;this.$el.find(".page-link > a").each((function(){Dt(this).click((function(){return e.set_page(Dt(this).attr("page_num")),!1}))})),this.$el.find(".use-target").each((function(){Dt(this).click((function(){return e.execute({href:Dt(this).attr("href"),target:Dt(this).attr("target")}),!1}))})),0!==t.items.length&&s.default.each(t.items,(function(n,i){var a=e.$("#grid-".concat(n.encode_id,"-popup")).off(),r=new Ot.a(a);s.default.each(t.operations,(function(t){e._add_operation(r,t,n)}))}))},_add_operation:function(t,e,n){var i=this,a=n.operation_config[e.label];a.allowed&&e.allow_popup&&t.addItem({html:e.label,href:a.url_args,target:a.target,confirmation_text:e.confirm,func:function(t){t.preventDefault();var a=Dt(t.target).html();e.onclick?e.onclick(n.encode_id):i.execute(this.findItemByHtml(a))}})},add_filter_condition:function(t,e){if(""===e)return!1;this.grid.add_filter(t,e,!0);var n=Dt(jt.a.filter_element(t,e)),i=this;n.click((function(){Dt(this).remove(),i.remove_filter_condition(t,e)})),this.$el.find("#".concat(t,"-filtering-criteria")).append(n),this.go_page_one(),this.execute()},remove_filter_condition:function(t,e){this.grid.remove_filter(t,e),this.go_page_one(),this.execute()},set_sort_condition:function(t){var e=this.grid.get("sort_key"),n=t;-1!==e.indexOf(t)&&"-"!==e.substring(0,1)&&(n="-".concat(t)),this.$el.find(".sort-arrow").remove();var i="-"==n.substring(0,1)?"&uarr;":"&darr;",a=Dt("<span>".concat(i,"</span>")).addClass("sort-arrow");this.$el.find("#".concat(t,"-header")).append(a),this.grid.set("sort_key",n),this.go_page_one(),this.execute()},set_categorical_filter:function(t,e){var n=this.grid.get("categorical_filters")[t],i=this.grid.get("filters")[t],a=this;this.$el.find(".".concat(t,"-filter")).each((function(){var r=Dt.trim(Dt(this).text()),o=n[r][t];if(o==e)Dt(this).empty(),Dt(this).addClass("current-filter"),Dt(this).append(r);else if(o==i){Dt(this).empty();var s=Dt('<a href="javascript:void(0)" role="button">'.concat(r,"</a>"));s.click((function(){a.set_categorical_filter(t,o)})),Dt(this).removeClass("current-filter"),Dt(this).append(s)}})),this.grid.add_filter(t,e),this.go_page_one(),this.execute()},set_page:function(t){var e=this;this.$el.find(".page-link").each((function(){var n,i=Dt(this).attr("id"),a=parseInt(i.split("-")[2],10),r=e.grid.get("cur_page");if(a===t)n=Dt(this).children().text(),Dt(this).empty(),Dt(this).addClass("inactive-link"),Dt(this).text(n);else if(a===r){n=Dt(this).text(),Dt(this).empty(),Dt(this).removeClass("inactive-link");var o=Dt('<a href="javascript:void(0)" role="button">'.concat(n,"</a>"));o.click((function(){e.set_page(a)})),Dt(this).append(o)}})),"all"===t?this.grid.set("cur_page",t):this.grid.set("cur_page",parseInt(t,10)),this.execute()},submit_operation:function(t,e){var n=Dt(t).val();if(this.$el.find('input[name="id"]:checked').length<1)return!1;var i=s.default.findWhere(this.grid.attributes.operations,{label:n});i&&!e&&(e=i.confirm||"");var a=[];this.$el.find("input[name=id]:checked").each((function(){a.push(Dt(this).val())}));var r={operation:n,id:a,confirmation_text:e};return"top"!=i.target&&"center"!=i.target||(r=s.default.extend(r,{href:i.href,target:i.target})),this.execute(r),!0},check_all_items:function(){var t=this.$(".grid-row-select-checkbox"),e=this.$("#check_all").prop("checked");s.default.each(t,(function(t){Dt(t).prop("checked",e)})),this.init_grid_elements()},go_page_one:function(){var t=this.grid.get("cur_page");null!=t&&"all"!==t&&this.grid.set("cur_page",1)},execute:function(t){var e=null,n=null,i=null,a=null,r=null;if(t&&(n=t.href,i=t.operation,e=t.id,a=t.confirmation_text,r=t.target,void 0!==n&&-1!=n.indexOf("operation="))){var o=n.split("?");if(o.length>1)for(var s=o[1].split("&"),l=0;l<s.length;l++)-1!=s[l].indexOf("operation")?i=(i=s[l].split("=")[1]).replace(/\+/g," "):-1!=s[l].indexOf("id")&&(e=s[l].split("=")[1])}return i&&e?!(a&&""!==a&&"None"!=a&&"null"!=a&&!confirm(a))&&(i=i.toLowerCase(),this.grid.set({operation:i,item_ids:e}),"top"==r?window.top.location="".concat(n,"?").concat(Dt.param(this.grid.get_url_data())):"center"==r?Dt("#galaxy_main").attr("src","".concat(n,"?").concat(Dt.param(this.grid.get_url_data()))):this.grid.can_async_op(i)||this.dict_format?this.update_grid():this.go_to(r,n),!1):n?(this.go_to(r,n),!1):(this.grid.get("async")||this.dict_format?this.update_grid():this.go_to(r,n),!1)},go_to:function(t,e){var n=this.grid.get("async");this.grid.set("async",!1);var i=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",i),e||(e="".concat(this.grid.get("url_base"),"?").concat(Dt.param(this.grid.get_url_data()))),this.grid.set({operation:void 0,item_ids:void 0,async:n}),t){case"center":Dt("#galaxy_main").attr("src",e);break;case"top":window.top.location=e;break;default:window.location=e}},update_grid:function(){var t=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var e=this;Dt.ajax({type:t,url:e.grid.get("url_base"),data:e.grid.get_url_data(),error:function(){alert("Grid refresh failed")},success:function(t){var n=e.grid.get("embedded"),i=e.grid.get("insert"),a=e.$el.find("#advanced-search").is(":visible"),r=e.dict_format?t:Dt.parseJSON(t);r.embedded=n,r.insert=i,r.advanced_search=a,e.init_grid(r),e.$el.find(".loading-elt-overlay").hide()},complete:function(){e.grid.set({operation:void 0,item_ids:void 0})}})}});function Et(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate()-e,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function It(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()-e,t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function Pt(t,e,n,i){var r,o,s=t,l=[],c=(r=new Date,new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),0,0));for(o=0;o<24;o++)l.push(It(c,o));var d=[];for(o=0;o<30;o++)d.push(Et(c,o));var u=60,h=50,p=60,m=0;"hours"==n?m=12.5:"days"==n&&(m=10);var _,g=300+p+30,v=1.75;_=0!==f.max(s)?150/f.max(s):1;var y=150+u+h;a()(".charts").css("height",y*v);var b=f.select("#".concat(e)).attr("width",g).attr("height",y).attr("preserveAspectRatio","xMidYMin").attr("viewBox","0 0 ".concat(g," ").concat(y)).on("click",(function(){var t=f.select(this).attr("class");t=t.split(" "),f.selectAll(".".concat(t[0])).filter(".".concat(t[1])).style("cursor","zoom-in").transition().duration(750).attr("height",y).attr("width",g),f.select(this).style("cursor","default").transition().duration(750).attr("height",y*v).attr("width",g*v)})),w=b.selectAll("g").data(s).enter().append("g").attr("transform",(function(t,e){var n=p;return"translate(".concat(n+=+e*m,",").concat(u,")")})).on("mouseenter",(function(t){for(var e=1,n=t;n>=10;)n/=10,e++;var i=4*e+10;f.select(f.event.target.parentElement).select(".tool_tip").select("text").attr("transform","translate( ".concat(p-5,", ").concat(150-t*_+u+10," )")).attr("visibility","visible").text(t),f.select(f.event.target.parentElement).select(".tool_tip").attr("width","".concat(i,"px")).attr("height","15px").select("rect").attr("transform","translate( ".concat(p-i,", ").concat(150-t*_+u," )")).attr("width","".concat(i,"px")).attr("height","15px").attr("fill","#ebd9b2")})).on("mouseleave",(function(t){f.select(f.event.target.parentElement).select(".tool_tip").select("text").attr("visibility","hidden"),f.select(f.event.target.parentElement).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","").text(t)}));b.append("g").append("text").attr("class","title").attr("text-anchor","end").attr("transform",(function(){return"translate( ".concat(300,",15 )")})).text(i),b.append("g").attr("class","axis").append("path").attr("class","x").attr("d",(function(){var t=u+150,e=p+300;return"M".concat(p," ").concat(t," L ").concat(e," ").concat(t)}));var k=f.scale.linear().range([150,0]),x=f.svg.axis().scale(k).orient("left").tickFormat((function(t){return f.round(t*f.max(s),0)}));b.append("g").attr("class","y axis").attr("id","y_".concat(e)).attr("text-anchor","end").attr("transform","translate( ".concat(p,",").concat(u,")")).call(x).select(".domain"),b.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var t=f.select("#y_".concat(e)).node(),n=p-t.getBoundingClientRect().width-5,i=u+t.getBoundingClientRect().height/2-30;return"translate(".concat(n,",").concat(i,")rotate(-90)")})).text("Number of Jobs"),w.append("rect").attr("y",(function(t){return 150-t*_})).attr("height",(function(t){return t*_})).attr("width",m-1);var S=!1;if("hours"==n){w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( ".concat(m/2,", ").concat(150,")")})),w.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 10, ".concat(160," )")).text((function(t,e){return l[e].getHours()<10?"0".concat(String(l[e].getHours())):l[e].getHours()}));var M="";S=!1,w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(function(t,e){var n=0;return l[e].getDate()!=M&&(S?n=20:(n=27,S=!0),M=l[e].getDate()),n})).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( 0, ".concat(150,")")})),M="";var C="";S=!1,w.append("text").attr("fill","rgb(0,0,0)").attr("pointer-events","none").text((function(t,e){var n="";return l[e].getDate()!=C&&(n=String(l[e].toLocaleString("en-us",{month:"long"})),n+=" ".concat(String(l[e].getDate())),C=l[e].getDate()),n})).attr("transform",(function(t,e){var n=150,i=f.select(this).node().getBBox().width;return l[e].getDate()!=M&&(S?n+=18:(n+=26,S=!0),M=l[e].getDate()),"translate( ".concat(i+2,", ").concat(n," )")}))}else if("days"==n){w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( ".concat(m/2,", ").concat(150,")")})),w.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 9, ".concat(160," )")).text((function(t,e){return d[e].getDate()<10?"0".concat(String(d[e].getDate())):d[e].getDate()}));var T="";S=!1,w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(function(t,e){var n=0;return d[e].getMonth()!=T&&(S?n=20:(n=27,S=!0),T=d[e].getMonth()),n})).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( 0, ".concat(150,")")})),T="";var j="";S=!1,w.append("text").attr("fill","rgb(0,100,0)").attr("pointer-events","none").text((function(t,e){var n="";return d[e].getMonth()!=j&&(n=String(d[e].toLocaleString("en-us",{month:"long"})),n+=" ".concat(String(d[e].getFullYear())),j=d[e].getMonth()),n})).attr("transform",(function(t,e){var n=150,i=f.select(this).node().getBBox().width;return d[e].getMonth()!=T&&(S?n+=18:(n+=26,S=!0),T=d[e].getMonth()),"translate( ".concat(i+2,", ").concat(n," )")}))}b.append("g").attr("class","tool_tip").append("rect"),b.select(".tool_tip").append("text"),"jc_dy_chart"!=e&&"jc_hr_chart"!=e||f.select("#".concat(e)).attr("height",y*v).attr("width",g*v).style("cursor","default")}function Yt(t,e,n){var i=t,a=1.75,r=60,o=60,s=150+r+50,l=300+o+30,c=f.scale.linear().domain([0,f.max(i)]).range([0,300]);i=f.layout.histogram().bins(c.ticks(20))(i);for(var d,u=[],h=0;h<i.length;h++)u.push(i[h].length);d=0!==f.max(i)?150/f.max(u):1;var p=f.scale.linear().domain([0,f.max(i,(function(t){return t.y}))]).range([150,0]);var m=f.select("#".concat(e)).attr("viewBox","0 0 ".concat(l," ").concat(s)).attr("width",l).attr("height",s).attr("preserveAspectRatio","xMidYMin").on("click",(function(){var t=f.select(this).attr("class");t=t.split(" "),f.selectAll(".".concat(t[0])).filter(".".concat(t[1])).style("cursor","zoom-in").transition().duration(750).attr("height",s).attr("width",l),f.select(this).style("cursor","default").transition().duration(750).attr("height",s*a).attr("width",l*a)}));m.append("g").append("text").attr("class","title").attr("transform",(function(){return"translate( ".concat(300,",15 )")})).text(n);var _,g=m.selectAll(".bar").data(i).enter().append("g").attr("class","bar").attr("transform",(function(t){return"translate(".concat(+c(t.x)+o,",").concat(+p(t.y)+r,")")})).on("mouseenter",(function(t){for(var e=0,n=t.length;n>=1;)n/=10,e++;var i=4*e+10;f.select(f.event.target.parentElement).select(".tool_tip").select("text").attr("transform","translate( ".concat(o-5,", ").concat(150-t.length*d+r+10," )")).attr("visibility","visible").text(t.length),f.select(f.event.target.parentElement).select(".tool_tip").attr("width","".concat(i,"px")).attr("height","15px").select("rect").attr("transform","translate( ".concat(o-i,", ").concat(150-t.length*d+r," )")).attr("width","".concat(i,"px")).attr("height","15px").attr("fill","#ebd9b2")})).on("mouseleave",(function(){f.select(f.event.target.parentElement).select(".tool_tip").select("text").attr("visibility","hidden"),f.select(f.event.target.parentElement).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","")}));_=void 0===i[0]?1:c(i[0].dx),g.append("rect").attr("x",1).attr("width",_-1).attr("height",(function(t){return 150-p(t.y)}));var v=f.svg.axis().scale(c).orient("bottom").tickFormat((function(t){var e=Math.floor(t/60),n=Math.floor(t-60*e);return e<10&&(e="0".concat(e)),n<10&&(n="0".concat(n)),"".concat(e,":").concat(n)}));m.append("g").attr("class","x axis").attr("id","x_".concat(e)).attr("transform","translate( ".concat(o,",").concat(150+r,")")).call(v),m.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var t=f.select("#x_".concat(e)).node(),n=o+t.getBoundingClientRect().width/2+30,i=r+150+t.getBoundingClientRect().height+10;return"translate(".concat(n,",").concat(i,")")})).text("ETA - hrs:mins");var y=f.svg.axis().scale(p).orient("left");m.append("g").attr("class","y axis").attr("id","y_".concat(e)).attr("transform","translate( ".concat(o,",").concat(r,")")).call(y),m.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var t=f.select("#y_".concat(e)).node(),n=o-t.getBoundingClientRect().width-5,i=r+t.getBoundingClientRect().height/2-30;return"translate(".concat(n,",").concat(i,")rotate(-90)")})).text("Number of Jobs"),m.append("g").attr("class","tool_tip").append("rect"),m.select(".tool_tip").append("text")}var Rt=c.a.Model.extend({urlRoot:"".concat(Object(d.getAppRoot)(),"api/groups")}),Ht={Group:Rt,Groups:c.a.Collection.extend({url:"".concat(Object(d.getAppRoot)(),"api/groups"),model:Rt})},Nt={GroupListRowView:c.a.View.extend({events:{},initialize:function(t){this.render(t.group)},render:function(t){var e=this.templateRow();return this.setElement(e({group:t})),this.$el.show(),this},templateRow:function(){return s.default.template(['<tr class="" data-id="<%- group.get("id") %>">','<td><a href="groups#/<%= group.get("id") %>"><%= _.escape(group.get("name")) %></a></td>','<td><%= group.get("total_members") %></td>','<td><%= group.get("total_repos") %></td>',"</tr>"].join(""))}})},$t={GroupListView:c.a.View.extend({el:"#groups_element",defaults:{},initialize:function(t){this.options=s.default.defaults(this.options||{},this.defaults,t);var e=this;window.globalTS.groups.collection=new Ht.Groups,window.globalTS.groups.collection.fetch({success:function(t){e.render()},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred.")}})},fetch:function(){},render:function(t){this.options=s.default.extend(this.options,t),a()(".tooltip").hide();var e=this.templateGroupsList();this.$el.html(e({length:window.globalTS.groups.collection.models.length})),this.renderRows(window.globalTS.groups.collection.models),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")},renderRows:function(t){for(var e=0;e<t.length;e++){var n=t[e];this.renderOne({group:n})}},renderOne:function(t){var e=new Nt.GroupListRowView(t);this.$el.find("#group_list_body").append(e.el)},templateGroupsList:function(){var t=[];return t.push('<div id="groups">'),t.push("</div>"),t.push('<div class="groups_container table-responsive">'),t.push("<% if(length === 0) { %>"),t.push("<div>There are no groups yet.</div>"),t.push("<% } else{ %>"),t.push('<table class="grid table table-sm">'),t.push("   <thead>"),t.push("     <th>Name</th>"),t.push("     <th>Members</th> "),t.push("     <th>Repositories</th>"),t.push("   </thead>"),t.push('   <tbody id="group_list_body">'),t.push("   </tbody>"),t.push("</table>"),t.push("<% }%>"),t.push("</div>"),s.default.template(t.join(""))}})},Ft={GroupDetailView:c.a.View.extend({el:"#groups_element",options:{},app:null,initialize:function(t){this.options=s.default.extend(this.options,t),this.app=window.globalTS.groups,null!==this.app.collection?(this.model=this.app.collection.get(this.options.group_id),this.render()):this.fetchGroup()},fetchGroup:function(t){var e=this;this.options=s.default.extend(this.options,t),this.model=new Ht.Group({id:this.options.group_id}),this.model.fetch({success:function(t){console.log("received data: "),console.log(t),e.render()},error:function(t,e){void 0!==e.responseJSON?Z.a.error(e.responseJSON.err_msg):Z.a.error("An error occurred.")}})},render:function(){var t=this.templateRow();this.$el.html(t({group:this.model})),a()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),a()("#center").css("overflow","auto")},templateRow:function(){return s.default.template(["<div>",'<h3><%= _.escape(group.get("name")) %></h3>','<p class="" style="color:gray;">','A group of <%= group.get("members").length %> members with <%= group.get("repositories").length %> repositories and a total of <%= group.get("total_downloads") %> combined repository clones.</p>',"<h3>Members</h3>",'<table class="grid table table-sm">',"<thead>","<th>Name</th>","<th>Repositories</th>","<th>Registered</th>","</thead>","<tbody>",'<% _.each(group.get("members"), function(member) { %>',"<tr>","<td>","<%= _.escape(member.username) %>","</td>","<td>",'<a data-toggle="tooltip" data-placement="top" title="Repositories of <%= _.escape(member.username) %>" href="/repository/browse_repositories_by_user?user_id=<%= member.id %>&use_panels=true" id="<%= member.id %>"><%= member.user_repos_count %></a>',"</td>","<td>","<%= member.time_created %>","</td>","</tr>","<% }); %>","</tbody>","</table>","<h3>Repositories</h3>",'<table class="grid table table-sm">',"<thead>","<th>Name</th>","<th>Description</th>","<th>Clones</th>","<th>Owner</th>","<th>Categories</th>","<th>Created</th>","<th>Updated</th>","<th>Rating</th>","<th>Verified</th>","</thead>","<tbody>",'<% _.each(group.get("repositories"), function(repo) { %>',"<tr>","<td>",'<a data-toggle="tooltip" data-placement="top" title="Details of <%= _.escape(repo.name) %>" href="/view/<%= _.escape(repo.owner) %>/<%= _.escape(repo.name) %>" id="<%= repo.id %>"><%= _.escape(repo.name) %></a>',"</td>","<td>","<%= _.escape(repo.description) %>","</td>","<td>","<%= repo.times_downloaded %>","</td>","<td>","<%= _.escape(repo.owner) %>","</td>","<td>","<% _.each((repo.categories), function(cat) { %>",'<a data-toggle="tooltip" data-placement="top" title="Repositories in <%= cat.name %>" href="/repository/browse_repositories_in_category?id=<%= cat.id %>&use_panels=true"><%= cat.name %></a><br/>',"<% }); %>","</td>",'<td data-toggle="tooltip" data-placement="top" title="<%= repo.time_created_full %>">',"<%= repo.time_created %>","</td>",'<td data-toggle="tooltip" data-placement="top" title="<%= repo.time_updated_full %>">',"<%= repo.time_updated %>","</td>","<td>","<%= repo.ratings_mean %>","</td>","<td>","<%= repo.approved %>","</td>","</tr>","<% }); %>","</tbody>","</table>","</div>"].join(""))}})},Wt=c.a.Router.extend({routes:{"":"groups",":group_id":"group_page"}}),zt={ToolshedGroups:c.a.View.extend({groupListView:null,groupDetailView:null,collection:null,initialize:function(){window.globalTS.groups=this,this.ts_router=new Wt,this.ts_router.on("route:groups",(function(){window.globalTS.groups.groupListView=new $t.GroupListView})),this.ts_router.on("route:group_page",(function(t){window.globalTS.groups.groupDetailView=new Ft.GroupDetailView({group_id:t})})),c.a.history.start({pushState:!1})}})};function Ut(){a()("#spinner").remove(),a()("#main").children().remove()}function Vt(){a()("#main").append('<div id="ie-loading-spinner"></div>')}function Bt(t,e,n,i,a,r,o,s){return{type:void 0!==t?t:"GIE spin",ajax_timeout:void 0!==e?e:2e3,ajax_timeout_max:void 0!==n?n:16e3,ajax_timeout_step:void 0!==i?i:500,sleep:void 0!==a?a:500,sleep_max:void 0!==r?r:8e3,sleep_step:void 0!==o?o:100,log_attempts:void 0===s||s,count:0}}function qt(t,e,n){console.log(t),n&&Ut(),"string"==typeof e&&(Z.a.clear(),Z.a.error(e,"Error",{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}))}function Gt(t){t.sleep<t.sleep_max&&(t.sleep+=t.sleep_step),t.log_attempts&&console.log("".concat(t.type," request ").concat(t.count," request timeout ").concat(t.ajax_timeout,"ms sleeping ").concat(t.sleep/1e3,"s")),window.setTimeout(t.spinner,t.sleep)}function Jt(t,e,n,i,r,o){var s=function(){var s={url:t,xhrFields:{withCredentials:!0},type:"GET",timeout:o.ajax_timeout,success:function(t,e,i){n(t,e,i)||(o.count++,Gt(o))},error:function(t,e,n){"timeout"==e?(o.ajax_timeout<o.ajax_timeout_max&&(o.ajax_timeout+=o.ajax_timeout_step),o.count++,i(t,e,n)||Gt(o)):(o.count++,r(t,e,n)||Gt(o))}};e&&(s.dataType="json"),a.a.ajax(s)};console.log("Setting up new spinner for ".concat(o.type," on ").concat(t)),o.spinner=s,window.setTimeout(s,o.sleep)}function Kt(t,e,n,i,a){var r=function(t,e){1==e.count&&(Vt(),Z.a.info(t,null,{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}))},o=function(t,e,i){return r(n.waiting,a),40==a.count&&Z.a.warning(n.wait_warn,"Warning",{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}),!1};Jt(t,e,(function(t){if(!e||e&&1==t)console.log(n.success),Ut(),Z.a.clear(),i();else{if(e&&0==t)return r(n.not_ready,a),!1;qt("Invalid response to ".concat(a.type," request"),n.invalid_response,!0)}return!0}),o,o,a)}var Xt={append_notebook:function(t){Ut(),a()("#main").append('<iframe frameBorder="0" seamless="seamless" style="width: 100%; height: 100%; overflow:hidden;" scrolling="no" src="'.concat(t,'"></iframe>'))},clear_main_area:Ut,display_spinner:Vt,make_spin_state:Bt,spin_error:qt,spin:Jt,test_ie_availability:function(t,e){Kt(t,!1,{success:"IE connection succeeded, returning",waiting:"Interactive environment container is running, attempting to connect to the IE. Please wait...",wait_warn:"It is taking an usually long time to connect to the interactive environment. Attempts will continue but you may want to report this condition to a Galaxy administrator if it does not succeed soon.",error:"An error was encountered while attempting to connect to the interactive environment, contact your administrator."},e,Bt("IE availability"))},load_when_ready:function(t,e){Kt(t,!0,{success:"Galaxy reports IE container ready, returning",not_ready:"Galaxy is launching a container in which to run this interactive environment. Please wait...",unknown_response:"Galaxy failed to launch a container in which to run this interactive environment, contact a Galaxy administrator.",waiting:"Galaxy is launching a container in which to run this interactive environment. Please wait...",wait_warn:"It is taking an usually long time to start a container. Attempts will continue but you may want to report this condition to a Galaxy administrator if it does not succeed soon.",error:"Galaxy encountered an error while attempting to determine the readiness of this interactive environment's container, contact a Galaxy administrator."},e,Bt("IE container readiness"))},keepAlive:function(t){var e=0,n=window.setInterval((function(){a.a.ajax({url:t,xhrFields:{withCredentials:!0},type:"GET",timeout:500,success:function(){console.log("Connected to IE, returning")},error:function(t,i,a){e++,console.log("Request "+e),e>30&&(window.clearInterval(n),Ut(),Z.a.error("Could not connect to IE, contact your administrator","Error",{closeButton:!0,timeOut:2e4,tapToDismiss:!1}))}})}),1e4)}},Qt=n(173);function Zt(){a()(".embedded-item").each((function(){var t=a()(this);if(!t.hasClass("history")){var e=function(){var e=t.find("input[type=hidden]").val();e||(e=t.data("item-url")),a.a.trim(t.find(".item-content").text())?(t.find(".summary-content").hide("fast"),t.find(".expanded-content").show("fast"),t.find(".toggle-expand").hide(),t.find(".toggle").show()):a.a.ajax({type:"GET",url:e,error:function(){alert("Getting item content failed.")},success:function(e){t.find(".summary-content").hide("fast"),t.find(".item-content").html(e),t.find(".expanded-content").show("fast"),t.find(".toggle-expand").hide(),t.find(".toggle").show(),Object(F.a)()}})},n=function(){t.find(".expanded-content").hide("fast"),t.find(".summary-content").show("fast"),t.find(".toggle").hide(),t.find(".toggle-expand").show()};a()(this).find(".toggle-expand").click((function(){return e(),!1})),a()(this).find(".toggle").click((function(){return n(),!1})),a()(this).find(".toggle-embed").click((function(){return t.find(".expanded-content").is(":visible")?n():e(),!1})),a()(this).hasClass("expanded")&&e()}}))}var te=a.a;var ee=function(t,e,n,i,a,r,o,s,l){void 0===a&&(a=30),void 0===o&&(o=4),te("#".concat(t)).off().click((function(){if(!(te("#renaming-active").length>0)){var t,c=te("#".concat(e)),d=c.text();(t=r?te("<textarea></textarea>").attr({rows:o,cols:a}).text(te.trim(d)):te("<input type='text'></input>").attr({value:te.trim(d),size:a})).attr("id","renaming-active"),t.blur((function(){te(this).remove(),c.show(),l&&l(t)})),t.keyup((function(a){if(27===a.keyCode)te(this).trigger("blur");else if(13===a.keyCode){var r={};r[i]=te(this).val(),te(this).trigger("blur"),te.ajax({url:n,data:r,error:function(){alert("Text editing for elt ".concat(e," failed"))},success:function(e){""!==e?c.text(e):c.html("<em>None</em>"),l&&l(t)}})}})),s&&s(t),c.hide(),t.insertAfter(c),t.focus(),t.select()}}))},ne=n(165),ie=n(74),ae=n(19),re=c.a.Model.extend({defaults:{config:{}},urlRoot:function(){return Object(d.getAppRoot)()+"api/visualizations"},initialize:function(t){s.default.isObject(t.config)&&s.default.isObject(this.defaults.config)&&s.default.defaults(t.config,this.defaults.config),this._setUpListeners()},_setUpListeners:function(){},set:function(t,e){if("config"===t){var n=this.get("config");s.default.isObject(n)&&(e=s.default.extend(s.default.clone(n),e))}return c.a.Model.prototype.set.call(this,t,e),this},toString:function(){var t=this.get("id")||"";return this.get("title")&&(t+=":".concat(this.get("title"))),"Visualization(".concat(t,")")}});c.a.Collection.extend({model:re,url:function(){return"".concat(Object(d.getAppRoot)(),"api/visualizations")},initialize:function(t,e){e=e||{}},set:function(t,e){var n=this;t=s.default.map(t,(function(t){var e=n.get(t.id);if(!e)return t;var i=e.toJSON();return s.default.extend(i,t),i})),c.a.Collection.prototype.set.call(this,t,e)},toString:function(){return["VisualizationCollection(",[this.historyId,this.length].join(),")"].join("")}});function oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||se(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(t,e){if(t){if("string"==typeof t)return le(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(t,e):void 0}}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ce=/^groups_([0-9]+)\|([\w]+)/,de=c.a.Model.extend({defaults:{title:"",type:"",date:null,state:"",state_info:"",modified:!0,dataset_id:"",dataset_id_job:null},initialize:function(t,e){this.groups=new c.a.Collection,this.settings=new c.a.Model,this.visualization_id=e.visualization_id,this.visualization_name=e.visualization_name,this.dataset_id=e.dataset_id,this.chart_dict=e.chart_dict,console.debug("model::initialize() - Initialized with configuration:"),console.debug(e)},reset:function(){this.clear().set({title:"New Chart",dataset_id:this.dataset_id}),this.settings.clear(),this.groups.reset();var t,e=window.location.search,n={},i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=se(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}(new URLSearchParams(e).entries());try{for(i.s();!(t=i.n()).done;){var a=oe(t.value,2),r=a[0],o=a[1],s=r.match(ce);if(s){var l=s[1],c=s[2];n[l]=n[l]||{},n[l][c]=o,n[l].id=l}else this.settings.set(r,o)}}catch(t){i.e(t)}finally{i.f()}Object.keys(n).length>0?this.groups.set(Object.values(n)):this.groups.add({id:m.b.uid()})},state:function(t,e){this.set({state:t,state_info:e}),this.trigger("set:state"),console.debug("model::state() - "+e+" ("+t+")")},serialize:function(){var t={attributes:this.attributes,settings:this.settings.attributes,groups:[]};return this.groups.each((function(e){t.groups.push(e.attributes)})),t},save:function(t){var e=this;t=t||{},this.chart_dict=this.serialize(),new re({id:this.visualization_id||void 0,type:this.visualization_name,title:this.get("title")||"",config:{dataset_id:this.dataset_id,chart_dict:this.chart_dict}}).save().then((function(n){n&&n.id?(e.visualization_id=n.id,t.success&&t.success(),console.debug("model::save() - Received visualization id: "+n.id)):(t.error&&t.error(),console.debug("model::save() - Unrecognized response. Saving may have failed."))})).fail((function(e){t.error&&t.error(),console.debug("model::save() - Saving failed.")})),console.debug("model::save() - Saving with configuration.")},load:function(t){var e=t||this.chart_dict;return e&&(console.debug("model::load() - Attempting to load with configuration:"),console.debug(e)),this.reset(),e&&e.attributes?(this.set(e.attributes),this.state("ok","Loading saved visualization..."),this.settings.set(e.settings),this.groups.reset(),this.groups.add(e.groups),this.set("modified",!1),this.trigger("load"),console.debug("model::load() - Loading chart model "+e.attributes.type+"."),!0):(this.set("modified",!0),this.trigger("load"),console.debug("model::load() - Visualization attributes unavailable."),!1)}}),ue=n(164),he=n(57),fe=n(200),pe=n(126),me=c.a.View.extend({initialize:function(t,e){var n=this;this.deferred=t.deferred,this.chart=t.chart,this.group=e.group,this.setElement(a()("<div/>")),this.listenTo(this.chart,"change:dataset_id",(function(){n.render()})),this.render()},render:function(){var t=this,e=m.b.clone(this.chart.plugin.groups)||[],n=this.chart.get("dataset_id");n&&(this.chart.state("wait","Loading metadata..."),this.deferred.execute((function(i){m.b.get({url:Object(d.getAppRoot)()+"api/datasets/"+n,cache:!0,success:function(n){var a={};pe.a.visitInputs(e,(function(e,i){if("data_column"==e.type){a[i]=m.b.clone(e);var r=[];e.is_auto&&r.push({label:"Column: Row Number",value:"auto"}),e.is_zero&&r.push({label:"Column: None",value:"zero"});var o=n.metadata_column_types;for(var s in o)(-1!=["int","float"].indexOf(o[s])&&e.is_numeric||e.is_label)&&r.push({label:"Column: "+(parseInt(s)+1),value:s});e.data=r}var l=t.group.get(i);void 0===l||e.hidden||(e.value=l)})),e.push({name:"__data_columns",type:"hidden",hidden:!0,value:a}),t.chart.state("ok","Metadata initialized..."),t.form=new he.a({inputs:e,onchange:function(){t.group.set(t.form.data.create()),t.chart.set("modified",!0),t.chart.trigger("redraw")}}),t.group.set(t.form.data.create()),t.$el.empty().append(t.form.$el),i.resolve(),t.chart.trigger("redraw")}})})))}}),_e=c.a.View.extend({initialize:function(t){var e=this;this.app=t,this.chart=t.chart,this.repeat=new fe.a.View({title:"Data series",title_new:"Data series",min:1,onnew:function(){e.chart.groups.add({id:m.b.uid()})}}),this.setElement(a()("<div/>").append(this.repeat.$el)),this.listenTo(this.chart.groups,"remove",(function(t){e.repeat.del(t.id),e.chart.trigger("redraw")})),this.listenTo(this.chart.groups,"reset",(function(){e.repeat.delAll()})),this.listenTo(this.chart.groups,"add",(function(t){e.repeat.add({id:t.id,$el:new me(e.app,{group:t}).$el,ondel:function(){e.chart.groups.remove(t)}})}))},render:function(){s.default.size(this.chart.plugin.groups)>0?this.repeat.$el.show():this.repeat.$el.hide()}}),ge=c.a.View.extend({initialize:function(t,e){var n=this;this.chart=t.chart,this.setElement("<div/>"),this.listenTo(this.chart,"load",(function(){n.render()}))},render:function(){var t=this,e=m.b.clone(this.chart.plugin.settings)||[],n=this.chart.plugin.specs.use_panels;"optional"==n?e.push({name:"__use_panels",type:"boolean",label:"Use multi-panels",help:"Would you like to separate your data into individual panels?",value:!1}):this.chart.settings.set("__use_panels","yes"==n?"true":"false"),this.$el.empty(),s.default.size(e)>0&&(pe.a.visitInputs(e,(function(e,n){var i=t.chart.settings.get(n);void 0===i||e.hidden||(e.value=i)})),this.form=new he.a({inputs:e,onchange:function(){t.chart.settings.set(t.form.data.create()),t.chart.trigger("redraw")}}),this.chart.settings.set(this.form.data.create()),this.$el.append(this.form.$el))}}),ve=c.a.View.extend({initialize:function(t){this.plugin=t.chart.plugin,this.setElement(this._template()),this.$title=this.$(".charts-description-title"),this.$image=this.$(".charts-description-image"),this.$text=this.$(".charts-description-text"),this.render()},render:function(){this.plugin.logo?(this.$image.attr("src",Object(d.getAppRoot)()+this.plugin.logo),this.$title.html(this.plugin.html||"Unavailable"),this.$text.html(m.b.linkify(this.plugin.description||"")),this.$el.show()):this.$el.hide()},_template:function(){return'<div class="charts-description">\n                    <table>\n                    <tr>\n                        <td class="charts-description-image-td">\n                            <img alt="charts description" class="charts-description-image"/>\n                        </td>\n                        <td>\n                            <div class="charts-description-title"/>\n                        </td>\n                    </tr>\n                    </table>\n                    <div class="charts-description-text"/>\n                </div>'}}),ye=c.a.View.extend({initialize:function(t,e){var n=this;this.app=t,this.chart=this.app.chart,this.description=new ve(this.app),this.title=new ae.a.Input({onchange:function(){n.chart.set("title",n.title.value())}}),this.tabs=new ue.a.View({}),this.tabs.add({id:"settings",icon:"fa fa-gear",tooltip:"Change settings.",$el:a()("<div/>").append("<label><b>Provide a title</b><label>").append(this.title.$el).append(a()("<div/>").addClass("form-text text-muted").html("This title will appear in the list of 'Saved Visualizations'.")).append(new ge(this.app).$el)}),this.chart.plugin.groups&&this.tabs.add({id:"groups",icon:"fa-database",tooltip:"Select data.",$el:new _e(this.app).$el}),this.setElement("<div class='charts-editor'/>"),this.$el.append(this.description.$el),this.$el.append(this.tabs.$el),this.listenTo(this.chart,"load",(function(){n.title.value(n.chart.get("title"))}))}}),be=c.a.View.extend({initialize:function(t,e){var n=this;this.app=t,this.chart=this.app.chart,this.options=e,this.setElement(a()("<div/>").addClass("charts-viewer").append(a()("<div/>").addClass("info").append(a()("<span/>").addClass("icon")).append(a()("<span/>").addClass("text")))),this.$info=this.$(".info"),this.$icon=this.$(".icon"),this.$text=this.$(".text"),this._fullscreen(this.$el,20),this._createContainer("div"),this.chart.on("redraw",(function(t){n.chart.get("modified")&&n.chart.plugin.specs.confirm&&!t?n.chart.state("info","Please confirm the settings before rendering the results."):n.app.deferred.execute((function(t){console.debug("viewer:redraw() - Redrawing..."),n._draw(t,n.chart)}))})),this.chart.on("set:state",(function(){var t=n.$(".charts-viewer-container"),e=n.$info,i=n.$icon,a=n.$text;switch(i.removeClass(),e.show(),a.html(n.chart.get("state_info")),n.chart.get("state")){case"ok":e.hide(),t.show();break;case"failed":i.addClass("icon fa fa-warning"),t.hide();break;case"info":i.addClass("icon fa fa-info"),t.hide();break;default:i.addClass("icon fa fa-spinner fa-spin"),t.show()}}))},_fullscreen:function(t,e){t.css("height",a()(window).height()-e),a()(window).resize((function(){t.css("height",a()(window).height()-e)}))},_createContainer:function(t,e){t=t||"div",e=e||1,this.$(".charts-viewer-container").remove(),this.targets=[];for(var n=0;n<e;n++){var i=m.b.uid(),r=a()("<div/>").addClass("charts-viewer-container").width(parseInt(100/e)+"%").append(a()("<"+t+" class='charts-viewer-canvas' />").attr("id",i));this.$el.append(r),this.targets.push(i)}},_draw:function(t,e){var n="true"==e.settings.get("__use_panels")?e.groups.length:1;this._createContainer(e.plugin.specs.tag,n),e.set("date",m.b.time()),e.state("wait","Please wait..."),this.app.chart_load({process:t,chart:e,dataset:this.app.dataset,targets:this.targets})}});function we(t,e){var n=document.createElement("a");n.download=e,n.href=t,n.click()}function ke(t,e){we(t.replace("image/png","image/octet-stream"),"".concat(e||"GalaxyImage",".png"))}function xe(t){var e=t.$el.find("svg");if(0!=e.length||!t.error){var n=e.length,i=parseInt(e.first().css("height")),r=parseInt(e.first().css("width")),o=new XMLSerializer,s=a()("<svg/>").attr({version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:r*n,height:i}),l=0;return e.each((function(){var t=a()(this).clone();!function(t){for(var e in document.styleSheets){var n=document.styleSheets[e].cssRules;if(n)for(var i=0,a=n.length;i<a;i++)try{t.find(n[i].selectorText).each((function(t,e){e.style.cssText+=n[i].style.cssText}))}catch(t){console.error(t)}}}(t);var e=a()('<g transform="translate('+l+', 0)">').attr("xmlns","http://www.w3.org/2000/svg");e.append(t.find("g").first()),s.append(e),l+=r})),{string:o.serializeToString(s[0]),height:i,width:r}}t.error("No SVG found. This visualization type does not support SVG/PDF export.")}var Se={createPNG:function(t){t.$el.find("svg").length>0?function(t){var e=xe(t),n=document.createElement("canvas"),i=n.getContext("2d"),r=new Image,o=a()('<div style="display:none;"/>').append(a()(n));a()("body").append(o),n.width=5*e.width,n.height=5*e.height,r.src="data:image/svg+xml;base64,"+window.btoa(e.string),r.onload=function(){i.drawImage(r,0,0,n.width,n.height),ke(n.toDataURL("image/png"),t.title),o.remove()}}(t):function(t){var e=t.$el.find(".charts-viewer-canvas");try{if(0!==e.width()&&0!==e.height()){var n=document.createElement("canvas");n.width=e.outerWidth(!0),n.height=e.outerHeight(!0);var i=n.getContext("2d");i.save(),i.fillStyle="rgb(255,255,255)",i.fillRect(0,0,n.width,n.height),i.restore(),i.translate(0,0),i.textAlign="left",i.textBaseline="top",e.children().each((function(){!function t(e,n,i,r){var o=e.prop("tagName").toLowerCase(),s=e.position(),l=n+s.left+parseInt(e.css("marginLeft"),10)+parseInt(e.css("borderLeftWidth"),10)+parseInt(e.css("paddingLeft"),10),c=i+s.top+parseInt(e.css("marginTop"),10)+parseInt(e.css("borderTopWidth"),10)+parseInt(e.css("paddingTop"),10);"div"==o||"span"==o?e.children().each((function(){t(a()(this),l,c)})):"canvas"==o&&r.drawImage(e[0],l,c)}(a()(this),0,0,i)}));var r=n.toDataURL("image/png");r&&ke(r,t.title)}}catch(e){console.debug("FAILED - screenshot::_canvas2png() - "+e),t.error&&t.error("Please reduce your visualization to a single panel and try again.")}}(t)},createSVG:function(t){we("data:none/none;base64,".concat(window.btoa(xe(t).string)),"".concat(t.title||"GalaxyImage",".svg"))},createPDF:function(t){var e=xe(t),n={filename:"visualization",type:"application/pdf",height:e.height,width:e.width,scale:2,svg:e.string},i=a()("body"),r=i.find("#viewer-form");for(var o in 0===r.length&&(r=a()("<form>",{id:"viewer-form",method:"post",action:"http://export.highcharts.com/",display:"none"}),i.append(r)),r.empty(),n){var s=a()("<input/>",{type:"hidden",name:o,value:n[o]});r.append(s)}try{r.submit()}catch(t){console.log(t)}}};function Me(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Te=c.a.View.extend({initialize:function(t){var e=this;this.app=t,this.model=new c.a.Model({visible:!1}),this.execute_button=new ae.a.Button({icon:"fa-check-square",tooltip:"Confirm",onclick:function(){t.chart.trigger("redraw",!0)}}),this.export_button=new ae.a.ButtonMenu({icon:"fa-camera",tooltip:"Export"}),this.export_button.addMenu({key:"png",title:"Save as PNG",icon:"fa-file",onclick:function(){e._wait(t.chart,(function(){Se.createPNG({$el:t.viewer.$el,title:t.chart.get("title"),error:function(e){t.message.update({message:e,status:"danger"})}})}))}}),this.export_button.addMenu({key:"svg",title:"Save as SVG",icon:"fa-file-text-o",onclick:function(){e._wait(t.chart,(function(){Se.createSVG({$el:t.viewer.$el,title:t.chart.get("title"),error:function(e){t.message.update({message:e,status:"danger"})}})}))}}),this.export_button.addMenu({key:"pdf",title:"Save as PDF",icon:"fa-file-o",onclick:function(){t.modal.show({title:"Send visualization data for PDF creation",body:"Galaxy does not provide integrated PDF export scripts. You may click 'Continue' to create the PDF by using a 3rd party service (https://export.highcharts.com).",buttons:{Cancel:function(){t.modal.hide()},Continue:function(){t.modal.hide(),e._wait(t.chart,(function(){Se.createPDF({$el:t.viewer.$el,title:t.chart.get("title"),error:function(e){t.message.update({message:e,status:"danger"})}})}))}}})}}),this.left_button=new ae.a.Button({icon:"fa-angle-double-left",tooltip:"Show",onclick:function(){e.model.set("visible",!0),window.dispatchEvent(new Event("resize"))}}),this.right_button=new ae.a.Button({icon:"fa-angle-double-right",tooltip:"Hide",onclick:function(){e.model.set("visible",!1),window.dispatchEvent(new Event("resize"))}}),this.save_button=new ae.a.Button({icon:"fa-save",tooltip:"Save",onclick:function(){t.chart.get("title")?(t.message.update({message:"Saving '".concat(t.chart.get("title"),"'. It will appear in the list of 'Saved Visualizations'."),status:"success"}),t.chart.save({error:function(){t.message.update({message:"Could not save visualization.",status:"danger"})}})):t.message.update({message:"Please provide a name.",status:"danger"})}}),this.buttons=[this.left_button,this.right_button,this.execute_button,this.export_button,this.save_button],this.setElement("<div/>");var n,i=Me(this.buttons);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.$el.append(a.$el)}}catch(t){i.e(t)}finally{i.f()}this.listenTo(this.model,"change",(function(){return e.render()})),this.render()},render:function(){var t=this.model.get("visible");this.app.$el[t?"removeClass":"addClass"]("charts-fullscreen"),this.execute_button.model.set("visible",t&&!!this.app.chart.plugin.specs.confirm),this.save_button.model.set("visible",t),this.export_button.model.set("visible",t),this.right_button.model.set("visible",t),this.left_button.model.set("visible",!t);var e=this.app.chart.plugin.specs.exports||[];this.export_button.collection.each((function(t){t.set("visible",-1!==e.indexOf(t.get("key")))}))},_wait:function(t,e){this.app.deferred.ready()?e():this.app.message.update({message:"Your visualization is currently being processed. Please wait and try again."})}}),je=c.a.View.extend({initialize:function(t){var e=this,n=Object(r.a)();this.modal=n&&n.modal?n.modal:new ie.a.View,this.setElement(a()("<div/>").addClass("charts-client").append(a()("<div/>").addClass("charts-buttons")).append(a()("<div/>").addClass("charts-center")).append(a()("<div/>").addClass("charts-right"))),this.$center=this.$(".charts-center"),this.$right=this.$(".charts-right"),this.$buttons=this.$(".charts-buttons"),this.chart=new de({},t),this.chart.plugin=t.visualization_plugin,this.chart.plugin.specs=this.chart.plugin.specs||{},this.chart_load=t.chart_load,this.message=new ae.a.Message,this.deferred=new ne.a,this.viewer=new be(this),this.editor=new ye(this),this.menu=new Te(this),this.$center.append(this.viewer.$el),this.$right.append(this.message.$el).append(this.editor.$el),this.$buttons.append(this.menu.$el),a.a.ajax({url:"".concat(Object(d.getAppRoot)(),"api/datasets/").concat(t.dataset_id)}).done((function(t){e.dataset=t,e.chart.load(),e.chart.trigger("redraw")})).fail((function(t){var n=t.responseJSON&&t.responseJSON.err_msg;e.errormessage=n||"Import failed for unkown reason."}))}}),Oe={},Le=function(t){var e=t.dataset_groups,n=t.dataset_id,i=[];e.each((function(t){s.default.each(t.get("__data_columns"),(function(e,a){var r=t.get(a),o=Ae(n,r);-1!==i.indexOf(r)||Oe[o]||"auto"==r||"zero"==r||void 0===r||i.push(r)}))})),0!==i.length?m.b.get({url:Object(d.getAppRoot)()+"api/datasets/"+n,data:{data_type:"raw_data",provider:"dataset-column",indeces:i.toString()},success:function(e){for(var a=i.length,r=new Array(a),o=0;o<r.length;o++)r[o]=[];for(var s in e.data){var l=e.data[s];for(var c in l){var d=l[c];void 0!==d&&2147483647!=d&&c<a&&r[c].push(d)}}for(var u in console.debug("tabular-datasets::_fetch() - Fetching complete."),r){var h=i[u],f=Ae(n,h);Oe[f]=r[u]}De(t)}}):De(t)},De=function(t){var e=t.dataset_groups,n=t.dataset_id;console.debug("tabular-datasets::_fillFromCache() - Filling request from cache.");var i=0;e.each((function(t){s.default.each(t.get("__data_columns"),(function(e,a){var r=t.get(a),o=Ae(n,r),s=Oe[o];s&&(i=Math.max(i,s.length))}))})),0===i&&(console.debug("tabular-datasets::_fillFromCache() - No data available."),t.chart&&t.chart.state("failed","No data available."));var a=[];e.each((function(t,e){for(var n=m.b.merge({key:e+":"+t.get("key"),values:[]},t.attributes),r=0;r<i;r++)n.values[r]={x:parseInt(r)};a.push(n)})),e.each((function(t,e){var r=a[e].values;s.default.each(t.get("__data_columns"),(function(e,a){var o=t.get(a);switch(o){case"auto":for(var s=0;s<i;s++)r[s][a]=parseInt(s);break;case"zero":for(var l=0;l<i;l++)r[l][a]=0;break;default:for(var c=Ae(n,o),d=Oe[c],u=0;u<i;u++){var h=r[u],f=d[u];isNaN(f)&&!e.is_label&&(f=0),h[a]=f}}}))})),t.success(a)},Ae=function(t,e){return t+"__"+e},Ee={request:Le,requestPanels:function(t){var e=t.process,n=t.chart,i=t.render,a=t.targets,r=t.dataset_id||t.chart.get("dataset_id"),o=t.dataset_groups||t.chart.groups;Le({chart:n,dataset_id:r,dataset_groups:o,success:function(t){try{if(a.length==t.length){var r=!0;for(var o in t){var s=t[o];if(!i(a[o],[s])){r=!1;break}}r&&n.state("ok","Multi-panel chart drawn.")}else 1==a.length?i(a[0],t)&&n.state("ok","Chart drawn."):n.state("failed","Invalid panel count.");e.resolve()}catch(t){console.debug("FAILED: tabular-utilities::panelHelper() - "+t),n.state("failed",t),e.reject()}}})}};function Ie(t,e){s.default.each(e,(function(e){s.default.each(e.values,(function(e,n){for(var i in t)e[i]=parseInt(n)}))}))}var Pe={makeCategories:function(t,e){var n={},i=t[0].__data_columns;return s.default.each(e,(function(t){i[t].is_label&&(n[t]=[])})),t&&t[0]&&s.default.each(t[0].values,(function(t){for(var e in n)n[e].push(String(t[e]))})),Ie(n,t),{array:n}},makeUniqueCategories:function(t,e){var n={},i={},a={},r=t[0].__data_columns;for(var o in s.default.each(r,(function(t,e){t.is_label&&(n[e]={},i[e]=[],a[e]=0)})),t){var l=t[o];for(var c in l.values){var d=l.values[c];for(var u in n){var h=String(d[u]);void 0===n[u][h]&&(n[u][h]=a[u],i[u].push(e?[a[u],h]:h),a[u]++)}}}for(var f in t){var p=t[f];for(var m in p.values){var _=p.values[m];for(var g in n){var v=String(_[g]);_[g]=n[g][v]}}}return{categories:n,array:i,counter:a}},makeSeries:function(t,e){var n=[];for(var i in t){var a=t[i],r=[];for(var o in a.values){var s=[];if(e)for(var l in e){var c=e[l];s.push(a.values[o][c])}else for(var d in a.values[o])s.push(a.values[o][d]);r.push(s)}n.push(r)}return n},getDomains:function(t,e){function n(e,n){var i;for(var a in t){var r=f[e](t[a].values,(function(t){return t[n]}));i=void 0===i?r:Math[e](i,r)}return i}var i={};for(var a in e){var r=e[a];i[r]={min:n("min",r),max:n("max",r)}}return i},mapCategories:Ie,makeTickFormat:function(t){var e=t.type,n=t.precision,i=t.categories,a=t.formatter;if("hide"==e)a((function(){return""}));else if("auto"==e)i&&a((function(t){return i[t]||""}));else{var r=function(t){switch(e){case"s":var i=f.formatPrefix(t);return i.scale(t).toFixed()+i.symbol;default:return f.format("."+n+e)(t)}};a(i?function(t){var e=i[t];if(!e)return"";if(isNaN(e))return e;try{return r(e)}catch(t){return e}}:function(t){return r(t)})}},addZoom:function(t){var e=100,n=t.yAxis,i=t.xAxis,a=t.xDomain||i.scale().domain,r=t.yDomain||n.scale().domain,o=t.redraw,s=t.svg,l=i.scale(),c=n.scale(),d=l.domain().slice(),u=c.domain().slice(),h=f.behavior.zoom();function p(t,n){return t[0]=Math.min(Math.max(t[0],n[0]),n[1]-n[1]/e),t[1]=Math.max(n[0]+n[1]/e,Math.min(t[1],n[1])),t}return l.nice(),c.nice(),h.x(l).y(c).scaleExtent([1,e]).on("zoom",(function(){r(p(c.domain(),u)),a(p(l.domain(),d)),o()})),s.call(h).on("dblclick.zoom",(function(){a(d),r(u),o(),h.scale(1),h.translate([0,0])})),h}},Ye=function t(e,n,i){m.b.request({type:"GET",url:Object(d.getAppRoot)()+"api/datasets/"+e.get("dataset_id_job"),data:{},success:function(a){var r=!1;switch(a.state){case"ok":e.state("wait","Job completed successfully..."),n&&n(a),r=!0;break;case"error":e.state("failed","Job has failed. Please check the history for details."),i&&i(a),r=!0;break;case"running":e.state("wait","Your job is running in the background and you may close the browser tab. Results will be available in your saved visualizations list.")}r||window.setTimeout((function(){t(e,n,i)}),1e3)}})},Re=function(){var t=Object(r.a)();t&&t.currHistoryPanel&&t.currHistoryPanel.refreshContents()},He={request:function(t,e,n,i){t.state("wait","Requesting job results..."),t.get("modified")&&t.get("dataset_id_job")&&(m.b.request({type:"PUT",url:Object(d.getAppRoot)()+"api/histories/none/contents/"+t.get("dataset_id_job"),data:{deleted:!0},success:function(){Re()}}),t.set("dataset_id_job",null),t.set("modified",!1)),t.get("dataset_id_job")?Ye(t,n,i):(t.state("wait","Sending job request..."),m.b.request({type:"POST",url:Object(d.getAppRoot)()+"api/tools",data:e,success:function(e){if(e.outputs&&0!==e.outputs.length){Re();var a=e.outputs[0];t.state("wait","Your job has been queued. You may close the browser window. The job will run in the background."),t.set("dataset_id_job",a.id),t.save(),Ye(t,n,i)}else t.state("failed","Job submission failed. No response."),i&&i()},error:function(n){var a="";n&&n.message&&n.message.data&&n.message.data.input&&(a=n.message.data.input+"."),t.state("failed","This visualization requires the '"+e.tool_id+"' tool. Please make sure it is installed. "+a),i&&i()}}))},requestCharts:function(t,e){var n="",i="",a=0;for(var r in t.settings.attributes){var o=t.settings.get(r);s.default.each([[" ","&#32;"],[",","&#44;"],[":","&#58;"]],(function(t){o=o.replace(new RegExp(t[0],"g"),t[1])})),n+=r+":"+o+", "}return n=n.substring(0,n.length-2),t.groups.each((function(t){a++,s.default.each(t.get("__data_columns"),(function(e,n){i+=n+"_"+a+":"+(parseInt(t.get(n))+1)+", "}))})),i=i.substring(0,i.length-2),{tool_id:"toolshed.g2.bx.psu.edu/repos/iuc/charts/charts/1.0.1",inputs:{input:{id:t.get("dataset_id"),src:"hda"},module:e,columns:i,settings:n}}}},Ne=n(148);function $e(t,e){console.log("initMasthead");var n=a()("#masthead");if(t.hide_masthead)n.remove();else if(e){var i=new Ne.a;Object(Ne.b)(e,t,i)}}function Fe(t){console.log("panelManagement"),console.log("(looks like it's assinging some global handlers to window to manage the left and right panel views?)");var e=t.left_panel,n=t.right_panel,i=t.rightPanelSelector,a=t.leftPanelSelector;if(e){var r=new window.bundleEntries.panels.LeftPanel({el:a});window.force_left_panel=function(t){console.log("window.force_left_panel fired"),r.force_panel(t)}}if(n){var o=new window.bundleEntries.panels.RightPanel({el:i});window.handle_minwidth_hint=function(t){console.log("window.handle_minwidth_hint",t),o.handle_minwidth_hint(t)},window.force_right_panel=function(t){console.log("window.force_right_panel",t),o.force_panel(t)}}}var We=n(92),ze=n(261),Ue=n(262),Ve=n(8),Be=n(169),qe=n(95),Ge=n(68);function Je(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||Xe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Xe(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Xe(t,e){if(t){if("string"==typeof t)return Qe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(t,e):void 0}}function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tn(t,e,n){return e&&Ze(t.prototype,e),n&&Ze(t,n),t}function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=sn(t);if(e){var a=sn(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return on(this,n)}}function on(t,e){return!e||"object"!==en(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sn(t){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var cn=function t(e,n){ln(this,t),e.references.push(this),this.nodeId=n.id},dn=function(t){nn(n,t);var e=rn(n);function n(t,i,a){var r;return ln(this,n),(r=e.call(this,t,i)).toolInput=a,r}return n}(cn),un=function(t){nn(n,t);var e=rn(n);function n(t,i,a){var r;return ln(this,n),(r=e.call(this,t,i)).pja=a,r}return n}(cn),hn=function(){function t(e){ln(this,t),this.name=e,this.references=[]}return tn(t,[{key:"canExtract",value:function(){return!0}}]),t}(),fn=function(){function t(){ln(this,t),this.parameters=[]}return tn(t,[{key:"getParameter",value:function(t){var e,n=Ke(this.parameters);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.name==t)return i}}catch(t){n.e(t)}finally{n.f()}var a=new hn(t);return this.parameters.push(a),a}},{key:"getParameterFromMatch",value:function(t){return this.getParameter(t.substring(2,t.length-1))}}]),t}();var pn=n(86);function mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gn(t,e,n){return e&&_n(t.prototype,e),n&&_n(t,n),t}var vn=[.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.33,1.5,2,2.5,3,4],yn=7,bn=["input","text","textarea"],wn=function(){function t(e){mn(this,t),this.panel=e}return gn(t,[{key:"test",value:function(t,e){var n=this;window.clearTimeout(this.timeout);var i=t.pageX,r=t.pageY,o=a()(this.panel),s=o.position(),l=o.width(),c=o.height(),d=o.parent(),u=d.width(),h=d.height(),f=d.offset(),p=f.left,m=f.top,_=p+d.width(),g=m+d.height(),v=-(l-u/2),y=-(c-h/2),b=u/2,w=h/2,k=!1,x=0;i-5<p?s.left<b&&(x=Math.min(23,b-s.left),o.css("left",s.left+x),k=!0):i+5>_?s.left>v&&(x=Math.min(23,s.left-v),o.css("left",s.left-x),k=!0):r-5<m?s.top<w&&(x=Math.min(23,w-s.top),o.css("top",s.top+x),k=!0):r+5>g&&s.top>y&&(x=Math.min(23,s.top-v),o.css("top","".concat(s.top-x,"px")),k=!0),k&&(e(),this.timeout=window.setTimeout((function(){n.test(t,e)}),50))}},{key:"stop",value:function(){window.clearTimeout(this.timeout)}}]),t}();function kn(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}var xn=function(){function t(e){mn(this,t),this.app=e,this.cv=a()("#canvas-viewport"),this.cc=this.cv.find("#canvas-container"),this.overview=a()("#overview-container"),this.oc=this.overview.find("#overview-canvas"),this.ov=this.overview.find("#overview-viewport"),this.zoomLevel=yn,this.canvasZoom=vn[yn],this.init_drag(),this.init_copy_paste()}return gn(t,[{key:"setZoom",value:function(t){return this.zoomLevel=Math.min(Math.max(0,t),vn.length-1),this.canvasZoom=vn[this.zoomLevel],this.cv.css("transform-origin","top left"),this.cv.css("transform","scale("+this.canvasZoom+")"),this.cv.css("width","".concat(100/this.canvasZoom,"%")),this.cv.css("height","".concat(100/this.canvasZoom,"%")),this._fitCanvasToNodes(),this.drawOverview(),this.zoomLevel}},{key:"move",value:function(t,e){t=Math.min(t,this.cv.width()/2),t=Math.max(t,-this.cc.width()+this.cv.width()/2),e=Math.min(e,this.cv.height()/2),e=Math.max(e,-this.cc.height()+this.cv.height()/2),this.cc.css({left:t,top:e}),this.cv.css({"background-position-x":t,"background-position-y":e}),this.updateViewportOverlay()}},{key:"init_drag",value:function(){var t,e,n=this,i=this;this.cc.each((function(){this.scroll_panel=new wn(this)})),this.cv.bind("click",(function(){document.activeElement.blur()})).bind("dragstart",(function(){var n=a()(this).offset(),r=i.cc.position();e=r.top-n.top,t=r.left-n.left})).bind("drag",(function(i,a){n.move((a.offsetX+t)/n.canvasZoom,(a.offsetY+e)/n.canvasZoom)})).bind("dragend",(function(){i.drawOverview()})),this.overview.click((function(t){if(i.overview.hasClass("blockaclick"))i.overview.removeClass("blockaclick");else{var e=i.cc.width(),a=i.cc.height(),r=i.oc.width(),o=i.oc.height(),s=t.pageX-i.oc.offset().left-i.ov.width()/2,l=t.pageY-i.oc.offset().top-i.ov.height()/2;n.move(-s/r*e,-l/o*a),n.drawOverview()}})),this.ov.bind("drag",(function(t,e){var a=i.cc.width(),r=i.cc.height(),o=i.oc.width(),s=i.oc.height(),l=e.offsetX-i.overview.offset().left,c=e.offsetY-i.overview.offset().top;n.move(-l/o*a,-c/s*r)})).bind("dragend",(function(){i.overview.addClass("blockaclick"),i.drawOverview()})),a()(".workflow-overview").bind("drag",(function(t,e){var n=a()(this).offsetParent(),r=n.offset(),o=Math.max(n.width()-(e.offsetX-r.left),n.height()-(e.offsetY-r.top));a()(this).css({width:o,height:o}),i.drawOverview()})),a()(".workflow-overview div").bind("drag",(function(){})),a()(".workflow-overview").bind("dragend",(function(t,e){var n=a()(this).offsetParent(),i=n.offset(),r=Math.max(n.width()-(e.offsetX-i.left),n.height()-(e.offsetY-i.top));localStorage.setItem("overview-size","".concat(r,"px"))}));var r=localStorage.getItem("overview-size");void 0!==r&&a()(".workflow-overview").css({width:r,height:r})}},{key:"init_copy_paste",value:function(){var t=this;document.addEventListener("copy",(function(e){document.activeElement&&!bn.includes(document.activeElement.type)&&(t.app.activeNode&&"subworkflow"!==t.app.activeNode.type&&e.clipboardData.setData("application/json",JSON.stringify({nodeId:t.app.activeNode.id})),e.preventDefault())})),document.addEventListener("paste",(function(e){if(document.activeElement&&!bn.includes(document.activeElement.type)){var n;try{n=JSON.parse(e.clipboardData.getData("application/json")).nodeId}catch(t){console.debug(t)}n&&t.app.nodes[n]&&t.app.nodes[n].onClone(),e.preventDefault()}}))}},{key:"updateViewportOverlay",value:function(){var t=this.cc,e=this.cv,n=this.oc,i=this.ov,a=t.width(),r=t.height(),o=n.width(),s=n.height(),l=t.position();i.css({left:-l.left/a*o,top:-l.top/r*s,width:e.width()/a*o-2,height:e.height()/r*s-2})}},{key:"drawOverview",value:function(){this._fitCanvasToNodes();var t,e,n,i,r=a()("#overview-canvas"),o=r.parent().parent().width(),s=r.get(0).getContext("2d"),l=a()("#canvas-container").width(),c=a()("#canvas-container").height(),d=this.cv.width(),u=this.cv.height();l<d&&c<u?(i=(o-(n=l/d*o))/2,e=(o-(t=c/u*o))/2):l<c?(e=0,t=o,i=(o-(n=Math.ceil(t*l/c)))/2):(n=o,i=0,e=(o-(t=Math.ceil(n*c/l)))/2),r.parent().css({left:i,top:e,width:n,height:t}),r.attr("width",n),r.attr("height",t);var h=function(e,i){var a=e.position(),r=a.left/l*n,o=a.top/c*t,d=e.width()/l*n,u=e.height()/c*t;s.fillStyle=i,s.fillRect(r,o,d,u)};this.highlightInOverlay=function(t){var e=a()(t.element),n=0,i="#25537b";t.errors&&(i="#e31a1e");var r=function(t,e,n){var i=[];i.push(t);for(var a=kn(t),r=kn(e),o=Math.round((r.r-a.r)/(n+1)),s=Math.round((r.g-a.g)/(n+1)),l=Math.round((r.b-a.b)/(n+1)),c=0;c<n;c++)a.r+=o,a.g+=s,a.b+=l,i.push((d=a.r,u=a.g,h=a.b,"#"+((1<<24)+(d<<16)+(u<<8)+h).toString(16).slice(1)));var d,u,h;return i.push(e),i}("#400404",i,40),o=setInterval((function(){n++,h(e,r[n]),40===n&&clearInterval(o)}),20)},a.a.each(this.app.nodes,(function(t,e){var n=a()(e.element),i="#25537b";e.errors&&(i="#e31a1e"),h(n,i)})),this.updateViewportOverlay()}},{key:"_fitCanvasToNodes",value:function(){function t(t,e){return Math.ceil(t/e)*e}function e(t,e){return t<e||t>3*e?-(t-(Math.ceil(t%e/e)+1)*e):0}var n=this.canvasZoom,i=this._boundsForAllNodes(),r=this.cc.position(),o=this.cc.parent(),s=e(i.xmin,100),l=e(i.ymin,100);s=Math.max(s,r.left),l=Math.max(l,r.top);var c=r.left-s,d=r.top-l,u=t(i.xmax+100,100)+s,h=t(i.ymax+100,100)+l;u=Math.max(u,-c+o.width()),h=Math.max(h,-d+o.height()),this.cc.css({left:c/n,top:d/n,width:u,height:h}),this.cc.children().each((function(){var t=a()(this).position();a()(this).css("left",(t.left+s)/n),a()(this).css("top",(t.top+l)/n)}))}},{key:"_boundsForAllNodes",value:function(){var t,e=1/0,n=-1/0,i=1/0,r=-1/0;return Object.values(this.app.nodes).forEach((function(o){var s=a()(o.element);t=s.position(),e=Math.min(e,t.left),n=Math.max(n,t.left+s.width()),i=Math.min(i,t.top),r=Math.max(r,t.top+s.height())})),{xmin:e,xmax:n,ymin:i,ymax:r}}},{key:"scrollToNode",value:function(t){var e=a()(t.element),n=e.position(),i=a()("#canvas-viewport"),r=n.left+e.width()/2,o=n.top+e.height()/2,s=r-i.width()/2,l=o-i.height()/2;this.move(-s,-l),this.highlightInOverlay(t)}},{key:"scrollToNodes",value:function(){var t=a()("#canvas-viewport"),e=a()("#canvas-container"),n=0,i=0;e.width()!=t.width()&&(i=(t.width()-e.width())/2),e.height()!=t.height()&&(n=(t.height()-e.height())/2),e.css({left:i,top:n})}}]),t}(),Sn=n(479),Mn=n(594),Cn=n(147),Tn={components:{BDropdown:Sn.a,BDropdownItem:Mn.a,BButton:Cn.a},props:{hasChanges:{type:Boolean},requiredReindex:{type:Boolean}}},jn=n(5),On=Object(jn.a)(Tn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-header-buttons"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-attributes",attrs:{id:"workflow-home-button",role:"button",title:"Edit Attributes",variant:"link","aria-label":"Edit Attributes"},on:{click:function(e){return t.$emit("onAttributes")}}},[n("span",{staticClass:"fa fa-pencil-alt"})]),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-save",attrs:{id:"workflow-save-button",role:"button",title:"Save Workflow",variant:"link","aria-label":"Save Workflow",disabled:!t.hasChanges},on:{click:function(e){return t.$emit("onSave")}}},[n("span",{staticClass:"fa fa-floppy-o"})]),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-report",attrs:{id:"workflow-report-button",role:"button",title:"Edit Report",variant:"link","aria-label":"Edit Report"},on:{click:function(e){return t.$emit("onReport")}}},[n("span",{staticClass:"fa fa-edit"})]),t._v(" "),n("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-options",attrs:{"no-caret":"",right:"",id:"workflow-options-button",role:"button",title:"Workflow Options",variant:"link","aria-label":"Workflow Options"},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("span",{staticClass:"fa fa-cog"})]},proxy:!0}])},[t._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.$emit("onSaveAs")}}},[n("span",{staticClass:"fa fa-floppy-o mr-1"}),t._v("Save As...")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.$emit("onLint")}}},[n("span",{staticClass:"fa fa-magic mr-1"}),t._v("Best Practices")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.$emit("onLayout")}}},[n("span",{staticClass:"fa fa-align-left mr-1"}),t._v("Auto Layout")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.$emit("onDownload")}}},[n("span",{staticClass:"fa fa-download mr-1"}),t._v("Download")])],1),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"editor-button-run",attrs:{id:"workflow-run-button",role:"button",title:"Run Workflow",variant:"link","aria-label":"Run Workflow"},on:{click:function(e){return t.$emit("onRun")}}},[n("span",{staticClass:"fa fa-play"})])],1)}),[],!1,null,null,null).exports,Ln=n(15),Dn=n(26),An=n(20),En=n(17),In=n(7),Pn=n.n(In),Yn=n(167),Rn=n(64);Ve.default.use(Ln.a);var Hn={props:{labelTitle:{type:String,default:""},labels:{type:Array,default:null},argumentName:{type:String,default:null}},data:function(){return{selectedValue:0,modalShow:!0}},computed:{title:function(){return"Insert '".concat(this.argumentName,"'")},hasLabels:function(){return this.labels&&this.labels.length>0}},methods:{onOk:function(){this.$emit("onOk",this.labels[this.selectedValue])},onCancel:function(){this.$emit("onCancel")}}},Nn=Object(jn.a)(Hn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("b-modal",{attrs:{title:t.title,"ok-title":"Continue"},on:{ok:t.onOk,cancel:t.onCancel},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[n("div",{staticClass:"ml-2"},[n("h5",{staticClass:"mb-3"},[t._v("Select "+t._s(t.labelTitle)+" Label:")]),t._v(" "),t.hasLabels?n("div",t._l(t.labels,(function(e,i){return n("b-form-radio",{key:i,staticClass:"my-2",attrs:{name:"labels",value:i},model:{value:t.selectedValue,callback:function(e){t.selectedValue=e},expression:"selectedValue"}},[t._v("\n                    "+t._s(e)+"\n                ")])})),1):n("b-alert",{attrs:{show:"",variant:"info"}},[t._v("\n                No labels found. Please specify labels in the Workflow Editor.\n            ")]),t._v(" "),n("p",{staticClass:"mt-3 text-muted"},[t._v("\n                You may add new labels by selecting a step in the workflow editor and then editing the corresponding\n                label field in the step form.\n            ")])],1)])],1)}),[],!1,null,null,null).exports,$n=n(140),Fn={props:{inputs:{type:Array,required:!0}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.$refs.inputs;t.form=new he.a({el:e,inputs:t.inputs}).on("change",t.onChange),t.onChange()}))},methods:{onChange:function(){this.$emit("onChange",this.form.data.create())}}},Wn=Object(jn.a)(Fn,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"inputs"})}),[],!1,null,null,null).exports;function zn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Un(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Ve.default.use(Ln.a);var Vn={components:{MarkdownSelector:Nn,DataDialog:$n.a,Form:Wn},props:{argumentName:{type:String,required:!0},argumentPayload:{type:Object,default:null},history:{type:String,required:!0},labels:{type:Array,default:null},useLabels:{type:Boolean,required:!0}},data:function(){return{dataTag:null,formData:{},formShow:!1,labelShow:!1,dataShow:!1}},computed:{formInputs:function(){var t=null;return this.argumentPayload.settings&&this.argumentPayload.settings.length>0&&(t=this.argumentPayload.settings.slice()),this.argumentPayload.groups&&this.argumentPayload.groups.length>0&&(t=t||[]).push({type:"repeat",title:"Columns",name:"groups",min:1,inputs:this.argumentPayload.groups.map((function(t){return"data_column"==t.type&&(t.is_workflow=!0),t}))}),t}},created:function(){this.useLabels?this.labelShow=!0:this.dataShow=!0},methods:{onChange:function(t){this.formData=t},onLabel:function(t){this.dataTag='output="'.concat(t,'"'),this.labelShow=!1,this.formInputs?this.formShow=!0:this.onOk()},onData:function(t){this.dataTag="history_dataset_id=".concat(t),this.dataShow=!1,this.formInputs?this.formShow=!0:this.onOk()},onOk:function(){var t="";Object.entries(this.formData).forEach((function(e){var n=zn(e,2),i=n[0],a=n[1];a&&(t+=", ".concat(i,'="').concat(a,'"'))})),this.$emit("onOk","visualization(visualization_id=".concat(this.argumentName,", ").concat(this.dataTag).concat(t,")"))},onCancel:function(){this.$emit("onCancel")}}},Bn=(n(545),Object(jn.a)(Vn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.labelShow?n("MarkdownSelector",{attrs:{"initial-value":t.argumentType,"argument-name":t.argumentName,labels:t.labels,"label-title":t.selectedLabelTitle},on:{onOk:t.onLabel,onCancel:t.onCancel}}):t._e(),t._v(" "),t.dataShow?n("DataDialog",{attrs:{history:t.history,format:"id"},on:{onOk:t.onData,onCancel:t.onCancel}}):t._e(),t._v(" "),t.formShow?n("b-modal",{attrs:{"modal-class":"visualization-dialog-modal",title:"Configure Visualization","ok-title":"Continue"},on:{ok:t.onOk,cancel:t.onCancel},model:{value:t.formShow,callback:function(e){t.formShow=e},expression:"formShow"}},[n("Form",{attrs:{inputs:t.formInputs},on:{onChange:t.onChange}})],1):t._e()],1)}),[],!1,null,null,null).exports),qn=n(203),Gn=n(103),Jn=n(21);function Kn(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var Xn={mixins:[Gn.a],props:{getData:{type:Function,required:!0},title:{type:String,required:!0},leafIcon:{type:String,default:null},labelKey:{type:String,default:"id"},detailsKey:{type:String,default:null},timeKey:{type:String,default:"update_time"},isEncoded:{type:Boolean,default:!1}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,hasValue:!1}},created:function(){this.load()},methods:{onOk:function(t){this.$emit("onOk",t)},onCancel:function(){this.$emit("onCancel")},load:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.filter=null,e.optionsShow=!1,t.prev=2,t.next=5,e.getData();case 5:n=t.sent,i=n.data,e.items=i.map((function(t){var n=t[e.timeKey];return n&&(n=new Date(n).toLocaleString("default",{day:"numeric",month:"short",year:"numeric",minute:"numeric",hour:"numeric"})),{id:t.id,label:t[e.labelKey]||null,details:t[e.detailsKey]||null,time:n||null,isLeaf:!0}})),e.optionsShow=!0,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.errorMessage=Object(Jn.a)(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Kn(r,i,a,o,s,"next",t)}function s(t){Kn(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}},Qn=Object(jn.a)(Xn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("selection-dialog",{attrs:{"error-message":t.errorMessage,"options-show":t.optionsShow,"modal-show":t.modalShow,"hide-modal":t.onCancel},scopedSlots:t._u([{key:"search",fn:function(){return[n("data-dialog-search",{attrs:{title:t.title},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[t.optionsShow?n("data-dialog-table",{attrs:{items:t.items,multiple:!1,"is-encoded":t.isEncoded,filter:t.filter,"leaf-icon":t.leafIcon,"show-details":!!t.detailsKey},on:{clicked:t.onOk,load:t.load}}):t._e()]},proxy:!0}])})}),[],!1,null,null,null).exports;Ve.default.use(Ln.a);var Zn={components:{MarkdownSelector:Nn,MarkdownVisualization:Bn,BasicSelectionDialog:Qn,DatasetCollectionDialog:qn.a,DataDialog:$n.a},props:{argumentName:{type:String,default:null},argumentType:{type:String,default:null},argumentPayload:{type:Object,default:null},labels:{type:Array,default:null},useLabels:{type:Boolean,default:!1}},data:function(){return{selectorConfig:{job_id:{labelTitle:"Step"},invocation_id:{labelTitle:"Step"},history_dataset_id:{labelTitle:"Output"},history_dataset_collection_id:{labelTitle:"Output"}},jobsUrl:"".concat(Object(d.getAppRoot)(),"api/jobs"),workflowsUrl:"".concat(Object(d.getAppRoot)(),"api/workflows"),invocationsUrl:"".concat(Object(d.getAppRoot)(),"api/invocations"),selectedShow:!1,visualizationShow:!1,workflowShow:!1,jobShow:!1,invocationShow:!1,dataShow:!1,dataCollectionShow:!1}},computed:{selectedLabelTitle:function(){var t=this.selectorConfig[this.argumentType];return t&&t.labelTitle||"Select Label"}},created:function(){this.onCreate()},methods:{getInvocations:function(){return Pn.a.get(this.invocationsUrl)},getJobs:function(){return Pn.a.get(this.jobsUrl)},getWorkflows:function(){return Pn.a.get(this.workflowsUrl)},onData:function(t){this.dataShow=!1,this.$emit("onInsert","".concat(this.argumentName,"(history_dataset_id=").concat(t,")"))},onDataCollection:function(t){this.dataCollectionShow=!1,this.$emit("onInsert","".concat(this.argumentName,"(history_dataset_collection_id=").concat(t.id,")"))},onJob:function(t){this.jobShow=!1,this.$emit("onInsert","".concat(this.argumentName,"(job_id=").concat(t.id,")"))},onInvocation:function(t){this.invocationShow=!1,this.$emit("onInsert","".concat(this.argumentName,"(invocation_id=").concat(t.id,")"))},onWorkflow:function(t){this.workflowShow=!1,this.$emit("onInsert","workflow_display(workflow_id=".concat(t.id,")"))},onVisualization:function(t){this.visualizationShow=!1,this.$emit("onInsert",t)},onCreate:function(){var t=this;"workflow_id"==this.argumentType?this.workflowShow=!0:"history_dataset_id"==this.argumentType?this.useLabels?this.selectedShow=!0:Object(Rn.d)().then((function(e){t.dataHistoryId=e,t.dataShow=!0})):"history_dataset_collection_id"==this.argumentType?this.useLabels?this.selectedShow=!0:Object(Rn.d)().then((function(e){t.dataHistoryId=e,t.dataCollectionShow=!0})):"invocation_id"==this.argumentType?this.useLabels?this.selectedShow=!0:this.invocationShow=!0:"job_id"==this.argumentType?this.useLabels?this.selectedShow=!0:this.jobShow=!0:"visualization_id"==this.argumentType&&Object(Rn.d)().then((function(e){t.dataHistoryId=e,t.visualizationShow=!0}))},onOk:function(t){var e=this;t=t||"<ENTER LABEL>",this.selectedShow=!1,"history_dataset_id"==this.argumentType?this.useLabels?this.$emit("onInsert","".concat(this.argumentName,'(output="').concat(t,'")')):Object(Rn.d)().then((function(t){e.dataShow=!0,e.dataHistoryId=t})):"history_dataset_collection_id"==this.argumentType?this.useLabels?this.$emit("onInsert","".concat(this.argumentName,'(output="').concat(t,'")')):Object(Rn.d)().then((function(t){e.dataCollectionShow=!0,e.dataHistoryId=t})):"job_id"==this.argumentType?this.useLabels?this.$emit("onInsert","".concat(this.argumentName,'(step="').concat(t,'")')):this.jobShow=!0:"invocation_id"==this.argumentType&&(this.useLabels?this.$emit("onInsert","".concat(this.argumentName,'(step="').concat(t,'")')):this.invocationShow=!0)},onCancel:function(){this.dataCollectionShow=!1,this.selectedShow=!1,this.workflowShow=!1,this.visualizationShow=!1,this.jobShow=!1,this.invocationShow=!1,this.dataShow=!1,this.$emit("onCancel")}}},ti=Object(jn.a)(Zn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.selectedShow?n("MarkdownSelector",{attrs:{"initial-value":t.argumentType,"argument-name":t.argumentName,labels:t.labels,"label-title":t.selectedLabelTitle},on:{onOk:t.onOk,onCancel:t.onCancel}}):t.visualizationShow?n("MarkdownVisualization",{attrs:{"argument-name":t.argumentName,"argument-payload":t.argumentPayload,labels:t.labels,"use-labels":t.useLabels,history:t.dataHistoryId},on:{onOk:t.onVisualization,onCancel:t.onCancel}}):t.dataShow?n("DataDialog",{attrs:{history:t.dataHistoryId,format:"id"},on:{onOk:t.onData,onCancel:t.onCancel}}):t.dataCollectionShow?n("DatasetCollectionDialog",{attrs:{history:t.dataHistoryId,format:"id"},on:{onOk:t.onDataCollection,onCancel:t.onCancel}}):t.jobShow?n("BasicSelectionDialog",{attrs:{"get-data":t.getJobs,"is-encoded":!0,title:"Job","label-key":"id"},on:{onOk:t.onJob,onCancel:t.onCancel}}):t.invocationShow?n("BasicSelectionDialog",{attrs:{"get-data":t.getInvocations,"is-encoded":!0,title:"Invocation","label-key":"id"},on:{onOk:t.onInvocation,onCancel:t.onCancel}}):t.workflowShow?n("BasicSelectionDialog",{attrs:{"get-data":t.getWorkflows,title:"Workflow","leaf-icon":"fa fa-sitemap fa-rotate-270","label-key":"name"},on:{onOk:t.onWorkflow,onCancel:t.onCancel}}):t._e()],1)}),[],!1,null,null,null).exports,ei="\n<div>\n<h3>Overview</h3>\n\n<p>\n    This document Markdown document will be used to generate your Galaxy Page.\n    This document should be Markdown with embedded command for extracting and\n    displaying Galaxy objects and their metadata. \n</p>\n\n".concat('\n<p>\n    For an overview of standard Markdown visit the\n    <a href="https://commonmark.org/help/tutorial/">commonmark.org tutorial</a>.\n</p>\n\n<p>\n    The Galaxy extensions to Markdown are represented as code blocks, these blocks start\n    with the line <tt>```galaxy</tt> and end with the line <tt>```</tt> and have a\n    command with arguments that reference parts of the workflow in the middle.\n</p>',"\n\n<h3>History Contents Commands</h3>\n\n<p>\n    These commands reference a dataset. For instance, the following examples would display\n    the dataset collection corresponding to a Galaxy dataset collection ID and display a\n    single dataset as an image corresponding to a Galaxy dataset ID.\n</p>\n\n<pre>\n```galaxy\nhistory_dataset_collection_display(history_dataset_collection_id=33b43b4e7093c91f)\n```\n</pre>\n\n<pre>\n```galaxy\nhistory_dataset_as_image(history_dataset_id=33b43b4e7093c91f)\n```\n</pre>\n\n\n").concat("\n<dt><tt>history_dataset_display</tt></dt>\n<dd>Embed a dataset description in the resulting document.</dd>\n<dt><tt>history_dataset_collection_display</tt></dt>\n<dd>Embed a dataset collection description in the resulting document.</dd>\n<dt><tt>history_dataset_as_image</tt></dt>\n<dd>Embed a dataset as an image in the resulting document - the dataset should be an image datatype.</dd>\n<dt><tt>history_dataset_peek</tt></dt>\n<dd>Embed Galaxy's metadata attribute 'peek' into the resulting document - this is datatype dependent metadata but usually this is a few lines from the start of a file.</dd>\n<dt><tt>history_dataset_info</tt></dt>\n<dd>Embed Galaxy's metadata attribute 'info' into the resulting document - this is datatype dependent metadata but usually this is the program output that generated the dataset.</dd>\n</dl>\n</div>\n","\n\n<h3>Workflow Commands</h3>\n\n<p>\n    These commands reference a workflow (currently only one). The following example would\n    display a representation of the workflow in the resulting Galaxy Page:\n</p>\n\n<pre>\n```galaxy\nworkflow_display(workflow_id=33b43b4e7093c91f>)\n```\n</pre>\n\n<dl>\n<dt><tt>workflow_display</tt></dt>\n<dd>Embed a description of the workflow itself in the resulting document.</dd>\n</dl>\n\n<h3>Job Commands</h3>\n\n<p>\n    These commands reference a Galaxy job.For instance, the\n    following example would show the job parameters the job ID 33b43b4e7093c91f:\n</p>\n\n<pre>\n```galaxy\njob_parameters(job_id=33b43b4e7093c91f)\n```\n</pre>\n\n<dt><tt>tool_stderr</tt></dt>\n<dd>Embed the tool standard error stream for this job in the resulting document.</dd>\n<dt><tt>tool_stdout</tt></dt>\n<dd>Embed the tool standard output stream for this job in the resulting document.</dd>\n<dt><tt>job_metrics</tt></dt>\n<dd>Embed the job metrics for this job in the resulting document (if Galaxy is configured and you have permission).</dd>\n<dt><tt>job_parameters</tt></dt>\n<dd>Embed the tool parameters for this job in the resulting document.</dd>\n");function ni(){var t=a()(ei);Object(O.e)("Pages Markdown Help",t,{Ok:O.b})}function ii(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}Ve.default.use(Ln.a);var ai={components:{MarkdownDialog:ti,ToolSection:Yn.a},props:{nodes:{type:Object,default:null}},data:function(){return{selectedArgumentName:null,selectedType:null,selectedLabels:null,selectedShow:!1,visualizationIndex:{},error:null,historySection:{title:"History",name:"history",elems:[{id:"history_dataset_display",name:"Dataset",emitter:"onHistoryId"},{id:"history_dataset_collection_display",name:"Collection",emitter:"onHistoryCollectionId"},{id:"history_dataset_as_image",name:"Image",emitter:"onHistoryId"},{id:"history_dataset_index",name:"Dataset Index",emitter:"onHistoryId"},{id:"history_dataset_embedded",name:"Embedded Dataset",emitter:"onHistoryId"},{id:"history_dataset_type",name:"Dataset Type",emitter:"onHistoryId"},{id:"history_dataset_link",name:"Link to Dataset",emitter:"onHistoryId"},{id:"history_dataset_name",name:"Name of Dataset",emitter:"onHistoryId"},{id:"history_dataset_peek",name:"Peek into Dataset",emitter:"onHistoryId"},{id:"history_dataset_info",name:"Dataset Details",emitter:"onHistoryId"}]},jobSection:{title:"Jobs",name:"jobs",elems:[{id:"job_metrics",name:"Job Metrics",description:"as table",emitter:"onJobId"},{id:"job_parameters",name:"Job Parameters",description:"as table",emitter:"onJobId"},{id:"tool_stdout",name:"Tool Output",description:"of job run",emitter:"onJobId"},{id:"tool_stderr",name:"Tool Error",description:"of job run",emitter:"onJobId"}]},workflowSection:{title:"Workflow",name:"workflow",elems:[{id:"invocation_time",name:"Invocation Time",emitter:"onInvocationId"},{id:"workflow_display",name:"Workflow Display",emitter:"onWorkflowId"}]},workflowInEditorSection:{title:"Workflow",name:"workflow",elems:[{id:"invocation_inputs",name:"Invocation Inputs"},{id:"invocation_outputs",name:"Invocation Output"},{id:"invocation_time",name:"Time a Workflow",description:"was invoked"},{id:"workflow_display",name:"Current Workflow",description:"containing all steps"}]},otherSection:{title:"Miscellaneous",name:"others",elems:[{id:"generate_galaxy_version",name:"Galaxy Version",description:"as text"},{id:"generate_time",name:"Current Time",description:"as text"}]},visualizationSection:{title:"Visualizations",name:"visualizations",elems:[]}}},computed:{isWorkflow:function(){return!!this.nodes},hasVisualizations:function(){return this.visualizationSection.elems.length>0}},created:function(){this.getVisualizations()},methods:{getSteps:function(){var t=[];return this.nodes&&Object.values(this.nodes).forEach((function(e){e.label&&t.push(e.label)})),t},getOutputs:function(){var t=[];return this.nodes&&Object.values(this.nodes).forEach((function(e){e.outputs.forEach((function(e){e.activeLabel&&t.push(e.activeLabel)}))})),t},getArgumentTitle:function(t){return t[0].toUpperCase()+t.substr(1).replace(/_([a-z])/g,(function(t){return" ".concat(t[1].toUpperCase())}))},onClick:function(t){switch(t.emitter){case"onHistoryId":this.onHistoryId(t.id);break;case"onHistoryCollectionId":this.onHistoryCollectionId(t.id);break;case"onJobId":this.onJobId(t.id);break;case"onWorkflowId":this.onWorkflowId(t.id);break;case"onInvocationId":this.onInvocationId(t.id);break;case"onVisualizationId":this.onVisualizationId(t.id);break;default:this.onNoParameter(t.id)}},onInsert:function(t){this.$emit("onInsert",t),this.selectedShow=!1},onCancel:function(){this.selectedShow=!1},onNoParameter:function(t){this.onInsert("".concat(t,"()"))},onVisualizationId:function(t){this.selectedArgumentName=t,this.selectedType="visualization_id",this.selectedPayload=this.visualizationIndex[t],this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onHistoryId:function(t){this.selectedArgumentName=t,this.selectedType="history_dataset_id",this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onHistoryCollectionId:function(t){this.selectedArgumentName=t,this.selectedType="history_dataset_collection_id",this.selectedLabels=this.getOutputs(),this.selectedShow=!0},onWorkflowId:function(t){this.selectedArgumentName=t,this.selectedType="workflow_id",this.selectedShow=!0},onJobId:function(t){this.selectedArgumentName=t,this.selectedType="job_id",this.selectedLabels=this.getSteps(),this.selectedShow=!0},onInvocationId:function(t){this.selectedArgumentName=t,this.selectedType="invocation_id",this.selectedLabels=this.getSteps(),this.selectedShow=!0},onHelp:function(){ni()},getVisualizations:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Pn.a.get("".concat(Object(d.getAppRoot)(),"api/plugins?embeddable=True")).then((function(t){var n=t.data;e.visualizationSection.elems=n.map((function(t){return{id:t.name,name:t.html,description:t.description,logo:t.logo?"".concat(Object(d.getAppRoot)()).concat(t.logo):null,emitter:"onVisualizationId"}})),e.visualizationIndex={},n.forEach((function(t){e.visualizationIndex[t.name]=t}))})).catch((function(t){e.error="Failed to load Visualizations."}));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){ii(r,i,a,o,s,"next",t)}function s(t){ii(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}},ri=Object(jn.a)(ai,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"unified-panel"},[t._m(0),t._v(" "),n("div",{staticClass:"unified-panel-body"},[n("div",{staticClass:"toolMenuContainer"},[t.error?n("b-alert",{staticClass:"my-2 mx-3 px-2 py-1",attrs:{variant:"danger",show:""}},[t._v("\n                "+t._s(t.error)+"\n            ")]):t._e(),t._v(" "),n("tool-section",{attrs:{category:t.historySection,expanded:!0},on:{onClick:t.onClick}}),t._v(" "),n("tool-section",{attrs:{category:t.jobSection,expanded:!0},on:{onClick:t.onClick}}),t._v(" "),t.isWorkflow?n("tool-section",{attrs:{category:t.workflowInEditorSection,expanded:!0},on:{onClick:t.onClick}}):n("tool-section",{attrs:{category:t.workflowSection,expanded:!0},on:{onClick:t.onClick}}),t._v(" "),n("tool-section",{attrs:{category:t.otherSection,expanded:!0},on:{onClick:t.onClick}}),t._v(" "),t.hasVisualizations?n("tool-section",{attrs:{category:t.visualizationSection,expanded:!0},on:{onClick:t.onClick}}):t._e()],1)]),t._v(" "),t.selectedShow?n("MarkdownDialog",{attrs:{"argument-type":t.selectedType,"argument-name":t.selectedArgumentName,"argument-payload":t.selectedPayload,labels:t.selectedLabels,"use-labels":t.isWorkflow},on:{onInsert:t.onInsert,onCancel:t.onCancel}}):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[e("div",{staticClass:"unified-panel-header-inner"},[e("div",{staticClass:"panel-header-text"},[this._v("Insert Objects")])])])}],!1,null,null,null).exports,oi=n(168);Ve.default.use(Ln.a),An.c.add(En.y);var si={components:{MarkdownToolBox:ri,SidePanel:oi.a,FontAwesomeIcon:Dn.a},props:{markdownText:{type:String,default:null},markdownConfig:{type:Object,default:null},nodes:{type:Object,default:null},title:{type:String,default:null}},data:function(){return{content:this.markdownText}},watch:{markdownText:function(){var t=this.$refs["text-area"],e=t.selectionEnd;this.content=this.markdownText,Ve.default.nextTick((function(){t.focus(),t.selectionEnd=e}))}},methods:{onInsert:function(t){t=t.replace(")(",", "),t="".concat("```","galaxy\n").concat(t,"\n").concat("```","\n");var e=this.$refs["text-area"];e.focus();var n=e.selectionStart,i=this.content.substr(0,n);i+="\r\n".concat(t.trim(),"\r\n"),i+=this.content.substr(n),this.$emit("onUpdate",i)},onUpdate:s.default.debounce((function(t){this.$emit("onUpdate",this.content)}),300),onHelp:function(){ni()}}},li=Object(jn.a)(si,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("SidePanel",{attrs:{id:"left",side:"left"},scopedSlots:t._u([{key:"panel",fn:function(){return[n("MarkdownToolBox",{attrs:{nodes:t.nodes},on:{onInsert:t.onInsert}})]},proxy:!0}])}),t._v(" "),n("div",{staticClass:"workflow-markdown-editor",attrs:{id:"center"}},[n("div",{staticClass:"markdown-editor h-100"},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("div",{staticClass:"panel-header-buttons"},[t._t("buttons"),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{title:"Help",variant:"link",role:"button"},on:{click:t.onHelp}},[n("font-awesome-icon",{attrs:{icon:"question"}})],1)],2),t._v(" "),n("div",{staticClass:"my-1"},[t._v("\n                        "+t._s(t.title)+"\n                    ")])])]),t._v(" "),n("div",{staticClass:"unified-panel-body d-flex"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"text-area",staticClass:"markdown-textarea",attrs:{id:"workflow-report-editor"},domProps:{value:t.content},on:{input:[function(e){e.target.composing||(t.content=e.target.value)},t.onUpdate]}})])])])],1)}),[],!1,null,null,null).exports,ci=n(268),di=n(246);function ui(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ui(Object(n),!0).forEach((function(e){fi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pi={name:"ToolBox",components:{ToolSection:Yn.a,ToolSearch:ci.a},data:function(){return{query:null,results:null}},props:{toolbox:{type:Array,required:!0},workflows:{type:Array,required:!0},dataManagers:{type:Array,required:!0},moduleSections:{type:Array,required:!0}},computed:{hasWorkflowSection:function(){return this.workflows.length>0},workflowSection:function(){return{name:h()("Workflows"),elems:this.workflows}},hasDataManagerSection:function(){return this.dataManagers.length>0},dataManagerSection:function(){return{name:h()("Data Managers"),elems:this.dataManagers}},sections:function(){return Object(di.a)(this.toolsLayout,this.results)},toolsLayout:function(){return this.toolbox.map((function(t){return hi(hi({},t),{},{elems:t.elems&&t.elems.map((function(t){return t.disabled=!t.is_workflow_compatible,t}))})}))}},methods:{onQuery:function(t){this.query=t},onResults:function(t){this.results=t},onInsertTool:function(t,e){e.preventDefault(),this.$emit("onInsertTool",t.id,t.name)},onInsertModule:function(t,e){e.preventDefault(),this.$emit("onInsertModule",t.name,t.title)},onInsertWorkflow:function(t,e){e.preventDefault(),this.$emit("onInsertWorkflow",t.latest_id,t.name)},onInsertWorkflowSteps:function(t){this.$emit("onInsertWorkflowSteps",t.id,t.step_count)}}},mi=Object(jn.a)(pi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"unified-panel"},[t._m(0),t._v(" "),n("div",{staticClass:"unified-panel-controls"},[n("tool-search",{attrs:{placeholder:"search tools"},on:{onQuery:t.onQuery,onResults:t.onResults}})],1),t._v(" "),n("div",{staticClass:"unified-panel-body"},[n("div",{staticClass:"toolMenuContainer"},[t._l(t.moduleSections,(function(e){return n("tool-section",{key:e.name,attrs:{"hide-name":!0,category:e,"tool-key":"name","section-name":e.name,"query-filter":t.query,"disable-filter":!0},on:{onClick:t.onInsertModule}})})),t._v(" "),t.hasDataManagerSection?n("tool-section",{key:t.dataManagerSection.id,attrs:{category:t.dataManagerSection,"query-filter":t.query,"disable-filter":!0},on:{onClick:t.onInsertTool}}):t._e(),t._v(" "),t._l(t.sections,(function(e){return n("tool-section",{key:e.id,attrs:{category:e,"query-filter":t.query},on:{onClick:t.onInsertTool}})})),t._v(" "),t.hasWorkflowSection?n("tool-section",{key:t.workflowSection.name,attrs:{category:t.workflowSection,"section-name":"workflows","operation-icon":"fa fa-files-o","operation-title":"Insert individual steps.","query-filter":t.query,"disable-filter":!0},on:{onClick:t.onInsertWorkflow,onOperation:t.onInsertWorkflowSteps}}):t._e()],2)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[e("div",{staticClass:"unified-panel-header-inner"},[e("div",{staticClass:"panel-header-text"},[this._v("Tools")])])])}],!1,null,null,null).exports;Ve.default.use(Ln.a),An.c.add(En.u),An.c.add(En.A),An.c.add(En.w),An.c.add(En.g),An.c.add(En.k);var _i={components:{FontAwesomeIcon:Dn.a},props:{okay:{type:Boolean,default:!0},attributeLink:{type:String,default:"Edit Workflow Attributes"},successMessage:{type:String,required:!0},warningMessage:{type:String,required:!0},warningItems:{type:Array,default:null}},computed:{isOkay:function(){return this.okay&&!this.hasWarningItems},hasWarningItems:function(){return this.warningItems&&this.warningItems.length>0}},methods:{onMouseOver:function(t){this.$emit("onMouseOver",t)},onMouseLeave:function(t){this.$emit("onMouseLeave",t)},onClick:function(t,e){this.$emit("onClick",t,e)}}},gi=Object(jn.a)(_i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-2"},[t.isOkay?n("div",[n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:"check"}}),t._v(" "),n("span",[t._v(t._s(t.successMessage))])],1):n("div",[n("font-awesome-icon",{staticClass:"text-warning",attrs:{icon:"exclamation-triangle"}}),t._v(" "),n("span",[t._v(t._s(t._f("localize")(t.warningMessage)))]),t._v(" "),t.hasWarningItems?n("div",{staticClass:"mt-2"},t._l(t.warningItems,(function(e,i){return n("div",{key:i,staticClass:"ml-2",on:{mouseover:function(n){return t.onMouseOver(e)},mouseleave:function(n){return t.onMouseLeave(e)}}},[n("a",{staticClass:"scrolls",attrs:{href:"#"},on:{click:function(n){return t.onClick(e)}}},[e.autofix?n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"magic"}}):n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"search"}}),t._v("\n                    "+t._s(e.stepLabel)+": "+t._s(e.warningLabel)+"\n                ")],1)])})),0):n("p",{staticClass:"mt-2 ml-2"},[n("a",{attrs:{href:"#"},on:{click:t.onClick}},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"pencil-alt"}}),t._v(t._s(t.attributeLink)+"\n            ")],1)])],1)])}),[],!1,null,null,null).exports;function vi(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=bi(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function yi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||bi(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bi(t,e){if(t){if("string"==typeof t)return wi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wi(t,e):void 0}}function wi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ki(t){var e=[];return Object.values(t).forEach((function(t){Object.entries(t.inputTerminals).forEach((function(n){var i=yi(n,2),a=i[0],r=i[1];if(!(r.connectors&&r.connectors.length>0||r.optional)){var o=r.attributes.input.label;e.push({stepId:t.id,stepLabel:t.title,warningLabel:o,inputName:a,autofix:!r.multiple})}}))})),e}function xi(t){var e=[];return Object.values(t).forEach((function(t){if(!t.isInput){var n,i=vi(t.activeOutputs.getAll());try{for(i.s();!(n=i.n()).done;){var a=n.value;a.label||e.push({stepId:t.id,stepLabel:t.title,warningLabel:a.output_name,autofix:!0})}}catch(t){i.e(t)}finally{i.f()}}})),e}function Si(t){var e=[];return t&&t.parameters.forEach((function(t){e.push({stepId:t.references[0].nodeId,stepLabel:t.references[0].toolInput.label,warningLabel:t.name,name:t.name,autofix:t.canExtract()})})),e}function Mi(t){return{action_type:"extract_untyped_parameter",name:t.name}}function Ci(t){return{action_type:"extract_input",input:{order_index:parseInt(t.stepId),input_name:t.inputName}}}Ve.default.use(Ln.a),An.c.add(En.k),An.c.add(En.u);var Ti={components:{FontAwesomeIcon:Dn.a,LintSection:gi},props:{untypedParameters:{type:fn},nodes:{type:Object,required:!0},annotation:{type:String,default:null},license:{type:String,default:null},creator:{default:null}},data:function(){return{forceRefresh:0}},methods:{refresh:function(){this.forceRefresh+=1},onAttributes:function(){this.$emit("onAttributes")},onFixUntypedParameter:function(t){confirm("This issue can be fixed automatically by creating an explicit parameter input step. Do you want to proceed?")?this.$emit("onRefactor",[Mi(t)]):this.$emit("onScrollTo",t.stepId)},onFixDisconnectedInput:function(t){confirm("This issue can be fixed automatically by creating an explicit data input step. Do you want to proceed?")?this.$emit("onRefactor",[Ci(t)]):this.$emit("onScrollTo",t.stepId)},onFixUnlabeledOutputs:function(t){confirm("This issue can be fixed automatically by removing all unlabeled workflow output. Do you want to proceed?")?this.$emit("onRefactor",[{action_type:"remove_unlabeled_workflow_outputs"}]):this.$emit("onScrollTo",t.stepId)},onScrollTo:function(t){this.$emit("onScrollTo",t.stepId)},onHighlight:function(t){this.$emit("onHighlight",t.stepId)},onUnhighlight:function(t){this.$emit("onUnhighlight",t.stepId)},onRefactor:function(){var t=function(t,e){var n,i=[],a=vi(Si(e));try{for(a.s();!(n=a.n()).done;){var r=n.value;r.autofix&&i.push(Mi(r))}}catch(t){a.e(t)}finally{a.f()}var o,s=vi(ki(t));try{for(s.s();!(o=s.n()).done;){var l=o.value;l.autofix&&i.push(Ci(l))}}catch(t){s.e(t)}finally{s.f()}return xi(t).length>0&&i.push({action_type:"remove_unlabeled_workflow_outputs"}),i}(this.nodes,this.untypedParameters);this.$emit("onRefactor",t)}},computed:{hasActiveOutputs:function(){this.forceRefresh;for(var t=0,e=Object.values(this.nodes);t<e.length;t++){if(e[t].activeOutputs.getAll().length>0)return!0}return!1},showRefactor:function(){return!this.checkUntypedParameters||!this.checkDisconnectedInputs||!this.checkUnlabeledOutputs},checkAnnotation:function(){return!!this.annotation},checkLicense:function(){return!!this.license},checkCreator:function(){return this.creator instanceof Array?this.creator.length>0:!!this.creator},checkUntypedParameters:function(){return 0==this.warningUntypedParameters.length},checkDisconnectedInputs:function(){return 0==this.warningDisconnectedInputs.length},checkUnlabeledOutputs:function(){return 0==this.warningUnlabeledOutputs.length},warningUntypedParameters:function(){return Si(this.untypedParameters)},warningDisconnectedInputs:function(){return this.forceRefresh,ki(this.nodes)},warningMissingMetadata:function(){return this.forceRefresh,t=this.nodes,e=[],Object.values(t).forEach((function(t){if(t.isInput){var n=!t.annotation,i=!t.label,a=null;i&&n?a="Missing a label and annotation":i?a="Missing a label":n&&(a="Missing an annotation"),a&&e.push({stepId:t.id,stepLabel:t.title,warningLabel:a})}})),e;var t,e},warningUnlabeledOutputs:function(){return this.forceRefresh,xi(this.nodes)}}},ji=Object(jn.a)(Ti,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{"header-tag":"header","body-class":"p-0"},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"mb-1 font-weight-bold"},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"magic"}}),t._v("\n            Best Practices Review\n        ")],1),t._v(" "),t.showRefactor?n("div",[n("a",{attrs:{href:"#"},on:{click:t.onRefactor}},[t._v("\n                Try to automatically fix issues.\n            ")])]):t._e()]},proxy:!0}])},[t._v(" "),n("b-card-body",[n("LintSection",{attrs:{okay:t.checkAnnotation,"success-message":"This workflow is annotated. Ideally, this helps the executors of the workflow\n                understand the purpose and usage of the workflow.","warning-message":"This workflow is not annotated. Providing an annotation helps workflow executors\n                understand the purpose and usage of the workflow.","attribute-link":"Annotate your Workflow."},on:{onClick:t.onAttributes}}),t._v(" "),n("LintSection",{attrs:{okay:t.checkCreator,"success-message":"This workflow defines creator information.","warning-message":"This workflow does not specify creator(s). This is important metadata for workflows\n                that will be published and/or shared to help workflow executors know how to cite the\n                workflow authors.","attribute-link":"Provide Creator Details."},on:{onClick:t.onAttributes}}),t._v(" "),n("LintSection",{attrs:{okay:t.checkLicense,"success-message":"This workflow defines a license.","warning-message":"This workflow does not specify a license. This is important metadata for workflows\n                that will be published and/or shared to help workflow executors understand how it\n                may be used.","attribute-link":"Specify a License."},on:{onClick:t.onAttributes}}),t._v(" "),n("LintSection",{attrs:{"success-message":"Workflow parameters are using formal input parameters.","warning-message":"This workflow uses legacy workflow parameters. They should be replaced with\n            formal workflow inputs. Formal input parameters make tracking workflow provenance, usage within subworkflows,\n            and executing the workflow via the API more robust:","warning-items":t.warningUntypedParameters},on:{onMouseOver:t.onHighlight,onMouseLeave:t.onUnhighlight,onClick:t.onFixUntypedParameter}}),t._v(" "),n("LintSection",{attrs:{"success-message":"All non-optional inputs to workflow steps are connected to formal input parameters.","warning-message":"Some non-optional inputs are not connected to formal workflow inputs. Formal input parameters\n            make tracking workflow provenance, usage within subworkflows, and executing the workflow via the API more robust:","warning-items":t.warningDisconnectedInputs},on:{onMouseOver:t.onHighlight,onMouseLeave:t.onUnhighlight,onClick:t.onFixDisconnectedInput}}),t._v(" "),n("LintSection",{attrs:{"success-message":"All workflow inputs have labels and annotations.","warning-message":"Some workflow inputs are missing labels and/or annotations:","warning-items":t.warningMissingMetadata},on:{onMouseOver:t.onHighlight,onMouseLeave:t.onUnhighlight,onClick:t.onScrollTo}}),t._v(" "),n("LintSection",{attrs:{"success-message":"This workflow has outputs and they all have valid labels.","warning-message":"The following workflow outputs have no labels, they should be assigned a useful label or\n                unchecked in the workflow editor to mark them as no longer being a workflow output:","warning-items":t.warningUnlabeledOutputs},on:{onMouseOver:t.onHighlight,onMouseLeave:t.onUnhighlight,onClick:t.onFixUnlabeledOutputs}}),t._v(" "),t.hasActiveOutputs?t._e():n("div",[n("font-awesome-icon",{staticClass:"text-warning",attrs:{icon:"exclamation-triangle"}}),t._v(" "),n("span",[t._v("This workflow has no labeled outputs, please select and label at least one output.")])],1)],1)],1)}),[],!1,null,null,null).exports,Oi=n(481),Li={components:{BModal:Oi.a},props:{stateMessages:{type:Array,requierd:!0},title:{type:String,default:"Issues loading this workflow"},message:{type:String,default:"Please review the following issues, possibly resulting from tool upgrades or changes."}},data:function(){return{show:this.stateMessages.length>0}},methods:{humanIndex:function(t){return"".concat(parseInt(t.stepIndex,10)+1)},nodeTitle:function(t){return t.label?t.label:t.name},iconClass:function(t){var e="";return t.iconType&&(e="icon fa fa-fw ".concat(t.iconType)),e}},watch:{stateMessages:function(){this.stateMessages.length>0&&(this.show=!0)}}},Di=(n(547),Object(jn.a)(Li,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{title:t.title,scrollable:"","ok-only":"","ok-title":"Continue"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"state-upgrade-modal"},[t._v("\n        "+t._s(t.message)+"\n        "),n("ul",{staticClass:"workflow-state-upgrade-step-summaries"},t._l(t.stateMessages,(function(e,i){return n("li",{key:i},[n("b",[n("i",{class:t.iconClass(e)}),t._v("\n                    Step "+t._s(t.humanIndex(e))+": "+t._s(t.nodeTitle(e))+"\n                ")]),t._v(" "),n("ul",{staticClass:"workflow-state-upgrade-step-details"},t._l(e.details,(function(e,i){return n("li",{key:i},[t._v("\n                        - "),n("span",{domProps:{innerHTML:t._s(e)}})])})),0)])})),0)])])}),[],!1,null,null,null).exports);function Ai(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ei(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ei(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ei(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ii={components:{BModal:Oi.a},props:{refactorActions:{type:Array,required:!0},workflowId:{type:String,required:!0},title:{type:String,default:"Issues reworking this workflow"},message:{type:String,default:"Please review the following potential issues..."}},data:function(){return{show:this.refactorActions.length>0,confirmActionExecutions:[]}},watch:{refactorActions:function(){this.refactorActions.length>0&&this.dryRun()},show:function(){this.show&&this.$emit("onShow")}},methods:{dryRun:function(){this.$emit("onWorkflowMessage","Pre-checking requested workflow changes (dry run)...","progress"),Object(Ge.e)(this.workflowId,this.refactorActions,!0).then(this.onDryRunResponse).catch(this.onError)},onError:function(t){this.$emit("onWorkflowError","Reworking workflow failed...",t)},onDryRunResponse:function(t){var e,n=!1,i=Ai(t.action_executions);try{for(i.s();!(e=i.n()).done;){e.value.messages.length>0&&(n=!0)}}catch(t){i.e(t)}finally{i.f()}n?(this.show=!0,this.confirmActionExecutions=t.action_executions):this.executeRefactoring()},executeRefactoring:function(){var t=this;this.show=!1,this.$emit("onWorkflowMessage","Applying requested workflow changes...","progress"),Object(Ge.e)(this.workflowId,this.refactorActions).then((function(e){t.$emit("onRefactor",e)})).catch(this.onError)}}},Pi=Object(jn.a)(Ii,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{title:t.title,scrollable:"","ok-title":"Save"},on:{ok:t.executeRefactoring},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"workflow-refactor-modal"},[t._v("\n        "+t._s(t.message)+"\n        "),n("ul",t._l(t.confirmActionExecutions,(function(e,i){return n("li",{key:i},[n("ul",t._l(e.messages,(function(e,i){return n("li",{key:i},[t._v("\n                        - "+t._s(e.message)+"\n                    ")])})),0)])})),0)])])}),[],!1,null,null,null).exports,Yi={props:{title:{type:String,required:!1},message:{type:String,required:!1},error:{type:Boolean,required:!1}},data:function(){return{show:!!this.title}},computed:{},methods:{onHidden:function(){this.$emit("onHidden")},onOk:function(){}},watch:{message:function(){this.show=!!this.title}}},Ri=Object(jn.a)(Yi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{title:t.title,scrollable:"","hide-header-close":!0,"no-close-on-esc":!t.error,"no-close-on-backdrop":!t.error,"hide-footer":!t.error,"ok-only":""},on:{ok:t.onOk,hidden:t.onHidden},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"workflow-message-modal"},["progress"==t.message?n("div",[n("div",{staticClass:"progress progress-striped active"},[n("div",{staticClass:"progress-bar",staticStyle:{width:"100%"}})])]):n("div",[t._v("\n            "+t._s(t.message)+"\n        ")])])])}),[],!1,null,null,null).exports,Hi=n(9),Ni=n.n(Hi),$i=n(158),Fi=n(238),Wi=n(29),zi=n(205);function Ui(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Vi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vi(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Vi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}An.c.add(En.z),An.c.add(En.F),An.c.add(En.j),Ve.default.use(Ln.a);var Bi={components:{License:zi.a,LoadingSpan:Wi.a,FontAwesomeIcon:Dn.a},props:{inputLicense:{type:String}},data:function(){return{license:this.inputLicense||null,licensesLoading:!1,licenses:[],editLicense:!1}},mounted:function(){var t=this,e="".concat(Object(d.getAppRoot)(),"api/licenses");Pn.a.get(e).then((function(t){return t.data})).then((function(e){t.licenses=e,t.licensesLoading=!1})).catch((function(t){console.error(t)}))},computed:{currentLicenseInfo:function(){var t,e=Ui(this.licenses);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.licenseId==this.license)return n}}catch(t){e.e(t)}finally{e.f()}return null},licenseOptions:function(){var t=[];t.push({value:null,text:"*Do not specify a license.*"});var e,n=Ui(this.licenses);try{for(n.s();!(e=n.n()).done;){var i=e.value;(i.licenseId==this.license||i.recommended)&&t.push({value:i.licenseId,text:i.name})}}catch(t){n.e(t)}finally{n.f()}return t}},watch:{inputLicense:function(){this.license=this.inputLicense}},methods:{onSave:function(){this.onLicense(this.license),this.disableEdit()},disableEdit:function(){this.editLicense=!1},onLicense:function(t){this.$emit("onLicense",t)}}},qi=Object(jn.a)(Bi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editLicense?n("div",[t.licensesLoading?n("loading-span",{attrs:{message:"Loading licenses..."}}):n("b-form-select",{attrs:{options:t.licenseOptions},model:{value:t.license,callback:function(e){t.license=e},expression:"license"}}),t._v(" "),t.currentLicenseInfo?n("License",{attrs:{licenseId:t.license,inputLicenseInfo:t.currentLicenseInfo},scopedSlots:t._u([{key:"buttons",fn:function(){return[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Save License",icon:"save"},on:{click:t.onSave}}),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Cancel Edit",icon:"times"},on:{click:t.disableEdit}})]},proxy:!0}],null,!1,2057188055)}):n("div",[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onSave(e)}}},[t._v("Save without license")]),t._v(" or\n        "),n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.editLicense=!1}}},[t._v("cancel edit.")])])],1):t.license?n("div",[n("License",{attrs:{licenseId:t.license},scopedSlots:t._u([{key:"buttons",fn:function(){return[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit License",icon:"edit"},on:{click:function(e){t.editLicense=!0}}})]},proxy:!0}])})],1):n("div",[n("i",[n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.editLicense=!0}}},[t._v("Specify a license for this workflow.")])])])}),[],!1,null,null,null).exports;function Gi(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ji(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ji(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ji(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ki={computed:{addAttributes:function(){var t,e=[{value:null,text:"Add attribute"}],n=Gi(this.attributeInfo);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.show[i.key]||e.push({value:i.key,text:"- "+i.placeholder})}}catch(t){n.e(t)}finally{n.f()}return e},displayedAttributes:function(){var t=this;return this.attributeInfo.filter((function(e){return t.show[e.key]}))}},watch:{addAttribute:function(){var t=this;this.addAttribute&&(this.show[this.addAttribute]=!0),this.$nextTick((function(){t.addAttribute=null}))}},methods:{onReset:function(t){t.preventDefault(),this.$emit("onReset")},onHide:function(t){this.show[t]=!1},onSave:function(t){t.preventDefault();var e={};e.class=this.schemaOrgClass;var n,i=Gi(this.attributeInfo);try{for(i.s();!(n=i.n()).done;){var a=n.value.key;if(this.show[a]){var r=this.currentValues[a];"email"==a&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),e[a]=r}}}catch(t){i.e(t)}finally{i.f()}this.$emit("onSave",e)}}};function Xi(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Qi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qi(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Qi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Zi=[{key:"name",label:"Name",placeholder:"name"},{key:"givenName",label:"Given Name",placeholder:"given name"},{key:"familyName",label:"Family Name",placeholder:"family name"},{key:"url",label:"URL",placeholder:"URL",type:"url"},{key:"identifier",label:"Identifier (typically an orcid.org ID)",placeholder:"identifier"},{key:"image",label:"Image URL",placeholder:"image URL",type:"url"},{key:"address",label:"Address",placeholder:"address"},{key:"email",label:"Email",placeholder:"email",type:"email"},{key:"telephone",label:"Telephone",placeholder:"telephone",type:"tel"},{key:"faxNumber",label:"Fax Number",placeholder:"fax number",type:"tel"},{key:"alternateName",label:"Alternate Name",placeholder:"alternate name"},{key:"honorificPrefix",label:"Honorific Prefix (e.g. Dr/Mrs/Mr)",placeholder:"honorific prefix"},{key:"honorificSuffix",label:"Honorific Suffix (e.g. M.D.)",placeholder:"honorific suffix"},{key:"jobTitle",label:"Job Title",placeholder:"job title"}],ta=Zi.map((function(t){return t.key}));An.c.add(En.n,En.t);var ea={mixins:[Ki],components:{FontAwesomeIcon:Dn.a},props:{person:{type:Object}},data:function(){var t,e={},n={},i=Xi(ta);try{for(i.s();!(t=i.n()).done;){var a=t.value,r=a in this.person;if(r){var o=this.person[a];"email"==a&&0==o.indexOf("mailto:")&&(o=o.slice("mailto:".length)),e[a]=o}n[a]=r}}catch(t){i.e(t)}finally{i.f()}return{attributeInfo:Zi,show:n,currentValues:e,addAttribute:null,schemaOrgClass:"Person"}}},na=Object(jn.a)(ea,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:t.onSave,reset:t.onReset}},[t._l(t.displayedAttributes,(function(e){return n("div",{key:e.key,staticClass:"form-group",attrs:{role:"group"}},[n("label",{attrs:{for:e.key}},[t._v(t._s(e.label))]),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Hide Attribute",icon:"eye-slash"},on:{click:function(n){return t.onHide(e.key)}}}),t._v(" "),n("b-form-input",{attrs:{id:e.key,placeholder:"Enter "+e.placeholder+".",type:e.type},model:{value:t.currentValues[e.key],callback:function(n){t.$set(t.currentValues,e.key,n)},expression:"currentValues[attribute.key]"}})],1)})),t._v(" "),n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("b-form-select",{attrs:{options:t.addAttributes,size:"sm"},model:{value:t.addAttribute,callback:function(e){t.addAttribute=e},expression:"addAttribute"}})],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Cancel")])],2)}),[],!1,null,null,null).exports,ia=n(201);function aa(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ra(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ra(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function ra(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var oa=[{key:"name",label:"Name",placeholder:"name"},{key:"url",label:"URL",placeholder:"URL",type:"url"},{key:"identifier",label:"Identifier",placeholder:"identifier"},{key:"image",label:"Image URL",placeholder:"image URL",type:"url"},{key:"address",label:"Address",placeholder:"address"},{key:"email",label:"Email",placeholder:"email",type:"email"},{key:"telephone",label:"Telephone",placeholder:"telephone",type:"tel"},{key:"faxNumber",label:"Fax Number",placeholder:"fax number",type:"tel"},{key:"alternateName",label:"Alternate Name",placeholder:"alternate name"}],sa=oa.map((function(t){return t.key}));An.c.add(En.n,En.t);var la={mixins:[Ki],components:{FontAwesomeIcon:Dn.a},props:{organization:{type:Object}},data:function(){var t,e={},n={},i=aa(sa);try{for(i.s();!(t=i.n()).done;){var a=t.value,r=a in this.organization;if(r){var o=this.organization[a];"email"==a&&0==o.indexOf("mailto:")&&(o=o.slice("mailto:".length)),e[a]=o}n[a]=r}}catch(t){i.e(t)}finally{i.f()}return{attributeInfo:oa,show:n,currentValues:e,addAttribute:null,schemaOrgClass:"Organization"}}},ca=Object(jn.a)(la,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:t.onSave,reset:t.onReset}},[t._l(t.displayedAttributes,(function(e){return n("div",{key:e.key,staticClass:"form-group",attrs:{role:"group"}},[n("label",{attrs:{for:e.key}},[t._v(t._s(e.label))]),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Hide Attribute",icon:"eye-slash"},on:{click:function(n){return t.onHide(e.key)}}}),t._v(" "),n("b-form-input",{attrs:{id:e.key,placeholder:"Enter "+e.placeholder+".",type:e.type},model:{value:t.currentValues[e.key],callback:function(n){t.$set(t.currentValues,e.key,n)},expression:"currentValues[attribute.key]"}})],1)})),t._v(" "),n("div",{staticClass:"form-group",attrs:{role:"group"}},[n("b-form-select",{attrs:{options:t.addAttributes,size:"sm"},model:{value:t.addAttribute,callback:function(e){t.addAttribute=e},expression:"addAttribute"}})],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Cancel")])],2)}),[],!1,null,null,null).exports;function da(t){return function(t){if(Array.isArray(t))return ua(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ua(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ua(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}An.c.add(En.F),An.c.add(En.j);var ha={components:{FontAwesomeIcon:Dn.a,PersonForm:na,CreatorViewer:ia.a,OrganizationForm:ca},props:{creators:{type:Array}},data:function(){return{creatorsCurrent:[],editIndex:null}},watch:{creators:function(){this.creatorsCurrent=this.creators}},methods:{onEdit:function(t){this.editIndex=t},onRemove:function(t){var e=da(this.creatorsCurrent);e.splice(t,1),this.$emit("onCreators",e)},onSave:function(t){var e=this.editIndex,n=da(this.creatorsCurrent);n[e]=t,this.$emit("onCreators",n),this.editIndex=null},onCancel:function(){var t=this.editIndex;this.creatorsCurrent[t].isNew&&this.creatorsCurrent.splice(t,1),this.editIndex=null},editNewPerson:function(){this.creatorsCurrent.push({class:"Person",isNew:!0,name:"",identifier:""}),this.editIndex=this.creatorsCurrent.length-1},editNewOrganization:function(){this.creatorsCurrent.push({class:"Organization",isNew:!0,name:""}),this.editIndex=this.creatorsCurrent.length-1}}},fa=Object(jn.a)(ha,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"creators-editor"},[null!=t.editIndex&&"Person"==t.creatorsCurrent[t.editIndex].class?n("div",[n("PersonForm",{attrs:{person:t.creatorsCurrent[t.editIndex]},on:{onSave:t.onSave,onReset:t.onCancel}})],1):null!=t.editIndex&&"Organization"==t.creatorsCurrent[t.editIndex].class?n("div",[n("OrganizationForm",{attrs:{organization:t.creatorsCurrent[t.editIndex]},on:{onSave:t.onSave,onReset:t.onCancel}})],1):t.creatorsCurrent?n("div",t._l(t.creatorsCurrent,(function(e,i){return n("div",{key:i},[n("CreatorViewer",{attrs:{creator:e},scopedSlots:t._u([{key:"buttons",fn:function(){return[n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit Creator",icon:"edit"},on:{click:function(e){return t.onEdit(i)}}}),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Remove Creator",icon:"times"},on:{click:function(e){return t.onRemove(i)}}})]},proxy:!0}],null,!0)})],1)})),0):t._e(),t._v(" "),n("div",[n("i",[t._v("\n            Add a new creator - either\n            "),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.editNewPerson()}}},[t._v("a person")]),t._v("\n            or "),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.editNewOrganization()}}},[t._v("an organization")]),t._v(".\n        ")])])])}),[],!1,null,null,null).exports;Ve.default.use(Ln.a);var pa={name:"Attributes",components:{Tags:Fi.a,LicenseSelector:qi,CreatorEditor:fa},props:{id:{type:String,required:!0},name:{type:String,default:null},tags:{type:Array,required:!0},annotation:{type:String},license:{type:String,default:""},creator:{default:null},version:{type:Number,default:null},versions:{type:Array,default:null},parameters:{type:fn,default:null}},data:function(){return{message:null,messageVariant:null,tagsCurrent:this.tags,versionCurrent:this.version,annotationCurrent:this.annotation,nameCurrent:this.name}},created:function(){this.services=new $i.a},computed:{creatorAsList:function(){var t=this.creator;return t?t instanceof Array||(t=[t]):t=[],t},hasParameters:function(){return this.parameters&&this.parameters.parameters.length>0},versionOptions:function(){for(var t=[],e=0;e<this.versions.length;e++){var n=this.versions[e],i=Ni.a.utc(n.update_time).format("MMM Do YYYY"),a="".concat(n.version+1,": ").concat(i,", ").concat(n.steps," steps");t.push({version:e,label:a})}return t}},watch:{version:function(){this.versionCurrent=this.version},license:function(){this.licenseCurrent=this.license},creator:function(){var t=this.creator;t?t instanceof Array||(t=[t]):t=[],this.creatorCurrent=t},annotation:function(){this.annotationCurrent=this.annotation},name:function(){this.nameCurrent=this.name}},methods:{onTags:function(t){this.tagsCurrent=t,this.onAttributes({tags:t})},onVersion:function(){this.$emit("onVersion",this.versionCurrent)},onLicense:function(t){this.$emit("onLicense",t)},onCreator:function(t){this.$emit("onCreator",t)},onError:function(t){this.message=t,this.messageVariant="danger"},onAttributes:function(t){var e=this;this.services.updateWorkflow(this.id,t).catch((function(t){e.onError(t)}))}}},ma=Object(jn.a)(pa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right-content p-2",attrs:{id:"edit-attributes",itemscope:"",itemtype:"http://schema.org/CreativeWork"}},[n("b-alert",{attrs:{variant:t.messageVariant,show:!!t.message}},[t._v("\n        "+t._s(t.message)+"\n    ")]),t._v(" "),n("div",{attrs:{id:"workflow-name-area"}},[n("b",[t._v("Name")]),t._v(" "),n("meta",{attrs:{itemprop:"name",content:t.name}}),t._v(" "),n("b-input",{attrs:{id:"workflow-name"},on:{keyup:function(e){return t.$emit("update:nameCurrent",t.nameCurrent)}},model:{value:t.nameCurrent,callback:function(e){t.nameCurrent=e},expression:"nameCurrent"}})],1),t._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-version-area"}},[n("b",[t._v("Version")]),t._v(" "),n("b-form-select",{on:{change:t.onVersion},model:{value:t.versionCurrent,callback:function(e){t.versionCurrent=e},expression:"versionCurrent"}},t._l(t.versionOptions,(function(e){return n("b-form-select-option",{key:e.version,attrs:{value:e.version}},[t._v("\n                "+t._s(e.label)+"\n            ")])})),1)],1),t._v(" "),t.hasParameters?n("div",{staticClass:"mt-2",attrs:{id:"workflow-parameters-area"}},[n("b",[t._v("Parameters")]),t._v(" "),n("b-list-group",t._l(t.parameters.parameters.entries(),(function(e){var i=e[0],a=e[1];return n("b-list-group-item",{key:i},[t._v(t._s(i+1)+": "+t._s(a.name)+"\n            ")])})),1)],1):t._e(),t._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-annotation-area"}},[n("b",[t._v("Annotation")]),t._v(" "),n("meta",{attrs:{itemprop:"description",content:t.annotationCurrent}}),t._v(" "),n("b-textarea",{attrs:{id:"workflow-annotation"},on:{keyup:function(e){return t.$emit("update:annotationCurrent",t.annotationCurrent)}},model:{value:t.annotationCurrent,callback:function(e){t.annotationCurrent=e},expression:"annotationCurrent"}}),t._v(" "),n("div",{staticClass:"form-text text-muted"},[t._v("\n            These notes will be visible when this workflow is viewed.\n        ")])],1),t._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-license-area"}},[n("b",[t._v("License")]),t._v(" "),n("LicenseSelector",{attrs:{inputLicense:t.license},on:{onLicense:t.onLicense}})],1),t._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-creator-area"}},[n("b",[t._v("Creator")]),t._v(" "),n("CreatorEditor",{attrs:{creators:t.creatorAsList},on:{onCreators:t.onCreator}})],1),t._v(" "),n("div",{staticClass:"mt-2"},[n("b",[t._v("Tags")]),t._v(" "),n("Tags",{attrs:{tags:t.tagsCurrent},on:{input:t.onTags}}),t._v(" "),n("div",{staticClass:"form-text text-muted"},[t._v("\n            Apply tags to make it easy to search for and find items with the same tag.\n        ")])],1)],1)}),[],!1,null,null,null).exports;Ve.default.use(Ln.a);var _a={props:{zoomLevel:{type:Number,required:!0}},data:function(){return{zoomDefault:this.zoomLevel}},computed:{zoomPercentage:function(){return Math.floor(100*vn[this.zoomLevel])}},methods:{onZoomIn:function(){this.$emit("onZoom",this.zoomLevel+1)},onZoomOut:function(){this.$emit("onZoom",this.zoomLevel-1)},onZoomReset:function(){this.$emit("onZoom",this.zoomDefault)}}},va=(n(548),Object(jn.a)(_a,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"zoom-control float-right btn-group-horizontal"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-minus",attrs:{role:"button",title:"Zoom Out",size:"sm","aria-label":"Zoom Out"},on:{click:this.onZoomOut}}),this._v(" "),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"zoom-reset",attrs:{role:"button",variant:"light",title:"Reset Zoom Level",size:"sm","aria-label":"Reset Zoom Level"},on:{click:this.onZoomReset}},[this._v("\n        "+this._s(this.zoomPercentage)+"%\n    ")]),this._v(" "),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-plus",attrs:{role:"button",title:"Zoom In",size:"sm","aria-label":"Zoom In"},on:{click:this.onZoomIn}})],1)}),[],!1,null,"2e2762b2",null).exports),ya=n(112);function ba(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return wa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wa(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function wa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ka={components:{LoadingSpan:Wi.a},props:{getNode:{type:Function,required:!0},getManager:{type:Function,required:!0},datatypesMapper:{type:Object,required:!0}},data:function(){return{compatibleTools:[],isDeprecated:!1,popoverHeaderText:h()("Tool recommendations"),noRecommendationsMessage:h()("No tool recommendations"),deprecatedMessage:"",showLoading:!0}},created:function(){this.loadRecommendations()},methods:{getToolId:function(t){if(null!=t&&t.indexOf("/")>-1){var e=t.split("/");t=e[e.length-2]}return t},getWorkflowPath:function(t,e){var n={},i={};for(var a in t.steps){var r=t.steps[a],o=r.input_connections;for(var s in i[r.id]=this.getToolId(r.content_id),o){var l=o[s];if(null!=l){var c,d=[],u=ba(l);try{for(u.s();!(c=u.n()).done;){var h=c.value;d.push(h.id.toString())}}catch(t){u.e(t)}finally{u.f()}n[r.id.toString()]=d}}}var f=[],p=[];f.push(e);var m,_=ba(f=function t(e,i){for(var a in n)if(parseInt(a)===parseInt(e)){var r=parseInt(n[a][0]);null!=r&&(i.push(r),void 0!==n[r]&&null!==n[r]&&t(r,i))}return i}(e,f));try{for(_.s();!(m=_.n()).done;){var g=i[m.value.toString()];null!=g&&p.push(g)}}catch(t){_.e(t)}finally{_.f()}return p.join(",")},loadRecommendations:function(){var t=this,e=this.getNode(),n=this.getManager(),i=Object(qe.b)(n),a={tool_sequence:this.getWorkflowPath(i,e.id)};Object(Ge.b)(a).then((function(e){var n=e.predicted_data,i=n.o_extensions,a=n.children;t.isDeprecated=n.is_deprecated,t.deprecatedMessage=n.message,a.length>0&&(t.compatibleTools=Object(pn.b)(a,i,t.datatypesMapper)),t.showLoading=!1}))}}},xa=Object(jn.a)(ka,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workflow-recommendations"},[n("div",{staticClass:"header-background"},[n("h4",[t._v(t._s(t.popoverHeaderText))])]),t._v(" "),t.showLoading?n("LoadingSpan",{attrs:{message:"Loading recommendations"}}):t._e(),t._v(" "),t.compatibleTools.length>0&&!t.isDeprecated?n("div",t._l(t.compatibleTools,(function(e){return n("div",{key:e.id},[n("i",{staticClass:"fa mr-1 fa-wrench"}),t._v(" "),n("a",{attrs:{href:"#",title:"Open tool",id:e.id},on:{click:function(n){return t.$emit("onCreate",e.id,e.name,n)}}},[t._v(t._s(e.name))])])})),0):t.isDeprecated?n("div",[t._v(t._s(t.deprecatedMessage))]):t._e(),t._v(" "),0!==t.compatibleTools.length||t.showLoading?t._e():n("div",[t._v(t._s(t.noRecommendationsMessage))])],1)}),[],!1,null,null,null).exports,Sa=n(273),Ma=n.n(Sa);function Ca(t,e,n){return(Ca="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Aa(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Ta(t){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ja(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oa(t,e)}function Oa(t,e){return(Oa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function La(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Aa(t);if(e){var a=Aa(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Da(this,n)}}function Da(t,e){return!e||"object"!==Ta(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Aa(t){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ea(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ia(t,e,n){return e&&Ea(t.prototype,e),n&&Ea(t,n),t}function Pa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ya={isCollection:!1,canMatch:function(){return!1},canMapOver:function(){return!1},toString:function(){return"NullCollectionType[]"},append:function(t){return t},equal:function(t){return t===this}},Ra={isCollection:!0,canMatch:function(t){return Ya!==t},canMapOver:function(){return!1},toString:function(){return"AnyCollectionType[]"},append:function(){return Ra},equal:function(t){return t===this}},Ha=function t(e,n){Pa(this,t),this.canAccept=e,this.reason=n},Na=function(){function t(e){Pa(this,t),this.collectionType=e,this.isCollection=!0,this.rank=e.split(":").length}return Ia(t,[{key:"append",value:function(e){return e===Ya?this:e===Ra?e:new t("".concat(this.collectionType,":").concat(e.collectionType))}},{key:"canMatch",value:function(t){return t!==Ya&&(t===Ra||t.collectionType==this.collectionType)}},{key:"canMapOver",value:function(t){if(t===Ya)return!1;if(t===Ra)return!1;if(this.rank<=t.rank)return!1;var e=t.collectionType;return this._endsWith(this.collectionType,e)}},{key:"effectiveMapOver",value:function(e){var n=e.collectionType;return new t(this.collectionType.substring(0,this.collectionType.length-n.length-1))}},{key:"equal",value:function(t){return t.collectionType==this.collectionType}},{key:"toString",value:function(){return"CollectionType[".concat(this.collectionType,"]")}},{key:"_endsWith",value:function(t,e){return-1!==t.indexOf(e,t.length-e.length)}}]),t}(),$a=function(t){ja(n,t);var e=La(n);function n(t){var i;return Pa(this,n),(i=e.call(this)).name=t.name,i.node=t.node,i.element=t.element,i.mapOver=t.mapOver||Ya,i.attributes=t,i.connectors=[],i}return Ia(n,[{key:"connect",value:function(t){this.connectors.push(t),this.emit("change")}},{key:"disconnect",value:function(t){var e=this.connectors.findIndex((function(e){return e===t}));this.connectors.splice(e,1),this.resetMappingIfNeeded(),t.dragging||t.inputHandle.resetCollectionTypeSource(),this.emit("change")}},{key:"redraw",value:function(){this.connectors.forEach((function(t){t.redraw()}))}},{key:"destroy",value:function(){this.connectors.slice().forEach((function(t){t.destroy()})),this.emit("change")}},{key:"destroyInvalidConnections",value:function(){this.connectors.forEach((function(t){t&&t.destroyIfInvalid()})),this.emit("change")}},{key:"setMapOver",value:function(t){var e=t;if(this.multiple){var n=new Na("list");if(t.collectionType===n.collectionType)return;e=t.effectiveMapOver?t.effectiveMapOver(n):t}this.mapOver.equal(t)||(this.mapOver=t,Object.values(this.node.outputTerminals).forEach((function(t){t.setMapOver(e)}))),this.emit("change")}},{key:"isMappedOver",value:function(){return this.mapOver.isCollection}},{key:"resetMapping",value:function(){this.mapOver=Ya,this.emit("change")}},{key:"resetCollectionTypeSource",value:function(){var t=this.node;Object.values(t.outputTerminals).forEach((function(t){t.attributes.collection_type_source&&t.attributes.collection_type&&(t.attributes.collection_type=null,t.update(t.attributes))}))}},{key:"hasConnectedMappedInputTerminals",value:function(){var t=this.node.inputTerminals;for(var e in t){var n=t[e];if(n.connectors.length>0&&n.isMappedOver())return!0}return!1}},{key:"hasConnectedOutputTerminals",value:function(){var t=this.node.outputTerminals;for(var e in t)if(t[e].connectors.length>0)return!0;return!1}},{key:"hasMappedOverInputTerminals",value:function(){var t=this.node.inputTerminals;for(var e in t){if(t[e].mapOver.isCollection)return!0}return!1}},{key:"resetMappingIfNeeded",value:function(){}}]),n}(Ma.a),Fa=function(t){ja(n,t);var e=La(n);function n(t){var i;return Pa(this,n),(i=e.call(this,t)).datatypesMapper=t.datatypesMapper,i.update(t.input),i}return Ia(n,[{key:"canAccept",value:function(t){return this._inputFilled()?new Ha(!1,"Input already filled with another connection, delete it before connecting another output."):this.attachable(t)}},{key:"resetMappingIfNeeded",value:function(){this.mapOver.isCollection&&((this.hasConnectedMappedInputTerminals()||!this.hasConnectedOutputTerminals())&&this.resetMapping())}},{key:"resetMapping",value:function(){Ca(Aa(n.prototype),"resetMapping",this).call(this),this.hasMappedOverInputTerminals()||Object.values(this.node.outputTerminals).forEach((function(t){t.resetMapping()}))}},{key:"connected",value:function(){return 0!==this.connectors.length}},{key:"_inputFilled",value:function(){return!!this.connected()&&(!this.multiple||!!this._collectionAttached())}},{key:"_collectionAttached",value:function(){if(this.connected()){var t=this.connectors[0].outputHandle;return!!t&&!!(t.isCollection||t.isMappedOver()||t.datatypes.indexOf("input")>0)}return!1}},{key:"_mappingConstraints",value:function(){var t=this.node;if(!t)return[];var e=this.mapOver;if(e.isCollection)return[e];var n=[];return this.hasConnectedOutputTerminals()?n.push(Object.values(t.outputTerminals)[0].mapOver):Object.values(t.inputTerminals).forEach((function(t){t.mapOver.isCollection&&t.connectors.length>0&&n.push(t.mapOver)})),n}},{key:"_producesAcceptableDatatype",value:function(t){for(var e in this.datatypes){var n=this.datatypes[e];if("input"==n)return new Ha(!0,null);var i=[],a=t.force_datatype?[t.force_datatype]:t.datatypes;for(var r in i=i.concat(a)){var o=i[r];if("input"==o||"_sniff_"==o||this._isSubType(i[r],n))return new Ha(!0,null)}}return new Ha(!1,"Effective output data type(s) [".concat(i,"] do not appear to match input type(s) [").concat(this.datatypes,"]."))}},{key:"_isSubType",value:function(t,e){return this.datatypesMapper.isSubType(t,e)}},{key:"_producesAcceptableDatatypeAndOptionalness",value:function(t){return this.optional||this.multiple||!t.optional?this._producesAcceptableDatatype(t):new Ha(!1,"Cannot connect an optional output to a non-optional input")}},{key:"_otherCollectionType",value:function(t){var e=Ya;t.isCollection&&(e=t.collectionType);var n=t.mapOver;return n.isCollection&&(e=n.append(e)),e}}]),n}($a),Wa=function(t){ja(n,t);var e=La(n);function n(){return Pa(this,n),e.apply(this,arguments)}return Ia(n,[{key:"update",value:function(t){this.datatypes=t.extensions,this.multiple=t.multiple,this.optional=t.optional,this.collection=!1}},{key:"connect",value:function(t){Ca(Aa(n.prototype),"connect",this).call(this,t);var e=t.outputHandle;if(e){var i=this._otherCollectionType(e);i.isCollection&&this.setMapOver(i)}}},{key:"attachable",value:function(t){var e=this._otherCollectionType(t),n=this.mapOver;if(e.isCollection){if(this.multiple){if(this.connected()&&!this._collectionAttached())return new Ha(!1,"Cannot attach collections to data parameters with individual data inputs already attached.");if(e.collectionType&&e.collectionType.endsWith("paired"))return new Ha(!1,"Cannot attach paired inputs to multiple data parameters, only lists may be treated this way.")}return n.isCollection&&n.canMatch(e)?this._producesAcceptableDatatypeAndOptionalness(t):this.multiple&&new Na("list").canMatch(e)?this._producesAcceptableDatatypeAndOptionalness(t):this._mappingConstraints().every(e.canMatch.bind(e))?this._producesAcceptableDatatypeAndOptionalness(t):n.isCollection?this.hasConnectedMappedInputTerminals()?new Ha(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new Ha(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry."):new Ha(!1,"Can't map over this input with output collection type - an output of this tool is not mapped over constraining this input. Disconnect output(s) and retry.")}return n.isCollection?new Ha(!1,"Cannot attach non-collection outputs to mapped over inputs, consider disconnecting inputs and outputs to reset this input's mapping."):this._producesAcceptableDatatypeAndOptionalness(t)}}]),n}(Fa),za=function(t){ja(n,t);var e=La(n);function n(){return Pa(this,n),e.apply(this,arguments)}return Ia(n,[{key:"update",value:function(t){this.type=t.type,this.optional=t.optional}},{key:"effectiveType",value:function(t){return"select"==t?"text":t}},{key:"attachable",value:function(t){var e=this.effectiveType(this.type),n=this.effectiveType(t.attributes.type);return new Ha(e==n,"")}}]),n}(Fa),Ua=function(t){ja(n,t);var e=La(n);function n(){return Pa(this,n),e.apply(this,arguments)}return Ia(n,[{key:"update",value:function(t){this.multiple=!1,this.collection=!0,this.collection_type=t.collection_type,this.datatypes=t.extensions,this.optional=t.optional;var e=[];t.collection_types?t.collection_types.forEach((function(t){e.push(new Na(t))})):e.push(Ra),this.collectionTypes=e}},{key:"connect",value:function(t){Ca(Aa(n.prototype),"connect",this).call(this,t);var e=t.outputHandle;if(e){var i=this.node;Object.values(i.outputTerminals).forEach((function(n){n.attributes.collection_type_source&&!t.dragging&&(e.isMappedOver()?e.isCollection?n.attributes.collection_type=e.mapOver.append(e.collectionType).collectionType:n.attributes.collection_type=e.mapOver.collectionType:n.attributes.collection_type=e.attributes.collection_type,n.update(n.attributes))}))}var a=this._effectiveMapOver(e);this.setMapOver(a)}},{key:"_effectiveMapOver",value:function(t){var e=this.collectionTypes,n=this._otherCollectionType(t);if(!e.some((function(t){return t.canMatch(n)})))for(var i in e){var a=e[i];if(n.canMapOver(a)){var r=n.effectiveMapOver(a);if(r!=Ya)return r}}return Ya}},{key:"_effectiveCollectionTypes",value:function(){var t=this.mapOver;return this.collectionTypes.map((function(e){return t.append(e)}))}},{key:"attachable",value:function(t){var e=this._otherCollectionType(t);if(e.isCollection){var n=this._effectiveCollectionTypes(),i=this.mapOver;if(n.some((function(t){return t.canMatch(e)})))return this._producesAcceptableDatatypeAndOptionalness(t);if(i.isCollection)return this.hasConnectedMappedInputTerminals()?new Ha(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new Ha(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry.");if(this.collectionTypes.some((function(t){return e.canMapOver(t)}))){var a=this._effectiveMapOver(t);return a.isCollection?this._mappingConstraints().every((function(t){return a.canMatch(t)}))?this._producesAcceptableDatatypeAndOptionalness(t):this.hasConnectedMappedInputTerminals()?new Ha(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new Ha(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry."):new Ha(!1,"Incompatible collection type(s) for attachment.")}return new Ha(!1,"Incompatible collection type(s) for attachment.")}return new Ha(!1,"Cannot attach a data output to a collection input.")}}]),n}(Fa),Va=function(t){ja(n,t);var e=La(n);function n(t){var i;return Pa(this,n),(i=e.call(this,t)).datatypes=t.datatypes,i.optional=t.optional,i}return Ia(n,[{key:"update",value:function(t){this.datatypes=t.datatypes||t.extensions,this.optional=t.optional}},{key:"force_datatype",get:function(){var t=this.node.postJobActions["ChangeDatatypeAction"+this.name];return t?t.action_arguments.newtype:null}}]),n}($a),Ba=function(t){ja(n,t);var e=La(n);function n(){return Pa(this,n),e.apply(this,arguments)}return Ia(n,[{key:"resetMappingIfNeeded",value:function(){if(!this.hasConnectedOutputTerminals()&&!this.hasConnectedMappedInputTerminals()){var t=this.node;Object.values(t.inputTerminals).forEach((function(t){t.mapOver.isCollection&&t.resetMappingIfNeeded()}))}!this.hasMappedOverInputTerminals()&&this.resetMapping()}},{key:"resetMapping",value:function(){Ca(Aa(n.prototype),"resetMapping",this).call(this),this.connectors.forEach((function(t){var e=t.inputHandle;e&&(e.resetMappingIfNeeded(),t.destroyIfInvalid())}))}}]),n}(Va),qa=function(t){ja(n,t);var e=La(n);function n(t){var i;(Pa(this,n),i=e.call(this,t),t.collection_type)?i.collectionType=new Na(t.collection_type):(t.collection_type_source||console.log("Warning: No collection type or collection type source defined."),i.collectionType=Ra);return i.isCollection=!0,i}return Ia(n,[{key:"update",value:function(t){var e;(Ca(Aa(n.prototype),"update",this).call(this,t),t.collection_type)?e=new Na(t.collection_type):(t.collection_type_source||console.log("Warning: No collection type or collection type source defined."),e=Ra);var i=this.collectionType;this.collectionType=e;var a=this.connectors.slice(0);e.collectionType!=i.collectionType&&a.forEach((function(t){t.destroyIfInvalid(!0)}))}}]),n}(Va),Ga={Terminal:$a,InputTerminal:Wa,InputParameterTerminal:za,OutputTerminal:Ba,OutputParameterTerminal:function(t){ja(n,t);var e=La(n);function n(){return Pa(this,n),e.apply(this,arguments)}return Ia(n,[{key:"update",value:function(t){this.attributes.type=t.type}}]),n}($a),InputCollectionTerminal:Ua,OutputCollectionTerminal:qa,CollectionTypeDescription:Na,NULL_COLLECTION_TYPE_DESCRIPTION:Ya,ANY_COLLECTION_TYPE_DESCRIPTION:Ra},Ja=n(82),Ka=n(73);function Xa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Qa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Za(t){var e=t.e,n=t.manager,i=t.outputTerminal,r=t.outputEl,o=document.createElement("ul"),s=function(t,e){e.classList.add("active"),e.focus(),t.classList.remove("active")},l=function(t){t.stopPropagation();var e=t.currentTarget,a=e.previousSibling,l=e.nextSibling,c=e.getAttribute("node-key"),d=e.getAttribute("input-key"),u=n.nodes[c].inputTerminals[d],h=!1;switch(t.keyCode){case 40:s(e,l||e.parentNode.firstChild);break;case 38:s(e,a||e.parentNode.lastChild);break;case 32:o.remove(),r.removeAttribute("aria-owns"),r.setAttribute("aria-grabbed","false"),r.focus(),i.connectors.forEach((function(t){t.inputHandle===u&&(t.destroy(),h=!0,Object(Ka.a)("Connection destroyed"))})),h||(new Ja.a(n.canvasManager,i,u).redraw(),Object(Ka.a)("Node connected"))}};32===e.keyCode&&(Object(Ka.a)("Node selected"),a()(o).focusout((function(t){o.contains(t.relatedTarget)||a()(o).hide()})),o.id="input-choices-menu",o.className="list-group",o.style.position="absolute",o.setAttribute("role","menu"),r.setAttribute("aria-grabbed","true"),r.setAttribute("aria-owns","input-choices-menu"),Object.entries(n.nodes).forEach((function(t){var e=Xa(t,2),n=e[0],a=e[1];Object.entries(a.inputTerminals).forEach((function(t){var e=Xa(t,2),a=e[0],r=e[1],s=r.canAccept(i),c=!1;if(i.connectors.forEach((function(t){t.inputHandle===r&&(c=!0)})),s.canAccept||c){var d=document.createElement("li");d.textContent="".concat(r.name," in ").concat(r.node.name," node"),d.tabIndex=-1,d.onkeydown=l,d.className="list-group-item",d.setAttribute("role","menuitem"),d.setAttribute("input-key",a),d.setAttribute("node-key",n),o.appendChild(d)}}))})),o.firstChild?(r.appendChild(o),o.firstChild.classList.add("active"),o.firstChild.focus()):Object(Ka.a)("There are no available inputs for this selected output"))}function tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function er(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nr(t,e,n){return e&&er(t.prototype,e),n&&er(t,n),t}function ir(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ar(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var rr=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};tr(this,t),this.app=e,this.el=i.el,this.terminal=i.terminal,this.el.terminal=this.terminal,this.$el=a()(this.el),this.$el.on("dropinit",(function(t,e){return n.onDropInit(t,e)})),this.$el.on("dropstart",(function(t,e){return n.onDropStart(t,e)})),this.$el.on("dropend",(function(t,e){return n.onDropEnd(t,e)})),this.$el.on("drop",(function(t,e){return n.onDrop(t,e)}))}return nr(t,[{key:"onDropInit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.terminal,i=a()(e.drag).hasClass("output-terminal")&&n.canAccept(e.drag.terminal);return i.canAccept?(this.$el.addClass("can-accept"),this.$el.removeClass("cannot-accept"),this.reason=null):(this.$el.addClass("cannot-accept"),this.$el.removeClass("can-accept"),this.reason=i.reason),!0}},{key:"onDropStart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.proxy.terminal&&(this.$el.hasClass("can-accept")?(e.proxy.terminal.connectors[0].dropStart(!0),e.proxy.dropTooltip=""):(e.proxy.terminal.connectors[0].dropStart(!1),this.reason?(e.proxy.dropTooltip=this.reason,a()(e.proxy).tooltip("show")):e.proxy.dropTooltip=""))}},{key:"onDropEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.proxy.dropTooltip="",e.proxy.terminal&&e.proxy.terminal.connectors[0].dropEnd()}},{key:"onDrop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.proxy.dropTooltip="",this.$el.hasClass("can-accept")){var n=this.terminal,i=new Ja.a(this.app.canvasManager,e.drag.terminal,n);i.redraw()}}}]),t}(),or=function(){function t(e,n){var i=this;tr(this,t),this.app=e,this.el=n.el,this.terminal=n.terminal,this.el.terminal=this.terminal,this.$el=a()(this.el),this.$el.attr("aria-label","connect output ".concat(this.terminal.name," to input. Press space to see a list of available inputs")),this.$el.attr("tabindex","0"),this.$el.attr("aria-grabbed","false"),this.$el.on("drag",(function(t,e){return i.onDrag(t,e)})),this.$el.on("dragstart",(function(t,e){return i.onDragStart(t,e)})),this.$el.on("dragend",(function(t,e){return i.onDragEnd(t,e)})),this.$el.on("keydown",(function(t){return Za({e:t,manager:e,outputTerminal:n.terminal,outputEl:i.el})}))}return nr(t,[{key:"onDrag",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(){var t=e.app.canvasManager.canvasZoom,i=a()(n.proxy).offsetParent().offset(),r=n.offsetX-i.left,o=n.offsetY-i.top;a()(n.proxy).css({left:r/t,top:o/t}),n.proxy.terminal.redraw(),e.app.canvasManager.updateViewportOverlay()};i(),a()("#canvas-container").get(0).scroll_panel.test(t,i)}},{key:"onDragStart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a()(e.available).addClass("input-terminal-active");var n=a()("<div class='drag-terminal'/>").appendTo("#canvas-container").get(0);n.dropTooltip="",a()(n).tooltip({title:function(){return n.dropTooltip||""}}),n.terminal=new Ga.Terminal({element:n,node:{}});var i=new Ja.a(this.app.canvasManager);return i.dragging=!0,i.connect(this.terminal,n.terminal),n}},{key:"onDragEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.proxy.terminal.connectors[0];n&&n.destroy(),a()(e.proxy).tooltip("dispose"),a()(e.proxy).remove(),a()(e.available).removeClass("input-terminal-active"),a()("#canvas-container").get(0).scroll_panel.stop()}}]),t}(),sr={props:{input:{type:Object,required:!0},getNode:{type:Function,required:!0},getManager:{type:Function,required:!0},datatypesMapper:{type:Object,required:!0}},data:function(){return{showRemove:!1,isMultiple:!1}},watch:{input:function(t){var e=this,n=this.terminal;if(n instanceof this.terminalClassForInput(t))n.update(t),n.destroyInvalidConnections();else{this.$emit("onRemove",this.input);var i=this.createTerminal(t);i.connectors=this.terminal.connectors.map((function(t){return new Ja.a(e.getManager(),t.outputHandle,i)})),i.destroyInvalidConnections(),this.terminal=i,n.destroy()}}},computed:{id:function(){var t=this.getNode();return"node-".concat(t.id,"-input-").concat(this.input.name)},label:function(){return this.input.label||this.input.name},terminalClass:function(){var t="terminal input-terminal";return this.isMultiple?"".concat(t," multiple"):t}},mounted:function(){this.terminal=this.createTerminal(this.input)},methods:{terminalClassForInput:function(t){var e=Ga.InputTerminal;return"dataset_collection"==t.input_type?e=Ga.InputCollectionTerminal:"parameter"==t.input_type&&(e=Ga.InputParameterTerminal),e},createTerminal:function(t){var e=new(this.terminalClassForInput(t))({node:this.getNode(),datatypesMapper:this.datatypesMapper,name:t.name,input:t,element:this.$refs.terminal});return e.on("change",this.onChange.bind(this)),new rr(this.getManager(),{el:this.$refs.terminal,terminal:e}),this.$emit("onAdd",this.input,e),e},onChange:function(){this.isMultiple=this.terminal.mapOver&&this.terminal.mapOver.isCollection,this.$emit("onChange")},onRemove:function(){this.$emit("onRemove",this.input),this.terminal.destroy()},mouseOver:function(t){this.terminal.connectors.length>0&&(this.showRemove=!0)},mouseLeave:function(){this.showRemove=!1}},beforeDestroy:function(){this.onRemove()}},lr=Object(jn.a)(sr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-row dataRow input-data-row",on:{mouseover:t.mouseOver,mouseleave:t.mouseLeave}},[n("div",{ref:"terminal",class:t.terminalClass,attrs:{id:t.id,"input-name":t.input.name}},[n("div",{staticClass:"icon"})]),t._v(" "),t.showRemove?n("div",{staticClass:"delete-terminal",on:{click:t.onRemove}}):t._e(),t._v("\n    "+t._s(t.label)+"\n")])}),[],!1,null,null,null).exports;function cr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function dr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cr(Object(n),!0).forEach((function(e){ur(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ur(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hr={props:{output:{type:Object,required:!0},getNode:{type:Function,required:!0},getManager:{type:Function,required:!0}},data:function(){return{isMultiple:!1}},computed:{id:function(){var t=this.getNode();return"node-".concat(t.id,"-output-").concat(this.output.name)},label:function(){var t,e=this.output.extensions||this.output.type||"unspecified";Array.isArray(e)&&(e=e.join(", "));var n=(null===(t=this.activeOutput)||void 0===t?void 0:t.activeLabel)||this.output.label||this.output.name;return"".concat(n," (").concat(e,")")},activeOutput:function(){return this.getNode().activeOutputs.outputsIndex[this.output.name]},activeClass:function(){var t;return(null===(t=this.activeOutput)||void 0===t?void 0:t.activeOutput)&&"mark-terminal-active"},showCallout:function(){return"tool"==this.getNode().type},terminalClass:function(){var t="terminal output-terminal";return this.isMultiple?"".concat(t," multiple"):t}},watch:{output:function(t){var e=this,n=this.terminal;if(n instanceof this.terminalClassForOutput(t))n.update(t),n.destroyInvalidConnections();else{this.$emit("onRemove",this.output);var i=this.createTerminal(t);i.connectors=this.terminal.connectors.map((function(t){return new Ja.a(e.getManager(),i,t.inputHandle)})),i.destroyInvalidConnections(),this.terminal=i,n.destroy()}}},mounted:function(){this.terminal=this.createTerminal(this.output)},methods:{terminalClassForOutput:function(t){var e=Ga.OutputTerminal;return t.collection?e=Ga.OutputCollectionTerminal:t.parameter&&(e=Ga.OutputParameterTerminal),e},createTerminal:function(t){var e,n=this.terminalClassForOutput(t),i={node:this.getNode(),name:t.name,element:this.$refs.terminal,optional:t.optional};if(t.collection){var a=t.collection_type,r=t.collection_type_source;e=new n(dr(dr({},i),{},{collection_type:a,collection_type_source:r,datatypes:t.extensions}))}else e=t.parameter?new n(dr(dr({},i),{},{type:t.type})):new n(dr(dr({},i),{},{datatypes:t.extensions}));return e.on("change",this.onChange.bind(this)),new or(this.getManager(),{el:this.$refs.terminal,terminal:e}),this.$emit("onAdd",this.output,e),e},onChange:function(){this.isMultiple=this.terminal.mapOver&&this.terminal.mapOver.isCollection,this.$emit("onChange")},onToggle:function(){this.$emit("onToggle",this.output.name)}},beforeDestroy:function(){this.$emit("onRemove",this.output),this.terminal.destroy()}},fr=Object(jn.a)(hr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-row dataRow output-data-row"},[t.showCallout?n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],class:["callout-terminal",t.output.name],attrs:{title:"Unchecked outputs will be hidden and are not available as subworkflow outputs."},on:{click:t.onToggle}},[n("i",{class:["mark-terminal",t.activeClass]})]):t._e(),t._v("\n    "+t._s(t.label)+"\n    "),n("div",{ref:"terminal",class:t.terminalClass,attrs:{id:t.id,"output-name":t.output.name}},[n("div",{staticClass:"icon"})])])}),[],!1,null,null,null).exports;function pr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var mr={},_r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.entries={}}var e,n,i;return e=t,(n=[{key:"initialize",value:function(t,e){var n=this;this.outputs=t,this._refreshIndex(),e&&e.forEach((function(t){t.label&&mr[t.label]&&(t.label=null),n.add(t.output_name,t.label),t.label&&(mr[t.label]=!0)}))}},{key:"add",value:function(t,e){return!this.exists(t)&&(this.update(t,e),!0)}},{key:"toggle",value:function(t){this.exists(t)?this.remove(t):this.add(t)}},{key:"labelOutput",value:function(t,e){if(this.outputsIndex[t]&&!mr[e]){var n=this.update(t,e);return n&&mr[n]&&delete mr[n],e&&(mr[e]=!0),null}var i=this.get(t);return i&&i.label}},{key:"count",value:function(){return Object.keys(this.entries).length}},{key:"get",value:function(t){return this.entries[t]}},{key:"exists",value:function(t){return!!this.entries[t]}},{key:"remove",value:function(t){var e=this.get(t),n=e&&e.label;n&&mr[n]&&delete mr[n],delete this.entries[t],this._updateOutput(t)}},{key:"getAll",value:function(){return Object.values(this.entries)}},{key:"update",value:function(t,e){var n=this.get(t),i=n&&n.label;return this.entries[t]={output_name:t,label:e||null},this._updateOutput(t),i}},{key:"filterOutputs",value:function(t){var e=this;this.getAll().forEach((function(n){t.includes(n.output_name)||e.remove(n.output_name)})),this._refreshIndex()}},{key:"_updateOutput",value:function(t){var e=this.outputsIndex[t];if(e){var n=this.get(e.name);Ve.default.set(e,"activeOutput",!!n),Ve.default.set(e,"activeLabel",n&&n.label)}}},{key:"_refreshIndex",value:function(){var t=this;this.outputsIndex={},this.outputs&&this.outputs.forEach((function(e){t.outputsIndex[e.name]=e}))}}])&&pr(e.prototype,n),i&&pr(e,i),t}();Ve.default.use(Ln.a);var gr={components:{LoadingSpan:Wi.a,Recommendations:xa,NodeInput:lr,NodeOutput:fr},props:{id:{type:String,default:""},contentId:{type:String,default:""},name:{type:String,default:"name"},type:{type:String,default:null},step:{type:Object,default:null},getManager:{type:Function,default:null},getCanvasManager:{type:Function,default:null},datatypesMapper:{type:Object,default:null}},data:function(){return{popoverShow:!1,node:null,inputs:[],outputs:[],inputTerminals:{},outputTerminals:{},errors:null,label:null,config_form:{},showLoading:!0,highlight:!1,scrolledTo:!1}},mounted:function(){var t=this;this.canvasManager=this.getCanvasManager(),this.activeOutputs=new _r,this.element=this.$el,this.content_id=this.contentId;var e=this.step,n=this.$el;if(e.position)n.style.top=e.position.top+"px",n.style.left=e.position.left+"px";else{var i=document.getElementById("canvas-viewport"),r=document.getElementById("canvas-container");if(i&&r){var o=-r.offsetLeft+(i.offsetWidth-n.offsetWidth)/2,s=-r.offsetTop+(i.offsetHeight-n.offsetHeight)/2;n.style.top="".concat(s,"px"),n.style.left="".concat(o,"px")}}!function(t,e){var n=a()(t);Object.entries(e).forEach((function(t){var e=ir(t,2),i=e[0],a=e[1];n.bind(i,a)}))}(this.$el,{dragstart:function(){t.$emit("onActivate",t)},dragend:function(){t.$emit("onChange"),t.canvasManager.drawOverview()},drag:function(e,n){var i=document.getElementById("canvas-container"),a=t.$el,r=i.getBoundingClientRect(),o=(n.offsetX-r.left)/t.canvasManager.canvasZoom,s=(n.offsetY-r.top)/t.canvasManager.canvasZoom;a.style.left="".concat(o,"px"),a.style.top="".concat(s,"px"),t.onRedraw()},dragclickonly:function(){t.$emit("onActivate",t)}}),this.$emit("onAdd",this),this.step._complete?this.initData(this.step):this.$emit("onUpdate",this)},computed:{title:function(){return this.label||this.name},idString:function(){return"wf-node-step-".concat(this.id)},showRule:function(){return this.inputs.length>0&&this.outputs.length>0},iconClass:function(){var t=ya.a[this.type];return t?"icon fa fa-fw ".concat(t):null},popoverId:function(){return"popover-".concat(this.id)},canClone:function(){return"subworkflow"!=this.type},isEnabled:function(){return Object(r.a)().config.enable_tool_recommendations},isInput:function(){return"data_input"==this.type||"data_collection_input"==this.type||"parameter_input"==this.type}},methods:{onChange:function(){this.$emit("onChange")},onAddInput:function(t,e){this.inputTerminals[t.name]=e},onRemoveInput:function(t){delete this.inputTerminals[t.name]},onAddOutput:function(t,e){this.outputTerminals[t.name]=e},onRemoveOutput:function(t){delete this.outputTerminals[t.name]},onToggleOutput:function(t){this.activeOutputs.toggle(t),this.$emit("onChange")},onCreate:function(t,e){this.$emit("onCreate",t,e),this.popoverShow=!1},onClone:function(){this.$emit("onClone",this)},onRemove:function(){Object.values(this.inputTerminals).forEach((function(t){t.destroy()})),Object.values(this.outputTerminals).forEach((function(t){t.destroy()})),this.activeOutputs.filterOutputs([]),this.$emit("onRemove",this)},onRedraw:function(){Object.values(this.inputTerminals).forEach((function(t){t.redraw()})),Object.values(this.outputTerminals).forEach((function(t){t.redraw()}))},getNode:function(){return this},setNode:function(t){var e=this;t.workflow_outputs=t.outputs.map((function(t){return{output_name:t.name,label:t.label}})),this.initData(t),Ve.default.nextTick((function(){e.updateData(t),e.$emit("onActivate",e)}))},setAnnotation:function(t){var e=this;this.annotationTimeout&&clearTimeout(this.annotationTimeout),this.annotationTimeout=setTimeout((function(){t!==e.annotation&&(e.annotation=t,e.$emit("onChange"))}),100)},setLabel:function(t){var e=this;this.labelTimeout&&clearTimeout(this.labelTimeout),this.labelTimeout=setTimeout((function(){t!==e.label&&(e.label=t,e.$emit("onChange"))}),100)},setData:function(t){var e;this.config_form=t.config_form,this.content_id=(null===(e=t.config_form)||void 0===e?void 0:e.id)||t.content_id,this.tool_state=t.tool_state,this.errors=t.errors,this.annotation=t.annotation,this.tooltip=t.tooltip||"",this.postJobActions=t.post_job_actions||{},this.label=t.label,this.uuid=t.uuid,this.inputs=t.inputs?t.inputs.slice():[],this.outputs=t.outputs?t.outputs.slice():[]},initData:function(t){this.setData(t),this.activeOutputs.initialize(this.outputs,t.workflow_outputs),this.showLoading=!1},updateData:function(t){this.setData(t);var e=this.outputs.map((function(t){return t.name}));this.activeOutputs.filterOutputs(e),this.showLoading=!1,this.$emit("onChange")},labelOutput:function(t,e){return this.activeOutputs.labelOutput(t,e)},changeOutputDatatype:function(t,e){"__empty__"===e&&(e=null);var n=this.outputTerminals[t];e?this.postJobActions["ChangeDatatypeAction"+t]={action_arguments:{newtype:e},action_type:"ChangeDatatypeAction",output_name:t}:delete this.postJobActions["ChangeDatatypeAction"+t],n.destroyInvalidConnections(),this.$emit("onChange")},onScrollTo:function(){var t=this;this.scrolledTo=!0,setTimeout((function(){t.scrolledTo=!1}),2e3)},onHighlight:function(){this.highlight=!0},onUnhighlight:function(){this.highlight=!1},makeActive:function(){this.element.classList.add("node-active")},makeInactive:function(){var t,e=this.element;(t=e.parentNode).removeChild(e),t.appendChild(e),e.classList.remove("node-active")}}},vr=Object(jn.a)(gr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"workflow-node":!0,"node-on-scroll-to":t.scrolledTo,"node-highlight":t.highlight},attrs:{id:t.idString,name:t.name,"node-label":t.label}},[n("div",{staticClass:"node-header unselectable clearfix"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"node-destroy py-0 float-right",attrs:{variant:"primary",size:"sm","aria-label":"destroy node",title:"Remove"},on:{click:t.onRemove}},[n("i",{staticClass:"fa fa-times"})]),t._v(" "),t.isEnabled?n("b-button",{staticClass:"node-recommendations py-0 float-right",attrs:{id:t.popoverId,variant:"primary",size:"sm","aria-label":"tool recommendations"}},[n("i",{staticClass:"fa fa-arrow-right"})]):t._e(),t._v(" "),n("b-popover",{attrs:{target:t.popoverId,triggers:"hover",placement:"bottom",show:t.popoverShow},on:{"update:show":function(e){t.popoverShow=e}}},[n("Recommendations",{attrs:{"get-node":t.getNode,"get-manager":t.getManager,"datatypes-mapper":t.datatypesMapper},on:{onCreate:t.onCreate}})],1),t._v(" "),t.canClone?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"node-clone py-0 float-right",attrs:{variant:"primary",size:"sm","aria-label":"clone node",title:"Duplicate"},on:{click:t.onClone}},[n("i",{staticClass:"fa fa-files-o"})]):t._e(),t._v(" "),n("i",{class:t.iconClass}),t._v(" "),n("span",{staticClass:"node-title"},[t._v(t._s(t.title))])],1),t._v(" "),t.errors?n("b-alert",{staticClass:"node-error",attrs:{variant:"danger",show:""}},[t._v("\n        "+t._s(t.errors)+"\n    ")]):n("div",{staticClass:"node-body"},[t.showLoading?n("loading-span",{attrs:{message:"Loading details"}}):t._e(),t._v(" "),t._l(t.inputs,(function(e){return n("node-input",{key:e.name,attrs:{input:e,"get-node":t.getNode,"get-manager":t.getManager,"datatypes-mapper":t.datatypesMapper},on:{onAdd:t.onAddInput,onRemove:t.onRemoveInput,onChange:t.onChange}})})),t._v(" "),t.showRule?n("div",{staticClass:"rule"}):t._e(),t._v(" "),t._l(t.outputs,(function(e){return n("node-output",{key:e.name,attrs:{output:e,"get-node":t.getNode,"get-manager":t.getManager},on:{onAdd:t.onAddOutput,onRemove:t.onRemoveOutput,onToggle:t.onToggleOutput,onChange:t.onChange}})}))],2)],1)}),[],!1,null,null,null).exports;function yr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yr(Object(n),!0).forEach((function(e){wr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kr(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var xr={components:{MarkdownEditor:li,SidePanel:oi.a,StateUpgradeModal:Di,ToolBoxWorkflow:mi,WorkflowOptions:On,WorkflowAttributes:ma,ZoomControl:va,WorkflowNode:vr,WorkflowLint:ji,RefactorConfirmationModal:Pi,MessagesModal:Ri},props:{id:{type:String,required:!0},version:{type:Number,required:!0},tags:{type:Array,required:!0},moduleSections:{type:Array,required:!0},dataManagers:{type:Array,required:!0},workflows:{type:Array,required:!0},toolbox:{type:Array,required:!0}},data:function(){return{isCanvas:!0,markdownConfig:null,markdownText:null,versions:[],parameters:null,zoomLevel:7,steps:{},hasChanges:!1,nodeIndex:0,nodes:{},requiresReindex:!1,datatypesMapper:null,datatypes:[],report:{},activeNode:null,labels:{},license:null,creator:null,annotation:null,name:null,stateMessages:[],insertedStateMessages:[],refactorActions:[],messageTitle:null,messageBody:null,messageIsError:!1}},created:function(){var t=this;Object(Be.a)().then((function(e){t.datatypesMapper=e,t.datatypes=e.datatypes,t.canvasManager=new xn(t,t.$refs.canvas),t._loadCurrent(t.id,t.version)})),window.onbeforeunload=function(){if(t.hasChanges)return"There are unsaved changes to your workflow which will be lost."},Object(O.b)()},watch:{annotation:function(t,e){t!=e&&(this.hasChanges=!0)},name:function(t,e){t!=e&&(this.hasChanges=!0)},steps:function(t,e){this.hasChanges=!0},nodes:function(t,e){this.hasChanges=!0,t.length!=e.length&&(this.requiresReindex=!0)}},methods:{onActivate:function(t){this.activeNode!=t&&(this.activeNode&&this.activeNode.makeInactive(),document.activeElement.blur(),t.makeActive(),this.activeNode=t),Object(pn.f)(this,t,this.datatypes),this.canvasManager.drawOverview()},onAttemptRefactor:function(t){var e=this;if(this.hasChanges){if(0==window.confirm("You've made changes to your workflow that need to be saved before attempting the requested action. Save those changes and continue?"))return;return this.onWorkflowMessage("Saving workflow...","progress"),Object(Ge.f)(this).then((function(n){e.refactorActions=t})).catch((function(t){e.onWorkflowError("Saving workflow failed, cannot apply requested changes...")}))}this.refactorActions=t},onWorkflowError:function(t,e){this.messageTitle=t,this.messageBody=e.toString(),this.messageIsError=!0},onWorkflowMessage:function(t,e){this.messageTitle=t,this.messageBody=e,this.messageIsError=!1},hideModal:function(){this.messageTitle=null,this.messageBody=null,this.messageIsError=!1,Object(O.b)()},onRefactor:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(qe.a)(n,t.workflow);case 2:n._loadEditorData(t.workflow);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(t){kr(r,i,a,o,s,"next",t)}function s(t){kr(r,i,a,o,s,"throw",t)}o(void 0)}))})()},onAdd:function(t){this.nodes[t.id]=t},onUpdate:function(t){Object(Ge.a)({type:t.type,content_id:t.contentId,_:"true"}).then((function(e){var n=Object.assign({},e,t.step);t.setNode(n)}))},onChange:function(){this.hasChanges=!0},onRemove:function(t){delete this.nodes[t.id],Ve.default.delete(this.steps,t.id),this.canvasManager.drawOverview(),this.activeNode=null,Object(pn.e)()},onEditSubworkflow:function(t){var e="".concat(Object(d.getAppRoot)(),"workflow/editor?workflow_id=").concat(t);this.onNavigate(e)},onClone:function(t){var e=this,n=this.nodeIndex++,i=JSON.parse(JSON.stringify(t.step)),a=JSON.parse(JSON.stringify(t.config_form));Ve.default.set(this.steps,n,br(br({},i),{},{id:n,config_form:br(br({},a),{},{inputs:a.inputs.filter((function(t){return!t.skipOnClone}))}),uuid:null,label:null,annotation:JSON.parse(JSON.stringify(t.annotation)),tool_state:JSON.parse(JSON.stringify(t.tool_state)),post_job_actions:JSON.parse(JSON.stringify(t.postJobActions))})),Ve.default.nextTick().then((function(){e.canvasManager.drawOverview(),t=e.nodes[n],e.onActivate(t)}))},onInsertTool:function(t,e){this._insertStep(t,e,"tool")},onInsertModule:function(t,e){this._insertStep(null,e,t)},onInsertWorkflow:function(t,e){this._insertStep(t,e,"subworkflow")},onInsertWorkflowSteps:function(t,e){this.isCanvas?Object(pn.a)(this,t,e):this.isCanvas=!0},onDownload:function(){window.location="".concat(Object(d.getAppRoot)(),"api/workflows/").concat(this.id,"/download?format=json-download")},onSaveAs:function(){Object(pn.d)(this)},onLayout:function(){var t=this;return this.canvasManager.drawOverview(),this.canvasManager.scrollToNodes(),Promise.all([n.e(11),n.e(12)]).then(n.bind(null,2177)).then((function(e){e.autoLayout(t)}))},onAttributes:function(){Object(pn.e)(),this._ensureParametersSet()},onScrollTo:function(t){var e=this.nodes[t];this.canvasManager.scrollToNode(e),e.onScrollTo()},onHighlight:function(t){this.nodes[t].onHighlight()},onUnhighlight:function(t){this.nodes[t].onUnhighlight()},onLint:function(){if(this.requiresReindex){if(0==window.confirm("Workflow steps have been added or removed since last save, the workflow needs to be saved before best practices can be analzyed. Save workflow?"))return;this.onSave(!0)}else this._ensureParametersSet(),this.$refs.lint.refresh(),Object(pn.g)()},onEdit:function(){this.isCanvas=!0},onReport:function(){this.isCanvas=!1},onReportUpdate:function(t){this.hasChanges=!0,this.report.markdown=t,this.markdownText=t},onRun:function(){var t="".concat(Object(d.getAppRoot)(),"workflows/run?id=").concat(this.id);this.onNavigate(t)},onNavigate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!e&&this.hasChanges?this.onSave(!0).then((function(){window.location=t})):(this.hasChanges&&(window.onbeforeunload=!1,this.hideModal()),window.location=t)},onZoom:function(t){this.zoomLevel=this.canvasManager.setZoom(t)},onSave:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!e&&this.onWorkflowMessage("Saving workflow...","progress"),Object(Ge.f)(this).then((function(e){Object(Ge.c)(t.id).then((function(e){t.versions=e,t.hideModal()}))})).catch((function(e){t.onWorkflowError("Saving workflow failed...",e,{Ok:function(){t.hideModal()}})}))},onVersion:function(t){if(t!=this.version){if(this.hasChanges)if(0==window.confirm("There are unsaved changes to your workflow which will be lost. Continue ?"))return;this.version=t,this._loadCurrent(this.id,t)}},_ensureParametersSet:function(){var t,e,n;this.parameters=(t=this.nodes,e=new fn,n=/\$\{.+?\}/g,Object.entries(t).forEach((function(t){var i=Je(t,2),a=(i[0],i[1]);a.config_form&&a.config_form.inputs&&m.b.deepeach(a.config_form.inputs,(function(t){if("string"==typeof t.value){var i=t.value.match(n);if(i){var r,o=Ke(i);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=e.getParameterFromMatch(s);new dn(l,a,t)}}catch(t){o.e(t)}finally{o.f()}}}})),a.postJobActions&&Object.values(a.postJobActions).forEach((function(t){t.action_arguments&&Object.values(t.action_arguments).forEach((function(i){if("string"==typeof i){var r=i.match(n);if(r){var o,s=Ke(r);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=e.getParameterFromMatch(l);new un(c,a,t)}}catch(t){s.e(t)}finally{s.f()}}}}))}))})),e)},_insertStep:function(t,e,n){this.isCanvas?Ve.default.set(this.steps,this.nodeIndex++,{name:e,content_id:t,type:n}):this.isCanvas=!0},_loadEditorData:function(t){var e=this,n=t.report||{},i=n.markdown||"\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n";this.markdownText=i,this.markdownConfig=n,this.hideModal(),this.stateMessages=Object(pn.c)(t);var a=this.stateMessages.length>0;this.license=t.license,this.creator=t.creator,Object(Ge.c)(this.id).then((function(t){e.versions=t})),Ve.default.nextTick((function(){e.canvasManager.drawOverview(),e.canvasManager.scrollToNodes(),e.hasChanges=e.requiresReindex=a}))},_loadCurrent:function(t,e){var n=this;this.onWorkflowMessage("Loading workflow...","progress"),Object(Ge.d)(this,t,e).then((function(t){n._loadEditorData(t)})).catch((function(t){n.onWorkflowError("Loading workflow failed...",t)}))},onLicense:function(t){this.license!=t&&(this.hasChanges=!0,this.license=t)},onCreator:function(t){this.creator!=t&&(this.hasChanges=!0,this.creator=t)},getManager:function(){return this},getCanvasManager:function(){return this.canvasManager},onInsertedStateMessages:function(t){this.insertedStateMessages=t,this.hideModal()},resetMessage:function(){this.messageTitle=null,this.messageBody=null,this.messageError=!1}}},Sr=(n(549),Object(jn.a)(xr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workflow-client",attrs:{id:"columns"}},[n("StateUpgradeModal",{attrs:{stateMessages:t.stateMessages}}),t._v(" "),n("StateUpgradeModal",{attrs:{stateMessages:t.insertedStateMessages,title:"Subworkflow embedded with changes",message:"Problems were encountered loading this workflow (possibly a result of tool upgrades). Please review the following parameters and then save."}}),t._v(" "),n("RefactorConfirmationModal",{attrs:{workflowId:t.id,refactorActions:t.refactorActions},on:{onWorkflowError:t.onWorkflowError,onWorkflowMessage:t.onWorkflowMessage,onRefactor:t.onRefactor,onShow:function(e){return t.hideModal()}}}),t._v(" "),n("MessagesModal",{attrs:{title:t.messageTitle,message:t.messageBody,error:t.messageIsError},on:{onHidden:t.resetMessage}}),t._v(" "),t.isCanvas?t._e():n("MarkdownEditor",{attrs:{"markdown-text":t.markdownText,"markdown-config":t.markdownConfig,title:"Workflow Report: "+t.name,nodes:t.nodes},on:{onUpdate:t.onReportUpdate},scopedSlots:t._u([{key:"buttons",fn:function(){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"workflow-canvas-button",title:"Return to Workflow",variant:"link",role:"button"},on:{click:t.onEdit}},[n("span",{staticClass:"fa fa-times"})])]},proxy:!0}],null,!1,2515380750)}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isCanvas,expression:"isCanvas"}]},[n("SidePanel",{attrs:{id:"left",side:"left"},scopedSlots:t._u([{key:"panel",fn:function(){return[n("ToolBoxWorkflow",{attrs:{toolbox:t.toolbox,"module-sections":t.moduleSections,"data-managers":t.dataManagers,workflows:t.workflows},on:{onInsertTool:t.onInsertTool,onInsertModule:t.onInsertModule,onInsertWorkflow:t.onInsertWorkflow,onInsertWorkflowSteps:t.onInsertWorkflowSteps}})]},proxy:!0}])}),t._v(" "),n("div",{staticClass:"workflow-center",attrs:{id:"center"}},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("span",{staticClass:"sr-only"},[t._v("Workflow Editor")]),t._v("\n                    "+t._s(t.name)+"\n                ")])]),t._v(" "),n("div",{staticClass:"unified-panel-body workflow-canvas",attrs:{id:"workflow-canvas"}},[n("ZoomControl",{attrs:{"zoom-level":t.zoomLevel},on:{onZoom:t.onZoom}}),t._v(" "),n("div",{attrs:{id:"canvas-viewport"}},[n("div",{ref:"canvas",attrs:{id:"canvas-container"}},t._l(t.steps,(function(e,i){return n("WorkflowNode",{key:i,attrs:{id:i,name:e.name,type:e.type,"content-id":e.content_id,step:e,"datatypes-mapper":t.datatypesMapper,"get-manager":t.getManager,"get-canvas-manager":t.getCanvasManager},on:{onAdd:t.onAdd,onUpdate:t.onUpdate,onClone:t.onClone,onCreate:t.onInsertTool,onChange:t.onChange,onActivate:t.onActivate,onRemove:t.onRemove}})})),1)]),t._v(" "),t._m(0)],1)]),t._v(" "),n("SidePanel",{attrs:{id:"right",side:"right"},scopedSlots:t._u([{key:"panel",fn:function(){return[n("div",{staticClass:"unified-panel workflow-panel"},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("WorkflowOptions",{attrs:{hasChanges:t.hasChanges},on:{onSave:t.onSave,onSaveAs:t.onSaveAs,onRun:t.onRun,onDownload:t.onDownload,onReport:t.onReport,onLayout:t.onLayout,onEdit:t.onEdit,onAttributes:t.onAttributes,onLint:t.onLint}})],1)]),t._v(" "),n("div",{staticClass:"unified-panel-body workflow-right"},[n("div",{staticClass:"m-1"},[n("WorkflowAttributes",{attrs:{id:t.id,tags:t.tags,parameters:t.parameters,annotationCurrent:t.annotation,annotation:t.annotation,nameCurrent:t.name,name:t.name,version:t.version,versions:t.versions,license:t.license,creator:t.creator},on:{"update:annotationCurrent":function(e){t.annotation=e},"update:annotation-current":function(e){t.annotation=e},"update:nameCurrent":function(e){t.name=e},"update:name-current":function(e){t.name=e},onVersion:t.onVersion,onLicense:t.onLicense,onCreator:t.onCreator}}),t._v(" "),n("WorkflowLint",{ref:"lint",staticClass:"right-content",staticStyle:{display:"none"},attrs:{id:"lint-panel","untyped-parameters":t.parameters,annotation:t.annotation,creator:t.creator,license:t.license,nodes:t.nodes},on:{onAttributes:t.onAttributes,onHighlight:t.onHighlight,onUnhighlight:t.onUnhighlight,onRefactor:t.onAttemptRefactor,onScrollTo:t.onScrollTo}}),t._v(" "),n("div",{staticClass:"right-content",attrs:{id:"right-content"}})],1)])])]},proxy:!0}])})],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"workflow-overview",attrs:{"aria-hidden":"true"}},[e("div",{staticClass:"workflow-overview-body"},[e("div",{attrs:{id:"overview-container"}},[e("canvas",{attrs:{width:"0",height:"0",id:"overview-canvas"}}),this._v(" "),e("div",{attrs:{id:"overview-viewport"}})])])])}],!1,null,"54c91258",null).exports),Mr=function(t){return new(Ve.default.extend(Sr))({propsData:t,el:"#columns"})},Cr=n(85);function Tr(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function jr(t,e){return Or.apply(this,arguments)}function Or(){var t;return t=regeneratorRuntime.mark((function t(e,n){var i,a,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=!(r.length>2&&void 0!==r[2])||r[2])&&Object(O.e)(h()("Saving page"),h()("progress")),t.prev=2,t.next=5,Pn.a.post("".concat(Object(d.getAppRoot)(),"api/pages/").concat(e,"/revisions"),{content:n}).finally(i&&O.b);case 5:return a=t.sent,t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(2),Object(Jn.b)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})),(Or=function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Tr(r,i,a,o,s,"next",t)}function s(t){Tr(r,i,a,o,s,"throw",t)}o(void 0)}))}).apply(this,arguments)}var Lr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},t);return new Proxy(e,{get:function(t,e){if(e in t)return t[e];console.warn("Requested missing config prop",e)}})}();var Dr=window.WYMeditor,Ar=null,Er={ITEM_HISTORY:"item_history",ITEM_DATASET:"item_dataset",ITEM_WORKFLOW:"item_workflow",ITEM_PAGE:"item_page",ITEM_VISUALIZATION:"item_visualization",DIALOG_HISTORY_LINK:"link_history",DIALOG_DATASET_LINK:"link_dataset",DIALOG_WORKFLOW_LINK:"link_workflow",DIALOG_PAGE_LINK:"link_page",DIALOG_VISUALIZATION_LINK:"link_visualization",DIALOG_EMBED_HISTORY:"embed_history",DIALOG_EMBED_DATASET:"embed_dataset",DIALOG_EMBED_WORKFLOW:"embed_workflow",DIALOG_EMBED_PAGE:"embed_page",DIALOG_EMBED_VISUALIZATION:"embed_visualization"};function Ir(t){var e,n,i,a;switch(t){case Er.ITEM_HISTORY:e="History",n="Histories",i="history",a="History";break;case Er.ITEM_DATASET:e="Dataset",n="Datasets",i="dataset",a="HistoryDatasetAssociation";break;case Er.ITEM_WORKFLOW:e="Workflow",n="Workflows",i="workflow",a="StoredWorkflow";break;case Er.ITEM_PAGE:e="Page",n="Pages",i="page",a="Page";break;case Er.ITEM_VISUALIZATION:e="Visualization",n="Visualizations",i="visualization",a="Visualization"}var r="list_".concat(n.toLowerCase(),"_for_selection");return{singular:e,plural:n,controller:i,iclass:a,list_ajax_url:Lr.list_objects_url.replace("LIST_ACTION",r)}}function Pr(t,e,n){var i=Lr.set_accessible_url.replace("ITEM_CONTROLLER",t);a.a.ajax({type:"POST",url:i,data:{id:e,accessible:"True"},error:function(){alert("Making ".concat(n," accessible failed"))}})}function Yr(t,e){var n=Object(d.getAppRoot)();!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(Lr,t)}({page_id:t,page_list_url:"".concat(n,"pages/list"),list_objects_url:"".concat(n,"page/LIST_ACTION"),set_accessible_url:"".concat(n,"ITEM_CONTROLLER/set_accessible_async"),get_name_and_link_url:"".concat(n,"ITEM_CONTROLLER/get_name_and_link_async?id="),editor_base_path:"".concat(n,"static/wymeditor/"),iframe_base_path:"".concat(n,"static/wymeditor/iframe/galaxy/")}),a()(document).ajaxError((function(t,e){var n=e.responseText||e.statusText||"Could not connect to server";return Object(O.e)("Server error",n,{"Ignore error":O.b}),!1})),a()("[name=page_content]").val(e).wymeditor({skin:"galaxy",basePath:Lr.editor_base_path,iframeBasePath:Lr.iframe_base_path,boxHtml:"<table class='wym_box' width='100%' height='100%'><tr><td><div class='wym_area_top'>".concat(Dr.TOOLS,"</div></td></tr><tr height='100%'><td><div class='wym_area_main' style='height: 100%;'>").concat(Dr.IFRAME).concat(Dr.STATUS,"</div></div></td></tr></table>"),toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:h()("Superscript"),css:"wym_tools_superscript"},{name:"Subscript",title:h()("Subscript"),css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image"},{name:"InsertTable",title:"Table",css:"wym_tools_table"}]}),Ar=a.a.wymeditors(0);var i=a()("<div class='galaxy-page-editor-button'><a id='insert-galaxy-link' class='action-button popup' href='javascript:void(0)' role='button'>Paragraph type</a></div>");a()(".wym_area_top").append(i);var r={};a.a.each(Ar._options.containersItems,(function(t,e){var n=e.name;r[e.title.replace("_"," ")]=function(){Ar.container(n)}})),Object(F.b)(i,r);var o=a()("<div><a id='insert-galaxy-link' class='action-button popup' href='javascript:void(0)' role='button'>Insert Link to Galaxy Object</a></div>").addClass("galaxy-page-editor-button");a()(".wym_area_top").append(o),Object(F.b)(o,{"Insert History Link":function(){Ar.dialog(Er.DIALOG_HISTORY_LINK)},"Insert Dataset Link":function(){Ar.dialog(Er.DIALOG_DATASET_LINK)},"Insert Workflow Link":function(){Ar.dialog(Er.DIALOG_WORKFLOW_LINK)},"Insert Page Link":function(){Ar.dialog(Er.DIALOG_PAGE_LINK)},"Insert Visualization Link":function(){Ar.dialog(Er.DIALOG_VISUALIZATION_LINK)}});var s=a()("<div><a id='embed-galaxy-object' class='action-button popup' href='javascript:void(0)' role=''button'>Embed Galaxy Object</a></div>").addClass("galaxy-page-editor-button");a()(".wym_area_top").append(s),Object(F.b)(s,{"Embed History":function(){Ar.dialog(Er.DIALOG_EMBED_HISTORY)},"Embed Dataset":function(){Ar.dialog(Er.DIALOG_EMBED_DATASET)},"Embed Workflow":function(){Ar.dialog(Er.DIALOG_EMBED_WORKFLOW)},"Embed Visualization":function(){Ar.dialog(Er.DIALOG_EMBED_VISUALIZATION)}})}Dr.editor.prototype.dialog=function(t,e,n){var i,o,s=this,l=s.uniqueStamp(),c=s.selected();t==Dr.DIALOG_LINK&&(c&&(a()(s._options.hrefSelector).val(a()(c).attr(Dr.HREF)),a()(s._options.srcSelector).val(a()(c).attr(Dr.SRC)),a()(s._options.titleSelector).val(a()(c).attr(Dr.TITLE)),a()(s._options.altSelector).val(a()(c).attr(Dr.ALT))),c&&(null==(i=a()(c).attr("href"))&&(i=""),null==(o=a()(c).attr("title"))&&(o="")),Object(O.e)("Create Link","<div><div><label id='link_attribute_label'>URL <span style='float: right; font-size: 90%'><a href='javascript:void(0)' role=\"button\" id='set_link_id'>Create in-page anchor</a></span></label><br><input type='text' class='wym_href' value='".concat(i,"' size='40' /></div><div><label>Title</label><br><input type='text' class='wym_title' value='").concat(o,"' size='40' /></div><div>"),{"Make link":function(){var t=a()(s._options.hrefSelector).val()||"",e=a()(".wym_id").val()||"",n=a()(s._options.titleSelector).val()||"";if(t||e){s._exec(Dr.CREATE_LINK,l);var i=a()("a[href=".concat(l,"]"),s._doc.body);i.attr(Dr.HREF,t).attr(Dr.TITLE,n).attr("id",e),0===i.text().indexOf("wym-")&&i.text(n)}Object(O.b)()},Cancel:function(){Object(O.b)()}},{},(function(){a()("#set_link_id").click((function(){a()("#link_attribute_label").text("ID/Name");var t=a()(".wym_href");t.addClass("wym_id").removeClass("wym_href"),c&&t.val(a()(c).attr("id")),a()(this).remove()}))})));if(t==Dr.DIALOG_IMAGE)return s._selected_image&&(a()("".concat(s._options.dialogImageSelector," ").concat(s._options.srcSelector)).val(a()(s._selected_image).attr(Dr.SRC)),a()("".concat(s._options.dialogImageSelector," ").concat(s._options.titleSelector)).val(a()(s._selected_image).attr(Dr.TITLE)),a()("".concat(s._options.dialogImageSelector," ").concat(s._options.altSelector)).val(a()(s._selected_image).attr(Dr.ALT))),void Object(O.e)("Image","<div class='row'><label>URL</label><br><input type='text' class='wym_src' value='' size='40' /></div><div class='row'><label>Alt text</label><br><input type='text' class='wym_alt' value='' size='40' /></div><div class='row'><label>Title</label><br><input type='text' class='wym_title' value='' size='40' /></div>",{Insert:function(){var t=a()(s._options.srcSelector).val();t.length>0&&(s._exec(Dr.INSERT_IMAGE,l),a()("img[src$=".concat(l,"]"),s._doc.body).attr(Dr.SRC,t).attr(Dr.TITLE,a()(s._options.titleSelector).val()).attr(Dr.ALT,a()(s._options.altSelector).val())),Object(O.b)()},Cancel:function(){Object(O.b)()}});if(t==Dr.DIALOG_TABLE&&Object(O.e)("Table","<div class='row'><label>Caption</label><br><input type='text' class='wym_caption' value='' size='40' /></div><div class='row'><label>Summary</label><br><input type='text' class='wym_summary' value='' size='40' /></div><div class='row'><label>Number Of Rows<br></label><input type='text' class='wym_rows' value='3' size='3' /></div><div class='row'><label>Number Of Cols<br></label><input type='text' class='wym_cols' value='2' size='3' /></div>",{Insert:function(){var t=a()(s._options.rowsSelector).val(),e=a()(s._options.colsSelector).val();if(t>0&&e>0){var n=s._doc.createElement(Dr.TABLE),i=null,r=a()(s._options.captionSelector).val();n.createCaption().innerHTML=r;for(var o=0;o<t;o++){i=n.insertRow(o);for(var l=0;l<e;l++)i.insertCell(l)}a()(n).attr("summary",a()(s._options.summarySelector).val());var c=a()(s.findUp(s.container(),Dr.MAIN_CONTAINERS)).get(0);c&&c.parentNode?a()(c).after(n):a()(s._doc.body).append(n)}Object(O.b)()},Cancel:function(){Object(O.b)()}}),t==Er.DIALOG_HISTORY_LINK||t==Er.DIALOG_DATASET_LINK||t==Er.DIALOG_WORKFLOW_LINK||t==Er.DIALOG_PAGE_LINK||t==Er.DIALOG_VISUALIZATION_LINK){var d;switch(t){case Er.DIALOG_HISTORY_LINK:d=Ir(Er.ITEM_HISTORY);break;case Er.DIALOG_DATASET_LINK:d=Ir(Er.ITEM_DATASET);break;case Er.DIALOG_WORKFLOW_LINK:d=Ir(Er.ITEM_WORKFLOW);break;case Er.DIALOG_PAGE_LINK:d=Ir(Er.ITEM_PAGE);break;case Er.DIALOG_VISUALIZATION_LINK:d=Ir(Er.ITEM_VISUALIZATION)}var u=new Cr.a({url_base:d.list_ajax_url,embedded:!0}),h=Object(r.a)();h.modal.show({title:"Insert Link to ".concat(d.singular),body:a()("<div/>").append(u.$el).append(a()("<div/>").append('<input id="make-importable" type="checkbox" checked/>').append("Make the selected ".concat(d.plural.toLowerCase()," accessible so that they can viewed by everyone."))),closing_events:!0,buttons:{Insert:function(){var t=!1;null!=a()("#make-importable:checked").val()&&(t=!0),u.$("input[name=id]:checked").each((function(){var e=a()(this).val();t&&Pr(d.controller,e,d.singular);var n=(Lr.get_name_and_link_url+e).replace("ITEM_CONTROLLER",d.controller);a.a.getJSON(n,(function(t){s._exec(Dr.CREATE_LINK,l);var n=a()("a[href=".concat(l,"]"),s._doc.body).text();""==n||n==l?s.insert("<a href='".concat(t.link,"'>").concat(d.singular," '").concat(t.name,"'</a>")):a()("a[href=".concat(l,"]"),s._doc.body).attr(Dr.HREF,t.link).attr(Dr.TITLE,d.singular+e)}))})),h.modal.hide()},Close:function(){h.modal.hide()}}})}if(t==Er.DIALOG_EMBED_HISTORY||t==Er.DIALOG_EMBED_DATASET||t==Er.DIALOG_EMBED_WORKFLOW||t==Er.DIALOG_EMBED_PAGE||t==Er.DIALOG_EMBED_VISUALIZATION){var f;switch(t){case Er.DIALOG_EMBED_HISTORY:f=Ir(Er.ITEM_HISTORY);break;case Er.DIALOG_EMBED_DATASET:f=Ir(Er.ITEM_DATASET);break;case Er.DIALOG_EMBED_WORKFLOW:f=Ir(Er.ITEM_WORKFLOW);break;case Er.DIALOG_EMBED_PAGE:f=Ir(Er.ITEM_PAGE);break;case Er.DIALOG_EMBED_VISUALIZATION:f=Ir(Er.ITEM_VISUALIZATION)}var p=new Cr.a({url_base:f.list_ajax_url,embedded:!0}),m=Object(r.a)();m.modal.show({title:"Insert Link to ".concat(f.singular),body:a()("<div/>").append(p.$el).append(a()("<div/>").append('<input id="make-importable" type="checkbox" checked/>').append("Make the selected ".concat(f.plural.toLowerCase()," accessible so that they can viewed by everyone."))),closing_events:!0,extra_class:"pages-embed",buttons:{Embed:function(){var t=!1;null!=a()("#make-importable:checked").val()&&(t=!0),p.$("input[name=id]:checked").each((function(){var e=a()(this),n=e.val(),i=e.closest("td").next("td").find("label").text();t&&Pr(f.controller,n,f.singular);var r=["<div id='","".concat(f.iclass,"-").concat(n),"' class='embedded-item ",f.singular.toLowerCase()," placeholder'>","<p class='title'>","Embedded Galaxy ",f.singular," '",i,"'","</p>","<p class='content'>","[Do not edit this block; Galaxy will fill it in with the annotated ",f.singular.toLowerCase()," when it is displayed.]","</p>","</div>"].join("");s.insert(r)})),m.modal.hide()},Close:function(){m.modal.hide()}}})}};var Rr={props:{pageId:{required:!0,type:String},publicUrl:{required:!0,type:String},title:{type:String,default:null},content:{type:String,default:null}},created:function(){var t=this;this.$nextTick((function(){Yr(t.pageId,t.content)}))},methods:{saveContent:function(t){var e=this;jr(this.pageId,Ar.xhtml(),!t).then((function(){t&&(window.location="".concat(Object(d.getAppRoot)()).concat(e.publicUrl))})).catch((function(t){Z.a.error("Failed to save page: ".concat(t))}))}}},Hr=(n(550),Object(jn.a)(Rr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("div",{staticClass:"panel-header-buttons"},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"save-button",title:"Save",variant:"link",role:"button"},on:{click:function(e){return t.saveContent(!1)}}},[n("span",{staticClass:"fa fa-save"})]),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"view-button",title:"Save & View",variant:"link",role:"button"},on:{click:function(e){return t.saveContent(!0)}}},[n("span",{staticClass:"fa fa-eye"})])],1),t._v("\n            "+t._s(t.title)+"\n        ")])]),t._v(" "),n("div",{staticClass:"unified-panel-body"},[n("textarea",{attrs:{name:"page_content",val:t.content}})])])}),[],!1,null,null,null).exports);Ve.default.use(Ln.a),An.c.add(En.m,En.z);var Nr={components:{MarkdownEditor:li,FontAwesomeIcon:Dn.a},data:function(){return{markdownText:this.content}},props:{pageId:{required:!0,type:String},publicUrl:{required:!0,type:String},title:{type:String,default:null},content:{type:String,default:null},contentData:{type:Object,default:null}},methods:{onUpdate:function(t){this.markdownText=t},saveContent:function(t){var e=this;jr(this.pageId,this.markdownText,!t).then((function(){t&&(window.location=e.publicUrl)})).catch((function(t){Z.a.error("Failed to save page: ".concat(t))}))}}},$r=Object(jn.a)(Nr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"columns"}},[n("markdown-editor",{attrs:{title:t.title,"markdown-text":t.markdownText,"markdown-config":t.contentData},on:{onUpdate:t.onUpdate},scopedSlots:t._u([{key:"buttons",fn:function(){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"save-button",title:"Save",variant:"link",role:"button"},on:{click:function(e){return t.saveContent(!1)}}},[n("font-awesome-icon",{attrs:{icon:"save"}})],1),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"view-button",title:"Save & View",variant:"link",role:"button"},on:{click:function(e){return t.saveContent(!0)}}},[n("font-awesome-icon",{attrs:{icon:"eye"}})],1)]},proxy:!0}])})],1)}),[],!1,null,null,null).exports;function Fr(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var Wr={props:{pageId:{required:!0,type:String}},data:function(){return{title:null,contentFormat:null,contentData:null,content:null,publicUrl:null,loading:!0}},components:{PageEditorHtml:Hr,PageEditorMarkdown:$r,LoadingSpan:Wi.a},created:function(){var t=this;this.getPage(this.pageId).then((function(e){t.publicUrl="".concat(Object(d.getAppRoot)(),"u/").concat(e.username,"/p/").concat(e.slug),t.content=e.content,t.contentFormat=e.content_format,t.contentData=e,t.title=e.title,t.loading=!1})).catch((function(t){Z.a.error("Failed to load page: ".concat(t))}))},methods:{getPage:function(t){return(e=regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pn.a.get("".concat(Object(d.getAppRoot)(),"api/pages/").concat(t));case 3:return n=e.sent,i=n.data,e.abrupt("return",i);case 8:e.prev=8,e.t0=e.catch(0),Object(Jn.b)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(t){Fr(r,i,a,o,s,"next",t)}function s(t){Fr(r,i,a,o,s,"throw",t)}o(void 0)}))})();var e}}},zr=Object(jn.a)(Wr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?n("LoadingSpan",{staticClass:"m-3",attrs:{message:"Loading Page"}}):"markdown"==t.contentFormat?n("page-editor-markdown",{attrs:{title:t.title,"page-id":t.pageId,"public-url":t.publicUrl,content:t.content,"content-data":t.contentData}}):n("page-editor-html",{attrs:{title:t.title,"page-id":t.pageId,"public-url":t.publicUrl,content:t.content}})}),[],!1,null,null,null).exports,Ur=function(t){return new(Ve.default.extend(zr))({propsData:t,el:"#columns"})};function Vr(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Br(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Br(Object(n),!0).forEach((function(e){Gr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jr={components:{Markdown:n(266).a},props:{pageId:{type:String,required:!0}},computed:{dataUrl:function(){return"".concat(Object(d.getAppRoot)(),"api/pages/").concat(this.pageId)},exportUrl:function(){return"".concat(this.dataUrl,".pdf")},editUrl:function(){return"".concat(Object(d.getAppRoot)(),"page/edit_content?id=").concat(this.pageId)}},data:function(){return{markdownConfig:{}}},created:function(){var t=this;this.getContent().then((function(e){t.markdownConfig=qr(qr({},e),{},{markdown:e.content})}))},methods:{onEdit:function(){window.location=this.editUrl},getContent:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pn.a.get(e.dataUrl);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","Failed to retrieve content. ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Vr(r,i,a,o,s,"next",t)}function s(t){Vr(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}},Kr=Object(jn.a)(Jr,(function(){var t=this.$createElement;return(this._self._c||t)("markdown",{attrs:{"markdown-config":this.markdownConfig,"export-link":this.exportUrl},on:{onEdit:this.onEdit}})}),[],!1,null,null,null).exports,Xr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()("#page-display-content").each((function(e,n){var i=a()(n).attr("page_id"),r=Ve.default.extend(Kr);return t.pageId=i,new r({propsData:t}).$mount(n)}))},Qr=n(50);function Zr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function to(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var eo={props:{jobId:{type:String,required:!0}},created:function(){this.fetchJobDestinationParams(this.jobId)},computed:{jobDestinationParams:function(){return this.$store.getters.jobDestinationParams(this.jobId)}},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(n),!0).forEach((function(e){to(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(Qr.b)(["fetchJobDestinationParams"]))},no=Object(jn.a)(eo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticClass:"tabletip info_data_table",attrs:{id:"destination_parameters"}},[n("tbody",t._l(t.jobDestinationParams,(function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(i))]),t._v(" "),n("td",[t._v(t._s(e))])])})),0)])])}),[],!1,null,null,null).exports,io=n(36),ao=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.querySelectorAll(".job-destination-parameters");Array.prototype.forEach.call(e,(function(e,n){t.jobId=e.getAttribute("job_id"),Object(io.a)(no)(t,e)}))},ro=n(100),oo=n(204),so=n(111),lo={props:{hda_id:{type:String,required:!0}},components:{DatasetProvider:so.c,DecodedId:oo.a,UtcDate:ro.a},methods:{bytesToString:function(t){return m.b.bytesToString(t)}}},co=Object(jn.a)(lo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DatasetProvider",{attrs:{id:t.hda_id},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item;return[e.loading?t._e():n("div",[n("h3",[t._v("Dataset Information")]),t._v(" "),n("table",{staticClass:"tabletip info_data_table",attrs:{id:"dataset-details"}},[n("tbody",[n("tr",[n("td",[t._v("Number")]),t._v(" "),n("td",{attrs:{id:"number"}},[t._v(t._s(i.hid))])]),t._v(" "),n("tr",[n("td",[t._v("Name")]),t._v(" "),n("td",{attrs:{id:"name"}},[t._v(t._s(i.name))])]),t._v(" "),n("tr",[n("td",[t._v("Created")]),t._v(" "),i.create_time?n("td",{attrs:{id:"created"}},[n("UtcDate",{attrs:{date:i.create_time,mode:"pretty"}})],1):t._e()]),t._v(" "),n("tr",[n("td",[t._v("Filesize")]),t._v(" "),n("td",{attrs:{id:"filesize"},domProps:{innerHTML:t._s(t.bytesToString(i.file_size))}})]),t._v(" "),n("tr",[n("td",[t._v("Dbkey")]),t._v(" "),n("td",{attrs:{id:"dbkey"}},[t._v(t._s(i.metadata_dbkey))])]),t._v(" "),n("tr",[n("td",[t._v("Format")]),t._v(" "),n("td",{attrs:{id:"format"}},[t._v(t._s(i.file_ext))])]),t._v(" "),n("tr",[n("td",[t._v("File contents")]),t._v(" "),n("td",{attrs:{id:"file-contents"}},[n("a",{attrs:{href:i.download_url}},[t._v("contents")])])]),t._v(" "),i.id?n("tr",[n("td",[t._v("History Content API ID")]),t._v(" "),n("td",[n("div",{attrs:{id:"dataset-id"}},[t._v(t._s(i.id)+" "),n("decoded-id",{attrs:{id:i.id}})],1)])]):t._e(),t._v(" "),i.history_id?n("tr",[n("td",[t._v("History API ID")]),t._v(" "),n("td",[n("div",{attrs:{id:"history_id"}},[t._v(t._s(i.history_id)+" "),n("decoded-id",{attrs:{id:i.history_id}})],1)])]):t._e(),t._v(" "),i.uuid?n("tr",[n("td",[t._v("UUID")]),t._v(" "),n("td",{attrs:{id:"dataset-uuid"}},[t._v(t._s(i.uuid))])]):t._e(),t._v(" "),i.file_name?n("tr",[n("td",[t._v("Full Path")]),t._v(" "),n("td",{attrs:{id:"file_name"}},[t._v(t._s(i.file_name))])]):t._e()])])])]}}])})}),[],!1,null,null,null).exports,uo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};document.querySelectorAll(".dataset-information").forEach((function(e){t.hda_id=e.getAttribute("hda_id"),Object(io.a)(co)(t,e)}))},ho=n(227),fo=n.n(ho),po={components:{LoadingSpan:Wi.a},props:{datasetId:{type:String},datasetType:{type:String,default:"hda"},includeTitle:{type:Boolean,default:!0}},data:function(){return{storageInfo:null,descriptionRendered:null,errorMessage:null}},created:function(){var t=this,e=this.datasetId,n=this.datasetType;Pn.a.get("".concat(Object(d.getAppRoot)(),"api/datasets/").concat(e,"/storage"),{hda_ldda:n}).then(this.handleResponse).catch((function(e){t.errorMessage=Object(Jn.a)(e)}))},methods:{handleResponse:function(t){var e=t.data,n=e.description;this.storageInfo=e,this.descriptionRendered=n?fo()().render(e.description):null}}},mo=Object(jn.a)(po,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.includeTitle?n("h3",[t._v("Dataset Storage")]):t._e(),t._v(" "),t.errorMessage?n("div",{staticClass:"error"},[t._v(t._s(t.errorMessage))]):null==t.storageInfo?n("loading-span"):n("div",[n("p",[t._v("\n            This dataset is stored in\n            "),t.storageInfo.name?n("span",{staticClass:"display-os-by-name"},[t._v("\n                a Galaxy object store named "),n("b",[t._v(t._s(t.storageInfo.name))])]):t.storageInfo.object_store_id?n("span",{staticClass:"display-os-by-id"},[t._v("\n                a Galaxy object store with id "),n("b",[t._v(t._s(t.storageInfo.object_store_id))])]):n("span",{staticClass:"display-os-default"},[t._v(" the default configured Galaxy object store ")]),t._v(".\n        ")]),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.descriptionRendered)}})])],1)}),[],!1,null,null,null).exports,_o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.querySelectorAll(".dataset-storage");Array.prototype.forEach.call(e,(function(e,n){var i=e.getAttribute("dataset_id"),a=e.getAttribute("dataset_type")||"hda";t.datasetId=i,t.datasetType=a,Object(io.a)(mo)(t,e)}))},go=n(132),vo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};document.querySelectorAll(".job-information").forEach((function(e){t.job_id=e.getAttribute("job_id"),Object(io.a)(go.a)(t,e)}))},yo=n(478),bo=n.n(yo);function wo(t){new o.b(t)}function ko(t){new T.GalaxyApp(t)}function xo(t){new ht.GalaxyApp(t)}function So(t){const e=new ft.b([],{includeDeleted:t.includingDeleted,order:t.order,limitOnFirstFetch:t.limit,limitPerFetch:t.limit,currentHistoryId:t.current_history_id}),n=new wt.MultiPanelColumns({el:a()("#center").get(0),histories:e});e.fetchFirst({silent:!0}).done((function(){n.createColumns(),n.render(0)}))}function Mo(t){return new je(t)}const Co={Datasets:Ee,Jobs:He,Series:Pe}},function(t,e,n){"use strict";n.r(e),n.d(e,"addInitialization",(function(){return d.a})),n.d(e,"config$",(function(){return p})),n.d(e,"set",(function(){return m})),n.d(e,"get",(function(){return _})),n.d(e,"getAppRoot",(function(){return g}));var i=n(243),a=n(763),r=n(275),o=n(2138),s=n(616),l=n(88),c={options:{root:Object(l.a)()},bootstrapped:{},form_input_auto_focus:!1,sentry:{}},d=n(77);const u=new i.a,h=u.pipe(Object(r.a)(t=>t instanceof Object),Object(o.a)((t,e)=>Object.assign({},t,e),c)),f=new a.a(c);h.subscribe(f);const p=f.asObservable().pipe(Object(r.a)(Boolean),Object(s.a)(100));function m(...t){t.forEach(t=>u.next(t))}function _(){return f.getValue()}function g(t="/"){let e=t;try{e=_().options.root}catch(n){try{e=Object(l.a)(t)}catch(t){console.warn("Unable to find index link in head",t)}}return e}},,,function(t,e,n){"use strict";var i={props:{summary:{type:n(45).f,required:!0}},computed:{hasRunningJobs:function(){return this.summary&&this.summary.running>0},maxJobs:function(){return this.summary.all_jobs},okJobs:function(){return this.summary.ok},runningJobs:function(){return this.summary.running},errorJobs:function(){var t=this.summary,e=t.failed,n=void 0===e?0:e,i=t.error;return n+(void 0===i?0:i)},waitingJobs:function(){var t=this.summary,e=t.waiting,n=void 0===e?0:e,i=t.queued;return n+(void 0===i?0:i)}}},a=n(5),r=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.maxJobs&&t.runningJobs?n("b-progress",{attrs:{max:t.maxJobs,height:"1em"}},[t.errorJobs?n("b-progress-bar",{attrs:{value:t.errorJobs,variant:"danger"}}):t._e(),t._v(" "),t.okJobs?n("b-progress-bar",{attrs:{value:t.okJobs,variant:"success"}}):t._e(),t._v(" "),t.runningJobs?n("b-progress-bar",{attrs:{value:t.runningJobs,variant:"info",animated:""}}):t._e(),t._v(" "),t.waitingJobs?n("b-progress-bar",{attrs:{value:t.waitingJobs,variant:"dark",animated:""}}):t._e()],1):t._e()}),[],!1,null,null,null);e.a=r.exports},function(t,e,n){"use strict";var i=n(34),a=n(45),r=n(208);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={mixins:[n(240).a],components:{PriorityMenu:r.a,PriorityMenuItem:r.b},props:{dataset:{type:a.c,required:!0},expanded:{type:Boolean,required:!0},showTags:{type:Boolean,required:!1,default:!1}},data:function(){return{toolHelp:null,testVal:!1}},created:function(){this.STATES=a.g},computed:s(s(s({},Object(i.c)("user",["currentUser"])),Object(i.c)("config",["config"])),{},{showViz:function(){return this.config.visualizations_visible},displayButtonTitle:function(){return this.dataset.purged?"Cannot display datasets removed from disk":this.dataset.state==a.g.UPLOAD?"This dataset must finish uploading before it can be viewed":this.dataset.state==a.g.NEW?"This dataset is not yet viewable":"View data"},editButtonTitle:function(){return this.dataset.deleted?"Undelete dataset to edit attributes":this.dataset.purged?"Cannot edit attributes of datasets removed from disk":new Set([a.g.UPLOAD,a.g.NEW]).has(this.dataset.state)?"This dataset is not yet editable":"Edit attributes"},deleteButtonTitle:function(){return this.dataset.purged?"Dataset has been permanently deleted":this.dataset.deleted?"Undelete":"Delete"},showDownloads:function(){return!this.dataset.purged&&(!!this.dataset.hasData&&new Set([a.g.OK,a.g.FAILED_METADATA,a.g.ERROR]).has(this.dataset.state))},hasViz:function(){return(this.dataset.viz_count||0)&&this.dataset.hasData&&!this.dataset.deleted}}),methods:{notIn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=new Set(e);return!i.has(this.dataset.state)},isIn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=new Set(e);return i.has(this.dataset.state)},viewData:function(){var t=this,e=this.dataset.id;e&&this.useGalaxy((function(n){if(n.frame&&n.frame.active)n.frame.addDataset(e);else{var i=t.dataset.getUrl("display");i&&t.iframeRedirect(i)}}))},visualize:function(){var t={path:this.dataset.getUrl("show_params"),title:"Dataset details",tryIframe:!1};this.iframeAdd(t)||this.backboneRoute("visualizations",{dataset_id:this.dataset.id})},showToolHelp:function(t){this.eventHub.$emit("toggleToolHelp",t)},onDeleteClick:function(){var t=this.dataset.deleted?"undelete":"delete";this.$emit(t)}}},d=n(5),u=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PriorityMenu",{attrs:{"starting-height":27}},[t.notIn(t.STATES.NOT_VIEWABLE,t.STATES.DISCARDED)?n("PriorityMenuItem",{key:"view-dataset",attrs:{title:t.displayButtonTitle,disabled:t.dataset.purged||t.isIn(t.STATES.UPLOAD,t.STATES.NEW),icon:"fas fa-eye"},on:{click:function(e){return e.stopPropagation(),t.viewData(e)}}}):t._e(),t._v(" "),t.notIn(t.STATES.DISCARDED)?n("PriorityMenuItem",{key:"edit-dataset",attrs:{title:t.editButtonTitle,disabled:t.dataset.deleted||t.isIn(t.STATES.UPLOAD,t.STATES.NEW),icon:"fa fa-pencil"},on:{click:function(e){return e.stopPropagation(),t.backboneRoute("datasets/edit",{dataset_id:t.dataset.id})}}}):t._e(),t._v(" "),t.dataset.accessible?n("PriorityMenuItem",{key:"delete-dataset",attrs:{title:t.deleteButtonTitle,disabled:t.dataset.purged,icon:t.dataset.deleted?"fas fa-trash-restore":"fas fa-trash"},on:{click:function(e){return e.stopPropagation(),t.onDeleteClick(e)}}}):t._e(),t._v(" "),t.expanded?n("PriorityMenuItem",{key:"edit-tags",attrs:{title:"Edit Dataset Tags",pressed:t.showTags,icon:"fas fa-tags"},on:{click:function(e){return e.stopPropagation(),t.$emit("update:showTags",!t.showTags)}}}):t._e(),t._v(" "),t.isIn(t.STATES.ERROR)?n("PriorityMenuItem",{key:"show-error",attrs:{title:"Error",icon:"fa fa-bug"},on:{click:function(e){return e.stopPropagation(),t.backboneRoute("datasets/error",{dataset_id:t.dataset.id})}}}):t._e(),t._v(" "),t.showDownloads&&t.dataset.hasMetaData?t._e():n("PriorityMenuItem",{key:"download",attrs:{title:"Download",href:t.prependPath(t.dataset.getUrl("download")),target:"_blank",download:"",icon:"fas fa-file-download"}}),t._v(" "),t.showDownloads&&t.dataset.hasMetaData?n("PriorityMenuItem",{key:"download-metadata",attrs:{title:"Download",href:t.prependPath(t.dataset.getUrl("download")),target:"_blank",download:"",icon:"fas fa-file-download"}}):t._e(),t._v(" "),!t.dataset.purged&&t.dataset.getUrl("download")?n("PriorityMenuItem",{key:"copy-link",attrs:{title:"Copy Link",icon:"fa fa-chain"},on:{click:function(e){return e.stopPropagation(),t.$emit("copy-link")}}}):t._e(),t._v(" "),t.showDownloads&&t.dataset.hasMetaData?n("div",t._l(t.dataset.meta_files,(function(e){return n("PriorityMenuItem",{key:"download-"+e.download_url,attrs:{title:"Download "+e.file_type,href:t.prependPath(t.dataset.getUrl("meta_download")+e.file_type),target:"_blank",download:"",icon:"fas fa-file-download"}})})),1):t._e(),t._v(" "),t.dataset.rerunnable&&t.dataset.creating_job&&t.notIn(t.STATES.UPLOAD,t.STATES.NOT_VIEWABLE)?n("PriorityMenuItem",{key:"run-job",attrs:{title:"Run job again",href:t.prependPath(t.dataset.getUrl("rerun")),icon:"fa fa-refresh"},on:{click:function(e){return e.stopPropagation(),t.backboneRoute("/",{job_id:t.dataset.creating_job})}}}):t._e(),t._v(" "),t.showViz&&t.hasViz&&t.isIn(t.STATES.OK,t.STATES.FAILED_METADATA)?n("PriorityMenuItem",{key:"visualize",attrs:{title:"Visualize Data",icon:"fa-bar-chart"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.visualize(e)}}}):t._e(),t._v(" "),t.currentUser&&t.currentUser.id&&t.dataset.creating_job?n("PriorityMenuItem",{key:"tool-tip",attrs:{title:"Tool Help",icon:"fa fa-question"},on:{click:function(e){return e.stopPropagation(),t.showToolHelp(t.dataset.creating_job)}}}):t._e(),t._v(" "),t.notIn(t.STATES.NOT_VIEWABLE)?n("PriorityMenuItem",{key:"dataset-details",attrs:{title:"View Details",icon:"fa fa-info-circle"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.iframeAdd({path:t.dataset.getUrl("show_params"),title:"Dataset details"})}}}):t._e()],1)}),[],!1,null,null,null);e.a=u.exports},function(t,e,n){"use strict";var i=n(5),a=Object(i.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-dropdown",{attrs:{"no-caret":"",right:"",variant:"link",size:"sm",boundary:"window","toggle-class":"p-1"},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("i",{staticClass:"fas fa-trash"}),t._v(" "),n("span",{staticClass:"sr-only"},[t._v("Delete Collection")])]},proxy:!0}])},[t._v(" "),n("b-dropdown-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}},[t._v(" Delete Collection Only ")]),t._v(" "),n("b-dropdown-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("delete",{recursive:!0})}}},[t._v("\n        Delete Contained Datasets\n    ")]),t._v(" "),n("b-dropdown-item",{on:{click:function(e){return e.stopPropagation(),t.$emit("delete",{recursive:!0,purge:!0})}}},[t._v("\n        Purge Contained Datasets\n    ")])],1)}),[],!1,null,null,null);e.a=a.exports},,function(t,e,n){"use strict";var i=n(424),a=n(271),r={components:{DebouncedInput:i.a,ClickToEdit:a.a},props:{value:{type:String,required:!1,default:""},tooltipPlacement:{type:String,required:!1,default:"left"}},computed:{annotation:{get:function(){return this.value||""},set:function(t,e){t!==e&&this.$emit("input",t)}}}},o=(n(825),n(5)),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("click-to-edit",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{boundary:"viewport",placement:t.tooltipPlacement},expression:"{ boundary: 'viewport', placement: tooltipPlacement }",modifiers:{hover:!0}}],ref:"annotationInput",staticClass:"annotation",attrs:{"tag-name":"p",value:t.annotation,title:t._f("localize")("Edit annotation..."),placeholder:t._f("localize")("Edit annotation...")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.toggleEdit,a=e.placeholder,r=e.stateValidator;return[n("debounced-input",{attrs:{delay:1e3},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-textarea",{attrs:{size:"sm",tabindex:"-1",rows:"3","no-resize":"",value:e.value,placeholder:a,state:r(e.value,t.annotation)},on:{input:e.input,blur:function(t){return i(!1)}}})]}}],null,!0),model:{value:t.annotation,callback:function(e){t.annotation=e},expression:"annotation"}})]}}])})}),[],!1,null,"d720f3c6",null);e.a=s.exports},function(t,e,n){"use strict";var i=n(45),a=n(43),r=n(53),o=n(92),s=n(61);function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function d(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){d(r,i,a,o,s,"next",t)}function s(t){d(r,i,a,o,s,"throw",t)}o(void 0)}))}}var h={components:{StatelessTags:o.a},props:{content:{type:i.a,required:!0}},computed:{tags:function(){return this.content.tags}},methods:{saveTag:function(t){var e=this;return u(regeneratorRuntime.mark((function n(){var i,o,l,c,d,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.tag,o=t.addTag,(l=Object(s.a)(i)).valid){n.next=4;break}return n.abrupt("return");case 4:return(c=new Set(e.tags)).add(l.text),d=Array.from(c),n.next=9,Object(a.o)(e.content,{tags:d});case 9:return u=n.sent,n.next=12,Object(r.b)(u);case 12:o(l);case 13:case"end":return n.stop()}}),n)})))()},deleteTag:function(t){var e=this;return u(regeneratorRuntime.mark((function n(){var i,o,c,d,u,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.tag,o=t.deleteTag,(c=Object(s.a)(i)).valid){n.next=4;break}return n.abrupt("return");case 4:return(d=new Set(l(e.tags))).delete(c.text),u=Array.from(d),n.next=9,Object(a.o)(e.content,{tags:u});case 9:return h=n.sent,n.next=12,Object(r.b)(h);case 12:o(i);case 13:case"end":return n.stop()}}),n)})))()}}},f=n(5),p=Object(f.a)(h,(function(){var t=this.$createElement;return(this._self._c||t)("StatelessTags",{attrs:{value:this.tags},on:{"before-adding-tag":this.saveTag,"before-deleting-tag":this.deleteTag}})}),[],!1,null,null,null);e.a=p.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return i.default}));var i=n(460);n(0),n(36)},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var i=n(656),a=n(2),r=n.n(a),o={props:{element:{required:!0}},data:function(){return{titleDiscardButton:r()("Remove this dataset from the list"),titleElementName:r()("Click to rename"),isSelected:!1}},components:{ClickToEdit:n(866).a},methods:{l:function(t){return r()(t)},clickDiscard:function(){this.$emit("element-is-discarded",this.element)},toString:function(){return"ListDatasetCollectionElementView()"}}},s=(n(1059),n(5)),l=Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"collection-element",on:{click:function(e){return t.$emit("element-is-selected",t.element)}}},[n("click-to-edit",{attrs:{title:t.titleElementName},model:{value:t.element.name,callback:function(e){t.$set(t.element,"name",e)},expression:"element.name"}}),t._v(" "),n("button",{staticClass:"discard-btn btn-sm",attrs:{title:t.titleDiscardButton},on:{click:t.clickDiscard}},[t._v("\n        "+t._s(t.l("Discard"))+"\n    ")])],1)}),[],!1,null,null,null).exports,c=n(24),d=n(0),u=n.n(d),h=u.a;u.a.fn.extend({hoverhighlight:function(t,e){return t=t||"body",this.length?(h(this).each((function(){var n=h(this),i=n.data("target");i&&n.mouseover((function(n){h(i,t).css({background:e})})).mouseout((function(t){h(i).css({background:""})}))})),this):this}});var f=n(8),p=n(15),m=n(867),_=n.n(m);f.default.use(p.a);var g={mixins:[i.a],created:function(){this._instanceSetUp(),this._elementsSetUp(),this.saveOriginalNames()},components:{DatasetCollectionElementView:l,draggable:_.a},data:function(){return{state:"build",titleUndoButton:r()("Undo all reordering and discards"),titleDeselectButton:r()("De-select all selected datasets"),noElementsHeader:r()("No datasets were selected"),discardedElementsHeader:r()("No elements left. Would you like to"),invalidHeader:r()("The following selections could not be included due to problems:"),allInvalidElementsPartOne:r()("At least one element is needed for the collection. You may need to"),cancelText:r()("cancel"),startOverText:r()("start over"),allInvalidElementsPartTwo:r()("and reselect new elements."),errorText:r()("Galaxy could not be reached and may be updating.  Try again in a few minutes."),workingElements:[],originalNamedElements:[],invalidElements:[],selectedDatasetElems:[],removeExtensions:!0,duplicateNames:[]}},props:{autoscrollDist:{type:Number,required:!1,default:24},highlightClr:{type:String,required:!1,default:"rgba( 64, 255, 255, 1.0 )"}},computed:{atLeastOneDatasetIsSelected:function(){return this.selectedDatasetElems.length>0},getSelectedDatasetElems:function(){return this.selectedDatasetElems},returnWorkingElements:function(){return this.workingElements},noMoreValidDatasets:function(){return 0==this.workingElements.length},returnInvalidElementsLength:function(){return this.invalidElements.length>0},returnInvalidElements:function(){return this.invalidElements},allElementsAreInvalid:function(){return this.initialElements.length==this.invalidElements.length},noElementsSelected:function(){return 0==this.initialElements.length},noElementsLeft:function(){return 0==this.workingElements.length},showDuplicateError:function(){return this.duplicateNames.length>0}},methods:{l:function(t){return r()(t)},_instanceSetUp:function(){this.selectedDatasetElems=[]},_elementsSetUp:function(){this.invalidElements=[],this.workingElements=[],this.workingElements=this.initialElements.slice(0),this._ensureElementIds(),this._validateElements(),this._mangleDuplicateNames()},_ensureElementIds:function(){return this.workingElements.forEach((function(t){Object.prototype.hasOwnProperty.call(t,"id")||(t.id=t._uid)})),this.workingElements},_validateElements:function(){var t=this;return this.workingElements=this.workingElements.filter((function(e){var n=t._isElementInvalid(e);return n&&t.invalidElements.push(e.name+"  "+n),!n})),this.workingElements},_isElementInvalid:function(t){return"dataset_collection"===t.history_content_type?r()("is a collection, this is not allowed"):t.state===c.a.OK||c.a.NOT_READY_STATES.includes(t.state)?t.deleted||t.purged?r()("has been deleted or purged"):null:r()("has errored, is paused, or is not accessible")},_mangleDuplicateNames:function(){var t=1,e={};this.workingElements.forEach((function(n){for(var i=n.name;Object.prototype.hasOwnProperty.call(e,i);)i="".concat(n.name," (").concat(t,")"),t+=1;n.name=i,e[n.name]=!0}))},saveOriginalNames:function(){this.originalNamedElements=JSON.parse(JSON.stringify(this.workingElements))},getOriginalNames:function(){this.workingElements=JSON.parse(JSON.stringify(this.originalNamedElements))},elementSelected:function(t){this.selectedDatasetElems.includes(t.id)?this.selectedDatasetElems.splice(this.selectedDatasetElems.indexOf(t.id),1):this.selectedDatasetElems.push(t.id)},elementDiscarded:function(t){return this.$delete(this.workingElements,this.workingElements.indexOf(t)),this.workingElements},clickClearAll:function(){this.selectedDatasetElems=[]},clickedCreate:function(t){var e=this;if(this.checkForDuplicates(),"error"!==this.state)return this.$emit("clicked-create",this.workingElements,this.collectionName,this.hideSourceItems),this.creationFn(this.workingElements,t,this.hideSourceItems).done(this.oncreate).fail((function(){e.state="error"}))},checkForDuplicates:function(){var t=this,e={};this.duplicateNames=[];var n=!0;this.workingElements.forEach((function(i){Object.prototype.hasOwnProperty.call(e,i.name)&&(n=!1,t.duplicateNames.push(i.name)),e[i.name]=!0})),this.state=n?"build":"error"},reset:function(){this._instanceSetUp(),this.getOriginalNames()},toString:function(){return"ListCollectionCreator"}}},v=(n(1060),Object(s.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-collection-creator"},["error"==t.state?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("\n            "+t._s(t.errorText)+"\n        ")])],1):n("div",[t.noElementsSelected?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                "+t._s(t.noElementsHeader)+"\n                "+t._s(t.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.cancelText)+"\n                ")]),t._v("\n                "+t._s(t.allInvalidElementsPartTwo)+"\n            ")]),t._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.l("Cancel"))+"\n                ")])])],1):t.allElementsAreInvalid?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                "+t._s(t.invalidHeader)+"\n                "),n("ul",t._l(t.returnInvalidElements,(function(e){return n("li",{key:e},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0),t._v("\n                "+t._s(t.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.cancelText)+"\n                ")]),t._v("\n                "+t._s(t.allInvalidElementsPartTwo)+"\n            ")]),t._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.l("Cancel"))+"\n                ")])])],1):n("div",[t.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                    "+t._s(t.invalidHeader)+"\n                    "),n("ul",t._l(t.returnInvalidElements,(function(e){return n("li",{key:e},[t._v("\n                            "+t._s(e)+"\n                        ")])})),0)])],1):t._e(),t._v(" "),t.showDuplicateError?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("\n                    "+t._s(t.l("Collections cannot have duplicated names. The following list names are duplicated: "))+"\n                    "),n("ol",t._l(t.duplicateNames,(function(e){return n("li",{key:e},[t._v(t._s(e))])})),0),t._v("\n                    "+t._s(t.l("Please fix these duplicates and try again."))+"\n                ")])],1):t._e(),t._v(" "),n("collection-creator",{attrs:{oncancel:t.oncancel,hideSourceItems:t.hideSourceItems,creationFn:t.creationFn},on:{onUpdateHideSourceItems:t.onUpdateHideSourceItems,"clicked-create":t.clickedCreate},scopedSlots:t._u([{key:"help-content",fn:function(){return[n("p",[t._v("\n                        "+t._s(t.l(["Collections of datasets are permanent, ordered lists of datasets that can be passed to tools ","and workflows in order to have analyses done on each member of the entire group. This interface allows ","you to create a collection and re-order the final collection."].join("")))+"\n                    ")]),t._v(" "),n("ul",[n("li",[t._v("\n                            "+t._s(t.l("Rename elements in the list by clicking on"))+"\n                            "),n("i",{attrs:{"data-target":".collection-element .name"}},[t._v("\n                                "+t._s(t.l("the existing name"))+"\n                            ")]),t._v("\n                            "+t._s(t.l("."))+"\n                        ")]),t._v(" "),n("li",[t._v("\n                            "+t._s(t.l("Discard elements from the final created list by clicking on the "))+"\n                            "),n("i",{attrs:{"data-target":".collection-element .discard"}},[t._v("\n                                "+t._s(t.l("Discard"))+"\n                            ")]),t._v("\n                            "+t._s(t.l("button."))+"\n                        ")]),t._v(" "),n("li",[t._v("\n                            "+t._s(t.l("Reorder the list by clicking and dragging elements. Select multiple elements by clicking on"))+"\n                            "),n("i",{attrs:{"data-target":".collection-element"}},[t._v("\n                                "+t._s(t.l("them"))+"\n                            ")]),t._v("\n                            "+t._s(t.l("and you can then move those selected by dragging the entire group. Deselect them by clicking them again or by clicking the"))+"\n                            "),n("i",{attrs:{"data-target":".clear-selected"}},[t._v("\n                                "+t._s(t.l("Clear selected"))+"\n                            ")]),t._v("\n                            "+t._s(t.l("link."))+"\n                        ")]),t._v(" "),n("li",[t._v("\n                            "+t._s(t.l("Click the"))+"\n                            "),n("i",{attrs:{"data-target":".reset"}},[t._v("\n                                "+t._s(t.l("Start over"))+"\n                            ")]),t._v("\n                            "+t._s(t.l("link to begin again as if you had just opened the interface."))+"\n                        ")]),t._v(" "),n("li",[t._v("\n                            "+t._s(t.l("Click the"))+"\n                            "),n("i",{attrs:{"data-target":".cancel-create"}},[t._v("\n                                "+t._s(t.l("Cancel"))+"\n                            ")]),t._v("\n                            "+t._s(t.l("button to exit the interface."))+"\n                        ")])]),t._v(" "),n("br"),t._v(" "),n("p",[t._v("\n                        "+t._s(t.l("Once your collection is complete, enter a "))+"\n                        "),n("i",{attrs:{"data-target":".collection-name"}},[t._v("\n                            "+t._s(t.l("name"))+"\n                        ")]),t._v("\n                        "+t._s(t.l("and click"))+"\n                        "),n("i",{attrs:{"data-target":".create-collection"}},[t._v("\n                            "+t._s(t.l("Create list"))+"\n                        ")]),t._v("\n                        "+t._s(t.l("."))+"\n                    ")])]},proxy:!0},{key:"middle-content",fn:function(){return[n("div",{staticClass:"collection-elements-controls"},[n("a",{staticClass:"reset",attrs:{href:"javascript:void(0);",role:"button",title:t.titleUndoButton},on:{click:t.reset}},[t._v("\n                            "+t._s(t.l("Start over"))+"\n                        ")]),t._v(" "),t.atLeastOneDatasetIsSelected?n("a",{staticClass:"clear-selected",attrs:{href:"javascript:void(0);",role:"button",title:t.titleDeselectButton},on:{click:t.clickClearAll}},[t._v("\n                            "+t._s(t.l("Clear selected"))+"\n                        ")]):t._e()]),t._v(" "),n("draggable",{staticClass:"collection-elements scroll-container flex-row drop-zone",on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.workingElements,callback:function(e){t.workingElements=e},expression:"workingElements"}},[t.noMoreValidDatasets?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                                "+t._s(t.discardedElementsHeader)+"\n                                "),n("a",{staticClass:"reset-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:t.reset}},[t._v("\n                                    "+t._s(t.startOverText)+"\n                                ")]),t._v("\n                                ?\n                            ")])],1):t._l(t.returnWorkingElements,(function(e){return n("dataset-collection-element-view",{key:e.id,class:{selected:t.getSelectedDatasetElems.includes(e.id)},attrs:{element:e},on:{"element-is-selected":t.elementSelected,"element-is-discarded":t.elementDiscarded}})}))],2)]},proxy:!0}])})],1)])])}),[],!1,null,null,null));e.default=v.exports},function(t,e,n){"use strict";n.r(e);var i=n(656),a=n(24),r=n(2),o=n.n(r),s=n(8),l=n(15);s.default.use(l.a);var c={mixins:[i.a],created:function(){this._elementsSetUp()},data:function(){return{state:"build",errorText:o()("Galaxy could not be reached and may be updating.  Try again in a few minutes."),noElementsHeader:o()("No datasets were selected."),allInvalidElementsPartOne:o()("Exactly two elements needed for the collection. You may need to"),cancelText:o()("cancel"),allInvalidElementsPartTwo:o()("and reselect new elements."),exactlyTwoValidElementsPartOne:o()("Two (and only two) elements are needed for the pair. You may need to "),exactlyTwoValidElementsPartTwo:o()("and reselect new elements."),invalidHeader:o()("The following selections could not be included due to problems:"),minElements:2,workingElements:[],invalidElements:[]}},computed:{returnInvalidElementsLength:function(){return this.invalidElements.length>0},returnInvalidElements:function(){return this.invalidElements},allElementsAreInvalid:function(){return this.initialElements.length==this.invalidElements.length},noElementsSelected:function(){return 0==this.initialElements.length},exactlyTwoValidElements:function(){return 2==this.workingElements.length}},methods:{l:function(t){return o()(t)},_elementsSetUp:function(){this.invalidElements=[],this.workingElements=[],this.workingElements=this.initialElements.slice(0),this._ensureElementIds(),this._validateElements()},_ensureElementIds:function(){return this.workingElements.forEach((function(t){Object.prototype.hasOwnProperty.call(t,"id")||(t.id=t._uid)})),this.workingElements},_validateElements:function(){var t=this;return this.workingElements=this.workingElements.filter((function(e){var n=t._isElementInvalid(e);return n&&t.invalidElements.push(e.name+"  "+n),!n})),this.workingElements},_isElementInvalid:function(t){return"dataset_collection"===t.history_content_type?o()("is a collection, this is not allowed"):t.state===a.a.OK||a.a.NOT_READY_STATES.includes(t.state)?t.deleted||t.purged?o()("has been deleted or purged"):null:o()("has errored, is paused, or is not accessible")},swapButton:function(){this.workingElements=[this.workingElements[1],this.workingElements[0]]},clickedCreate:function(t){var e=this;if("error"!==this.state)return this.$emit("clicked-create",this.workingElements,this.collectionName,this.hideSourceItems),this.creationFn(this.workingElements,t,this.hideSourceItems).done(this.oncreate).fail((function(){e.state="error"}))},toString:function(){return"PairCollectionCreator"}}},d=(n(1061),n(5)),u=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pair-collection-creator"},["error"==t.state?n("div",[n("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("\n            "+t._s(t.errorText)+"\n        ")])],1):n("div",[t.noElementsSelected?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                "+t._s(t.noElementsHeader)+"\n                "+t._s(t.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.cancelText)+"\n                ")]),t._v("\n                "+t._s(t.allInvalidElementsPartTwo)+"\n            ")]),t._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.l("Cancel"))+"\n                ")])])],1):t.allElementsAreInvalid?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                "+t._s(t.invalidHeader)+"\n                "),n("ul",t._l(t.returnInvalidElements,(function(e){return n("li",{key:e},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0),t._v("\n                "+t._s(t.allInvalidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.cancelText)+"\n                ")]),t._v("\n                "+t._s(t.allInvalidElementsPartTwo)+"\n            ")]),t._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.l("Cancel"))+"\n                ")])])],1):t.exactlyTwoValidElements?n("div",[t.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                    "+t._s(t.invalidHeader)+"\n                    "),n("ul",t._l(t.returnInvalidElements,(function(e){return n("li",{key:e},[t._v("\n                            "+t._s(e)+"\n                        ")])})),0)])],1):t._e(),t._v(" "),n("collection-creator",{attrs:{oncancel:t.oncancel,hideSourceItems:t.hideSourceItems,creationFn:t.creationFn},on:{onUpdateHideSourceItems:t.onUpdateHideSourceItems,"clicked-create":t.clickedCreate,"remove-extensions-toggle":t.removeExtensionsToggle},scopedSlots:t._u([{key:"help-content",fn:function(){return[n("p",[t._v("\n                        "+t._s(t.l(["Pair collections are permanent collections containing two datasets: one forward and one reverse. ","Often these are forward and reverse reads. The pair collections can be passed to tools and workflows in ","order to have analyses done on both datasets. This interface allows you to create a pair, name it, and ","swap which is forward and which reverse."].join("")))+"\n                    ")]),t._v(" "),n("ul",[n("li",[t._v("\n                            "+t._s(t.l("Click the "))+"\n                            "),n("i",{attrs:{"data-target":".swap"}},[t._v("\n                                "+t._s(t.l("Swap"))+"\n                            ")]),t._v("\n                            "+t._s(t.l("link to make your forward dataset the reverse and the reverse dataset forward"))+"\n                        ")]),t._v(" "),n("li",[t._v("\n                            "+t._s(t.l("Click the "))+"\n                            "),n("i",{attrs:{"data-target":".cancel-create"}},[t._v("\n                                "+t._s(t.l("Cancel"))+"\n                            ")]),t._v("\n                            "+t._s(t.l("button to exit the interface."))+"\n                        ")])]),t._v(" "),n("br"),t._v(" "),n("p",[t._v("\n                        "+t._s(t.l("Once your collection is complete, enter a "))+"\n                        "),n("i",{attrs:{"data-target":".collection-name"}},[t._v(" "+t._s(t.l("name")))]),t._v("\n                        "+t._s(t.l("and click "))+"\n                        "),n("i",{attrs:{"data-target":".create-collection"}},[t._v("\n                            "+t._s(t.l("Create list"))+"\n                        ")]),t._v("\n                        "+t._s(t.l("."))+"\n                    ")])]},proxy:!0},{key:"middle-content",fn:function(){return[n("div",{staticClass:"collection-elements-controls"},[n("a",{staticClass:"swap",attrs:{href:"javascript:void(0);",title:"l('Swap forward and reverse datasets')"},on:{click:t.swapButton}},[t._v("\n                            "+t._s(t.l("Swap"))+"\n                        ")])]),t._v(" "),n("div",{staticClass:"collection-elements scroll-container flex-row"},t._l(t.workingElements,(function(e,i){return n("div",{key:e.id,staticClass:"collection-element"},[t._v("\n                            "+t._s(0==i?t.l("forward"):t.l("reverse"))+": "+t._s(e.name)+"\n                        ")])})),0)]},proxy:!0}])})],1):n("div",[t.returnInvalidElementsLength?n("div",[n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                    "+t._s(t.invalidHeader)+"\n                    "),n("ul",t._l(t.returnInvalidElements,(function(e){return n("li",{key:e},[t._v("\n                            "+t._s(e)+"\n                        ")])})),0)])],1):t._e(),t._v(" "),n("b-alert",{attrs:{show:"",variant:"warning",dismissible:""}},[t._v("\n                "+t._s(t.exactlyTwoValidElementsPartOne)+"\n                "),n("a",{staticClass:"cancel-text",attrs:{href:"javascript:void(0)",role:"button"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.cancelText)+"\n                ")]),t._v("\n                "+t._s(t.exactlyTwoValidElementsPartTwo)+"\n            ")]),t._v(" "),n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:t.oncancel}},[t._v("\n                    "+t._s(t.l("Cancel"))+"\n                ")])])],1)])])}),[],!1,null,null,null);e.default=u.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(0),a=n.n(i),r=n(4),o=n.n(r),s=n(3),l=n(6),c=n(69),d=n(19),u=o.a.Router.extend({initialize:function(t,e){this.page=t,this.options=e},executeUseRouter:function(t){var e=Object(s.getAppRoot)();return t.startsWith(e)&&(t=t.replace(e,"/")),this.push(t)},push:function(t,e){(e=e||{}).__identifer=Math.random().toString(36).substr(2),t+=-1==t.indexOf("?")?"?":"&";var n=a.a.param(e,!0);t+=n,Object(l.a)().params=e,this.navigate(t,{trigger:!0}),window.history.replaceState(window.history.state,"",window.location.pathname.replace(n,""))},execute:function(t,e,n){Object(l.a)().debug("router execute:",t,e,n);var i=c.a.parse(e.pop());e.push(i),t&&(this.authenticate(e,n)?t.apply(this,e):this.access_denied())},authenticate:function(t,e){return!0},access_denied:function(){this.page.display(new d.a.Message({status:"danger",message:"You must be logged in with proper credentials to make this request.",persistent:!0}))}});e.a=u},function(t,e,n){"use strict";var i=n(7),a=n.n(i),r=n(8),o=n(15),s=n(6),l=n(62);r.default.use(o.a);var c={props:{registration_warning_message:{type:String,required:!1},redirect:{type:String,required:!1},terms_url:{type:String,required:!1}},data:function(){var t=Object(s.a)();return{username:null,subscribe:null,messageText:null,messageVariant:null,session_csrf_token:t.session_csrf_token,isAdmin:t.user.isAdmin(),termsRead:!1}},computed:{messageShow:function(){return null!=this.messageText},showRegistrationWarning:function(){return null!=this.registration_warning_message}},methods:{login:function(){var t=Object(l.b)();this.$emit("setRedirect","user/external_ids"),window.location=t+"login"},submit:function(){var t=this,e=Object(l.b)(),n=new URLSearchParams(window.location.search).get("custos_token");a.a.post("".concat(e,"authnz/custos/create_user?token=").concat(n)).then((function(t){t.data.redirect_uri?window.location=t.data.redirect_uri:window.location=e})).catch((function(e){t.messageVariant="danger";var n=e.response.data&&e.response.data.err_msg;t.messageText=n||"Login failed for an unknown reason."}))}}},d=n(5),u=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-md-center"},[n("div",{staticClass:"col",class:{"col-lg-6":!t.isAdmin}},[n("b-alert",{attrs:{show:t.showRegistrationWarning,variant:"info"},domProps:{innerHTML:t._s(t.registration_warning_message)}}),t._v(" "),n("b-alert",{attrs:{show:t.messageShow,variant:t.messageVariant},domProps:{innerHTML:t._s(t.messageText)}}),t._v(" "),n("b-form",{attrs:{id:"confirmation"},on:{submit:function(e){return e.preventDefault(),t.submit()}}},[n("b-card",{attrs:{"no-body":"",header:"Confirm new account creation"}},[n("b-card-body",[n("p",[t._v("Looks like you are about to create a new account!")]),t._v(" "),n("p",[t._v("\n                            Do you already have a Galaxy account? If so, click\n                            "),n("em",[t._v("'No, go back to login'")]),t._v(" to log in using your existing username and password to\n                            connect this account via "),n("strong",[t._v("User Preferences")]),t._v(".\n                            "),n("a",{attrs:{href:"https://galaxyproject.org/authnz/use/oidc/idps/custos/#link-an-existing-galaxy-account",target:"_blank"}},[t._v("More details here.")])]),t._v(" "),n("p",[t._v("\n                            If you wish to continue and create a new account, select\n                            "),n("em",[t._v("'Yes, create new account'")]),t._v(".\n                        ")]),t._v(" "),n("p",[t._v("\n                            Reminder: Registration and usage of multiple accounts is tracked and such accounts are\n                            subject to termination and data deletion on public Galaxy servers. Connect existing\n                            account now to continue to use your existing data and avoid possible loss of data.\n                        ")]),t._v(" "),n("b-form-group",[n("b-form-checkbox",{model:{value:t.termsRead,callback:function(e){t.termsRead=e},expression:"termsRead"}},[t._v("\n                                I have read and accept these terms to create a new Galaxy account.\n                            ")])],1),t._v(" "),n("b-button",{attrs:{name:"confirm",type:"submit",disabled:!t.termsRead},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("Yes, create new account")]),t._v(" "),n("b-button",{attrs:{name:"cancel",type:"submit"},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("No, go back to login")])],1),t._v(" "),t.isAdmin?t._e():n("b-card-footer",[t._v("\n                        Already have an account?\n                        "),n("a",{attrs:{id:"login-toggle",href:"javascript:void(0)",role:"button"},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("Log in here.")])])],1)],1)],1),t._v(" "),t.terms_url?n("div",{staticClass:"col"},[n("b-embed",{attrs:{type:"iframe",src:t.terms_url,aspect:"1by1"}})],1):t._e()])])}),[],!1,null,null,null);e.a=u.exports},,function(t,e,n){"use strict";var i=n(3),a=n(6),r=n(571),o=n(100),s=n(29),l=n(50),c=n(34);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={components:{UtcDate:o.a,WorkflowInvocationState:r.a,LoadingSpan:s.a},props:{invocationItems:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!0},noInvocationsMessage:{type:String,default:"No Workflow Invocations to display"},headerMessage:{type:String,default:""},ownerGrid:{type:Boolean,default:!0}},data:function(){return{invocationItemsModel:[],invocationFields:[{key:"workflow_id",label:"Workflow"},{key:"history_id",label:"History"},{key:"create_time",label:"Invoked"},{key:"update_time",label:"Updated"},{key:"state"},{key:"execute",label:""}],status:""}},computed:u(u({},Object(c.c)(["getWorkflowNameByInstanceId","getWorkflowByInstanceId","getHistoryNameById"])),{},{invocationItemsComputed:function(){return this.computeItems(this.invocationItems)}}),methods:u(u({},Object(l.b)(["fetchWorkflowForInstanceId","fetchHistoryForId"])),{},{computeItems:function(t){var e=this;return t.map((function(t){return e.ownerGrid&&(e.fetchWorkflowForInstanceId(t.workflow_id),e.fetchHistoryForId(t.history_id)),{id:t.id,create_time:t.create_time,update_time:t.update_time,workflow_id:t.workflow_id,history_id:t.history_id,state:t.state,_showDetails:!1}}))},swapRowDetails:function(t){t.toggleDetails()},executeWorkflow:function(t){window.location="".concat(Object(i.getAppRoot)(),"workflows/run?id=").concat(t)},switchHistory:function(t){Object(a.a)().currHistoryPanel.switchToHistory(t)}})},p=n(5),m=Object(p.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),t.headerMessage?n("b-alert",{attrs:{variant:"info",show:""}},[t._v("\n        "+t._s(t.headerMessage)+"\n    ")]):t._e(),t._v(" "),t.loading?n("loading-span",{attrs:{message:"Loading workflow invocations"}}):n("div",[t.invocationItemsComputed.length?n("b-table",{attrs:{fields:t.invocationFields,items:t.invocationItemsComputed,hover:"",striped:"","caption-top":"",busy:t.loading,fixed:""},scopedSlots:t._u([{key:"row-details",fn:function(e){return[n("b-card",[n("small",{staticClass:"float-right"},[n("b",[t._v("Invocation: "+t._s(e.item.id))])]),t._v(" "),n("workflow-invocation-state",{attrs:{"invocation-id":e.item.id},on:{"invocation-cancelled":function(e){return t.$emit("reload-invocations")}}})],1)]}},{key:"cell(workflow_id)",fn:function(e){return[n("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"toggle-invocation-details",attrs:{title:"Show Invocation details",href:"#"},on:{click:function(n){return n.stopPropagation(),t.swapRowDetails(e)}}},[n("b",[t._v(t._s(t.getWorkflowNameByInstanceId(e.item.workflow_id)))])])]}},{key:"cell(history_id)",fn:function(e){return[n("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{id:"switch-to-history",title:"Switch to History",href:"#"},on:{click:function(n){return n.stopPropagation(),t.switchHistory(e.item.history_id)}}},[n("b",[t._v(t._s(t.getHistoryNameById(e.item.history_id)))])])]}},{key:"cell(create_time)",fn:function(t){return[n("UtcDate",{attrs:{date:t.value,mode:"elapsed"}})]}},{key:"cell(update_time)",fn:function(t){return[n("UtcDate",{attrs:{date:t.value,mode:"elapsed"}})]}},{key:"cell(execute)",fn:function(e){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"workflow-run btn-sm btn-primary fa fa-play",attrs:{id:"run-workflow",title:"Run Workflow"},on:{click:function(n){n.stopPropagation(),t.executeWorkflow(t.getWorkflowByInstanceId(e.item.workflow_id).id)}}})]}}]),model:{value:t.invocationItemsModel,callback:function(e){t.invocationItemsModel=e},expression:"invocationItemsModel"}}):n("b-alert",{attrs:{id:"no-invocations",variant:"info",show:""}},[t._v("\n            "+t._s(t.noInvocationsMessage)+"\n        ")])],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"mb-3"},[e("span",{attrs:{id:"invocations-title"}},[this._v("Workflow Invocations")])])}],!1,null,null,null);e.a=m.exports},function(t,e,n){"use strict";var i=n(7),a=n.n(i),r=n(8),o=n(607),s=n.n(o),l=n(15),c=n(6),d=n(62);r.default.use(l.a);var u={components:{Multiselect:s.a},props:{login_page:{type:Boolean,required:!1}},data:function(){var t=Object(c.a)();return{messageText:null,messageVariant:null,enable_oidc:t.config.enable_oidc,oidc_idps:t.config.oidc,cilogon_idps:[],selected:null,rememberIdp:!1,cilogonOrCustos:null,toggle_cilogon:!1}},computed:{filtered_oidc_idps:function(){var t=Object.assign({},this.oidc_idps);return delete t.custos,delete t.cilogon,t},cilogonListShow:function(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"cilogon")||Object.prototype.hasOwnProperty.call(this.oidc_idps,"custos")},messageShow:function(){return null!=this.messageText},cilogon_enabled:function(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"cilogon")},custos_enabled:function(){return Object.prototype.hasOwnProperty.call(this.oidc_idps,"custos")}},methods:{toggleCILogon:function(t){this.toggle_cilogon=!this.toggle_cilogon,this.cilogonOrCustos=this.toggle_cilogon?t:null},submitOIDCLogin:function(t){var e=this,n=Object(d.b)();a.a.post("".concat(n,"authnz/").concat(t,"/login")).then((function(t){t.data.redirect_uri&&(window.location=t.data.redirect_uri)})).catch((function(t){e.messageVariant="danger";var n=t.response.data&&t.response.data.err_msg;e.messageText=n||"Login failed for an unknown reason."}))},submitCILogon:function(t){var e=this,n=Object(d.b)();this.login_page&&this.setIdpPreference(),a.a.post("".concat(n,"authnz/").concat(t,"/login/?idphint=").concat(this.selected.EntityID)).then((function(e){localStorage.setItem("galaxy-provider",t),e.data.redirect_uri&&(window.location=e.data.redirect_uri)})).catch((function(t){e.messageVariant="danger";var n=t.response.data&&t.response.data.err_msg;e.messageText=n||"Login failed for an unknown reason."})).finally((function(){var t=new URLSearchParams(window.location.search);t.has("message")&&"Duplicate Email"==t.get("message")&&e.$refs.duplicateEmail.show()}))},getCILogonIdps:function(){var t=this,e=Object(d.b)();a.a.get("".concat(e,"authnz/get_cilogon_idps")).then((function(e){t.cilogon_idps=e.data,1==t.cilogon_idps.length?t.selected=t.cilogon_idps[0]:t.cilogon_idps.sort((function(t,e){return t.DisplayName>e.DisplayName?1:-1}))})).then((function(){if(t.login_page){var e=t.getIdpPreference();e&&(t.selected=t.cilogon_idps.find((function(t){return t.EntityID===e})))}}))},setIdpPreference:function(){this.rememberIdp?localStorage.setItem("galaxy-remembered-idp",this.selected.EntityID):localStorage.removeItem("galaxy-remembered-idp")},getIdpPreference:function(){return localStorage.getItem("galaxy-remembered-idp")}},created:function(){this.rememberIdp=null!==this.getIdpPreference(),this.cilogonListShow&&this.getCILogonIdps()}},h=(n(807),n(5)),f=Object(h.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-alert",{attrs:{show:t.messageShow,variant:t.messageVariant},domProps:{innerHTML:t._s(t.messageText)}}),t._v(" "),n("b-form",{attrs:{id:"externalLogin"}},[n("hr",{staticClass:"my-4"}),t._v(" "),t.cilogonListShow?n("div",{staticClass:"cilogon"},[t.login_page?n("div",[n("b-form-group",{attrs:{label:"Use existing institutional login"}},[n("multiselect",{attrs:{placeholder:"Select your institution",options:t.cilogon_idps,label:"DisplayName","track-by":"EntityID"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),t._v(" "),t.login_page?n("b-form-group",[n("b-form-checkbox",{attrs:{id:"remember-idp"},model:{value:t.rememberIdp,callback:function(e){t.rememberIdp=e},expression:"rememberIdp"}},[t._v("\n                        Remember institution selection\n                    ")])],1):t._e(),t._v(" "),t.cilogon_enabled?n("b-button",{attrs:{disabled:null===t.selected},on:{click:function(e){return t.submitCILogon("cilogon")}}},[t._v("Sign in with Institutional Credentials*")]):t._e(),t._v(" "),Object.prototype.hasOwnProperty.call(t.oidc_idps,"custos")?n("b-button",{attrs:{disabled:null===t.selected},on:{click:function(e){return t.submitCILogon("custos")}}},[t._v("Sign in with Custos*")]):t._e()],1):n("div",[t.cilogon_enabled?n("b-button",{on:{click:function(e){return t.toggleCILogon("cilogon")}}},[t._v("Sign in with Institutional Credentials*")]):t._e(),t._v(" "),t.custos_enabled?n("b-button",{on:{click:function(e){return t.toggleCILogon("custos")}}},[t._v("Sign in with Custos*")]):t._e(),t._v(" "),t.toggle_cilogon?n("b-form-group",[n("multiselect",{attrs:{placeholder:"Select your institution",options:t.cilogon_idps,label:"DisplayName","track-by":"EntityID"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t._v(" "),t.toggle_cilogon?n("b-button",{attrs:{disabled:null===t.selected},on:{click:function(e){return t.submitCILogon(t.cilogonOrCustos)}}},[t._v("Login*")]):t._e()],1):t._e()],1),t._v(" "),n("p",{staticClass:"mt-3"},[n("small",{staticClass:"text-muted"},[t._v("\n                    * Galaxy uses CILogon via Custos to enable you to log in from this organization. By clicking\n                    'Sign In', you agree to the\n                    "),n("a",{attrs:{href:"https://ca.cilogon.org/policy/privacy"}},[t._v("CILogon")]),t._v(" privacy policy and you agree to\n                    share your username, email address, and affiliation with CILogon, Custos, and Galaxy.\n                ")])])]):t._e(),t._v(" "),t._l(t.filtered_oidc_idps,(function(e,i){return n("div",{key:i,staticClass:"m-1"},[e.icon?n("span",[n("b-button",{staticClass:"d-block mt-3",attrs:{variant:"link"},on:{click:function(e){return t.submitOIDCLogin(i)}}},[n("img",{attrs:{src:e.icon,height:"45",alt:i}})])],1):n("span",[n("b-button",{staticClass:"d-block mt-3",on:{click:function(e){return t.submitOIDCLogin(i)}}},[n("i",{class:t.oidc_idps[i]}),t._v("\n                    Sign in with\n                    "+t._s(i.charAt(0).toUpperCase()+i.slice(1))+"\n                ")])],1)])}))],2)],1)}),[],!1,null,"285700a6",null);e.a=f.exports},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var i=n(2),a=n.n(i),r={props:{oncancel:{type:Function,required:!0},creationFn:{type:Function,required:!0},renderExtensionsToggle:{type:Boolean,default:!1},hideSourceItems:{type:Boolean,required:!0}},computed:{validInput:function(){return this.collectionName.length>0}},data:function(){return{titleForHelp:a()("Expand or Close Help"),hideOriginalsText:a()("Hide original elements?"),titleMoreHelp:a()("Close and show more help"),placeholderEnterName:a()("Enter a name for your new collection"),dropdownText:a()("Create a <i>single</> pair"),isExpanded:!1,collectionName:"",removeFileExtensionsText:"Remove file extensions?",localHideSourceItems:this.hideSourceItems}},methods:{l:function(t){return a()(t)},_clickForHelp:function(){return this.isExpanded=!this.isExpanded,this.isExpanded},_cancelCreate:function(){this.oncancel()},_getName:function(){return this.collectionName}},watch:{localHideSourceItems:function(){this.$emit("onUpdateHideSourceItems",this.localHideSourceItems)}}},o=(n(1057),n(5)),s=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"collection-creator"},[n("div",{staticClass:"header flex-row no-flex"},[n("div",{staticClass:"main-help well clear",class:{expanded:t.isExpanded}},[n("a",{staticClass:"more-help",attrs:{href:"javascript:void(0);",role:"button",title:t.titleForHelp},on:{click:t._clickForHelp}},[t.isExpanded?n("div",[n("i",{staticClass:"fas fa-chevron-up"})]):n("div",[n("i",{staticClass:"fas fa-chevron-down"})])]),t._v(" "),n("div",{staticClass:"help-content"},[t._t("help-content"),t._v(" "),n("a",{staticClass:"more-help",attrs:{href:"javascript:void(0);",role:"button",title:t.titleForHelp},on:{click:t._clickForHelp}})],2)])]),t._v(" "),n("div",{staticClass:"middle flex-row flex-row-container"},[t._t("middle-content")],2),t._v(" "),n("div",{staticClass:"footer flex-row no-flex"},[n("div",{staticClass:"attributes clear"},[n("div",{staticClass:"clear"},[t.renderExtensionsToggle?n("label",{staticClass:"setting-prompt float-right"},[t._v("\n                    "+t._s(t.removeFileExtensionsText)+"\n                    "),n("input",{staticClass:"remove-extensions float-right",attrs:{type:"checkbox",checked:""},on:{click:function(e){return t.$emit("remove-extensions-toggle")}}})]):t._e(),t._v(" "),n("label",{staticClass:"setting-prompt float-right"},[t._v("\n                    "+t._s(t.hideOriginalsText)+"\n                    "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.localHideSourceItems,expression:"localHideSourceItems"}],staticClass:"hide-originals float-right",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localHideSourceItems)?t._i(t.localHideSourceItems,null)>-1:t.localHideSourceItems},on:{change:function(e){var n=t.localHideSourceItems,i=e.target,a=!!i.checked;if(Array.isArray(n)){var r=t._i(n,null);i.checked?r<0&&(t.localHideSourceItems=n.concat([null])):r>-1&&(t.localHideSourceItems=n.slice(0,r).concat(n.slice(r+1)))}else t.localHideSourceItems=a}}})])]),t._v(" "),n("div",{staticClass:"clear"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.collectionName,expression:"collectionName"}],staticClass:"collection-name form-control float-right",attrs:{placeholder:t.placeholderEnterName},domProps:{value:t.collectionName},on:{input:function(e){e.target.composing||(t.collectionName=e.target.value)}}}),t._v(" "),n("div",{staticClass:"collection-name-prompt float-right"},[t._v("\n                    "+t._s(t.l("Name:"))+"\n                ")])])]),t._v(" "),n("div",{staticClass:"actions clear vertically-spaced"},[n("div",{staticClass:"float-left"},[n("button",{staticClass:"cancel-create btn",attrs:{tabindex:"-1"},on:{click:t._cancelCreate}},[t._v("\n                    "+t._s(t.l("Cancel"))+"\n                ")])]),t._v(" "),n("div",{staticClass:"main-options float-right"},[n("button",{staticClass:"create-collection btn btn-primary",attrs:{disabled:!t.validInput},on:{click:function(e){return t.$emit("clicked-create",t.collectionName)}}},[t._v("\n                    "+t._s(t.l("Create list"))+"\n                ")])])])])])}),[],!1,null,null,null).exports;e.a={components:{CollectionCreator:s},props:{initialElements:{required:!0,type:Array},creationFn:{type:Function,required:!0},oncancel:{type:Function,required:!0},oncreate:{type:Function,required:!0},defaultHideSourceItems:{type:Boolean,required:!1,default:!0}},data:function(){return{hideSourceItems:this.defaultHideSourceItems}},methods:{onUpdateHideSourceItems:function(t){this.hideSourceItems=t}}}},function(t,e,n){},function(t,e,n){},function(t,e,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(453);n.n(i).a},function(t,e,n){"use strict";var i=n(455);n.n(i).a},,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(456);n.n(i).a},function(t,e,n){"use strict";var i=n(457);n.n(i).a},function(t,e,n){"use strict";var i=n(458);n.n(i).a},function(t,e,n){"use strict";var i=n(459);n.n(i).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i={props:{value:{required:!0,type:String},title:{required:!1,type:String}},data:function(){return{editable:!1,localValue:this.value}},watch:{localValue:function(t){this.$emit("input",t)},value:function(t){this.localValue=t}}},a=(n(1058),n(5)),r=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editable?n("input",{directives:[{name:"model",rawName:"v-model",value:t.localValue,expression:"localValue"}],staticClass:"click-to-edit-input",attrs:{contenteditable:""},domProps:{value:t.localValue},on:{blur:function(e){t.editable=!1},keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.editable=!1},input:function(e){e.target.composing||(t.localValue=e.target.value)}}}):n("label",{on:{click:function(e){t.editable=!0}}},[t._v("\n    "+t._s(t.localValue)+"\n")])}),[],!1,null,null,null);e.a=r.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(654);n.n(i).a},function(t,e,n){"use strict";var i=n(655);n.n(i).a},function(t,e,n){"use strict";var i=n(657);n.n(i).a},function(t,e,n){"use strict";var i=n(658);n.n(i).a},function(t,e,n){"use strict";var i=n(659);n.n(i).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n(498),n(511),t.exports=n(2122)},function(t,e,n){"use strict";var i=n(711);n.n(i).a},function(t,e,n){"use strict";var i=n(712);n.n(i).a},,function(t,e,n){"use strict";var i=n(713);n.n(i).a},function(t,e,n){"use strict";var i=n(714);n.n(i).a},,function(t,e,n){var i,a,r;!function(o){"use strict";a=[n(0)],void 0===(r="function"==typeof(i=function(t,e){
/*!
 * jsTree 3.0.3
 * http://jstree.com/
 *
 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * if using jslint please allow for the jQuery global and use following options: 
 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
if(t.jstree)return;var n,i,a=0,r=!1,o=!1,s=!1,l=[],c=t("script:last").attr("src"),d=document,u=d.createElement("LI");u.setAttribute("role","treeitem"),(n=d.createElement("I")).className="jstree-icon jstree-ocl",u.appendChild(n),(n=d.createElement("A")).className="jstree-anchor",n.setAttribute("href","#"),(i=d.createElement("I")).className="jstree-icon jstree-themeicon",n.appendChild(i),u.appendChild(n),n=i=null,t.jstree={version:"3.0.3",defaults:{plugins:[]},plugins:{},path:c&&-1!==c.indexOf("/")?c.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%]/g},t.jstree.create=function(e,n){var i=new t.jstree.core(++a),r=n;return n=t.extend(!0,{},t.jstree.defaults,n),r&&r.plugins&&(n.plugins=r.plugins),t.each(n.plugins,(function(t,e){"core"!==t&&(i=i.plugin(e,n[e]))})),i.init(e,n),i},t.jstree.core=function(t){this._id=t,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[]}}},t.jstree.reference=function(e){var n=null,i=null;if(e&&e.id&&(e=e.id),!i||!i.length)try{i=t(e)}catch(t){}if(!i||!i.length)try{i=t("#"+e.replace(t.jstree.idregex,"\\$&"))}catch(t){}return i&&i.length&&(i=i.closest(".jstree")).length&&(i=i.data("jstree"))?n=i:t(".jstree").each((function(){var i=t(this).data("jstree");if(i&&i._model.data[e])return n=i,!1})),n},t.fn.jstree=function(n){var i="string"==typeof n,a=Array.prototype.slice.call(arguments,1),r=null;return this.each((function(){var o=t.jstree.reference(this),s=i&&o?o[n]:null;if(r=i&&s?s.apply(o,a):null,o||i||n!==e&&!t.isPlainObject(n)||t(this).data("jstree",new t.jstree.create(this,n)),(o&&!i||!0===n)&&(r=o||!1),null!==r&&r!==e)return!1})),null!==r&&r!==e?r:this},t.expr[":"].jstree=t.expr.createPseudo((function(n){return function(n){return t(n).hasClass("jstree")&&t(n).data("jstree")!==e}})),t.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:t.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1},t.jstree.core.prototype={plugin:function(e,n){var i=t.jstree.plugins[e];return i?(this._data[e]={},i.prototype=this,new i(n,this)):this},init:function(e,n){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=t(e).addClass("jstree jstree-"+this._id),this.settings=n,this.element.bind("destroyed",t.proxy(this.teardown,this)),this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter((function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))})).remove(),this.element.html("<ul class='jstree-container-ul jstree-children'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this._data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(t){t||this.element.empty(),this.element.unbind("destroyed",this.teardown),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",(function(){return this.className.replace(/jstree[^ ]*|$/gi,"")})),this.element=null},bind:function(){this.element.on("dblclick.jstree",(function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(t){}}})).on("click.jstree",".jstree-ocl",t.proxy((function(t){this.toggle_node(t.target)}),this)).on("click.jstree",".jstree-anchor",t.proxy((function(e){e.preventDefault(),t(e.currentTarget).focus(),this.activate_node(e.currentTarget,e)}),this)).on("keydown.jstree",".jstree-anchor",t.proxy((function(e){if("INPUT"===e.target.tagName)return!0;var n=null;switch(e.which){case 13:case 32:e.type="click",t(e.currentTarget).trigger(e);break;case 37:e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(n=this.get_prev_dom(e.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 38:e.preventDefault(),(n=this.get_prev_dom(e.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 39:e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,(function(t){this.get_node(t,!0).children(".jstree-anchor").focus()})):(n=this.get_next_dom(e.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 40:e.preventDefault(),(n=this.get_next_dom(e.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 46:e.preventDefault(),(n=this.get_node(e.currentTarget))&&n.id&&"#"!==n.id&&(n=this.is_selected(n)?this.get_selected():n);break;case 113:e.preventDefault(),n=this.get_node(e.currentTarget)}}),this)).on("load_node.jstree",t.proxy((function(e,n){if(n.status&&("#"!==n.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this.trigger("loaded")),!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length)){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var i,a,r=[];for(i=0,a=this._data.core.selected.length;i<a;i++)r=r.concat(this._model.data[this._data.core.selected[i]].parents);for(i=0,a=(r=t.vakata.array_unique(r)).length;i<a;i++)this.open_node(r[i],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout(t.proxy((function(){this.trigger("ready")}),this),0)}}),this)).on("init.jstree",t.proxy((function(){var t=this.settings.core.themes;this._data.core.themes.dots=t.dots,this._data.core.themes.stripes=t.stripes,this._data.core.themes.icons=t.icons,this.set_theme(t.name||"default",t.url),this.set_theme_variant(t.variant)}),this)).on("loading.jstree",t.proxy((function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()}),this)).on("blur.jstree",".jstree-anchor",t.proxy((function(e){t(e.currentTarget).filter(".jstree-hovered").mouseleave()}),this)).on("focus.jstree",".jstree-anchor",t.proxy((function(e){this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),t(e.currentTarget).mouseenter()}),this)).on("mouseenter.jstree",".jstree-anchor",t.proxy((function(t){this.hover_node(t.currentTarget)}),this)).on("mouseleave.jstree",".jstree-anchor",t.proxy((function(t){this.dehover_node(t.currentTarget)}),this))},unbind:function(){this.element.off(".jstree"),t(document).off(".jstree-"+this._id)},trigger:function(t,e){e||(e={}),e.instance=this,this.element.triggerHandler(t.replace(".jstree","")+".jstree",e)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children:eq(0)")},get_string:function(e){var n=this.settings.core.strings;return t.isFunction(n)?n.call(this,e):n&&n[e]?n[e]:e},_firstChild:function(t){for(t=t?t.firstChild:null;null!==t&&1!==t.nodeType;)t=t.nextSibling;return t},_nextSibling:function(t){for(t=t?t.nextSibling:null;null!==t&&1!==t.nodeType;)t=t.nextSibling;return t},_previousSibling:function(t){for(t=t?t.previousSibling:null;null!==t&&1!==t.nodeType;)t=t.previousSibling;return t},get_node:function(e,n){var i;e&&e.id&&(e=e.id);try{if(this._model.data[e])e=this._model.data[e];else if(((i=t(e,this.element)).length||(i=t("#"+e.replace(t.jstree.idregex,"\\$&"),this.element)).length)&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=t(e,this.element)).length||!i.hasClass("jstree"))return!1;e=this._model.data["#"]}return n&&(e="#"===e.id?this.element:t("#"+e.id.replace(t.jstree.idregex,"\\$&"),this.element)),e}catch(t){return!1}},get_path:function(t,e,n){if(!(t=t.parents?t:this.get_node(t))||"#"===t.id||!t.parents)return!1;var i,a,r=[];for(r.push(n?t.id:t.text),i=0,a=t.parents.length;i<a;i++)r.push(n?t.parents[i]:this.get_text(t.parents[i]));return r=r.reverse().slice(1),e?r.join(e):r},get_next_dom:function(e,n){var i;return(e=this.get_node(e,!0))[0]===this.element[0]?!!(i=this._firstChild(this.get_container_ul()[0]))&&t(i):!(!e||!e.length)&&(n?!!(i=this._nextSibling(e[0]))&&t(i):e.hasClass("jstree-open")?!!(i=this._firstChild(e.children(".jstree-children")[0]))&&t(i):null!==(i=this._nextSibling(e[0]))?t(i):e.parentsUntil(".jstree",".jstree-node").next(".jstree-node").eq(0))},get_prev_dom:function(e,n){var i;if((e=this.get_node(e,!0))[0]===this.element[0])return!!(i=this.get_container_ul()[0].lastChild)&&t(i);if(!e||!e.length)return!1;if(n)return!!(i=this._previousSibling(e[0]))&&t(i);if(null!==(i=this._previousSibling(e[0]))){for(e=t(i);e.hasClass("jstree-open");)e=e.children(".jstree-children:eq(0)").children(".jstree-node:last");return e}return!(!(i=e[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&t(i)},get_parent:function(t){return!(!(t=this.get_node(t))||"#"===t.id)&&t.parent},get_children_dom:function(t){return(t=this.get_node(t,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!t||!t.length)&&t.children(".jstree-children").children(".jstree-node")},is_parent:function(t){return(t=this.get_node(t))&&(!1===t.state.loaded||t.children.length>0)},is_loaded:function(t){return(t=this.get_node(t))&&t.state.loaded},is_loading:function(t){return(t=this.get_node(t))&&t.state&&t.state.loading},is_open:function(t){return(t=this.get_node(t))&&t.state.opened},is_closed:function(t){return(t=this.get_node(t))&&this.is_parent(t)&&!t.state.opened},is_leaf:function(t){return!this.is_parent(t)},load_node:function(e,n){var i,a,r,o,s;if(t.isArray(e))return this._load_nodes(e.slice(),n),!0;if(!(e=this.get_node(e)))return n&&n.call(this,e,!1),!1;if(e.state.loaded){for(e.state.loaded=!1,i=0,a=e.children_d.length;i<a;i++){for(r=0,o=e.parents.length;r<o;r++)this._model.data[e.parents[r]].children_d=t.vakata.array_remove_item(this._model.data[e.parents[r]].children_d,e.children_d[i]);this._model.data[e.children_d[i]].state.selected&&(s=!0,this._data.core.selected=t.vakata.array_remove_item(this._data.core.selected,e.children_d[i])),delete this._model.data[e.children_d[i]]}e.children=[],e.children_d=[],s&&this.trigger("changed",{action:"load_node",node:e,selected:this._data.core.selected})}return e.state.loading=!0,this.get_node(e,!0).addClass("jstree-loading"),this._load_node(e,t.proxy((function(t){(e=this._model.data[e.id]).state.loading=!1,e.state.loaded=t;var i=this.get_node(e,!0);e.state.loaded&&!e.children.length&&i&&i.length&&!i.hasClass("jstree-leaf")&&i.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),i.removeClass("jstree-loading"),this.trigger("load_node",{node:e,status:t}),n&&n.call(this,e,t)}),this)),!0},_load_nodes:function(t,e,n){var i,a,r=!0,o=function(){this._load_nodes(t,e,!0)},s=this._model.data;for(i=0,a=t.length;i<a;i++)!s[t[i]]||s[t[i]].state.loaded&&n||(this.is_loading(t[i])||this.load_node(t[i],o),r=!1);r&&e&&!e.done&&(e.call(this,t),e.done=!0)},_load_node:function(e,n){var i,a=this.settings.core.data;return a?t.isFunction(a)?a.call(this,e,t.proxy((function(i){!1===i&&n.call(this,!1),this["string"==typeof i?"_append_html_data":"_append_json_data"](e,"string"==typeof i?t(i):i,(function(t){n.call(this,t)}))}),this)):"object"==typeof a?a.url?(a=t.extend(!0,{},a),t.isFunction(a.url)&&(a.url=a.url.call(this,e)),t.isFunction(a.data)&&(a.data=a.data.call(this,e)),t.ajax(a).done(t.proxy((function(i,a,r){var o=r.getResponseHeader("Content-Type");return-1!==o.indexOf("json")||"object"==typeof i?this._append_json_data(e,i,(function(t){n.call(this,t)})):-1!==o.indexOf("html")||"string"==typeof i?this._append_html_data(e,t(i),(function(t){n.call(this,t)})):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:e.id,xhr:r})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))}),this)).fail(t.proxy((function(t){n.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:e.id,xhr:t})},this.settings.core.error.call(this,this._data.core.last_error)}),this))):(i=t.isArray(a)||t.isPlainObject(a)?JSON.parse(JSON.stringify(a)):a,"#"===e.id?this._append_json_data(e,i,(function(t){n.call(this,t)})):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:e.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof a?"#"===e.id?this._append_html_data(e,t(a),(function(t){n.call(this,t)})):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:e.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):"#"===e.id?this._append_html_data(e,this._data.core.original_container_html.clone(!0),(function(t){n.call(this,t)})):n.call(this,!1)},_node_changed:function(t){(t=this.get_node(t))&&this._model.changed.push(t.id)},_append_html_data:function(e,n,i){(e=this.get_node(e)).children=[],e.children_d=[];var a,r,o,s=n.is("ul")?n.children():n,l=e.id,c=[],d=[],u=this._model.data,h=u[l],f=this._data.core.selected.length;for(s.each(t.proxy((function(e,n){(a=this._parse_model_from_html(t(n),l,h.parents.concat()))&&(c.push(a),d.push(a),u[a].children_d.length&&(d=d.concat(u[a].children_d)))}),this)),h.children=c,h.children_d=d,r=0,o=h.parents.length;r<o;r++)u[h.parents[r]].children_d=u[h.parents[r]].children_d.concat(d);this.trigger("model",{nodes:d,parent:l}),"#"!==l?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(e,n,i){(e=this.get_node(e)).children=[],e.children_d=[],n.d&&"string"==typeof(n=n.d)&&(n=JSON.parse(n)),t.isArray(n)||(n=[n]);var a=null,r={df:this._model.default_state,dat:n,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(t,e){t.data&&(t=t.data);var n,i,a,r,o=t.dat,s=t.par,l=[],c=[],d=[],u=t.df,h=t.t_id,f=t.t_cnt,p=t.m,m=p[s],_=t.sel,g=function(t,n,i){i=i?i.concat():[],n&&i.unshift(n);var a,r,o,s,l=t.id.toString(),c={id:l,text:t.text||"",icon:t.icon===e||t.icon,parent:n,parents:i,children:t.children||[],children_d:t.children_d||[],data:t.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in u)u.hasOwnProperty(a)&&(c.state[a]=u[a]);if(t&&t.data&&t.data.jstree&&t.data.jstree.icon&&(c.icon=t.data.jstree.icon),t&&t.data&&(c.data=t.data,t.data.jstree))for(a in t.data.jstree)t.data.jstree.hasOwnProperty(a)&&(c.state[a]=t.data.jstree[a]);if(t&&"object"==typeof t.state)for(a in t.state)t.state.hasOwnProperty(a)&&(c.state[a]=t.state[a]);if(t&&"object"==typeof t.li_attr)for(a in t.li_attr)t.li_attr.hasOwnProperty(a)&&(c.li_attr[a]=t.li_attr[a]);if(c.li_attr.id||(c.li_attr.id=l),t&&"object"==typeof t.a_attr)for(a in t.a_attr)t.a_attr.hasOwnProperty(a)&&(c.a_attr[a]=t.a_attr[a]);for(t&&t.children&&!0===t.children&&(c.state.loaded=!1,c.children=[],c.children_d=[]),p[c.id]=c,a=0,r=c.children.length;a<r;a++)o=g(p[c.children[a]],c.id,i),s=p[o],c.children_d.push(o),s.children_d.length&&(c.children_d=c.children_d.concat(s.children_d));return delete t.data,delete t.children,p[c.id].original=t,c.state.selected&&d.push(c.id),c.id},v=function(t,n,i){i=i?i.concat():[],n&&i.unshift(n);var a,r,o,s,l,c=!1;do{c="j"+h+"_"+ ++f}while(p[c]);for(a in l={id:!1,text:"string"==typeof t?t:"",icon:"object"!=typeof t||t.icon===e||t.icon,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},u)u.hasOwnProperty(a)&&(l.state[a]=u[a]);if(t&&t.id&&(l.id=t.id.toString()),t&&t.text&&(l.text=t.text),t&&t.data&&t.data.jstree&&t.data.jstree.icon&&(l.icon=t.data.jstree.icon),t&&t.data&&(l.data=t.data,t.data.jstree))for(a in t.data.jstree)t.data.jstree.hasOwnProperty(a)&&(l.state[a]=t.data.jstree[a]);if(t&&"object"==typeof t.state)for(a in t.state)t.state.hasOwnProperty(a)&&(l.state[a]=t.state[a]);if(t&&"object"==typeof t.li_attr)for(a in t.li_attr)t.li_attr.hasOwnProperty(a)&&(l.li_attr[a]=t.li_attr[a]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),t&&"object"==typeof t.a_attr)for(a in t.a_attr)t.a_attr.hasOwnProperty(a)&&(l.a_attr[a]=t.a_attr[a]);if(t&&t.children&&t.children.length){for(a=0,r=t.children.length;a<r;a++)o=v(t.children[a],l.id,i),s=p[o],l.children.push(o),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return t&&t.children&&!0===t.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete t.data,delete t.children,l.original=t,p[l.id]=l,l.state.selected&&d.push(l.id),l.id};if(o.length&&o[0].id!==e&&o[0].parent!==e){for(i=0,a=o.length;i<a;i++)o[i].children||(o[i].children=[]),p[o[i].id.toString()]=o[i];for(i=0,a=o.length;i<a;i++)p[o[i].parent.toString()].children.push(o[i].id.toString()),m.children_d.push(o[i].id.toString());for(i=0,a=m.children.length;i<a;i++)n=g(p[m.children[i]],s,m.parents.concat()),c.push(n),p[n].children_d.length&&(c=c.concat(p[n].children_d));for(i=0,a=m.parents.length;i<a;i++)p[m.parents[i]].children_d=p[m.parents[i]].children_d.concat(c);r={cnt:f,mod:p,sel:_,par:s,dpc:c,add:d}}else{for(i=0,a=o.length;i<a;i++)(n=v(o[i],s,m.parents.concat()))&&(l.push(n),c.push(n),p[n].children_d.length&&(c=c.concat(p[n].children_d)));for(m.children=l,m.children_d=c,i=0,a=m.parents.length;i<a;i++)p[m.parents[i]].children_d=p[m.parents[i]].children_d.concat(c);r={cnt:f,mod:p,sel:_,par:s,dpc:c,add:d}}return r},s=function(e,n){if(this._cnt=e.cnt,this._model.data=e.mod,n){var a,r,o=e.add,s=e.sel,l=this._data.core.selected.slice(),c=this._model.data;if(s.length!==l.length||t.vakata.array_unique(s.concat(l)).length!==s.length){for(a=0,r=s.length;a<r;a++)-1===t.inArray(s[a],o)&&-1===t.inArray(s[a],l)&&(c[s[a]].state.selected=!1);for(a=0,r=l.length;a<r;a++)-1===t.inArray(l[a],s)&&(c[l[a]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),"#"!==e.par?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString().replace(/return ([^;}]+)[\s;}]+$/,"postMessage($1);}")],{type:"text/javascript"}))),(a=new window.Worker(this._wrk)).onmessage=t.proxy((function(t){s.call(this,t.data,!0),this._data.core.working=!1,this._data.core.worker_queue.length&&this._append_json_data.apply(this,this._data.core.worker_queue.shift())}),this),this._data.core.working?this._data.core.worker_queue.push([e,n,i]):(this._data.core.working=!0,a.postMessage(r))}catch(t){s.call(this,o(r),!1)}else s.call(this,o(r),!1)},_parse_model_from_html:function(e,n,i){i=i?[].concat(i):[],n&&i.unshift(n);var a,r,o,s,l,c=this._model.data,d={id:!1,text:!1,icon:!0,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(d.state[o]=this._model.default_state[o]);if(s=t.vakata.attributes(e,!0),t.each(s,(function(e,n){if(!(n=t.trim(n)).length)return!0;d.li_attr[e]=n,"id"===e&&(d.id=n.toString())})),(s=e.children("a").eq(0)).length&&(s=t.vakata.attributes(s,!0),t.each(s,(function(e,n){(n=t.trim(n)).length&&(d.a_attr[e]=n)}))),(s=e.children("a:eq(0)").length?e.children("a:eq(0)").clone():e.clone()).children("ins, i, ul").remove(),s=s.html(),s=t("<div />").html(s),d.text=this.settings.core.force_text?s.text():s.html(),s=e.data(),d.data=s?t.extend(!0,{},s):null,d.state.opened=e.hasClass("jstree-open"),d.state.selected=e.children("a").hasClass("jstree-clicked"),d.state.disabled=e.children("a").hasClass("jstree-disabled"),d.data&&d.data.jstree)for(o in d.data.jstree)d.data.jstree.hasOwnProperty(o)&&(d.state[o]=d.data.jstree[o]);(s=e.children("a").children(".jstree-themeicon")).length&&(d.icon=!s.hasClass("jstree-themeicon-hidden")&&s.attr("rel")),d.state.icon&&(d.icon=d.state.icon),s=e.children("ul").children("li");do{l="j"+this._id+"_"+ ++this._cnt}while(c[l]);return d.id=d.li_attr.id?d.li_attr.id.toString():l,s.length?(s.each(t.proxy((function(e,n){a=this._parse_model_from_html(t(n),d.id,i),r=this._model.data[a],d.children.push(a),r.children_d.length&&(d.children_d=d.children_d.concat(r.children_d))}),this)),d.children_d=d.children_d.concat(d.children)):e.hasClass("jstree-closed")&&(d.state.loaded=!1),d.li_attr.class&&(d.li_attr.class=d.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),d.a_attr.class&&(d.a_attr.class=d.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),c[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_flat_json:function(t,n,i){i=i?i.concat():[],n&&i.unshift(n);var a,r,o,s,l=t.id.toString(),c=this._model.data,d=this._model.default_state,u={id:l,text:t.text||"",icon:t.icon===e||t.icon,parent:n,parents:i,children:t.children||[],children_d:t.children_d||[],data:t.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in d)d.hasOwnProperty(a)&&(u.state[a]=d[a]);if(t&&t.data&&t.data.jstree&&t.data.jstree.icon&&(u.icon=t.data.jstree.icon),t&&t.data&&(u.data=t.data,t.data.jstree))for(a in t.data.jstree)t.data.jstree.hasOwnProperty(a)&&(u.state[a]=t.data.jstree[a]);if(t&&"object"==typeof t.state)for(a in t.state)t.state.hasOwnProperty(a)&&(u.state[a]=t.state[a]);if(t&&"object"==typeof t.li_attr)for(a in t.li_attr)t.li_attr.hasOwnProperty(a)&&(u.li_attr[a]=t.li_attr[a]);if(u.li_attr.id||(u.li_attr.id=l),t&&"object"==typeof t.a_attr)for(a in t.a_attr)t.a_attr.hasOwnProperty(a)&&(u.a_attr[a]=t.a_attr[a]);for(t&&t.children&&!0===t.children&&(u.state.loaded=!1,u.children=[],u.children_d=[]),c[u.id]=u,a=0,r=u.children.length;a<r;a++)s=c[o=this._parse_model_from_flat_json(c[u.children[a]],u.id,i)],u.children_d.push(o),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d));return delete t.data,delete t.children,c[u.id].original=t,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_json:function(t,n,i){i=i?i.concat():[],n&&i.unshift(n);var a,r,o,s,l,c=!1,d=this._model.data,u=this._model.default_state;do{c="j"+this._id+"_"+ ++this._cnt}while(d[c]);for(a in l={id:!1,text:"string"==typeof t?t:"",icon:"object"!=typeof t||t.icon===e||t.icon,parent:n,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},u)u.hasOwnProperty(a)&&(l.state[a]=u[a]);if(t&&t.id&&(l.id=t.id.toString()),t&&t.text&&(l.text=t.text),t&&t.data&&t.data.jstree&&t.data.jstree.icon&&(l.icon=t.data.jstree.icon),t&&t.data&&(l.data=t.data,t.data.jstree))for(a in t.data.jstree)t.data.jstree.hasOwnProperty(a)&&(l.state[a]=t.data.jstree[a]);if(t&&"object"==typeof t.state)for(a in t.state)t.state.hasOwnProperty(a)&&(l.state[a]=t.state[a]);if(t&&"object"==typeof t.li_attr)for(a in t.li_attr)t.li_attr.hasOwnProperty(a)&&(l.li_attr[a]=t.li_attr[a]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),t&&"object"==typeof t.a_attr)for(a in t.a_attr)t.a_attr.hasOwnProperty(a)&&(l.a_attr[a]=t.a_attr[a]);if(t&&t.children&&t.children.length){for(a=0,r=t.children.length;a<r;a++)s=d[o=this._parse_model_from_json(t.children[a],l.id,i)],l.children.push(o),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return t&&t.children&&!0===t.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete t.data,delete t.children,l.original=t,d[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,e,n,i=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),a=document.createElement("UL");for(e=0,n=i.length;e<n;e++)(t=this.redraw_node(i[e],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&a.appendChild(t);this._model.force_full_redraw&&(a.className=this.get_container_ul()[0].className,this.element.empty().append(a)),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:i})},redraw:function(t){t&&(this._model.force_full_redraw=!0),this._redraw()},redraw_node:function(e,n,i){var a=this.get_node(e),r=!1,o=!1,s=!1,l=!1,c=!1,d=!1,h="",f=document,p=this._model.data,m=!1,_=!1,g=null;if(!a)return!1;if("#"===a.id)return this.redraw(!0);if(n=n||0===a.children.length,e=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(a.id[0])?"\\3"+a.id[0]+" "+a.id.substr(1).replace(t.jstree.idregex,"\\$&"):a.id.replace(t.jstree.idregex,"\\$&"))):document.getElementById(a.id))e=t(e),i||((r=e.parent().parent()[0])===this.element[0]&&(r=null),o=e.index()),n||!a.children.length||e.children(".jstree-children").length||(n=!0),n||(s=e.children(".jstree-children")[0]),_=e.attr("aria-selected"),m=e.children(".jstree-anchor")[0]===document.activeElement,e.remove();else if(n=!0,!i){if(!(null===(r="#"!==a.parent?t("#"+a.parent.replace(t.jstree.idregex,"\\$&"),this.element)[0]:null)||r&&p[a.parent].state.opened))return!1;o=t.inArray(a.id,null===r?p["#"].children:p[a.parent].children)}for(l in e=u.cloneNode(!0),h="jstree-node ",a.li_attr)if(a.li_attr.hasOwnProperty(l)){if("id"===l)continue;"class"!==l?e.setAttribute(l,a.li_attr[l]):h+=a.li_attr[l]}for(c in _&&"false"!==_&&e.setAttribute("aria-selected",!0),a.state.loaded&&!a.children.length?h+=" jstree-leaf":(h+=a.state.opened&&a.state.loaded?" jstree-open":" jstree-closed",e.setAttribute("aria-expanded",a.state.opened&&a.state.loaded)),null!==a.parent&&p[a.parent].children[p[a.parent].children.length-1]===a.id&&(h+=" jstree-last"),e.id=a.id,e.className=h,h=(a.state.selected?" jstree-clicked":"")+(a.state.disabled?" jstree-disabled":""),a.a_attr)if(a.a_attr.hasOwnProperty(c)){if("href"===c&&"#"===a.a_attr[c])continue;"class"!==c?e.childNodes[1].setAttribute(c,a.a_attr[c]):h+=" "+a.a_attr[c]}if(h.length&&(e.childNodes[1].className="jstree-anchor "+h),(a.icon&&!0!==a.icon||!1===a.icon)&&(!1===a.icon?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===a.icon.indexOf("/")&&-1===a.icon.indexOf(".")?e.childNodes[1].childNodes[0].className+=" "+a.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage="url("+a.icon+")",e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?e.childNodes[1].appendChild(f.createTextNode(a.text)):e.childNodes[1].innerHTML+=a.text,n&&a.children.length&&a.state.opened&&a.state.loaded){for((d=f.createElement("UL")).setAttribute("role","group"),d.className="jstree-children",l=0,c=a.children.length;l<c;l++)d.appendChild(this.redraw_node(a.children[l],n,!0));e.appendChild(d)}if(s&&e.appendChild(s),!i){for(r||(r=this.element[0]),l=0,c=r.childNodes.length;l<c;l++)if(r.childNodes[l]&&r.childNodes[l].className&&-1!==r.childNodes[l].className.indexOf("jstree-children")){g=r.childNodes[l];break}g||((g=f.createElement("UL")).setAttribute("role","group"),g.className="jstree-children",r.appendChild(g)),o<(r=g).childNodes.length?r.insertBefore(e,r.childNodes[o]):r.appendChild(e),m&&e.childNodes[1].focus()}return a.state.opened&&!a.state.loaded&&(a.state.opened=!1,setTimeout(t.proxy((function(){this.open_node(a.id,!1,0)}),this),0)),e},open_node:function(n,i,a){var r,o,s,l;if(t.isArray(n)){for(r=0,o=(n=n.slice()).length;r<o;r++)this.open_node(n[r],i,a);return!0}if(!(n=this.get_node(n))||"#"===n.id)return!1;if(a=a===e?this.settings.core.animation:a,!this.is_closed(n))return i&&i.call(this,n,!1),!1;if(this.is_loaded(n))s=this.get_node(n,!0),l=this,s.length&&(n.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&(n.state.opened=!0,this.redraw_node(n,!0),s=this.get_node(n,!0)),a?(this.trigger("before_open",{node:n}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(a,(function(){this.style.display="",l.trigger("after_open",{node:n})}))):(this.trigger("before_open",{node:n}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,i&&i.call(this,n,!0),s.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),a&&s.length||this.trigger("after_open",{node:n});else{if(this.is_loading(n))return setTimeout(t.proxy((function(){this.open_node(n,i,a)}),this),500);this.load_node(n,(function(t,e){return e?this.open_node(t,i,a):!!i&&i.call(this,t,!1)}))}},_open_to:function(e){if(!(e=this.get_node(e))||"#"===e.id)return!1;var n,i,a=e.parents;for(n=0,i=a.length;n<i;n+=1)"#"!==n&&this.open_node(a[n],!1,0);return t("#"+e.id.replace(t.jstree.idregex,"\\$&"),this.element)},close_node:function(n,i){var a,r,o,s;if(t.isArray(n)){for(a=0,r=(n=n.slice()).length;a<r;a++)this.close_node(n[a],i);return!0}return!(!(n=this.get_node(n))||"#"===n.id)&&(!this.is_closed(n)&&(i=i===e?this.settings.core.animation:i,o=this,(s=this.get_node(n,!0)).length&&(i?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(i,(function(){this.style.display="",s.children(".jstree-children").remove(),o.trigger("after_close",{node:n})})):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove())),n.state.opened=!1,this.trigger("close_node",{node:n}),void(i&&s.length||this.trigger("after_close",{node:n}))))},toggle_node:function(e){var n,i;if(t.isArray(e)){for(n=0,i=(e=e.slice()).length;n<i;n++)this.toggle_node(e[n]);return!0}return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(t,e,n){if(t||(t="#"),!(t=this.get_node(t)))return!1;var i,a,r,o="#"===t.id?this.get_container_ul():this.get_node(t,!0);if(!o.length){for(i=0,a=t.children_d.length;i<a;i++)this.is_closed(this._model.data[t.children_d[i]])&&(this._model.data[t.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:t})}n=n||o,r=this,(o=this.is_closed(t)?o.find(".jstree-closed").addBack():o.find(".jstree-closed")).each((function(){r.open_node(this,(function(t,i){i&&this.is_parent(t)&&this.open_all(t,e,n)}),e||0)})),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(e,n){if(e||(e="#"),!(e=this.get_node(e)))return!1;var i,a,r="#"===e.id?this.get_container_ul():this.get_node(e,!0),o=this;if(!r.length){for(i=0,a=e.children_d.length;i<a;i++)this._model.data[e.children_d[i]].state.opened=!1;return this.trigger("close_all",{node:e})}r=this.is_open(e)?r.find(".jstree-open").addBack():r.find(".jstree-open"),t(r.get().reverse()).each((function(){o.close_node(this,n||0)})),this.trigger("close_all",{node:e})},is_disabled:function(t){return(t=this.get_node(t))&&t.state&&t.state.disabled},enable_node:function(e){var n,i;if(t.isArray(e)){for(n=0,i=(e=e.slice()).length;n<i;n++)this.enable_node(e[n]);return!0}if(!(e=this.get_node(e))||"#"===e.id)return!1;e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled"),this.trigger("enable_node",{node:e})},disable_node:function(e){var n,i;if(t.isArray(e)){for(n=0,i=(e=e.slice()).length;n<i;n++)this.disable_node(e[n]);return!0}if(!(e=this.get_node(e))||"#"===e.id)return!1;e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled"),this.trigger("disable_node",{node:e})},activate_node:function(t,n){if(this.is_disabled(t))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==e?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(t)&&this.get_parent(t)===this._data.core.last_clicked.parent))if(n.shiftKey){var i,a,r=this.get_node(t).id,o=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(i=0,a=s.length;i<a;i+=1)s[i]===r&&(l=!l),s[i]===o&&(l=!l),l||s[i]===r||s[i]===o?this.select_node(s[i],!1,!1,n):this.deselect_node(s[i],!1,n)}else this.is_selected(t)?this.deselect_node(t,!1,n):this.select_node(t,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(t)?this.deselect_node(t,!1,n):(this.deselect_all(!0),this.select_node(t,!1,!1,n),this._data.core.last_clicked=this.get_node(t));this.trigger("activate_node",{node:this.get_node(t)})},hover_node:function(t){if(!(t=this.get_node(t,!0))||!t.length||t.children(".jstree-hovered").length)return!1;var e=this.element.find(".jstree-hovered"),n=this.element;e&&e.length&&this.dehover_node(e),t.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(t)}),setTimeout((function(){n.attr("aria-activedescendant",t[0].id),t.attr("aria-selected",!0)}),0)},dehover_node:function(t){if(!(t=this.get_node(t,!0))||!t.length||!t.children(".jstree-hovered").length)return!1;t.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(t)})},select_node:function(e,n,i,a){var r,o,s;if(t.isArray(e)){for(o=0,s=(e=e.slice()).length;o<s;o++)this.select_node(e[o],n,i,a);return!0}if(!(e=this.get_node(e))||"#"===e.id)return!1;r=this.get_node(e,!0),e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),i||(r=this._open_to(e)),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:a}),n||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:a}))},deselect_node:function(e,n,i){var a,r,o;if(t.isArray(e)){for(a=0,r=(e=e.slice()).length;a<r;a++)this.deselect_node(e[a],n,i);return!0}if(!(e=this.get_node(e))||"#"===e.id)return!1;o=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=t.vakata.array_remove_item(this._data.core.selected,e.id),o.length&&o.children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:i}),n||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:i}))},select_all:function(t){var e,n,i=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),e=0,n=this._data.core.selected.length;e<n;e++)this._model.data[this._data.core.selected[e]]&&(this._model.data[this._data.core.selected[e]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:i})},deselect_all:function(t){var e,n,i=this._data.core.selected.concat([]);for(e=0,n=this._data.core.selected.length;e<n;e++)this._model.data[this._data.core.selected[e]]&&(this._model.data[this._data.core.selected[e]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked"),this.trigger("deselect_all",{selected:this._data.core.selected,node:i}),t||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:i})},is_selected:function(t){return!(!(t=this.get_node(t))||"#"===t.id)&&t.state.selected},get_selected:function(e){return e?t.map(this._data.core.selected,t.proxy((function(t){return this.get_node(t)}),this)):this._data.core.selected.slice()},get_top_selected:function(e){var n,i,a,r,o=this.get_selected(!0),s={};for(n=0,i=o.length;n<i;n++)s[o[n].id]=o[n];for(n=0,i=o.length;n<i;n++)for(a=0,r=o[n].children_d.length;a<r;a++)s[o[n].children_d[a]]&&delete s[o[n].children_d[a]];for(n in o=[],s)s.hasOwnProperty(n)&&o.push(n);return e?t.map(o,t.proxy((function(t){return this.get_node(t)}),this)):o},get_bottom_selected:function(e){var n,i,a=this.get_selected(!0),r=[];for(n=0,i=a.length;n<i;n++)a[n].children.length||r.push(a[n].id);return e?t.map(r,t.proxy((function(t){return this.get_node(t)}),this)):r},get_state:function(){var t,e={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},
/*!
					'themes' : {
						'name' : this.get_theme(),
						'icons' : this._data.core.themes.icons,
						'dots' : this._data.core.themes.dots
					},
					*/
selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&"#"!==t&&(this._model.data[t].state.opened&&e.core.open.push(t),this._model.data[t].state.selected&&e.core.selected.push(t));return e},set_state:function(n,i){if(n){if(n.core){var a,r,o;if(n.core.open)return t.isArray(n.core.open)?(a=!0,!1,r=this,t.each(n.core.open.concat([]),(function(e,o){r.get_node(o)&&(r.is_loaded(o)?(r.is_closed(o)&&r.open_node(o,!1,0),n&&n.core&&n.core.open&&t.vakata.array_remove_item(n.core.open,o)):(r.is_loading(o)||r.open_node(o,t.proxy((function(e,a){!a&&n&&n.core&&n.core.open&&t.vakata.array_remove_item(n.core.open,e.id),this.set_state(n,i)}),r),0),a=!1))})),a&&(delete n.core.open,this.set_state(n,i)),!1):(delete n.core.open,this.set_state(n,i),!1);if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==e&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==e&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,i),!1;
/*!
					if(state.core.themes) {
						if(state.core.themes.name) {
							this.set_theme(state.core.themes.name);
						}
						if(typeof state.core.themes.dots !== 'undefined') {
							this[ state.core.themes.dots ? "show_dots" : "hide_dots" ]();
						}
						if(typeof state.core.themes.icons !== 'undefined') {
							this[ state.core.themes.icons ? "show_icons" : "hide_icons" ]();
						}
						delete state.core.themes;
						delete state.core.open;
						this.set_state(state, callback);
						return false;
					}
					*/if(n.core.selected)return o=this,this.deselect_all(),t.each(n.core.selected,(function(t,e){o.select_node(e)})),delete n.core.selected,this.set_state(n,i),!1;if(t.isEmptyObject(n.core))return delete n.core,this.set_state(n,i),!1}return!t.isEmptyObject(n)||(n=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(e,n){this._data.core.state=!0===n?{}:this.get_state(),n&&t.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var i=this.get_container_ul()[0].className;e||this.element.html("<ul class='"+i+"'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.load_node("#",(function(e,n){n&&(this.get_container_ul()[0].className=i,this.set_state(t.extend(!0,{},this._data.core.state),(function(){this.trigger("refresh")}))),this._data.core.state=null}))},refresh_node:function(e){if(!(e=this.get_node(e))||"#"===e.id)return!1;var n=[],i=[];this._data.core.selected.concat([]);i.push(e.id),!0===e.state.opened&&n.push(e.id),this.get_node(e,!0).find(".jstree-open").each((function(){n.push(this.id)})),this._load_nodes(i,t.proxy((function(t){this.open_node(n,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:e,nodes:t})}),this))},set_id:function(e,n){if(!(e=this.get_node(e))||"#"===e.id)return!1;var i,a,r=this._model.data;for(n=n.toString(),r[e.parent].children[t.inArray(e.id,r[e.parent].children)]=n,i=0,a=e.parents.length;i<a;i++)r[e.parents[i]].children_d[t.inArray(e.id,r[e.parents[i]].children_d)]=n;for(i=0,a=e.children.length;i<a;i++)r[e.children[i]].parent=n;for(i=0,a=e.children_d.length;i<a;i++)r[e.children_d[i]].parents[t.inArray(e.id,r[e.children_d[i]].parents)]=n;return-1!==(i=t.inArray(e.id,this._data.core.selected))&&(this._data.core.selected[i]=n),(i=this.get_node(e.id,!0))&&i.attr("id",n),delete r[e.id],e.id=n,r[n]=e,!0},get_text:function(t){return!(!(t=this.get_node(t))||"#"===t.id)&&t.text},set_text:function(e,n){var i,a;if(t.isArray(e)){for(i=0,a=(e=e.slice()).length;i<a;i++)this.set_text(e[i],n);return!0}return!(!(e=this.get_node(e))||"#"===e.id)&&(e.text=n,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:n}),!0)},get_json:function(t,e,n){if(!(t=this.get_node(t||"#")))return!1;e&&e.flat&&!n&&(n=[]);var i,a,r={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:t.li_attr,a_attr:t.a_attr,state:{},data:(!e||!e.no_data)&&t.data};if(e&&e.flat?r.parent=t.parent:r.children=[],!e||!e.no_state)for(i in t.state)t.state.hasOwnProperty(i)&&(r.state[i]=t.state[i]);if(e&&e.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id),e&&e.flat&&"#"!==t.id&&n.push(r),!e||!e.no_children)for(i=0,a=t.children.length;i<a;i++)e&&e.flat?this.get_json(t.children[i],e,n):r.children.push(this.get_json(t.children[i],e));return e&&e.flat?n:"#"===t.id?r.children:r},create_node:function(n,i,a,r,o){if(null===n&&(n="#"),!(n=this.get_node(n)))return!1;if(!(a=a===e?"last":a).toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return this.load_node(n,(function(){this.create_node(n,i,a,r,!0)}));var s,l,c,d;switch(i||(i={text:this.get_string("New node")}),i.text===e&&(i.text=this.get_string("New node")),"#"===n.id&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":s=this.get_node(n.parent),a=t.inArray(n.id,s.children),n=s;break;case"after":s=this.get_node(n.parent),a=t.inArray(n.id,s.children)+1,n=s;break;case"inside":case"first":a=0;break;case"last":a=n.children.length;break;default:a||(a=0)}if(a>n.children.length&&(a=n.children.length),i.id||(i.id=!0),!this.check("create_node",i,n,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===i.id&&delete i.id,!(i=this._parse_model_from_json(i,n.id,n.parents.concat())))return!1;for(s=this.get_node(i),(l=[]).push(i),l=l.concat(s.children_d),this.trigger("model",{nodes:l,parent:n.id}),n.children_d=n.children_d.concat(l),c=0,d=n.parents.length;c<d;c++)this._model.data[n.parents[c]].children_d=this._model.data[n.parents[c]].children_d.concat(l);for(i=s,s=[],c=0,d=n.children.length;c<d;c++)s[c>=a?c+1:c]=n.children[c];return s[a]=i.id,n.children=s,this.redraw_node(n,!0),r&&r.call(this,this.get_node(i)),this.trigger("create_node",{node:this.get_node(i),parent:n.id,position:a}),i.id},rename_node:function(e,n){var i,a,r;if(t.isArray(e)){for(i=0,a=(e=e.slice()).length;i<a;i++)this.rename_node(e[i],n);return!0}return!(!(e=this.get_node(e))||"#"===e.id)&&(r=e.text,this.check("rename_node",e,this.get_parent(e),n)?(this.set_text(e,n),this.trigger("rename_node",{node:e,text:n,old:r}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(e){var n,i,a,r,o,s,l,c,d,u;if(t.isArray(e)){for(n=0,i=(e=e.slice()).length;n<i;n++)this.delete_node(e[n]);return!0}if(!(e=this.get_node(e))||"#"===e.id)return!1;if(a=this.get_node(e.parent),r=t.inArray(e.id,a.children),u=!1,!this.check("delete_node",e,a,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==r&&(a.children=t.vakata.array_remove(a.children,r)),(o=e.children_d.concat([])).push(e.id),c=0,d=o.length;c<d;c++){for(s=0,l=e.parents.length;s<l;s++)-1!==(r=t.inArray(o[c],this._model.data[e.parents[s]].children_d))&&(this._model.data[e.parents[s]].children_d=t.vakata.array_remove(this._model.data[e.parents[s]].children_d,r));this._model.data[o[c]].state.selected&&(u=!0,-1!==(r=t.inArray(o[c],this._data.core.selected))&&(this._data.core.selected=t.vakata.array_remove(this._data.core.selected,r)))}for(this.trigger("delete_node",{node:e,parent:a.id}),u&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:a.id}),c=0,d=o.length;c<d;c++)delete this._model.data[o[c]];return this.redraw_node(a,!0),!0},check:function(e,n,i,a,r){n=n&&n.id?n:this.get_node(n),i=i&&i.id?i:this.get_node(i);var o=e.match(/^move_node|copy_node|create_node$/i)?i:n,s=this.settings.core.check_callback;return"move_node"!==e&&"copy_node"!==e||r&&r.is_multi||n.id!==i.id&&t.inArray(n.id,i.children)!==a&&-1===t.inArray(i.id,n.children_d)?(o&&o.data&&(o=o.data),o&&o.functions&&(!1===o.functions[e]||!0===o.functions[e])?(!1===o.functions[e]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})}),o.functions[e]):!(!1===s||t.isFunction(s)&&!1===s.call(this,e,n,i,a,r)||s&&!1===s[e])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!i||!i.id)&&i.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,i,a,r,o){var s,l,c,d,u,h,f,p,m,_,g,v,y,b;if(i=this.get_node(i),a=a===e?0:a,!i)return!1;if(!a.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return this.load_node(i,(function(){this.move_node(n,i,a,r,!0)}));if(t.isArray(n)){for(s=0,l=(n=n.reverse().slice()).length;s<l;s++)this.move_node(n[s],i,a,r,o);return!0}if(!(n=n&&n.id?n:this.get_node(n))||"#"===n.id)return!1;if(c=(n.parent||"#").toString(),u=a.toString().match(/^(before|after)$/)&&"#"!==i.id?this.get_node(i.parent):i,f=!(h=n.instance?n.instance:this._model.data[n.id]?this:t.jstree.reference(n.id))||!h._id||this._id!==h._id,d=h&&h._id&&c&&h._model.data[c]&&h._model.data[c].children?t.inArray(n.id,h._model.data[c].children):-1,f)return!!this.copy_node(n,i,a,r,o)&&(h&&h.delete_node(n),!0);switch("#"===u.id&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":a=t.inArray(i.id,u.children);break;case"after":a=t.inArray(i.id,u.children)+1;break;case"inside":case"first":a=0;break;case"last":a=u.children.length;break;default:a||(a=0)}if(a>u.children.length&&(a=u.children.length),!this.check("move_node",n,u,a,{core:!0,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===u.id){for(p=u.children.concat(),-1!==(m=t.inArray(n.id,p))&&(p=t.vakata.array_remove(p,m),a>m&&a--),m=[],_=0,g=p.length;_<g;_++)m[_>=a?_+1:_]=p[_];m[a]=n.id,u.children=m,this._node_changed(u.id),this.redraw("#"===u.id)}else{for((m=n.children_d.concat()).push(n.id),_=0,g=n.parents.length;_<g;_++){for(p=[],v=0,y=(b=h._model.data[n.parents[_]].children_d).length;v<y;v++)-1===t.inArray(b[v],m)&&p.push(b[v]);h._model.data[n.parents[_]].children_d=p}for(h._model.data[c].children=t.vakata.array_remove_item(h._model.data[c].children,n.id),_=0,g=u.parents.length;_<g;_++)this._model.data[u.parents[_]].children_d=this._model.data[u.parents[_]].children_d.concat(m);for(p=[],_=0,g=u.children.length;_<g;_++)p[_>=a?_+1:_]=u.children[_];for(p[a]=n.id,u.children=p,u.children_d.push(n.id),u.children_d=u.children_d.concat(n.children_d),n.parent=u.id,(m=u.parents.concat()).unshift(u.id),b=n.parents.length,n.parents=m,m=m.concat(),_=0,g=n.children_d.length;_<g;_++)this._model.data[n.children_d[_]].parents=this._model.data[n.children_d[_]].parents.slice(0,-1*b),Array.prototype.push.apply(this._model.data[n.children_d[_]].parents,m);this._node_changed(c),this._node_changed(u.id),this.redraw("#"===c||"#"===u.id)}return r&&r.call(this,n,u,a),this.trigger("move_node",{node:n,parent:u.id,position:a,old_parent:c,old_position:d,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),!0},copy_node:function(n,i,a,r,o){var s,l,c,d,u,h,f,p,m,_;if(i=this.get_node(i),a=a===e?0:a,!i)return!1;if(!a.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return this.load_node(i,(function(){this.copy_node(n,i,a,r,!0)}));if(t.isArray(n)){for(s=0,l=(n=n.reverse().slice()).length;s<l;s++)this.copy_node(n[s],i,a,r,o);return!0}if(!(n=n&&n.id?n:this.get_node(n))||"#"===n.id)return!1;switch(p=(n.parent||"#").toString(),m=a.toString().match(/^(before|after)$/)&&"#"!==i.id?this.get_node(i.parent):i,!(_=n.instance?n.instance:this._model.data[n.id]?this:t.jstree.reference(n.id))||!_._id||this._id!==_._id,"#"===m.id&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":a=t.inArray(i.id,m.children);break;case"after":a=t.inArray(i.id,m.children)+1;break;case"inside":case"first":a=0;break;case"last":a=m.children.length;break;default:a||(a=0)}if(a>m.children.length&&(a=m.children.length),!this.check("copy_node",n,m,a,{core:!0,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(f=_?_.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===f.id&&delete f.id,!(f=this._parse_model_from_json(f,m.id,m.parents.concat())))return!1;for(d=this.get_node(f),n&&n.state&&!1===n.state.loaded&&(d.state.loaded=!1),(c=[]).push(f),c=c.concat(d.children_d),this.trigger("model",{nodes:c,parent:m.id}),u=0,h=m.parents.length;u<h;u++)this._model.data[m.parents[u]].children_d=this._model.data[m.parents[u]].children_d.concat(c);for(c=[],u=0,h=m.children.length;u<h;u++)c[u>=a?u+1:u]=m.children[u];return c[a]=d.id,m.children=c,m.children_d.push(d.id),m.children_d=m.children_d.concat(d.children_d),this._node_changed(m.id),this.redraw("#"===m.id),r&&r.call(this,d,m,a),this.trigger("copy_node",{node:d,original:n,parent:m.id,position:a,old_parent:p,old_position:_&&_._id&&p&&_._model.data[p]&&_._model.data[p].children?t.inArray(n.id,_._model.data[p].children):-1,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id,old_instance:_,new_instance:this}),d.id},cut:function(e){if(e||(e=this._data.core.selected.concat()),t.isArray(e)||(e=[e]),!e.length)return!1;var n,i,a,l=[];for(i=0,a=e.length;i<a;i++)(n=this.get_node(e[i]))&&n.id&&"#"!==n.id&&l.push(n);if(!l.length)return!1;r=l,s=this,o="move_node",this.trigger("cut",{node:e})},copy:function(e){if(e||(e=this._data.core.selected.concat()),t.isArray(e)||(e=[e]),!e.length)return!1;var n,i,a,l=[];for(i=0,a=e.length;i<a;i++)(n=this.get_node(e[i]))&&n.id&&"#"!==n.id&&l.push(n);if(!l.length)return!1;r=l,s=this,o="copy_node",this.trigger("copy",{node:e})},get_buffer:function(){return{mode:o,node:r,inst:s}},can_paste:function(){return!1!==o&&!1!==r},paste:function(t,e){if(!((t=this.get_node(t))&&o&&o.match(/^(copy_node|move_node)$/)&&r))return!1;this[o](r,t,e)&&this.trigger("paste",{parent:t.id,node:r,mode:o}),r=!1,o=!1,s=!1},edit:function(e,n){if(!(e=this.get_node(e)))return!1;if(!1===this.settings.core.check_callback)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;n="string"==typeof n?n:e.text,this.set_text(e,""),e=this._open_to(e);var i=this._data.core.rtl,a=this.element.width(),r=e.children(".jstree-anchor"),o=t("<span>"),
/*!
				oi = obj.children("i:visible"),
				ai = a.children("i:visible"),
				w1 = oi.width() * oi.length,
				w2 = ai.width() * ai.length,
				*/
s=n,l=t("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=t("<input />",{value:s,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:t.proxy((function(){var n=o.children(".jstree-rename-input").val();""===n&&(n=s),l.remove(),o.replaceWith(r),o.remove(),this.set_text(e,s),!1===this.rename_node(e,t("<div></div>").text(n)[this.settings.core.force_text?"text":"html"]())&&this.set_text(e,s)}),this),keydown:function(t){var e=t.which;27===e&&(this.value=s),27!==e&&13!==e&&37!==e&&38!==e&&39!==e&&40!==e&&32!==e||t.stopImmediatePropagation(),27!==e&&13!==e||(t.preventDefault(),this.blur())},click:function(t){t.stopImmediatePropagation()},mousedown:function(t){t.stopImmediatePropagation()},keyup:function(t){c.width(Math.min(l.text("pW"+this.value).width(),a))},keypress:function(t){if(13===t.which)return!1}}),d={fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||"",wordSpacing:r.css("wordSpacing")||""};o.attr("class",r.attr("class")).append(r.contents().clone()).append(c),r.replaceWith(o),l.css(d),c.css(d).width(Math.min(l.text("pW"+c[0].value).width(),a))[0].select()},set_theme:function(e,n){if(!e)return!1;if(!0===n){var i=this.settings.core.themes.dir;i||(i=t.jstree.path+"/themes"),n=i+"/"+e+"/style.css"}n&&-1===t.inArray(n,l)&&(t("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),l.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(t){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=t,t&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(e,n){var i,a,r,o;if(t.isArray(e)){for(i=0,a=(e=e.slice()).length;i<a;i++)this.set_icon(e[i],n);return!0}return!(!(e=this.get_node(e))||"#"===e.id)&&(o=e.icon,e.icon=n,r=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===n?this.hide_icon(e):!0===n?r.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"):-1===n.indexOf("/")&&-1===n.indexOf(".")?(r.removeClass(o).css("background",""),r.addClass(n+" jstree-themeicon-custom").attr("rel",n)):(r.removeClass(o).css("background",""),r.addClass("jstree-themeicon-custom").css("background","url('"+n+"') center center no-repeat").attr("rel",n)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||"#"===t.id)&&t.icon},hide_icon:function(e){var n,i;if(t.isArray(e)){for(n=0,i=(e=e.slice()).length;n<i;n++)this.hide_icon(e[n]);return!0}return!(!(e=this.get_node(e))||"#"===e)&&(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(e){var n,i,a;if(t.isArray(e)){for(n=0,i=(e=e.slice()).length;n<i;n++)this.show_icon(e[n]);return!0}return!(!(e=this.get_node(e))||"#"===e)&&(a=this.get_node(e,!0),e.icon=!a.length||a.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),e.icon||(e.icon=!0),a.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},t.vakata={},t.vakata.attributes=function(e,n){e=t(e)[0];var i=n?{}:[];return e&&e.attributes&&t.each(e.attributes,(function(e,a){-1===t.inArray(a.nodeName.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==a.nodeValue&&""!==t.trim(a.nodeValue)&&(n?i[a.nodeName]=a.nodeValue:i.push(a.nodeName))})),i},t.vakata.array_unique=function(t){var e,n,i,a=[];for(e=0,i=t.length;e<i;e++){for(n=0;n<=e&&t[e]!==t[n];n++);n===e&&a.push(t[e])}return a},t.vakata.array_remove=function(t,e,n){var i=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,i),t},t.vakata.array_remove_item=function(e,n){var i=t.inArray(n,e);return-1!==i?t.vakata.array_remove(e,i):e};var h=document.createElement("I");h.className="jstree-icon jstree-checkbox",t.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},t.jstree.plugins.checkbox=function(e,n){this.bind=function(){n.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",t.proxy((function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")}),this)).on("loading.jstree",t.proxy((function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()}),this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",t.proxy((function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(t.proxy(this._undetermined,this),50)}),this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",t.proxy((function(t,e){var n,i,a=this._model.data,r=(a[e.parent],e.nodes);for(n=0,i=r.length;n<i;n++)a[r[n]].state.checked=a[r[n]].original&&a[r[n]].original.state&&a[r[n]].original.state.checked,a[r[n]].state.checked&&this._data.checkbox.selected.push(r[n])}),this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",t.proxy((function(e,n){var i,a,r,o,s,l,c=this._model.data,d=c[n.parent],u=n.nodes,h=[],f=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(d.state[p?"selected":"checked"]){for(a=0,r=u.length;a<r;a++)c[u[a]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(u)}else for(a=0,r=u.length;a<r;a++)if(c[u[a]].state[p?"selected":"checked"]){for(o=0,s=c[u[a]].children_d.length;o<s;o++)c[c[u[a]].children_d[o]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(c[u[a]].children_d)}if(-1!==f.indexOf("up")){for(a=0,r=d.children_d.length;a<r;a++)c[d.children_d[a]].children.length||h.push(c[d.children_d[a]].parent);for(o=0,s=(h=t.vakata.array_unique(h)).length;o<s;o++)for(d=c[h[o]];d&&"#"!==d.id;){for(i=0,a=0,r=d.children.length;a<r;a++)i+=c[d.children[a]].state[p?"selected":"checked"];if(i!==r)break;d.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(d.id),(l=this.get_node(d,!0))&&l.length&&l.children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}}this._data[p?"core":"checkbox"].selected=t.vakata.array_unique(this._data[p?"core":"checkbox"].selected)}),this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",t.proxy((function(e,n){var i,a,r,o,s=n.node,l=this._model.data,c=this.get_node(s.parent),d=this.get_node(s,!0),u=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(-1!==u.indexOf("down"))for(this._data[h?"core":"checkbox"].selected=t.vakata.array_unique(this._data[h?"core":"checkbox"].selected.concat(s.children_d)),i=0,a=s.children_d.length;i<a;i++)(o=l[s.children_d[i]]).state[h?"selected":"checked"]=!0,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1);if(-1!==u.indexOf("up"))for(;c&&"#"!==c.id;){for(r=0,i=0,a=c.children.length;i<a;i++)r+=l[c.children[i]].state[h?"selected":"checked"];if(r!==a)break;c.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(c.id),(o=this.get_node(c,!0))&&o.length&&o.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}-1!==u.indexOf("down")&&d.length&&d.find(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked")}),this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",t.proxy((function(t,e){var n,i,a,r=this.get_node("#"),o=this._model.data;for(n=0,i=r.children_d.length;n<i;n++)(a=o[r.children_d[n]])&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1)}),this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",t.proxy((function(e,n){var i,a,r,o=n.node,s=this.get_node(o,!0),l=this.settings.checkbox.cascade,c=this.settings.checkbox.tie_selection;if(o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),-1!==l.indexOf("down"))for(i=0,a=o.children_d.length;i<a;i++)(r=this._model.data[o.children_d[i]]).state[c?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(-1!==l.indexOf("up"))for(i=0,a=o.parents.length;i<a;i++)(r=this._model.data[o.parents[i]]).state[c?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),(r=this.get_node(o.parents[i],!0))&&r.length&&r.children(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked");for(r=[],i=0,a=this._data[c?"core":"checkbox"].selected.length;i<a;i++)-1!==l.indexOf("down")&&-1!==t.inArray(this._data[c?"core":"checkbox"].selected[i],o.children_d)||-1!==l.indexOf("up")&&-1!==t.inArray(this._data[c?"core":"checkbox"].selected[i],o.parents)||r.push(this._data[c?"core":"checkbox"].selected[i]);this._data[c?"core":"checkbox"].selected=t.vakata.array_unique(r),-1!==l.indexOf("down")&&s.length&&s.find(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked")}),this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",t.proxy((function(t,e){for(var n,i,a,r,o=this.get_node(e.parent),s=this._model.data,l=this.settings.checkbox.tie_selection;o&&"#"!==o.id;){for(a=0,n=0,i=o.children.length;n<i;n++)a+=s[o.children[n]].state[l?"selected":"checked"];if(a!==i)break;o.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(o.id),(r=this.get_node(o,!0))&&r.length&&r.children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}}),this)).on("move_node.jstree",t.proxy((function(e,n){var i,a,r,o,s,l=n.is_multi,c=n.old_parent,d=this.get_node(n.parent),u=this._model.data,h=this.settings.checkbox.tie_selection;if(!l)for(i=this.get_node(c);i&&"#"!==i.id;){for(a=0,r=0,o=i.children.length;r<o;r++)a+=u[i.children[r]].state[h?"selected":"checked"];if(a!==o)break;i.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(i.id),(s=this.get_node(i,!0))&&s.length&&s.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=d;i&&"#"!==i.id;){for(a=0,r=0,o=i.children.length;r<o;r++)a+=u[i.children[r]].state[h?"selected":"checked"];if(a===o)i.state[h?"selected":"checked"]||(i.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(i.id),(s=this.get_node(i,!0))&&s.length&&s.children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"));else{if(!i.state[h?"selected":"checked"])break;i.state[h?"selected":"checked"]=!1,this._data[h?"core":"checkbox"].selected=t.vakata.array_remove_item(this._data[h?"core":"checkbox"].selected,i.id),(s=this.get_node(i,!0))&&s.length&&s.children(".jstree-anchor").removeClass(h?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}}),this))},this._undetermined=function(){var e,n,i=this._model.data,a=this.settings.checkbox.tie_selection,r=this._data[a?"core":"checkbox"].selected,o=[],s=this;for(e=0,n=r.length;e<n;e++)i[r[e]]&&i[r[e]].parents&&(o=o.concat(i[r[e]].parents));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each((function(){var t,a=s.get_node(this);if(a.state.loaded)for(e=0,n=a.children_d.length;e<n;e++)!(t=i[a.children_d[e]]).state.loaded&&t.original&&t.original.state&&t.original.state.undetermined&&!0===t.original.state.undetermined&&(o.push(t.id),o=o.concat(t.parents));else a.original&&a.original.state&&a.original.state.undetermined&&!0===a.original.state.undetermined&&(o.push(a.id),o=o.concat(a.parents))})),o=t.vakata.array_unique(o),o=t.vakata.array_remove_item(o,"#"),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,n=o.length;e<n;e++)i[o[e]].state[a?"selected":"checked"]||(r=this.get_node(o[e],!0))&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")},this.redraw_node=function(e,i,a){if(e=n.redraw_node.call(this,e,i,a)){var r,o,s=null;for(r=0,o=e.childNodes.length;r<o;r++)if(e.childNodes[r]&&e.childNodes[r].className&&-1!==e.childNodes[r].className.indexOf("jstree-anchor")){s=e.childNodes[r];break}s&&(!this.settings.checkbox.tie_selection&&this._model.data[e.id].state.checked&&(s.className+=" jstree-checked"),s.insertBefore(h.cloneNode(!1),s.childNodes[0]))}return a||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(t.proxy(this._undetermined,this),50)),e},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(e){e=this.get_node(e);var n,i,a=this.settings.checkbox.cascade,r=this.settings.checkbox.tie_selection,o=this._data[r?"core":"checkbox"].selected,s=this._model.data;if(!e||!0===e.state[r?"selected":"checked"]||-1===a.indexOf("undetermined")||-1===a.indexOf("down")&&-1===a.indexOf("up"))return!1;if(!e.state.loaded&&!0===e.original.state.undetermined)return!0;for(n=0,i=e.children_d.length;n<i;n++)if(-1!==t.inArray(e.children_d[n],o)||!s[e.children_d[n]].state.loaded&&s[e.children_d[n]].original.state.undetermined)return!0;return!1},this.activate_node=function(e,i){if(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||t(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!t(i.target).hasClass("jstree-checkbox"))return n.activate_node.call(this,e,i);this.is_checked(e)?this.uncheck_node(e,i):this.check_node(e,i),this.trigger("activate_node",{node:this.get_node(e)})},this.check_node=function(e,n){if(this.settings.checkbox.tie_selection)return this.select_node(e,!1,!0,n);var i,a,r;if(t.isArray(e)){for(a=0,r=(e=e.slice()).length;a<r;a++)this.check_node(e[a],n);return!0}if(!(e=this.get_node(e))||"#"===e.id)return!1;i=this.get_node(e,!0),e.state.checked||(e.state.checked=!0,this._data.checkbox.selected.push(e.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:e,selected:this._data.checkbox.selected,event:n}))},this.uncheck_node=function(e,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(e,!1,n);var i,a,r;if(t.isArray(e)){for(i=0,a=(e=e.slice()).length;i<a;i++)this.uncheck_node(e[i],n);return!0}if(!(e=this.get_node(e))||"#"===e.id)return!1;r=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=t.vakata.array_remove_item(this._data.checkbox.selected,e.id),r.length&&r.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:n}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,e;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data["#"].children_d.concat(),t=0,e=this._data.checkbox.selected.length;t<e;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var t,e,n=this._data.checkbox.selected.concat([]);for(t=0,e=this._data.checkbox.selected.length;t<e;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||"#"===t.id)&&t.state.checked},this.get_checked=function(e){return this.settings.checkbox.tie_selection?this.get_selected(e):e?t.map(this._data.checkbox.selected,t.proxy((function(t){return this.get_node(t)}),this)):this._data.checkbox.selected},this.get_top_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_top_selected(e);var n,i,a,r,o=this.get_checked(!0),s={};for(n=0,i=o.length;n<i;n++)s[o[n].id]=o[n];for(n=0,i=o.length;n<i;n++)for(a=0,r=o[n].children_d.length;a<r;a++)s[o[n].children_d[a]]&&delete s[o[n].children_d[a]];for(n in o=[],s)s.hasOwnProperty(n)&&o.push(n);return e?t.map(o,t.proxy((function(t){return this.get_node(t)}),this)):o},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(e);var n,i,a=this.get_checked(!0),r=[];for(n=0,i=a.length;n<i;n++)a[n].children.length||r.push(a[n].id);return e?t.map(r,t.proxy((function(t){return this.get_node(t)}),this)):r}},t.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(e,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var n=t.jstree.reference(e.reference),i=n.get_node(e.reference);n.create_node(i,{},"last",(function(t){setTimeout((function(){n.edit(t)}),0)}))}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var n=t.jstree.reference(e.reference),i=n.get_node(e.reference);n.edit(i)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var n=t.jstree.reference(e.reference),i=n.get_node(e.reference);n.is_selected(i)?n.delete_node(n.get_selected()):n.delete_node(i)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var n=t.jstree.reference(e.reference),i=n.get_node(e.reference);n.is_selected(i)?n.cut(n.get_selected()):n.cut(i)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var n=t.jstree.reference(e.reference),i=n.get_node(e.reference);n.is_selected(i)?n.copy(n.get_selected()):n.copy(i)}},paste:{separator_before:!1,icon:!1,_disabled:function(e){return!t.jstree.reference(e.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var n=t.jstree.reference(e.reference),i=n.get_node(e.reference);n.paste(i)}}}}}}},t.jstree.plugins.contextmenu=function(n,i){this.bind=function(){i.bind.call(this);var e=0;this.element.on("contextmenu.jstree",".jstree-anchor",t.proxy((function(t){t.preventDefault(),e=t.ctrlKey?t.timeStamp:0,this.is_loading(t.currentTarget)||this.show_contextmenu(t.currentTarget,t.pageX,t.pageY,t)}),this)).on("click.jstree",".jstree-anchor",t.proxy((function(n){this._data.contextmenu.visible&&(!e||n.timeStamp-e>250)&&t.vakata.context.hide()}),this)),t(document).on("context_hide.vakata",t.proxy((function(){this._data.contextmenu.visible=!1}),this))},this.teardown=function(){this._data.contextmenu.visible&&t.vakata.context.hide(),i.teardown.call(this)},this.show_contextmenu=function(n,i,a,r){if(!(n=this.get_node(n))||"#"===n.id)return!1;var o=this.settings.contextmenu,s=this.get_node(n,!0).children(".jstree-anchor"),l=!1,c=!1;(o.show_at_node||i===e||a===e)&&(l=s.offset(),i=l.left,a=l.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,r),c=o.items,t.isFunction(c)&&(c=c.call(this,n,t.proxy((function(t){this._show_contextmenu(n,i,a,t)}),this))),t.isPlainObject(c)&&this._show_contextmenu(n,i,a,c)},this._show_contextmenu=function(e,n,i,a){var r=this.get_node(e,!0).children(".jstree-anchor");t(document).one("context_show.vakata",t.proxy((function(e,n){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";t(n.element).addClass(i)}),this)),this._data.contextmenu.visible=!0,t.vakata.context.show(r,{x:n,y:i},a),this.trigger("show_contextmenu",{node:e,x:n,y:i})}},function(t){var e=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};t.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(e){t(document).triggerHandler("context_"+e+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(e){return!(!(e=n.items[e])||e._disabled&&(!t.isFunction(e._disabled)||e._disabled({item:e,reference:n.reference,element:n.element}))||!e.action)&&e.action.call(null,{item:e,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(e,i){if(!e)return!1;i||(n.html="",n.items=[]);var a,r="",o=!1;return i&&(r+="<ul>"),t.each(e,(function(e,i){if(!i)return!0;n.items.push(i),!o&&i.separator_before&&(r+="<li class='vakata-context-separator'><a href='#' "+(t.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),o=!1,r+="<li class='"+(i._class||"")+(!0===i._disabled||t.isFunction(i._disabled)&&i._disabled({item:i,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(i.shortcut?" data-shortcut='"+i.shortcut+"' ":"")+">",r+="<a href='#' rel='"+(n.items.length-1)+"'>",t.vakata.context.settings.icons&&(r+="<i ",i.icon&&(-1!==i.icon.indexOf("/")||-1!==i.icon.indexOf(".")?r+=" style='background:url(\""+i.icon+"\") center center no-repeat' ":r+=" class='"+i.icon+"' "),r+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),r+=(t.isFunction(i.label)?i.label({item:e,reference:n.reference,element:n.element}):i.label)+(i.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+i.shortcut+'">'+(i.shortcut_label||"")+"</span>":"")+"</a>",i.submenu&&(a=t.vakata.context._parse(i.submenu,!0))&&(r+=a),r+="</li>",i.separator_after&&(r+="<li class='vakata-context-separator'><a href='#' "+(t.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",o=!0)})),r=r.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),i&&(r+="</ul>"),i||(n.html=r,t.vakata.context._trigger("parse")),r.length>10&&r},_show_submenu:function(n){if((n=t(n)).length&&n.children("ul").length){var i=n.children("ul"),a=n.offset().left+n.outerWidth(),r=n.offset().top,o=i.width(),s=i.height(),l=t(window).width()+t(window).scrollLeft(),c=t(window).height()+t(window).scrollTop();e?n[a-(o+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[a+o+10>l?"addClass":"removeClass"]("vakata-context-right"),r+s+10>c&&i.css("bottom","-1px"),i.show()}},show:function(i,a,r){var o,s,l,c,d,u,h,f;switch(n.element&&n.element.length&&n.element.width(""),!0){case!a&&!i:return!1;case!!a&&!!i:n.reference=i,n.position_x=a.x,n.position_y=a.y;break;case!a&&!!i:n.reference=i,o=i.offset(),n.position_x=o.left+i.outerHeight(),n.position_y=o.top;break;case!!a&&!i:n.position_x=a.x,n.position_y=a.y}i&&!r&&t(i).data("vakata_contextmenu")&&(r=t(i).data("vakata_contextmenu")),t.vakata.context._parse(r)&&n.element.html(n.html),n.items.length&&(s=n.element,l=n.position_x,c=n.position_y,d=s.width(),u=s.height(),h=t(window).width()+t(window).scrollLeft(),f=t(window).height()+t(window).scrollTop(),e&&(l-=s.outerWidth())<t(window).scrollLeft()+20&&(l=t(window).scrollLeft()+20),l+d+20>h&&(l=h-(d+20)),c+u+20>f&&(c=f-(u+20)),n.element.css({left:l,top:c}).show().find("a:eq(0)").focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,t.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur(),n.is_visible=!1,t.vakata.context._trigger("hide"))}},t((function(){e="rtl"===t("body").css("direction");var i=!1;n.element=t("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",(function(e){e.stopImmediatePropagation(),t.contains(this,e.relatedTarget)||(i&&clearTimeout(i),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),t(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),t.vakata.context._show_submenu(this))})).on("mouseleave","li",(function(e){t.contains(this,e.relatedTarget)||t(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")})).on("mouseleave",(function(e){t(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),t.vakata.context.settings.hide_onmouseleave&&(i=setTimeout((function(){t.vakata.context.hide()}),t.vakata.context.settings.hide_onmouseleave))})).on("click","a",(function(e){e.preventDefault(),t(this).blur().parent().hasClass("vakata-context-disabled")||!1===t.vakata.context._execute(t(this).attr("rel"))||t.vakata.context.hide()})).on("keydown","a",(function(e){var i=null;switch(e.which){case 13:case 32:e.type="mouseup",e.preventDefault(),t(e.currentTarget).trigger(e);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 38:n.is_visible&&((i=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(i=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),i.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 40:n.is_visible&&((i=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(i=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),i.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 27:t.vakata.context.hide(),e.preventDefault()}})).on("keydown",(function(t){t.preventDefault();var e=n.element.find(".vakata-contextmenu-shortcut-"+t.which).parent();e.parent().not(".vakata-context-disabled")&&e.mouseup()})).appendTo("body"),t(document).on("mousedown",(function(e){n.is_visible&&!t.contains(n.element[0],e.target)&&t.vakata.context.hide()})).on("context_show.vakata",(function(t,i){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),e&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()}))}))}(t),t.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0},t.jstree.plugins.dnd=function(e,n){this.bind=function(){n.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",t.proxy((function(e){var n=this.get_node(e.target),i=this.is_selected(n)?this.get_selected().length:1;if(n&&n.id&&"#"!==n.id&&(1===e.which||"touchstart"===e.type)&&(!0===this.settings.dnd.is_draggable||t.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,i>1?this.get_selected(!0):[n])))return this.element.trigger("mousedown.jstree"),t.vakata.dnd.start(e,{jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:i>1?this.get_selected():[n.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+(i>1?i+" "+this.get_string("nodes"):this.get_text(e.currentTarget,!0))+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}),this))}},t((function(){var e=!1,n=!1,i=!1,a=t('<div id="jstree-marker">&#160;</div>').hide().appendTo("body");t(document).bind("dnd_start.vakata",(function(t,n){e=!1})).bind("dnd_move.vakata",(function(r,o){if(i&&clearTimeout(i),o&&o.data&&o.data.jstree&&(!o.event.target.id||"jstree-marker"!==o.event.target.id)){var s,l,c,d,u,h,f,p,m,_,g,v,y,b,w=t.jstree.reference(o.event.target),k=!1,x=!1,S=!1;if(w&&w._data&&w._data.dnd)if(a.attr("class","jstree-"+w.get_theme()+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")),o.helper.children().attr("class","jstree-"+w.get_theme()+(w.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy:eq(0)")[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"show":"hide"](),o.event.target!==w.element[0]&&o.event.target!==w.get_container_ul()[0]||0!==w.get_container_ul().children().length){if((k=t(o.event.target).closest(".jstree-anchor"))&&k.length&&k.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(x=k.offset(),S=o.event.pageY-x.top,c=k.height(),h=S<c/3?["b","i","a"]:S>c-c/3?["a","i","b"]:S>c/2?["i","a","b"]:["i","b","a"],t.each(h,(function(r,S){switch(S){case"b":s=x.left-6,l=x.top,d=w.get_parent(k),u=k.parent().index();break;case"i":y=w.settings.dnd.inside_pos,b=w.get_node(k.parent()),s=x.left-2,l=x.top+c/2+1,d=b.id,u="first"===y?0:"last"===y?b.children.length:Math.min(y,b.children.length);break;case"a":s=x.left-6,l=x.top+c,d=w.get_parent(k),u=k.parent().index()+1}
/*!
								// TODO: moving inside, but the node is not yet loaded?
								// the check will work anyway, as when moving the node will be loaded first and checked again
								if(v === 'i' && !ins.is_loaded(p)) { }
								*/for(f=!0,p=0,m=o.data.nodes.length;p<m;p++)if(_=o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node",g=u,"move_node"===_&&"a"===S&&o.data.origin&&o.data.origin===w&&d===w.get_parent(o.data.nodes[p])&&(v=w.get_node(d),g>t.inArray(o.data.nodes[p],v.children)&&(g-=1)),!(f=f&&(w&&w.settings&&w.settings.dnd&&!1===w.settings.dnd.check_while_dragging||w.check(_,o.data.origin&&o.data.origin!==w?o.data.origin.get_node(o.data.nodes[p]):o.data.nodes[p],d,g,{dnd:!0,ref:w.get_node(k.parent()),pos:S,is_multi:o.data.origin&&o.data.origin!==w,is_foreign:!o.data.origin})))){w&&w.last_error&&(n=w.last_error());break}if(f)return"i"===S&&k.parent().is(".jstree-closed")&&w.settings.dnd.open_timeout&&(i=setTimeout(function(t,e){return function(){t.open_node(e)}}(w,k),w.settings.dnd.open_timeout)),e={ins:w,par:d,pos:"i"!==S||"last"!==y||0!==u||w.is_loaded(b)?u:"last"},a.css({left:s+"px",top:l+"px"}).show(),o.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok"),n={},h=!0,!1})),!0===h))return}else{for(f=!0,p=0,m=o.data.nodes.length;p<m&&(f=f&&w.check(o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node",o.data.origin&&o.data.origin!==w?o.data.origin.get_node(o.data.nodes[p]):o.data.nodes[p],"#","last",{dnd:!0,ref:w.get_node("#"),pos:"i",is_multi:o.data.origin&&o.data.origin!==w,is_foreign:!o.data.origin}));p++);if(f)return e={ins:w,par:"#",pos:"last"},a.hide(),void o.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok")}e=!1,o.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),a.hide()}})).bind("dnd_scroll.vakata",(function(t,n){n&&n.data&&n.data.jstree&&(a.hide(),e=!1,n.helper.find(".jstree-icon:eq(0)").removeClass("jstree-ok").addClass("jstree-er"))})).bind("dnd_stop.vakata",(function(r,o){if(i&&clearTimeout(i),o&&o.data&&o.data.jstree){a.hide();var s,l,c=[];if(e){for(s=0,l=o.data.nodes.length;s<l;s++)c[s]=o.data.origin?o.data.origin.get_node(o.data.nodes[s]):o.data.nodes[s],o.data.origin&&(c[s].instance=o.data.origin);e.ins[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node"](c,e.par,e.pos)}else(s=t(o.event.target).closest(".jstree")).length&&n&&n.error&&"check"===n.error&&(s=s.jstree(!0))&&s.settings.core.error.call(this,n)}})).bind("keyup keydown",(function(e,n){(n=t.vakata.dnd._get())&&n.data&&n.data.jstree&&n.helper.find(".jstree-copy:eq(0)")[n.data.origin&&(n.data.origin.settings.dnd.always_copy||n.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"]()}))})),function(t){var e={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};t.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(e,n){var i=t.vakata.dnd._get();i.event=n,t(document).triggerHandler("dnd_"+e+".vakata",i)},_get:function(){return{data:e.data,element:e.element,helper:e.helper}},_clean:function(){e.helper&&e.helper.remove(),e.scroll_i&&(clearInterval(e.scroll_i),e.scroll_i=!1),e={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},t(document).off("mousemove touchmove",t.vakata.dnd.drag),t(document).off("mouseup touchend",t.vakata.dnd.stop)},_scroll:function(n){if(!e.scroll_e||!e.scroll_l&&!e.scroll_t)return e.scroll_i&&(clearInterval(e.scroll_i),e.scroll_i=!1),!1;if(!e.scroll_i)return e.scroll_i=setInterval(t.vakata.dnd._scroll,100),!1;if(!0===n)return!1;var i=e.scroll_e.scrollTop(),a=e.scroll_e.scrollLeft();e.scroll_e.scrollTop(i+e.scroll_t*t.vakata.dnd.settings.scroll_speed),e.scroll_e.scrollLeft(a+e.scroll_l*t.vakata.dnd.settings.scroll_speed),i===e.scroll_e.scrollTop()&&a===e.scroll_e.scrollLeft()||t.vakata.dnd._trigger("scroll",e.scroll_e)},start:function(n,i,a){"touchstart"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),e.is_drag&&t.vakata.dnd.stop({});try{n.currentTarget.unselectable="on",n.currentTarget.onselectstart=function(){return!1},n.currentTarget.style&&(n.currentTarget.style.MozUserSelect="none")}catch(t){}return e.init_x=n.pageX,e.init_y=n.pageY,e.data=i,e.is_down=!0,e.element=n.currentTarget,e.target=n.target,e.is_touch="touchstart"===n.type,!1!==a&&(e.helper=t("<div id='vakata-dnd'></div>").html(a).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),t(document).bind("mousemove touchmove",t.vakata.dnd.drag),t(document).bind("mouseup touchend",t.vakata.dnd.stop),!1},drag:function(n){if("touchmove"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),e.is_down){if(!e.is_drag){if(!(Math.abs(n.pageX-e.init_x)>(e.is_touch?t.vakata.dnd.settings.threshold_touch:t.vakata.dnd.settings.threshold)||Math.abs(n.pageY-e.init_y)>(e.is_touch?t.vakata.dnd.settings.threshold_touch:t.vakata.dnd.settings.threshold)))return;e.helper&&(e.helper.appendTo("body"),e.helper_w=e.helper.outerWidth()),e.is_drag=!0,t.vakata.dnd._trigger("start",n)}var i=!1,a=!1,r=!1,o=!1,s=!1,l=!1,c=!1,d=!1,u=!1,h=!1;return e.scroll_t=0,e.scroll_l=0,e.scroll_e=!1,t(t(n.target).parentsUntil("body").addBack().get().reverse()).filter((function(){return/^auto|scroll$/.test(t(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)})).each((function(){var i=t(this),a=i.offset();if(this.scrollHeight>this.offsetHeight&&(a.top+i.height()-n.pageY<t.vakata.dnd.settings.scroll_proximity&&(e.scroll_t=1),n.pageY-a.top<t.vakata.dnd.settings.scroll_proximity&&(e.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(a.left+i.width()-n.pageX<t.vakata.dnd.settings.scroll_proximity&&(e.scroll_l=1),n.pageX-a.left<t.vakata.dnd.settings.scroll_proximity&&(e.scroll_l=-1)),e.scroll_t||e.scroll_l)return e.scroll_e=t(this),!1})),e.scroll_e||(i=t(document),a=t(window),r=i.height(),o=a.height(),s=i.width(),l=a.width(),c=i.scrollTop(),d=i.scrollLeft(),r>o&&n.pageY-c<t.vakata.dnd.settings.scroll_proximity&&(e.scroll_t=-1),r>o&&o-(n.pageY-c)<t.vakata.dnd.settings.scroll_proximity&&(e.scroll_t=1),s>l&&n.pageX-d<t.vakata.dnd.settings.scroll_proximity&&(e.scroll_l=-1),s>l&&l-(n.pageX-d)<t.vakata.dnd.settings.scroll_proximity&&(e.scroll_l=1),(e.scroll_t||e.scroll_l)&&(e.scroll_e=i)),e.scroll_e&&t.vakata.dnd._scroll(!0),e.helper&&(u=parseInt(n.pageY+t.vakata.dnd.settings.helper_top,10),h=parseInt(n.pageX+t.vakata.dnd.settings.helper_left,10),r&&u+25>r&&(u=r-50),s&&h+e.helper_w>s&&(h=s-(e.helper_w+2)),e.helper.css({left:h+"px",top:u+"px"})),t.vakata.dnd._trigger("move",n),!1}},stop:function(n){if("touchend"===n.type&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(n.pageX=n.originalEvent.changedTouches[0].pageX,n.pageY=n.originalEvent.changedTouches[0].pageY,n.target=document.elementFromPoint(n.originalEvent.changedTouches[0].pageX-window.pageXOffset,n.originalEvent.changedTouches[0].pageY-window.pageYOffset)),e.is_drag)t.vakata.dnd._trigger("stop",n);else if("touchend"===n.type&&n.target===e.target){var i=setTimeout((function(){t(n.target).click()}),100);t(n.target).one("click",(function(){i&&clearTimeout(i)}))}return t.vakata.dnd._clean(),!1}}}(t),t.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},t.jstree.plugins.search=function(e,n){this.bind=function(){n.bind.call(this),this._data.search.str="",this._data.search.dom=t(),this._data.search.res=[],this._data.search.opn=[],this.element.on("before_open.jstree",t.proxy((function(e,n){var i,a,r=this._data.search.res,o=[],s=t();if(r&&r.length&&(this._data.search.dom=t(this.element[0].querySelectorAll("#"+t.map(r,(function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(t.jstree.idregex,"\\$&"):e.replace(t.jstree.idregex,"\\$&")})).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this.settings.search.show_only_matches&&this._data.search.res.length)){for(i=0,a=r.length;i<a;i++)o=o.concat(this.get_node(r[i]).parents);s=(o=t.vakata.array_remove_item(t.vakata.array_unique(o),"#")).length?t(this.element[0].querySelectorAll("#"+t.map(o,(function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(t.jstree.idregex,"\\$&"):e.replace(t.jstree.idregex,"\\$&")})).join(", #"))):t(),this.element.find(".jstree-node").hide().filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last"),(s=s.add(this._data.search.dom)).parentsUntil(".jstree").addBack().show().filter(".jstree-children").each((function(){t(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))}}),this)),this.settings.search.show_only_matches&&this.element.on("search.jstree",(function(e,n){n.nodes.length&&(t(this).find(".jstree-node").hide().filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last"),n.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each((function(){t(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})))})).on("clear_search.jstree",(function(e,n){n.nodes.length&&t(this).find(".jstree-node").css("display","").filter(".jstree-last").filter((function(){return this.nextSibling})).removeClass("jstree-last")}))},this.search=function(e,n){if(!1===e||""===t.trim(e.toString()))return this.clear_search();e=e.toString();var i=this.settings.search,a=!!i.ajax&&i.ajax,r=null,o=[],s=[];if(this._data.search.res.length&&this.clear_search(),!n&&!1!==a)return t.isFunction(a)?a.call(this,e,t.proxy((function(n){n&&n.d&&(n=n.d),this._load_nodes(t.isArray(n)?t.vakata.array_unique(n):[],(function(){this.search(e,!0)}),!0)}),this)):((a=t.extend({},a)).data||(a.data={}),a.data.str=e,t.ajax(a).fail(t.proxy((function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(a)},this.settings.core.error.call(this,this._data.core.last_error)}),this)).done(t.proxy((function(n){n&&n.d&&(n=n.d),this._load_nodes(t.isArray(n)?t.vakata.array_unique(n):[],(function(){this.search(e,!0)}),!0)}),this)));this._data.search.str=e,this._data.search.dom=t(),this._data.search.res=[],this._data.search.opn=[],r=new t.vakata.search(e,!0,{caseSensitive:i.case_sensitive,fuzzy:i.fuzzy}),t.each(this._model.data,(function(t,n){n.text&&(i.search_callback&&i.search_callback.call(this,e,n)||!i.search_callback&&r.search(n.text).isMatch)&&(!i.search_leaves_only||n.state.loaded&&0===n.children.length)&&(o.push(t),s=s.concat(n.parents))})),o.length&&(s=t.vakata.array_unique(s),this._search_open(s),this._data.search.dom=t(this.element[0].querySelectorAll("#"+t.map(o,(function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(t.jstree.idregex,"\\$&"):e.replace(t.jstree.idregex,"\\$&")})).join(", #"))),this._data.search.res=o,this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),this.trigger("search",{nodes:this._data.search.dom,str:e,res:this._data.search.res})},this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=t()},this._search_open=function(e){var n=this;t.each(e.concat([]),(function(i,a){if("#"===a)return!0;try{a=t("#"+a.replace(t.jstree.idregex,"\\$&"),n.element)}catch(t){}a&&a.length&&n.is_closed(a)&&(n._data.search.opn.push(a[0].id),n.open_node(a,(function(){n._search_open(e)}),0))}))}},function(t){t.vakata.search=function(t,e,n){!1!==(n=n||{}).fuzzy&&(n.fuzzy=!0),t=n.caseSensitive?t:t.toLowerCase();var i,a,r,o,s=n.location||0,l=n.distance||100,c=n.threshold||.6,d=t.length;return d>32&&(n.fuzzy=!1),n.fuzzy&&(i=1<<d-1,a=function(){var e={},n=0;for(n=0;n<d;n++)e[t.charAt(n)]=0;for(n=0;n<d;n++)e[t.charAt(n)]|=1<<d-n-1;return e}(),r=function(t,e){var n=t/d,i=Math.abs(s-e);return l?n+i/l:i?1:n}),o=function(e){if(e=n.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!n.fuzzy)return{isMatch:!1,score:1};var o,l,u,h,f,p,m,_,g,v=e.length,y=c,b=e.indexOf(t,s),w=d+v,k=1,x=[];for(-1!==b&&(y=Math.min(r(0,b),y),-1!==(b=e.lastIndexOf(t,s+d))&&(y=Math.min(r(0,b),y))),b=-1,o=0;o<d;o++){for(u=0,h=w;u<h;)r(o,s+h)<=y?u=h:w=h,h=Math.floor((w-u)/2+u);for(w=h,p=Math.max(1,s-h+1),m=Math.min(s+h,v)+d,(_=new Array(m+2))[m+1]=(1<<o)-1,l=m;l>=p;l--)if(g=a[e.charAt(l-1)],_[l]=0===o?(_[l+1]<<1|1)&g:(_[l+1]<<1|1)&g|(f[l+1]|f[l])<<1|1|f[l+1],_[l]&i&&(k=r(o,l-1))<=y){if(y=k,b=l-1,x.push(b),!(b>s))break;p=Math.max(1,2*s-b)}if(r(o+1,s)>y)break;f=_}return{isMatch:b>=0,score:k}},!0===e?{search:o}:o(e)}}(t),t.jstree.defaults.sort=function(t,e){return this.get_text(t)>this.get_text(e)?1:-1},t.jstree.plugins.sort=function(e,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",t.proxy((function(t,e){this.sort(e.parent,!0)}),this)).on("rename_node.jstree create_node.jstree",t.proxy((function(t,e){this.sort(e.parent||e.node.parent,!1),this.redraw_node(e.parent||e.node.parent,!0)}),this)).on("move_node.jstree copy_node.jstree",t.proxy((function(t,e){this.sort(e.parent,!1),this.redraw_node(e.parent,!0)}),this))},this.sort=function(e,n){var i,a;if((e=this.get_node(e))&&e.children&&e.children.length&&(e.children.sort(t.proxy(this.settings.sort,this)),n))for(i=0,a=e.children_d.length;i<a;i++)this.sort(e.children_d[i],!1)}};var f=!1;t.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:!1,filter:!1},t.jstree.plugins.state=function(e,n){this.bind=function(){n.bind.call(this);var e=t.proxy((function(){this.element.on(this.settings.state.events,t.proxy((function(){f&&clearTimeout(f),f=setTimeout(t.proxy((function(){this.save_state()}),this),100)}),this))}),this);this.element.on("ready.jstree",t.proxy((function(t,n){this.element.one("restore_state.jstree",e),this.restore_state()||e()}),this))},this.save_state=function(){var e={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};t.vakata.storage.set(this.settings.state.key,JSON.stringify(e))},this.restore_state=function(){var e=t.vakata.storage.get(this.settings.state.key);if(e)try{e=JSON.parse(e)}catch(t){return!1}return!(e&&e.ttl&&e.sec&&+new Date-e.sec>e.ttl)&&(e&&e.state&&(e=e.state),e&&t.isFunction(this.settings.state.filter)&&(e=this.settings.state.filter.call(this,e)),!!e&&(this.element.one("set_state.jstree",(function(n,i){i.instance.trigger("restore_state",{state:t.extend(!0,{},e)})})),this.set_state(e),!0))},this.clear_state=function(){return t.vakata.storage.del(this.settings.state.key)}},function(t,e){t.vakata.storage={set:function(t,e){return window.localStorage.setItem(t,e)},get:function(t){return window.localStorage.getItem(t)},del:function(t){return window.localStorage.removeItem(t)}}}(t),t.jstree.defaults.types={"#":{},default:{}},t.jstree.plugins.types=function(n,i){this.init=function(t,n){var a,r;if(n&&n.types&&n.types.default)for(a in n.types)if("default"!==a&&"#"!==a&&n.types.hasOwnProperty(a))for(r in n.types.default)n.types.default.hasOwnProperty(r)&&n.types[a][r]===e&&(n.types[a][r]=n.types.default[r]);i.init.call(this,t,n),this._model.data["#"].type="#"},this.refresh=function(t,e){i.refresh.call(this,t,e),this._model.data["#"].type="#"},this.bind=function(){this.element.on("model.jstree",t.proxy((function(t,n){var i,a,r=this._model.data,o=n.nodes,s=this.settings.types,l="default";for(i=0,a=o.length;i<a;i++)l="default",r[o[i]].original&&r[o[i]].original.type&&s[r[o[i]].original.type]&&(l=r[o[i]].original.type),r[o[i]].data&&r[o[i]].data.jstree&&r[o[i]].data.jstree.type&&s[r[o[i]].data.jstree.type]&&(l=r[o[i]].data.jstree.type),r[o[i]].type=l,!0===r[o[i]].icon&&s[l].icon!==e&&(r[o[i]].icon=s[l].icon);r["#"].type="#"}),this)),i.bind.call(this)},this.get_json=function(e,n,a){var r,o,s=this._model.data,l=n?t.extend(!0,{},n,{no_id:!1}):{},c=i.get_json.call(this,e,l,a);if(!1===c)return!1;if(t.isArray(c))for(r=0,o=c.length;r<o;r++)c[r].type=c[r].id&&s[c[r].id]&&s[c[r].id].type?s[c[r].id].type:"default",n&&n.no_id&&(delete c[r].id,c[r].li_attr&&c[r].li_attr.id&&delete c[r].li_attr.id);else c.type=c.id&&s[c.id]&&s[c.id].type?s[c.id].type:"default",n&&n.no_id&&(c=this._delete_ids(c));return c},this._delete_ids=function(e){if(t.isArray(e)){for(var n=0,i=e.length;n<i;n++)e[n]=this._delete_ids(e[n]);return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.children&&t.isArray(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(n,a,r,o,s){if(!1===i.check.call(this,n,a,r,o,s))return!1;a=a&&a.id?a:this.get_node(a),r=r&&r.id?r:this.get_node(r);var l,c,d,u,h=a&&a.id?t.jstree.reference(a.id):null;switch(h=h&&h._model&&h._model.data?h._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===t.inArray(a.id,r.children)){if((l=this.get_rules(r)).max_children!==e&&-1!==l.max_children&&l.max_children===r.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:o,obj:!(!a||!a.id)&&a.id,par:!(!r||!r.id)&&r.id})},!1;if(l.valid_children!==e&&-1!==l.valid_children&&-1===t.inArray(a.type,l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:o,obj:!(!a||!a.id)&&a.id,par:!(!r||!r.id)&&r.id})},!1;if(h&&a.children_d&&a.parents){for(c=0,d=0,u=a.children_d.length;d<u;d++)c=Math.max(c,h[a.children_d[d]].parents.length);c=c-a.parents.length+1}(c<=0||c===e)&&(c=1);do{if(l.max_depth!==e&&-1!==l.max_depth&&l.max_depth<c)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:o,obj:!(!a||!a.id)&&a.id,par:!(!r||!r.id)&&r.id})},!1;r=this.get_node(r.parent),l=this.get_rules(r),c++}while(r)}}return!0},this.get_rules=function(t){if(!(t=this.get_node(t)))return!1;var n=this.get_type(t,!0);return n.max_depth===e&&(n.max_depth=-1),n.max_children===e&&(n.max_children=-1),n.valid_children===e&&(n.valid_children=-1),n},this.get_type=function(e,n){return!!(e=this.get_node(e))&&(n?t.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(n,i){var a,r,o,s,l;if(t.isArray(n)){for(r=0,o=(n=n.slice()).length;r<o;r++)this.set_type(n[r],i);return!0}return a=this.settings.types,n=this.get_node(n),!(!a[i]||!n)&&(s=n.type,l=this.get_icon(n),n.type=i,(!0===l||a[s]&&a[s].icon&&l===a[s].icon)&&this.set_icon(n,a[i].icon===e||a[i].icon),!0)}},t.jstree.defaults.unique={case_sensitive:!1,duplicate:function(t,e){return t+" ("+e+")"}},t.jstree.plugins.unique=function(n,i){this.check=function(e,n,a,r,o){if(!1===i.check.call(this,e,n,a,r,o))return!1;if(n=n&&n.id?n:this.get_node(n),!(a=a&&a.id?a:this.get_node(a))||!a.children)return!0;var s,l,c="rename_node"===e?r:n.text,d=[],u=this.settings.unique.case_sensitive,h=this._model.data;for(s=0,l=a.children.length;s<l;s++)d.push(u?h[a.children[s]].text:h[a.children[s]].text.toLowerCase());switch(u||(c=c.toLowerCase()),e){case"delete_node":return!0;case"rename_node":return(s=-1===t.inArray(c,d)||n.text&&n.text[u?"toString":"toLowerCase"]()===c)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+c+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!a||!a.id)&&a.id})}),s;case"create_node":return(s=-1===t.inArray(c,d))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+c+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!a||!a.id)&&a.id})}),s;case"copy_node":return(s=-1===t.inArray(c,d))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+c+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!a||!a.id)&&a.id})}),s;case"move_node":return(s=n.parent===a.id||-1===t.inArray(c,d))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+c+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!n||!n.id)&&n.id,par:!(!a||!a.id)&&a.id})}),s}return!0},this.create_node=function(n,a,r,o,s){if(!a||a.text===e){if(null===n&&(n="#"),!(n=this.get_node(n)))return i.create_node.call(this,n,a,r,o,s);if(!(r=r===e?"last":r).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return i.create_node.call(this,n,a,r,o,s);a||(a={});var l,c,d,u,h,f=this._model.data,p=this.settings.unique.case_sensitive,m=this.settings.unique.duplicate;for(c=l=this.get_string("New node"),d=[],u=0,h=n.children.length;u<h;u++)d.push(p?f[n.children[u]].text:f[n.children[u]].text.toLowerCase());for(u=1;-1!==t.inArray(p?c:c.toLowerCase(),d);)c=m.call(this,l,++u).toString();a.text=c}return i.create_node.call(this,n,a,r,o,s)}};var p=document.createElement("DIV");p.setAttribute("unselectable","on"),p.className="jstree-wholerow",p.innerHTML="&#160;",t.jstree.plugins.wholerow=function(e,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",t.proxy((function(){this.hide_dots()}),this)).on("init.jstree loading.jstree ready.jstree",t.proxy((function(){this.get_container_ul().addClass("jstree-wholerow-ul")}),this)).on("deselect_all.jstree",t.proxy((function(t,e){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")}),this)).on("changed.jstree",t.proxy((function(t,e){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,i,a=!1;for(n=0,i=e.selected.length;n<i;n++)(a=this.get_node(e.selected[n],!0))&&a.length&&a.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}),this)).on("open_node.jstree",t.proxy((function(t,e){this.get_node(e.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}),this)).on("hover_node.jstree dehover_node.jstree",t.proxy((function(t,e){this.get_node(e.node,!0).children(".jstree-wholerow")["hover_node"===t.type?"addClass":"removeClass"]("jstree-wholerow-hovered")}),this)).on("contextmenu.jstree",".jstree-wholerow",t.proxy((function(e){e.preventDefault();var n=t.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n)}),this)).on("click.jstree",".jstree-wholerow",(function(e){e.stopImmediatePropagation();var n=t.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n).focus()})).on("click.jstree",".jstree-leaf > .jstree-ocl",t.proxy((function(e){e.stopImmediatePropagation();var n=t.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(n).focus()}),this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",t.proxy((function(t){return t.stopImmediatePropagation(),this.hover_node(t.currentTarget),!1}),this)).on("mouseleave.jstree",".jstree-node",t.proxy((function(t){this.dehover_node(t.currentTarget)}),this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(e,i,a){if(e=n.redraw_node.call(this,e,i,a)){var r=p.cloneNode(!0);-1!==t.inArray(e.id,this._data.core.selected)&&(r.className+=" jstree-wholerow-clicked"),e.insertBefore(r,e.childNodes[0])}return e}}})?i.apply(e,a):i)||(t.exports=r)}()},function(t,e,n){"use strict";var i=n(715);n.n(i).a},function(t,e,n){"use strict";var i=n(716);n.n(i).a},function(t,e,n){"use strict";var i=n(717);n.n(i).a},function(t,e,n){"use strict";var i=n(718);n.n(i).a},function(t,e,n){"use strict";var i=n(719);n.n(i).a},function(t,e,n){"use strict";var i=n(720);n.n(i).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(721);n.n(i).a},,function(t,e,n){"use strict";var i=n(722);n.n(i).a},function(t,e,n){"use strict";var i=n(723);n.n(i).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(724);n.n(i).a},function(t,e,n){"use strict";var i=n(725);n.n(i).a},function(t,e,n){"use strict";var i=n(726);n.n(i).a},function(t,e,n){},function(t,e,n){},function(t,e,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var i,a=n(62),r=n(1),o=n(6),s=n(861),l=n.n(s),c=n(644),d=n(0),u=n.n(d),h=n(4),f=n.n(h),p=n(3),m=n(2),_=n.n(m),g=n(10),v=n(19),y=n(74),b=n(237),w=n(109),k=n(8),x=n(7),S=n.n(x),M=function(){clearInterval(i)},C={props:{jobId:{type:String,required:!0}},data:function(){return{entryPoints:[]}},created:function(){this.pollEntryPoints()},beforeDestroy:function(){M()},computed:{interactiveToolsLink:function(){return Object(p.getAppRoot)()+"interactivetool_entry_points/list"}},methods:{pollEntryPoints:function(){var t=this;!function t(e,n,a){M();var r=Object(p.getAppRoot)()+"api/entry_points";S.a.get(r,{params:a}).then((function(r){var o=[],s=!0;r.data.forEach((function(t,e){o.push(t),t.active||(s=!1)})),e(o),s&&0!=o.length||(i=setInterval((function(){t(e,n,a)}),3e3))})).catch(n)}((function(e){t.entryPoints=e}),(function(t){console.error(t)}),{job_id:this.jobId})}}},T=n(5),j=Object(T.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"infomessagelarge"},[0==t.entryPoints.length?n("p",[t._v("\n        Waiting for InteractiveTool result view(s) to become available.\n    ")]):1==t.entryPoints.length?n("p",[t.entryPoints[0].active?n("span",[t._v("\n            There is an InteractiveTool result view available,\n            "),n("a",{attrs:{href:t.entryPoints[0].target}},[t._v("click here to display")]),t._v(".\n        ")]):n("span",[t._v("\n            There is an InteractiveTool result view available, waiting for view to become active...\n        ")])]):n("div",[t._v("\n        There are multiple InteractiveTool result views available:\n        "),n("ul",t._l(t.entryPoints,(function(e){return n("li",{key:e.id},[t._v("\n                "+t._s(e.name)+"\n                "),e.active?n("span",[t._v(" ("),n("a",{attrs:{href:e.target}},[t._v("click here to display")]),t._v(") ")]):n("span",[t._v("\n                    (waiting to become active...)\n                ")])])})),0)]),t._v("\n\n    You may also access all active InteractiveTools from the\n    "),n("a",{attrs:{href:t.interactiveToolsLink}},[t._v("User menu")]),t._v(".\n")])}),[],!1,null,null,null).exports,O=n(13),L=n(169),D=n(68),A=n(86),E={props:{toolId:{type:String,required:!0}},data:function(){return{deprecated:!1,deprecatedMessage:"",showMessage:!1}},created:function(){this.loadRecommendations()},computed:{getToolId:function(){var t=this.toolId||"";if(t.indexOf("/")>0){var e=t.split("/");t=e[e.length-2]}return t}},methods:{loadRecommendations:function(){var t=this,e={tool_sequence:this.getToolId};Object(D.b)(e).then((function(e){Object(L.a)().then((function(n){var i=e.predicted_data;if(t.deprecated=i.is_deprecated,t.deprecatedMessage=i.message,null!==e&&i.children.length>0){var a={},r=i.o_extensions,o=i.children,s=Object(A.b)(o,r,n);s.length>0&&!1===t.deprecated&&(t.showMessage=!0,a.o_extensions=i.o_extensions,a.name=i.name,a.children=s,t.renderD3Tree(a))}}))}))},renderD3Tree:function(t){var e=0,n=null,i=O.select("#tool-recommendation").append("svg").attr("class","tree-size").append("g"),a=i[0][0].parentNode,r=a.clientHeight,o=a.clientWidth,s=parseInt(.15*o);a.setAttribute("viewBox",-s+" 0 "+.5*o+" "+r),a.setAttribute("preserveAspectRatio","xMidYMid meet");var l=O.layout.tree().size([r,o]),c=O.svg.diagonal().projection((function(t){return[t.y,t.x]})),d=function(t){var a=l.nodes(n).reverse(),r=l.links(a);a.forEach((function(t){t.y=t.depth*(o/10)}));var s=i.selectAll("g.node").data(a,(function(t){return t.id||(t.id=++e)})),d=s.enter().append("g").attr("class","node").attr("transform",(function(e){return"translate("+t.y0+","+t.x0+")"})).on("click",u);d.append("circle").attr("r",1e-6),d.append("text").attr("x",(function(t){return t.children||t._children?-10:10})).attr("dy",".35em").attr("text-anchor",(function(t){return t.children||t._children?"end":"start"})).text((function(t){var e=t.name;return e.length>20?e.slice(0,20)+"...":t.name})),d.append("title").text((function(t){return t.children||t._children?t.name:"Open tool - "+t.name})),s.transition().duration(750).attr("transform",(function(t){return"translate("+t.y+","+t.x+")"})).select("circle").attr("r",2.5),s.exit().transition().duration(750).attr("transform",(function(e){return"translate("+t.y+","+t.x+")"})).remove();var h=i.selectAll("path.link").data(r,(function(t){return t.target.id}));h.enter().insert("path","g").attr("class","link").attr("d",(function(e){var n={x:t.x0,y:t.y0};return c({source:n,target:n})})),h.transition().duration(750).attr("d",c),h.exit().transition().duration(750).attr("d",(function(e){var n={x:t.x,y:t.y};return c({source:n,target:n})})).remove(),a.forEach((function(t){t.x0=t.x,t.y0=t.y}))},u=function(t){t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null),d(t);var e=t.id;void 0!==e&&"undefined"!==e&&null!==e&&""!==e&&(document.location.href="".concat(Object(p.getAppRoot)(),"tool_runner?tool_id=").concat(e))};(n=t).x0=parseInt(r/2),n.y0=0,n.children.forEach((function t(e){e.children&&(e._children=e.children,e._children.forEach(t),e.children=null)})),d(n)}}},I=Object(T.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[!t.deprecated&&t.showMessage?n("div",{staticClass:"infomessagelarge"},[n("h4",[t._v("Tool recommendation")]),t._v("\n        You have used "+t._s(t.getToolId)+" tool. For further analysis, you could try using the following/recommended\n        tools. The recommended tools are shown in the decreasing order of their scores predicted using machine\n        learning analysis on workflows. Therefore, tools at the top may be more useful than the ones at the bottom.\n        Please click on one of the following/recommended tools to open its definition.\n    ")]):t.deprecated?n("div",{staticClass:"warningmessagelarge"},[t._v("\n        You have used "+t._s(t.getToolId)+" tool. "+t._s(t.deprecatedMessage)+"\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"tool-recommendation-view",attrs:{id:"tool-recommendation"}})])}),[],!1,null,null,null).exports;function P(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var R={View:f.a.View.extend({initialize:function(t){var e=this,n=Object(o.a)();this.modal=n.modal||new y.a.View,this.form=new b.a(g.b.merge({setupToolMicrodata:!0,listen_to_history:!0,always_refresh:!1,buildmodel:function(t,i){var a=i.model.attributes,r="",o={},s=a.job_id;s?r="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(s,"/build_for_rerun"):(r="".concat(Object(p.getAppRoot)(),"api/tools/").concat(a.id,"/build"),(o=u.a.extend({},n.params)).tool_id&&delete o.tool_id),a.version&&(o.tool_version=a.version),g.b.get({url:r,data:o,success:function(r){if(r.display){var o=a.version||!(!a.tool_id||!a.tool_id.match(/^(toolshed)\./))&&a.tool_id;r.versions&&o&&!r.versions.includes(o.replace(/.*\//,""))&&(r.message="Requested version unavailable."),i.model.set(r),e._customize(i),n.emit.debug("tool-form-base::_buildModel()","Initial tool model ready.",r),t.resolve()}else window.location=Object(p.getAppRoot)()},error:function(e,r){var o=e&&e.err_msg||"Uncaught error.";401==r?window.location="".concat(Object(p.getAppRoot)(),"user/login?").concat(u.a.param({redirect:"".concat(Object(p.getAppRoot)(),"?tool_id=").concat(a.id)})):i.$el.is(":empty")?i.$el.prepend(new v.a.Message({message:o,status:"danger",persistent:!0}).$el):n.modal&&n.modal.show({title:_()("Tool request failed"),body:o,buttons:{Close:function(){n.modal.hide()}}}),n.emit.debug("tool-form-base::_buildModel()","Initial tool model request failed.",e),t.reject()}})},postchange:function(t,e){var i={tool_id:e.model.get("id"),tool_version:e.model.get("version"),inputs:u.a.extend(!0,{},e.data.create())};e.wait(!0),n.emit.debug("tool-form::postchange()","Sending current state.",i),g.b.request({type:"POST",url:"".concat(Object(p.getAppRoot)(),"api/tools/").concat(e.model.get("id"),"/build"),data:i,success:function(i){e.update(i),e.wait(!1),n.emit.debug("tool-form::postchange()","Received new model.",i),t.resolve()},error:function(e){n.emit.debug("tool-form::postchange()","Refresh request failed.",e),t.reject()}})}},t)),this.deferred=this.form.deferred,this.setElement("<div/>"),this.$el.append(this.form.$el)},_customize:function(t){var e=this,n=Object(o.a)(),i=t.model.attributes,a=i.inputs;n.config.server_mail_configured&&!n.user.isAnonymous()&&a.push({name:"send_email_notification",label:_()("Email notification"),type:"boolean",value:"false",ignore:"false",help:_()("Send an email notification when the job completes.")});var r,s,l=new v.a.Button({icon:"fa-check",tooltip:"Execute: ".concat(i.name," (").concat(i.version,")"),title:_()("Execute"),cls:"btn btn-primary",wait_cls:"btn btn-info",onclick:function(){l.wait(),t.portlet.disable(),e.submit(i,(function(){l.unwait(),t.portlet.enable()}))}});(i.buttons={execute:l},i.job_id&&i.job_remap)&&("job_produced_collection_elements"===i.job_remap?(r="Replace elements in collection ?",s="The previous run of this tool failed. Use this option to replace the failed element(s) in the dataset collection that were produced during the previous tool run."):(r="Resume dependencies from this job ?",s="The previous run of this tool failed and other tools were waiting for it to finish successfully. Use this option to resume those tools using the new output(s) of this tool run."),i.inputs.push({label:r,name:"rerun_remap_job_id",type:"select",display:"radio",ignore:"__ignore__",value:"__ignore__",options:[["Yes",i.job_id],["No","__ignore__"]],help:s}));var c={};n.user.attributes.preferences&&"extra_user_preferences"in n.user.attributes.preferences&&(c=JSON.parse(n.user.attributes.preferences.extra_user_preferences)),"true"===("use_cached_job|use_cached_job_checkbox"in c&&c["use_cached_job|use_cached_job_checkbox"])&&i.inputs.push({label:"BETA: Attempt to re-use jobs with identical parameters ?",help:"This may skip executing jobs that you have already run",name:"use_cached_job",type:"select",display:"radio",ignore:"__ignore__",value:"__ignore__",options:[["No",!1],["Yes",!0]]})},submit:function(t,e){var n=this,i=Object(o.a)(),a={history_id:i.currHistoryPanel&&i.currHistoryPanel.model.id,tool_id:t.id,tool_version:t.version,inputs:this.form.data.create()};if(this.form.trigger("reset"),!this.validate(a))return i.emit.debug("tool-form::submit()","Submission canceled. Validation failed."),void(e&&e());if(t.action!=="".concat(Object(p.getAppRoot)(),"tool_runner/index")){var s=u()("<form/>").attr({action:t.action,method:t.method,enctype:t.enctype});return r.default.each(a.inputs,(function(t,e){s.append(u()("<input/>").attr({name:e,value:t}))})),s.hide().appendTo("body").submit().remove(),void(e&&e())}i.emit.debug("tool-form::submit()","Validation complete.",a),g.b.request({type:"POST",url:"".concat(Object(p.getAppRoot)(),"api/tools"),data:a,success:function(t){if(e&&e(),n.$el.children().hide(),t.produces_entry_points){var r,o=P(t.jobs);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=k.default.extend(j),c=document.createElement("div");n.$el.append(c),new l({propsData:{jobId:s.id}}).$mount(c)}}catch(t){o.e(t)}finally{o.f()}}n.$el.append(n._templateSuccess(t,a));var d=i.config.enable_tool_recommendations;if(!0===d||"true"===d){var h=k.default.extend(I),f=document.createElement("div");n.$el.append(f),new h({propsData:{toolId:a.tool_id}}).$mount(f)}n.$el.parent().scrollTop(0),t.jobs&&t.jobs.length>0&&(n.$el.append(u()("<div/>",{id:"webhook-view"})),new w.a.WebhookView({type:"tool",toolId:a.tool_id})),i.currHistoryPanel&&(n.form.stopListening(i.currHistoryPanel.collection),i.currHistoryPanel.refreshContents())},error:function(t){e&&e(),i.emit.debug("tool-form::submit","Submission failed.",t);var r=!1;if(t&&t.err_data){var o=n.form.data.matchResponse(t.err_data);for(var s in o){n.form.highlight(s,o[s]),r=!0;break}}r||n.modal.show({title:_()("Job submission failed"),body:n._templateError(a,t&&t.err_msg),buttons:{Close:function(){n.modal.hide()}}})}})},validate:function(t){var e=Object(o.a)(),n=t.inputs,i=-1,a=null;for(var r in n){var s=n[r],l=this.form.data.match(r),c=this.form.field_list[l],d=this.form.input_list[l];if(l&&d&&c){if(!d.optional&&null==s&&"hidden"!=d.type)return this.form.highlight(l),!1;if(c.validate){var u=c.validate();if(u)return this.form.highlight(l,u),!1}if(s&&s.batch){var h=s.values.length,f=h>0&&s.values[0]&&s.values[0].src;if(f)if(null===a)a=f;else if(a!==f)return this.form.highlight(l,"Please select either dataset or dataset list fields for all batch mode fields."),!1;if(-1===i)i=h;else if(i!==h)return this.form.highlight(l,"Please make sure that you select the same number of inputs for all batch mode fields. This field contains <b>".concat(h,"</b> selection(s) while a previous field contains <b>").concat(i,"</b>.")),!1}}else e.emit.debug("tool-form::validate()","Retrieving input objects failed.")}return!0},_getInputs:function(t){var e=[],n={};for(var i in t.inputs){var a=t.inputs[i];if(a&&u.a.isArray(a.values)){var r,o=P(a.values);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.src&&!n[s.id]&&(e.push(s),n[s.id]=!0)}}catch(t){o.e(t)}finally{o.f()}}}return e},_templateRow:function(t,e){var n="";if(t.length>0){n+="<p>".concat(e,":</p>"),t.sort((function(t,e){e.hid,t.hid})),n+="<ul>";var i,a=P(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s="".concat(o.hid,": ").concat(r.default.escape(o.name));n+="<li><b>".concat(s,"</b></li>")}}catch(t){a.e(t)}finally{a.f()}n+="</ul>"}return n},_templateSuccess:function(t,e){var n=t&&t.jobs?t.jobs.length:0;if(n>0){var i=this._getInputs(e),a=i.length,r=t.outputs.length,o=n>1?"".concat(n," jobs"):"1 job",s=a>1?"".concat(a," inputs"):"this input",l=r>1?"".concat(r," outputs"):"this output",c=this.form.model.get("name");return'<div class="donemessagelarge">\n                        <p>\n                            Executed <b>'.concat(c,"</b> and successfully added ").concat(o," to the queue.\n                        </p>\n                        ").concat(this._templateRow(i,"The tool uses ".concat(s)),"\n                        ").concat(this._templateRow(t.outputs,"It produces ".concat(l)),"\n                        <p>\n                            You can check the status of queued jobs and view the resulting data by refreshing the History panel. When the job has been run the status will change from 'running' to 'finished' if completed successfully or 'error' if problems were encountered.\n                        </p>\n                    </div>")}return this._templateError(t,"Invalid success response. No jobs found.")},_templateError:function(t,e){return u()("<div/>").addClass("errormessagelarge").append(u()("<p/>").text("The server could not complete the request. Please contact the Galaxy Team if this error persists. ".concat(e||""))).append(u()("<pre/>").text(JSON.stringify(t,null,4)))}})},H=n(428),N=n(15),$=n(26),F=n(20),W=n(17);k.default.use(N.a);var z={props:{slug:{type:String,required:!0}},data:function(){return{slugInput:this.slug}},mounted:function(){this.$refs.input.select()},methods:{onChange:function(){var t=this.slugInput.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase();this.$emit("onChange",t)},onCancel:function(){this.$emit("onChange",this.slug)}}},U=Object(T.a)(z,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-input",{ref:"input",staticClass:"d-inline w-auto h-auto px-1 py-0",on:{change:t.onChange,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onChange(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onCancel(e)}]},model:{value:t.slugInput,callback:function(e){t.slugInput=e},expression:"slugInput"}})}),[],!1,null,null,null).exports;k.default.use(N.a),F.c.add(W.t),F.c.add(W.j);var V={components:{FontAwesomeIcon:$.a,SlugInput:U},props:{id:{type:String,required:!0},plural_name:{type:String,required:!0},model_class:{type:String,required:!0}},data:function(){return{ready:!1,hasUsername:Object(o.a)().user.get("username"),newUsername:"",errMsg:null,item:{title:"title",username_and_slug:"username/slug",importable:!1,published:!1,users_shared_with:[]},shareFields:["email",{key:"id",label:""}],makeMembersPublic:!1,showUrl:!0,tooltipClipboard:"Copy URL"}},computed:{modelClassLower:function(){return this.model_class.toLowerCase()},pluralNameLower:function(){return this.plural_name.toLowerCase()},itemStatus:function(){return this.item.published?"accessible via link and published":"accessible via link"},itemRoot:function(){var t=window.location.port?":".concat(window.location.port):"";return"".concat(window.location.protocol,"//").concat(window.location.hostname).concat(t).concat(Object(p.getAppRoot)())},itemUrl:function(){return"".concat(this.itemRoot).concat(this.item.username_and_slug)},itemSlugParts:function(){var t=this.item.username_and_slug,e=t.lastIndexOf("/");return[t.substring(0,e+1),t.substring(e+1)]},itemUrlParts:function(){var t=this.itemUrl,e=t.lastIndexOf("/");return[t.substring(0,e+1),t.substring(e+1)]},published_url:function(){return"".concat(Object(p.getAppRoot)()).concat(this.pluralNameLower,"/list_published")},shareUrl:function(){return"".concat(Object(p.getAppRoot)()).concat(this.modelClassLower,"/share/?id=").concat(this.id)},slugUrl:function(){return"".concat(Object(p.getAppRoot)()).concat(this.modelClassLower,"/set_slug_async/?id=").concat(this.id)},showDanger:function(){return null!==this.errMsg}},created:function(){this.getModel()},methods:{onCopy:function(){var t=document.createElement("input");document.body.appendChild(t),t.value=this.itemUrl,t.select(),document.execCommand("copy"),document.body.removeChild(t),this.tooltipClipboard="Copied!"},onCopyOut:function(){this.tooltipClipboard="Copy URL"},onEdit:function(){this.showUrl=!1},onChange:function(t){var e=this;this.showUrl=!0,this.item.username_and_slug="".concat(this.itemSlugParts[0]).concat(t);var n="".concat(this.slugUrl,"&new_slug=").concat(t);S.a.get(n).catch((function(t){return e.errMsg=t.response.data.err_msg}))},onImportable:function(t){t?this.setSharing("make_accessible_via_link-".concat(this.item.published?"publish":"unpublish")):(this.item.published=!1,this.setSharing("disable_link_access-unpublish"))},onPublish:function(t){t?(this.item.importable=!0,this.setSharing("make_accessible_and_publish")):this.setSharing("unpublish")},getModel:function(){var t=this;this.ready=!1,S.a.get("".concat(Object(p.getAppRoot)(),"api/").concat(this.pluralNameLower,"/").concat(this.id,"/sharing")).then((function(e){t.item=e.data,t.ready=!0})).catch((function(e){return t.errMsg=e.response.data.err_msg}))},setUsername:function(){var t=this,e=Object(o.a)();S.a.put("".concat(Object(p.getAppRoot)(),"api/users/").concat(e.user.id,"/information/inputs"),{username:this.newUsername||""}).then((function(e){t.errMsg=null,t.hasUsername=!0,t.getModel()})).catch((function(e){return t.errMsg=e.response.data.err_msg}))},setSharing:function(t,e){var n=this,i={action:t,user_id:e};return S.a.post("".concat(Object(p.getAppRoot)(),"api/").concat(this.pluralNameLower,"/").concat(this.id,"/sharing"),i).then((function(t){t.data.skipped&&(n.errMsg="Some of the items within this object were not published due to an error."),n.item=t.data,n.ready=!0})).catch((function(t){return n.errMsg=t.response.data.err_msg}))}}},B=Object(T.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ready?n("div",[n("h3",[t._v("Share or Publish "+t._s(t.model_class)+" `"+t._s(t.item.title)+"`")]),t._v(" "),n("b-alert",{attrs:{show:t.showDanger,variant:"danger",dismissible:""}},[t._v(" "+t._s(t.errMsg)+" ")]),t._v(" "),n("br"),t._v(" "),t.hasUsername?n("div",[n("b-form-checkbox",{staticClass:"make-accessible",attrs:{switch:""},on:{change:t.onImportable},model:{value:t.item.importable,callback:function(e){t.$set(t.item,"importable",e)},expression:"item.importable"}},[t._v("\n            Make "+t._s(t.model_class)+" accessible\n        ")]),t._v(" "),t.item.importable?n("b-form-checkbox",{staticClass:"make-publishable",attrs:{switch:""},on:{change:t.onPublish},model:{value:t.item.published,callback:function(e){t.$set(t.item,"published",e)},expression:"item.published"}},[t._v("\n            Make "+t._s(t.model_class)+" publicly available in\n            "),n("a",{attrs:{href:t.published_url,target:"_top"}},[t._v("Published "+t._s(t.plural_name))])]):t._e(),t._v(" "),n("br"),t._v(" "),t.item.importable?n("div",[n("div",[t._v("\n                This "+t._s(t.model_class)+" is currently "),n("strong",[t._v(t._s(t.itemStatus))]),t._v(".\n            ")]),t._v(" "),n("p",[t._v("Anyone can view and import this "+t._s(t.model_class)+" by visiting the following URL:")]),t._v(" "),n("blockquote",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit URL",variant:"link",size:"sm"},on:{click:t.onEdit}},[n("font-awesome-icon",{attrs:{icon:"edit"}})],1),t._v(" "),n("b-button",{attrs:{id:"tooltip-clipboard",variant:"link",size:"sm"},on:{click:t.onCopy,mouseout:t.onCopyOut}},[n("font-awesome-icon",{attrs:{icon:"link"}})],1),t._v(" "),n("b-tooltip",{attrs:{target:"tooltip-clipboard",triggers:"hover"}},[t._v("\n                    "+t._s(t.tooltipClipboard)+"\n                ")]),t._v(" "),t.showUrl?n("a",{staticClass:"ml-2",attrs:{id:"item-url",href:t.itemUrl,target:"_top"}},[t._v("\n                    url:\n                    "+t._s(t.itemUrl)+"\n                ")]):n("span",{attrs:{id:"item-url-text"}},[t._v("\n                    slug:\n                    "+t._s(t.itemUrlParts[0])),n("SlugInput",{staticClass:"ml-1",attrs:{slug:t.itemUrlParts[1]},on:{onChange:t.onChange}})],1)],1)]):n("div",[t._v("\n            Access to this "+t._s(t.model_class)+" is currently restricted so that only you and the users listed below can\n            access it. Note that sharing a History will also allow access to all of its datasets.\n        ")]),t._v(" "),n("br"),t._v(" "),n("h4",[t._v("Share "+t._s(t.model_class)+" with Individual Users")]),t._v(" "),n("div",[t.item.users_shared_with&&t.item.users_shared_with.length>0?n("div",[n("b-table",{attrs:{small:"","caption-top":"",fields:t.shareFields,items:t.item.users_shared_with},scopedSlots:t._u([{key:"table-caption",fn:function(){return[t._v("\n                        The following users will see this "+t._s(t.model_class)+" in their "+t._s(t.model_class)+" list and will\n                        be able to view, import and run it.\n                    ")]},proxy:!0},{key:"cell(id)",fn:function(e){return[n("b-button",{staticClass:"unshare_user",attrs:{size:"sm"},on:{click:function(n){return n.stopPropagation(),t.setSharing("unshare_user",e.value)}}},[t._v("Remove")])]}}],null,!1,1606674453)})],1):n("div",[n("p",[t._v("You have not shared this "+t._s(t.model_class)+" with any users.")])]),t._v(" "),n("b-button",{attrs:{href:t.shareUrl,id:"share_with_a_user"}},[n("span",[t._v("Share with a user")])])],1)],1):n("div",[n("div",[t._v("To make a "+t._s(t.model_class)+" accessible via link or publish it, you must create a public username:")]),t._v(" "),n("form",{staticClass:"form-group",on:{submit:function(e){return e.preventDefault(),t.setUsername()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newUsername,expression:"newUsername"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newUsername},on:{input:function(e){e.target.composing||(t.newUsername=e.target.value)}}})]),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return t.setUsername()}}},[t._v("Set Username")])],1)],1):t._e()}),[],!1,null,null,null).exports,q=n(69),G=function(){var t=Object(o.a)(),e=t.config;return{information:{title:_()("Manage Information"),id:"edit-preferences-information",description:"Edit your email, addresses and custom parameters or change your public name.",url:"api/users/".concat(t.user.id,"/information/inputs"),icon:"fa-user",redirect:"user",shouldRender:!e.use_remote_user},password:{title:_()("Change Password"),id:"edit-preferences-password",description:_()("Allows you to change your login credentials."),icon:"fa-unlock-alt",url:"api/users/".concat(t.user.id,"/password/inputs"),submit_title:"Save Password",redirect:"user",shouldRender:!e.use_remote_user},external_ids:{title:_()("Manage Third-Party Identities"),id:"manage-third-party-identities",description:_()("Connect or disconnect access to your third-party identities."),icon:"fa-id-card-o",submit_title:"Disconnect identity",submit_icon:"fa-trash",shouldRender:e.enable_oidc},permissions:{title:_()("Set Dataset Permissions for New Histories"),id:"edit-preferences-permissions",description:"Grant others default access to newly created histories. Changes made here will only affect histories created after these settings have been stored.",url:"api/users/".concat(t.user.id,"/permissions/inputs"),icon:"fa-users",submit_title:"Save Permissions",redirect:"user"},make_data_private:{title:_()("Make All Data Private"),id:"edit-preferences-make-data-private",description:_()("Click here to make all data private."),icon:"fa-lock"},api_key:{title:_()("Manage API Key"),id:"edit-preferences-api-key",description:_()("Access your current API key or create a new one."),url:"api/users/".concat(t.user.id,"/api_key/inputs"),icon:"fa-key",submit_title:"Create a new Key",submit_icon:"fa-check"},cloud_auth:{id:"edit-preferences-cloud-auth",title:_()("Manage Cloud Authorization"),description:_()("Add or modify the configuration that grants Galaxy to access your cloud-based resources."),icon:"fa-cloud",submit_title:"Create a new Key",submit_icon:"fa-check"},toolbox_filters:{title:_()("Manage Toolbox Filters"),id:"edit-preferences-toolbox-filters",description:_()("Customize your Toolbox by displaying or omitting sets of Tools."),url:"api/users/".concat(t.user.id,"/toolbox_filters/inputs"),icon:"fa-filter",submit_title:"Save Filters",redirect:"user",shouldRender:!!e.has_user_tool_filters},custom_builds:{title:_()("Manage Custom Builds"),description:_()("Add or remove custom builds using history datasets."),icon:"fa-cubes"},logout:{title:_()("Sign Out"),id:"edit-preferences-sign-out",description:_()("Click here to sign out of all sessions."),icon:"fa-sign-out",shouldRender:!!t.session_csrf_token}}},J=n(224);function K(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}k.default.use(N.a);var X={props:{userId:{type:String,required:!0},enableQuotas:{type:Boolean,required:!0}},data:function(){return{email:"",diskUsage:"",quotaUsageString:"",baseUrl:"".concat(Object(p.getAppRoot)(),"user"),messageVariant:null,message:null,name:"",nameState:null,deleteError:"",submittedNames:[]}},created:function(){var t=this,e=q.a.get("message"),n=q.a.get("status");e&&n&&(this.message=e,this.messageVariant=n),S.a.get("".concat(Object(p.getAppRoot)(),"api/users/").concat(this.userId)).then((function(e){t.email=e.data.email,t.diskUsage=e.data.nice_total_disk_usage,t.quotaUsageString=t.enableQuotas?"Your disk quota is: <strong>".concat(e.data.quota,"</strong>."):""}))},computed:{activeLinks:function(){var t={},e=G();for(var n in e)if(!1!==e[n].shouldRender)switch(t[n]=e[n],n){case"make_data_private":t[n].onclick=this.makeDataPrivate;break;case"custom_builds":t[n].onclick=this.openManageCustomBuilds;break;case"logout":t[n].onclick=this.signOut;break;default:t[n].action=n}return t},showDeleteError:function(){return""!==this.deleteError}},methods:{toggleNotifications:function(){Notification.requestPermission().then((function(t){"granted"===t?new Notification("Notifications enabled",{icon:"static/favicon.ico"}):alert("Notifications disabled, please re-enable through browser settings.")}))},openManageCustomBuilds:function(){Object(o.a)().page.router.push("".concat(Object(p.getAppRoot)(),"custom_builds"))},makeDataPrivate:function(){var t=Object(o.a)();confirm(_()("WARNING: This will make all datasets (excluding library datasets) for which you have 'management' permissions, in all of your histories private, and will set permissions such that all of your new data in these histories is created as private.  Any datasets within that are currently shared will need to be re-shared or published.  Are you sure you want to do this?"))&&S.a.post("".concat(Object(p.getAppRoot)(),"history/make_private?all_histories=true")).then((function(e){t.modal.show({title:_()("Datasets are now private"),body:"All of your histories and datsets have been made private.  If you'd like to make all *future* histories private please use the <a href=\"".concat(t.root,'user/permissions">User Permissions</a> interface.'),buttons:{Close:function(){t.modal.hide()}}})}))},signOut:function(){var t=Object(o.a)();t.modal.show({title:_()("Sign out"),body:"Do you want to continue and sign out of all active sessions?",buttons:{Cancel:function(){t.modal.hide()},"Sign out":J.c}})},checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.nameState=t,t},resetModal:function(){this.name="",this.nameState=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.checkFormValidity()){t.next=2;break}return t.abrupt("return",!1);case 2:if(e.email!==e.name){t.next=17;break}return e.nameState=!0,t.prev=4,t.next=7,S.a.delete("".concat(Object(p.getAppRoot)(),"api/users/").concat(e.userId));case 7:t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(4),403!==t.t0.response.status){t.next=14;break}return e.deleteError="User deletion must be configured on this instance in order to allow user self-deletion.  Please contact an administrator for assistance.",t.abrupt("return",!1);case 14:Object(J.d)(),t.next=19;break;case 17:return e.nameState=!1,t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[4,9]])})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){K(r,i,a,o,s,"next",t)}function s(t){K(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}},Q=(n(1595),Object(T.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"p-0",attrs:{fluid:""}},[n("h2",[t._v("User preferences")]),t._v(" "),n("b-alert",{attrs:{variant:t.messageVariant,show:!!t.message}},[t._v("\n        "+t._s(t.message)+"\n    ")]),t._v(" "),n("p",[t._v("\n        You are logged in as "),n("strong",{attrs:{id:"user-preferences-current-email"}},[t._v(t._s(t.email))]),t._v(".\n    ")]),t._v(" "),t._l(t.activeLinks,(function(e,i){return n("b-row",{key:i,staticClass:"ml-3 mb-1"},[n("i",{class:["pref-icon pt-1 fa fa-lg",e.icon]}),t._v(" "),n("div",{staticClass:"pref-content pr-1"},[e.onclick?n("a",{attrs:{id:e.id,href:"javascript:void(0)"},on:{click:e.onclick}},[n("b",[t._v(t._s(e.title))])]):n("a",{attrs:{id:e.id,href:t.baseUrl+"/"+e.action}},[n("b",[t._v(t._s(e.title))])]),t._v(" "),n("div",{staticClass:"form-text text-muted"},[t._v("\n                "+t._s(e.description)+"\n            ")])])])})),t._v(" "),n("b-row",{staticClass:"ml-3 mb-1"},[n("i",{staticClass:"pref-icon pt-1 fa fa-lg fa-plus-square-o"}),t._v(" "),n("div",{staticClass:"pref-content pr-1"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:t.toggleNotifications}},[n("b",[t._v("Enable notifications")])]),t._v(" "),n("div",{staticClass:"form-text text-muted"},[t._v("\n                Allow push and tab notifcations on job completion. To disable, revoke the site notification\n                privilege in your browser.\n            ")])])]),t._v(" "),n("b-row",{staticClass:"ml-3 mb-1"},[n("i",{staticClass:"pref-icon pt-1 fa fa-lg fa-radiation"}),t._v(" "),n("div",{staticClass:"pref-content pr-1"},[n("a",{attrs:{href:"javascript:void(0)"}},[n("b",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}]},[t._v("Delete Account")])]),t._v(" "),n("div",{staticClass:"form-text text-muted"},[t._v("\n                Delete your account on this Galaxy server.\n            ")]),t._v(" "),n("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",centered:"",title:"Account Deletion","title-tag":"h2"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[n("p",[n("b-alert",{attrs:{variant:"danger",show:t.showDeleteError}},[t._v(t._s(t.deleteError))]),t._v(" "),n("b",[t._v("\n                        This action cannot be undone. Your account will be permanently deleted, along with the data\n                        contained in it.\n                    ")])],1),t._v(" "),n("b-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{state:t.nameState,label:"Enter your user email for this account as confirmation.","label-for":"Email","invalid-feedback":"Incorrect email"}},[n("b-form-input",{attrs:{id:"name-input",state:t.nameState,required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)],1)],1)]),t._v(" "),n("p",{staticClass:"mt-2"},[t._v("\n        You are using "),n("strong",[t._v(t._s(t.diskUsage))]),t._v(" of disk space in this Galaxy instance.\n        "),n("span",{domProps:{innerHTML:t._s(t.quotaUsageString)}}),t._v("\n        Is your usage more than expected? See the\n        "),n("a",{attrs:{href:"https://galaxyproject.org/learn/managing-datasets/",target:"_blank"}},[n("b",[t._v("documentation")])]),t._v(" for\n        tips on how to find all of the data in your account.\n    ")])],2)}),[],!1,null,"7321fa77",null).exports),Z=n(162);k.default.use(N.a);var tt={props:{item:Object},computed:{getName:function(){return this.item.name||"Unavailable"},isError:function(){return"error"===this.item.state},isPaused:function(){return"paused"===this.item.state}},methods:{copyDataset:function(t){this.$emit("copyDataset",this.item)},showDataset:function(t){this.$emit("showDataset",this.item)}}},et=(n(1596),Object(T.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-link",{staticClass:"workflow-dropdown font-weight-bold p-2",attrs:{id:"dataset-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t.isError?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"dataset-icon error fa fa-times-circle text-danger",attrs:{title:"An error occurred for this dataset."}}):t.isPaused?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"dataset-icon pause fa fa-pause text-info",attrs:{title:"The creation of this dataset has been paused."}}):n("span",{staticClass:"dataset-icon fa fa-caret-down"}),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(this.getName))])]),t._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dataset-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showDataset(e)}}},[n("span",{staticClass:"fa fa-eye fa-fw mr-1"}),t._v(" "),n("span",[t._v("Show in History")])]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.copyDataset(e)}}},[n("span",{staticClass:"fa fa-copy fa-fw mr-1"}),t._v(" "),n("span",[t._v("Copy to History")])])])],1)}),[],!1,null,"1281dd7a",null).exports),nt=n(34);function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ot={props:{item:Object},computed:at(at({},Object(nt.c)(["getHistoryNameById"])),{},{historyName:function(){return this.getHistoryNameById(this.item.history_id)}})},st=Object(T.a)(ot,(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n    "+this._s(this.historyName)+"\n")])}),[],!1,null,null,null).exports,lt=n(269),ct=n(100),dt=n(238),ut=n(29);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mt={components:{DatasetHistory:st,DatasetName:et,LoadingSpan:ut.a,DelayedInput:lt.a,UtcDate:ct.a,Tags:dt.a},data:function(){return{error:null,scrolled:!1,fields:[{key:"name",sortable:!0},{key:"tags",sortable:!1},{label:"History",key:"history_id",sortable:!0},{key:"extension",sortable:!0},{label:"Updated",key:"update_time",sortable:!0},{key:"context",label:"",sortable:!1}],query:"",limit:50,offset:0,sortBy:"update_time",sortDesc:!0,loading:!0,message:null,messageVariant:null,rows:[]}},computed:{showNotFound:function(){return!this.loading&&0===this.rows.length&&this.query},showNotAvailable:function(){return!this.loading&&0===this.rows.length&&!this.query},showMessage:function(){return!!this.message}},created:function(){this.fetchHistories(),this.root=Object(p.getAppRoot)(),this.services=new Z.a({root:this.root}),this.load()},methods:ft(ft({},Object(nt.b)(["fetchHistories"])),{},{load:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,this.services.getDatasets({query:this.query,sortBy:this.sortBy,sortDesc:this.sortDesc,offset:this.offset,limit:this.limit}).then((function(n){t.rows=e?t.rows.concat(n):n,t.loading=!1})).catch((function(e){t.error=e}))},onCopyDataset:function(t){var e=this,n=Object(o.a)().currHistoryPanel,i=t.id,a=n.model.id;this.services.copyDataset(i,a).then((function(t){n.loadCurrentHistory()})).catch((function(t){e.onError(t)}))},onShowDataset:function(t){var e=this,n=Object(o.a)();this.services.setHistory(t.history_id).then((function(t){n.currHistoryPanel.loadCurrentHistory()})).catch((function(t){e.onError(t)}))},onTags:function(t,e){var n=this,i=this.rows[e];i.tags=t,this.services.updateTags(i.id,"HistoryDatasetAssociation",t).catch((function(t){n.onError(t)}))},onQuery:function(t){this.query=t,this.offset=0,this.load()},onSort:function(t){this.sortBy=t.sortBy,this.sortDesc=t.sortDesc,this.offset=0,this.load()},onScroll:function(t){var e=t.target;e.scrollTop+e.clientHeight>=e.scrollHeight&&this.offset+this.limit<=this.rows.length&&(this.offset+=this.limit,this.load(!0))},onSuccess:function(t){this.message=t,this.messageVariant="success"},onError:function(t){this.message=t,this.messageVariant="danger"}})},_t=Object(T.a)(mt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overflow-auto h-100",on:{scroll:t.onScroll}},[t.error?n("div",{staticClass:"alert alert-danger",attrs:{show:""}},[t._v(t._s(t.error))]):n("div",[n("b-alert",{attrs:{variant:t.messageVariant,show:t.showMessage}},[t._v(t._s(t.message))]),t._v(" "),n("delayed-input",{staticClass:"mb-3",attrs:{placeholder:"Search Datasets"},on:{onChange:t.onQuery}}),t._v(" "),n("b-table",{attrs:{id:"dataset-table",striped:"","no-local-sorting":"",fields:t.fields,items:t.rows},on:{"sort-changed":t.onSort},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[n("DatasetName",{attrs:{item:e.item},on:{showDataset:t.onShowDataset,copyDataset:t.onCopyDataset}})]}},{key:"cell(history_id)",fn:function(t){return[n("DatasetHistory",{attrs:{item:t.item}})]}},{key:"cell(tags)",fn:function(e){return[n("Tags",{attrs:{index:e.index,tags:e.item.tags},on:{input:t.onTags}})]}},{key:"cell(update_time)",fn:function(t){return[n("UtcDate",{attrs:{date:t.value,mode:"elapsed"}})]}}])}),t._v(" "),t.loading?n("loading-span",{attrs:{message:"Loading datasets"}}):t._e(),t._v(" "),t.showNotFound?n("div",[t._v("\n            No matching entries found for: "),n("span",{staticClass:"font-weight-bold"},[t._v(t._s(this.query))]),t._v(".\n        ")]):t._e(),t._v(" "),t.showNotAvailable?n("div",[t._v("\n            No datasets found.\n        ")]):t._e()],1)])}),[],!1,null,null,null).exports,gt=n(607),vt=n.n(gt);n(1597);k.default.use(N.a);var yt={components:{Multiselect:vt.a},data:function(){var t=Object(o.a)();return{customBuildsUrl:"".concat(t.root,"api/users/").concat(t.user.id,"/custom_builds"),selectedInstalledBuilds:[],installedBuilds:[],maxFileSize:100,fileLoaded:0,fields:[{key:"name",label:"Name"},{key:"id",label:"Key"},{key:"count",label:"Number of chroms/contigs"},{key:"action",label:""}],customBuilds:[],alertType:"info",alertMessage:"",dismissSecs:5,dismissCountDown:0,form:{id:"",name:"",file:"",text:""},dataSources:[{value:"fasta",text:"FASTA-file from history"},{value:"file",text:"Len-file from disk"},{value:"text",text:"Len-file by copy/paste"}],selectedDataSource:"fasta",fastaFilesLoading:!0,fastaFilesSelectDisabled:!0,fastaFiles:[],selectedFastaFile:null}},computed:{lengthType:function(){return this.selectedDataSource||""},lengthValue:function(){var t="";return"fasta"===this.lengthType?t=this.selectedFastaFile||"":"file"===this.lengthType?t=this.form.file:"text"===this.lengthType&&(t=this.form.text),t}},created:function(){var t=Object(o.a)(),e=t.currHistoryPanel&&t.currHistoryPanel.model.id;this.loadCustomBuilds(),e?this.loadCustomBuildsMetadata(e):this.fastaFilesLoading=!1},methods:{loadCustomBuilds:function(){var t=this;S.a.get(this.customBuildsUrl).then((function(e){t.customBuilds=e.data})).catch((function(e){t.showAlert("danger",e.response)}))},loadCustomBuildsMetadata:function(t){var e=this,n=Object(o.a)();S.a.get("".concat(n.root,"api/histories/").concat(t,"/custom_builds_metadata")).then((function(t){for(var n=t.data.fasta_hdas,i=0;i<n.length;i++)n[i].text=n[i].label;n&&n.length>0&&(e.fastaFiles=n,e.selectedFastaFile=n[0].value,e.fastaFilesSelectDisabled=!1),e.fastaFilesLoading=!1,e.installedBuilds=t.data.installed_builds;for(var a=0;a<e.installedBuilds.length;a++)e.installedBuilds[a].text=e.installedBuilds[a].label})).catch((function(t){e.showAlert("danger",t.response),e.fastaFilesLoading=!1}))},save:function(t){var e=this,n={id:this.form.id,name:this.form.name,"len|type":this.lengthType,"len|value":this.lengthValue};if(!n.id.trim()||!n.name.trim()||!n["len|value"].trim())return this.showAlert("danger","All inputs are required."),!1;S.a.put("".concat(this.customBuildsUrl,"/").concat(n.id),n).then((function(t){t.data.message?e.showAlert("warning",t.data.message):e.showAlert("success","Successfully added a new custom build."),e.loadCustomBuilds()})).catch((function(t){var n=t.response.data.err_msg;e.showAlert("danger",n||"Failed to create custom build.")}))},deleteBuild:function(t){var e=this;S.a.delete("".concat(this.customBuildsUrl,"/").concat(t)).then((function(n){e.customBuilds=e.customBuilds.filter((function(e){return e.id!==t}))})).catch((function(t){var n=t.response.data.err_msg;e.showAlert("danger",n||"Failed to delete custom build.")}))},readFile:function(t){var e=this,n=t.target.files&&t.target.files[0];if(n){var i=new FileReader;i.onprogress=function(t){t.lengthComputable&&(e.fileLoaded=100*Math.round(t.loaded/t.total))},i.onload=function(){e.fileLoaded=0,e.form.file=i.result},i.readAsText(n)}},showAlert:function(t,e){this.alertType=t,this.alertMessage=e,this.dismissCountDown=this.dismissSecs},countDownChanged:function(t){this.dismissCountDown=t}}},bt=(n(1598),Object(T.a)(yt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",[n("b-col",[n("h4",[t._v("Current Custom Builds")])])],1),t._v(" "),n("b-row",[n("b-col",[n("b-table",{staticClass:"grid",attrs:{small:"","show-empty":"",items:t.customBuilds,fields:t.fields},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{href:"javascript:void(0)",title:"Delete build"},on:{click:function(n){return t.deleteBuild(e.item.id)}}},[n("i",{staticClass:"icon fa fa-lg fa-trash-o"})])]}}])})],1)],1),t._v(" "),t.installedBuilds.length>0?[n("b-row",{staticClass:"mt-2"},[n("b-col",[n("h4",[t._v("System Installed Builds")])])],1),t._v(" "),n("b-row",[n("b-col",{staticClass:"mb-4",attrs:{id:"installed-builds"}},[n("multiselect",{attrs:{multiple:"",taggable:"",label:"label","track-by":"value",searchable:!1,options:t.installedBuilds},model:{value:t.selectedInstalledBuilds,callback:function(e){t.selectedInstalledBuilds=e},expression:"selectedInstalledBuilds"}})],1)],1)]:t._e(),t._v(" "),n("b-row",[n("b-col",[n("h4",[t._v("Add a Custom Build")])])],1),t._v(" "),n("b-row",[n("b-col",[n("b-card",[n("b-alert",{attrs:{fade:"",dismissible:"",variant:t.alertType,show:t.dismissCountDown},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v("\n                        "+t._s(t.alertMessage)+"\n                    ")]),t._v(" "),n("b-form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[n("b-form-group",{attrs:{label:"Name",description:"Specify a build name, e.g. Hamster.","label-for":"name"}},[n("b-form-input",{attrs:{id:"name",tour_id:"name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("b-form-group",{attrs:{label:"Key",description:"Specify a build key, e.g. hamster_v1.","label-for":"id"}},[n("b-form-input",{attrs:{id:"id",tour_id:"id",required:""},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),n("b-form-group",{attrs:{label:"Definition",description:"Provide the data source.","label-for":"type"}},[n("b-form-select",{attrs:{id:"type",tour_id:"type",options:t.dataSources},model:{value:t.selectedDataSource,callback:function(e){t.selectedDataSource=e},expression:"selectedDataSource"}})],1),t._v(" "),n("div",["fasta"===t.selectedDataSource?n("b-form-group",{attrs:{label:"FASTA-file"}},[n("b-form-select",{attrs:{options:t.fastaFiles,disabled:t.fastaFilesSelectDisabled},model:{value:t.selectedFastaFile,callback:function(e){t.selectedFastaFile=e},expression:"selectedFastaFile"}})],1):t._e(),t._v(" "),"file"===t.selectedDataSource?n("b-form-group",{attrs:{label:"Len-file"}},[n("b-form-file",{attrs:{placeholder:"Choose a file..."},on:{change:t.readFile}}),t._v(" "),n("b-progress",{directives:[{name:"show",rawName:"v-show",value:0!==t.fileLoaded,expression:"fileLoaded !== 0"}],attrs:{animated:"","show-progress":"",value:t.fileLoaded,max:t.maxFileSize}}),t._v(" "),n("b-form-textarea",{directives:[{name:"show",rawName:"v-show",value:t.form.file,expression:"form.file"}],attrs:{value:t.form.file}})],1):t._e(),t._v(" "),"text"===t.selectedDataSource?n("b-form-group",{attrs:{label:"Edit/Paste"}},[n("b-form-textarea",{attrs:{id:"len-file-text-area"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1):t._e()],1),t._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom.hover",modifiers:{bottom:!0,hover:!0}}],attrs:{id:"save",type:"submit",variant:"primary",title:"Create new build"}},[n("i",{staticClass:"icon fa fa-save"}),t._v(" Save\n                        ")])],1)],1)],1),t._v(" "),n("b-col",["fasta"===t.selectedDataSource?n("b-card",{staticClass:"alert-info"},[n("h4",[t._v("FASTA format")]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("\n                        This is a multi-fasta file from your current history that provides the genome sequences for each\n                        chromosome/contig in your build.\n                    ")]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("Here is a snippet from an example multi-fasta file:")]),t._v(" "),n("pre",{staticClass:"card-text"},[t._v(">chr1\nATTATATATAAGACCACAGAGAGAATATTTTGCCCGG...\n\n>chr2\nGGCGGCCGCGGCGATATAGAACTACTCATTATATATA...\n\n...")])]):n("b-card",{staticClass:"alert-info"},[n("h4",[t._v("Length Format")]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("The length format is two-column, separated by whitespace, of the form:")]),t._v(" "),n("pre",{staticClass:"card-text"},[t._v("chrom/contig   length of chrom/contig")]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("For example, the first few entries of "),n("em",[t._v("mm9.len")]),t._v(" are as follows:")]),t._v(" "),n("pre",{staticClass:"card-text"},[t._v("chr1    197195432\nchr2    181748087\nchr3    159599783\nchr4    155630120\nchr5    152537259")]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("\n                        Trackster uses this information to populate the select box for chrom/contig, andto set the\n                        maximum basepair of the track browser. You may either upload a .len fileof this format (Len File\n                        option), or directly enter the information into the box (Len Entry option).\n                    ")])])],1)],1)],2)}),[],!1,null,"d6e155ea",null).exports),wt=n(211),kt=n(85),xt=n(153),St={View:f.a.View.extend({initialize:function(t){var e=this,n=Object(o.a)();xt.a.markViewAsLoading(this),this.model=new f.a.Model(t),this.item=this.model.get("item"),this.title=this.model.get("plural"),t&&t.active_tab&&(this.active_tab=t.active_tab),u.a.ajax({url:"".concat(Object(p.getAppRoot)()+this.item,"/").concat(this.model.get("action_id"),"?").concat(u.a.param(n.params)),success:function(t){e.model.set(t),e.render()}})},render:function(){var t=new kt.a(this.model.attributes);this.$el.empty().append(t.$el),this.$el.append(this._templateShared())},_templateShared:function(){var t=this,e=u()("<div><br/><h2>".concat(this.model.get("plural")," shared with you by others</h2></div>")),n=this.model.attributes;if(n.shared_by_others&&n.shared_by_others.length>0){var i=u()('<table class="colored" border="0" cellspacing="0" cellpadding="0" width="100%"><tr class="header"><th>Title</th><th>Owner</th></tr></table>');r.default.each(n.shared_by_others,(function(e,n){var a="".concat(Object(p.getAppRoot)()+t.item,"/display_by_username_and_slug?username=").concat(e.username,"&slug=").concat(e.slug);i.append('<tr><td><a href="'.concat(a,'">').concat(r.default.escape(e.title),"</a></td><td>").concat(r.default.escape(e.username),"</td></tr>"))})),e.append(i)}else e.append("No ".concat(this.model.get("plural").toLowerCase()," have been shared with you."));return e}})};function Mt(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.location=n?"".concat(t,"workflows/run?id=").concat(e.id):"".concat(t,"workflows/list?message=").concat(e.message,"&status=success")}k.default.use(N.a);var Ct={data:function(){var t=Object(o.a)();return{sourceFile:null,sourceURL:null,errorMessage:null,myexperiment_target_url:"http://".concat(t.config.myexperiment_target_url,"/galaxy?galaxy_url=").concat(window.location.protocol,"//").concat(window.location.host)}},computed:{hasErrorMessage:function(){return null!=this.errorMessage},trsSearchHref:function(){return"".concat(Object(p.getAppRoot)(),"workflows/trs_search")},trsImportHref:function(){return"".concat(Object(p.getAppRoot)(),"workflows/trs_import")}},methods:{submit:function(t){var e=this;if(t.preventDefault(),this.sourceFile||this.sourceURL){var n=new FormData;n.append("archive_file",this.sourceFile),n.append("archive_source",this.sourceURL),S.a.post("".concat(Object(p.getAppRoot)(),"api/workflows"),n).then((function(t){Mt(Object(p.getAppRoot)(),t.data)})).catch((function(t){var n=t.response.data&&t.response.data.err_msg;e.errorMessage=n||"Import failed for an unknown reason."}))}else this.errorMessage="You must provide a workflow archive URL or file."}}},Tt=Object(T.a)(Ct,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:t.submit}},[n("b-card",{attrs:{title:"Import Workflow"}},[n("b-alert",{attrs:{show:t.hasErrorMessage,variant:"danger"}},[t._v(t._s(t.errorMessage))]),t._v(" "),n("p",[t._v("Please provide a Galaxy workflow export URL or a workflow file.")]),t._v(" "),n("b-form-group",{attrs:{label:"Archived Workflow URL"}},[n("b-form-input",{attrs:{id:"workflow-import-url-input",type:"url"},model:{value:t.sourceURL,callback:function(e){t.sourceURL=e},expression:"sourceURL"}}),t._v("\n            If the workflow is accessible via a URL, enter the URL above and click Import.\n        ")],1),t._v(" "),n("b-form-group",{attrs:{label:"Archived Workflow File"}},[n("b-form-file",{model:{value:t.sourceFile,callback:function(e){t.sourceFile=e},expression:"sourceFile"}}),t._v("\n            If the workflow is in a file on your computer, choose it and then click Import.\n        ")],1),t._v(" "),n("b-button",{attrs:{id:"workflow-import-button",type:"submit"}},[t._v("Import workflow")]),t._v(" "),n("div",{staticClass:"mt-4"},[n("h4",[t._v("Import a Workflow from Configured GA4GH Tool Registry Servers (e.g. Dockstore)")]),t._v("\n            Use either the Galaxy "),n("a",{attrs:{href:t.trsSearchHref}},[t._v("search form")]),t._v(" or\n            "),n("a",{attrs:{href:t.trsImportHref}},[t._v("import from a TRS ID")]),t._v(".\n        ")]),t._v(" "),n("div",{staticClass:"mt-4"},[n("h4",[t._v("Import a Workflow from myExperiment")]),t._v(" "),n("a",{attrs:{href:t.myexperiment_target_url}},[t._v("Visit myExperiment")]),t._v(" "),n("div",{staticClass:"form-text"},[t._v("Click the link above to visit myExperiment and search for Galaxy workflows.")])])],1)],1)}),[],!1,null,null,null).exports,jt=n(158);function Ot(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Dt(t,e){return(t=t.replace(/^https?:\/\//,"").replace(/\/$/,""))==(e=e.replace(/^https?:\/\//,"").replace(/\/$/,""))}k.default.use(N.a);var At={props:{queryTrsServer:{type:String,default:null},queryTrsId:{type:String,default:null}},created:function(){this.services=new jt.a,this._configureTrsServers()},data:function(){return{selection:null,trsSelection:null,trsServers:[],loading:!0}},computed:{showDropdown:function(){return this.trsServers.length>1}},methods:{onTrsSelection:function(t){this.selection=t,this.$emit("onTrsSelection",t)},onError:function(t){this.$emit("onError",t)},_configureTrsServers:function(){var t=this;this.services.getTrsServers().then((function(e){t.trsServers=e;var n=t.queryTrsServer,i=null;if(n){var a,r=Ot(e);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.id==n){i=o;break}if(Dt(o.api_url,n)){i=o;break}if(Dt(o.link_url,n)){i=o;break}}}catch(t){r.e(t)}finally{r.f()}}null===i&&(n&&t.onError("Failed to find requested TRS server "+n),i=e[0]),t.selection=i,t.loading=!1,t.onTrsSelection(i)}))}}},Et=(n(1599),Object(T.a)(At,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?t._e():n("span",{staticClass:"m-1 text-muted"},[t.showDropdown?n("span",{staticClass:"dropdown"},[n("b-link",{staticClass:"font-weight-bold",attrs:{id:"dropdownTrsServer","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n            "+t._s(t.selection.label)+"\n            "),n("span",{staticClass:"fa fa-caret-down"})]),t._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownTrsServer"}},t._l(t.trsServers,(function(e){return n("a",{key:e.id,staticClass:"dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(n){return n.preventDefault(),t.onTrsSelection(e)}}},[t._v(t._s(e.label))])})),0)],1):n("span",[n("b-link",{staticClass:"font-weight-bold",attrs:{href:t.selection.link_url,target:"_blank",title:t.selection.doc}},[t._v("\n            "+t._s(t.selection.label)+"\n        ")])],1)])}),[],!1,null,"8659ec70",null).exports);F.c.add(W.J),k.default.use(N.a);var It={components:{FontAwesomeIcon:$.a},props:{trsTool:{type:Object}},methods:{importVersion:function(t){this.$emit("onImport",t)}}},Pt={components:{TrsServerSelection:Et,TrsTool:Object(T.a)(It,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("b",[t._v("Name:")]),t._v(" "),n("span",[t._v(t._s(t.trsTool.name))])]),t._v(" "),n("div",[n("b",[t._v("Description:")]),t._v(" "),n("span",[t._v(t._s(t.trsTool.description))])]),t._v(" "),n("div",[n("b",[t._v("Organization")]),t._v(" "),n("span",[t._v(t._s(t.trsTool.organization))])]),t._v(" "),n("div",[n("b",[t._v("Versions")]),t._v(" "),n("ul",t._l(t.trsTool.versions,(function(e){return n("li",{key:e.id},[n("b-link",[t._v(t._s(e.name))]),t._v(" "),n("b-button",{staticClass:"m-1",attrs:{id:"workflow-import"},on:{click:function(n){return t.importVersion(e)}}},[n("font-awesome-icon",{attrs:{icon:"upload"}})],1)],1)})),0)])])}),[],!1,null,null,null).exports},methods:{importVersion:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.services.importTrsTool(this.trsSelection.id,t,e.name).then((function(t){Mt(Object(p.getAppRoot)(),t,i)})).catch((function(t){n.errorMessage=t||"Import failed for an unknown reason."}))}}},Yt=n(12);k.default.use(N.a);var Rt={mixins:[Pt],props:{queryTrsServer:{type:String,default:null},queryTrsId:{type:String,default:null},queryTrsVersionId:{type:String,default:null},isRun:{type:Boolean,default:!1}},created:function(){this.services=new jt.a,this.toolId=this.queryTrsId},data:function(){return{trsSelection:null,toolId:null,trsTool:null,errorMessage:null,isAutoImport:this.queryTrsVersionId&&this.queryTrsServer&&this.queryTrsId}},computed:{hasErrorMessage:function(){return null!=this.errorMessage},isAnonymous:function(){return Object(o.a)().user.isAnonymous()}},watch:{toolId:function(){this.onToolId()}},methods:{onTrsSelection:function(t){this.trsSelection=t,this.toolId&&this.onToolId()},onTrsSelectionError:function(t){this.errorMessage=t},onToolId:function(){var t=this;this.trsSelection&&this.services.getTrsTool(this.trsSelection.id,this.toolId).then((function(e){if(t.trsTool=e,t.errorMessage=null,t.isAutoImport){var n=t.trsTool.versions.find((function(e){return e.id===t.queryTrsVersionId}));n?t.importVersion(t.trsTool.id,n,t.isRun):(Yt.a.warning("Specified version: ".concat(t.queryTrsVersionId," doesn't exist")),t.isAutoImport=!1)}})).catch((function(e){t.trsTool=null,t.errorMessage=e}))}}},Ht=Object(T.a)(Rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isAnonymous?n("b-alert",{staticClass:"text-center my-2",attrs:{show:"",variant:"danger"}},[t._v("Anonymous user cannot import workflows, please register or log in")]):n("b-card",{attrs:{title:"GA4GH Tool Registry Server (TRS) Workflow Import"}},[n("b-alert",{attrs:{show:t.hasErrorMessage,variant:"danger"}},[t._v(t._s(t.errorMessage))]),t._v(" "),n("div",[n("b",[t._v("TRS Server:")]),t._v(" "),n("TrsServerSelection",{attrs:{"query-trs-server":t.queryTrsServer,"query-trs-id":t.queryTrsId},on:{onTrsSelection:t.onTrsSelection,onError:t.onTrsSelectionError}})],1),t._v(" "),t.isAutoImport&&!t.hasErrorMessage?n("div",{staticClass:"text-center my-2"},[n("b-spinner",{staticClass:"align-middle"}),t._v(" "),n("strong",[t._v("Loading your Workflow...")])],1):n("div",[n("div",[n("b",[t._v("TRS ID:")]),t._v(" "),n("b-form-input",{model:{value:t.toolId,callback:function(e){t.toolId=e},expression:"toolId"}})],1),t._v(" "),t.trsTool?n("trs-tool",{attrs:{"trs-tool":t.trsTool},on:{onImport:function(e){return t.importVersion(t.trsTool.id,e)}}}):t._e()],1)],1)],1)}),[],!1,null,null,null).exports,Nt=n(210);k.default.use(Nt.a),k.default.use(N.a);var $t={mixins:[Pt],data:function(){return{query:"",results:[],trsSelection:null,errorMessage:null,trsSearchService:new jt.b({}),searching:!1,searchingFor:null,newSearch:!0,fields:[{key:"name",label:"Name"},{key:"description",label:"Description"},{key:"organization",label:"Organization"}]}},watch:{query:function(){""==this.query?(this.newSearch=!0,this.results=[]):this.trsSearchService.searchQuery=this.query}},subscriptions:function(){return{searchResults:this.trsSearchService.searchResults}},mounted:function(){var t=this,e=null;this.$observables.searchResults.subscribe({next:function(n){t.newSearch=!1,t.searching=!0,t.searchingFor=n[0],null!==e&&e.unsubscribe(),e=n[1].subscribe({next:function(e){t.results=e,t.searching=!1}})},error:function(e){t.errorMessage=e}})},computed:{hasErrorMessage:function(){return null!=this.errorMessage},itemsComputed:function(){return this.computeItems(this.results)},searchHelp:function(){return"Search by workflow description. Tags (key:value) can be used to also search by metadata - for instance name:example. Available tags include organization and name."}},created:function(){this.services=new jt.a},methods:{onTrsSelection:function(t){this.trsSelection=t,this.trsSearchService.trsServer=t.id,this.query=""},onTrsSelectionError:function(t){this.errorMessage=t},showRowDetails:function(t,e,n){"A"!=n.target.nodeName&&(t._showDetails=!t._showDetails)},computeItems:function(t){return t.map((function(t){return{id:t.id,name:t.name,description:t.description,data:t,_showDetails:!1}}))}}},Ft=Object(T.a)($t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{title:"GA4GH Tool Registry Server (TRS) Workflow Search"}},[n("b-alert",{attrs:{show:t.hasErrorMessage,variant:"danger"}},[t._v(t._s(t.errorMessage))]),t._v(" "),n("div",[n("b",[t._v("TRS Server:")]),t._v(" "),n("TrsServerSelection",{on:{onTrsSelection:t.onTrsSelection,onError:t.onTrsSelectionError}})],1),t._v(" "),n("div",[n("b-input-group",{staticClass:"mb-3"},[n("b-input",{attrs:{id:"trs-search-query",placeholder:"search query"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.query=""}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),n("b-input-group-append",[n("b-btn",[n("i",{directives:[{name:"b-popover",rawName:"v-b-popover.bottom",value:t.searchHelp,expression:"searchHelp",modifiers:{bottom:!0}}],staticClass:"fa fa-question",attrs:{title:"Search Help"}})]),t._v(" "),n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"clear search"},on:{click:function(e){t.query=""}}},[n("i",{staticClass:"fa fa-times"})])],1)],1)],1),t._v(" "),n("div",[t.searching?n("b-alert",{attrs:{variant:"info",show:""}},[t._v("\n            Searching for "+t._s(t.searchingFor)+", this may take a while - please be patient.\n        ")]):t.newSearch?n("b-alert",{attrs:{variant:"info",show:""}},[t._v("\n            Enter search query to begin search.\n        ")]):0==t.results.length?n("b-alert",{attrs:{variant:"info",show:""}},[t._v("\n            No search results found, refine your search.\n        ")]):n("b-table",{attrs:{fields:t.fields,items:t.itemsComputed,hover:"",striped:"","caption-top":"",busy:t.searching},on:{"row-clicked":t.showRowDetails},scopedSlots:t._u([{key:"row-details",fn:function(e){return[n("b-card",[n("trs-tool",{attrs:{"trs-tool":e.item.data},on:{onImport:function(n){return t.importVersion(e.item.data.id,n)}}})],1)]}}])})],1)],1)}),[],!1,null,null,null).exports,Wt=n(21);function zt(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Ut(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){zt(r,i,a,o,s,"next",t)}function s(t){zt(r,i,a,o,s,"throw",t)}o(void 0)}))}}function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Bt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=e.root||Object(p.getAppRoot)()}var e,n,i,a,r;return e=t,(n=[{key:"getActiveInteractiveTools",value:(r=Ut(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(this.root,"api/entry_points?running=true"),t.prev=1,t.next=4,S.a.get(e);case 4:return n=t.sent,t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(1),Object(Wt.b)(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return r.apply(this,arguments)})},{key:"stopInteractiveTool",value:(a=Ut(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(this.root,"api/entry_points/").concat(e),t.next=3,S.a.delete(n);case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"catch",value:function(t){Object(Wt.b)(t)}}])&&Vt(e.prototype,n),i&&Vt(e,i),t}();k.default.use(N.a);var qt={components:{UtcDate:ct.a},data:function(){return{error:null,fields:[{label:"",key:"checkbox"},{label:"Name",key:"name",sortable:!0},{label:"Job Info",key:"job_info",sortable:!0},{label:"Created",key:"created_time",sortable:!0},{label:"Last Updated",key:"last_updated",sortable:!0}],filter:"",messages:[],nInteractiveTools:0,activeInteractiveTools:[]}},computed:{showNotFound:function(){return 0===this.nInteractiveTools&&this.filter&&!this.isActiveToolsListEmpty},isCheckboxMarked:function(){return this.activeInteractiveTools.some((function(t){return t.marked}))},isActiveToolsListEmpty:function(){return 0===this.activeInteractiveTools.length},currentHistory:function(){return Object(o.a)().currHistoryPanel}},created:function(){this.root=Object(p.getAppRoot)(),this.services=new Bt({root:this.root}),this.load()},methods:{load:function(){var t=this;this.filter="",this.services.getActiveInteractiveTools().then((function(e){t.activeInteractiveTools=e})).catch((function(e){t.error=e}))},filtered:function(t){this.nInteractiveTools=t.length},stopInteractiveToolSession:function(){var t=this;this.activeInteractiveTools.filter((function(t){return t.marked})).map((function(e){return t.services.stopInteractiveTool(e.id).then((function(e){t.activeInteractiveTools=t.activeInteractiveTools.filter((function(t){return!t.marked}))})).catch((function(n){t.messages.push("Failed to stop interactive tool ".concat(e.name,": ").concat(n.message))}))}))},createId:function(t,e){return t+"-"+e}}},Gt=Object(T.a)(qt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.messages,(function(e,i){return n("b-alert",{key:i,attrs:{show:3,variant:"danger"}},[t._v(t._s(e))])})),t._v(" "),n("h2",[t._v("Active Interactive Tools")]),t._v(" "),n("b-row",{staticClass:"mb-3"},[n("b-col",{attrs:{cols:"6"}},[n("b-input",{staticClass:"m-1",attrs:{id:"interactivetool-search",name:"query",placeholder:"Search Interactive Tool",autocomplete:"off",type:"text"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1),t._v(" "),n("b-table",{attrs:{id:"interactive-tool-table",striped:"",fields:t.fields,items:t.activeInteractiveTools,filter:t.filter},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(checkbox)",fn:function(e){return[n("b-form-checkbox",{attrs:{id:t.createId("checkbox",e.item.id)},model:{value:e.item.marked,callback:function(n){t.$set(e.item,"marked",n)},expression:"row.item.marked"}})]}},{key:"cell(name)",fn:function(e){return[n("a",{attrs:{index:e.index,id:t.createId("link",e.item.id),href:e.item.target,target:"_blank",name:e.item.name}},[t._v(t._s(e.item.name))])]}},{key:"cell(job_info)",fn:function(e){return[e.item.active?n("label",[t._v("\n                running\n            ")]):n("label",[t._v("\n                stopped\n            ")])]}},{key:"cell(created_time)",fn:function(t){return[n("UtcDate",{attrs:{date:t.item.created_time,mode:"elapsed"}})]}},{key:"cell(last_updated)",fn:function(t){return[n("UtcDate",{attrs:{date:t.item.modified_time,mode:"elapsed"}})]}}])}),t._v(" "),t.isActiveToolsListEmpty?n("label",[t._v("You do not have active interactive tools yet ")]):t._e(),t._v(" "),t.showNotFound?n("div",[t._v("\n        No matching entries found for: "),n("span",{staticClass:"font-weight-bold"},[t._v(t._s(this.filter))]),t._v(".\n    ")]):t._e(),t._v(" "),t.isCheckboxMarked?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{id:"stopInteractiveTool",title:"Terminate selected tools"},on:{click:function(e){return e.stopPropagation(),t.stopInteractiveToolSession()}}},[t._v("Stop\n    ")]):t._e()],2)}),[],!1,null,null,null).exports;function Jt(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Kt(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Jt(r,i,a,o,s,"next",t)}function s(t){Jt(r,i,a,o,s,"throw",t)}o(void 0)}))}}function Xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Qt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=e.root||Object(p.getAppRoot)()}var e,n,i,a,r;return e=t,(n=[{key:"getFolderContents",value:(r=Kt(regeneratorRuntime.mark((function t(e,n,i,a){var r,o,s,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(r=l.length>4&&void 0!==l[4]&&l[4])?"&search_text=".concat(encodeURI(r.trim())):"",o="".concat(this.root,"api/folders/").concat(e,"/contents?include_deleted=").concat(n,"&limit=").concat(i,"&offset=").concat(a).concat(r),t.prev=3,t.next=6,S.a.get(o);case 6:return s=t.sent,t.abrupt("return",s.data);case 10:t.prev=10,t.t0=t.catch(3),Object(Wt.b)(t.t0);case 13:case"end":return t.stop()}}),t,this,[[3,10]])}))),function(t,e,n,i){return r.apply(this,arguments)})},{key:"getFilteredFolderContents",value:(a=Kt(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.get("".concat(this.root,"api/folders/").concat(e,"/contents"));case 2:return i=t.sent,t.abrupt("return",i.data.folder_contents.filter((function(t){return!n.some((function(e){return e.id===t.id}))})));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"updateFolder",value:function(t,e,n){var i="".concat(this.root,"api/folders/").concat(t.id);try{return S.a.patch(i,t).then((function(){e()})).catch((function(t){n(t)})).data}catch(t){Object(Wt.b)(t)}}},{key:"newFolder",value:function(t,e,n){var i="".concat(this.root,"api/folders/").concat(t.parent_id);try{return S.a.post(i,{name:t.name,description:t.description}).then((function(t){e(t.data)})).catch((function(t){n(t)})).data}catch(t){Object(Wt.b)(t)}}},{key:"undeleteFolder",value:function(t,e,n){var i="".concat(this.root,"api/folders/").concat(t.id,"?undelete=true");try{return S.a.delete(i).then((function(t){e(t.data)})).catch((function(t){n(t)})).data}catch(t){Object(Wt.b)(t)}}},{key:"undeleteDataset",value:function(t,e,n){var i="".concat(this.root,"api/libraries/datasets/").concat(t.id,"?undelete=true");try{return S.a.delete(i).then((function(t){e(t.data)})).catch((function(t){n(t)})).data}catch(t){Object(Wt.b)(t)}}}])&&Xt(e.prototype,n),i&&Xt(e,i),t}(),Zt=n(441),te=n.n(Zt),ee=[{label:"",key:"type_icon"},{label:"&check;",key:"selected",sortable:!1},{label:"Name",key:"name",sortable:!0},{label:"Description",key:"message",sortable:!1},{label:"Type",key:"type",sortable:!0},{label:"Size",key:"raw_size",sortable:!0},{label:"Updated",key:"update_time",sortable:!0},{label:"State",key:"state",sortable:!0},{label:"",key:"is_unrestricted",sortable:!1},{label:"",key:"buttons",sortable:!1}],ne=n(59);function ie(t,e){var n=Object(o.a)(),i=r.default.template('<div>\n                <table class="grid table table-sm">\n                    <thead>\n                        <th style="width: 25%;">Library</th>\n                        <th></th>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>name</td>\n                            <td><%- library.get("name") %></td>\n                        </tr>\n                        <% if(library.get("description") !== "") { %>\n                            <tr>\n                                <td>description</td>\n                                <td><%- library.get("description") %></td>\n                            </tr>\n                        <% } %>\n                        <% if(library.get("synopsis") !== "") { %>\n                            <tr>\n                                <td>synopsis</td>\n                                <td><%- library.get("synopsis") %></td>\n                            </tr>\n                        <% } %>\n                        <% if(library.get("create_time_pretty") !== "") { %>\n                            <tr>\n                                <td>created</td>\n                                <td>\n                                    <span title="<%- library.get("create_time") %>">\n                                        <%- library.get("create_time_pretty") %>\n                                    </span>\n                                </td>\n                            </tr>\n                        <% } %>\n                        <tr>\n                            <td>id</td>\n                            <td><%- library.get("id") %></td>\n                        </tr>\n                    </tbody>\n                </table>\n                <table class="grid table table-sm">\n                    <thead>\n                        <th style="width: 25%;">Folder</th>\n                        <th></th>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>name</td>\n                            <td><%- options.folder_name %></td>\n                        </tr>\n                        <% if(options.folder_description !== "") { %>\n                            <tr>\n                                <td>description</td>\n                                <td><%- options.folder_description %></td>\n                            </tr>\n                        <% } %>\n                        <tr>\n                            <td>id</td>\n                            <td><%- options.id %></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>');n.modal.show({closing_events:!0,title:_()("Location Details"),body:i({library:t,options:e}),buttons:{Close:function(){n.modal.hide()}}})}var ae=0,re=0,oe=0,se={};function le(t,e,n,i){var a=Object(o.a)(),s=[],l=[];if(0===t.length)Yt.a.info("You must select at least one item for deletion.");else{var c=r.default.template('<div class="import_text">\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>');a.modal.show({closing_events:!0,title:_()("Deleting selected items"),body:c({}),buttons:{Close:function(){a.modal.hide()}}}),se.total_number=0,se.failed_number=0,t.forEach((function(t){var e=t.id;void 0!==e&&("F"==e.substring(0,1)?l.push(e):s.push(e))})),re=s.length+l.length,oe=100/re,ae=0;for(var d=[],u=s.length-1;u>=0;u--){var h=new ne.a.Item({id:s[u]});d.push(h)}for(var f=l.length-1;f>=0;f--){var p=new ne.a.FolderAsModel({id:l[f]});d.push(p)}se.total_number=re,function t(e,n,i,a){var r=Object(o.a)(),s=new ne.a.Folder,l=e.pop();if(void 0===l)return 0===se.failed_number?(a(),Yt.a.success("Selected items were deleted.")):se.failed_number===se.total_number?Yt.a.error("There was an error and no items were deleted. Please make sure you have sufficient permissions."):se.failed_number<se.total_number&&Yt.a.warning("Some of the items could not be deleted. Please make sure you have sufficient permissions."),r.modal.hide(),s;l.destroy().done((function(r){n(r),ce(),t(e,n,i,a)})).fail((function(){se.failed_number+=1,ce(),t(e,n,i,a)})),i()}(d,e,n,i)}}function ce(){ae+=oe,u()(".progress-bar-import").width("".concat(Math.round(ae),"%"));var t="".concat(Math.round(ae),"% Complete");u()(".completion_span").text(t)}var de=n(494),ue=[de.b,de.c,W.D,W.C,W.s,W.p,de.d,W.F,W.c,W.I,W.w,W.L,de.a,de.e,W.v],he=[W.q,W.x,W.r,W.H,W.i,W.d];var fe={ImportDatasetModal:f.a.View.extend({options:null,initialize:function(t){this.options=t,this.options.chain_call_control={total_number:0,failed_number:0},this.importToHistoryModal()},findCheckedItems:function(){return this.options.selected},importToHistoryModal:function(){var t=this,e=Object(o.a)(),n=this.findCheckedItems(),i=this.templateImportIntoHistoryModal();0===n.length?Yt.a.info("You must select some datasets first."):this.fetchUserHistories().done((function(){t.modal=e.modal,t.modal.show({closing_events:!0,title:_()("Import into History"),body:i({histories:t.histories.models}),buttons:{Import:function(){t.importAllIntoHistory()},Close:function(){e.modal.hide()}}})})).fail((function(t,e){void 0!==e.responseJSON?Yt.a.error(e.responseJSON.err_msg):Yt.a.error("An error occurred.")}))},fetchUserHistories:function(){return this.histories=new ne.a.GalaxyHistories,this.histories.fetch()},importAllIntoHistory:function(){var t=this;this.modal.disableButton("Import");var e=this.modal.$("input[name=history_name]").val();if(""!==e)this.createNewHistory(e).done((function(e){t.processImportToHistory(e.id,e.name)})).fail((function(t,e,n){Yt.a.error("An error occurred.")})).always((function(){t.modal.enableButton("Import")}));else{var n=u()("select[name=import_to_history] option:selected").val(),i=u()("select[name=import_to_history] option:selected").text();this.processImportToHistory(n,i),this.modal.enableButton("Import")}},createNewHistory:function(t){return u.a.post("".concat(Object(p.getAppRoot)(),"api/histories"),{name:t})},processImportToHistory:function(t,e){for(var n=this.findCheckedItems(),i=[],a=n.dataset_ids.length-1;a>=0;a--){var r=n.dataset_ids[a],o=new ne.a.HistoryItem;o.url="".concat(o.urlRoot+t,"/contents"),o.content=r,o.source="library",i.push(o)}for(var s=n.folder_ids.length-1;s>=0;s--){var l=n.folder_ids[s],c=new ne.a.HistoryItem;c.url="".concat(c.urlRoot+t,"/contents"),c.content=l,c.source="library_folder",i.push(c)}this.initChainCallControlToHistory({length:i.length,history_name:e}),u.a.getJSON("".concat(Object(p.getAppRoot)(),"history/set_as_current?id=").concat(t)),this.chainCallImportingIntoHistory(i,e)},initChainCallControlToHistory:function(t){var e;e=this.templateImportIntoHistoryProgressBar(),this.modal.$el.find(".modal-body").html(e({history_name:t.history_name})),this.progress=0,this.progressStep=100/t.length,this.options.chain_call_control.total_number=t.length,this.options.chain_call_control.failed_number=0},chainCallImportingIntoHistory:function(t,e){var n=this,i=Object(o.a)(),a=t.pop();if(void 0===a)return 0===this.options.chain_call_control.failed_number?Yt.a.success("Selected datasets imported into history. Click this to start analyzing it.","",{onclick:function(){window.location=Object(p.getAppRoot)()}}):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?Yt.a.error("There was an error and no datasets were imported into history."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&Yt.a.warning("Some of the datasets could not be imported into history. Click this to see what was imported.","",{onclick:function(){window.location=Object(p.getAppRoot)()}}),i.modal.hide(),!0;u.a.when(a.save({content:a.content,source:a.source})).done((function(){ce(),n.chainCallImportingIntoHistory(t,e)})).fail((function(){n.options.chain_call_control.failed_number+=1,ce(),n.chainCallImportingIntoHistory(t,e)}))},templateImportIntoHistoryProgressBar:function(){return r.default.template('<div class="import_text">\n                Importing selected items to history <b><%= _.escape(history_name) %></b>\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateDeletingItemsProgressBar:function(){return r.default.template('<div class="import_text">\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateImportIntoHistoryModal:function(){return r.default.template('<div>\n                <div class="library-modal-item">\n                    Select history:\n                    <select name="import_to_history" style="width:50%; margin-bottom: 1em; " autofocus>\n                        <% _.each(histories, function(history) { %>\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library-modal-item">\n                    or create new:\n                    <input type="text" name="history_name" value=""\n                        placeholder="name of the new history" style="width:50%;" />\n                </div>\n            </div>')}})},pe=n(591),me=n(234),_e=n(592),ge=n(235),ve=n(236),ye=n(154),be=n(270),we={ImportCollectionModal:f.a.View.extend({options:null,initialize:function(t){this.options=t,this.options.chain_call_control={total_number:0,failed_number:0},this.showCollectionSelect()},findCheckedItems:function(){return this.options.selected},fetchUserHistories:function(){return this.histories=new ne.a.GalaxyHistories,this.histories.fetch()},createNewHistory:function(t){return S.a.post("".concat(Object(p.getAppRoot)(),"api/histories"),{name:t})},showCollectionSelect:function(t){var e=this,n=Object(o.a)(),i=this.findCheckedItems(),a=this.templateCollectionSelectModal();this.fetchUserHistories().done((function(){e.modal=n.modal,e.modal.show({closing_events:!0,title:"Create History Collection from Datasets",body:a({selected_datasets:i.dataset_ids.length,histories:e.histories.models}),buttons:{Continue:function(){e.showCollectionBuilder(i.dataset_ids)},Close:function(){n.modal.hide()}}})})).fail((function(t,e){void 0!==e.responseJSON?Yt.a.error(e.responseJSON.err_msg):Yt.a.error("An error occurred.")}))},showCollectionBuilder:function(t){var e=this,n=[],i=this.modal.$('input[type="radio"]:checked').val();if("selection"===i)for(var a=t.length-1;a>=0;a--){var r={},o=t[a];r.id=o.ldda_id,r.name=o.name,r.deleted=o.deleted,r.state=o.state,n.push(r)}else"folder"===i&&(n=this.options.allDatasets);var s=this.modal.$("input[name=history_name]").val();if(""!==s)this.createNewHistory(s).then((function(t){Yt.a.success("History created"),e.collectionImport(n,t.id,t.name)})).catch((function(t){console.error(t),Yt.a.error("An error occurred.")}));else{this.select_collection_history=this.modal.$el.find("#library-collection-history-select");var l=this.select_collection_history.val(),c=this.select_collection_history.find("option:selected").text();this.collectionImport(n,l,c)}},collectionImport:function(t,e,n){var i,a,r=this,o="Creating Collection in ".concat(n);if(this.collectionType=this.modal.$el.find("#library-collection-type-select").val(),"list"===this.collectionType)i=pe.default,a=function(t,n,i){return t=t.map((function(t){return{id:t.id,name:t.name,src:"ldda"}})),r.createHDCA(t,r.collectionType,n,i,e)},me.a.listCollectionCreatorModal(t,{creationFn:a,title:o,defaultHideSourceItems:!0},i);else if("paired"===this.collectionType)i=_e.default,a=function(t,n,i){return t=[{name:"forward",src:"ldda",id:t[0].id},{name:"reverse",src:"ldda",id:t[1].id}],r.createHDCA(t,r.collectionType,n,i,e)},ge.a.pairCollectionCreatorModal(t,{creationFn:a,title:o,defaultHideSourceItems:!0},i);else if("list:paired"===this.collectionType){var s=t.map((function(t){return{id:t.id,name:t.name,src:"ldda"}}));ve.a.pairedListCollectionCreatorModal(s,{historyId:e,title:o,defaultHideSourceItems:!0})}else if("rules"===this.collectionType){ye.a.ruleBasedCollectionCreatorModal(t,"library_datasets","collections",{creationFn:function(t,n,i,a){return r.createHDCA(t,n,i,a,e)},defaultHideSourceItems:!0})}},createHDCA:function(t,e,n,i,a,r){return new be.a.HistoryDatasetCollection({history_content_type:"dataset_collection",collection_type:e,history_id:a,name:n,hide_source_items:i,copy_elements:!i,element_identifiers:t}).save(r)},templateCollectionSelectModal:function(){return r.default.template('<div> \x3c!-- elements selection --\x3e\n                <div class="library-modal-item">\n                    <h4>Which datasets?</h4>\n                    <form class="form-inline">\n                        <div class="form-check form-check-inline">\n                            <input class="form-check-input" type="radio" name="radio_elements" id="selection_radio" value="selection"\n                                <% if (!selected_datasets) { %> disabled <% } else { %> checked <% } %> />\n                            <label class="form-check-label" for="selection_radio">\n                                current selection\n                                <% if (selected_datasets) { %>\n                                    (<%- selected_datasets %>)\n                                <% } %>\n                            </label>\n                        </div>\n                        <div class="form-check form-check-inline">\n                            <input class="form-check-input" type="radio" name="radio_elements" id="folder_radio" value="folder" <% if (!selected_datasets) { %> checked <% } %> >\n                            <label class="form-check-label" for="folder_radio">all datasets in current folder</label>\n                        </div>\n                    </form>\n                </div>\n                \x3c!-- type selection --\x3e\n                <div class="library-modal-item">\n                    <h4>Collection type</h4>\n                    <div class="form-group">\n                        <select id="library-collection-type-select" name="library-collection-type-select" class="form-control">\n                            <option value="list">List</option>\n                            <option value="paired">Paired</option>\n                            <option value="list:paired">List of Pairs</option>\n                            <option value="rules">From Rules</option>\n                        </select>\n                    </div>\n                    <h5>Which type to choose?</h5>\n                    <dl class="row">\n                        <dt class="col-sm-3">List</dt>\n                        <dd class="col-sm-9">Generic collection which groups any number of datasets into a set; similar to file system folder.</dd>\n\n                        <dt class="col-sm-3">Paired</dt>\n                        <dd class="col-sm-9">Simple collection containing exactly two sequence datasets; one reverse and the other forward.</dd>\n\n                        <dt class="col-sm-3">List of Pairs</dt>\n                        <dd class="col-sm-9">Advanced collection containing any number of Pairs; imagine as Pair-type collections inside of a List-type collection.</dd>\n\n                        <dt class="col-sm-3">From Rules</dt>\n                        <dd class="col-sm-9">Use Galaxy\'s rule builder to describe collections. This is more of an advanced feature that allows building any number of collections or any type.</dd>\n                    </dl>\n                </div>\n                \x3c!-- history selection/creation --\x3e\n                <div class="library-modal-item">\n                    <h4>Select history</h4>\n                    <div class="form-group">\n                        <select id="library-collection-history-select" name="library-collection-history-select" class="form-control">\n                            <% _.each(histories, function(history) { %> \x3c!-- history select box --\x3e\n                                <option value="<%= _.escape(history.get("id")) %>">\n                                    <%= _.escape(history.get("name")) %>\n                                </option>\n                            <% }); %>\n                        </select>\n                        <label>or create new:</label>\n                        <input class="form-control" type="text" name="history_name" value="" placeholder="name of the new history" />\n                    </div>\n                </div>\n            </div>')}})},ke=n(49),xe=(n(1601),{AddDatasets:f.a.View.extend({options:null,initialize:function(t){this.options=t,this.options.chain_call_control={total_number:0,failed_number:0},this.list_extensions=t.list_extensions,this.list_genomes=t.list_genomes,this.showImportModal(t)},showImportModal:function(t){switch(t.source){case"history":this.addFilesFromHistoryModal();break;case"importdir":this.importFilesFromGalaxyFolderModal({source:"importdir"});break;case"path":this.importFilesFromPathModal();break;case"userdir":this.importFilesFromGalaxyFolderModal({source:"userdir"});break;default:Yt.a.error("Invalid import source.")}},templateBrowserModal:function(){return r.default.template('<div id="file_browser_modal">\n                    <div style="margin-bottom:1em;">\n                        <label title="Switch to selecting files" class="radio-inline import-type-switch">\n                            <input type="radio" name="jstree-radio" value="jstree-disable-folders" checked="checked">\n                            Choose Files\n                        </label>\n                        <label title="Switch to selecting folders" class="radio-inline import-type-switch">\n                            <input type="radio" name="jstree-radio" value="jstree-disable-files">\n                            Choose Folders\n                        </label>\n                    </div>\n                    <div class="alert alert-info jstree-files-message">\n                        All files you select will be imported into the current folder ignoring their folder structure.\n                    </div>\n                    <div class="alert alert-info jstree-folders-message" style="display:none;">\n                        All files within the selected folders and their subfolders will be imported into the current folder.\n                    </div>\n                    <div style="margin-bottom:1em;">\n                        <label class="checkbox-inline jstree-preserve-structure" style="display:none;">\n                            <input class="preserve-checkbox" type="checkbox" value="preserve_directory_structure">\n                                Preserve directory structure\n                            </label>\n                        <label class="checkbox-inline">\n                            <input class="link-checkbox" type="checkbox" value="link_files">\n                                Link files instead of copying\n                        </label>\n                        <label class="checkbox-inline">\n                            <input class="posix-checkbox" type="checkbox" value="to_posix_lines" checked="checked">\n                                Convert line endings to POSIX\n                        </label>\n                        <label class="checkbox-inline">\n                            <input class="spacetab-checkbox" type="checkbox" value="space_to_tab">\n                                Convert spaces to tabs\n                        </label>\n                    </div>\n                    <button title="Select all files" type="button" class="button primary-button libimport-select-all">\n                        Select all\n                    </button>\n                    <button title="Select no files" type="button" class="button primary-button libimport-select-none">\n                        Unselect all\n                    </button>\n                    <hr /> \x3c!-- append jstree object here --\x3e\n                    <div id="jstree_browser">\n                    </div>\n                    <hr />\n                    <p>You can set extension type and genome for all imported datasets at once:</p>\n                    <div>\n                        Type: <span id="library_extension_select" class="library-extension-select" />\n                        Genome: <span id="library_genome_select" class="library-genome-select" />\n                    </div>\n                    <br />\n                    <div>\n                        <label class="checkbox-inline tag-files">\n                            Tag datasets based on file names\n                            <input class="tag-files" type="checkbox" value="tag_using_filenames">\n                        </label>\n                    </div>\n                </div>')},templateImportPathModal:function(){return r.default.template('<div id="file_browser_modal">\n                <div class="alert alert-info jstree-folders-message">\n                    All files within the given folders and their subfolders will be imported into the current folder.\n                </div>\n                <div style="margin-bottom: 0.5em;">\n                    <label class="checkbox-inline">\n                        <input class="preserve-checkbox" type="checkbox" value="preserve_directory_structure">\n                        Preserve directory structure\n                    </label>\n                    <label class="checkbox-inline">\n                        <input class="link-checkbox" type="checkbox" value="link_files">\n                        Link files instead of copying\n                    </label>\n                    <br>\n                    <label class="checkbox-inline">\n                        <input class="posix-checkbox" type="checkbox" value="to_posix_lines" checked="checked">\n                        Convert line endings to POSIX\n                    </label>\n                    <label class="checkbox-inline">\n                        <input class="spacetab-checkbox" type="checkbox" value="space_to_tab">\n                        Convert spaces to tabs\n                    </label>\n                </div>\n                <textarea id="import_paths" class="form-control" rows="5"\n                    placeholder="Absolute paths (or paths relative to Galaxy root) separated by newline" autofocus>\n                </textarea>\n                <hr />\n                <p>You can set extension type and genome for all imported datasets at once:</p>\n                <div>\n                    Type: <span id="library_extension_select" class="library-extension-select"></span>\n                    Genome: <span id="library_genome_select" class="library-genome-select"></span>\n                </div>\n                <div>\n                    <label class="checkbox-inline tag-files">\n                        Tag datasets based on file names\n                        <input class="tag-files" type="checkbox" value="tag_using_filenames">\n                    </label>\n                </div>\n            </div>')},renderSelectBoxes:function(){var t=Object(o.a)();this.select_genome=new ke.a.View({css:"library-genome-select",data:this.list_genomes,container:t.modal.$el.find("#library_genome_select"),value:"?"}),this.select_extension=new ke.a.View({css:"library-extension-select",data:this.list_extensions,container:t.modal.$el.find("#library_extension_select"),value:"auto"})},addFilesFromHistoryModal:function(){var t=this,e=Object(o.a)();this.histories=new ne.a.GalaxyHistories,this.histories.fetch().done((function(){t.modal=e.modal;var n=t.templateAddFilesFromHistory();t.modal.show({closing_events:!0,title:_()("Adding datasets from your history"),body:n({histories:t.histories.models}),buttons:{Add:function(){t.addAllDatasetsFromHistory()},Close:function(){e.modal.hide()}},closing_callback:function(){}}),t.fetchAndDisplayHistoryContents(t.histories.models[0].id),u()("#dataset_add_bulk").change((function(e){t.fetchAndDisplayHistoryContents(e.target.value)}))})).fail((function(t,e){void 0!==e.responseJSON?Yt.a.error(e.responseJSON.err_msg):Yt.a.error("An error occurred.")}))},importFilesFromGalaxyFolderModal:function(t){var e=this,n=this.templateBrowserModal(),i=Object(o.a)();this.modal=i.modal,this.modal.show({closing_events:!0,title:_()("Please select folders or files"),body:n({}),buttons:{Import:function(){e.importFromJstreePath(e,t)},Close:function(){i.modal.hide()}},closing_callback:function(){e.options.updateContent()}}),u()(".libimport-select-all").bind("click",(function(){u()("#jstree_browser").jstree("check_all")})),u()(".libimport-select-none").bind("click",(function(){u()("#jstree_browser").jstree("uncheck_all")})),this.renderSelectBoxes(),t.disabled_jstree_element="folders",this.renderJstree(t),u()("input[type=radio]").change((function(n){"jstree-disable-folders"===n.target.value?(t.disabled_jstree_element="folders",e.renderJstree(t),u()(".jstree-folders-message").hide(),u()(".jstree-preserve-structure").hide(),u()(".jstree-files-message").show()):"jstree-disable-files"===n.target.value&&(u()(".jstree-files-message").hide(),u()(".jstree-folders-message").show(),u()(".jstree-preserve-structure").show(),t.disabled_jstree_element="files",e.renderJstree(t))}))},importFromJstreePath:function(t,e){var n=u()("#jstree_browser").jstree().get_selected(!0),i=r.default.filter(n,(function(t){return 0==t.state.disabled})),a=this.modal.$el.find(".preserve-checkbox").is(":checked"),o=this.modal.$el.find(".link-checkbox").is(":checked"),s=this.modal.$el.find(".spacetab-checkbox").is(":checked"),l=this.modal.$el.find(".posix-checkbox").is(":checked"),c=this.select_extension.value(),d=this.select_genome.value(),h=this.modal.$el.find(".tag-files").is(":checked"),f=i[0].type,p=[];if(i.length<1)Yt.a.info("Please select some items first.");else{this.modal.disableButton("Import");for(var m=i.length-1;m>=0;m--)void 0!==i[m].li_attr.full_path&&p.push('"'.concat(i[m].li_attr.full_path,'"'));if(this.initChainCallControlAddingDatasets({length:p.length}),"folder"===f){var _="".concat(e.source,"_folder");this.chainCallImportingFolders({paths:p,preserve_dirs:a,link_data:o,space_to_tab:s,to_posix_lines:l,source:_,file_type:c,dbkey:d,tag_using_filenames:h})}else if("file"===f){var g="".concat(e.source,"_file");this.chainCallImportingUserdirFiles({paths:p,file_type:c,dbkey:d,link_data:o,space_to_tab:s,to_posix_lines:l,source:g,tag_using_filenames:h})}}},chainCallImportingUserdirFiles:function(t){var e=this,n=Object(o.a)(),i=t.paths.pop();if(void 0===i)return 0===this.options.chain_call_control.failed_number?(Yt.a.success("Selected files imported into the current folder"),n.modal.hide()):Yt.a.error("An error occurred."),!0;var a="".concat(Object(p.getAppRoot)(),"api/libraries/datasets"),r={encoded_folder_id:this.id,source:t.source,path:i,file_type:t.file_type,link_data:t.link_data,space_to_tab:t.space_to_tab,to_posix_lines:t.to_posix_lines,dbkey:t.dbkey,tag_using_filenames:t.tag_using_filenames};u.a.when(u.a.post(a,r)).done((function(n){ce(),e.chainCallImportingUserdirFiles(t)})).fail((function(){e.options.chain_call_control.failed_number+=1,ce(),e.chainCallImportingUserdirFiles(t)}))},renderJstree:function(t){this.options=r.default.extend(this.options,t);var e=t.source||"userdir",n=this.options.disabled_jstree_element;this.jstree=new ne.a.Jstree,this.jstree.url="".concat(this.jstree.urlRoot,"?target=").concat(e,"&format=jstree&disable=").concat(n),this.jstree.fetch({success:function(t,e){u()("#jstree_browser").jstree("destroy"),u()("#jstree_browser").jstree({core:{data:t},plugins:["types","checkbox"],types:{folder:{icon:"jstree-folder"},file:{icon:"jstree-file"}},checkbox:{three_state:!1}})},error:function(t,e){void 0!==e.responseJSON?404001===e.responseJSON.err_code?(Yt.a.warning(e.responseJSON.err_msg),Object(o.a)().modal.hide()):Yt.a.error(e.responseJSON.err_msg):Yt.a.error("An error occurred.")}})},importFilesFromPathModal:function(){var t=this,e=Object(o.a)();this.modal=e.modal;var n=this.templateImportPathModal();this.modal.show({closing_events:!0,title:_()("Please enter paths to import"),body:n({}),buttons:{Import:function(){t.importFromPathsClicked(t)},Close:function(){e.modal.hide()}},closing_callback:function(){t.options.updateContent()}}),this.renderSelectBoxes()},importFromPathsClicked:function(){var t=this.modal.$el.find(".preserve-checkbox").is(":checked"),e=this.modal.$el.find(".link-checkbox").is(":checked"),n=this.modal.$el.find(".spacetab-checkbox").is(":checked"),i=this.modal.$el.find(".posix-checkbox").is(":checked"),a=this.modal.$el.find(".tag-files").is(":checked"),r=this.select_extension.value(),o=this.select_genome.value(),s=u()("textarea#import_paths").val(),l=[];if(s){this.modal.disableButton("Import");for(var c=(s=s.split("\n")).length-1;c>=0;c--){var d=s[c].trim();0!==d.length&&l.push(d)}this.initChainCallControlAddingDatasets({length:l.length}),this.chainCallImportingFolders({paths:l,preserve_dirs:t,link_data:e,space_to_tab:n,to_posix_lines:i,source:"admin_path",file_type:r,tag_using_filenames:a,dbkey:o})}else Yt.a.info("Please enter a path relative to Galaxy root.")},chainCallImportingFolders:function(t){var e=this,n=Object(o.a)(),i=t.paths.pop();if(void 0===i)return 0===this.options.chain_call_control.failed_number?(Yt.a.success("Selected folders and their contents imported into the current folder."),n.modal.hide()):Yt.a.error("An error occurred."),!0;var a="".concat(Object(p.getAppRoot)(),"api/libraries/datasets"),r={encoded_folder_id:this.id,source:t.source,path:i,preserve_dirs:t.preserve_dirs,link_data:t.link_data,to_posix_lines:t.to_posix_lines,space_to_tab:t.space_to_tab,file_type:t.file_type,dbkey:t.dbkey,tag_using_filenames:t.tag_using_filenames};u.a.when(u.a.post(a,r)).done((function(n){ce(),e.chainCallImportingFolders(t)})).fail((function(){e.options.chain_call_control.failed_number+=1,ce(),e.chainCallImportingFolders(t)}))},fetchAndDisplayHistoryContents:function(t){var e=this;new ne.a.HistoryContents({id:t}).fetch({success:function(n){var i=e.templateHistoryContents();n.length>0?(e.histories.get(t).set({contents:n}),e.modal.$el.find(".library_selected_history_content").html(i({history_contents:n.models.reverse()})),e.modal.$el.find(".history-import-select-all").bind("click",(function(){u()(".library_selected_history_content [type=checkbox]").prop("checked",!0)})),e.modal.$el.find(".history-import-unselect-all").bind("click",(function(){u()(".library_selected_history_content [type=checkbox]").prop("checked",!1)})),e.modal.$el.find(".history-import-toggle-all").bind("click",(function(t){e.selectAll(t)})),e.modal.$el.find(".dataset_row").bind("click",(function(t){e.selectClickedRow(t)}))):e.modal.$el.find(".library_selected_history_content").html("<p>Selected history is empty.</p>")},error:function(t,e){void 0!==e.responseJSON?Yt.a.error(e.responseJSON.err_msg):Yt.a.error("An error occurred.")}})},templateAddingDatasetsProgressBar:function(){return r.default.template('<div class="import_text">\n                Adding selected datasets to library folder <b><%= _.escape(folder_name) %></b>\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateAddFilesFromHistory:function(){return r.default.template('<div id="add_files_modal">\n                <div class="form-group">\n                    <label>1. Select history:</label>\n                    <select id="dataset_add_bulk" name="dataset_add_bulk" class="form-control">\n                        <% _.each(histories, function(history) { %> \x3c!-- history select box --\x3e\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library_selected_history_content">\n                </div>\n            </div>')},templateHistoryContents:function(){return r.default.template('<div class="form-group">\n                <label>2. Choose the datasets to import:</label>\n                <div class="library_style_container" style="width: 100%;" id="dataset_list">\n                    <table class="grid table table-hover table-sm">\n                        <thead>\n                            <tr>\n                                <th style="width: 30px;" class="mid" title="Check to select all datasets">\n                                    <input class="history-import-toggle-all" style="margin: 0;" type="checkbox" />\n                                </th>\n                                <th style="width: 30px;"></th>\n                                <th>Name</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <% _.each(history_contents, function(history_item) { %>\n                                <% if (history_item.get("deleted") != true ) { %>\n                                    <% var item_name = history_item.get("name") %>\n                                    <% if (history_item.get("type") === "collection") { %>\n                                        <% var collection_type = history_item.get("collection_type") %>\n                                        <% if (collection_type === "list") { %>\n                                            <tr class="dataset_row" data-id="<%= _.escape(history_item.get("id")) %>"\n                                                data-name="<%= _.escape(history_item.get("type")) %>">\n                                                <td><input style="margin: 0;" type="checkbox"></td>\n                                                <td><%= _.escape(history_item.get("hid")) %></td>\n                                                <td>\n                                                    <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                                    (Dataset Collection)\n                                                </td>\n                                            </tr>\n                                        <% } else { %>\n                                            <tr class="dataset_row" title="You can convert this collection into a collection of type list using the Collection Tools">\n                                                <td><input style="margin: 0;" type="checkbox" onclick="return false;" disabled="disabled" /></td>\n                                                <td><%= _.escape(history_item.get("hid")) %></td>\n                                                <td>\n                                                    <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                                    (Dataset Collection of type <%= _.escape(collection_type) %> not supported.)\n                                                </td>\n                                            </tr>\n                                        <% } %>\n                                    <% } else if (history_item.get("visible") === true && history_item.get("state") === "ok") { %>\n                                        <tr class="dataset_row" data-id="<%= _.escape(history_item.get("id")) %>"\n                                            data-name="<%= _.escape(history_item.get("type")) %>">\n                                            <td><input style="margin: 0;" type="checkbox"></td>\n                                            <td><%= _.escape(history_item.get("hid")) %></td>\n                                            <td>\n                                                <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                            </td>\n                                        </tr>\n                                    <% } %>\n                                <% } %>\n                            <% }); %>\n                        </tbody>\n                    </table>\n                </div>\n            </div>')},selectClickedRow:function(t){var e,n,i="";e=u()(t.target).closest("tr"),"input"===t.target.localName?(i=t.target,n="input"):"td"===t.target.localName&&(i=e.find(":checkbox")[0],n="td"),i.checked?"td"===n?(i.checked="",this.makeWhiteRow(e)):"input"===n&&this.makeDarkRow(e):"td"===n?(i.checked="selected",this.makeDarkRow(e)):"input"===n&&this.makeWhiteRow(e)},makeDarkRow:function(t){t.addClass("table-primary")},makeWhiteRow:function(t){t.removeClass("table-primary")},addAllDatasetsFromHistory:function(){var t=this.modal.$el.find(".library_selected_history_content").find(":checked"),e=[],n=[],i=[];if(t.length<1)Yt.a.info("You must select some datasets first.");else{this.modal.disableButton("Add"),t.each((function(){var t=u()(this).closest("tr").data("id");if(t){var i=u()(this).closest("tr").data("name");e.push(t),n.push(i)}}));for(var a=e.length-1;a>=0;a--){var r=e[a],o=new ne.a.Item;o.url="".concat(Object(p.getAppRoot)(),"api/folders/").concat(this.options.id,"/contents"),"collection"===n[a]?o.set({from_hdca_id:r}):o.set({from_hda_id:r}),i.push(o)}this.initChainCallControlAddingDatasets({length:i.length}),this.chainCallAddingHdas(i)}},initChainCallControlAddingDatasets:function(t){var e;e=this.templateAddingDatasetsProgressBar(),this.modal.$el.find(".modal-body").html(e({folder_name:this.options.folder_name})),this.progress=0,this.progressStep=100/t.length,this.options.chain_call_control.total_number=t.length,this.options.chain_call_control.failed_number=0},chainCallAddingHdas:function(t){var e=this,n=Object(o.a)();this.added_hdas=new ne.a.Folder;var i=t.pop();if(void 0===i)return 0===this.options.chain_call_control.failed_number?Yt.a.success("Selected datasets from history added to the folder"):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?Yt.a.error("There was an error and no datasets were added to the folder."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&Yt.a.warning("Some of the datasets could not be added to the folder"),this.options.updateContent(),n.modal.hide(),this.added_hdas;u.a.when(i.save({from_hda_id:i.get("from_hda_id")})).done((function(n){ce(),e.chainCallAddingHdas(t)})).fail((function(){e.options.chain_call_control.failed_number+=1,ce(),e.chainCallAddingHdas(t)}))}})});function Se(t,e,n){!function(t,e,n){if(t&&e){e="string"==typeof e?e:u.a.param(e);var i="";u.a.each(e.split("&"),(function(){var t=this.split("=");i+='<input type="hidden" name="'.concat(t[0],'" value="').concat(t[1],'" />')})),u()('<form action="'.concat(t,'" method="').concat(n||"post",'">').concat(i,"</form>")).appendTo("body").submit().remove(),Yt.a.info("Your download will begin soon.")}}("".concat(Object(a.b)(),"api/libraries/datasets/download/").concat(t),{ld_ids:e,folder_ids:n},"get")}var Me={name:"SearchField",data:function(){return{search:"",awaitingSearch:!1}},methods:{startSearch:function(){this.$emit("updateSearch",this.search),this.awaitingSearch=!1}},watch:{search:function(){var t=this;this.awaitingSearch||setTimeout((function(){t.startSearch()}),1e3),this.awaitingSearch=!0}}},Ce=Object(T.a)(Me,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{staticClass:"mr-1",attrs:{type:"search",id:"filterInput",placeholder:"Search"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.startSearch()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)}),[],!1,null,"52bfe91d",null).exports;function Te(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function je(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Te(r,i,a,o,s,"next",t)}function s(t){Te(r,i,a,o,s,"throw",t)}o(void 0)}))}}he.forEach((function(t){F.c.add(t)})),k.default.use(N.a);var Oe,Le={name:"FolderTopBar",props:{folder_id:{type:String,required:!0},include_deleted:{type:Boolean,required:!0},isAllSelectedMode:{type:Boolean,required:!0},selected:{type:Array,required:!0},unselected:{type:Array,required:!0},metadata:{type:Object,required:!0},folderContents:{type:Array,required:!0}},components:{SearchField:Ce,FontAwesomeIcon:$.a},data:function(){return{is_admin:!1,user_library_import_dir_available:!1,library_import_dir:!1,allow_library_path_paste:!1,list_genomes:[],list_extensions:[],auto:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically.\n                     If your file is not detected properly as one of the known formats,\n                     it most likely means that it has some format problems (e.g., different\n                     number of columns on different rows). You can still coerce the system\n                     to set your data to the format you think it should be.\n                     You can also upload compressed files, which will automatically be decompressed"}}},created:function(){var t=Object(o.a)();this.services=new Qt,this.is_admin=t.user.attributes.is_admin,this.user_library_import_dir_available=t.config.user_library_import_dir_available,this.library_import_dir=t.config.library_import_dir,this.allow_library_path_paste=t.config.allow_library_path_paste,this.fetchExtAndGenomes()},computed:{contains_file_or_folder:function(){return this.folderContents.find((function(t){return"folder"===t.type||"file"===t.type}))},logged_dataset_manipulation:function(){var t=Object(o.a)();return!(!this.contains_file_or_folder||!t.user||t.user.isAnonymous())},dataset_manipulation:function(){var t=Object(o.a)();return!(!this.contains_file_or_folder||!t.user)},getHomeUrl:function(){return"".concat(Object(p.getAppRoot)(),"library/list")},allDatasets:function(){return this.folderContents.filter((function(t){return"file"===t.type}))}},methods:{updateSearch:function(t){this.$emit("updateSearch",t)},changeFolderId:function(t){this.$emit("changeFolderId",t)},deleteSelected:function(){var t=this;this.getSelected().then((function(e){return le(e,(function(e){return t.$emit("deleteFromTable",e)}),(function(){return t.$emit("refreshTable")}),(function(){return t.$emit("refreshTableContent")}))}))},getSelected:function(){var t=this;return je(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isAllSelectedMode){e.next=9;break}return t.$emit("setBusy",!0),e.next=4,t.services.getFilteredFolderContents(t.folder_id,t.unselected);case 4:return n=e.sent,t.$emit("setBusy",!1),e.abrupt("return",n);case 9:return e.abrupt("return",t.selected);case 10:case"end":return e.stop()}}),e)})))()},newFolder:function(){this.folderContents.unshift({editMode:!0,isNewFolder:!0,type:"folder",name:"",description:""}),this.$emit("refreshTable")},downloadData:function(t){var e=this;this.findCheckedItems().then((function(n){var i=n.datasets,a=n.folders;0!==e.selected.length?Se(t,i,a):Yt.a.info("You must select at least one dataset to download")}))},addDatasets:function(t){new xe.AddDatasets({source:t,id:this.folder_id,updateContent:this.updateContent,list_genomes:this.list_genomes,list_extensions:this.list_extensions})},findCheckedItems:(Oe=je(regeneratorRuntime.mark((function t(){var e,n,i,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(a.length>0&&void 0!==a[0])||a[0],n=[],i=[],t.next=5,this.getSelected();case 5:return t.sent.forEach((function(t){"file"===t.type?n.push(e?t.id:t):e&&t.id})),t.abrupt("return",{datasets:n,folders:i});case 8:case"end":return t.stop()}}),t,this)}))),function(){return Oe.apply(this,arguments)}),importToHistoryModal:function(t){var e=this;this.findCheckedItems(!t).then((function(n){var i=n.datasets,a=n.folders,r=e.selected;r.dataset_ids=i,r.folder_ids=a,t?new we.ImportCollectionModal({selected:r,allDatasets:e.allDatasets}):new fe.ImportDatasetModal({selected:r})}))},isCurrentFolder:function(t){return this.folder_id===t},fetchExtAndGenomes:function(){var t=this;g.b.get({url:"".concat(Object(p.getAppRoot)(),"api/datatypes?extension_only=False"),success:function(e){for(var n in t.list_extensions=[],e)t.list_extensions.push({id:e[n].extension,text:e[n].extension,description:e[n].description,description_url:e[n].description_url});t.list_extensions.sort((function(t,e){return t.id>e.id?1:t.id<e.id?-1:0})),t.list_extensions.unshift(t.auto)},cache:!0}),g.b.get({url:"".concat(Object(p.getAppRoot)(),"api/genomes"),success:function(e){for(var n in t.list_genomes=[],e)t.list_genomes.push({id:e[n][1],text:e[n][0]});t.list_genomes.sort((function(t,e){return t.id>e.id?1:t.id<e.id?-1:0}))},cache:!0})},showDetails:function(){var t,e,n,i;t=Object.assign({id:this.folder_id},this.metadata),e=t.parent_library_id,n=Object(o.a)(),i=null,n.libraries&&null!==n.libraries.libraryListView?ie(i=n.libraries.libraryListView.collection.get(t.folder_id)):(i=new ne.a.Library({id:e})).fetch({success:function(){ie(i,t)},error:function(t,e){void 0!==e.responseJSON?Yt.a.error(e.responseJSON.err_msg):Yt.a.error("An error occurred.")}})},toggle_include_deleted:function(t){this.$emit("fetchFolderContents",t)},updateContent:function(){this.$emit("fetchFolderContents")}}},De=(n(1602),Object(T.a)(Le,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-breadcrumb",[n("b-breadcrumb-item",{attrs:{title:"Return to the list of libraries",href:t.getHomeUrl}},[t._v("\n            Libraries\n        ")]),t._v(" "),t._l(this.metadata.full_path,(function(e){return[n("b-breadcrumb-item",{key:e[0],attrs:{title:t.isCurrentFolder(e[0])?"You are in this folder":"Return to this folder",active:t.isCurrentFolder(e[0]),href:"#"},on:{click:function(n){return t.changeFolderId(e[0])}}},[t._v(t._s(e[1]))])]}))],2),t._v(" "),n("div",{staticClass:"form-inline d-flex align-items-center mb-2"},[n("a",{staticClass:"mr-1 btn btn-secondary",attrs:{href:t.getHomeUrl,"data-toggle":"tooltip",title:"Go to first page"}},[n("font-awesome-icon",{attrs:{icon:"home"}})],1),t._v(" "),n("div",[n("div",{staticClass:"form-inline"},[n("SearchField",{on:{updateSearch:function(e){return t.updateSearch(e)}}}),t._v(" "),t.metadata.can_add_library_item?n("button",{staticClass:"btn btn-secondary toolbtn-create-folder add-library-items add-library-items-folder mr-1",attrs:{title:"Create new folder",type:"button"},on:{click:t.newFolder}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),t._v("\n                    Folder\n                ")],1):t._e(),t._v(" "),t.metadata.can_add_library_item?n("div",[n("div",{staticClass:"dropdown add-library-items add-library-items-datasets mr-1",attrs:{title:"Add datasets to current folder"}},[t._m(0),t._v(" "),n("div",{staticClass:"dropdown-menu"},[n("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(e){return t.addDatasets("history")}}},[t._v("\n                                from History")]),t._v(" "),t.user_library_import_dir_available?n("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(e){return t.addDatasets("userdir")}}},[t._v("\n                                from User Directory\n                            ")]):t._e(),t._v(" "),t.library_import_dir||t.allow_library_path_paste?n("div",[n("h5",{staticClass:"dropdown-header cursor-pointer"},[t._v("Admins only")]),t._v(" "),t.library_import_dir?n("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(e){return t.addDatasets("importdir")}}},[t._v("\n                                    from Import Directory\n                                ")]):t._e(),t._v(" "),t.allow_library_path_paste?n("a",{staticClass:"dropdown-item cursor-pointer",on:{click:function(e){return t.addDatasets("path")}}},[t._v("\n                                    from Path\n                                ")]):t._e()]):t._e()])])]):t._e(),t._v(" "),n("div",{staticClass:"dropdown mr-1"},[n("button",{staticClass:"primary-button dropdown-toggle add-to-history",attrs:{type:"button","data-toggle":"dropdown"}},[n("font-awesome-icon",{attrs:{icon:"book"}}),t._v("\n                        Export to History "),n("span",{staticClass:"caret"})],1),t._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[n("a",{staticClass:"toolbtn-bulk-import add-to-history-datasets dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(e){return t.importToHistoryModal(!1)}}},[t._v("\n                            as Datasets\n                        ")]),t._v(" "),n("a",{staticClass:"toolbtn-collection-import add-to-history-collection dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(e){return t.importToHistoryModal(!0)}}},[t._v("\n                            as a Collection\n                        ")])])]),t._v(" "),t.dataset_manipulation?n("div",{staticClass:"dropdown dataset-manipulation mr-1",attrs:{title:"Download items as archive"}},[n("button",{staticClass:"primary-button",attrs:{type:"button",id:"download--btn"},on:{click:function(e){return t.downloadData("zip")}}},[n("font-awesome-icon",{attrs:{icon:"download"}}),t._v("\n                        Download\n                    ")],1)]):t._e(),t._v(" "),t.logged_dataset_manipulation?n("button",{staticClass:"primary-button toolbtn-bulk-delete logged-dataset-manipulation mr-1",attrs:{"data-toggle":"tooltip",title:"Mark items deleted",type:"button"},on:{click:t.deleteSelected}},[n("font-awesome-icon",{attrs:{icon:"trash"}}),t._v("\n                    Delete\n                ")],1):t._e(),t._v(" "),n("span",{staticClass:"mr-1",attrs:{"data-toggle":"tooltip",title:"Show location details"}},[n("button",{staticClass:"primary-button toolbtn-show-locinfo",attrs:{type:"button"},on:{click:t.showDetails}},[n("font-awesome-icon",{attrs:{icon:"info-circle"}}),t._v("\n                        Details\n                    ")],1)]),t._v(" "),t.logged_dataset_manipulation?n("div",{staticClass:"form-check logged-dataset-manipulation mr-1"},[n("b-form-checkbox",{attrs:{id:"checkbox-1",checked:t.include_deleted,name:"checkbox-1"},on:{input:function(e){return t.toggle_include_deleted(e)}}},[t._v("\n                        include deleted\n                    ")])],1):t._e()],1)])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[e("span",{staticClass:"fa fa-plus"}),this._v(" Datasets "),e("span",{staticClass:"caret"})])}],!1,null,"ca6baab4",null).exports);ue.forEach((function(t){F.c.add(t)})),k.default.use(N.a);var Ae={props:{folder_id:{type:String,required:!0}},components:{FolderTopBar:De,UtcDate:ct.a,FontAwesomeIcon:$.a},data:function(){return{current_folder_id:null,error:null,isBusy:!1,folder_metadata:{},currentPage:1,fields:ee,selectMode:"multi",selected:[],unselected:[],expandedMessage:[],folderContents:[],perPage:15,maxDescriptionLength:40,filter:null,include_deleted:!1,filterOn:[],search_text:"",isAllSelectedMode:!1,total_rows:0,deselectedDatasets:[]}},created:function(){this.current_folder_id=this.folder_id,this.root=Object(p.getAppRoot)(),this.services=new Qt({root:this.root}),this.fetchFolderContents()},methods:{moveToParentFolder:function(){var t=this.folder_metadata.full_path;if(1!==t.length)return this.changeFolderId(t[t.length-2][0]);window.location="".concat(this.root,"library/list/")},fetchFolderContents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.include_deleted=e,this.setBusy(!0),this.services.getFolderContents(this.current_folder_id,e,this.perPage,(this.currentPage-1)*this.perPage,this.search_text).then((function(e){t.folderContents=e.folder_contents,t.folder_metadata=e.metadata,t.total_rows=e.metadata.total_rows,t.isAllSelectedMode?(t.selected=[],k.default.nextTick((function(){t.selectAllRenderedRows()}))):t.selected.length>0&&k.default.nextTick((function(){t.selected.forEach((function(e){return t.select_unselect_row_by_id(e.id)}))})),t.setBusy(!1)})).catch((function(e){t.error=e}))},updateSearchValue:function(t){this.search_text=t,this.folderContents=[],this.fetchFolderContents(this.include_deleted)},changeFolderId:function(t){this.current_folder_id=t,this.folderContents=[],this.fetchFolderContents(this.include_deleted)},selectAllRenderedRows:function(){var t=this;this.$refs.folder_content_table.items.forEach((function(e,n){e.isNewFolder||e.deleted||t.unselected.some((function(t){return t.id===e.id}))||(t.select_unselect_row(n),t.selected.some((function(t){return t.id===e.id}))||t.selected.push(e))}))},clearRenderedSelectedRows:function(){this.$refs.folder_content_table.clearSelected(),this.selected=[]},refreshTable:function(){this.$refs.folder_content_table.refresh()},refreshTableContent:function(){this.fetchFolderContents(this.include_deleted)},deleteFromTable:function(t){this.folderContents=this.folderContents.filter((function(e){if(e.id!==t.id)return e}))},isAllSelectedOnPage:function(){if(!this.$refs.folder_content_table)return!1;var t=0;return this.$refs.folder_content_table.computedItems.forEach((function(e){(e.isNewFolder||e.deleted)&&t++})),this.selected.length+t===this.$refs.folder_content_table.computedItems.length},toggleSelect:function(){this.unselected=[],this.isAllSelectedOnPage()?(this.isAllSelectedMode=!1,this.clearRenderedSelectedRows()):(this.isAllSelectedMode=!0,this.selectAllRenderedRows())},onRowClick:function(t,e,n){var i=this.selected.findIndex((function(e){return e.id===t.id}));i>-1?(this.selected.splice(i,1),this.select_unselect_row(e,!0),this.isAllSelectedMode&&(this.unselected.push(t),this.total_rows===this.unselected.length&&(this.isAllSelectedMode=!1,this.unselected=[]))):t.isNewFolder||t.deleted||(this.select_unselect_row(e),this.selected.push(t))},select_unselect_row_by_id:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.$refs.folder_content_table.items.findIndex((function(e){return e.id===t}));this.select_unselect_row(n,e)},select_unselect_row:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?this.$refs.folder_content_table.unselectRow(t):this.$refs.folder_content_table.selectRow(t)},bytesToString:function(t){return g.b.bytesToString(t)},createContentLink:function(t){return"file"===t.type?"".concat(this.root,"library/list#folders/").concat(this.current_folder_id,"/datasets/").concat(t.id):"folder"===t.type?"".concat(this.root,"library/folders/").concat(t.id):void 0},createPermissionLink:function(t){return"file"===t.type?"".concat(this.createContentLink(t),"/permissions"):"folder"===t.type?"".concat(this.root,"library/list#folders/").concat(t.id,"/permissions"):void 0},getMessage:function(t){return"file"===t.type?t.message:"folder"===t.type?t.description:void 0},expandMessage:function(t){this.expandedMessage.push(t.id)},setBusy:function(t){this.isBusy=t},linkify:function(t){return te()(t)},toggleEditMode:function(t){t.editMode=!t.editMode,this.folderContents=this.folderContents.filter((function(t){if(!t.isNewFolder)return t})),this.refreshTable()},createNewFolder:function(t){var e=this;t.name?t.name.length<3?Yt.a.warning("Folder name has to be at least 3 characters long."):this.services.newFolder({parent_id:this.current_folder_id,name:t.name,description:t.description},(function(n){t.id=n.id,t.update_time=n.update_time,t.editMode=!1,t.can_manage=!0,t.isNewFolder=!1,e.refreshTable(),Yt.a.success("Folder created.")}),(function(){Yt.a.error("An error occurred.")})):Yt.a.error("Folder's name is missing.")},undelete:function(t){var e=this,n=function(e){var n="".concat("folder"===t.type?"Folder":"Dataset");void 0!==e.responseJSON?Yt.a.error("".concat(n," was not undeleted. ").concat(e.responseJSON.err_msg)):Yt.a.error("An error occurred! ".concat(n," was not undeleted. Please try again."))};"folder"===t.type?this.services.undeleteFolder(t,(function(n){t.deleted=n.deleted,e.refreshTable(),Yt.a.success("Folder undeleted.")}),n):this.services.undeleteDataset(t,(function(n){t.deleted=n.deleted,e.refreshTable(),Yt.a.success("Dataset undeleted. Click this to see it.","",{onclick:function(){window.location="".concat(Object(p.getAppRoot)(),"library/list#folders/").concat(this.current_folder_id,"/datasets/").concat(t.id)}})}),n)},saveChanges:function(t){var e=this,n=!1,i=this.$refs["name".concat(t.id)].value;if(i&&i!==t.name){if(!(i.length>2))return void Yt.a.warning("Folder name has to be at least 3 characters long.");t.name=i,n=!0}var a=this.$refs["description".concat(t.id)].value;void 0!==a&&a!==t.description&&(t.description=a,n=!0),n?this.services.updateFolder(t,(function(){Yt.a.success("Changes to folder saved."),t.editMode=!1,e.refreshTable()}),(function(t){t.data&&t.data.err_msg?Yt.a.error(t.data.err_msg):Yt.a.error("An error occurred while attempting to update the folder.")})):Yt.a.info("Nothing has changed.")}},watch:{currentPage:{handler:function(t){this.fetchFolderContents(this.include_deleted)}},perPage:{handler:function(t){this.fetchFolderContents(this.include_deleted)}}}},Ee=(n(1603),Object(T.a)(Ae,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("FolderTopBar",{attrs:{folderContents:t.folderContents,include_deleted:t.include_deleted,folder_id:t.current_folder_id,selected:t.selected,metadata:t.folder_metadata,unselected:t.unselected,isAllSelectedMode:t.isAllSelectedMode},on:{updateSearch:function(e){return t.updateSearchValue(e)},refreshTable:t.refreshTable,refreshTableContent:t.refreshTableContent,fetchFolderContents:function(e){return t.fetchFolderContents(e)},deleteFromTable:t.deleteFromTable,setBusy:function(e){return t.setBusy(e)},changeFolderId:function(e){return t.changeFolderId(e)}}}),t._v(" "),t.folder_metadata&&t.folder_metadata.full_path?n("a",{staticClass:"btn btn-secondary btn-sm btn_open_folder",on:{click:function(e){return t.moveToParentFolder()}}},[t._v("..")]):t._e(),t._v(" "),n("b-table",{ref:"folder_content_table",attrs:{id:"folder_list_body",striped:"",hover:"",busy:t.isBusy,fields:t.fields,items:t.folderContents,"per-page":t.perPage,selectable:"","no-select-on-click":"","show-empty":""},on:{"update:busy":function(e){t.isBusy=e},"row-clicked":t.onRowClick},scopedSlots:t._u([{key:"empty",fn:function(){return[t.isBusy?n("div",{staticClass:"text-center my-2"},[n("b-spinner",{staticClass:"align-middle"}),t._v(" "),n("strong",[t._v("Loading...")])],1):n("div",{staticClass:"empty-folder-message"},[t._v("\n                    This folder is either empty or you do not have proper access permissions to see the contents. If\n                    you expected something to show up please consult the\n                    "),n("a",{attrs:{href:"https://galaxyproject.org/data-libraries/#permissions",target:"_blank"}},[t._v("\n                        library security wikipage\n                    ")])])]},proxy:!0},{key:"head(selected)",fn:function(){return[t.isAllSelectedMode&&!t.isAllSelectedOnPage()?n("font-awesome-icon",{staticClass:"select-checkbox cursor-pointer",attrs:{size:"lg",title:"Check to select all datasets",icon:"minus-square"},on:{click:t.toggleSelect}}):n("font-awesome-icon",{staticClass:"select-checkbox cursor-pointer",attrs:{size:"lg",title:"Check to select all datasets",icon:t.isAllSelectedOnPage()?["far","check-square"]:["far","square"]},on:{click:t.toggleSelect}})]},proxy:!0},{key:"cell(selected)",fn:function(e){return[e.item.isNewFolder||e.item.deleted?t._e():n("font-awesome-icon",{staticClass:"select-checkbox lib-folder-checkbox",attrs:{size:"lg",icon:e.rowSelected?["far","check-square"]:["far","square"]}})]}},{key:"cell(name)",fn:function(e){return[e.item.editMode?n("div",[e.item.isNewFolder?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.item.name,expression:"row.item.name"}],ref:"name"+e.item.id,staticClass:"form-control",attrs:{name:"input_folder_name",rows:"3"},domProps:{value:e.item.name},on:{input:function(n){n.target.composing||t.$set(e.item,"name",n.target.value)}}}):n("textarea",{ref:"name"+e.item.id,staticClass:"form-control",attrs:{rows:"3"},domProps:{value:e.item.name}})]):e.item.deleted?n("div",[n("div",{staticClass:"deleted-item"},[t._v(t._s(e.item.name))])]):n("div",["folder"===e.item.type?n("a",{attrs:{href:"#"},on:{click:function(n){return t.changeFolderId(e.item.id)}}},[t._v(t._s(e.item.name))]):n("a",{attrs:{href:t.createContentLink(e.item)}},[t._v(t._s(e.item.name))])])]}},{key:"cell(message)",fn:function(e){return[e.item.editMode?n("div",[e.item.isNewFolder?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.item.description,expression:"row.item.description"}],ref:"description"+e.item.id,staticClass:"form-control input_folder_description",attrs:{rows:"3"},domProps:{value:e.item.description},on:{input:function(n){n.target.composing||t.$set(e.item,"description",n.target.value)}}}):n("textarea",{ref:"description"+e.item.id,staticClass:"form-control input_folder_description",attrs:{rows:"3"},domProps:{value:e.item.description}})]):n("div",[t.getMessage(e.item)?n("div",{staticClass:"description-field"},[t.getMessage(e.item).length>t.maxDescriptionLength&&!t.expandedMessage.includes(e.item.id)?n("div",[n("span",{staticClass:"shrinked-description",attrs:{title:t.getMessage(e.item)},domProps:{innerHTML:t._s(t.linkify(t.getMessage(e.item).substring(0,t.maxDescriptionLength)))}}),t._v(" "),n("span",{attrs:{title:t.getMessage(e.item)}},[t._v(" ...")]),t._v(" "),n("a",{staticClass:"more-text-btn",attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.expandMessage(e.item)}}},[t._v("(more)")])]):n("div",{domProps:{innerHTML:t._s(t.linkify(t.getMessage(e.item)))}})]):t._e()])]}},{key:"cell(type_icon)",fn:function(e){return["folder"===e.item.type?n("font-awesome-icon",{attrs:{icon:["far","folder"],title:"Folder"}}):"file"===e.item.type?n("font-awesome-icon",{attrs:{title:"Dataset",icon:["far","file"]}}):t._e()]}},{key:"cell(type)",fn:function(e){return["folder"===e.item.type?n("div",[t._v(t._s(e.item.type))]):"file"===e.item.type?n("div",[t._v(t._s(e.item.file_ext))]):t._e()]}},{key:"cell(raw_size)",fn:function(e){return["file"===e.item.type?n("div",{domProps:{innerHTML:t._s(t.bytesToString(e.item.raw_size))}}):t._e()]}},{key:"cell(state)",fn:function(e){return["ok"!=e.item.state?n("div",[t._v("\n                    "+t._s(e.item.state)+"\n                ")]):t._e()]}},{key:"cell(update_time)",fn:function(e){return[e.item.update_time?n("UtcDate",{attrs:{date:e.item.update_time,"custom-format":"'YYYY-MM-DD- HH:mm a'",mode:"elapsed"}}):t._e()]}},{key:"cell(is_unrestricted)",fn:function(e){return[e.item.is_unrestricted?n("font-awesome-icon",{attrs:{title:"Unrestricted dataset",icon:"globe"}}):e.item.deleted?n("font-awesome-icon",{attrs:{title:"Marked deleted",icon:"ban"}}):e.item.is_private?n("font-awesome-icon",{attrs:{title:"Private dataset",icon:"key"}}):!1===e.item.is_private&&!1===e.item.is_unrestricted?n("font-awesome-icon",{attrs:{title:"Restricted dataset",icon:"shield-alt"}}):t._e()]}},{key:"cell(buttons)",fn:function(e){return[e.item.editMode?n("div",[n("button",{staticClass:"primary-button btn-sm permission_folder_btn save_folder_btn",attrs:{title:"save "+e.item.name},on:{click:function(n){e.item.isNewFolder?t.createNewFolder(e.item):t.saveChanges(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["far","save"]}}),t._v("\n                        Save\n                    ")],1),t._v(" "),n("button",{staticClass:"primary-button btn-sm permission_folder_btn",attrs:{title:"Discard Changes"},on:{click:function(n){return t.toggleEditMode(e.item)}}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}}),t._v("\n                        Cancel\n                    ")],1)]):n("div",[e.item.can_manage&&!e.item.deleted&&"folder"===e.item.type?n("b-button",{staticClass:"lib-btn permission_folder_btn edit_folder_btn",attrs:{"data-toggle":"tooltip","data-placement":"top",size:"sm",title:"Edit "+e.item.name},on:{click:function(n){return t.toggleEditMode(e.item)}}},[n("font-awesome-icon",{attrs:{icon:"pencil-alt"}}),t._v("\n                        Edit\n                    ")],1):t._e(),t._v(" "),e.item.can_manage&&!e.item.deleted?n("b-button",{staticClass:"lib-btn permission_folder_btn",attrs:{href:t.createPermissionLink(e.item),"data-toggle":"tooltip","data-placement":"top",size:"sm",title:"Permissions of "+e.item.name}},[n("font-awesome-icon",{attrs:{icon:"users"}}),t._v("\n                        Manage\n                    ")],1):t._e(),t._v(" "),e.item.deleted?n("button",{staticClass:"lib-btn primary-button btn-sm undelete_dataset_btn",attrs:{title:"Undelete "+e.item.name,type:"button"},on:{click:function(n){return t.undelete(e.item)}}},[n("font-awesome-icon",{attrs:{icon:"unlock"}}),t._v("\n                        Undelete\n                    ")],1):t._e()],1)]}}])}),t._v(" "),n("b-container",[n("b-row",{staticClass:"justify-content-md-center"},[n("b-col",{attrs:{md:"auto"}},[n("b-pagination",{attrs:{"total-rows":t.total_rows,"per-page":t.perPage,"aria-controls":"folder_list_body"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),n("b-col",{attrs:{cols:"1.5"}},[n("table",[n("tr",[n("td",{staticClass:"m-0 p-0"},[n("b-form-input",{staticClass:"pagination-input-field",attrs:{id:"paginationPerPage",autocomplete:"off",type:"number"},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1),t._v(" "),n("td",{staticClass:"text-muted ml-1 paginator-text"},[n("span",{staticClass:"pagination-total-pages-text"},[t._v("per page, "+t._s(t.total_rows)+" total")])])])])])],1)],1)],1)])}),[],!1,null,"2411371d",null).exports);F.c.add(W.f);var Ie={props:["workflow"],components:{FontAwesomeIcon:$.a},computed:{urlEdit:function(){return"".concat(Object(p.getAppRoot)(),"workflow/editor?id=").concat(this.workflow.id)},urlDownload:function(){return"".concat(Object(p.getAppRoot)(),"api/workflows/").concat(this.workflow.id,"/download?format=json-download")},urlShare:function(){return"".concat(Object(p.getAppRoot)(),"workflow/sharing?id=").concat(this.workflow.id)},urlView:function(){return"".concat(Object(p.getAppRoot)(),"workflow/display_by_id?id=").concat(this.workflow.id)},urlViewShared:function(){return"".concat(Object(p.getAppRoot)(),"workflow/display_by_username_and_slug?username=").concat(this.workflow.owner,"&slug=").concat(this.workflow.slug)}},created:function(){this.root=Object(p.getAppRoot)(),this.services=new jt.a({root:this.root})},methods:{onCopy:function(){var t=this;this.services.copyWorkflow(this.workflow).then((function(e){t.$emit("onAdd",e),t.$emit("onSuccess","Successfully copied workflow '".concat(t.workflow.name,"' to '").concat(e.name,"'."))})).catch((function(e){t.$emit("onError",e)}))},onDelete:function(){var t=this,e=this.workflow.id,n=this.workflow.name;window.confirm("Are you sure you want to delete workflow '".concat(n,"'?"))&&this.services.deleteWorkflow(e).then((function(n){t.$emit("onRemove",e),t.$emit("onSuccess",n)})).catch((function(e){t.$emit("onError",e)}))},onRename:function(){var t=this,e=this.workflow.id,n=this.workflow.name,i=window.prompt("Enter a new name for workflow '".concat(n,"'"),n);if(i){var a={name:i};this.services.updateWorkflow(e,a).then((function(){t.$emit("onUpdate",e,a),t.$emit("onSuccess","Successfully changed name of workflow '".concat(n,"' to '").concat(i,"'."))})).catch((function(e){t.$emit("onError",e)}))}}}},Pe=Object(T.a)(Ie,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-link",{staticClass:"workflow-dropdown font-weight-bold",attrs:{id:"workflow-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("font-awesome-icon",{attrs:{icon:"caret-down"}}),t._v(" "),n("span",[t._v(t._s(t.workflow.name))])],1),t._v(" "),t.workflow.description?n("p",[t._v(t._s(t.workflow.description))]):t._e(),t._v(" "),t.workflow.shared?n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"workflow-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onCopy(e)}}},[n("span",{staticClass:"fa fa-copy fa-fw mr-1"}),t._v(" "),n("span",[t._v("Copy")])]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:t.urlViewShared}},[n("span",{staticClass:"fa fa-eye fa-fw mr-1"}),t._v(" "),n("span",[t._v("View")])])]):n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"workflow-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:t.urlEdit}},[n("span",{staticClass:"fa fa-edit fa-fw mr-1"}),t._v(" "),n("span",[t._v("Edit")])]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onCopy(e)}}},[n("span",{staticClass:"fa fa-copy fa-fw mr-1"}),t._v(" "),n("span",[t._v("Copy")])]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:t.urlDownload}},[n("span",{staticClass:"fa fa-download fa-fw mr-1"}),t._v(" "),n("span",[t._v("Download")])]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onRename(e)}}},[n("span",{staticClass:"fa fa-signature fa-fw mr-1"}),t._v(" "),n("span",[t._v("Rename")])]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:t.urlShare}},[n("span",{staticClass:"fa fa-share-alt fa-fw mr-1"}),t._v(" "),n("span",[t._v("Share")])]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:t.urlView}},[n("span",{staticClass:"fa fa-eye fa-fw mr-1"}),t._v(" "),n("span",[t._v("View")])]),t._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onDelete(e)}}},[n("span",{staticClass:"fa fa-trash fa-fw mr-1"}),t._v(" "),n("span",[t._v("Delete")])])])],1)}),[],!1,null,null,null).exports;function Ye(t){return function(t){if(Array.isArray(t))return Re(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Re(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}F.c.add(W.x),F.c.add(W.J),F.c.add(W.D),F.c.add(W.p),F.c.add(W.B);var He={components:{FontAwesomeIcon:$.a,UtcDate:ct.a,Tags:dt.a,WorkflowDropdown:Pe},data:function(){return{error:null,fields:[{key:"name",sortable:!0},{key:"tags",sortable:!0},{label:"Updated",key:"update_time",sortable:!0},{label:"Sharing",key:"published",sortable:!0},{label:"Bookmarked",key:"show_in_tool_panel",sortable:!0},{key:"execute",label:""}],filter:"",loading:!0,message:null,messageVariant:null,nWorkflows:0,workflows:[]}},computed:{showNotFound:function(){return 0===this.nWorkflows&&this.filter},showNotAvailable:function(){return 0===this.nWorkflows&&!this.filter},showMessage:function(){return!!this.message}},created:function(){this.root=Object(p.getAppRoot)(),this.services=new jt.a({root:this.root}),this.load()},methods:{load:function(){var t=this;this.loading=!0,this.filter="",this.services.getWorkflows().then((function(e){t.workflows=e,t.nWorkflows=e.length,t.loading=!1})).catch((function(e){t.error=e}))},filtered:function(t){this.nWorkflows=t.length},createWorkflow:function(t){window.location="".concat(this.root,"workflows/create")},importWorkflow:function(t){window.location="".concat(this.root,"workflows/import")},executeWorkflow:function(t){window.location="".concat(this.root,"workflows/run?id=").concat(t.id)},bookmarkWorkflow:function(t){var e=this,n=t.id,i={show_in_tool_panel:!t.show_in_tool_panel,tags:t.tags};this.services.updateWorkflow(n,i).then((function(){window.location="".concat(Object(p.getAppRoot)(),"workflows/list")})).catch((function(t){e.onError(t)}))},onTags:function(t,e){var n=this,i=this.workflows[e];i.tags=t,this.services.updateWorkflow(i.id,{show_in_tool_panel:i.show_in_tool_panel,tags:i.tags}).catch((function(t){n.onError(t)}))},onAdd:function(t){this.workflows.unshift(t),this.nWorkflows=this.workflows.length},onRemove:function(t){this.workflows=this.workflows.filter((function(e){return e.id!==t})),this.nWorkflows=this.workflows.length},onUpdate:function(t,e){var n=this.workflows.find((function(e){return e.id===t}));Object.assign(n,e),this.workflows=Ye(this.workflows)},onSuccess:function(t){this.message=t,this.messageVariant="success"},onError:function(t){this.message=t,this.messageVariant="danger"}}},Ne=Object(T.a)(He,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.error?n("div",{staticClass:"alert alert-danger",attrs:{show:""}},[t._v(t._s(t.error))]):n("div",[t.loading?n("span",[n("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}),t._v("\n            Loading workflows...\n        ")],1):n("div",[n("b-alert",{attrs:{variant:t.messageVariant,show:t.showMessage}},[t._v(t._s(t.message))]),t._v(" "),n("b-row",{staticClass:"mb-3"},[n("b-col",{attrs:{cols:"6"}},[n("b-input",{staticClass:"m-1",attrs:{id:"workflow-search",name:"query",placeholder:"Search Workflows",autocomplete:"off",type:"text"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),t._v(" "),n("b-col",[n("span",{staticClass:"float-right"},[n("b-button",{staticClass:"m-1",attrs:{id:"workflow-create"},on:{click:t.createWorkflow}},[n("font-awesome-icon",{attrs:{icon:"plus"}}),t._v("\n                            Create\n                        ")],1),t._v(" "),n("b-button",{staticClass:"m-1",attrs:{id:"workflow-import"},on:{click:t.importWorkflow}},[n("font-awesome-icon",{attrs:{icon:"upload"}}),t._v("\n                            Import\n                        ")],1)],1)])],1),t._v(" "),n("b-table",{attrs:{id:"workflow-table",striped:"",fields:t.fields,items:t.workflows,filter:t.filter},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[n("WorkflowDropdown",{attrs:{workflow:e.item},on:{onAdd:t.onAdd,onRemove:t.onRemove,onUpdate:t.onUpdate,onSuccess:t.onSuccess,onError:t.onError}})]}},{key:"cell(tags)",fn:function(e){return[n("Tags",{attrs:{index:e.index,tags:e.item.tags},on:{input:t.onTags}})]}},{key:"cell(published)",fn:function(e){return[e.item.published?n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Published",icon:"globe"}}):t._e(),t._v(" "),e.item.shared?n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Shared",icon:"share-alt"}}):t._e()]}},{key:"cell(show_in_tool_panel)",fn:function(e){return[n("b-form-checkbox",{on:{change:function(n){return t.bookmarkWorkflow(e.item)}},model:{value:e.item.show_in_tool_panel,callback:function(n){t.$set(e.item,"show_in_tool_panel",n)},expression:"row.item.show_in_tool_panel"}})]}},{key:"cell(update_time)",fn:function(t){return[n("UtcDate",{attrs:{date:t.value,mode:"elapsed"}})]}},{key:"cell(execute)",fn:function(e){return[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"workflow-run btn-sm btn-primary fa fa-play",attrs:{title:"Run Workflow"},on:{click:function(n){return n.stopPropagation(),t.executeWorkflow(e.item)}}})]}}])}),t._v(" "),t.showNotFound?n("div",[t._v("\n                No matching entries found for: "),n("span",{staticClass:"font-weight-bold"},[t._v(t._s(this.filter))]),t._v(".\n            ")]):t._e(),t._v(" "),t.showNotAvailable?n("div",[t._v("\n                No workflows found. You may create or import new workflows.\n            ")]):t._e()],1)])])}),[],!1,null,null,null).exports,$e=n(595),Fe=n(64),We={components:{BFormInput:$e.a},props:{value:{type:String},mode:{type:String,default:"file"},requireWritable:{type:Boolean,default:!1}},data:function(){return{localValue:this.value}},computed:{placeholder:function(){return"Click to select ".concat(this.mode)}},methods:{selectFile:function(){var t=this,e={mode:this.mode,requireWritable:this.requireWritable};Object(Fe.c)((function(e){t.localValue=null==e?void 0:e.url}),e)}},watch:{localValue:function(t){this.$emit("input",t)},value:function(t){this.localValue=t}}},ze=Object(T.a)(We,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-form-input",{staticClass:"directory-form-input",attrs:{placeholder:t.placeholder},on:{click:t.selectFile},model:{value:t.localValue,callback:function(e){t.localValue=e},expression:"localValue"}})}),[],!1,null,null,null).exports,Ue=n(142);function Ve(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(t,"?full=true");return new Promise((function t(a,r){S.a.get(i).then((function(i){var o=i.data.state;null!==e&&e(o),-1!==Ue.a.NON_TERMINAL_STATES.indexOf(o)?setTimeout(t,n,a,r):-1!==Ue.a.ERROR_STATES.indexOf(o)?r(i):a(i)})).catch(r)}))}var Be=n(132);F.c.add(W.r),k.default.use(N.a);var qe={components:{JobInformation:Be.a,FontAwesomeIcon:$.a},props:{job:{type:Object,required:!0},header:{type:String,default:"Job ended in error"}},data:function(){return{expanded:!1,showInfo:!1}},computed:{errorClasses:function(){var t=["code"];return this.expanded||t.push("preview"),t}},methods:{toggleExpanded:function(){this.expanded=!this.expanded}}},Ge=(n(1604),Object(T.a)(qe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{"border-variant":"danger",header:t.header}},[n("b-card-text",[n("div",{on:{click:function(e){t.showInfo=!0}}},[n("a",{attrs:{href:"#"}},[t._v("See full job details "),n("font-awesome-icon",{attrs:{icon:"info-circle"}})],1)]),t._v(" "),t.job.stderr?n("div",{staticClass:"error-wrapper",on:{click:t.toggleExpanded}},[t._v("\n            Job Standard Error\n            "),n("pre",{class:t.errorClasses},[t._v(t._s(t.job.stderr))]),t._v(" "),t.expanded?t._e():n("b",[t._v("(Click to expand job standard error)")])]):t._e()]),t._v(" "),n("b-modal",{attrs:{"modal-class":"job-information-modal",scrollable:"","ok-only":"","hide-header":""},model:{value:t.showInfo,callback:function(e){t.showInfo=e},expression:"showInfo"}},[n("job-information",{attrs:{job_id:t.job.id,"include-times":!0}})],1)],1)}),[],!1,null,"23bb3cb0",null).exports),Je=n(232);function Ke(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Xe(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Ke(r,i,a,o,s,"next",t)}function s(t){Ke(r,i,a,o,s,"throw",t)}o(void 0)}))}}F.c.add(W.o),F.c.add(W.J),F.c.add(W.l),k.default.use(N.a);var Qe={components:{FilesInput:ze,FontAwesomeIcon:$.a,JobError:Ge,LoadingSpan:ut.a},data:function(){return{initializing:!0,importType:"externalUrl",sourceFile:null,sourceURL:null,sourceRemoteFilesUri:null,errorMessage:null,waitingOnJob:!1,complete:!1,jobError:null,hasFileSources:!1}},mounted:function(){var t=this;return Xe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initialize();case 2:case"end":return e.stop()}}),e)})))()},computed:{importReady:function(){var t=this.importType;return"externalUrl"==t?!!this.sourceURL:"upload"==t?!!this.sourceFile:"remoteFilesUri"==t&&!!this.sourceRemoteFilesUri},historyLink:function(){return"".concat(Object(p.getAppRoot)(),"histories/list")}},methods:{initialize:function(){var t=this;return Xe(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Je.a).getFileSources();case 2:n=e.sent,t.hasFileSources=n.length>0,t.initializing=!1;case 5:case"end":return e.stop()}}),e)})))()},submit:function(t){var e=this,n=new FormData,i=this.importType;"externalUrl"==i?n.append("archive_source",this.sourceURL):"upload"==i?(n.append("archive_file",this.sourceFile),n.append("archive_source","")):"remoteFilesUri"==i&&n.append("archive_source",this.sourceRemoteFilesUri),S.a.post("".concat(Object(p.getAppRoot)(),"api/histories"),n).then((function(t){e.waitingOnJob=!0,Ve(t.data.id).then((function(t){e.waitingOnJob=!1,e.complete=!0})).catch(e.handleError)})).catch(this.handleError)},handleError:function(t){var e;this.waitingOnJob=!1,this.errorMessage=Object(Wt.a)(t,"History import failed."),(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.stderr)&&(this.jobError=t.data)}},watch:{importType:function(){"remoteFilesUri"!=this.importType||this.sourceRemoteFilesUri||this.$refs.filesInput.selectFile()}}},Ze=(n(1605),Object(T.a)(Qe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{"body-class":"history-import-component",title:"Import a history from an archive"}},[t.errorMessage?n("b-alert",{attrs:{variant:"danger",dismissible:"",show:""},on:{dismissed:function(e){t.errorMessage=null}}},[t._v("\n        "+t._s(t.errorMessage)+"\n        "),t.jobError?n("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History import job ended in error",job:t.jobError}}):t._e()],1):t._e(),t._v(" "),t.initializing?n("div",[n("loading-span",{attrs:{message:"Loading server configuration."}})],1):t.waitingOnJob?n("div",[n("LoadingSpan",{attrs:{message:"Waiting on history import job, this may take a while."}})],1):t.complete?n("div",[n("b-alert",{attrs:{show:t.complete,variant:"success",dismissible:""},on:{dismissed:function(e){t.complete=!1}}},[n("h4",[t._v("Done!")]),t._v(" "),n("p",[t._v("History imported, check out "),n("a",{attrs:{href:t.historyLink}},[t._v("your histories")]),t._v(".")])])],1):n("div",[n("b-form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("b-form-group",{attrs:{label:"How would you like to specify the history archive?"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.ariaDescribedby;return[n("b-form-radio-group",{attrs:{"aria-describedby":i,name:"import-type",stacked:""},model:{value:t.importType,callback:function(e){t.importType=e},expression:"importType"}},[n("b-form-radio",{attrs:{value:"externalUrl"}},[t._v("\n                        Export URL from another Galaxy instance\n                        "),n("font-awesome-icon",{attrs:{icon:"external-link-alt"}})],1),t._v(" "),n("b-form-radio",{attrs:{value:"upload"}},[t._v("\n                        Upload local file from your computer\n                        "),n("font-awesome-icon",{attrs:{icon:"upload"}})],1),t._v(" "),t.hasFileSources?n("b-form-radio",{attrs:{value:"remoteFilesUri"}},[t._v("\n                        Select a remote file (e.g. Galaxy's FTP)\n                        "),n("font-awesome-icon",{attrs:{icon:"folder-open"}})],1):t._e()],1)]}}])}),t._v(" "),"externalUrl"==t.importType?n("b-form-group",{attrs:{label:"Archived History URL"}},[n("b-form-input",{attrs:{type:"url"},model:{value:t.sourceURL,callback:function(e){t.sourceURL=e},expression:"sourceURL"}})],1):t._e(),t._v(" "),"upload"==t.importType?n("b-form-group",{attrs:{label:"Archived History File"}},[n("b-form-file",{model:{value:t.sourceFile,callback:function(e){t.sourceFile=e},expression:"sourceFile"}})],1):t._e(),t._v(" "),n("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"remoteFilesUri"==t.importType,expression:"importType == 'remoteFilesUri'"}],attrs:{label:"Remote File"}},[n("files-input",{ref:"filesInput",model:{value:t.sourceRemoteFilesUri,callback:function(e){t.sourceRemoteFilesUri=e},expression:"sourceRemoteFilesUri"}})],1),t._v(" "),n("b-button",{staticClass:"import-button",attrs:{variant:"primary",type:"submit",disabled:!t.importReady}},[t._v("Import history")])],1)],1)],1)}),[],!1,null,"8d5a1c74",null).exports),tn=n(481),en=n(155);F.c.add(W.t);var nn={components:{BModal:tn.a,JobInformation:Be.a,FontAwesomeIcon:$.a},props:{historyExport:{type:Object,required:!0}},data:function(){return{details:!1}},computed:{link:function(){return this.historyExport.external_download_permanent_url}},methods:{showDetails:function(){this.details=!0},copyUrl:function(){Object(en.a)(this.latestExportUrl,"Export URL copied to your clipboard")}}},an=Object(T.a)(nn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("b",[n("a",{staticClass:"generated-export-link",attrs:{href:t.link}},[t._v(t._s(t.link))])]),t._v(" "),n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"copy-export-link",staticStyle:{cursor:"pointer"},attrs:{title:"Copy export URL to your clipboard",icon:"link"},on:{click:t.copyUrl}}),t._v(" "),n("i",{attrs:{title:"Information about when the history export was generated is included in the job details. Additionally, if there are issues with export, the job details may help figure out the underlying problem or communicate issues to your Galaxy administrator."}},[t._v("\n        ("),n("a",{staticClass:"show-job-link",attrs:{href:"#"},on:{click:t.showDetails}},[t._v("view job details")]),t._v(")\n    ")]),t._v(" "),n("b-modal",{attrs:{"modal-class":"job-information-modal",scrollable:"","ok-only":"","hide-header":""},model:{value:t.details,callback:function(e){t.details=e},expression:"details"}},[n("job-information",{attrs:{job_id:t.historyExport.job_id,"include-times":!0}})],1)],1)}),[],!1,null,null,null).exports;k.default.use(N.a);var rn={components:{LoadingSpan:ut.a,ExportLink:an,JobError:Ge},props:{historyId:{type:String,required:!0}},data:function(){return{errorMessage:null,exportsInitialized:!1,exports:null,loadingExports:!1,waitingOnJob:!1,jobError:null}},created:function(){this.exportsInitialized||(this.exportsInitialized=!0,this.loadExports())},computed:{hasExports:function(){return null!==this.exports&&this.exports.length>0},latestExport:function(){return this.exports&&this.exports[0]},readyExports:function(){return(this.exports||[]).filter((function(t){return t.ready}))},hasReadyExport:function(){return null!==this.latestReadyExport},latestReadyExport:function(){return this.readyExports.length>0?this.readyExports[0]:null},latestExportReady:function(){var t,e;return(null===(t=this.latestExport)||void 0===t?void 0:t.ready)&&(null===(e=this.latestExport)||void 0===e?void 0:e.up_to_date)},latestExportPreparing:function(){var t;return null===(t=this.latestExport)||void 0===t?void 0:t.preparing},whyNoLink:function(){return this.hasExports?"previous history export archival likely failed":"no history export ever initiated for this history"}},methods:{loadExports:function(){var t=this;this.loadingExports=!0;var e="".concat(Object(p.getAppRoot)(),"api/histories/").concat(this.historyId,"/exports");S.a.get(e).then((function(e){t.loadingExports=!1,t.exports=e.data,t.latestExportPreparing?t.waitOnExportJob(t.latestExport.job_id):t.waitingOnJob=!1})).catch(this.handleError)},regenerateExport:function(){var t=this;this.waitingOnJob=!0;var e="".concat(Object(p.getAppRoot)(),"api/histories/").concat(this.historyId,"/exports");S.a.put(e).then((function(e){var n=e.status;200==n?t.loadExports():202==n?t.waitOnExportJob(e.data.job_id):t.errorMessage="Unexpected error while polling history export ".concat(Object(Wt.a)(e))})).catch(this.handleError)},waitOnExportJob:function(t){var e=this;this.waitingOnJob=!0,this.jobError=!1,Ve(t).then((function(t){e.waitingOnJob=!1,e.loadExports()})).catch(this.handleError)},handleError:function(t){var e;this.waitingOnJob=!1,this.loadingExports=!1,this.errorMessage=Object(Wt.a)(t,"Error generating a history export link"),(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.stderr)&&(this.jobError=t.data)}}},on=Object(T.a)(rn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger",dismissible:""},on:{dismissed:function(e){t.errorMessage=null}}},[t._v("\n        "+t._s(t.errorMessage)+"\n        "),t.jobError?n("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History export job ended in error",job:t.jobError}}):t._e()],1):t._e(),t._v(" "),t.loadingExports?n("div",[n("loading-span",{attrs:{message:"Loading history export information from Galaxy server."}})],1):t.waitingOnJob?n("div",[n("loading-span",{attrs:{message:"Galaxy server is preparing history for download, this will likely take a while."}})],1):t.latestExportReady?n("div",[t._v("\n        Link for download ready\n        "),n("export-link",{attrs:{historyExport:t.latestExport}}),t._v("\n        . Use this link to download the archive or import it on another Galaxy server.\n    ")],1):t.hasReadyExport?n("div",[n("p",[t._v("An out of date export is ready "),n("export-link",{attrs:{historyExport:t.latestReadyExport}}),t._v(".")],1),t._v(" "),n("p",[t._v("\n            The history has changed since this export was generated,\n            "),n("a",{staticClass:"export-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.regenerateExport(e)}}},[t._v("click here to generate a new archive for the current history state")]),t._v(".\n        ")])]):n("div",[n("p",[t._v("No link for history export ready, "+t._s(t.whyNoLink)+".")]),t._v(" "),n("p",[n("b",[n("a",{staticClass:"export-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.regenerateExport(e)}}},[t._v("Click here to to generate a new archive for this history.")])])])])],1)}),[],!1,null,null,null).exports;k.default.use(N.a);var sn={components:{FilesInput:ze,LoadingSpan:ut.a,JobError:Ge},props:{historyId:{type:String,required:!0}},computed:{canExport:function(){return!!this.name&&!!this.directory}},data:function(){return{errorMessage:null,name:null,directory:null,waitingOnJob:!1,jobComplete:!1,jobError:null}},methods:{doExport:function(){var t=this,e={directory_uri:this.directory,file_name:this.name};this.waitingOnJob=!0;var n="".concat(Object(p.getAppRoot)(),"api/histories/").concat(this.historyId,"/exports");S.a.put(n,e).then((function(e){Ve(e.data.job_id).then((function(e){t.waitingOnJob=!1,t.jobComplete=!0})).catch(t.handleError)})).catch(this.handleError)},reset:function(){this.jobComplete=!1,this.errorMessage=null,this.name="",this.directory="",this.jobError=null},handleError:function(t){var e;this.waitingOnJob=!1,this.errorMessage=Object(Wt.a)(t,"History export failed."),(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.stderr)&&(this.jobError=t.data)}}},ln=Object(T.a)(sn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"export-to-remote-file"},[t.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger",dismissible:""},on:{dismissed:function(e){t.errorMessage=null}}},[t._v("\n        "+t._s(t.errorMessage)+"\n        "),t.jobError?n("JobError",{staticStyle:{"margin-top":"15px"},attrs:{header:"History export job ended in error",job:t.jobError}}):t._e()],1):t._e(),t._v(" "),t.waitingOnJob?n("div",[n("loading-span",{attrs:{message:"Executing history export job, this will likely take a while."}})],1):t.jobComplete?n("div",[n("b-alert",{attrs:{show:"",variant:"success",dismissible:""},on:{dismissed:t.reset}},[n("h4",[t._v("Done!")]),t._v(" "),n("p",[t._v("History successfully exported.")])])],1):n("div",[n("b-form-group",{staticClass:"mt-3",attrs:{id:"fieldset-directory","label-for":"directory",description:"Select a 'remote files' directory to export history archive to."}},[n("files-input",{attrs:{id:"directory",mode:"directory",requireWritable:!0},model:{value:t.directory,callback:function(e){t.directory=e},expression:"directory"}})],1),t._v(" "),n("b-form-group",{staticClass:"mt-3",attrs:{id:"fieldset-name","label-for":"name",description:"Give the exported file a name."}},[n("b-form-input",{attrs:{id:"name",placeholder:"Name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("b-row",{attrs:{"align-h":"end"}},[n("b-col",[n("b-button",{staticClass:"export-button",attrs:{variant:"primary",disabled:!t.canExport},on:{click:t.doExport}},[t._v("Export")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function cn(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function dn(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){cn(r,i,a,o,s,"next",t)}function s(t){cn(r,i,a,o,s,"throw",t)}o(void 0)}))}}k.default.use(N.a);var un={components:{LoadingSpan:ut.a,ToLink:on,ToRemoteFile:ln},props:{historyId:{type:String,required:!0}},data:function(){return{initializing:!0,hasWritableFileSources:!1}},mounted:function(){var t=this;return dn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initialize();case 2:case"end":return e.stop()}}),e)})))()},methods:{initialize:function(){var t=this;return dn(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Je.a).getFileSources();case 2:n=e.sent,t.hasWritableFileSources=n.some((function(t){return t.writable})),console.log(n),t.initializing=!1;case 6:case"end":return e.stop()}}),e)})))()}}},hn=Object(T.a)(un,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"history-export-component"},[n("h2",[t._v("Export history archive")]),t._v(" "),t.initializing?n("span",[n("loading-span",{attrs:{message:"Loading server configuration."}})],1):t.hasWritableFileSources?n("span",[n("b-card",{attrs:{"no-body":""}},[n("b-tabs",{attrs:{pills:"",card:"",vertical:""}},[n("b-tab",{attrs:{title:"to a link","title-link-class":"tab-export-to-link",active:""}},[n("b-card-text",[n("ToLink",{attrs:{"history-id":t.historyId}})],1)],1),t._v(" "),n("b-tab",{attrs:{title:"to a remote file","title-link-class":"tab-export-to-file"}},[n("b-card-text",[n("ToRemoteFile",{attrs:{"history-id":t.historyId}})],1)],1)],1)],1)],1):n("span",[n("ToLink",{attrs:{"history-id":t.historyId}})],1)])}),[],!1,null,null,null).exports,fn=n(108),pn=n(161),mn={props:{id:{type:String,required:!1}},data:function(){return{historyTemplate:"",historyJSON:{},errorMessages:[]}},created:function(){var t=this.id,e="";e=void 0!==t&&""!==t&&null!==t?Object(p.getAppRoot)()+"history/display_structured?id="+t:Object(p.getAppRoot)()+"history/display_structured",this.ajaxCall(e)},methods:{ajaxCall:function(t){var e=this;S.a.get(t).then((function(t){e._updateHistoryData(t)})).catch((function(t){console.error(t),e.errorMessages.push("Error fetching history data -- reload the page to retry this request.  Please contact an administrator if the problem persists.")}))},_updateHistoryData:function(t){var e=t.data;this.historyTemplate=e.template,this.historyJSON=e.history_json},makeHistoryView:function(t){window.hdas=t.map((function(t){var e=Object(o.a)();return new pn.a.HDAListItemEdit({model:new fn.a.HistoryDatasetAssociation(t),el:u()("#hda-"+t.id),linkTarget:"galaxy_main",purgeAllowed:e.config.allow_user_dataset_purge,logger:e.logger}).render(0)})),u()((function(){u()(".workflow, .tool").each((function(t,e){var n=u()(e).children(".body");u()(e).children(".header").click((function(t){n.toggle()})).addClass("clickable")}))}))}},updated:function(){this.makeHistoryView(this.historyJSON)}},_n=(n(1606),Object(T.a)(mn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.errorMessages,(function(e){return n("div",[n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(t._s(e))])])})),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.historyTemplate)}})],2)}),[],!1,null,null,null).exports),gn=n(127),vn={props:{id:{type:String,required:!0}},data:function(){return{historyData:{},historyHistory:{},errorMessages:[]}},created:function(){var t=Object(p.getAppRoot)()+"history/view/"+this.id;this.ajaxCall(t,this.updateHistoryView)},methods:{ajaxCall:function(t,e){var n=this;S.a.get(t).then((function(t){e(t)})).catch((function(t){n.showError("Error fetching histories -- reload the page to retry this request.  Please contact an administrator if the problem persists.",t)}))},updateHistoryView:function(t){this.historyData=t.data,this.historyHistory=t.data.history},showError:function(t,e){console.error(e),this.errorMessages.push(t)},makeHistoryView:function(t){u()((function(){var e={hasMasthead:t.use_panels?"true":"false",userIsOwner:t.user_is_owner?"true":"false",isCurrent:t.history_is_current?"true":"false",historyJSON:t.history,showDeletedJson:t.show_deleted,showHiddenJson:t.show_hidden,initialModeDeleted:t.show_deleted?"showing_deleted":"not_showing_deleted",initialModeHidden:t.show_hidden?"showing_hidden":"not_showing_hidden",allowUserDatasetPurge:t.allow_user_dataset_purge?"true":"false"};e.viewToUse=e.userIsOwner?{location:"mvc/history/history-view-edit",className:"HistoryViewEdit"}:{location:"mvc/history/history-view",className:"HistoryView"},gn.a.historyEntry(e)}))},showStructure:function(){var t=Object(o.a)(),e=k.default.extend(_n),n=document.createElement("div");t.page.center.display(n),new e({propsData:{id:q.a.get("id")}}).$mount(n)},switchHistory:function(){var t=Object(p.getAppRoot)()+"history/switch_to_history?hist_id="+this.historyHistory.id;this.ajaxCall(t,this.reloadPage)},reloadPage:function(){window.location.reload()}},updated:function(){this.makeHistoryView(this.historyData)}},yn=(n(1607),Object(T.a)(vn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"structured-history-view"}},[n("div",{staticClass:"clear",attrs:{id:"history-view-controls"}},[n("div",{staticClass:"float-left"},[0==t.historyHistory.purged?n("span",[0==t.historyData.user_is_owner?n("span",[n("button",{staticClass:"btn btn-secondary",attrs:{id:"import"}},[t._v("Import and start using history")])]):t._e(),t._v(" "),t.historyData.user_is_owner&&0==t.historyData.history_is_current?n("span",[n("button",{staticClass:"btn btn-secondary",attrs:{id:"switch-history"},on:{click:t.switchHistory}},[t._v("\n                        Switch to this history\n                    ")])]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{id:"show-structure"},on:{click:t.showStructure}},[t._v("\n                    Show structure\n                ")])]):t._e()]),t._v(" "),t._m(0)]),t._v(" "),t._l(t.errorMessages,(function(e){return n("div",[n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(t._s(e))])])})),t._v(" "),n("div",{staticClass:"history-panel unified-panel-body",staticStyle:{overflow:"auto"},attrs:{id:"history-"+t.historyHistory.id}})],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"float-right"},[e("button",{staticClass:"btn btn-secondary",attrs:{id:"toggle-deleted"}},[this._v("Include deleted")]),this._v(" "),e("button",{staticClass:"btn btn-secondary",attrs:{id:"toggle-hidden"}},[this._v("Include hidden")])])}],!1,null,null,null).exports),bn=n(266);function wn(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}k.default.use(N.a);var kn={components:{Markdown:bn.a},props:{invocationId:{type:String,required:!0}},data:function(){return{markdownConfig:{},invocationMarkdown:null}},created:function(){var t=this;this.getMarkdown(this.invocationId).then((function(e){t.markdownConfig=e,t.invocationMarkdown=e.invocation_markdown})).catch((function(t){Yt.a.error("Failed to load invocation markdown: ".concat(t))}))},methods:{onEdit:function(){window.location="".concat(Object(p.getAppRoot)(),"pages/create?invocation_id=").concat(this.invocationId)},getMarkdown:function(t){return(e=regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Object(p.getAppRoot)(),"api/invocations/").concat(t,"/report"),e.prev=1,e.next=4,S.a.get(n);case 4:return i=e.sent,a=i.data,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),Object(Wt.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(t){wn(r,i,a,o,s,"next",t)}function s(t){wn(r,i,a,o,s,"throw",t)}o(void 0)}))})();var e}}},xn=Object(T.a)(kn,(function(){var t=this.$createElement;return(this._self._c||t)("markdown",{staticClass:"p-3",attrs:{"markdown-config":this.markdownConfig},on:{onEdit:this.onEdit}})}),[],!1,null,null,null).exports;function Sn(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Mn(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Sn(r,i,a,o,s,"next",t)}function s(t){Sn(r,i,a,o,s,"throw",t)}o(void 0)}))}}function Cn(){return(Cn=Mn(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(Object(p.getAppRoot)(),"api/workflows/").concat(e,"/download?style=run"),t.prev=1,t.next=4,S.a.get(n);case 4:return i=t.sent,t.abrupt("return",i.data);case 8:t.prev=8,t.t0=t.catch(1),Object(Wt.b)(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function Tn(t,e){return jn.apply(this,arguments)}function jn(){return(jn=Mn(regeneratorRuntime.mark((function t(e,n){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(Object(p.getAppRoot)(),"api/workflows/").concat(e,"/invocations"),t.next=3,S.a.post(i,n);case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var On={props:{title:{type:String,default:""},icon:{type:String,default:"fa-play"},percentage:{type:Number,default:-1},waiting:{type:Boolean,default:!1},waitText:{type:String,default:"Sending..."},variant:{type:String,default:"info"}},computed:{progressWidth:function(){return"".concat(this.percentage,"%")},buttonClass:function(){return this.waiting?"disabled":"btn btn-".concat(this.variant)},iconClass:function(){return this.waiting?"fa-spinner fa-spin mr-1":this.icon+" mr-1"},currentText:function(){return this.waiting?this.waitText:this.title}}},Ln=Object(T.a)(On,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"ui-button-default",class:t.buttonClass,attrs:{type:"button"},on:{click:function(e){return t.$emit("click")}}},[n("i",{staticClass:"icon fa",class:t.iconClass}),t._v(" "),n("span",{staticClass:"title"},[t._v(" "+t._s(t.currentText)+" ")]),t._v(" "),-1!=t.percentage?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar",style:{width:t.progressWidth}})]):t._e()])}),[],!1,null,null,null).exports,Dn={components:{WorkflowInvocationState:n(571).a},props:{workflowName:{type:String,required:!0},invocations:{type:Array,required:!0}},data:function(){return{refreshHistoryTimeout:null}},computed:{timesExecuted:function(){return this.invocations.length},multipleInvocations:function(){return this.timesExecuted>1},historyTarget:function(){return this.multipleInvocations?"".concat(Object(p.getAppRoot)(),"history/view_multiple"):"".concat(Object(p.getAppRoot)(),"history/switch_to_history?hist_id=").concat(this.invocations[0].history_id)},wasNewHistoryTarget:function(){if(this.invocations.length<1)return!1;var t=Object(o.a)();return this.invocations[0].history_id&&t.currHistoryPanel&&t.currHistoryPanel.model.id!=this.invocations[0].history_id||!1}},methods:{_refreshHistory:function(){var t=this,e=Object(o.a)(),n=e&&e.currHistoryPanel&&e.currHistoryPanel.model;this.refreshHistoryTimeout&&window.clearTimeout(this.refreshHistoryTimeout),n&&n.refresh().success((function(){0===n.numOfUnfinishedShownContents()&&(t.refreshHistoryTimeout=window.setTimeout((function(){t._refreshHistory()}),n.UPDATE_DELAY))}))}},mounted:function(){new w.a.WebhookView({type:"workflow",toolId:null,toolVersion:null}),this._refreshHistory()}},An=Object(T.a)(Dn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"donemessagelarge"},[n("p",[t._v("\n            Successfully invoked workflow "),n("b",[t._v(t._s(t.workflowName))]),t.multipleInvocations?n("em",[t._v(" - "+t._s(t.timesExecuted)+" times")]):t._e(),t._v(".\n        ")]),t._v(" "),t.multipleInvocations?n("p",[t._v("\n            This workflow will generate results in multiple histories. You can observe progress in the\n            "),n("a",{attrs:{href:t.historyTarget}},[t._v("history multi-view")]),t._v(".\n        ")]):t.wasNewHistoryTarget?n("p",[t._v("\n            This workflow will generate results in a new history.\n            "),n("a",{attrs:{href:t.historyTarget}},[t._v("Switch to that history now")]),t._v(".\n        ")]):n("p",[t._v("\n            You can check the status of queued jobs and view the resulting data by refreshing the History pane, if\n            this has not already happened automatically.\n        ")])]),t._v(" "),t._l(t.invocations,(function(t,e){return n("workflow-invocation-state",{key:t.id,attrs:{index:e,"invocation-id":t.id}})})),t._v(" "),n("div",{attrs:{id:"webhook-view"}})],2)}),[],!1,null,null,null).exports,En=n(165),In=n(57),Pn=n(126),Yn=n(112);var Rn=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.runData=e,this.name=e.name,this.workflowResourceParameters=e.workflow_resource_parameters,this.hasWorkflowResourceParameters=!r.default.isEmpty(this.workflowResourceParameters),this.historyId=e.history_id,this.workflowId=e.id,this.hasUpgradeMessages=e.has_upgrade_messages,this.hasStepVersionChanges=!r.default.isEmpty(e.step_version_changes),this.steps=[],this.links=[],this.parms=[],this.wpInputs={},this.parameterInputLabels=[];var i=!1,a=!1;r.default.each(e.steps,(function(t,e){var i=Yn.a[t.step_type],a="".concat(parseInt(e+1),": ").concat(t.step_label||t.step_name);t.annotation&&(a+=" - ".concat(t.annotation)),t.step_version&&(a+=" (Galaxy Version ".concat(t.step_version,")")),t=g.b.merge({index:e,fixed_title:r.default.escape(a),icon:i||"",help:null,citations:null,collapsible:!0,collapsed:e>0&&!Hn(t),sustain_version:!0,sustain_repeats:!0,sustain_conditionals:!0,narrow:!0,text_enable:"Edit",text_disable:"Undo",cls_enable:"fa fa-edit",cls_disable:"fa fa-undo",errors:t.messages,initial_errors:!0,cls:"ui-portlet-section",hide_operations:!0,needs_refresh:!1,always_refresh:"tool"!=t.step_type},t),n.steps[e]=t,n.links[e]=[],n.parms[e]={},"parameter_input"==t.step_type&&t.step_label&&n.parameterInputLabels.push(t.step_label)})),r.default.each(this.steps,(function(t,e){Pn.a.visitInputs(t.inputs,(function(t,i){n.parms[e][i]=t}))})),r.default.each(this.steps,(function(t,e){r.default.each(t.output_connections,(function(t){r.default.each(n.steps,(function(i,a){i.step_index===t.input_step_index&&n.links[e].push(i)}))}))})),r.default.each(this.steps,(function(t,e){r.default.each(n.steps,(function(i,a){var o={};r.default.each(t.output_connections,(function(t){i.step_index===t.input_step_index&&(o[t.input_name]=t)})),r.default.each(n.parms[a],(function(n,i){var a=o[i];a&&(n.type="hidden",n.help=n.step_linked?"".concat(n.help,", "):"",n.help+="Output dataset '".concat(a.output_name,"' from step ").concat(parseInt(e)+1),n.step_linked=n.step_linked||[],n.step_linked.push({index:t.index,step_type:t.step_type}))}))}))}));var o=0,s=function(t){return n.wpInputs[t]=n.wpInputs[t]||{label:t,name:t,type:"text",color:"hsl( ".concat(100*++o,", 70%, 30% )"),style:"ui-form-wp-source",links:[]}};r.default.each(this.steps,(function(t,e){r.default.each(n.parms[e],(function(e,n){!function(t,e){for(var n,i=/\$\{(.+?)\}/g;n=i.exec(String(t));){var a=n[1];e(s(a))}}(e.value,(function(n){a=!0,n.links.push(t),e.wp_linked=!0,e.type="text",e.backdrop=!0,e.style="ui-form-wp-target"}))})),r.default.each(t.replacement_parameters,(function(t){-1==n.parameterInputLabels.indexOf(t)&&s(t)}))})),r.default.each(this.steps,(function(t,e){if("tool"==t.step_type){var n=!0;Pn.a.visitInputs(t.inputs,(function(e,a,r){var o=e.value&&"RuntimeValue"==e.value.__class__,s=-1!=["data","data_collection"].indexOf(e.type),l=r[e.data_ref];e.step_linked&&!Hn(e.step_linked)&&(n=!1),e.options&&(0==e.options.length&&!n||e.wp_linked)&&(e.is_workflow=!0),l&&(e.is_workflow=l.step_linked&&!Hn(l.step_linked)||e.wp_linked),(s||e.value&&"RuntimeValue"==e.value.__class__&&!e.step_linked)&&(t.collapsed=!1,i=!0),o&&(e.value=null),e.flavor="workflow",o||s||"hidden"===e.type||e.wp_linked||(e.optional||!g.b.isEmpty(e.value)&&""!==e.value)&&(e.collapsible_value=e.value,e.collapsible_preview=!0)}))}})),this.hasOpenToolSteps=i,this.hasReplacementParametersInToolForm=a};function Hn(t){for(var e=Array.isArray(t)?t:[t],n=0;n<e.length;n++){var i=e[n];if(!i||!i.step_type||!i.step_type.startsWith("data"))return!1}return!0}var Nn={View:f.a.View.extend({initialize:function(t){var e=Object(o.a)();this.modal=e.modal||new y.a.View,this.runWorkflowModel=t.model,this.deferred=new En.a,this.setRunButtonStatus=t.setRunButtonStatus,this.handleInvocations=t.handleInvocations,this.setElement(t.el),this._configure(),this.render()},_configure:function(){this.forms=[],this.steps=this.runWorkflowModel.steps,this.links=this.runWorkflowModel.links,this.parms=this.runWorkflowModel.parms,this.wp_inputs=this.runWorkflowModel.wpInputs},render:function(){var t=this;this.deferred.reset(),this._renderParameters(),this._renderHistory(),this._renderUseCachedJob(),this._renderResourceParameters(),r.default.each(this.steps,(function(e){t._renderStep(e)}))},_renderParameters:function(){var t=this;this.wp_form=null,r.default.isEmpty(this.wp_inputs)||(this.wp_form=new In.a({title:"<b>Workflow Parameters</b>",inputs:this.wp_inputs,cls:"ui-portlet-section",onchange:function(){r.default.each(t.wp_form.input_list,(function(e,n){r.default.each(e.links,(function(e){t._refreshStep(e)}))}))}}),this._append(this.$el.empty(),this.wp_form.$el))},_renderHistory:function(){this.history_form=new In.a({cls:"ui-portlet-section",title:"<b>History Options</b>",inputs:[{type:"conditional",name:"new_history",test_param:{name:"check",label:"Send results to a new history",type:"boolean",value:"false",help:""},cases:[{value:"true",inputs:[{name:"name",label:"History name",type:"text",value:this.runWorkflowModel.name}]}]}]}),this._append(this.$el,this.history_form.$el)},_renderResourceParameters:function(){this.workflow_resource_parameters_form=null,r.default.isEmpty(this.runWorkflowModel.workflowResourceParameters)||(this.workflow_resource_parameters_form=new In.a({cls:"ui-portlet-section",title:"<b>Workflow Resource Options</b>",inputs:this.runWorkflowModel.workflowResourceParameters}),this._append(this.$el,this.workflow_resource_parameters_form.$el))},_renderUseCachedJob:function(){var t=Object(o.a)(),e={};t.user.attributes.preferences&&"extra_user_preferences"in t.user.attributes.preferences&&(e=JSON.parse(t.user.attributes.preferences.extra_user_preferences));var n="use_cached_job|use_cached_job_checkbox"in e&&e["use_cached_job|use_cached_job_checkbox"];this.display_use_cached_job_checkbox="true"===n,this.display_use_cached_job_checkbox&&(this.job_options_form=new In.a({cls:"ui-portlet-section",title:"<b>Job re-use Options</b>",inputs:[{type:"conditional",name:"use_cached_job",test_param:{name:"check",label:"BETA: Attempt to reuse jobs with identical parameters?",type:"boolean",value:"false",help:"This may skip executing jobs that you have already run."}}]}),this._append(this.$el,this.job_options_form.$el))},_renderStep:function(t){var e=this,n=Object(o.a)(),i=null;this.deferred.execute((function(a){if(e.$el.addClass("ui-steps"),"tool"==t.step_type)t.postchange=function(e,i){var a={tool_id:t.id,tool_version:t.version,inputs:u.a.extend(!0,{},i.data.create())};i.wait(!0),n.emit.debug("tool-form-composite::postchange()","Sending current state.",a),g.b.request({type:"POST",url:"".concat(Object(p.getAppRoot)(),"api/tools/").concat(t.id,"/build"),data:a,success:function(t){i.update(t),i.wait(!1),n.emit.debug("tool-form-composite::postchange()","Received new model.",t),e.resolve()},error:function(t){n.emit.debug("tool-form-composite::postchange()","Refresh request failed.",t),e.reject()}})},i=new b.a(t),t.post_job_actions&&t.post_job_actions.length&&i.portlet.append(u()("<div/>").addClass("ui-form-element-disabled").append(u()("<div/>").addClass("ui-form-title").html("<b>Job Post Actions</b>")).append(u()("<div/>").addClass("ui-form-preview").html(r.default.reduce(t.post_job_actions,(function(t,e){return"".concat(t," ").concat(e.short_str)}),""))));else{var o=-1!=["data_input","data_collection_input"].indexOf(t.step_type);r.default.each(t.inputs,(function(t){t.flavor="module",t.hide_label=o})),i=new In.a(g.b.merge({title:t.fixed_title,onchange:function(){r.default.each(e.links[t.index],(function(t){e._refreshStep(t)}))},inputs:t.inputs&&t.inputs.length>0?t.inputs:[{type:"hidden",name:"No options available.",ignore:null}]},t)),t.step_label&&i.$el.attr("step-label",t.step_label)}if(e.forms[t.index]=i,e._append(e.$el,i.$el),t.needs_refresh&&e._refreshStep(t),i.portlet[e.show_progress?"disable":"enable"](),e.show_progress){var s=100*(t.index+1)/e.steps.length;e.setRunButtonStatus(!1,"Preparing...",s)}n.emit.debug("tool-form-composite::initialize()","".concat(t.index," : Workflow step state ready."),t),window.setTimeout((function(){a.resolve()}),0)}))},_refreshStep:function(t){var e=this,n=this.forms[t.index];n?(r.default.each(this.parms[t.index],(function(t,i){if(t.step_linked||t.wp_linked){var a=n.field_list[n.data.match(i)];if(a){var o;if(t.step_linked)o={values:[]},r.default.each(t.step_linked,(function(t){if(Hn(t)){var n=e.forms[t.index].data.create().input;n&&r.default.each(n.values,(function(t){o.values.push(t)}))}})),!t.multiple&&o.values.length>0&&(o={values:[o.values[0]]});else if(t.wp_linked){o=t.value;for(var s,l=/\$\{(.+?)\}/g;s=l.exec(t.value);){var c=e.wp_form.field_list[e.wp_form.data.match(s[1])],d=c&&c.value();d&&(o=o.split(s[0]).join(d))}}void 0!==o&&a.value(o)}}})),n.trigger("change")):t.needs_refresh=!0},execute:function(){var t=this;this.show_progress=!0,this._enabled(!1),this.deferred.execute((function(e){window.setTimeout((function(){e.resolve(),t._submit()}),0)}))},_submit:function(){var t=this,e=Object(o.a)(),n=this.history_form.data.create(),i={new_history_name:n["new_history|name"]?n["new_history|name"]:null,history_id:n["new_history|name"]?null:this.runWorkflowModel.historyId,resource_params:this.workflow_resource_parameters_form?this.workflow_resource_parameters_form.data.create():{},replacement_params:this.wp_form?this.wp_form.data.create():{},parameters:{},parameters_normalized:!0,batch:!0};this.display_use_cached_job_checkbox&&(i.use_cached_job="true"===this.job_options_form.data.create()["use_cached_job|check"]);var a=!0;for(var r in this.forms){var s=this.forms[r],l=s.data.create(),c=this.steps[r],d=c.step_index;for(var h in s.trigger("reset"),l){var f=l[h],p=s.data.match(h),m=s.input_list[p];if(!m.step_linked){if(Hn(c)?!(a=f&&f.values&&f.values.length>0)&&m.optional&&(a=!0):a=m.optional||m.is_workflow&&""!==f||!m.is_workflow&&null!==f,!a){s.highlight(p);break}i.parameters[d]=i.parameters[d]||{},i.parameters[d][h]=l[h]}}if(!a)break}a?(e.emit.debug("tool-form-composite::submit()","Validation complete.",i),Tn(this.runWorkflowModel.workflowId,i).then((function(n){e.emit.debug("tool-form-composite::submit","Submission successful.",n),u.a.isArray(n)&&n.length>0?t.handleInvocations(n):t.submissionErrorModal(i,n),t._enabled(!0)})).catch((function(n){e.emit.debug("tool-form-composite::submit","Submission failed.",n);var a=!1;if(n&&n.err_data)for(var r in t.forms){var o=t.forms[r],s=n.err_data[o.model.get("step_index")];if(s){var l=o.data.matchResponse(s);for(var c in l){o.highlight(c,l[c]),a=!0;break}}}a||t.submissionErrorModal(i,n),t._enabled(!0)}))):(this._enabled(!0),e.emit.debug("tool-form-composite::submit()","Validation failed.",i))},_append:function(t,e){t.append("<p/>").append(e)},_enabled:function(t){this.setRunButtonStatus(t,"Sending...",-1),this.wp_form&&this.wp_form.portlet[t?"enable":"disable"](),this.history_form&&this.history_form.portlet[t?"enable":"disable"](),r.default.each(this.forms,(function(e){e&&e.portlet[t?"enable":"disable"]()}))},submissionErrorModal:function(t,e){var n=this;this.modal.show({title:_()("Workflow submission failed"),body:this._templateError(t,e&&e.err_msg),buttons:{Close:function(){n.modal.hide()}}})},_templateError:function(t,e){return u()("<div/>").addClass("errormessagelarge").append(u()("<p/>").text("The server could not complete the request. Please contact the Galaxy Team if this error persists. ".concat(JSON.stringify(e)||""))).append(u()("<pre/>").text(JSON.stringify(t,null,4)))}})},$n={props:{model:{type:Object,required:!0},setRunButtonStatus:{type:Function,required:!0}},data:function(){return{runForm:null}},mounted:function(){var t=this;this.$nextTick((function(){var e={el:t.$refs.form,model:t.model,setRunButtonStatus:t.setRunButtonStatus,handleInvocations:t.handleInvocations};t.runForm=new Nn.View(e)}))},methods:{execute:function(){this.runForm.execute()},handleInvocations:function(t){this.$emit("submissionSuccess",t)}}},Fn=Object(T.a)($n,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"form"})}),[],!1,null,null,null).exports,Wn=["data_input","data_collection_input","parameter_input"];function zn(t){return Wn.includes(t)}var Un={props:{model:{type:Object,required:!0},setRunButtonStatus:{type:Function,required:!0},targetHistory:{type:String,default:"current"},useJobCache:{type:Boolean,default:!1}},data:function(){return{form:null,inputTypes:{}}},computed:{},created:function(){var t=this;this.form=new In.a(this.formDefinition()),this.$nextTick((function(){t.$refs.form.appendChild(t.form.$el[0])}))},methods:{formDefinition:function(){var t=this,e=[];return Object.values(this.model.wpInputs).forEach((function(n){var i=Object.assign({},n);i.color=void 0,e.push(i),t.inputTypes[i.name]="replacement_parameter"})),this.model.steps.forEach((function(n,i){if(zn(n.step_type)){var a=new String(n.step_index),r=n.step_label||new String(n.step_index+1),o=n.annotation,s=n.inputs[0],l=Object.assign({},s,{name:a,help:o,label:r});l.flavor="module",e.push(l),t.inputTypes[a]=n.step_type}})),{inputs:e}},execute:function(){var t=this,e={},n={},i=this.form.data.create();for(var a in i){var r=i[a],o=this.inputTypes[a];"replacement_parameter"==o?e[a]=r:zn(o)&&(n[a]=r)}var s={replacement_dict:e,inputs:n,inputs_by:"step_index",batch:!0,use_cached_job:this.useJobCache};"current"==this.targetHistory?s.history_id=this.model.historyId:s.new_history_name=this.model.name,Tn(this.model.workflowId,s).then((function(e){t.$emit("submissionSuccess",e)})).catch((function(t){console.log(t)}))}}},Vn=Object(T.a)(Un,(function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"form"})}),[],!1,null,null,null).exports,Bn={components:{LoadingSpan:ut.a,WaitButton:Ln,WorkflowRunSuccess:An,WorkflowRunForm:Fn,WorkflowRunFormSimple:Vn},props:{workflowId:{type:String},preferSimpleForm:{type:Boolean,default:!1},simpleFormTargetHistory:{type:String,default:"current"},simpleFormUseJobCache:{type:Boolean,default:!1}},data:function(){return{error:null,loading:!0,hasUpgradeMessages:!1,hasStepVersionChanges:!1,workflowName:"",runForm:null,runButtonEnabled:!0,runButtonWaitText:"",runButtonPercentage:-1,invocations:null,simpleForm:null,model:null}},created:function(){var t=this;(function(t){return Cn.apply(this,arguments)})(this.workflowId).then((function(e){var n=new Rn(e),i=t.preferSimpleForm;i&&(n.hasReplacementParametersInToolForm&&(console.log("cannot render simple workflow form - has ${} values in tool steps"),i=!1),n.hasOpenToolSteps&&(console.log("cannot render simple workflow form - one or more tools have disconnected runtime inputs"),i=!1),n.hasWorkflowResourceParameters&&(console.log("Cannot render simple workflow form - workflow resource parameters are configured"),i=!1)),t.simpleForm=i,t.model=n,t.hasUpgradeMessages=n.hasUpgradeMessages,t.hasStepVersionChanges=n.hasStepVersionChanges,t.workflowName=t.model.name,t.loading=!1})).catch((function(e){console.log(e),t.error=Object(Wt.a)(e)}))},methods:{execute:function(){this.$refs.runform.execute()},setRunButtonStatus:function(t,e,n){this.runButtonEnabled=t,this.runButtonWaitText=e,this.runButtonPercentage=n},handleInvocations:function(t){this.invocations=t},showAdvanced:function(){this.simpleForm=!1}}},qn=Object(T.a)(Bn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.error?n("b-alert",{attrs:{variant:"danger",show:""}},[t._v("\n        "+t._s(t.error)+"\n    ")]):n("span",[t.loading?n("b-alert",{attrs:{variant:"info",show:""}},[n("loading-span",{attrs:{message:"Loading workflow run data"}})],1):null!=t.invocations?n("workflow-run-success",{attrs:{invocations:t.invocations,"workflow-name":t.workflowName}}):n("div",{staticClass:"ui-form-composite"},[n("div",{staticClass:"ui-form-composite-messages mb-4"},[t.hasUpgradeMessages?n("b-alert",{attrs:{variant:"warning",show:""}},[t._v("\n                    Some tools in this workflow may have changed since it was last saved or some errors were found.\n                    The workflow may still run, but any new options will have default values. Please review the\n                    messages below to make a decision about whether the changes will affect your analysis.\n                ")]):t._e(),t._v(" "),t.hasStepVersionChanges?n("b-alert",{attrs:{variant:"warning",show:""}},[t._v("\n                    Some tools are being executed with different versions compared to those available when this\n                    workflow was last saved because the other versions are not or no longer available on this Galaxy\n                    instance. To upgrade your workflow and dismiss this message simply edit the workflow and re-save\n                    it.\n                ")]):t._e()],1),t._v(" "),n("div",{staticClass:"ui-form-composite-header h4"},[n("b",[t._v("Workflow: "+t._s(t.workflowName))]),t._v(" "),n("wait-button",{attrs:{title:"Run Workflow",id:"run-workflow",variant:"primary",disabled:!t.runButtonEnabled,waiting:!t.runButtonEnabled,"wait-text":t.runButtonWaitText,percentage:t.runButtonPercentage},on:{click:t.execute}})],1),t._v(" "),t.simpleForm?n("div",[n("workflow-run-form-simple",{ref:"runform",attrs:{model:t.model,"set-run-button-status":t.setRunButtonStatus,"target-history":t.simpleFormTargetHistory,"use-job-cache":t.simpleFormUseJobCache},on:{submissionSuccess:t.handleInvocations}}),t._v(" "),n("a",{attrs:{href:"#"},on:{click:t.showAdvanced}},[t._v("Expand to full workflow form.")])],1):n("workflow-run-form",{ref:"runform",attrs:{model:t.model,"set-run-button-status":t.setRunButtonStatus},on:{submissionSuccess:t.handleInvocations}})],1)],1)],1)}),[],!1,null,null,null).exports;var Gn={components:{Invocations:n(647).a},data:function(){return{invocationItems:[],loading:!0}},created:function(){this.fetchRecentInvocations()},methods:{fetchRecentInvocations:function(){var t,e,n=this;(t={user_id:Object(o.a)().user.id,limit:150,view:"collection"},e="".concat(Object(p.getAppRoot)(),"api/invocations"),S.a.get(e,{params:t})).then((function(t){n.invocationItems=t.data,n.loading=!1})).catch(this.handleError)},handleError:function(t){console.error(t)}}},Jn=Object(T.a)(Gn,(function(){var t=this.$createElement;return(this._self._c||t)("invocations",{attrs:{"invocation-items":this.invocationItems,loading:this.loading,"no-invocations-message":"There are no invocations to be shown."},on:{"reload-invocations":this.fetchRecentInvocations}})}),[],!1,null,null,null).exports,Kn=n(1052),Xn=n.n(Kn),Qn=n(1053),Zn=n.n(Qn),ti=n(265),ei=n(267);k.default.use(N.a);var ni=Object.freeze({CITATION:"bibliography",BIBTEX:"bibtex",RAW:"raw"}),ii={components:{Citation:ei.a},props:{source:{type:String,required:!0},id:{type:String,required:!0},simple:{type:Boolean,required:!1,default:!1}},data:function(){return{citations:[],errors:[],showCollapse:!1,outputFormats:ni,outputFormat:ni.CITATION}},updated:function(){var t=this;this.$nextTick((function(){t.$emit("rendered")}))},created:function(){var t=this;Object(ti.a)(this.source,this.id).then((function(e){t.citations=e})).catch((function(t){console.error(t)}))}},ai=(n(1723),Object(T.a)(ii,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.simple?t.citations.length?n("div",[n("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.id,expression:"id"}],attrs:{variant:"primary"}},[t._v("Citations")]),t._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:t.id.replace(/ /g,"_")},on:{show:function(e){return t.$emit("show")},shown:function(e){return t.$emit("shown")},hide:function(e){return t.$emit("hide")},hidden:function(e){return t.$emit("hidden")}}},[n("b-card",t._l(t.citations,(function(e,i){return n("Citation",{key:i,staticClass:"formatted-reference",attrs:{citation:e,outputFormat:t.outputFormat}})})),1)],1)],1):t._e():n("b-card",{staticClass:"citation-card",attrs:{"header-tag":"nav"},scopedSlots:t._u([{key:"header",fn:function(){return[n("b-nav",{attrs:{"card-header":"",tabs:""}},[n("b-nav-item",{attrs:{active:t.outputFormat===t.outputFormats.CITATION},on:{click:function(e){t.outputFormat=t.outputFormats.CITATION}}},[t._v("Citations (APA)")]),t._v(" "),n("b-nav-item",{attrs:{active:t.outputFormat===t.outputFormats.BIBTEX},on:{click:function(e){t.outputFormat=t.outputFormats.BIBTEX}}},[t._v("BibTeX")])],1)]},proxy:!0}],null,!1,3994401831)},[t._v(" "),"histories"===t.source?n("div",{staticClass:"infomessage"},[t._v("\n            When writing up your analysis, remember to include all references that should be cited in order to\n            completely describe your work. Also, please remember to\n            "),n("a",{attrs:{href:"https://galaxyproject.org/citing-galaxy"}},[t._v("cite Galaxy")]),t._v(".\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"citations-formatted"},t._l(t.citations,(function(e,i){return n("Citation",{key:i,staticClass:"formatted-reference",attrs:{citation:e,outputFormat:t.outputFormat}})})),1)])],1)}),[],!1,null,null,null).exports),ri=n(862);function oi(t){return function(t){if(Array.isArray(t))return si(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return si(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return si(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var li={components:{Citations:ai,isotope:Zn.a},directives:{infiniteScroll:Xn.a},props:{transitionDuration:{type:Number,default:200}},data:function(){return{tools:[],buffer:[],filterOption:null,filterText:"",busy:!1,loading:!0}},computed:{isoOptions:function(){var t=this;return{transitionDuration:this.transitionDuration,masonry:{fitWidth:!0},getFilterData:{filterByText:function(e){var n=new RegExp(t.filterText,"i");return e.name.match(n)||e.description.match(n)||e.help.match(n)}}}}},created:function(){var t=this;S.a.get("".concat(Object(p.getAppRoot)(),"api/tools?tool_help=True")).then((function(e){t.initialize(e.data)})).catch((function(t){console.error(t)}))},methods:{show:function(t){this.$refs.cards[t].style.zIndex="1"},shown:function(t){var e=this;this.layout(),Object(ri.setTimeout)((function(){e.$refs.cards[t].style.zIndex="auto"}),200)},hidden:function(t){this.layout()},layout:function(){this.$refs.iso.layout()},filter:function(t){this.$refs.iso.filter(t)},toolsExtracted:function(t){return t.reduce((function(t,e){return"elems"in e?t.concat(e.elems.reduce((function(t,n){return n.name?[].concat(oi(t),[{id:n.id,name:n.name,section:e.name,description:n.description,url:Object(p.getAppRoot)()+String(n.link).substring(1),version:n.version,help:n.help}]):t}),[])):t}),[]).map((function(t){return[Math.random(),t]})).sort((function(t,e){return t[0]-e[0]})).map((function(t){return t[1]}))},loadMore:function(){var t=this;this.buffer.length<this.tools.length&&(this.busy=!0,Object(ri.setTimeout)((function(){var e=t.buffer.length,n=e+10,i=t.tools.slice(e,n);t.buffer=t.buffer.concat(i),t.busy=!1}),100))},helpSummary:function(t){var e=(new DOMParser).parseFromString(t,"text/html"),n=e.evaluate("//strong[text()='What it does']/../following-sibling::*",e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(n)return n.innerHTML;var i=e.documentElement.textContent;return i?i.substring(0,i.indexOf("\n\n")):null},getToolsNumber:function(){return this.tools.length},initialize:function(t){this.tools=this.toolsExtracted(t),this.buffer=this.tools.slice(0,20),this.loading=!1}}},ci=Object(T.a)(li,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"busy"}},[n("h2",{staticClass:"mb-3",staticStyle:{"text-align":"center"}},[n("span",{attrs:{id:"tools-view"}},[t._v("Consolidated view of "+t._s(t.tools.length)+" available tools.")])]),t._v(" "),t.loading?t._e():n("div",[n("b-container",{staticClass:"mb-4",attrs:{fluid:""}},[n("b-row",{staticClass:"justify-content-center"},[n("b-col",{attrs:{md:"6"}},[n("b-form-group",{attrs:{description:"Search for strings or regular expressions"}},[n("b-input-group",[n("b-form-input",{attrs:{placeholder:"Type to Search"},nativeOn:{keyup:[function(e){return t.filter("filterByText")},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.filterText=""}]},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear (esc)")])],1)],1)],1)],1)],1)],1),t._v(" "),n("isotope",{ref:"iso",staticStyle:{margin:"0 auto"},attrs:{options:t.isoOptions,list:t.buffer},on:{filter:function(e){t.filterOption=arguments[2]}}},t._l(t.buffer,(function(e,i){return n("b-card",{key:i,ref:"cards",refInFor:!0,staticClass:"m-2",staticStyle:{width:"23rem"},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("b-link",{attrs:{href:e.url,target:"_blank"}},[n("h4",{staticClass:"tools-view-name"},[t._v(t._s(e.name))])]),t._v(" "),n("b-badge",{staticClass:"tools-view-section"},[t._v(t._s(e.section))])],1)]},proxy:!0}],null,!0)},[t._v(" "),n("p",{staticClass:"card-text",domProps:{innerHTML:t._s(t.helpSummary(e.help)||e.description)}}),t._v(" "),n("p",{staticClass:"card-text"},[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal--"+i,expression:"'modal-' + '-' + index"}],attrs:{index:i}},[t._v("Info")]),t._v(" "),n("b-modal",{attrs:{id:"modal--"+i,centered:"","ok-only":"",static:!0,title:e.name}},[n("b",[t._v(t._s(e.version+" / "+e.id))]),t._v(" "),n("p",[t._v(t._s(e.description))]),t._v(" "),n("p",{domProps:{innerHTML:t._s(e.help)}})])],1),t._v(" "),n("Citations",{attrs:{id:e.id,simple:"",source:"tools"},on:{rendered:t.layout,show:function(e){return t.show(i)},shown:function(e){return t.shown(i)},hidden:function(e){return t.hidden(i)}}})],1)})),1)],1)])}),[],!1,null,null,null).exports;function di(t){return function(t){if(Array.isArray(t))return ui(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ui(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ui(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ui(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var hi={data:function(){return{schemaTagObj:{}}},methods:{createToolsJson:function(t){return{"@context":"http://schema.org","@graph":t.reduce((function(t,e){return"elems"in e?t.concat(e.elems.reduce((function(t,e){return e.name?[].concat(di(t),[{"@type":"SoftwareApplication",operatingSystem:"Any",applicationCategory:"Web application",name:e.name,description:e.help||e.description,softwareVersion:e.version,url:Object(p.getAppRoot)()+String(e.link).substring(1)}]):t}),[])):t}),[])}}},created:function(){var t=this;S.a.get("".concat(Object(p.getAppRoot)(),"api/tools?tool_help=True")).then((function(e){t.schemaTagObj=t.createToolsJson(e.data);var n=document.createElement("script");n.id="schema-json",n.type="application/ld+json",n.text=JSON.stringify(t.schemaTagObj),document.head.appendChild(n)})).catch((function(t){console.error(t)}))}},fi=Object(T.a)(hi,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,pi=n(110),mi=n(87),_i=n(114),gi=kt.a.extend({initialize:function(t){this.ajaxQueue=new pi.a.AjaxQueue,kt.a.prototype.initialize.call(this,t)},init_grid_elements:function(){var t=this.ajaxQueue;t.stop(),kt.a.prototype.init_grid_elements.call(this),u.a.makeArray(this.$el.find(".delayed-value-datasets_by_state").map((function(t,e){return function(){var t=u()(e).data("id"),n="".concat(Object(p.getAppRoot)(),"api/histories/").concat(t,"?keys=nice_size,contents_active,contents_states"),i={};return i.url=n,i.type="GET",i.success=function(e){for(var n=e.contents_states,i="",a=0,r=["ok","running","queued","new","error"];a<r.length;a++){var o=r[a],s=n[o];s&&(i+='<div class="count-box state-color-'.concat(o,'" title="Datasets in ').concat(o,' state">').concat(s,"</div> "))}var l=e.contents_active,c=l.deleted;c&&(i+='<div class="count-box state-color-deleted" title="Deleted datasets">'.concat(c,"</div> "));var d=l.hidden;d&&(i+='<div class="count-box state-color-hidden" title="Hidden datasets">'.concat(d,"</div> ")),u()(".delayed-value-datasets_by_state[data-id='".concat(t,"']")).html(i),u()(".delayed-value-disk_size[data-id='".concat(t,"']")).html(e.nice_size)},u.a.ajax(i)}}))).forEach((function(e){return t.add(e)})),t.start()},_showCopyDialog:function(t){var e=new mi.a({id:t});e.fetch().fail((function(){alert("History could not be fetched. Please contact an administrator")})).done((function(){Object(_i.a)(e,{}).done((function(){var t=Object(o.a)();t&&t.currHistoryPanel&&t.currHistoryPanel.loadCurrentHistory(),window.location.reload(!0)}))}))},add_operation:function(t,e,n){var i=this;"Copy"==e.label&&(e.onclick=function(t){i._showCopyDialog(t)}),kt.a.prototype.add_operation.call(this,t,e,n)}}),vi={View:f.a.View.extend({title:_()("Histories"),initialize:function(t){var e=this,n=Object(o.a)();xt.a.markViewAsLoading(this),"list_published"==t.action_id?this.active_tab="shared":"list"==t.action_id&&(this.active_tab="user"),this.model=new f.a.Model,g.b.get({url:"".concat(Object(p.getAppRoot)(),"history/").concat(t.action_id,"?").concat(u.a.param(n.params)),success:function(t){e.model.set(t),e.render()}})},render:function(){var t=new gi(this.model.attributes);this.$el.empty().append(t.$el)}})},yi={data:function(){return{plugins:[],hdas:[],search:"",selected:null,name:null,error:null,fixed:!1}},created:function(){var t=this,e=Object(o.a)(),n="".concat(Object(p.getAppRoot)(),"api/plugins"),i=e.params.dataset_id;i&&(this.fixed=!0,this.selected=i,n+="?dataset_id=".concat(i)),S.a.get(n).then((function(e){t.plugins=e.data})).catch((function(e){t.error=t._errorMessage(e)}))},methods:{select:function(t){var e=this;if(this.fixed)this.create(t);else{var n=Object(o.a)(),i=n.currHistoryPanel&&n.currHistoryPanel.model.id;i?S.a.get("".concat(Object(p.getAppRoot)(),"api/plugins/").concat(t.name,"?history_id=").concat(i)).then((function(n){e.name=t.name,e.hdas=n.data&&n.data.hdas,e.hdas&&e.hdas.length>0&&(e.selected=e.hdas[0].id)})).catch((function(t){e.error=e._errorMessage(t)})):this.error="This option requires an accessible history."}},create:function(t){var e="".concat(t.href,"?dataset_id=").concat(this.selected);"_top"==t.target?window.location.href=e:u()("#galaxy_main").attr("src",e)},match:function(t){return!this.search||-1!=t.name.indexOf(this.search)||t.description&&-1!=t.description.indexOf(this.search)},_errorMessage:function(t){return t&&t.response&&t.response.data&&t.response.data.err_msg||"Request failed for an unknown reason."}}},bi=Object(T.a)(yi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-thumbnails"},[t.error?n("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):n("div",[n("div",{staticClass:"search-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search-query parent-width",attrs:{name:"query",placeholder:"search visualizations",autocomplete:"off",type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),t._l(t.plugins,(function(e){return n("div",{key:e.name},[t.match(e)?n("table",[n("tr",{staticClass:"ui-thumbnails-item",on:{click:function(n){return t.select(e)}}},[n("td",[e.logo?n("img",{staticClass:"ui-thumbnails-image",attrs:{alt:"ui thumbnails",src:e.logo}}):n("div",{staticClass:"ui-thumbnails-icon fa fa-eye"})]),t._v(" "),n("td",[n("div",{staticClass:"ui-thumbnails-title font-weight-bold"},[t._v(t._s(e.html))]),t._v(" "),n("div",{staticClass:"ui-thumbnails-text"},[t._v(t._s(e.description))])])]),t._v(" "),t.fixed?t._e():n("tr",[n("td"),t._v(" "),e.name==t.name?n("td",[t.hdas&&t.hdas.length>0?n("div",[n("div",{staticClass:"font-weight-bold"},[t._v("Select a dataset to visualize:")]),t._v(" "),n("div",{staticClass:"ui-select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected=e.target.multiple?n:n[0]}}},t._l(t.hdas,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0),t._v(" "),n("div",{staticClass:"icon-dropdown fa fa-caret-down"})]),t._v(" "),n("button",{staticClass:"ui-button-default float-left mt-3 btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.create(e)}}},[n("i",{staticClass:"icon fa fa-check"}),t._v(" "),n("span",{staticClass:"title"},[t._v("Create Visualization")])])]):n("div",{staticClass:"alert alert-danger"},[t._v("\n                            There is no suitable dataset in your current history which can be visualized with this\n                            plugin.\n                        ")])]):t._e()])]):t._e()])}))],2)])}),[],!1,null,null,null).exports;function wi(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ki(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ki(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function ki(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var xi={View:f.a.View.extend({initialize:function(){var t=Object(o.a)();this.setElement("<div/>"),this.model=new f.a.Model({dataset_id:t.params.dataset_id}),this.active_tab="user",this.render()},render:function(){var t=this,e="".concat(Object(p.getAppRoot)(),"api/datasets/").concat(this.model.get("dataset_id"));g.b.get({url:e,success:function(e){var n="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(e.creating_job,"?full=True");g.b.get({url:n,success:function(n){t.render_error_page(e,n),t.find_common_problems(n)},error:function(){t.display_message({status:"error",message:"Error occurred while loading the job.",persistent:!0,cls:"errormessage"},t.$(".response-message"))}})},error:function(){t.display_message({status:"error",message:"Error occurred while loading the dataset.",persistent:!0,cls:"errormessage"},t.$(".response-message"))}})},find_common_problems:function(t){var e=this,n="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(t.id,"/common_problems");g.b.get({url:n,success:function(t){e.render_common_problems(t)},error:function(t){console.log("error"),console.log(t)}})},render_common_problems:function(t){var e=t.has_duplicate_inputs,n=t.has_empty_inputs;if(e||n){var i=this.$el.find(".common_problems");i.text("Detected Common Potential Problems"),n&&i.after("\n                    <p>\n                        The tool was executed with one or more empty input datasets. This frequently\n                        results in tool errors due to problematic input choices.\n                    <p>"),e&&i.after("\n                    <p>\n                        The tool was executed with one or more duplicate input datasets. This frequently\n                        results in tool errors due to problematic input choices.\n                    <p>")}},render_error_page:function(t,e){this.$el.empty().append("\n            ".concat(this._templateHeader(),"\n            <h2>Dataset Error Report</h2>\n            <p>An error occurred while running the tool <b>").concat(e.tool_id,"</b>.</p>\n            ").concat(this.job_summary(e),'\n            <h3>Troubleshooting</h3>\n            <p>\n                There are a number of helpful resources to self diagnose and\n                correct problems.\n                <br>\n                Start here:\n                <b>\n                    <a href="https://galaxyproject.org/support/tool-error/" target="_blank">\n                        My job ended with an error. What can I do?\n                    </a>\n                </b>\n            </p>')),this.$el.append("<h3>Issue Report</h3>").append(this._getBugFormTemplate(t,e))},job_summary:function(t){var e=t.tool_stderr,n=t.job_stderr,i=t.job_messages;if(!e&&!n&&!i)return'<h3 class="common_problems"></h3>';var a="<h3>Details</h3>";if(i){a+="<p>Execution resulted in the following messages:</p>";var o,s=wi(i);try{for(s.s();!(o=s.n()).done;){var l=o.value;a+='<p><pre class="rounded code">'.concat(r.default.escape(l.desc),"</pre></p>")}}catch(t){s.e(t)}finally{s.f()}}return e&&(a+="<p>Tool generated the following standard error:</p>",a+='<pre class="rounded code">'.concat(r.default.escape(e),"</pre>")),n&&(a+="<p>Galaxy job runner generated the following standard error:</p>",a+='<pre class="code">'.concat(r.default.escape(n),"</pre>")),a+='<h3 class="common_problems"></h3>'},display_message:function(t,e,n,i){i?n?e.append(new v.a.UnescapedMessage(t).$el):e.empty().html(new v.a.UnescapedMessage(t).$el):n?e.append(new v.a.Message(t).$el):e.empty().html(new v.a.Message(t).$el)},_templateHeader:function(){return'<div class="page-container edit-attr"><div class="response-message"></div></div>'},_getBugFormTemplate:function(t,e){var n=this,i=Object(o.a)().user.get("email"),a=new In.a({inputs:[{type:"text",hidden:!!i,name:"email",value:i,label:"Please provide your email:"},{type:"text",area:!0,name:"message",label:"Please provide detailed information on the activities leading to this issue:"}],buttons:{save:new v.a.Button({icon:"fa-bug",title:_()("Report"),cls:"btn btn-primary",floating:"clear",onclick:function(){var i=a.data.create(),r="".concat(Object(p.getAppRoot)(),"api/jobs/").concat(e.id,"/error");i.dataset_id=t.id,n.submit(i,r)}})}});return a.$el},submit:function(t,e){var n=this;u.a.ajax({type:"POST",url:e,data:t,success:function(t){n.$el.empty().append(n._templateHeader()),t.messages.forEach((function(t){n.display_message({status:t[1],message:t[0],persistent:!0},n.$(".response-message"),!0,!0)}))},error:function(){n.display_message({status:"error",message:"Error occurred while saving. Please fill all the required fields and try again.",persistent:!0,cls:"errormessage"},n.$(".response-message"))}})}})},Si=n(164),Mi={View:f.a.View.extend({initialize:function(){var t=Object(o.a)();this.setElement("<div/>"),this.model=new f.a.Model({dataset_id:t.params.dataset_id}),this.message=new v.a.Message({persistent:!0}),this.tabs=this._createTabs(),this.active_tab="user",this.$el.append(u()("<h4/>").append("Edit dataset attributes")).append(this.message.$el).append("<p/>").append(this.tabs.$el).hide(),this.render()},render:function(){var t=this;u.a.ajax({url:"".concat(Object(p.getAppRoot)(),"dataset/get_edit?dataset_id=").concat(t.model.get("dataset_id")),success:function(e){!t.initial_message&&t.message.update(e),t.initial_message=!0,r.default.each(t.forms,(function(t,n){t.model.set("inputs",e["".concat(n,"_inputs")]),t.model.set("hide_operations",e["".concat(n,"_disable")]),t.render()})),t.$el.show()},error:function(e){var n=e.responseJSON&&e.responseJSON.err_msg;t.message.update({status:"danger",message:n||"Error occurred while loading the dataset."})}})},_submit:function(t,e){var n=this,i=e.data.create();i.dataset_id=this.model.get("dataset_id"),i.operation=t,u.a.ajax({type:"PUT",url:"".concat(Object(p.getAppRoot)(),"dataset/set_edit"),data:i,success:function(t){n.message.update(t),n.render(),n._reloadHistory()},error:function(t){var e=t.responseJSON&&t.responseJSON.err_msg;n.message.update({status:"danger",message:e||"Error occurred while editing the dataset attributes."})}})},_createTabs:function(){this.forms={attribute:this._getAttribute(),conversion:this._getConversion(),datatype:this._getDatatype(),permission:this._getPermission()};var t=new Si.a.View;return t.add({id:"attribute",title:_()("Attributes"),icon:"fa fa-bars",tooltip:_()("Edit dataset attributes"),$el:this.forms.attribute.$el}),t.add({id:"convert",title:_()("Convert"),icon:"fa-gear",tooltip:_()("Convert to new format"),$el:this.forms.conversion.$el}),t.add({id:"datatype",title:_()("Datatypes"),icon:"fa-database",tooltip:_()("Change data type"),$el:this.forms.datatype.$el}),t.add({id:"permissions",title:_()("Permissions"),icon:"fa-user",tooltip:_()("Permissions"),$el:this.forms.permission.$el}),t},_getAttribute:function(){var t=this,e=new In.a({title:_()("Edit attributes"),operations:{submit_attributes:new v.a.Button({tooltip:_()("Save attributes of the dataset."),icon:"fa-floppy-o",title:_()("Save"),onclick:function(){t._submit("attributes",e)}}),submit_autodetect:new v.a.Button({tooltip:"This will inspect the dataset and attempt to correct the values of fields if they are not accurate.",icon:"fa-undo",title:"Auto-detect",onclick:function(){t._submit("autodetect",e)}})}});return e},_getConversion:function(){var t=this,e=new In.a({title:_()("Convert to new format"),operations:{submit_conversion:new v.a.Button({tooltip:_()("Convert the datatype to a new format."),title:_()("Convert datatype"),icon:"fa-exchange",onclick:function(){t._submit("conversion",e)}})}});return e},_getDatatype:function(){var t=this,e=new In.a({title:_()("Change datatype"),operations:{submit_datatype:new v.a.Button({tooltip:_()("Change the datatype to a new type."),title:_()("Change datatype"),icon:"fa-exchange",onclick:function(){t._submit("datatype",e)}}),submit_datatype_detect:new v.a.Button({tooltip:_()("Detect the datatype and change it."),title:_()("Detect datatype"),icon:"fa-undo",onclick:function(){t._submit("datatype_detect",e)}})}});return e},_getPermission:function(){var t=this,e=new In.a({title:_()("Manage dataset permissions"),operations:{submit_permission:new v.a.Button({tooltip:_()("Save permissions."),title:_()("Save permissions"),icon:"fa-floppy-o ",onclick:function(){t._submit("permission",e)}})}});return e},_reloadHistory:function(){var t=Object(o.a)();t&&t.currHistoryPanel.loadCurrentHistory()}})};function Ci(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e instanceof Object||(console.warn("safeAssign expected an object, instead got:",e),e={}),Object.keys(e).filter((function(e){return Object.prototype.hasOwnProperty.call(t,e)})).forEach((function(n){return t[n]=e[n]}))}function Ti(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ji=new WeakMap,Oi=new WeakMap,Li=new WeakMap,Di=new WeakMap,Ai=0,Ei=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Di.set(this,Ai++)}var e,n,i;return e=t,i=[{key:"setTransient",value:function(){var t=this;Li.has(t)||Li.set(t,new Set);for(var e=Li.get(t),n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];i.forEach((function(t){return e.add(t)})),Li.set(t,e)}},{key:"validate",value:function(t){if(Oi.has(this))return Oi.get(this)(t);throw new Error("Missing validator")}},{key:"setValidator",value:function(t){Oi.set(this,t)}}],(n=[{key:"updateState",value:function(){ji.set(this,this.state)}},{key:"errorMessage",value:function(t){return t in this.validationErrors?this.validationErrors[t]:"errmessage"}},{key:"fieldValid",value:function(t){return!(t in this.validationErrors)}},{key:"counter",get:function(){return Di.get(this)}},{key:"dirty",get:function(){return ji.get(this)!=this.state}},{key:"clean",get:function(){return!this.dirty}},{key:"state",get:function(){var t=this.transientFields;return JSON.stringify(this,(function(e){if(!t.has(e))return this[e]}))}},{key:"lastState",get:function(){return ji.get(this)}},{key:"transientFields",get:function(){var t=this.constructor;return Li.has(t)||Li.set(t,new Set),Li.get(t)}},{key:"valid",get:function(){return 0==Object.keys(this.validationErrors).length}},{key:"validationErrors",get:function(){return this.constructor.validate(this)}}])&&Ti(e.prototype,n),i&&Ti(e,i),t}();function Ii(t){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pi(t,e){return(Pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ni(t);if(e){var a=Ni(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Ri(this,n)}}function Ri(t,e){return!e||"object"!==Ii(e)&&"function"!=typeof e?Hi(t):e}function Hi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $i=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pi(t,e)}(n,t);var e=Yi(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).role_arn="",Ci(Hi(t),i),t.updateState(),t}return n}(Ei);function Fi(t){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wi(t,e){return(Wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Bi(t);if(e){var a=Bi(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Ui(this,n)}}function Ui(t,e){return!e||"object"!==Fi(e)&&"function"!=typeof e?Vi(t):e}function Vi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bi(t){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}$i.setValidator((function(t){var e={};return t.role_arn.length||(e.role_arn="Missing role_arn"),e})),$i.fields={role_arn:{label:"Role ARN",description:"The Amazon resource name (ARN) of the role to be assumed by Galaxy.",placeholder:"arn:aws:iam::XXXXXXXXXXXX:role/XXXXXXXXXXX"}};var qi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wi(t,e)}(n,t);var e=zi(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).tenant_id="",t.client_id="",t.client_secret="",Ci(Vi(t),i),t.updateState(),t}return n}(Ei);qi.setValidator((function(t){var e={};return t.tenant_id.length<36&&(e.tenant_id="Tenant ID too short"),t.tenant_id||(e.tenant_id="Missing Tenant ID"),t.client_id.length<36&&(e.client_id="Client ID too short"),t.client_id||(e.client_id="Missing client ID"),t.client_secret||(e.client_secret="Missing secret"),e})),qi.fields={tenant_id:{label:"Tenant ID",mask:"********-****-****-****-************",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",maxlength:36,description:"Your Tenant ID (or Directory ID) on Azure."},client_id:{label:"Client ID",mask:"********-****-****-****-************",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",maxlength:36,description:"The Client ID (or Application ID) you defined for Galaxy on your Azure directory."},client_secret:{label:"Client Secret",mask:"",placeholder:"Client Secret",description:"A secret string you obtained from Azure portal that Galaxy can use to prove its identity when requesting tokens to access your resources."}};var Gi=new Map;function Ji(t){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ki(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xi(t,e,n){return(Xi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=na(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=na(t);if(e){var a=na(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return ta(this,n)}}function ta(t,e){return!e||"object"!==Ji(e)&&"function"!=typeof e?ea(t):e}function ea(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function na(t){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Gi.set("aws",{klass:$i,label:"Amazon Web Services (AWS)"}),Gi.set("azure",{klass:qi,label:"Microsoft Azure"});var ia=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}(r,t);var e,n,i,a=Zi(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=a.call(this)).id=null,t.description="",t.authn_id=null,t.provider=null,t.expanded=!1,t.loading=!1;var n=Object.assign({},r.defaults,e);return Ci(ea(t),n),t.config=new t.configClass(n.config),t.updateState(),t}return e=r,i=[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new r(t)}},{key:"defaults",get:function(){return{authn_id:null,provider:"aws",expanded:!1}}}],(n=[{key:"match",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!t.length||this.title.includes(t)}},{key:"title",get:function(){return this.description.length?this.description:this.provider}},{key:"valid",get:function(){return Xi(na(r.prototype),"valid",this)&&this.config.valid}},{key:"resourceProvider",get:function(){return this.provider},set:function(t){this.provider=t,this.config=new this.configClass({})}},{key:"configClass",get:function(){return Gi.get(this.provider).klass}}])&&Ki(e.prototype,n),i&&Ki(e,i),r}(Ei);function aa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}ia.setTransient("expanded","loading"),ia.setValidator((function(t){var e={};return t.provider||(e.provider="Provider must be set"),t.authn_id||(e.authn_id="Please pick an identity provider"),t.config.valid||(e.config="Invalid config object"),e}));var ra=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id="",this.provider="",Ci(this,e)}var e,n,i;return e=t,i=[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}],(n=[{key:"authn_id",get:function(){return this.id}},{key:"text",get:function(){return this.provider}},{key:"value",get:function(){return this.id}}])&&aa(e.prototype,n),i&&aa(e,i),t}();function oa(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function sa(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){oa(r,i,a,o,s,"next",t)}function s(t){oa(r,i,a,o,s,"throw",t)}o(void 0)}))}}var la,ca=function(t){return Object(a.c)()+t};function da(){return(da=sa(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=ca("api/cloud/authz"),t.next=3,S.a.get(e);case 3:if(200==(n=t.sent).status){t.next=6;break}throw new Error("Unexpected response from listing.");case 6:return t.abrupt("return",n.data.map(ia.create));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ua(){return(ua=sa(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ca("api/cloud/authz/${id}"),t.next=3,S.a.get(n);case 3:if(200==(i=t.sent).status){t.next=6;break}throw new Error("Unexpected response loading key.");case 6:return t.abrupt("return",ia.create(i.data));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ha(){return(ha=sa(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ia.create(e),t.next=3,fa(n);case 3:if(200==(i=t.sent).status){t.next=6;break}throw new Error("Save failure.");case 6:return t.abrupt("return",ia.create(i.data));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function fa(t){return pa.apply(this,arguments)}function pa(){return(pa=sa(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.id?S.a.put(ca("api/cloud/authz/".concat(e.id)),e):S.a.post(ca("api/cloud/authz"),e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ma(){return(ma=sa(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=ia.create(e)).id){t.next=8;break}return i=ca("api/cloud/authz/".concat(e.id)),t.next=5,S.a.delete(i);case 5:if(200==t.sent.status){t.next=8;break}throw new Error("Delete failure.");case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _a(){return ga.apply(this,arguments)}function ga(){return(ga=sa(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(la){t.next=8;break}return e=ca("authnz"),t.next=4,S.a.get(e);case 4:if(200==(n=t.sent).status){t.next=7;break}throw new Error("Unable to load identity providers");case 7:la=n.data.map(ra.create);case 8:return t.abrupt("return",la);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var va={listCredentials:function(){return da.apply(this,arguments)},getCredential:function(t){return ua.apply(this,arguments)},saveCredential:function(t){return ha.apply(this,arguments)},deleteCredential:function(t){return ma.apply(this,arguments)},getIdentityProviders:_a},ya=n(1055),ba=n(442),wa={components:{MaskedInput:{extends:ya.a,props:{mask:{type:String,required:!1,default:""}},computed:{masker:function(){return Object(ba.a)({mask:this.mask})}},methods:{getFormatted:function(t){var e=this.stringifyValue(t);return this.mask.length?this.masker.resolve(e):e}}}},props:{value:{type:Object,required:!0}},computed:{config:function(){return this.value},fieldDefs:function(){return this.value.constructor.fields}}};function ka(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return xa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Sa={components:{CredentialConfig:Object(T.a)(wa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.fieldDefs,(function(e,i){return n("b-form-group",{key:i,attrs:{label:e.label||i,"label-for":"config-"+i,"label-cols-lg":"3",state:t.config.fieldValid(i),"invalid-feedback":t.config.errorMessage(i)}},[n("masked-input",{attrs:{id:"config-"+i,mask:e.mask,placeholder:e.placeholder,maxlength:e.maxlength||Math.Infinity,state:t.config.fieldValid(i),trim:""},model:{value:t.config[i],callback:function(e){t.$set(t.config,i,e)},expression:"config[fieldName]"}})],1)})),1)}),[],!1,null,null,null).exports},props:{value:{type:ia,required:!0}},data:function(){return{identityProviders:[]}},computed:{credential:function(){return this.value},resourceProviderOptions:function(){return Array.from(Gi.entries()).map((function(t){var e=ka(t,2);return{value:e[0],text:e[1].label}}))},config:function(){return this.credential.config},loading:function(){return this.credential.loading},saveButtonDisabled:function(){return!(this.credential.valid&&this.credential.dirty)},saveButtonVariant:function(){return this.saveButtonDisabled?"secondary":"primary"},saveButtonTitle:function(){return this.loading?"Saving Key...":"Save Key"}},created:function(){var t=this;_a().then((function(e){t.credential.authn_id||1!=e.length||(t.credential.authn_id=e[0].authn_id,t.credential.updateState()),t.identityProviders=e}))}},Ma={components:{CredentialForm:Object(T.a)(Sa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{attrs:{validated:t.credential.isValid}},[n("b-form-group",{attrs:{label:"Description","label-for":"credentialDescription","label-cols-lg":"3"}},[n("b-form-input",{attrs:{id:"credentialDescription",state:t.credential.fieldValid("description"),placeholder:"Description (optional)",trim:""},model:{value:t.credential.description,callback:function(e){t.$set(t.credential,"description",e)},expression:"credential.description"}})],1),t._v(" "),t.identityProviders.length>1?n("b-form-group",{attrs:{label:"Identity Provider","label-for":"identityProvider","label-cols-lg":"3"}},[n("b-form-select",{attrs:{id:"identityProvider",state:t.credential.fieldValid("authn_id"),options:t.identityProviders},model:{value:t.credential.authn_id,callback:function(e){t.$set(t.credential,"authn_id",e)},expression:"credential.authn_id"}})],1):t._e(),t._v(" "),n("b-form-group",{attrs:{label:"Resource Provider","label-for":"resourceProvider","label-cols-lg":"3"}},[n("b-form-select",{attrs:{id:"resourceProvider",state:t.credential.fieldValid("provider"),options:t.resourceProviderOptions},model:{value:t.credential.resourceProvider,callback:function(e){t.$set(t.credential,"resourceProvider",e)},expression:"credential.resourceProvider"}})],1),t._v(" "),n("credential-config",{model:{value:t.credential.config,callback:function(e){t.$set(t.credential,"config",e)},expression:"credential.config"}}),t._v(" "),n("footer",{staticClass:"border-top"},[n("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return e.preventDefault(),t.$emit("delete",t.credential)}}},[t._v("\n            Delete Key\n        ")]),t._v(" "),n("b-button",{attrs:{"aria-label":"Save Key",variant:t.saveButtonVariant,disabled:t.saveButtonDisabled},on:{click:function(e){return e.preventDefault(),t.$emit("save",t.credential)}}},[t._v("\n            "+t._s(t.saveButtonTitle)+"\n        ")])],1)],1)}),[],!1,null,null,null).exports},props:{credential:{type:ia,required:!0}},computed:{statusClasses:function(){var t=this.credential,e=t.expanded,n=t.valid,i=t.dirty;return{loading:t.loading,expanded:e,valid:n,dirty:i,collapsed:!e}},variant:function(){return this.expanded?"":this.credential.dirty?"warning":this.credential.valid?"primary":"danger"},expanded:function(){return this.credential.expanded}},methods:{expand:function(t){var e=void 0!==t?t:!this.expanded;this.$emit("expand",{expanded:e})}}},Ca=Object(T.a)(Ma,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group-item",{staticClass:"cloud-auth-key",class:t.statusClasses,attrs:{variant:t.variant,button:!t.expanded}},[n("header",[n("hgroup",[n("h4",{on:{click:function(e){return e.preventDefault(),t.expand()}}},[t._v(t._s(t.credential.title))]),t._v(" "),n("nav",{staticClass:"operations"},[n("ul",[n("transition",{attrs:{name:"fade"}},[t.expanded&&t.credential.dirty?n("li",{staticClass:"save"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Save Key",title:"Save Key"},on:{click:function(e){return e.preventDefault(),t.$emit("save",t.credential)}}},[n("span",[t._v("Save Key")])])]):t._e()]),t._v(" "),n("li",{staticClass:"delete"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Delete Key",title:"Delete Key"},on:{click:function(e){return e.preventDefault(),t.$emit("delete",t.credential)}}},[n("span",[t._v("Delete Key")])])]),t._v(" "),n("li",{staticClass:"details"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Show Details",title:"Show Details"},on:{click:function(e){return e.preventDefault(),t.expand()}}},[n("span",[t._v("Details")])])])],1)])])]),t._v(" "),t.expanded?n("credential-form",{staticClass:"border-top",on:{click:function(e){return e.target!==e.currentTarget?null:t.expand()},save:function(e){return t.$emit("save",t.credential)},delete:function(e){return t.$emit("delete",t.credential)}},model:{value:t.credential,callback:function(e){t.credential=e},expression:"credential"}}):t._e()],1)}),[],!1,null,null,null).exports;function Ta(t){return function(t){if(Array.isArray(t))return ja(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ja(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ja(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ja(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}k.default.use(N.a);var Oa={components:{CloudAuthItem:Ca},data:function(){return{items:[],filter:"",showHelp:!0,showFilter:!1,loading:!1,doomedItem:null,errorMessage:null}},computed:{filteredItems:function(){var t=this;return this.items.filter((function(e){return e.match(t.filter)}))},filterDescription:function(){return"".concat(this.filteredItems.length," matches out of ").concat(this.items.length," items")},deleteButtonVariant:function(){return this.showDeleted?"primary":"secondary"},hasDoomed:{get:function(){return null!==this.doomedItem},set:function(){}}},watch:{showDeleted:function(t){this.loadCredentials({deleted:t})}},methods:{loadCredentials:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,va.listCredentials(e).then((function(e){return t.items=e})).catch(this.setError("Unable to load cloud keys.")).finally((function(){return t.loading=!1}))},onCreate:function(){var t=ia.create({expanded:!0});this.addItem(t)},onSave:function(t){t.valid&&(t.loading=!0,va.saveCredential(t).then((function(e){t.id=e.id,t.updateState()})).catch(this.setError("Unable to save key.")).finally((function(){return t.loading=!1})))},onDelete:function(t){this.doomedItem=t,t.id?this.$refs.deleteModal.show():(this.removeItem(t),this.doomedItem=null)},deleteKey:function(){var t=this;va.deleteCredential(this.doomedItem).then((function(){return t.removeItem(t.doomedItem)})).catch(this.setError("Unable to delete cloud key.")).finally((function(){t.doomedItem=null}))},expand:function(t,e){var n=e.expanded;t.expanded=n,n&&this.items.filter((function(e){return e!==t})).forEach((function(t){return t.expanded=!1}))},addItem:function(t){this.items=[].concat(Ta(this.items),[t])},removeItem:function(t){this.items=this.items.filter((function(e){return e!==t}))},setError:function(t){var e=this;return function(n){e.errorMessage=t,console.warn(n)}}},created:function(){this.loadCredentials()}},La=(n(1725),Object(T.a)(Oa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"cloud-auth"},[n("header",[n("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==t.errorMessage},on:{dismissed:function(e){t.errorMessage=null}}},[t._v("\n            "+t._s(t.errorMessage)+"\n        ")]),t._v(" "),n("hgroup",{staticClass:"cloud-auth-title"},[n("h1",[t._v("Manage Cloud Authorization")]),t._v(" "),n("nav",{staticClass:"operations"},[n("ul",[n("li",{staticClass:"cloudKeyHelp"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:{active:t.showHelp},attrs:{"aria-label":"Instructions",title:"Instructions"},on:{click:function(e){e.preventDefault(),t.showHelp=!t.showHelp}}},[n("span",[t._v("Instructions")])])]),t._v(" "),n("li",{staticClass:"cloudKeyFilter"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:{active:t.showFilter},attrs:{"aria-label":"Filter Results",title:"Filter Results"},on:{click:function(e){e.preventDefault(),t.showFilter=!t.showFilter}}},[n("span",[t._v("Filter")])])]),t._v(" "),n("li",{staticClass:"createCloudKey"},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"aria-label":"Create New Key",title:"Create New Key"},on:{click:function(e){return e.preventDefault(),t.onCreate(e)}}},[n("span",[t._v("Create New Key")])])])])])]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showHelp?n("hgroup",[n("p",[t._v("See the online "),n("a",{attrs:{href:"https://galaxyproject.org/cloud/authnz/"}},[t._v("Documentation")]),t._v(".")])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showFilter?n("hgroup",[n("b-form-group",{attrs:{description:t.filterDescription}},[n("b-form-input",{attrs:{type:"text",placeholder:"Filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1):t._e()]),t._v(" "),n("b-button-group",{staticClass:"mb-4"},[n("button",{attrs:{name:"createNewKey"},on:{click:t.onCreate}},[t._v("\n                Create New Authorization Key\n            ")])])],1),t._v(" "),n("div",{staticClass:"scroll-container"},[n("b-list-group",[n("transition-group",{attrs:{name:"fade"}},t._l(t.filteredItems,(function(e){return n("cloud-auth-item",{key:e.counter,staticClass:"mb-1",attrs:{credential:e},on:{delete:t.onDelete,save:t.onSave,expand:function(n){return t.expand(e,n)}}})})),1)],1)],1),t._v(" "),n("b-modal",{ref:"deleteModal",attrs:{centered:"",id:"deleteCredentialModal",title:"Delete Key?",size:"sm"},on:{ok:t.deleteKey,cancel:function(e){t.doomedItem=null}},model:{value:t.hasDoomed,callback:function(e){t.hasDoomed=e},expression:"hasDoomed"}})],1)}),[],!1,null,null,null).exports);function Da(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Aa(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Da(r,i,a,o,s,"next",t)}function s(t){Da(r,i,a,o,s,"throw",t)}o(void 0)}))}}var Ea,Ia=function(t){return Object(a.c)()+t};function Pa(){return(Pa=Aa(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return n="custos"===e.provider||"cilogon"===e.provider?Ia("authnz/".concat(e.provider,"/disconnect/").concat(e.email)):Ia("authnz/".concat(e.provider,"/disconnect/")),t.next=4,S.a.delete(n);case 4:if(200==t.sent.status){t.next=7;break}throw new Error("Delete failure.");case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ya(){return(Ya=Aa(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Ia("authnz"),t.next=3,S.a.get(e);case 3:if(200==(n=t.sent).status){t.next=6;break}throw new Error("Unable to load connected external identities");case 6:return Ea=n.data,t.abrupt("return",Ea);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ra(){return(Ra=Aa(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Ia("authnz/".concat(e,"/login")),t.next=3,S.a.post(n);case 3:if(200==(i=t.sent).status){t.next=6;break}throw new Error("Save failure.");case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ha(){return(Ha=Aa(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Na(),console.log(e.username),t.abrupt("return",Na().username);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Na(){return $a.apply(this,arguments)}function $a(){return($a=Aa(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Ia("api/users/current"),t.next=3,S.a.get(e);case 3:if(200==(n=t.sent).status){t.next=6;break}throw new Error(n);case 6:return t.abrupt("return",n.data);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Fa={saveIdentity:function(t){return Ra.apply(this,arguments)},disconnectIdentity:function(t){return Pa.apply(this,arguments)},getIdentityProviders:function(){return Ya.apply(this,arguments)},hasUsername:function(){return Ha.apply(this,arguments)}},Wa=n(648);k.default.use(N.a);var za={components:{ExternalLogin:Wa.a},data:function(){return{items:[],showHelp:!0,loading:!1,doomedItem:null,errorMessage:null,enable_oidc:Object(o.a)().config.enable_oidc,cilogonOrCustos:null}},computed:{deleteButtonVariant:function(){return this.showDeleted?"primary":"secondary"},hasDoomed:{get:function(){return null!==this.doomedItem},set:function(){}}},watch:{showDeleted:function(t){this.loadIdentities({deleted:t})}},methods:{loadIdentities:function(){var t=this;this.loading=!0,Fa.getIdentityProviders().then((function(e){t.items=e})).catch(this.setError("Unable to load connected external identities.")).finally((function(){return t.loading=!1}))},onDisconnect:function(t){this.doomedItem=t,t.id?this.items.length>1?this.$refs.deleteModal.show():(this.$refs.deleteAndResetModal.show(),this.setError("Before disconnecting this identity, you need to set your account password, in order to avoid being locked out of your account.")):this.setError("Before disconnecting this identity, you need to set your account password, in order to avoid being locked out of your account.")},disconnectID:function(){var t=this;Fa.disconnectIdentity(this.doomedItem).then((function(){t.removeItem(t.doomedItem)})).catch((function(e){e.data?t.setError("Unable to disconnect external identity."):t.removeItem(t.doomedItem)})).finally((function(){t.removeItem(t.doomedItem),t.doomedItem=null}))},disconnectAndReset:function(){this.disconnectID(),Object(J.b)()},removeItem:function(t){this.items=this.items.filter((function(e){return e!=t}))},setError:function(t){var e=this;return function(n){e.errorMessage=t,console.warn(n)}}},created:function(){this.loadIdentities()}},Ua=(n(1726),Object(T.a)(za,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"external-id"},[n("header",[n("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==t.errorMessage},on:{dismissed:function(e){t.errorMessage=null}}},[t._v(t._s(t.errorMessage))]),t._v(" "),t._m(0),t._v(" "),n("p",[t._v("\n            Users with existing Galaxy user accounts (e.g., via Galaxy username and password) can associate their\n            account with their 3rd party identities. For instance, if a user associates their Galaxy account with\n            their Google account, then they can login to Galaxy either using their Galaxy username and password, or\n            their Google account. Whichever method they use they will be assuming same Galaxy user account, hence\n            having access to the same histories, workflows, datasets, libraries, etc.\n        ")]),t._v(" "),t._m(1)],1),t._v(" "),t.items.length?n("div",{staticClass:"external-subheading"},[n("h3",[t._v("Connected External Identities")]),t._v(" "),t._l(t.items,(function(e){return n("b-button",{key:e.email,staticClass:"d-block mt-3",attrs:{"aria-label":"Disconnect External Identity",title:"Disconnect External Identity"},on:{click:function(n){return t.onDisconnect(e)}}},[t._v("\n            Disconnect "+t._s(e.provider.charAt(0).toUpperCase()+e.provider.slice(1))+" - "+t._s(e.email)+"\n        ")])})),t._v(" "),n("b-modal",{ref:"deleteModal",attrs:{centered:"",id:"disconnectIDModal",title:"Disconnect Identity?",size:"sm"},on:{ok:t.disconnectID,cancel:function(e){t.doomedItem=null}}}),t._v(" "),n("b-modal",{ref:"deleteAndResetModal",attrs:{centered:"",id:"disconnectAndResetModal",title:"Deleting last external identity"},on:{ok:t.disconnectAndReset,cancel:function(e){t.doomedItem=null}}},[n("p",[t._v("\n                This is your only defined external identity. If you delete this identity, you will be logged out. To\n                log back in you will need to use a password associated with your account, or reconnect to this third\n                party identity. If you don't know your Galaxy user password, you can reset it or contact an\n                administrator for help.\n            ")])]),t._v(" "),n("b-alert",{attrs:{dismissible:"",fade:"",variant:"warning",show:null!==t.errorMessage},on:{dismissed:function(e){t.errorMessage=null}}},[t._v(t._s(t.errorMessage))])],2):t._e(),t._v(" "),t.enable_oidc?n("div",{staticClass:"external-subheading"},[n("h3",[t._v("Connect Other External Identities")]),t._v(" "),n("external-login",{attrs:{login_page:!1}})],1):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("hgroup",{staticClass:"external-id-title"},[e("h1",[this._v("Manage External Identities")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("\n            See more information, including a list of supported identity providers,\n            "),e("a",{attrs:{href:"https://galaxyproject.org/authnz/use/oidc/"}},[this._v("here")]),this._v(".\n        ")])}],!1,null,null,null).exports),Va=n(645),Ba=n(101),qa=n(167),Ga=n(268),Ja=n(166),Ka=n(640);F.c.add(de.f),F.c.add(W.E);var Xa={name:"FavoritesButton",props:{query:{type:String}},components:{FontAwesomeIcon:$.a},data:function(){return{searchKey:"#favorites",tooltipToggle:"Show favorites",tooltipUntoggle:"Clear",toggle:!1}},directives:{"v-b-tooltip":Ka.a},watch:{query:function(){this.toggle=this.query==this.searchKey}},computed:{tooltipText:function(){return this.toggle?this.tooltipUntoggle:this.tooltipToggle}},methods:{onFavorites:function(){this.toggle=!this.toggle,this.toggle?this.$emit("onFavorites",this.searchKey):this.$emit("onFavorites",null)}}},Qa=Object(T.a)(Xa,(function(){var t=this.$createElement,e=this._self._c||t;return e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"panel-header-button",attrs:{title:this.tooltipText,href:"javascript:void(0)",role:"button","aria-label":"Show favorite tools"},on:{click:this.onFavorites}},[this.toggle?e("font-awesome-icon",{attrs:{icon:["fas","star"]}}):e("font-awesome-icon",{attrs:{icon:["far","star"]}})],1)}),[],!1,null,null,null).exports,Za=n(246);function tr(t){return function(t){if(Array.isArray(t))return er(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return er(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var nr={name:"ToolBox",components:{UploadButton:Ja.a,FavoritesButton:Qa,ToolSection:qa.a,ToolSearch:Ga.a},data:function(){return{query:null,results:null,queryFilter:null,queryPending:!1,showSections:!1,buttonText:"",buttonIcon:""}},props:{toolbox:{type:Array,required:!0},storedWorkflowMenuEntries:{type:Array,required:!0},workflowTitle:{type:String,default:_()("Workflows")}},computed:{queryTooShort:function(){return this.query&&this.query.length<3},queryFinished:function(){return this.query&&1!=this.queryPending},sections:function(){return this.showSections?Object(Za.a)(this.toolbox,this.results):Object(Za.b)(this.toolbox,this.results)},isUser:function(){var t=Object(o.a)();return!(!t.user||!t.user.id)},workflows:function(){return[{title:_()("All workflows"),href:"".concat(Object(a.b)(),"workflows/list"),id:"list"}].concat(tr(this.storedWorkflowMenuEntries.map((function(t){return{id:t.id,title:t.name,href:"".concat(Object(a.b)(),"workflows/run?id=").concat(t.id)}}))))},hasResults:function(){return this.results&&this.results.length>0}},methods:{onQuery:function(t){this.query=t,this.queryPending=!0},onResults:function(t){this.results=t,this.queryFilter=this.hasResults?this.query:null,this.setButtonText(),this.queryPending=!1},onFavorites:function(t){this.query=t},onOpen:function(t,e){if("upload1"===t.id)e.preventDefault(),this.eventHub.$emit("upload:open");else if("regular"===t.form_style){e.preventDefault(),Object(o.a)().router.push("/",{tool_id:t.id,version:t.version})}},onToggle:function(){this.showSections=!this.showSections,this.setButtonText()},setButtonText:function(){this.buttonText=this.showSections?"Hide Sections":"Show Sections",this.buttonIcon=this.showSections?"fa fa-eye-slash":"fa fa-eye"}}},ir=Object(T.a)(nr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"unified-panel"},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("div",{staticClass:"panel-header-buttons"},[t.isUser?n("favorites-button",{attrs:{query:t.query},on:{onFavorites:t.onFavorites}}):t._e()],1),t._v(" "),n("div",{staticClass:"panel-header-text"},[t._v("Tools")])])]),t._v(" "),n("div",{staticClass:"unified-panel-controls"},[n("tool-search",{attrs:{query:t.query,placeholder:"search tools"},on:{onQuery:t.onQuery,onResults:t.onResults}}),t._v(" "),n("upload-button"),t._v(" "),t.hasResults?n("div",{staticClass:"py-2"},[n("b-button",{staticClass:"w-100",attrs:{size:"sm"},on:{click:t.onToggle}},[n("span",{class:t.buttonIcon}),t._v(" "),n("span",{staticClass:"mr-1"},[t._v(t._s(t.buttonText))])])],1):t.queryTooShort?n("div",{staticClass:"py-2"},[n("b-badge",{staticClass:"alert-danger w-100"},[t._v("Search string too short!")])],1):t.queryFinished?n("div",{staticClass:"py-2"},[n("b-badge",{staticClass:"alert-danger w-100"},[t._v("No results found!")])],1):t._e()],1),t._v(" "),n("div",{staticClass:"unified-panel-body"},[n("div",{staticClass:"toolMenuContainer"},[n("div",{staticClass:"toolMenu"},t._l(t.sections,(function(e){return n("tool-section",{key:e.id,attrs:{category:e,"query-filter":t.queryFilter},on:{onClick:t.onOpen}})})),1),t._v(" "),n("tool-section",{attrs:{category:{text:t.workflowTitle}}}),t._v(" "),n("div",{staticClass:"toolSectionBody",attrs:{id:"internal-workflows"}},[n("div",{staticClass:"toolSectionBg"}),t._v(" "),t._l(t.workflows,(function(e){return n("div",{key:e.id,staticClass:"toolTitle"},[n("a",{attrs:{href:e.href}},[t._v(t._s(e.title))])])}))],2)],1)])])}),[],!1,null,null,null).exports,ar=n(168),rr=n(36),or=f.a.View.extend({initialize:function(){this.model=new f.a.Model({title:_()("Tools")})},isVueWrapper:!0,mountVueComponent:function(t){var e=Object(o.a)();return this.component=Object(rr.a)(ar.a)({side:"left",currentPanel:ir,currentPanelProperties:{storedWorkflowMenuEntries:e.config.stored_workflow_menu_entries,toolbox:e.config.toolbox}},t)},toString:function(){return"toolPanel"}}),sr=n(163),lr=n(217),cr=[{html:_()("History Actions"),header:!0,anon:!0},{html:_()("Copy"),func:function(){var t=Object(o.a)();Object(_i.a)(t.currHistoryPanel.model).done((function(){t.currHistoryPanel.loadCurrentHistory()}))}},{html:_()("Share or Publish"),func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&t.router&&t.router.push("/histories/sharing?id=".concat(t.currHistoryPanel.model.id))}},{html:_()("Show Structure"),anon:!0,func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&t.router&&t.router.push("/histories/show_structure")}},{html:_()("Extract Workflow"),href:"workflow/build_from_current_history"},{html:_()("Set Permissions"),func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&t.router&&t.router.push("/histories/permissions?id=".concat(t.currHistoryPanel.model.id))}},{html:_()("Make Private"),anon:!0,func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&confirm(_()("This will make all the data in this history private (excluding library datasets), and will set permissions such that all new data is created as private.  Any datasets within that are currently shared will need to be re-shared or published.  Are you sure you want to do this?"))&&u.a.post("".concat(t.root,"history/make_private"),{history_id:t.currHistoryPanel.model.id},(function(){t.currHistoryPanel.loadCurrentHistory()}))}},{html:_()("Resume Paused Jobs"),href:"history/resume_paused_jobs?current=True",anon:!0},{html:_()("Dataset Actions"),header:!0,anon:!0},{html:_()("Copy Datasets"),href:"dataset/copy_datasets"},{html:_()("Collapse Expanded Datasets"),func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&t.currHistoryPanel.collapseAll()}},{html:_()("Unhide Hidden Datasets"),anon:!0,func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&confirm(_()("Really unhide all hidden datasets?"))&&u.a.post("".concat(Object(p.getAppRoot)(),"history/adjust_hidden"),{user_action:"unhide"},(function(){t.currHistoryPanel.loadCurrentHistory()}))}},{html:_()("Delete Hidden Datasets"),anon:!0,func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&confirm(_()("Really delete all hidden datasets?"))&&u.a.post("".concat(Object(p.getAppRoot)(),"history/adjust_hidden"),{user_action:"delete"},(function(){t.currHistoryPanel.loadCurrentHistory()}))}},{html:_()("Purge Deleted Datasets"),confirm:_()("Really delete all deleted datasets permanently? This cannot be undone."),href:"history/purge_deleted_datasets",purge:!0,anon:!0},{html:_()("Downloads"),header:!0},{html:_()("Export Tool Citations"),anon:!0,func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&t.router&&t.router.push("/histories/citations?id=".concat(t.currHistoryPanel.model.id))}},{html:_()("Export History to File"),anon:!0,func:function(){var t=Object(o.a)();t&&t.currHistoryPanel&&t.router&&t.router.push("/histories/".concat(t.currHistoryPanel.model.id,"/export"))}},{html:_()("Beta Features"),anon:!1,header:!0},{html:_()("Use Beta History Panel"),anon:!1,func:function(){Object(lr.b)()}}];w.a.load({type:"history-menu",async:!1,callback:function(t){var e=[];t.each((function(t){var n=t.toJSON();n.activate&&e.push({html:_()(n.config.title),func:n.config.function&&new Function(n.config.function),anon:!0})})),e.length>0&&(e.unshift({html:_()("Webhooks"),header:!0}),u.a.merge(cr,e))}});var dr=function(t,e){var n=function(t,e,n){return r.default.clone(cr).filter((function(i){return!(t&&!i.anon)&&(!(!e&&i.purge)&&(i.href&&(i.href=n+i.href,i.target=i.target||"galaxy_main"),i.confirm&&(i.func=function(){var t=window.parent.document.getElementById("galaxy_main");confirm(i.confirm)&&t&&(t.src=i.href)}),!0))}))}(void 0===(e=e||{}).anonymous||e.anonymous,e.purgeAllowed||!1,Object(p.getAppRoot)());return new sr.a(t,n)},ur=n(144),hr=n(11),fr=n(215),pr=hr.a.SessionStorageModel.extend({defaults:{tagsEditorShown:!1,annotationEditorShown:!1,scrollPosition:0},toString:function(){return"HistoryViewPrefs(".concat(JSON.stringify(this.toJSON()),")")}});pr.storageKey=function(){return"history-panel"};var mr,_r=ur.a.HistoryViewEdit,gr=_r.extend({className:"".concat(_r.prototype.className," current-history-panel"),HDCAViewClass:_r.prototype.HDCAViewClass.extend({foldoutStyle:"drilldown"}),emptyMsg:[_()("This history is empty"),". ",_()("You can "),'<a class="uploader-link" href="javascript:void(0)">',_()("load your own data"),"</a>",_()(" or "),'<a class="get-data-link" href="javascript:void(0)">',_()("get data from an external source"),"</a>"].join(""),initialize:function(t){t=t||{},this.preferences=new pr(r.default.extend({id:pr.storageKey()},r.default.pick(t,r.default.keys(pr.prototype.defaults)))),_r.prototype.initialize.call(this,t),this.panelStack=[],this.currentContentId=t.currentContentId||null},_setUpListeners:function(){_r.prototype._setUpListeners.call(this);var t=this;this.on("new-model",(function(){t.preferences.set("scrollPosition",0)}))},loadCurrentHistory:function(){return this.loadHistory(null,{url:"".concat(Object(p.getAppRoot)(),"history/current_history_json")})},switchToHistory:function(t,e){return Object(o.a)().user.isAnonymous()?(this.trigger("error",_()("You must be logged in to switch histories"),_()("Anonymous user")),u.a.when()):this.loadHistory(t,{url:"".concat(Object(p.getAppRoot)(),"history/set_as_current?id=").concat(t)})},createNewHistory:function(t){return Object(o.a)().user.isAnonymous()?(this.trigger("error",_()("You must be logged in to create histories"),_()("Anonymous user")),u.a.when()):this.loadHistory(null,{url:"".concat(Object(p.getAppRoot)(),"history/create_new_current")})},setModel:function(t,e,n){return _r.prototype.setModel.call(this,t,e,n),this.model&&this.model.id&&(this.log("checking for updates"),this.model.checkForUpdates()),this},_setUpModelListeners:function(){return _r.prototype._setUpModelListeners.call(this),this.listenTo(this.model,{"change:nice_size change:size":function(){this.trigger("history-size-change",this,this.model,arguments)},"change:id":function(){this.once("loading-done",(function(){this.model.checkForUpdates()}))}})},_setUpCollectionListeners:function(){_r.prototype._setUpCollectionListeners.call(this),this.listenTo(this.collection,"state:ready",(function(t,e,n){t.get("visible")||this.collection.storage.includeHidden()||this.removeItemView(t)}))},_setUpBehaviors:function(t){t=t||this.$el;var e=this;return _r.prototype._setUpBehaviors.call(e,t),this._debouncedScrollCaptureHandler||(this._debouncedScrollCaptureHandler=r.default.debounce((function(){e.$el.is(":visible")&&e.preferences.set("scrollPosition",u()(this).scrollTop())}),40)),e.$scrollContainer(t).off("scroll",this._debouncedScrollCaptureHandler).on("scroll",this._debouncedScrollCaptureHandler),e},_buildNewRender:function(){if(!this.model)return u()();var t=_r.prototype._buildNewRender.call(this);return t.find(".search").prependTo(t.find("> .controls")),this._renderQuotaMessage(t),t},_renderQuotaMessage:function(t){return t=t||this.$el,u()(this.templates.quotaMsg({},this)).prependTo(t.find(".messages"))},_renderTags:function(t){return _r.prototype._renderTags.call(this,t)},_renderAnnotation:function(t){var e=this;_r.prototype._renderAnnotation.call(e,t),e.preferences.get("annotationEditorShown")&&e.annotationEditor.toggle(!0),e.listenTo(e.annotationEditor,"hiddenUntilActivated:shown hiddenUntilActivated:hidden",(function(t){e.preferences.set("annotationEditorShown",t.hidden)}))},_swapNewRender:function(t){_r.prototype._swapNewRender.call(this,t);var e=this;return r.default.delay((function(){var t=e.preferences.get("scrollPosition");t&&e.scrollTo(t,0)}),10),this},_attachItems:function(t){_r.prototype._attachItems.call(this,t);return this.currentContentId&&this._setCurrentContentById(this.currentContentId),this},addItemView:function(t,e,n){var i=_r.prototype.addItemView.call(this,t,e,n);return i&&this.panelStack.length?this._collapseDrilldownPanel():i},_setUpItemViewListeners:function(t){return _r.prototype._setUpItemViewListeners.call(this,t),this.listenTo(t,{"expanded:drilldown":function(t,e){this._expandDrilldownPanel(e)},"collapsed:drilldown":function(t,e){this._collapseDrilldownPanel(e)}})},setCurrentContent:function(t){this.$(".history-content.current-content").removeClass("current-content"),t?(t.$el.addClass("current-content"),this.currentContentId=t.model.id):this.currentContentId=null},_setCurrentContentById:function(t){var e=this.viewFromModelId(t)||null;this.setCurrentContent(e)},_expandDrilldownPanel:function(t){this.panelStack.push(t),this.$controls().add(this.$list()).hide(),t.parentName=this.model.get("name"),t.delegateEvents().render().$el.appendTo(this.$el)},_collapseDrilldownPanel:function(t){this.panelStack.pop(),this.$controls().add(this.$list()).show()},events:r.default.extend(r.default.clone(_r.prototype.events),{"click .uploader-link":function(t){fr.a.$emit("upload:open")},"click .get-data-link":function(t){var e=u()(".toolMenuContainer");e.parent().scrollTop(0),e.find('span:contains("Get Data")').click()}}),listenToGalaxy:function(t){this.listenTo(t,{"center-frame:load":function(t){var e=t.fullpath,n=null;r.default.find({display:/datasets\/([a-f0-9]+)\/display/,edit:/datasets\/([a-f0-9]+)\/edit/,report_error:/dataset\/errors\?id=([a-f0-9]+)/,rerun:/tool_runner\/rerun\?id=([a-f0-9]+)/,show_params:/datasets\/([a-f0-9]+)\/show_params/},(function(t,i){return n=r.default.result(e.match(t),1)})),this._setCurrentContentById(n?"dataset-".concat(n):null)},"center-panel:load":function(t){try{var e=t.model.attributes.dataset_id||null;if(null===e)throw"Invalid id";this._setCurrentContentById("dataset-".concat(e))}catch(t){this._setCurrentContentById()}},"activate-hda":function(t){this._setCurrentContentById("dataset-".concat(t))}})},connectToQuotaMeter:function(t){return t?(this.listenTo(t,"quota:over",this.showQuotaMessage),this.listenTo(t,"quota:under",this.hideQuotaMessage),this.on("rendered rendered:initial",(function(){t&&t.isOverQuota()&&this.showQuotaMessage()})),this):this},clearMessages:function(t){var e=r.default.isUndefined(t)?this.$messages().children('[class$="message"]'):u()(t.currentTarget);return(e=e.not(".quota-message")).fadeOut(this.fxSpeed,(function(){u()(this).remove()})),this},showQuotaMessage:function(){var t=this.$(".quota-message");t.is(":hidden")&&t.slideDown(this.fxSpeed)},hideQuotaMessage:function(){var t=this.$(".quota-message");t.is(":hidden")||t.slideUp(this.fxSpeed)},unhideHidden:function(){var t=this;return window.confirm(_()("Really unhide all hidden datasets?"))?t.model.contents._filterAndUpdate({visible:!1,deleted:"",purged:""},{visible:!0}).done((function(){t.model.contents.includeHidden||t.renderItems()})):u.a.when()},deleteHidden:function(){return window.confirm(_()("Really delete all hidden datasets?"))?this.model.contents._filterAndUpdate({visible:!1,deleted:"",purged:""},{deleted:!0,visible:!0}):u.a.when()},toString:function(){return"CurrentHistoryView(".concat(this.model?this.model.get("name"):"",")")}});gr.prototype.templates=(mr=hr.a.wrapTemplate(['<div class="quota-message errormessage">',_()("You are over your disk quota"),". ",_()("Tool execution is on hold until your disk usage drops below your allocated quota"),".","</div>"],"history"),r.default.extend(r.default.clone(_r.prototype.templates),{quotaMsg:mr}));var vr={CurrentHistoryView:gr},yr=f.a.View.extend({initialize:function(t,e){var n=this,i=Object(o.a)(),a=[];this.userIsAnonymous=i.user.isAnonymous(),this.allow_user_dataset_purge=e.config.allow_user_dataset_purge,this.root=e.root,this.historyView=new vr.CurrentHistoryView({className:"".concat(vr.CurrentHistoryView.prototype.className," middle"),purgeAllowed:this.allow_user_dataset_purge,linkTarget:"galaxy_main"}),i.currHistoryPanel=this.historyView,i.currHistoryPanel.listenToGalaxy(i),this.buttonRefresh=new v.a.ButtonLink({id:"history-refresh-button",title:_()("Refresh history"),cls:"panel-header-button",icon:"fa fa-refresh",onclick:function(){n.historyView.loadCurrentHistory()}}),a.push(this.buttonRefresh),this.userIsAnonymous||(this.buttonNew=new v.a.ButtonLink({id:"history-new-button",title:_()("Create new history"),cls:"panel-header-button",icon:"fa fa-plus",onclick:function(){i.currHistoryPanel.createNewHistory()}}),a.push(this.buttonNew)),this.buttonViewMulti=new v.a.ButtonLink({id:"history-view-multi-button",title:_()("View all histories"),cls:"panel-header-button",icon:"fa fa-columns",href:"".concat(this.root,"history/view_multiple")}),a.push(this.buttonViewMulti),this.buttonOptions=new v.a.ButtonLink({id:"history-options-button",title:_()("History options"),cls:"panel-header-button",target:"galaxy_main",icon:"fa fa-cog",href:"".concat(this.root,"root/history_options")}),a.push(this.buttonOptions),this.model=new f.a.Model({cls:"history-right-panel",title:_()("History"),buttons:a}),this.setElement(this._template()),this.historyView.setElement(this.$el),this.historyView.connectToQuotaMeter(i.quotaMeter),this.historyView.loadCurrentHistory(),i.listenTo(this.historyView,"history-size-change",(function(){i.user.fetch({url:"".concat(i.user.urlRoot(),"/").concat(i.user.id||"current")})}))},render:function(){this.optionsMenu=dr(this.buttonOptions.$el,{anonymous:this.userIsAnonymous,purgeAllowed:this.allow_user_dataset_purge,root:this.root}),this.buttonViewMulti.$el[this.userIsAnonymous?"hide":"show"]()},_template:function(t){return['<div id="current-history-panel" class="history-panel middle"/>'].join("")},toString:function(){return"historyPanel"}}),br=n(480),wr=n(45),kr=n(763),xr=n(2130),Sr=n(206);function Mr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Cr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Tr=function(t){return function(t){return null!=t}(t)&&!isNaN(t)&&isFinite(t)},jr={props:{parent:{type:Object,required:!0},pageSize:{type:Number,default:Sr.a.pageSize},debouncePeriod:{type:Number,default:100},disableWatch:{type:Boolean,default:!1},disableLoad:{type:Boolean,default:!1},debug:{type:Boolean,default:!1}},computed:{busy:function(){return this.loading||this.scrolling}},data:function(){return{payload:{},params:new Sr.a,loading:!1,scrolling:!1}},watch:{params:function(t,e){Sr.a.equals(t,e)||this.resetScrollPos()}},created:function(){var t=this;this.initParams(),this.initScrollPos();var e=this.initStreams(),n=e.payload$,i=e.loading$,a=e.scrolling$;this.listenTo(a,(function(e){return t.scrolling=e})),this.listenTo(i,(function(e){return t.loading=e})),this.disableWatch||this.listenTo(n,{next:function(e){return t.setPayload(e)},error:function(t){return console.warn("error in cache$",t)},complete:function(){return console.warn("why did cache$ complete?")}})},methods:{initParams:function(){var t=this;this.params$=new kr.a(new Sr.a),this.listenTo(this.params$,(function(e){return t.params=e}))},initScrollPos:function(){this.scrollPos$=new kr.a({cursor:0,key:null})},resetScrollPos:function(){this.scrollPos$.next({cursor:0,key:null})},initStreams:function(){return console.warn("Override initStreams in ContentProvider"),{cache$:xr.a,loader$:xr.a,loading$:xr.a,scrolling$:xr.a}},setScrollPos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cursor,n=void 0===e?0:e,i=t.key,a=void 0===i?null:i;Tr(n)&&this.scrollPos$.next({cursor:n,key:a})},manualReload:function(){this.setScrollPos(this.scrollPos$.value)},updateParams:function(t){var e=t instanceof Sr.a?t.clone():new Sr.a(t);this.params$.next(e)},setPayload:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$set(this,"payload",t)}},render:function(){return this.$scopedSlots.default({payload:this.payload,loading:this.loading,scrolling:this.scrolling,busy:this.busy,params:this.params,pageSize:this.pageSize,handlers:{updateParams:this.updateParams,setScrollPos:this.setScrollPos,manualReload:this.manualReload}})}},Or=n(243),Lr=n(2151),Dr=n(2139),Ar=n(617),Er=n(2131),Ir=n(2140),Pr=n(251),Yr=n(2158),Rr=n(2145),Hr=n(616),Nr=n(212),$r=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(Dr.a)(e).pipe(Object(Hr.a)(0))},Fr=n(2156),Wr=n(2161),zr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=t.period,i=void 0===n?500:n,a=e.pipe(Object(Fr.a)(!0),Object(Er.a)()),r=a.pipe(Object(Wr.a)(i),Object(Fr.a)(!1));return Object(Lr.a)(a,r)}},Ur=n(2159),Vr=function(t){return Object(Ur.a)({bufferSize:t,refCount:!0})},Br=n(1041),qr=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(Br.a)(Object(Pr.a)((function(n){var i=n/t;return t*(e?Math.ceil(i):Math.floor(i))})))},Gr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(Pr.a)((function(e){return e[t]}))},Jr=n(747),Kr=n(764),Xr=n(2138),Qr=n(53),Zr=n(1054),to=n.n(Zr),eo=n(576),no=n(219);function io(t){return function(t){if(Array.isArray(t))return oo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ro(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ao(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||ro(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(t,e){if(t){if("string"==typeof t)return oo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oo(t,e):void 0}}function oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var so=function(t){return t.length?t[0][0]:void 0},lo=function(t,e){return Math.abs(+t-+e)},co=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.keyDirection,n=void 0===e?"asc":e,i=t.pageSize,a=void 0===i?50:i,r=t.getKey;if("asc"!=n&&"desc"!=n)throw new Error("buildContentResult: invalid sort direction: ".concat(n));return function(t){var e=ao(t,2),i=e[0],o=e[1];if(isNaN(o))throw console.warn("Target key should be numeric",i,o),new Error("buildContentResult: targetKey must be a numeric value",o);var s,l=i.findEntries(o),c=l.matchingValue,d=l.desc,u=l.asc,h=Object(eo.pipe)(Object(eo.filter)((function(t){return ao(t,1)[0]>o})),Object(eo.take)(a)),f=Object(eo.pipe)(Object(eo.filter)((function(t){return ao(t,1)[0]<o})),Object(eo.take)(a)),p=Array.from(h(u)),m=Array.from(f(d));if(void 0!==c)s=r(c);else{var _=so(p),g=so(m);s=uo(o,_,g)}var v=c?[[o,c]]:[],y=[].concat(io(p.reverse()),v,io(m)).map((function(t){var e=ao(t,2);e[0];return e[1]}));return{contents:"desc"==n?y:y.reverse(),startKey:s,targetKey:o}}},uo=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.filter((function(t){return void 0!==t})).reduce((function(e,n){return void 0!==e?lo(t,n)<lo(t,e)?n:e:n}),void 0)},ho=function(){return new to.a},fo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getKey,n=void 0===e?function(t){return t._id}:e;return function(t,e){var i=e.initialMatches,a=void 0===i?[]:i,r=e.action,o=e.doc;if(r==no.a.INITIAL&&a.length&&a.forEach((function(e){t.upsert(n(e),e)})),r&&o){var s=n(o);switch(r){case no.a.IGNORE:console.log("ignored update",o);break;case no.a.UPDATE:case no.a.ADD:t.upsert(s,o);break;case no.a.REMOVE:t.delete(s)}}return t}},po=function(t){return function(e){var n;if(t in e)n=e[t];else{var i=e._id.split("-");n=parseInt(i[1])}var a=parseInt(n);if(isNaN(a))throw console.warn("Non integer key for document",e),new Error("Key for update map should be an integer");return a}};function mo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var go=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=t.hid$,i=t.pageSize,a=void 0===i?Sr.a.pageSize:i,r=t.debouncePeriod,o=void 0===r?250:r,s=t.outputDebounce,l=void 0===s?o:s,c=t.keyField,d=void 0===c?"hid":c,u=t.keyDirection,h=void 0===u?"desc":u,f=t.monitorChunk,p=void 0===f?5*a:f,m=t.monitorPageSize,_=void 0===m?5*p:m,g=po(d),v=fo({getKey:g}),y=co({pageSize:a,keyDirection:h,getKey:g}),b=e.pipe(Object(Kr.a)((function(t){var e=mo(t,2),i=e[0].id,a=e[1];return n.pipe(qr(p,!0),Object(Ar.a)(),Object(Pr.a)((function(t){return[i,a,t]})),(function(t){return t})).pipe(Object(Kr.a)((function(t){return Object(Jr.a)(t).pipe(Object(Qr.h)({pageSize:_}))})),Object(Xr.a)(v,ho()))})));return Object(Dr.a)([b,n]).pipe(Object(Hr.a)(l),Object(Pr.a)(y),(function(t){return t}))}},vo=n(1044),yo=n(2153),bo=n(2157),wo=n(749),ko=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.initialInterval,n=t.maxInterval,i=void 0===n?6e4:n,a=t.lambda,r=void 0===a?.25:a;if(void 0===e)throw new Error("provide an initialInterval to decay");var o=0;return Object(Br.a)(Object(wo.a)((function(t){var n=Math.floor(e*Math.exp(r*o++));return n=Math.max(n,e),n=Math.min(n,i),Object(Jr.a)(t).pipe(Object(Wr.a)(n))})))};function xo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return So(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return So(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function So(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Mo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.windowSize,n=t.initialInterval,i=void 0===n?3e3:n,a=t.maxInterval,r=void 0===a?10*i:a,o=t.disablePoll,s=void 0!==o&&o;return Object(Br.a)(Object(Kr.a)((function(t){var n=xo(t,3),a=n[0].id,o=n[1],l=n[2],c=Object(vo.a)((function(){return Object(Jr.a)([a,o,l]).pipe(Object(Nr.a)("ajaxLoadInputs"),Object(Qr.e)({windowSize:e}))})),d=c.pipe(ko({initialInterval:i,maxInterval:r}),Object(yo.a)());return s?c:d})),Object(bo.a)((function(t){throw console.warn("Error in loadContents",t),t})))};function Co(t){return function(t){if(Array.isArray(t))return Oo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||jo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||jo(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(t,e){if(t){if("string"==typeof t)return Oo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oo(t,e):void 0}}function Oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Lo=function(t,e){var n=To(t,2),i=n[0],a=n[1],r=To(e,2),o=r[0];return a==r[1]&&function(t,e){var n=Mr(t,2),i=n[0],a=n[1],r=Mr(e,2),o=r[0],s=r[1];return i==o&&Sr.a.equals(a,s)}(i,o)};function Do(t,e){var n=e.disablePoll,i=e.debouncePeriod,a=e.pageSize,r=t.params$,o=t.history$,s=t.scrollPos$,l=o.pipe(Object(Ar.a)((function(t,e){return t.id==e.id}))),c=r.pipe(Object(Ar.a)(wr.h.equals)),d=$r(l,c).pipe(Object(Er.a)()),u=s.pipe(zr()),h=new Or.a,f=l.pipe(Object(Ir.a)("hidItems")),p=Object(Lr.a)(f,h).pipe(Object(Ar.a)()),m=new Or.a,_=new Or.a,g=d.pipe(Gr(0)),v=g.pipe(Object(Pr.a)(Io)),y=g.pipe(Object(Pr.a)(Eo)),b=Object(Lr.a)(v,m).pipe(Vr(1)),w=Object(Lr.a)(y,_).pipe(Vr(1)),k=$r(s,b).pipe(Object(Pr.a)((function(t){var e=To(t,2),n=e[0],i=e[1];return n.key?n.key:function(t,e){var n=t.cursor,i=t.key,a=e,r=a.get(n,{interpolate:!0});if(Tr(r))return r;if(a.hasData)return console.log("invalid curve fit",r,n,i,a.domain),a.get(0);return}(n,i)})),Object(Pr.a)((function(t){return parseInt(t)})),Object(Ar.a)(),Object(Nr.a)("hid"),Vr(1)),x=k.pipe(qr(a,!0)),S=$r(d,x).pipe(Object(Ar.a)(Lo),Object(Pr.a)((function(t){var e=To(t,2),n=e[0],i=e[1];return[].concat(Co(n),[i])})),Vr(1)),M=S.pipe(Mo({disablePoll:n,windowSize:2*a})).pipe(Object(Yr.a)(b,w),Object(Rr.a)((function(t){var e=To(t,3),n=e[0],i=e[1],a=e[2];!function(t,e){var n=t.maxHid,i=t.minHid,a=t.maxContentHid,r=t.minContentHid,o=t.matches,s=t.totalMatchesUp,l=t.totalMatches;e.set(0,n),e.set(1,i),l>0&&(e.set(s/l,a),e.set((o+s)/l,r))}(n,i),function(t,e){var n=t.minContentHid,i=t.maxContentHid,a=t.minHid,r=t.maxHid,o=t.matchesUp,s=t.matchesDown,l=t.matches,c=t.totalMatchesUp,d=t.totalMatches;l>0&&(e.set(i,c-o),e.set(n,Math.max(0,c+s-1)));e.set(r,0),d>0&&e.set(a,d-1);e.domain=[a,r]}(n,a),h.next(n.totalMatches)}))),C=Object(Lr.a)(S,M).pipe(zr()),T=d.pipe(go({hid$:k,pageSize:a,debouncePeriod:i}));return{payload$:Object(Dr.a)(T,w,p).pipe(Object(Hr.a)(i),Object(Pr.a)((function(t){return Ao.apply(void 0,Co(t).concat([a]))}))),scrolling$:u,loading$:C}}function Ao(t,e,n,i){var a=t.contents,r=void 0===a?[]:a,o=t.startKey,s=void 0===o?null:o,l=t.targetKey,c=e,d=0,u=Math.max(0,n-r.length);if(c.size&&r.length&&n>i){var h=r[0].hid,f=c.get(h,{interpolate:!0});d=Math.max(0,Math.round(f)),u=Math.max(0,n-d-r.length)}return{contents:r,startKey:s,targetKey:l,topRows:d,bottomRows:u,totalMatches:n}}function Eo(t){var e=new wr.b;return e.domain=[0,+t.hidItems],e.xPrecision=3,e.yPrecision=3,e.set(t.hidItems,0),e.set(0,t.hidItems),e}function Io(t){var e=new wr.b;return e.domain=[0,1],e.xPrecision=3,e.yPrecision=2,e.set(0,t.hidItems),e.set(1,1),e}var Po={mixins:[jr],props:{disablePoll:{type:Boolean,default:!1}},computed:{history:function(){return this.parent}},watch:{history:function(t,e){t.id!=e.id&&this.resetScrollPos()}},methods:{initStreams:function(){var t=this.disablePoll,e=this.debouncePeriod,n=this.pageSize,i=this.params$,a=this.scrollPos$;return Do({params$:i,history$:this.watch$("history"),scrollPos$:a},{disablePoll:t,debouncePeriod:e,pageSize:n})}}};function Yo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ro(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ro(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ho=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=t.cursor$,i=t.pageSize,a=void 0===i?wr.h.pageSize:i,r=t.monitorChunk,o=void 0===r?5*a:r,s=t.monitorPageSize,l=void 0===s?5*o:s,c=t.inputDebounce,d=void 0===c?250:c,u=t.keyField,h=void 0===u?"element_index":u,f=t.keyDirection,p=void 0===f?"asc":f,m=po(h),_=fo({getKey:m}),g=co({pageSize:a,keyDirection:p,getKey:m}),v=e.pipe(Object(Kr.a)((function(t){var e=Yo(t,2),i=e[0].contents_url,a=e[1];return n.pipe(qr(o,!0),Object(Ar.a)()).pipe(Object(Pr.a)((function(t){return[i,a,t]})),Object(Nr.a)("monitorInputs")).pipe(Object(Pr.a)(No(l)),Object(Nr.a)("request")).pipe(Object(Qr.g)({inputDebounce:d}),Object(Nr.a)("monitorOutput")).pipe(Object(Xr.a)(_,ho()))})));return Object(Dr.a)([v,n]).pipe(Object(Pr.a)(g),Object(Nr.a)("contentWindow")).pipe(Object(bo.a)((function(t){throw console.warn("Error in watchHistoryContents",t),t})))}},No=function(t){return function(e){var n=Yo(e,3),i=n[0],a=(n[1],n[2]),r=Math.max(0,a-t);return{selector:{_id:{$gte:"".concat(i,"-").concat(r)},parent_url:{$eq:i}},sort:[{_id:"asc"}],limit:t,index:{fields:["_id"],sort:[{_id:"asc"}],name:"collection contents by parent_url and element_index ascending",ddoc:"idx-dsc-contents-by-url-and-element-asc"}}}};function $o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Fo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Wo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.windowSize,n=void 0===e?100:e;return Object(Kr.a)((function(t){var e=$o(t,3),i=e[0],a=e[1],r=e[2],o=i.contents_url;return Object(Jr.a)([o,a,r]).pipe(Object(Nr.a)("ajaxLoadInputs"),Object(Qr.d)({windowSize:n}))}))};function zo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Uo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zo(Object(n),!0).forEach((function(e){Vo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bo(t){return function(t){if(Array.isArray(t))return Jo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Go(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||Go(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Go(t,e){if(t){if("string"==typeof t)return Jo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jo(t,e):void 0}}function Jo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ko(t,e){var n=e.debouncePeriod,i=e.pageSize,a=t.dsc$,r=t.params$,o=t.scrollPos$,s=a.pipe(Object(Ar.a)(wr.d.equals)),l=r.pipe(Object(Ar.a)(wr.h.equals)),c=$r(s,l).pipe(Object(Nr.a)("inputs"),Object(Er.a)()),d=o.pipe(zr()),u=s.pipe(Object(Ir.a)("totalElements")),h=$r(o,u).pipe(Object(Pr.a)((function(t){var e=qo(t,2);return function(t,e){var n=t.cursor,i=void 0===n?null:n,a=t.key,r=void 0===a?null:a;if(null!==r)return r;if(null!==i)return Math.round(Number(i)*e);return 0}(e[0],e[1])})),Object(Ar.a)(),Object(Nr.a)("cursor"),Vr(1)),f=h.pipe(qr(i)),p=$r(c,f).pipe(Object(Ar.a)(Lo),Object(Pr.a)((function(t){var e=qo(t,2),n=e[0],i=e[1];return[].concat(Bo(n),[i])})),Object(Nr.a)("loadInputs"),Vr(1)),m=p.pipe(Wo({windowSize:2*i}),Object(Nr.a)("loadResult")),_=Object(Lr.a)(p,m).pipe(zr()),g=c.pipe(Ho({cursor$:h,pageSize:i,debouncePeriod:n}),Object(Nr.a)("cacheFromMonitor"));return{payload$:Object(Dr.a)(g,u).pipe(Object(Hr.a)(n),Object(Pr.a)((function(t){return Xo.apply(void 0,Bo(t))})),Object(Nr.a)("payload")),scrolling$:d,loading$:_}}function Xo(t,e){var n=t.contents,i=n.length?n[0].element_index:0,a=Math.max(0,e-n.length-i);return Uo(Uo({},t),{},{topRows:i,bottomRows:a,totalMatches:e})}var Qo={mixins:[jr],computed:{dsc:function(){return this.parent instanceof wr.d?this.parent:new wr.d(this.parent)}},watch:{dsc:function(t,e){t.id!=e.id&&this.resetScrollPos()}},methods:{initStreams:function(){var t=this.debouncePeriod,e=this.pageSize,n=this.params$,i=this.scrollPos$;return Ko({params$:n,dsc$:this.watch$("dsc",!0),scrollPos$:i},{debouncePeriod:t,pageSize:e})}}},Zo=n(216),ts=n(241),es=n.n(ts);function ns(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return is(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return is(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function is(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var as={props:{collection:{type:Object,required:!0,validator:function(t){return"_id"in t}},isRoot:{type:Boolean,required:!0}},data:function(){return{raw:this.collection}},computed:{dsc:function(){return new Zo.a(this.raw)}},watch:{collection:function(t,e){t&&!es()(t,e)&&(this.raw=t)},dsc:function(t,e){t&&!es()(t,e)&&this.$emit("update:collection",t)}},created:function(){var t=this,e=this.watch$("isRoot",!0).pipe(Object(Ar.a)()),n=this.watch$("collection",!0).pipe(Object(Ir.a)("_id"),Object(Ar.a)()),i=$r(n,e).pipe(Object(Kr.a)((function(t){var e=ns(t,2),n=e[0],i=e[1]?Qr.f:Qr.g,a={selector:{_id:n},offset:0,limit:1};return Object(Jr.a)(a).pipe(i(),Object(Pr.a)((function(t){var e=t.initialMatches,n=void 0===e?[]:e,i=t.doc,a=void 0===i?null:i;if(t.deleted)return null;var r=a;return 1==n.length&&(r=n[0]),r})))})));this.$subscribeTo(i,(function(e){t.raw=e}))},render:function(){return this.$scopedSlots.default({dsc:this.dsc})}},rs=n(231),os={props:{scopeKey:{type:String,required:!0},getItemKey:{type:Function,required:!0}},data:function(){return{items:new Set}},methods:{isExpanded:function(t){var e=this.getItemKey(t);return this.items.has(e)},setExpanded:function(t,e){var n=this.getItemKey(t),i=new Set(this.items);e?i.add(n):i.delete(n),this.items=i},reset:function(){this.items=new Set}},watch:{scopeKey:function(t,e){t!==e&&this.reset()}},render:function(){return this.$scopedSlots.default({isExpanded:this.isExpanded,setExpanded:this.setExpanded})}};function ss(t){return function(t){if(Array.isArray(t))return ls(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ls(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ls(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ls(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var cs={props:{scopeKey:{type:String,required:!0},getItemKey:{type:Function,required:!0}},data:function(){return{items:new Map,showSelection:!1}},computed:{selectionSize:function(){return this.items.size}},methods:{setShowSelection:function(t){this.showSelection=t},isSelected:function(t){var e=this.getItemKey(t);return this.items.has(e)},setSelected:function(t,e){var n=this.getItemKey(t),i=new Map(this.items);e?i.set(n,t):i.delete(n),this.items=i},selectItems:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[].concat(ss(this.items.values()),ss(e)),i=n.map((function(e){return[t.getItemKey(e),e]}));this.items=new Map(i)},reset:function(){this.items=new Map}},watch:{scopeKey:function(t,e){t!==e&&this.reset()},selectionSize:function(t){t>0&&(this.showSelection=!0)},showSelection:function(t){t||this.reset()}},render:function(){return this.$scopedSlots.default({selectedItems:this.items,showSelection:this.showSelection,setShowSelection:this.setShowSelection,selectItems:this.selectItems,isSelected:this.isSelected,setSelected:this.setSelected,resetSelection:this.reset})}},ds=(n(2045),Object(T.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"history d-flex flex-column"},[n("header",{staticClass:"p-2"},[t.$slots.nav?n("nav",{staticClass:"top-nav pb-2"},[t._t("nav")],2):t._e(),t._v(" "),t._t("details")],2),t._v(" "),t.$slots.messages?n("section",[t._t("messages")],2):t._e(),t._v(" "),t.$slots.listcontrols?n("section",{staticClass:"p-2"},[t._t("listcontrols")],2):t._e(),t._v(" "),n("section",{staticClass:"scroller flex-grow-1"},[t._t("listing")],2),t._v(" "),t.$slots.modals?n("section",[t._t("modals")],2):t._e()])}),[],!1,null,null,null).exports),us={props:{history:{type:wr.e,required:!0}},computed:{hasMessages:function(){return this.userOverQuota||history.isDeleted}},data:function(){return{userOverQuota:!1}}},hs=Object(T.a)(us,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasMessages?n("div",[n("b-alert",{attrs:{show:t.history.isDeleted,variant:"warning"}},[t._v("\n        "+t._s(t._f("localize")("This history has been deleted"))+"\n    ")]),t._v(" "),n("b-alert",{attrs:{show:t.userOverQuota,variant:"warning"}},[t._v("\n        "+t._s(t._f("localize")("You are over your disk quota. Tool execution is on hold until your disk usage drops below your allocated quota."))+"\n    ")])],1):t._e()}),[],!1,null,null,null).exports,fs=n(208),ps=n(240),ms=n(271),_s=n(569),gs=n(43),vs=n(92),ys=n(128),bs=n(61);function ws(t){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ks(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function xs(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){ks(r,i,a,o,s,"next",t)}function s(t){ks(r,i,a,o,s,"throw",t)}o(void 0)}))}}function Ss(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ms(t,e){return(Ms=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=js(t);if(e){var a=js(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Ts(this,n)}}function Ts(t,e){return!e||"object"!==ws(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function js(t){return(js=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Os=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ms(t,e)}(l,t);var e,n,i,a,r,o,s=Cs(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this,{id:t.id,itemClass:"History",context:"history-panel"})).history=t,e}return e=l,(n=[{key:"save",value:(o=xs(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(bs.a)(e),(i=new Set(this.history.tags)).add(n.text),t.next=5,this.saveHistoryTags(i);case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"delete",value:(r=xs(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(bs.a)(e),(i=new Set(this.history.tags)).delete(n.text),t.next=5,this.saveHistoryTags(i);case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"saveHistoryTags",value:(a=xs(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(e),t.next=3,Object(gs.p)(this.history.id,{tags:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})}])&&Ss(e.prototype,n),i&&Ss(e,i),l}(ys.a),Ls={components:{Tags:vs.b},props:{history:{type:wr.e,required:!0}},computed:{storeKey:function(){return"History-".concat(this.history.id)},historyTagService:function(){return new Os(this.history)}}},Ds=Object(T.a)(Ls,(function(){var t=this.$createElement;return(this._self._c||t)("Tags",{attrs:{tags:this.history.tags,"store-key":this.storeKey,"tag-service":this.historyTagService}})}),[],!1,null,null,null).exports,As=n(152);function Es(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Is(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ps(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Is(Object(n),!0).forEach((function(e){Ys(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Is(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ys(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rs={props:{history:{type:As.a,required:!0},value:{type:Boolean,required:!1,default:!1}},data:function(){return{name:"",copyAll:!1,loading:!1}},computed:Ps(Ps({},Object(nt.c)("user",["currentUser"])),{},{title:function(){return"Copying History: ".concat(this.history.name)},saveTitle:function(){return this.loading?"Saving...":"Copy History"},saveVariant:function(){return this.loading?"info":this.formValid?"primary":"secondary"},newNameValid:function(){return this.name==this.history.name?null:this.name.length>0},formValid:function(){return this.newNameValid},showModal:{get:function(){return this.value},set:function(t,e){t!==e&&this.$emit("input",t)}}}),methods:Ps(Ps({},Object(nt.b)("betaHistory",["copyHistory"])),{},{copy:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var i,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,i=n.history,a=n.name,r=n.copyAll,e.next=4,n.copyHistory({history:i,name:a,copyAll:r});case 4:n.loading=!1,t();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(t){Es(r,i,a,o,s,"next",t)}function s(t){Es(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}),watch:{history:{handler:function(t){this.name="Copy of '".concat(t.name,"'")},immediate:!0}}},Hs=(n(2046),Object(T.a)(Rs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"copyModal",attrs:{title:t.title,"title-tag":"h2"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.ok,a=e.cancel;return n("div",{},[n("div",[n("b-button",{staticClass:"mr-3",on:{click:function(t){return a()}}},[t._v(" Cancel ")]),t._v(" "),n("b-button",{attrs:{variant:t.saveVariant,disabled:!t.formValid},on:{click:function(e){return t.copy(i)}}},[t._v("\n                "+t._s(t._f("localize")(t.saveTitle))+"\n            ")])],1)])}}]),model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("transition",{attrs:{name:"fade"}},[n("b-alert",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{show:t.currentUser.isAnonymous,variant:"warning"}},[t._v("\n            As an anonymous user, unless you login or register, you will lose your current history after copying\n            this history. You can "),n("a",{attrs:{href:"/user/login"}},[t._v("login here")]),t._v(" or "),n("a",{attrs:{href:"/user/create"}},[t._v("register here")]),t._v(".\n        ")])],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.loading?n("div",{staticClass:"d-flex justify-content-center mb-3"},[n("b-spinner",{attrs:{label:"Copying History..."}})],1):t._e()]),t._v(" "),n("transition",[t.loading?t._e():n("b-form",[n("b-form-group",{attrs:{label:"Enter a title for the new history","label-for":"copy-modal-title"}},[n("b-input",{attrs:{id:"copy-modal-title",state:t.newNameValid,required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("b-form-invalid-feedback",{attrs:{state:t.newNameValid}},[t._v("\n                    Please enter a valid history title.\n                ")])],1),t._v(" "),n("b-form-group",{attrs:{label:"Choose which datasets from the original history to include."}},[n("b-form-radio",{attrs:{value:!1},model:{value:t.copyAll,callback:function(e){t.copyAll=e},expression:"copyAll"}},[t._v("\n                    Copy only the active, non-deleted datasets.\n                ")]),t._v(" "),n("b-form-radio",{attrs:{value:!0},model:{value:t.copyAll,callback:function(e){t.copyAll=e},expression:"copyAll"}},[t._v("\n                    Copy all datasets including deleted ones.\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports);function Ns(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ns(Object(n),!0).forEach((function(e){Fs(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ns(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ws(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function zs(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Ws(r,i,a,o,s,"next",t)}function s(t){Ws(r,i,a,o,s,"throw",t)}o(void 0)}))}}var Us={mixins:[ps.a],components:{PriorityMenu:fs.a,PriorityMenuItem:fs.b,HistoryTags:Ds,Annotation:_s.a,ClickToEdit:ms.a,CopyHistoryModal:Hs},props:{history:{type:wr.e,required:!0}},data:function(){return{showTags:!1,showAnnotation:!1,showCopyModal:!1,showPrivacyModal:!1,showDeleteModal:!1,showPurgeModal:!1}},computed:{annotation:{get:function(){return this.history.annotation||""},set:function(t){t.length&&t!==this.history.annotation&&this.updateFields({annotation:t})}},historyName:{get:function(){var t;return(null===(t=this.history)||void 0===t?void 0:t.name)||""},set:function(t){t.length&&t!==this.history.name&&this.updateFields({name:t})}}},methods:{updateFields:function(){var t=arguments,e=this;return zs(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:{},e.$emit("updateHistory",$s({id:e.history.id},i));case 2:case"end":return n.stop()}}),n)})))()},deleteHistory:function(t){var e=this;return zs(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("deleteHistory",e.history),t.vueTarget.hide();case 2:case"end":return n.stop()}}),n)})))()},purgeHistory:function(t){var e=this;return zs(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("purgeHistory",e.history),t.vueTarget.hide();case 2:case"end":return n.stop()}}),n)})))()},makePrivate:function(t){var e=this;return zs(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("secureHistory",e.history),t.vueTarget.hide();case 2:case"end":return n.stop()}}),n)})))()}}},Vs=(n(2047),Object(T.a)(Us,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("h6",{staticClass:"text-nowrap text-truncate mr-auto"},[n("span",{staticClass:"size"},[t._v(t._s(t._f("localize")(t.history.niceSize)))])]),t._v(" "),n("PriorityMenu",{staticStyle:{"max-width":"50%"},attrs:{"starting-height":28}},[n("PriorityMenuItem",{key:"edit-history-tags",attrs:{title:"Edit History Tags",icon:"fas fa-tags",pressed:t.showTags},on:{click:function(e){t.showTags=!t.showTags}}}),t._v(" "),n("PriorityMenuItem",{key:"edit-history-annotation",attrs:{title:"Edit Annotation",icon:"fas fa-comment",pressed:t.showAnnotation},on:{click:function(e){t.showAnnotation=!t.showAnnotation}}}),t._v(" "),n("PriorityMenuItem",{key:"copy-history",attrs:{title:"Copy History",icon:"fas fa-copy"},on:{click:function(e){t.showCopyModal=!t.showCopyModal}}}),t._v(" "),n("PriorityMenuItem",{key:"share",attrs:{title:"Share or Publish",icon:"fas fa-handshake"},on:{click:function(e){return t.backboneRoute("/histories/sharing",{id:t.history.id})}}}),t._v(" "),n("PriorityMenuItem",{key:"delete-this-history",attrs:{title:"Delete this History",icon:"fas fa-trash"},on:{click:function(e){t.showDeleteModal=!t.showDeleteModal}}}),t._v(" "),n("PriorityMenuItem",{key:"purge-this-history",attrs:{title:"Purge this History",icon:"fas fa-burn"},on:{click:function(e){t.showPurgeModal=!t.showPurgeModal}}}),t._v(" "),n("PriorityMenuItem",{key:"structure",attrs:{title:"Show Structure",icon:"fas fa-code-branch"},on:{click:function(e){return t.backboneRoute("/histories/show_structure")}}}),t._v(" "),n("PriorityMenuItem",{key:"extract-workflow",attrs:{title:"Extract Workflow",icon:"fas fa-file-export"},on:{click:function(e){return t.iframeRedirect("/workflow/build_from_current_history")}}}),t._v(" "),n("PriorityMenuItem",{key:"set-permissions",attrs:{title:"Set Permissions",icon:"fas fa-user-lock"},on:{click:function(e){return t.backboneRoute("/histories/permissions",{id:t.history.id})}}}),t._v(" "),n("PriorityMenuItem",{key:"make-private",attrs:{title:"Make Private",icon:"fas fa-lock"},on:{click:function(e){t.showPrivacyModal=!t.showPrivacyModal}}}),t._v(" "),n("PriorityMenuItem",{key:"resume-paused-jobs",attrs:{title:"Resume Paused Jobs",icon:"fas fa-play"},on:{click:function(e){return t.iframeRedirect("/history/resume_paused_jobs?current=True")}}}),t._v(" "),n("PriorityMenuItem",{key:"export-citations",attrs:{title:"Export Tool Citations",icon:"fas fa-stream"},on:{click:function(e){return t.backboneRoute("/histories/citations",{id:t.history.id})}}}),t._v(" "),n("PriorityMenuItem",{key:"export-history-to-file",attrs:{title:"Export History to File",icon:"fas fa-file-archive"},on:{click:function(e){return t.iframeRedirect("/history/export_archive?preview=True")}}})],1)],1),t._v(" "),n("ClickToEdit",{staticClass:"history-title mt-2",attrs:{"tag-name":"h3","tooltip-title":t._f("localize")("Rename history..."),"tooltip-placement":"top"},model:{value:t.historyName,callback:function(e){t.historyName=e},expression:"historyName"}}),t._v(" "),n("transition",{attrs:{name:"shutterfade"}},[t.showAnnotation?n("Annotation",{staticClass:"history-annotation mt-2",model:{value:t.annotation,callback:function(e){t.annotation=e},expression:"annotation"}}):t._e()],1),t._v(" "),n("transition",{attrs:{name:"shutterfade"}},[t.showTags?n("HistoryTags",{staticClass:"mt-2",attrs:{history:t.history}}):t._e()],1),t._v(" "),n("CopyHistoryModal",{attrs:{history:t.history},model:{value:t.showCopyModal,callback:function(e){t.showCopyModal=e},expression:"showCopyModal"}}),t._v(" "),n("b-modal",{attrs:{title:"Make History Private","title-tag":"h2"},on:{ok:t.makePrivate},model:{value:t.showPrivacyModal,callback:function(e){t.showPrivacyModal=e},expression:"showPrivacyModal"}},[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("\n            This will make all the data in this history private (excluding library datasets), and will set\n            permissions such that all new data is created as private. Any datasets within that are currently shared\n            will need to be re-shared or published. Are you sure you want to do this?\n        ")])]),t._v(" "),n("b-modal",{attrs:{title:"Delete History?","title-tag":"h2"},on:{ok:t.deleteHistory},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("Really delete the current history?")])]),t._v(" "),n("b-modal",{attrs:{title:"Permanently Delete History?","title-tag":"h2"},on:{ok:t.purgeHistory},model:{value:t.showPurgeModal,callback:function(e){t.showPurgeModal=e},expression:"showPurgeModal"}},[n("p",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("Really delete the current history permanently? This cannot be undone.")])])],1)}),[],!1,null,null,null).exports),Bs={methods:{openUploader:function(){this.eventHub.$emit("upload:open")},clickDataLink:function(){this.eventHub.$emit("openToolSection","getext")}}},qs=Object(T.a)(Bs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-alert",{attrs:{show:""}},[n("h4",[n("i",{staticClass:"fa fa-info-circle"}),t._v(" "),n("span",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("This history is empty.")])]),t._v(" "),n("p",[n("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openUploader(e)}}},[t._v("You can load your own data")]),t._v(" or\n        "),n("a",{directives:[{name:"localize",rawName:"v-localize"}],attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.clickDataLink(e)}}},[t._v("get data from an external source")]),t._v(".\n    ")])])}),[],!1,null,null,null).exports,Gs={components:{DebouncedInput:n(424).a},props:{params:{type:Sr.a,required:!0}},computed:{skip:{get:function(){return this.params.skip},set:function(t){var e=this.params.clone();e.skip=t,this.updateParams(e)}},filterText:{get:function(){return this.params.filterText},set:function(t){var e=this.params.clone();e.filterText=t,this.updateParams(e)}},showDeleted:{get:function(){return this.params.showDeleted},set:function(t){var e=this.params.clone();e.showDeleted=t,this.updateParams(e)}},showHidden:{get:function(){return this.params.showHidden},set:function(t){var e=this.params.clone();e.showHidden=t,this.updateParams(e)}}},methods:{updateParams:function(t){this.$emit("update:params",t)}}},Js=Object(T.a)(Gs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.params?n("b-input-group",[n("DebouncedInput",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.value,a=e.input;return[n("b-form-input",{attrs:{size:"sm",value:i,placeholder:t._f("localize")("Search Filter")},on:{input:a}})]}}],null,!1,2881419369),model:{value:t.filterText,callback:function(e){t.filterText="string"==typeof e?e.trim():e},expression:"filterText"}}),t._v(" "),n("b-input-group-append",[n("b-button",{attrs:{size:"sm",pressed:t.showDeleted,variant:t.showDeleted?"info":"secondary"},on:{click:function(e){t.showDeleted=!t.showDeleted}}},[t._v("\n            "+t._s(t._f("localize")("Deleted"))+"\n        ")]),t._v(" "),n("b-button",{attrs:{size:"sm",pressed:t.showHidden,variant:t.showHidden?"info":"secondary"},on:{click:function(e){t.showHidden=!t.showHidden}}},[t._v("\n            "+t._s(t._f("localize")("Hidden"))+"\n        ")])],1)],1):t._e()}),[],!1,null,null,null).exports;function Ks(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Xs(t,e,n){return Qs.apply(this,arguments)}function Qs(){var t;return t=regeneratorRuntime.mark((function t(e,n,i){var a,r,o,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=s.length>3&&void 0!==s[3]&&s[3],"list"!=e){t.next=5;break}r=me.a.createListCollection,t.next=18;break;case 5:if("paired"!=e){t.next=9;break}r=ge.a.createPairCollection,t.next=18;break;case 9:if("list:paired"!=e){t.next=13;break}r=ve.a.createPairedListCollection,t.next=18;break;case 13:if(!e.startsWith("rules")){t.next=17;break}r=ye.a.createCollectionViaRules,t.next=18;break;case 17:throw new Error("Unknown collectionType encountered ".concat(e));case 18:return o=Zs(n,i),t.next=21,r(o,a);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t)})),(Qs=function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Ks(r,i,a,o,s,"next",t)}function s(t){Ks(r,i,a,o,s,"throw",t)}o(void 0)}))}).apply(this,arguments)}var Zs=function(t,e){var n=Array.from(e.values());return{historyId:t,toJSON:function(){return n},createHDCA:function(t,e,n,i,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=u.a.Deferred();return o.resolve(null,{collection_type:e,name:n,copy_elements:a,hide_source_items:i,element_identifiers:t,options:r})}}};function tl(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function el(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){tl(r,i,a,o,s,"next",t)}function s(t){tl(r,i,a,o,s,"throw",t)}o(void 0)}))}}var nl={mixins:[ps.a],components:{ContentFilters:Js,PriorityMenu:fs.a,PriorityMenuItem:fs.b},props:{history:{type:As.a,required:!0},params:{type:Sr.a,required:!0},contentSelection:{type:Map,required:!0},showSelection:{type:Boolean,required:!0},totalMatches:{type:Number,required:!0}},data:function(){return{showFilter:!1}},computed:{showContentFilters:function(){var t=this.params,e=t.showHidden,n=t.showDeleted,i=t.filterText;return this.showFilter||e||n||i},localParams:{get:function(){return this.params},set:function(t){this.$emit("update:params",t.clone())}},hasSelection:function(){return this.contentSelection.size>0},countHidden:function(){return this.history.contents_active.hidden}},methods:{unhideAll:function(t){var e=this;return el(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(wr.o)(e.history);case 2:e.$emit("manualReload"),t.vueTarget.hide();case 4:case"end":return n.stop()}}),n)})))()},deleteAllHidden:function(t){var e=this;return el(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(wr.i)(e.history);case 2:e.$emit("manualReload"),t.vueTarget.hide();case 4:case"end":return n.stop()}}),n)})))()},purgeAllDeleted:function(t){var e=this;return el(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(wr.l)(e.history);case 2:e.$emit("manualReload"),t.vueTarget.hide();case 4:case"end":return n.stop()}}),n)})))()},hideSelected:function(){this.runOnSelection(wr.k)},unhideSelected:function(){this.runOnSelection(wr.p)},deleteSelected:function(){this.runOnSelection(wr.j)},undeleteSelected:function(){this.runOnSelection(wr.n)},purgeSelected:function(){this.runOnSelection(wr.m)},runOnSelection:function(t){var e=this;return el(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Array.from(e.contentSelection.values()),a=i.map((function(t){return t.type_id})),n.next=4,t(e.history,a);case 4:e.$emit("resetSelection"),e.$emit("manualReload");case 6:case"end":return n.stop()}}),n)})))()},buildDatasetList:function(){var t=this;return el(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buildNewCollection("list");case 2:case"end":return e.stop()}}),e)})))()},buildDatasetPair:function(){var t=this;return el(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buildNewCollection("paired");case 2:case"end":return e.stop()}}),e)})))()},buildListOfPairs:function(){var t=this;return el(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buildNewCollection("list:paired");case 2:case"end":return e.stop()}}),e)})))()},buildCollectionFromRules:function(){var t=this;return el(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buildNewCollection("rules");case 2:case"end":return e.stop()}}),e)})))()},buildNewCollection:function(t){var e=this;return el(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xs(t,e.history.id,e.contentSelection);case 2:return i=n.sent,n.next=5,Object(gs.c)(e.history,i);case 5:return a=n.sent,n.next=8,Object(Qr.b)(a);case 8:e.$emit("manualReload");case 9:case"end":return n.stop()}}),n)})))()}},watch:{hasSelection:function(t){t&&this.$emit("update:showSelection",!0)}}},il=Object(T.a)(nl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("header",{staticClass:"d-flex align-items-center justify-content-between"},[n("h6",{staticClass:"text-nowrap mr-3"},[n("span",{directives:[{name:"localize",rawName:"v-localize"}]},[t._v("Matches")]),t._v(" "),n("a",{attrs:{href:"#"},on:{click:function(e){t.showFilter=!t.showFilter}}},[n("span",[t._v(t._s(t.totalMatches))])])]),t._v(" "),n("PriorityMenu",{staticStyle:{"max-width":"50%"},attrs:{"starting-height":27}},[n("PriorityMenuItem",{key:"filter",attrs:{title:"Filter History Content",icon:"fa fa-filter",pressed:t.showFilter},on:{click:function(e){t.showFilter=!t.showFilter}}}),t._v(" "),n("PriorityMenuItem",{key:"selection",attrs:{title:"Operations on multiple datasets",icon:"fas fa-check-square",pressed:t.showSelection},on:{click:function(e){return t.$emit("update:show-selection",!t.showSelection)}}}),t._v(" "),n("PriorityMenuItem",{key:"copy-datasets",attrs:{title:"Copy Datasets",icon:"fas fa-copy"},on:{click:function(e){return t.iframeRedirect("/dataset/copy_datasets")}}}),t._v(" "),n("PriorityMenuItem",{key:"collapse-expanded",attrs:{title:"Collapse Expanded Datasets",icon:"fas fa-compress-alt"},on:{click:function(e){return t.emit("collapseAllContent")}}}),t._v(" "),n("PriorityMenuItem",{key:"show-hidden-datasets",attrs:{title:"Unhide All Hidden Datasets",icon:"fas fa-eye"},on:{click:function(e){return t.$bvModal.show("show-hidden-content")}}}),t._v(" "),n("PriorityMenuItem",{key:"delete-hidden",attrs:{title:"Delete Hidden Datasets",icon:"fas fa-trash"},on:{click:function(e){return t.$bvModal.show("delete-hidden-content")}}}),t._v(" "),n("PriorityMenuItem",{key:"purge-hidden",attrs:{title:"Purge Hidden Datasets",icon:"fas fa-burn"},on:{click:function(e){return t.$bvModal.show("purge-deleted-content")}}})],1)],1),t._v(" "),n("transition",{attrs:{name:"shutterfade"}},[t.showContentFilters?n("content-filters",{staticClass:"content-filters mt-1",attrs:{params:t.localParams},on:{"update:params":function(e){t.localParams=e}}}):t._e()],1),t._v(" "),n("transition",{attrs:{name:"shutterfade"}},[t.showSelection?n("b-button-toolbar",{staticClass:"content-selection justify-content-between mt-1"},[n("b-button-group",[n("b-button",{attrs:{size:"sm"},on:{click:function(e){return t.$emit("selectAllContent")}}},[t._v("\n                    "+t._s(t._f("localize")("Select All"))+"\n                ")]),t._v(" "),n("b-button",{attrs:{size:"sm"},on:{click:function(e){return t.$emit("resetSelection")}}},[t._v("\n                    "+t._s(t._f("localize")("Unselect All"))+"\n                ")])],1),t._v(" "),n("b-dropdown",{staticClass:"ml-auto",attrs:{size:"sm",text:"With Selected",disabled:!t.hasSelection}},[n("b-dropdown-item",{on:{click:t.hideSelected}},[t._v("\n                    "+t._s(t._f("localize")("Hide Datasets"))+"\n                ")]),t._v(" "),n("b-dropdown-item",{on:{click:t.unhideSelected}},[t._v("\n                    "+t._s(t._f("localize")("Unhide Datasets"))+"\n                ")]),t._v(" "),n("b-dropdown-item",{on:{click:t.deleteSelected}},[t._v("\n                    "+t._s(t._f("localize")("Delete Datasets"))+"\n                ")]),t._v(" "),n("b-dropdown-item",{on:{click:t.undeleteSelected}},[t._v("\n                    "+t._s(t._f("localize")("Undelete Datasets"))+"\n                ")]),t._v(" "),n("b-dropdown-item",{on:{click:t.purgeSelected}},[t._v("\n                    "+t._s(t._f("localize")("Permanently Delete Datasets"))+"\n                ")]),t._v(" "),n("b-dropdown-item",{on:{click:t.buildDatasetList}},[t._v("\n                    "+t._s(t._f("localize")("Build Dataset List"))+"\n                ")]),t._v(" "),n("b-dropdown-item",{on:{click:t.buildDatasetPair}},[t._v("\n                    "+t._s(t._f("localize")("Build Dataset Pair"))+"\n                ")]),t._v(" "),n("b-dropdown-item",{on:{click:t.buildListOfPairs}},[t._v("\n                    "+t._s(t._f("localize")("Build List of Dataset Pairs"))+"\n                ")]),t._v(" "),n("b-dropdown-item",{on:{click:t.buildCollectionFromRules}},[t._v("\n                    "+t._s(t._f("localize")("Build Collection from Rules"))+"\n                ")])],1)],1):t._e()],1),t._v(" "),n("b-modal",{attrs:{id:"show-hidden-content",title:"Show Hidden Datasets","title-tag":"h2"},on:{ok:t.unhideAll}},[n("p",[t._v(t._s(t._f("localize")("Really unhide all hidden datasets?")))])]),t._v(" "),n("b-modal",{attrs:{id:"delete-hidden-content",title:"Delete Hidden Datasets","title-tag":"h2"},on:{ok:t.deleteAllHidden}},[n("p",[t._v(t._s(t._f("localize")("Really delete all hidden datasets?")))])]),t._v(" "),n("b-modal",{attrs:{id:"purge-deleted-content",title:"Purge Deleted Datasets","title-tag":"h2"},on:{ok:t.purgeAllDeleted}},[n("p",[t._v(t._s(t._f("localize")("Really delete all deleted datasets permanently? This cannot be undone.")))])])],1)}),[],!1,null,null,null).exports;function al(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var rl={data:function(){return{tool:null}},computed:{modalTitle:function(){return this.tool?"Tool Help: ".concat(this.tool.name):"Tool Help"},helpHtml:function(){return this.tool?this.tool.help:""},hasTool:{get:function(){return Boolean(this.tool)},set:function(t){this.tool=null}}},methods:{toggleToolHelp:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.tool||n.tool.job_id!=t){e.next=4;break}n.closePanel(),e.next=7;break;case 4:return e.next=6,Object(gs.l)(t);case 6:n.tool=e.sent;case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(t){al(r,i,a,o,s,"next",t)}function s(t){al(r,i,a,o,s,"throw",t)}o(void 0)}))})()},closePanel:function(){this.tool=null}},created:function(){this.eventHub.$on("toggleToolHelp",this.toggleToolHelp)}},ol=Object(T.a)(rl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{title:t.modalTitle},model:{value:t.hasTool,callback:function(e){t.hasTool=e},expression:"hasTool"}},[t.tool&&t.tool.help.length?n("div",{domProps:{innerHTML:t._s(t.tool.help)}}):n("p",[t._v(t._s(t._f("localize")("Tool help is unavailable for this dataset.")))])])}),[],!1,null,null,null).exports,sl=n(863),ll=n.n(sl);function cl(t){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var dl={inserted:function(t,e){var n=(e.modifiers||{}).self,i=void 0!==n&&n,a=e.value,r="object"===cl(a)&&a.options||{passive:!0},o="function"==typeof a||"handleEvent"in a?a:a.handler,s=i?t:e.arg?document.querySelector(e.arg):window;s&&(s.addEventListener("scroll",o,r),t._onScroll={handler:o,options:r,target:i?void 0:s})},unbind:function(t){if(t._onScroll){var e=t._onScroll,n=e.handler,i=e.target;(void 0===i?t:i).removeEventListener("scroll",n),delete t._onScroll}}};function ul(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";if(null!=t&&""!==t){if(isNaN(+t))return String(t);var n=Number(t);return"".concat(n).concat(e)}}n(2048);function hl(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return fl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function fl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var pl={directives:{Scroll:dl},props:{keyField:{type:String,required:!0},scrollDebounce:{type:Number,required:!1,default:250},itemHeight:{required:!0,validator:function(t){var e=Number(t);return!isNaN(e)&&!(e<0)}},items:{type:Array,required:!0},topPlaceholders:{type:Number,default:0},bottomPlaceholders:{type:Number,default:0},suppressionPeriod:{type:Number,default:250},scrollTo:{default:null}},data:function(){return{scrollTop:0}},computed:{contentStyle:function(){return{paddingTop:ul(this.topPlaceholders*this.itemHeight),paddingBottom:ul(this.bottomPlaceholders*this.itemHeight)}},cursor:function(){if(this.scrollTop>0){var t=this.getRefProp("content","clientHeight",0);if(void 0!==t&&t>0)return 1*this.scrollTop/t}return 0},scrollEventPayload:function(){var t=this.getFirstVisibleElement();return{cursor:this.cursor,key:null==t?void 0:t.dataset.key,keyIndex:null==t?void 0:t.dataset.index}}},watch:{scrollEventPayload:function(t){this._suppressScrollEvent||this.$emit("scroll",t)},scrollTo:function(t){var e=this;this.suppress(),this.$nextTick((function(){var n=e.$refs,i=n.scrollToMe,a=n.container;i&&t&&i.dataset.key==t&&!ll()(i,{container:a})&&i.scrollIntoView(!0),setTimeout((function(){return e.unsuppress()}),100)}))}},methods:{onScroll:function(){this.scrollTop=this.$refs.container.scrollTop},getScrollTop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"container";return this.getRefProp(t,"scrollTop")},getRefProp:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return t in this.$refs&&e in this.$refs[t]?this.$refs[t][e]:n},getRowElementByKey:function(t){if(this.$refs.contentlist)return Array.from(this.$refs.contentlist.children).find((function(e){return e.dataset.key==t}))},getFirstVisibleElement:function(){var t=this.$refs,e=t.container,n=t.contentlist,i=void 0;if(e&&n){var a,r=hl(n.children);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(ll()(o,{container:e})){i=o;break}}}catch(t){r.e(t)}finally{r.f()}}return i},suppress:function(){this._suppressScrollEvent=!0},unsuppress:function(){var t=this;this._suppressTimeoutId&&(clearTimeout(this._suppressTimeoutId),this._suppressTimeoutId=null),this._suppressTimeoutId=setTimeout((function(){t._suppressScrollEvent=!1}),this.suppressionPeriod)},renderList:function(){return this.items.map(this.renderItem)},renderItem:function(t,e){var n=this.$createElement,i=t[this.keyField],a=this.renderSlot("default",{key:i,index:e,item:t}),r=void 0,o="";return i==this.scrollTo&&(r="scrollToMe",o="scrollToMe"),n("li",{key:i,ref:r,staticClass:o,attrs:{"data-index":e+this.topPlaceholders,"item-index":e,"data-key":i}},a)},renderSlot:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.$scopedSlots[t]?this.$scopedSlots[t](e instanceof Function?e():e):!this.$slots[t]||e&&!n?void 0:this.$slots[t]},report:function(t){if(console.groupCollapsed(t),console.log("scrollTo",this.scrollTo),console.log("items.length",this.items.length),this.items.length>0){var e=this.items;console.log("items","".concat(e[0].hid," -> ").concat(e[e.length-1].hid))}console.log("topPlaceholders",this.topPlaceholders),console.log("bottomPlaceholders",this.bottomPlaceholders),console.groupEnd()}},render:function(t){var e=t("ul",{ref:"contentlist"},this.renderList()),n=t("div",{ref:"content",staticClass:"scrollContent",style:this.contentStyle,attrs:{"data-top-rows":this.topPlaceholders,"data-bottom-rows":this.bottomPlaceholders}},[e]);return t("div",{ref:"container",staticClass:"virtualScroller",directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}]},[n])}},ml=(n(2049),{props:{item:{type:Object,required:!0},index:{type:Number,required:!0}}}),_l=Object(T.a)(ml,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"collapsed",attrs:{"data-state":"waiting"}},[e("nav",{staticClass:"content-top-menu d-flex align-items-center justify-content-between p-1"},[e("h5",{staticClass:"flex-grow-1 overflow-hidden mr-auto text-nowrap text-truncate"},[e("span",{staticClass:"name"},[this._v("Placholder: "+this._s(this.item.hid))])])])])}),[],!1,null,null,null).exports,gl=n(461),vl=n(42);function yl(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function bl(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){yl(r,i,a,o,s,"next",t)}function s(t){yl(r,i,a,o,s,"throw",t)}o(void 0)}))}}var wl={components:{DatasetUI:gl.a},props:{item:{type:Object,required:!0}},computed:{dataset:function(){return new wr.c(this.item)}},methods:{onDelete:function(){var t=arguments,e=this;return bl(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},n.next=3,Object(gs.e)(e.item,i);case 3:return a=n.sent,n.next=6,Object(Qr.b)(a);case 6:case"end":return n.stop()}}),n)})))()},onUnhide:function(){var t=this;return bl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onUpdate({visible:!0});case 2:case"end":return e.stop()}}),e)})))()},onUndelete:function(){var t=this;return bl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onUpdate({deleted:!1});case 2:case"end":return e.stop()}}),e)})))()},onUpdate:function(t){var e=this;return bl(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gs.o)(e.item,t);case 2:return i=n.sent,n.next=5,Object(Qr.b)(i);case 5:case"end":return n.stop()}}),n)})))()},onCopyLink:function(){var t=this.dataset.getUrl("download"),e=this.localize("Link is copied to your clipboard");Object(en.a)(Object(vl.a)(t),e)}}},kl=Object(T.a)(wl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.dataset?n("DatasetUI",t._g(t._b({attrs:{dataset:t.dataset},on:{"update:dataset":t.onUpdate,delete:t.onDelete,undelete:t.onUndelete,unhide:t.onUnhide,"copy-link":t.onCopyLink}},"DatasetUI",t.$attrs,!1),t.$listeners)):t._e()}),[],!1,null,null,null).exports,xl=(n(566),kl);function Sl(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function Ml(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Sl(r,i,a,o,s,"next",t)}function s(t){Sl(r,i,a,o,s,"throw",t)}o(void 0)}))}}var Cl={components:{DscUI:n(462).a},props:{item:{type:Object,required:!0}},computed:{dsc:function(){return new wr.d(this.item)}},methods:{onDelete:function(){var t=arguments,e=this;return Ml(regeneratorRuntime.mark((function n(){var i,a,r,o,s,l,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},a=i.recursive,r=void 0!==a&&a,o=i.purge,s=void 0!==o&&o,l=e.item,n.next=5,Object(gs.f)(l,r,s);case 5:if(!(c=n.sent).deleted){n.next=10;break}return d=Object.assign(l,{isDeleted:c.deleted}),n.next=10,Object(Qr.b)(d);case 10:case"end":return n.stop()}}),n)})))()},onUnhide:function(){var t=this;return Ml(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onUpdate({visible:!0});case 2:case"end":return e.stop()}}),e)})))()},onUndelete:function(){var t=this;return Ml(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onUpdate({deleted:!1});case 2:case"end":return e.stop()}}),e)})))()},onUpdate:function(t){var e=this;return Ml(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(gs.o)(e.item,t);case 2:return i=n.sent,n.next=5,Object(Qr.b)(i);case 5:case"end":return n.stop()}}),n)})))()}}},Tl=Object(T.a)(Cl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.dsc?n("DscUI",t._g(t._b({staticClass:"dataset-collection",attrs:{dsc:t.dsc},on:{"update:dsc":t.onUpdate,delete:t.onDelete,undelete:t.onUndelete,unhide:t.onUnhide}},"DscUI",t.$attrs,!1),t.$listeners)):t._e()}),[],!1,null,null,null).exports,jl=(n(567),n(565),{props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},computed:{dsc:function(){return new Zo.a(this.item)},state:function(){return this.dsc.state||wr.g.OK}}});function Ol(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ll(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ol(Object(n),!0).forEach((function(e){Dl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ol(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Al={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.contentItemComponent,t._g(t._b({tag:"component",staticClass:"content-item p-1",class:{loading:t.loading},attrs:{tabindex:t.index},nativeOn:{mouseover:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.setFocus(t.index))},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-up",void 0,e.key,void 0)?null:e.target!==e.currentTarget?null:(e.stopPropagation(),t.setFocus(t.index-1))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-down",void 0,e.key,void 0)?null:e.target!==e.currentTarget?null:(e.stopPropagation(),t.setFocus(t.index+1))}]}},"component",t.bindProps,!1),t.$listeners))},staticRenderFns:[],components:{Placeholder:_l,Dataset:xl,DatasetCollection:Tl,Subcollection:Object(T.a)(jl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._g(t._b({staticClass:"collapsed",attrs:{"data-state":t.state},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-right",void 0,e.key,void 0)?null:e.target!==e.currentTarget?null:(e.stopPropagation(),e.preventDefault(),t.$emit("viewCollection"))},click:function(e){return e.stopPropagation(),t.$emit("viewCollection")}}},"div",t.$attrs,!1),t.$listeners),[n("nav",{staticClass:"content-top-menu d-flex align-items-center justify-content-between p-1"},[n("h5",{staticClass:"flex-grow-1 overflow-hidden mr-auto text-nowrap text-truncate"},[n("span",{staticClass:"name"},[t._v(t._s(t.dsc.name))]),t._v(" "),n("span",{staticClass:"description"},[t._v("\n                ("+t._s(t._f("localize")(t.dsc.collectionType))+" "+t._s(t._f("localize")(t.dsc.collectionCountDescription))+")\n            ")])])])])}),[],!1,null,null,null).exports},props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},data:function(){return{suppressFocus:!1}},methods:{setFocus:function(t){if(!this.suppressFocus){var e=this.$el.closest(".scroller").querySelector('[tabindex="'.concat(t,'"]'));e&&e.focus()}}},computed:{loading:function(){return!this.item},contentItemComponent:function(){return"Placeholder"},bindProps:function(){return Ll(Ll({},this.$props),this.$attrs)}},created:function(){var t=this;this.$root.$on("bv::dropdown::show",(function(){return t.suppressFocus=!0})),this.$root.$on("bv::dropdown::hide",(function(){return t.suppressFocus=!1}))}},El={mixins:[Al],computed:{contentItemComponent:function(){switch(this.item.history_content_type){case"dataset":return"Dataset";case"dataset_collection":return"Subcollection";default:return"Placeholder"}}}},Il={components:{HistoryContentProvider:Po,Layout:ds,HistoryMessages:hs,HistoryDetails:Vs,HistoryEmpty:qs,ContentOperations:il,ToolHelpModal:ol,VirtualScroller:pl,HistoryContentItem:{mixins:[Al],computed:{contentItemComponent:function(){if(void 0===this.item.id)return"Placeholder";switch(this.item.history_content_type){case"dataset":return"Dataset";case"dataset_collection":return"DatasetCollection";default:return"Placeholder"}}}},ExpandedItems:os,SelectedItems:cs},props:{history:{type:wr.e,required:!0}},computed:{historyId:function(){return this.history.id}}},Pl=Object(T.a)(Il,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("HistoryContentProvider",{attrs:{parent:t.history},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.loading,a=e.params,r=e.payload,o=r.contents;void 0===o&&(o=[]);var s=r.startKey;void 0===s&&(s=null);var l=r.topRows;void 0===l&&(l=0);var c=r.bottomRows;void 0===c&&(c=0);var d=r.totalMatches;void 0===d&&(d=0);var u=e.handlers,h=u.updateParams,f=u.manualReload,p=u.setScrollPos;return[n("ExpandedItems",{attrs:{"scope-key":t.history.id,"get-item-key":function(t){return t.type_id}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.isExpanded,u=e.setExpanded;return[n("SelectedItems",{attrs:{"scope-key":t.history.id,"get-item-key":function(t){return t.type_id}},scopedSlots:t._u([{key:"default",fn:function(e){var m=e.selectedItems,_=e.showSelection,g=e.setShowSelection,v=e.selectItems,y=e.isSelected,b=e.setSelected,w=e.resetSelection;return[n("Layout",{scopedSlots:t._u([{key:"nav",fn:function(){return[t._t("nav")]},proxy:!0},{key:"details",fn:function(){return[n("HistoryDetails",t._g({staticClass:"history-details",attrs:{history:t.history}},t.$listeners))]},proxy:!0},{key:"messages",fn:function(){return[n("HistoryMessages",{staticClass:"history-messages m-2",attrs:{history:t.history}})]},proxy:!0},{key:"listcontrols",fn:function(){return[t.history.empty?t._e():n("ContentOperations",{attrs:{history:t.history,"total-matches":d,loading:i,params:a,"content-selection":m,"show-selection":_},on:{"update:params":h,"update:content-selection":v,"update:show-selection":g,resetSelection:w,selectAllContent:function(t){return v(o)},manualReload:f}})]},proxy:!0},{key:"listing",fn:function(){return[t.history.empty?n("HistoryEmpty",{staticClass:"m-2"}):n("VirtualScroller",{class:{loadingBackground:i},attrs:{"key-field":"hid","item-height":36,items:o,"scroll-to":s,"top-placeholders":l,"bottom-placeholders":c},on:{scroll:p},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item,a=e.index;return[n("HistoryContentItem",{attrs:{item:i,index:a,"show-selection":_,expanded:r(i),selected:y(i)},on:{"update:expanded":function(t){return u(i,t)},"update:selected":function(t){return b(i,t)},viewCollection:function(e){return t.$emit("viewCollection",i)}}})]}}],null,!0)})]},proxy:!0},{key:"modals",fn:function(){return[n("ToolHelpModal")]},proxy:!0}],null,!0)})]}}],null,!0)})]}}],null,!0)})]}}])})}),[],!1,null,null,null).exports,Yl={components:{PriorityMenuItem:fs.b,PriorityMenu:fs.a},props:{history:{type:wr.e,required:!0},selectedCollections:{type:Array,required:!0,validate:function(t){return t.length>0}}},computed:{rootCollection:function(){return this.selectedCollections[0]},breadCrumbOptions:function(){var t=this.selectedCollections.slice(0,-1);return t.map((function(e,n){return{key:e.type_id,value:t.slice(0,n+1),text:e.name}}))},downloadCollectionUrl:function(){var t="";return this.rootCollection&&(t="".concat(this.rootCollection.url,"/download")),t}},methods:{reselect:function(t){this.$emit("update:selectedCollections",t)},back:function(){var t=this.selectedCollections.slice(0,-1);this.reselect(t)},close:function(){this.reselect([])}}},Rl=Object(T.a)(Yl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.breadCrumbOptions.length?n("b-dropdown",{staticClass:"mr-auto",attrs:{size:"sm",text:"Go to...",boundary:"viewport"}},[n("b-dropdown-item",{on:{click:t.close}},[t._v(" History: "+t._s(t.history.name)+" ")]),t._v(" "),t._l(t.breadCrumbOptions,(function(e){return n("b-dropdown-item",{key:e.key,on:{click:function(n){return t.reselect(e.value)}}},[t._v("\n            "+t._s(e.text)+"\n        ")])}))],2):n("b-button",{staticClass:"mr-auto",attrs:{size:"sm"},on:{click:t.close}},[t._v(" Back to: "+t._s(t.history.name)+" ")]),t._v(" "),n("PriorityMenu",{attrs:{"starting-height":27}},[n("PriorityMenuItem",{key:"download-collection",attrs:{title:"Download Collection",icon:"fas fa-file-download",tag:"a",download:"",href:t.downloadCollectionUrl}}),t._v(" "),n("PriorityMenuItem",{key:"back-up",attrs:{title:"Back One",icon:"fas fa-level-up-alt"},on:{click:t.back}})],1)],1)}),[],!1,null,null,null).exports,Hl=n(99),Nl=n(570),$l={components:{ClickToEdit:ms.a,ContentTags:Nl.a,Nametag:Hl.a},props:{dsc:{type:wr.d,required:!0},writable:{type:Boolean,required:!0}}};function Fl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Wl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fl(Object(n),!0).forEach((function(e){zl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ul(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var Vl={components:{DscProvider:as,CollectionContentProvider:Qo,Layout:ds,TopNav:Rl,Details:Object(T.a)($l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"history-details"},[t.writable?n("ClickToEdit",{staticClass:"history-title mt-3",attrs:{value:t.dsc.name,"tag-name":"h3","tooltip-title":t._f("localize")("Rename collection...")},on:{input:function(e){return t.$emit("update:dsc",{name:e})}}}):n("h3",{staticClass:"history-title mt-3"},[t._v(t._s(t.dsc.name))]),t._v(" "),n("p",{staticClass:"mt-1"},[n("i",{staticClass:"fas fa-folder"}),t._v("\n        a "+t._s(t._f("localize")(t.dsc.collectionType))+"\n        "+t._s(t._f("localize")(t.dsc.collectionCount))+"\n    ")]),t._v(" "),n("transition",{attrs:{name:"shutterfade"}},[t.writable?n("ContentTags",{attrs:{content:t.dsc}}):t.dsc.tags&&t.dsc.tags.length?n("div",{staticClass:"nametags p-1"},t._l(t.dsc.tags,(function(t){return n("Nametag",{key:t,attrs:{tag:t}})})),1):t._e()],1)],1)}),[],!1,null,null,null).exports,VirtualScroller:pl,CollectionContentItem:El,ExpandedItems:os},props:{history:{type:wr.e,required:!0},selectedCollections:{type:Array,required:!0}},computed:{selectedCollection:function(){var t=this.selectedCollections;return t[t.length-1]},isRoot:function(){return this.selectedCollection==this.selectedCollections[0]},writable:function(){return this.isRoot}},methods:{updateDsc:function(t,e){var n,i=this;return(n=regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.writable){n.next=6;break}return n.next=3,Object(gs.o)(t,e);case 3:return a=n.sent,n.next=6,Object(Qr.b)(Wl(Wl({},t),a));case 6:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(i,a){var r=n.apply(t,e);function o(t){Ul(r,i,a,o,s,"next",t)}function s(t){Ul(r,i,a,o,s,"throw",t)}o(void 0)}))})()}}};function Bl(t){return function(t){if(Array.isArray(t))return ql(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ql(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ql(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ql(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Gl={components:{HistoryComponent:Pl,CurrentCollection:Object(T.a)(Vl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DscProvider",{attrs:{"is-root":t.isRoot,collection:t.selectedCollection},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.dsc;return[i?n("CollectionContentProvider",{attrs:{parent:i},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.payload,r=a.contents;void 0===r&&(r=[]);var o=a.startKey;void 0===o&&(o=null);var s=a.topRows;void 0===s&&(s=0);var l=a.bottomRows;void 0===l&&(l=0);var c=e.handlers.setScrollPos;return[n("ExpandedItems",{attrs:{"scope-key":t.selectedCollection.id,"get-item-key":function(t){return t.type_id}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.isExpanded,d=e.setExpanded;return[n("Layout",{scopedSlots:t._u([{key:"nav",fn:function(){return[n("TopNav",t._g({attrs:{history:t.history,"selected-collections":t.selectedCollections}},t.$listeners))]},proxy:!0},{key:"details",fn:function(){return[n("Details",{attrs:{dsc:i,writable:t.writable},on:{"update:dsc":function(e){return t.updateDsc(i,e)}}})]},proxy:!0},{key:"listing",fn:function(){return[n("VirtualScroller",{attrs:{"key-field":"element_index","item-height":36,items:r,"scroll-to":o,"top-placeholders":s,"bottom-placeholders":l},on:{scroll:c},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item,r=e.index;return[n("CollectionContentItem",{attrs:{item:i,index:r,expanded:a(i),writable:t.writable},on:{"update:expanded":function(t){return d(i,t)},viewCollection:function(e){return t.$emit("viewCollection",i)}}})]}}],null,!0)})]},proxy:!0}],null,!0)})]}}],null,!0)})]}}],null,!0)}):t._e()]}}])})}),[],!1,null,null,null).exports},props:{history:{type:wr.e,required:!0}},data:function(){return{breadcrumbs:[]}},provide:{STATES:wr.g},methods:{drillDown:function(t){this.breadcrumbs=[].concat(Bl(this.breadcrumbs),[t])}}},Jl=Object(T.a)(Gl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.history&&!t.breadcrumbs.length?n("HistoryComponent",t._g({attrs:{history:t.history},on:{viewCollection:t.drillDown},scopedSlots:t._u([t._l(t.$scopedSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,{history:t.history},e)]}}}))],null,!0)},t.$listeners)):t.breadcrumbs.length?n("CurrentCollection",{attrs:{history:t.history,"selected-collections":t.breadcrumbs},on:{"update:selectedCollections":function(e){t.breadcrumbs=e},"update:selected-collections":function(e){t.breadcrumbs=e},viewCollection:t.drillDown}}):n("div",[n("span",{staticClass:"sr-only"},[t._v("Loading...")])])}),[],!1,null,null,null).exports,Kl=n(264),Xl={props:{currentHistory:{type:Object,required:!0},histories:{type:Array,default:function(){return[]}}}},Ql=Object(T.a)(Xl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-dropdown",{attrs:{text:"Select history...",size:"sm"}},t._l(t.histories,(function(e){return n("b-dropdown-item",{key:e.id,attrs:{active:t.currentHistory.id==e.id},on:{click:function(n){return t.$emit("update:currentHistory",e)}}},[t._v("\n        "+t._s(e.name)+"\n    ")])})),1)}),[],!1,null,null,null).exports;function Zl(t,e,n,i,a,r,o){try{var s=t[r](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,a)}var tc={mixins:[ps.a],components:{PriorityMenu:fs.a,PriorityMenuItem:fs.b},methods:{clearCache:function(){return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Qr.i)();case 2:return t.next=4,Object(Qr.c)();case 4:Object(vl.d)();case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function o(t){Zl(r,i,a,o,s,"next",t)}function s(t){Zl(r,i,a,o,s,"throw",t)}o(void 0)}))})();var t},switchToLegacyHistoryPanel:lr.c}},ec=Object(T.a)(tc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PriorityMenu",{attrs:{"starting-height":27}},[n("PriorityMenuItem",{key:"create-new-history",attrs:{title:"Create New History",icon:"fa fa-plus"},on:{click:function(e){return t.$emit("createNewHistory")}}}),t._v(" "),n("PriorityMenuItem",{key:"view-all-histories",attrs:{title:"View All Histories",icon:"fa fa-columns"},on:{click:function(e){return t.redirect("/history/view_multiple")}}}),t._v(" "),n("PriorityMenuItem",{key:"saved-histories",attrs:{title:"Saved Histories",icon:"fas fa-save"},on:{click:function(e){return t.backboneRoute("/histories/list")}}}),t._v(" "),n("PriorityMenuItem",{key:"clear-history-cache",attrs:{title:"Clear Cache",icon:"fa fa-refresh"},on:{click:function(e){return e.stopPropagation(),t.clearCache(e)}}}),t._v(" "),n("PriorityMenuItem",{key:"use-legacy-history",attrs:{title:"Return to legacy history panel",icon:"fas fa-exchange-alt"},on:{click:t.switchToLegacyHistoryPanel}})],1)}),[],!1,null,null,null).exports,nc={components:{CurrentUser:Kl.a,UserHistories:rs.a,HistoryPanel:Jl,HistorySelector:Ql,HistoriesMenu:ec}},ic=Object(T.a)(nc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CurrentUser",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.user;return[i?n("UserHistories",{attrs:{user:i},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.currentHistory,a=e.histories,r=e.handlers;return[i?n("HistoryPanel",t._g({attrs:{history:i},scopedSlots:t._u([{key:"nav",fn:function(){return[n("div",[n("HistorySelector",{attrs:{histories:a,"current-history":i},on:{"update:currentHistory":r.setCurrentHistory}}),t._v(" "),n("HistoriesMenu",t._g({},r))],1)]},proxy:!0}],null,!0)},r)):n("div",{staticClass:"flex-grow-1 loadingBackground h-100"},[n("span",{directives:[{name:"localize",rawName:"v-localize"}],staticClass:"sr-only"},[t._v("Loading History...")])])]}}],null,!0)}):t._e()]}}])})}),[],!1,null,null,null).exports,ac=(n(2050),vr.CurrentHistoryView.extend({loadHistory:function(t,e){return this.setModel(new mi.a({id:t})),this.trigger("loading"),e.view="dev-detailed",this.model.fetch(e)}})),rc=f.a.View.extend({initialize:function(t,e){var n=Object(o.a)();this.userIsAnonymous=n.user.isAnonymous(),this.allow_user_dataset_purge=e.config.allow_user_dataset_purge,this.root=e.root,this.historyView=new ac({fakeHistoryViewModel:!0,className:"fake ".concat(vr.CurrentHistoryView.prototype.className," middle"),purgeAllowed:this.allow_user_dataset_purge,linkTarget:"galaxy_main"}),n.currHistoryPanel=this.historyView,n.currHistoryPanel.listenToGalaxy(n),this.model=new f.a.Model({}),this.setElement("<div/>"),this.historyView.setElement(this.$el),this.historyView.connectToQuotaMeter(n.quotaMeter),n.listenTo(this.historyView,"history-size-change",(function(){n.user.fetch({url:"".concat(n.user.urlRoot(),"/").concat(n.user.id||"current")})})),Ba.a.subscribe((function(t){var e=t.type,i=t.payload;"betaHistory/setCurrentHistoryId"==e&&n.currHistoryPanel.setModel(new mi.a({id:i}))}))},render:function(){u()("#right > .unified-panel-header").remove(),u()("#right > .unified-panel-controls").remove(),u()("#right > .unified-panel-body").remove(),u()("#right").addClass("beta").prepend(this.$el);var t=this.$el[0];return Object(rr.a)(ic)({},t),this}});Object(a.a)((function(t,e){var n=e.options,i=void 0===n?{}:n;console.log("Analysis custom page setup");var s=Object(lr.a)()?rc:yr,d=Object.assign({},i,{config:Object.assign({},i.config,{hide_panels:t.params.hide_panels,hide_masthead:t.params.hide_masthead}),Left:or,Right:s,Router:c.a.extend({routes:{"(/)(#)(_=_)":"home","(/)root*":"home","(/)login/confirm":"show_new_user_confirmation","(/)tools/view":"show_tools_view","(/)tools/json":"show_tools_json","(/)tours(/)(:tour_id)":"show_tours","(/)user(/)":"show_user","(/)user(/)cloud_auth":"show_cloud_auth","(/)user(/)external_ids":"show_external_ids","(/)user(/)(:form_id)":"show_user_form","(/)pages(/)create(/)":"show_pages_create","(/)pages(/)edit(/)":"show_pages_edit","(/)pages(/)sharing(/)":"show_pages_sharing","(/)pages(/)(:action_id)":"show_pages","(/)visualizations(/)":"show_plugins","(/)visualizations(/)edit(/)":"show_visualizations_edit","(/)visualizations(/)sharing(/)":"show_visualizations_sharing","(/)visualizations/(:action_id)":"show_visualizations","(/)workflows/import":"show_workflows_import","(/)workflows/trs_import":"show_workflows_trs_import","(/)workflows/trs_search":"show_workflows_trs_search","(/)workflows/run(/)":"show_workflows_run","(/)workflows(/)list":"show_workflows","(/)workflows/invocations":"show_workflow_invocations","(/)workflows/invocations/report":"show_workflow_invocation_report","(/)workflows/list_published(/)":"show_workflows_published","(/)workflows/create(/)":"show_workflows_create","(/)histories(/)citations(/)":"show_history_citations","(/)histories(/)rename(/)":"show_histories_rename","(/)histories(/)sharing(/)":"show_histories_sharing","(/)histories(/)import(/)":"show_histories_import","(/)histories(/)(:history_id)(/)export(/)":"show_history_export","(/)histories(/)permissions(/)":"show_histories_permissions","(/)histories/view":"show_history_view","(/)histories/show_structure":"show_history_structure","(/)histories(/)(:action_id)":"show_histories","(/)datasets(/)list(/)":"show_datasets","(/)custom_builds":"show_custom_builds","(/)datasets/edit":"show_dataset_edit_attributes","(/)datasets/error":"show_dataset_error","(/)interactivetool_entry_points(/)list":"show_interactivetool_list","(/)library/folders(/)(:folder_id)":"show_library_folder"},require_login:["show_user","show_user_form","show_workflows","show_cloud_auth","show_external_ids"],authenticate:function(t,e){var n=Object(o.a)();return n.user&&n.user.id||-1==this.require_login.indexOf(e)},_display_vue_helper:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=k.default.extend(t),r=document.createElement("div");n&&(r.active_tab=n),this.page.display(r,i),new a({store:Ba.a,propsData:e}).$mount(r)},show_tours:function(t){t?wt.a.giveTourById(t):this.page.display(new wt.a.ToursView)},show_new_user_confirmation:function(){this._display_vue_helper(Va.a)},show_user:function(){var t=Object(o.a)();this._display_vue_helper(Q,{enableQuotas:t.config.enable_quotas,userId:t.user.id})},show_user_form:function(t){var e=Object(o.a)(),n=G();n.user_id=e.params.id,this.page.display(new H.a.View(r.default.extend(n[t],{active_tab:"user"})))},show_interactivetool_list:function(){this._display_vue_helper(Gt)},show_library_folder:function(t){var e;null===(e=this.page.toolPanel)||void 0===e||e.component.hide(0),this.page.panels.right.hide(),this._display_vue_helper(Ee,{folder_id:t})},show_cloud_auth:function(){this._display_vue_helper(La)},show_external_ids:function(){this._display_vue_helper(Ua)},show_visualizations:function(t){var e="list_published"==t?"shared":"user";this.page.display(new St.View({action_id:t,plural:"Visualizations",item:"visualization",active_tab:e}))},show_visualizations_edit:function(){this.page.display(new H.a.View({url:"visualization/edit?id=".concat(q.a.get("id")),redirect:"visualizations/list",active_tab:"visualization"}))},show_visualizations_sharing:function(){this._display_vue_helper(B,{id:q.a.get("id"),plural_name:"Visualizations",model_class:"Visualization"})},show_workflows_published:function(){var t=q.a.get("f-username");this.page.display(new kt.a({url_base:"".concat(Object(a.b)(),"workflow/list_published"),active_tab:"shared",url_data:{"f-username":null==t?"":t}}))},show_history_view:function(){this._display_vue_helper(yn,{id:q.a.get("id")})},show_workflow_invocation_report:function(){var t=q.a.get("id");this._display_vue_helper(xn,{invocationId:t},null,!0)},show_workflow_invocations:function(){this._display_vue_helper(Jn,{})},show_history_structure:function(){this._display_vue_helper(_n,{id:q.a.get(" id: ")})},show_histories:function(t){var e=new vi.View({action_id:t});this.page.display(e)},show_history_citations:function(){this._display_vue_helper(ai,{id:q.a.get("id"),source:"histories"})},show_histories_rename:function(){this.page.display(new H.a.View({url:"history/rename?id=".concat(q.a.get("id")),redirect:"histories/list"}))},show_histories_sharing:function(){this._display_vue_helper(B,{id:q.a.get("id"),plural_name:"Histories",model_class:"History"})},show_histories_import:function(){this._display_vue_helper(Ze)},show_history_export:function(t){this._display_vue_helper(hn,{historyId:t})},show_tools_view:function(){var t;null===(t=this.page.toolPanel)||void 0===t||t.component.hide(),this.page.panels.right.hide(),this._display_vue_helper(ci)},show_tools_json:function(){this._display_vue_helper(fi)},show_histories_permissions:function(){this.page.display(new H.a.View({url:"history/permissions?id=".concat(q.a.get("id")),redirect:"histories/list"}))},show_datasets:function(){this._display_vue_helper(_t)},show_pages:function(t){var e="list_published"==t?"shared":"user";this.page.display(new St.View({action_id:t,plural:"Pages",item:"page",active_tab:e}))},show_pages_create:function(){var t="page/create",e=q.a.get("invocation_id");e&&(t+="?invocation_id=".concat(e)),this.page.display(new H.a.View({url:t,redirect:"pages/list",active_tab:"user"}))},show_pages_edit:function(){this.page.display(new H.a.View({url:"page/edit?id=".concat(q.a.get("id")),redirect:"pages/list",active_tab:"user"}))},show_pages_sharing:function(){this._display_vue_helper(B,{id:q.a.get("id"),plural_name:"Pages",model_class:"Page"})},show_plugins:function(){this._display_vue_helper(bi)},show_workflows:function(){this._display_vue_helper(Ne)},show_workflows_create:function(){this.page.display(new H.a.View({url:"workflow/create",redirect:"workflow/editor",active_tab:"workflow",submit_title:"Create",submit_icon:"fa-check",cancel_redirect:"workflows/list"}))},show_workflows_run:function(){this._loadWorkflow()},show_workflows_import:function(){this._display_vue_helper(Tt)},show_workflows_trs_import:function(){var t={queryTrsServer:q.a.get("trs_server"),queryTrsId:q.a.get("trs_id"),queryTrsVersionId:q.a.get("trs_version"),isRun:"true"===q.a.get("run_form")};this._display_vue_helper(Ht,t)},show_workflows_trs_search:function(){this._display_vue_helper(Ft)},show_custom_builds:function(){var t=this,e=this.page.historyPanel.historyView;e&&e.model&&e.model.id?this._display_vue_helper(bt):window.setTimeout((function(){t.show_custom_builds()}),500)},show_dataset_edit_attributes:function(){this.page.display(new Mi.View)},show_dataset_error:function(){this.page.display(new xi.View)},home:function(t){t.tool_id||t.job_id?"upload1"===t.tool_id?(this.page.toolPanel.upload.show(),this._loadCenterIframe("welcome")):this._loadToolForm(t):t.workflow_id?this._loadWorkflow():t.m_c?this._loadCenterIframe("".concat(t.m_c,"/").concat(t.m_a)):this._loadCenterIframe("welcome")},_loadToolForm:function(t){t.tool_id&&(t.id=l()(t.tool_id)),t.version&&(t.version=l()(t.version)),this.page.display(new R.View(t))},_loadCenterIframe:function(t,e){t=(e=e||Object(a.b)())+t,this.page.$("#galaxy_main").prop("src",t)},_loadWorkflow:function(){var t=q.a.get("id"),e=Object(o.a)(),n="prefer"==e.config.simplified_workflow_run_ui;"prefer"==q.a.get("simplified_workflow_run_ui")&&(n=!0);var i={workflowId:t,preferSimpleForm:n,simpleFormTargetHistory:e.config.simplified_workflow_run_ui_target_history,simpleFormUseJobCache:"on"==e.config.simplified_workflow_run_ui_job_cache};this._display_vue_helper(qn,i,"workflow")}})});t.page=new br.a.View(d)})),window.addEventListener("load",(function(){return Object(a.d)("analysis")}))}]);
//# sourceMappingURL=analysis.bundled.js.map